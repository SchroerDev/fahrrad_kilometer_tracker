(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=r(c);fetch(c.href,f)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ib(e){const n=Object.create(null);for(const r of e.split(","))n[r]=1;return r=>r in n}const gi={},kd=[],js=()=>{},DE=()=>!1,Ig=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ab=e=>e.startsWith("onUpdate:"),Tr=Object.assign,Eb=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},RE=Object.prototype.hasOwnProperty,li=(e,n)=>RE.call(e,n),yn=Array.isArray,Pd=e=>Ag(e)==="[object Map]",wC=e=>Ag(e)==="[object Set]",kn=e=>typeof e=="function",Oi=e=>typeof e=="string",Al=e=>typeof e=="symbol",Ii=e=>e!==null&&typeof e=="object",SC=e=>(Ii(e)||kn(e))&&kn(e.then)&&kn(e.catch),CC=Object.prototype.toString,Ag=e=>CC.call(e),LE=e=>Ag(e).slice(8,-1),TC=e=>Ag(e)==="[object Object]",Mb=e=>Oi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cf=Ib(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Eg=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},zE=/-(\w)/g,va=Eg(e=>e.replace(zE,(n,r)=>r?r.toUpperCase():"")),BE=/\B([A-Z])/g,Xu=Eg(e=>e.replace(BE,"-$1").toLowerCase()),Ws=Eg(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ey=Eg(e=>e?`on${Ws(e)}`:""),Sl=(e,n)=>!Object.is(e,n),Jp=(e,...n)=>{for(let r=0;r<e.length;r++)e[r](...n)},d_=(e,n,r,s=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:s,value:r})},h_=e=>{const n=parseFloat(e);return isNaN(n)?e:n},VE=e=>{const n=Oi(e)?Number(e):NaN;return isNaN(n)?e:n};let jw;const Mg=()=>jw||(jw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function zt(e){if(yn(e)){const n={};for(let r=0;r<e.length;r++){const s=e[r],c=Oi(s)?jE(s):zt(s);if(c)for(const f in c)n[f]=c[f]}return n}else if(Oi(e)||Ii(e))return e}const OE=/;(?![^(]*\))/g,FE=/:([^]+)/,$E=/\/\*[^]*?\*\//g;function jE(e){const n={};return e.replace($E,"").split(OE).forEach(r=>{if(r){const s=r.split(FE);s.length>1&&(n[s[0].trim()]=s[1].trim())}}),n}function gt(e){let n="";if(Oi(e))n=e;else if(yn(e))for(let r=0;r<e.length;r++){const s=gt(e[r]);s&&(n+=s+" ")}else if(Ii(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}function NE(e){if(!e)return null;let{class:n,style:r}=e;return n&&!Oi(n)&&(e.class=gt(n)),r&&(e.style=zt(r)),e}const UE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GE=Ib(UE);function kC(e){return!!e||e===""}const PC=e=>!!(e&&e.__v_isRef===!0),Qn=e=>Oi(e)?e:e==null?"":yn(e)||Ii(e)&&(e.toString===CC||!kn(e.toString))?PC(e)?Qn(e.value):JSON.stringify(e,IC,2):String(e),IC=(e,n)=>PC(n)?IC(e,n.value):Pd(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[s,c],f)=>(r[My(s,f)+" =>"]=c,r),{})}:wC(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>My(r))}:Al(n)?My(n):Ii(n)&&!yn(n)&&!TC(n)?String(n):n,My=(e,n="")=>{var r;return Al(e)?`Symbol(${(r=e.description)!=null?r:n})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qr;class AC{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Qr,!n&&Qr&&(this.index=(Qr.scopes||(Qr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=Qr;try{return Qr=this,n()}finally{Qr=r}}}on(){++this._on===1&&(this.prevScope=Qr,Qr=this)}off(){this._on>0&&--this._on===0&&(Qr=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(this.effects.length=0,r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function Dd(e){return new AC(e)}function EC(){return Qr}function fr(e,n=!1){Qr&&Qr.cleanups.push(e)}let Pi;const Dy=new WeakSet;class MC{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Qr&&Qr.active&&Qr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Dy.has(this)&&(Dy.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||RC(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Nw(this),LC(this);const n=Pi,r=ps;Pi=this,ps=!0;try{return this.fn()}finally{zC(this),Pi=n,ps=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Lb(n);this.deps=this.depsTail=void 0,Nw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Dy.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){f_(this)&&this.run()}get dirty(){return f_(this)}}let DC=0,Tf,kf;function RC(e,n=!1){if(e.flags|=8,n){e.next=kf,kf=e;return}e.next=Tf,Tf=e}function Db(){DC++}function Rb(){if(--DC>0)return;if(kf){let n=kf;for(kf=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let e;for(;Tf;){let n=Tf;for(Tf=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(s){e||(e=s)}n=r}}if(e)throw e}function LC(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function zC(e){let n,r=e.depsTail,s=r;for(;s;){const c=s.prevDep;s.version===-1?(s===r&&(r=c),Lb(s),qE(s)):n=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=c}e.deps=n,e.depsTail=r}function f_(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(BC(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function BC(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Vf)||(e.globalVersion=Vf,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!f_(e))))return;e.flags|=2;const n=e.dep,r=Pi,s=ps;Pi=e,ps=!0;try{LC(e);const c=e.fn(e._value);(n.version===0||Sl(c,e._value))&&(e.flags|=128,e._value=c,n.version++)}catch(c){throw n.version++,c}finally{Pi=r,ps=s,zC(e),e.flags&=-3}}function Lb(e,n=!1){const{dep:r,prevSub:s,nextSub:c}=e;if(s&&(s.nextSub=c,e.prevSub=void 0),c&&(c.prevSub=s,e.nextSub=void 0),r.subs===e&&(r.subs=s,!s&&r.computed)){r.computed.flags&=-5;for(let f=r.computed.deps;f;f=f.nextDep)Lb(f,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function qE(e){const{prevDep:n,nextDep:r}=e;n&&(n.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=n,e.nextDep=void 0)}let ps=!0;const VC=[];function xo(){VC.push(ps),ps=!1}function wo(){const e=VC.pop();ps=e===void 0?!0:e}function Nw(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const r=Pi;Pi=void 0;try{n()}finally{Pi=r}}}let Vf=0;class HE{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zb{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!Pi||!ps||Pi===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Pi)r=this.activeLink=new HE(Pi,this),Pi.deps?(r.prevDep=Pi.depsTail,Pi.depsTail.nextDep=r,Pi.depsTail=r):Pi.deps=Pi.depsTail=r,OC(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const s=r.nextDep;s.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=s),r.prevDep=Pi.depsTail,r.nextDep=void 0,Pi.depsTail.nextDep=r,Pi.depsTail=r,Pi.deps===r&&(Pi.deps=s)}return r}trigger(n){this.version++,Vf++,this.notify(n)}notify(n){Db();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Rb()}}}function OC(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let s=n.deps;s;s=s.nextDep)OC(s)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const sg=new WeakMap,Ou=Symbol(""),m_=Symbol(""),Of=Symbol("");function ea(e,n,r){if(ps&&Pi){let s=sg.get(e);s||sg.set(e,s=new Map);let c=s.get(r);c||(s.set(r,c=new zb),c.map=s,c.key=r),c.track()}}function _o(e,n,r,s,c,f){const d=sg.get(e);if(!d){Vf++;return}const a=b=>{b&&b.trigger()};if(Db(),n==="clear")d.forEach(a);else{const b=yn(e),C=b&&Mb(r);if(b&&r==="length"){const w=Number(s);d.forEach((k,A)=>{(A==="length"||A===Of||!Al(A)&&A>=w)&&a(k)})}else switch((r!==void 0||d.has(void 0))&&a(d.get(r)),C&&a(d.get(Of)),n){case"add":b?C&&a(d.get("length")):(a(d.get(Ou)),Pd(e)&&a(d.get(m_)));break;case"delete":b||(a(d.get(Ou)),Pd(e)&&a(d.get(m_)));break;case"set":Pd(e)&&a(d.get(Ou));break}}Rb()}function WE(e,n){const r=sg.get(e);return r&&r.get(n)}function sd(e){const n=dn(e);return n===e?n:(ea(n,"iterate",Of),Xa(e)?n:n.map(Gr))}function Dg(e){return ea(e=dn(e),"iterate",Of),e}const ZE={__proto__:null,[Symbol.iterator](){return Ry(this,Symbol.iterator,Gr)},concat(...e){return sd(this).concat(...e.map(n=>yn(n)?sd(n):n))},entries(){return Ry(this,"entries",e=>(e[1]=Gr(e[1]),e))},every(e,n){return fo(this,"every",e,n,void 0,arguments)},filter(e,n){return fo(this,"filter",e,n,r=>r.map(Gr),arguments)},find(e,n){return fo(this,"find",e,n,Gr,arguments)},findIndex(e,n){return fo(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return fo(this,"findLast",e,n,Gr,arguments)},findLastIndex(e,n){return fo(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return fo(this,"forEach",e,n,void 0,arguments)},includes(...e){return Ly(this,"includes",e)},indexOf(...e){return Ly(this,"indexOf",e)},join(e){return sd(this).join(e)},lastIndexOf(...e){return Ly(this,"lastIndexOf",e)},map(e,n){return fo(this,"map",e,n,void 0,arguments)},pop(){return mf(this,"pop")},push(...e){return mf(this,"push",e)},reduce(e,...n){return Uw(this,"reduce",e,n)},reduceRight(e,...n){return Uw(this,"reduceRight",e,n)},shift(){return mf(this,"shift")},some(e,n){return fo(this,"some",e,n,void 0,arguments)},splice(...e){return mf(this,"splice",e)},toReversed(){return sd(this).toReversed()},toSorted(e){return sd(this).toSorted(e)},toSpliced(...e){return sd(this).toSpliced(...e)},unshift(...e){return mf(this,"unshift",e)},values(){return Ry(this,"values",Gr)}};function Ry(e,n,r){const s=Dg(e),c=s[n]();return s!==e&&!Xa(e)&&(c._next=c.next,c.next=()=>{const f=c._next();return f.value&&(f.value=r(f.value)),f}),c}const KE=Array.prototype;function fo(e,n,r,s,c,f){const d=Dg(e),a=d!==e&&!Xa(e),b=d[n];if(b!==KE[n]){const k=b.apply(e,f);return a?Gr(k):k}let C=r;d!==e&&(a?C=function(k,A){return r.call(this,Gr(k),A,e)}:r.length>2&&(C=function(k,A){return r.call(this,k,A,e)}));const w=b.call(d,C,s);return a&&c?c(w):w}function Uw(e,n,r,s){const c=Dg(e);let f=r;return c!==e&&(Xa(e)?r.length>3&&(f=function(d,a,b){return r.call(this,d,a,b,e)}):f=function(d,a,b){return r.call(this,d,Gr(a),b,e)}),c[n](f,...s)}function Ly(e,n,r){const s=dn(e);ea(s,"iterate",Of);const c=s[n](...r);return(c===-1||c===!1)&&Ob(r[0])?(r[0]=dn(r[0]),s[n](...r)):c}function mf(e,n,r=[]){xo(),Db();const s=dn(e)[n].apply(e,r);return Rb(),wo(),s}const YE=Ib("__proto__,__v_isRef,__isVue"),FC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Al));function XE(e){Al(e)||(e=String(e));const n=dn(this);return ea(n,"has",e),n.hasOwnProperty(e)}class $C{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,s){if(r==="__v_skip")return n.__v_skip;const c=this._isReadonly,f=this._isShallow;if(r==="__v_isReactive")return!c;if(r==="__v_isReadonly")return c;if(r==="__v_isShallow")return f;if(r==="__v_raw")return s===(c?f?oM:GC:f?UC:NC).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(s)?n:void 0;const d=yn(n);if(!c){let b;if(d&&(b=ZE[r]))return b;if(r==="hasOwnProperty")return XE}const a=Reflect.get(n,r,tr(n)?n:s);return(Al(r)?FC.has(r):YE(r))||(c||ea(n,"get",r),f)?a:tr(a)?d&&Mb(r)?a:a.value:Ii(a)?c?Gd(a):Sr(a):a}}class jC extends $C{constructor(n=!1){super(!1,n)}set(n,r,s,c){let f=n[r];if(!this._isShallow){const b=Tl(f);if(!Xa(s)&&!Tl(s)&&(f=dn(f),s=dn(s)),!yn(n)&&tr(f)&&!tr(s))return b?!1:(f.value=s,!0)}const d=yn(n)&&Mb(r)?Number(r)<n.length:li(n,r),a=Reflect.set(n,r,s,tr(n)?n:c);return n===dn(c)&&(d?Sl(s,f)&&_o(n,"set",r,s):_o(n,"add",r,s)),a}deleteProperty(n,r){const s=li(n,r);n[r];const c=Reflect.deleteProperty(n,r);return c&&s&&_o(n,"delete",r,void 0),c}has(n,r){const s=Reflect.has(n,r);return(!Al(r)||!FC.has(r))&&ea(n,"has",r),s}ownKeys(n){return ea(n,"iterate",yn(n)?"length":Ou),Reflect.ownKeys(n)}}class JE extends $C{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const QE=new jC,eM=new JE,tM=new jC(!0);const p_=e=>e,Bp=e=>Reflect.getPrototypeOf(e);function nM(e,n,r){return function(...s){const c=this.__v_raw,f=dn(c),d=Pd(f),a=e==="entries"||e===Symbol.iterator&&d,b=e==="keys"&&d,C=c[e](...s),w=r?p_:n?og:Gr;return!n&&ea(f,"iterate",b?m_:Ou),{next(){const{value:k,done:A}=C.next();return A?{value:k,done:A}:{value:a?[w(k[0]),w(k[1])]:w(k),done:A}},[Symbol.iterator](){return this}}}}function Vp(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function iM(e,n){const r={get(c){const f=this.__v_raw,d=dn(f),a=dn(c);e||(Sl(c,a)&&ea(d,"get",c),ea(d,"get",a));const{has:b}=Bp(d),C=n?p_:e?og:Gr;if(b.call(d,c))return C(f.get(c));if(b.call(d,a))return C(f.get(a));f!==d&&f.get(c)},get size(){const c=this.__v_raw;return!e&&ea(dn(c),"iterate",Ou),Reflect.get(c,"size",c)},has(c){const f=this.__v_raw,d=dn(f),a=dn(c);return e||(Sl(c,a)&&ea(d,"has",c),ea(d,"has",a)),c===a?f.has(c):f.has(c)||f.has(a)},forEach(c,f){const d=this,a=d.__v_raw,b=dn(a),C=n?p_:e?og:Gr;return!e&&ea(b,"iterate",Ou),a.forEach((w,k)=>c.call(f,C(w),C(k),d))}};return Tr(r,e?{add:Vp("add"),set:Vp("set"),delete:Vp("delete"),clear:Vp("clear")}:{add(c){!n&&!Xa(c)&&!Tl(c)&&(c=dn(c));const f=dn(this);return Bp(f).has.call(f,c)||(f.add(c),_o(f,"add",c,c)),this},set(c,f){!n&&!Xa(f)&&!Tl(f)&&(f=dn(f));const d=dn(this),{has:a,get:b}=Bp(d);let C=a.call(d,c);C||(c=dn(c),C=a.call(d,c));const w=b.call(d,c);return d.set(c,f),C?Sl(f,w)&&_o(d,"set",c,f):_o(d,"add",c,f),this},delete(c){const f=dn(this),{has:d,get:a}=Bp(f);let b=d.call(f,c);b||(c=dn(c),b=d.call(f,c)),a&&a.call(f,c);const C=f.delete(c);return b&&_o(f,"delete",c,void 0),C},clear(){const c=dn(this),f=c.size!==0,d=c.clear();return f&&_o(c,"clear",void 0,void 0),d}}),["keys","values","entries",Symbol.iterator].forEach(c=>{r[c]=nM(c,e,n)}),r}function Bb(e,n){const r=iM(e,n);return(s,c,f)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?s:Reflect.get(li(r,c)&&c in s?r:s,c,f)}const rM={get:Bb(!1,!1)},aM={get:Bb(!1,!0)},sM={get:Bb(!0,!1)};const NC=new WeakMap,UC=new WeakMap,GC=new WeakMap,oM=new WeakMap;function lM(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uM(e){return e.__v_skip||!Object.isExtensible(e)?0:lM(LE(e))}function Sr(e){return Tl(e)?e:Vb(e,!1,QE,rM,NC)}function qC(e){return Vb(e,!1,tM,aM,UC)}function Gd(e){return Vb(e,!0,eM,sM,GC)}function Vb(e,n,r,s,c){if(!Ii(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const f=uM(e);if(f===0)return e;const d=c.get(e);if(d)return d;const a=new Proxy(e,f===2?s:r);return c.set(e,a),a}function Id(e){return Tl(e)?Id(e.__v_raw):!!(e&&e.__v_isReactive)}function Tl(e){return!!(e&&e.__v_isReadonly)}function Xa(e){return!!(e&&e.__v_isShallow)}function Ob(e){return e?!!e.__v_raw:!1}function dn(e){const n=e&&e.__v_raw;return n?dn(n):e}function HC(e){return!li(e,"__v_skip")&&Object.isExtensible(e)&&d_(e,"__v_skip",!0),e}const Gr=e=>Ii(e)?Sr(e):e,og=e=>Ii(e)?Gd(e):e;function tr(e){return e?e.__v_isRef===!0:!1}function tt(e){return WC(e,!1)}function Mt(e){return WC(e,!0)}function WC(e,n){return tr(e)?e:new cM(e,n)}class cM{constructor(n,r){this.dep=new zb,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:dn(n),this._value=r?n:Gr(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,s=this.__v_isShallow||Xa(n)||Tl(n);n=s?n:dn(n),Sl(n,r)&&(this._rawValue=n,this._value=s?n:Gr(n),this.dep.trigger())}}function Cr(e){return tr(e)?e.value:e}function Us(e){return kn(e)?e():Cr(e)}const dM={get:(e,n,r)=>n==="__v_raw"?e:Cr(Reflect.get(e,n,r)),set:(e,n,r,s)=>{const c=e[n];return tr(c)&&!tr(r)?(c.value=r,!0):Reflect.set(e,n,r,s)}};function ZC(e){return Id(e)?e:new Proxy(e,dM)}function qd(e){const n=yn(e)?new Array(e.length):{};for(const r in e)n[r]=KC(e,r);return n}class hM{constructor(n,r,s){this._object=n,this._key=r,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return WE(dn(this._object),this._key)}}class fM{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ee(e,n,r){return tr(e)?e:kn(e)?new fM(e):Ii(e)&&arguments.length>1?KC(e,n,r):tt(e)}function KC(e,n,r){const s=e[n];return tr(s)?s:new hM(e,n,r)}class mM{constructor(n,r,s){this.fn=n,this.setter=r,this._value=void 0,this.dep=new zb(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Vf-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Pi!==this)return RC(this,!0),!0}get value(){const n=this.dep.track();return BC(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function pM(e,n,r=!1){let s,c;return kn(e)?s=e:(s=e.get,c=e.set),new mM(s,c,r)}const Op={},lg=new WeakMap;let Eu;function gM(e,n=!1,r=Eu){if(r){let s=lg.get(r);s||lg.set(r,s=[]),s.push(e)}}function vM(e,n,r=gi){const{immediate:s,deep:c,once:f,scheduler:d,augmentJob:a,call:b}=r,C=X=>c?X:Xa(X)||c===!1||c===0?bo(X,1):bo(X);let w,k,A,I,R=!1,F=!1;if(tr(e)?(k=()=>e.value,R=Xa(e)):Id(e)?(k=()=>C(e),R=!0):yn(e)?(F=!0,R=e.some(X=>Id(X)||Xa(X)),k=()=>e.map(X=>{if(tr(X))return X.value;if(Id(X))return C(X);if(kn(X))return b?b(X,2):X()})):kn(e)?n?k=b?()=>b(e,2):e:k=()=>{if(A){xo();try{A()}finally{wo()}}const X=Eu;Eu=w;try{return b?b(e,3,[I]):e(I)}finally{Eu=X}}:k=js,n&&c){const X=k,te=c===!0?1/0:c;k=()=>bo(X(),te)}const B=EC(),$=()=>{w.stop(),B&&B.active&&Eb(B.effects,w)};if(f&&n){const X=n;n=(...te)=>{X(...te),$()}}let O=F?new Array(e.length).fill(Op):Op;const q=X=>{if(!(!(w.flags&1)||!w.dirty&&!X))if(n){const te=w.run();if(c||R||(F?te.some((ae,ue)=>Sl(ae,O[ue])):Sl(te,O))){A&&A();const ae=Eu;Eu=w;try{const ue=[te,O===Op?void 0:F&&O[0]===Op?[]:O,I];O=te,b?b(n,3,ue):n(...ue)}finally{Eu=ae}}}else w.run()};return a&&a(q),w=new MC(k),w.scheduler=d?()=>d(q,!1):q,I=X=>gM(X,!1,w),A=w.onStop=()=>{const X=lg.get(w);if(X){if(b)b(X,4);else for(const te of X)te();lg.delete(w)}},n?s?q(!0):O=w.run():d?d(q.bind(null,!0),!0):w.run(),$.pause=w.pause.bind(w),$.resume=w.resume.bind(w),$.stop=$,$}function bo(e,n=1/0,r){if(n<=0||!Ii(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),n--,tr(e))bo(e.value,n,r);else if(yn(e))for(let s=0;s<e.length;s++)bo(e[s],n,r);else if(wC(e)||Pd(e))e.forEach(s=>{bo(s,n,r)});else if(TC(e)){for(const s in e)bo(e[s],n,r);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&bo(e[s],n,r)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lm(e,n,r,s){try{return s?e(...s):e()}catch(c){Rg(c,n,r)}}function gs(e,n,r,s){if(kn(e)){const c=lm(e,n,r,s);return c&&SC(c)&&c.catch(f=>{Rg(f,n,r)}),c}if(yn(e)){const c=[];for(let f=0;f<e.length;f++)c.push(gs(e[f],n,r,s));return c}}function Rg(e,n,r,s=!0){const c=n?n.vnode:null,{errorHandler:f,throwUnhandledErrorInProduction:d}=n&&n.appContext.config||gi;if(n){let a=n.parent;const b=n.proxy,C=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const w=a.ec;if(w){for(let k=0;k<w.length;k++)if(w[k](e,b,C)===!1)return}a=a.parent}if(f){xo(),lm(f,null,10,[e,b,C]),wo();return}}yM(e,r,c,s,d)}function yM(e,n,r,s=!0,c=!1){if(c)throw e;console.error(e)}const ga=[];let Fs=-1;const Ad=[];let pl=null,bd=0;const YC=Promise.resolve();let ug=null;function Dn(e){const n=ug||YC;return e?n.then(this?e.bind(this):e):n}function _M(e){let n=Fs+1,r=ga.length;for(;n<r;){const s=n+r>>>1,c=ga[s],f=Ff(c);f<e||f===e&&c.flags&2?n=s+1:r=s}return n}function Fb(e){if(!(e.flags&1)){const n=Ff(e),r=ga[ga.length-1];!r||!(e.flags&2)&&n>=Ff(r)?ga.push(e):ga.splice(_M(n),0,e),e.flags|=1,XC()}}function XC(){ug||(ug=YC.then(QC))}function bM(e){yn(e)?Ad.push(...e):pl&&e.id===-1?pl.splice(bd+1,0,e):e.flags&1||(Ad.push(e),e.flags|=1),XC()}function Gw(e,n,r=Fs+1){for(;r<ga.length;r++){const s=ga[r];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ga.splice(r,1),r--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function JC(e){if(Ad.length){const n=[...new Set(Ad)].sort((r,s)=>Ff(r)-Ff(s));if(Ad.length=0,pl){pl.push(...n);return}for(pl=n,bd=0;bd<pl.length;bd++){const r=pl[bd];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}pl=null,bd=0}}const Ff=e=>e.id==null?e.flags&2?-1:1/0:e.id;function QC(e){try{for(Fs=0;Fs<ga.length;Fs++){const n=ga[Fs];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),lm(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Fs<ga.length;Fs++){const n=ga[Fs];n&&(n.flags&=-2)}Fs=-1,ga.length=0,JC(),ug=null,(ga.length||Ad.length)&&QC()}}let ka=null,eT=null;function cg(e){const n=ka;return ka=e,eT=e&&e.type.__scopeId||null,n}function an(e,n=ka,r){if(!n||e._n)return e;const s=(...c)=>{s._d&&r1(-1);const f=cg(n);let d;try{d=e(...c)}finally{cg(f),s._d&&r1(1)}return d};return s._n=!0,s._c=!0,s._d=!0,s}function ei(e,n){if(ka===null)return e;const r=Fg(ka),s=e.dirs||(e.dirs=[]);for(let c=0;c<n.length;c++){let[f,d,a,b=gi]=n[c];f&&(kn(f)&&(f={mounted:f,updated:f}),f.deep&&bo(d),s.push({dir:f,instance:r,value:d,oldValue:void 0,arg:a,modifiers:b}))}return e}function Cu(e,n,r,s){const c=e.dirs,f=n&&n.dirs;for(let d=0;d<c.length;d++){const a=c[d];f&&(a.oldValue=f[d].value);let b=a.dir[s];b&&(xo(),gs(b,r,8,[e.el,a,e,n]),wo())}}const tT=Symbol("_vte"),nT=e=>e.__isTeleport,Pf=e=>e&&(e.disabled||e.disabled===""),qw=e=>e&&(e.defer||e.defer===""),Hw=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ww=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,g_=(e,n)=>{const r=e&&e.to;return Oi(r)?n?n(r):null:r},iT={name:"Teleport",__isTeleport:!0,process(e,n,r,s,c,f,d,a,b,C){const{mc:w,pc:k,pbc:A,o:{insert:I,querySelector:R,createText:F,createComment:B}}=C,$=Pf(n.props);let{shapeFlag:O,children:q,dynamicChildren:X}=n;if(e==null){const te=n.el=F(""),ae=n.anchor=F("");I(te,r,s),I(ae,r,s);const ue=(fe,pe)=>{O&16&&(c&&c.isCE&&(c.ce._teleportTarget=fe),w(q,fe,pe,c,f,d,a,b))},ce=()=>{const fe=n.target=g_(n.props,R),pe=rT(fe,n,F,I);fe&&(d!=="svg"&&Hw(fe)?d="svg":d!=="mathml"&&Ww(fe)&&(d="mathml"),$||(ue(fe,pe),Qp(n,!1)))};$&&(ue(r,ae),Qp(n,!0)),qw(n.props)?(n.el.__isMounted=!1,pa(()=>{ce(),delete n.el.__isMounted},f)):ce()}else{if(qw(n.props)&&e.el.__isMounted===!1){pa(()=>{iT.process(e,n,r,s,c,f,d,a,b,C)},f);return}n.el=e.el,n.targetStart=e.targetStart;const te=n.anchor=e.anchor,ae=n.target=e.target,ue=n.targetAnchor=e.targetAnchor,ce=Pf(e.props),fe=ce?r:ae,pe=ce?te:ue;if(d==="svg"||Hw(ae)?d="svg":(d==="mathml"||Ww(ae))&&(d="mathml"),X?(A(e.dynamicChildren,X,fe,c,f,d,a),Wb(e,n,!0)):b||k(e,n,fe,pe,c,f,d,a,!1),$)ce?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):Fp(n,r,te,C,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const _e=n.target=g_(n.props,R);_e&&Fp(n,_e,null,C,0)}else ce&&Fp(n,ae,ue,C,1);Qp(n,$)}},remove(e,n,r,{um:s,o:{remove:c}},f){const{shapeFlag:d,children:a,anchor:b,targetStart:C,targetAnchor:w,target:k,props:A}=e;if(k&&(c(C),c(w)),f&&c(b),d&16){const I=f||!Pf(A);for(let R=0;R<a.length;R++){const F=a[R];s(F,n,r,I,!!F.dynamicChildren)}}},move:Fp,hydrate:xM};function Fp(e,n,r,{o:{insert:s},m:c},f=2){f===0&&s(e.targetAnchor,n,r);const{el:d,anchor:a,shapeFlag:b,children:C,props:w}=e,k=f===2;if(k&&s(d,n,r),(!k||Pf(w))&&b&16)for(let A=0;A<C.length;A++)c(C[A],n,r,2);k&&s(a,n,r)}function xM(e,n,r,s,c,f,{o:{nextSibling:d,parentNode:a,querySelector:b,insert:C,createText:w}},k){const A=n.target=g_(n.props,b);if(A){const I=Pf(n.props),R=A._lpa||A.firstChild;if(n.shapeFlag&16)if(I)n.anchor=k(d(e),n,a(e),r,s,c,f),n.targetStart=R,n.targetAnchor=R&&d(R);else{n.anchor=d(e);let F=R;for(;F;){if(F&&F.nodeType===8){if(F.data==="teleport start anchor")n.targetStart=F;else if(F.data==="teleport anchor"){n.targetAnchor=F,A._lpa=n.targetAnchor&&d(n.targetAnchor);break}}F=d(F)}n.targetAnchor||rT(A,n,w,C),k(R&&d(R),n,A,r,s,c,f)}Qp(n,I)}return n.anchor&&d(n.anchor)}const wM=iT;function Qp(e,n){const r=e.ctx;if(r&&r.ut){let s,c;for(n?(s=e.el,c=e.anchor):(s=e.targetStart,c=e.targetAnchor);s&&s!==c;)s.nodeType===1&&s.setAttribute("data-v-owner",r.uid),s=s.nextSibling;r.ut()}}function rT(e,n,r,s){const c=n.targetStart=r(""),f=n.targetAnchor=r("");return c[tT]=f,e&&(s(c,e),s(f,e)),f}const gl=Symbol("_leaveCb"),$p=Symbol("_enterCb");function aT(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zi(()=>{e.isMounted=!0}),Vr(()=>{e.isUnmounting=!0}),e}const Ya=[Function,Array],sT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ya,onEnter:Ya,onAfterEnter:Ya,onEnterCancelled:Ya,onBeforeLeave:Ya,onLeave:Ya,onAfterLeave:Ya,onLeaveCancelled:Ya,onBeforeAppear:Ya,onAppear:Ya,onAfterAppear:Ya,onAppearCancelled:Ya},oT=e=>{const n=e.subTree;return n.component?oT(n.component):n},SM={name:"BaseTransition",props:sT,setup(e,{slots:n}){const r=Og(),s=aT();return()=>{const c=n.default&&$b(n.default(),!0);if(!c||!c.length)return;const f=lT(c),d=dn(e),{mode:a}=d;if(s.isLeaving)return zy(f);const b=Zw(f);if(!b)return zy(f);let C=$f(b,d,s,r,k=>C=k);b.type!==ta&&Nu(b,C);let w=r.subTree&&Zw(r.subTree);if(w&&w.type!==ta&&!Ru(b,w)&&oT(r).type!==ta){let k=$f(w,d,s,r);if(Nu(w,k),a==="out-in"&&b.type!==ta)return s.isLeaving=!0,k.afterLeave=()=>{s.isLeaving=!1,r.job.flags&8||r.update(),delete k.afterLeave,w=void 0},zy(f);a==="in-out"&&b.type!==ta?k.delayLeave=(A,I,R)=>{const F=uT(s,w);F[String(w.key)]=w,A[gl]=()=>{I(),A[gl]=void 0,delete C.delayedLeave,w=void 0},C.delayedLeave=()=>{R(),delete C.delayedLeave,w=void 0}}:w=void 0}else w&&(w=void 0);return f}}};function lT(e){let n=e[0];if(e.length>1){for(const r of e)if(r.type!==ta){n=r;break}}return n}const CM=SM;function uT(e,n){const{leavingVNodes:r}=e;let s=r.get(n.type);return s||(s=Object.create(null),r.set(n.type,s)),s}function $f(e,n,r,s,c){const{appear:f,mode:d,persisted:a=!1,onBeforeEnter:b,onEnter:C,onAfterEnter:w,onEnterCancelled:k,onBeforeLeave:A,onLeave:I,onAfterLeave:R,onLeaveCancelled:F,onBeforeAppear:B,onAppear:$,onAfterAppear:O,onAppearCancelled:q}=n,X=String(e.key),te=uT(r,e),ae=(fe,pe)=>{fe&&gs(fe,s,9,pe)},ue=(fe,pe)=>{const _e=pe[1];ae(fe,pe),yn(fe)?fe.every(re=>re.length<=1)&&_e():fe.length<=1&&_e()},ce={mode:d,persisted:a,beforeEnter(fe){let pe=b;if(!r.isMounted)if(f)pe=B||b;else return;fe[gl]&&fe[gl](!0);const _e=te[X];_e&&Ru(e,_e)&&_e.el[gl]&&_e.el[gl](),ae(pe,[fe])},enter(fe){let pe=C,_e=w,re=k;if(!r.isMounted)if(f)pe=$||C,_e=O||w,re=q||k;else return;let be=!1;const je=fe[$p]=Be=>{be||(be=!0,Be?ae(re,[fe]):ae(_e,[fe]),ce.delayedLeave&&ce.delayedLeave(),fe[$p]=void 0)};pe?ue(pe,[fe,je]):je()},leave(fe,pe){const _e=String(e.key);if(fe[$p]&&fe[$p](!0),r.isUnmounting)return pe();ae(A,[fe]);let re=!1;const be=fe[gl]=je=>{re||(re=!0,pe(),je?ae(F,[fe]):ae(R,[fe]),fe[gl]=void 0,te[_e]===e&&delete te[_e])};te[_e]=e,I?ue(I,[fe,be]):be()},clone(fe){const pe=$f(fe,n,r,s,c);return c&&c(pe),pe}};return ce}function zy(e){if(Lg(e))return e=So(e),e.children=null,e}function Zw(e){if(!Lg(e))return nT(e.type)&&e.children?lT(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:n,children:r}=e;if(r){if(n&16)return r[0];if(n&32&&kn(r.default))return r.default()}}function Nu(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Nu(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function $b(e,n=!1,r){let s=[],c=0;for(let f=0;f<e.length;f++){let d=e[f];const a=r==null?d.key:String(r)+String(d.key!=null?d.key:f);d.type===qt?(d.patchFlag&128&&c++,s=s.concat($b(d.children,n,a))):(n||d.type!==ta)&&s.push(a!=null?So(d,{key:a}):d)}if(c>1)for(let f=0;f<s.length;f++)s[f].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function jb(e,n){return kn(e)?Tr({name:e.name},n,{setup:e}):e}function ya(){const e=Og();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function cT(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function If(e,n,r,s,c=!1){if(yn(e)){e.forEach((R,F)=>If(R,n&&(yn(n)?n[F]:n),r,s,c));return}if(Af(s)&&!c){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&If(e,n,r,s.component.subTree);return}const f=s.shapeFlag&4?Fg(s.component):s.el,d=c?null:f,{i:a,r:b}=e,C=n&&n.r,w=a.refs===gi?a.refs={}:a.refs,k=a.setupState,A=dn(k),I=k===gi?()=>!1:R=>li(A,R);if(C!=null&&C!==b&&(Oi(C)?(w[C]=null,I(C)&&(k[C]=null)):tr(C)&&(C.value=null)),kn(b))lm(b,a,12,[d,w]);else{const R=Oi(b),F=tr(b);if(R||F){const B=()=>{if(e.f){const $=R?I(b)?k[b]:w[b]:b.value;c?yn($)&&Eb($,f):yn($)?$.includes(f)||$.push(f):R?(w[b]=[f],I(b)&&(k[b]=w[b])):(b.value=[f],e.k&&(w[e.k]=b.value))}else R?(w[b]=d,I(b)&&(k[b]=d)):F&&(b.value=d,e.k&&(w[e.k]=d))};d?(B.id=-1,pa(B,r)):B()}}}Mg().requestIdleCallback;Mg().cancelIdleCallback;const Af=e=>!!e.type.__asyncLoader,Lg=e=>e.type.__isKeepAlive;function dT(e,n){hT(e,"a",n)}function Nb(e,n){hT(e,"da",n)}function hT(e,n,r=qr){const s=e.__wdc||(e.__wdc=()=>{let c=r;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(zg(n,s,r),r){let c=r.parent;for(;c&&c.parent;)Lg(c.parent.vnode)&&TM(s,n,r,c),c=c.parent}}function TM(e,n,r,s){const c=zg(n,e,s,!0);Bg(()=>{Eb(s[n],c)},r)}function zg(e,n,r=qr,s=!1){if(r){const c=r[e]||(r[e]=[]),f=n.__weh||(n.__weh=(...d)=>{xo();const a=cm(r),b=gs(n,r,e,d);return a(),wo(),b});return s?c.unshift(f):c.push(f),f}}const Po=e=>(n,r=qr)=>{(!Uf||e==="sp")&&zg(e,(...s)=>n(...s),r)},Hd=Po("bm"),zi=Po("m"),fT=Po("bu"),Ub=Po("u"),Vr=Po("bum"),Bg=Po("um"),kM=Po("sp"),PM=Po("rtg"),IM=Po("rtc");function AM(e,n=qr){zg("ec",e,n)}const mT="components";function mn(e,n){return pT(mT,e,!0,n)||e}const EM=Symbol.for("v-ndc");function MM(e){return Oi(e)&&pT(mT,e,!1)||e}function pT(e,n,r=!0,s=!1){const c=ka||qr;if(c){const f=c.type;{const a=pD(f,!1);if(a&&(a===n||a===va(n)||a===Ws(va(n))))return f}const d=Kw(c[e]||f[e],n)||Kw(c.appContext[e],n);return!d&&s?f:d}}function Kw(e,n){return e&&(e[n]||e[va(n)]||e[Ws(va(n))])}function Gb(e,n,r,s){let c;const f=r,d=yn(e);if(d||Oi(e)){const a=d&&Id(e);let b=!1,C=!1;a&&(b=!Xa(e),C=Tl(e),e=Dg(e)),c=new Array(e.length);for(let w=0,k=e.length;w<k;w++)c[w]=n(b?C?og(Gr(e[w])):Gr(e[w]):e[w],w,void 0,f)}else if(typeof e=="number"){c=new Array(e);for(let a=0;a<e;a++)c[a]=n(a+1,a,void 0,f)}else if(Ii(e))if(e[Symbol.iterator])c=Array.from(e,(a,b)=>n(a,b,void 0,f));else{const a=Object.keys(e);c=new Array(a.length);for(let b=0,C=a.length;b<C;b++){const w=a[b];c[b]=n(e[w],w,b,f)}}else c=[];return c}const v_=e=>e?LT(e)?Fg(e):v_(e.parent):null,Ef=Tr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>v_(e.parent),$root:e=>v_(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>vT(e),$forceUpdate:e=>e.f||(e.f=()=>{Fb(e.update)}),$nextTick:e=>e.n||(e.n=Dn.bind(e.proxy)),$watch:e=>JM.bind(e)}),By=(e,n)=>e!==gi&&!e.__isScriptSetup&&li(e,n),DM={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:s,data:c,props:f,accessCache:d,type:a,appContext:b}=e;let C;if(n[0]!=="$"){const I=d[n];if(I!==void 0)switch(I){case 1:return s[n];case 2:return c[n];case 4:return r[n];case 3:return f[n]}else{if(By(s,n))return d[n]=1,s[n];if(c!==gi&&li(c,n))return d[n]=2,c[n];if((C=e.propsOptions[0])&&li(C,n))return d[n]=3,f[n];if(r!==gi&&li(r,n))return d[n]=4,r[n];y_&&(d[n]=0)}}const w=Ef[n];let k,A;if(w)return n==="$attrs"&&ea(e.attrs,"get",""),w(e);if((k=a.__cssModules)&&(k=k[n]))return k;if(r!==gi&&li(r,n))return d[n]=4,r[n];if(A=b.config.globalProperties,li(A,n))return A[n]},set({_:e},n,r){const{data:s,setupState:c,ctx:f}=e;return By(c,n)?(c[n]=r,!0):s!==gi&&li(s,n)?(s[n]=r,!0):li(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(f[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:s,appContext:c,propsOptions:f}},d){let a;return!!r[d]||e!==gi&&li(e,d)||By(n,d)||(a=f[0])&&li(a,d)||li(s,d)||li(Ef,d)||li(c.config.globalProperties,d)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:li(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};function Yw(e){return yn(e)?e.reduce((n,r)=>(n[r]=null,n),{}):e}let y_=!0;function RM(e){const n=vT(e),r=e.proxy,s=e.ctx;y_=!1,n.beforeCreate&&Xw(n.beforeCreate,e,"bc");const{data:c,computed:f,methods:d,watch:a,provide:b,inject:C,created:w,beforeMount:k,mounted:A,beforeUpdate:I,updated:R,activated:F,deactivated:B,beforeDestroy:$,beforeUnmount:O,destroyed:q,unmounted:X,render:te,renderTracked:ae,renderTriggered:ue,errorCaptured:ce,serverPrefetch:fe,expose:pe,inheritAttrs:_e,components:re,directives:be,filters:je}=n;if(C&&LM(C,s,null),d)for(const Ke in d){const ft=d[Ke];kn(ft)&&(s[Ke]=ft.bind(r))}if(c){const Ke=c.call(r,r);Ii(Ke)&&(e.data=Sr(Ke))}if(y_=!0,f)for(const Ke in f){const ft=f[Ke],mt=kn(ft)?ft.bind(r,r):kn(ft.get)?ft.get.bind(r,r):js,ze=!kn(ft)&&kn(ft.set)?ft.set.bind(r):js,Se=ee({get:mt,set:ze});Object.defineProperty(s,Ke,{enumerable:!0,configurable:!0,get:()=>Se.value,set:Me=>Se.value=Me})}if(a)for(const Ke in a)gT(a[Ke],s,r,Ke);if(b){const Ke=kn(b)?b.call(r):b;Reflect.ownKeys(Ke).forEach(ft=>{ri(ft,Ke[ft])})}w&&Xw(w,e,"c");function Fe(Ke,ft){yn(ft)?ft.forEach(mt=>Ke(mt.bind(r))):ft&&Ke(ft.bind(r))}if(Fe(Hd,k),Fe(zi,A),Fe(fT,I),Fe(Ub,R),Fe(dT,F),Fe(Nb,B),Fe(AM,ce),Fe(IM,ae),Fe(PM,ue),Fe(Vr,O),Fe(Bg,X),Fe(kM,fe),yn(pe))if(pe.length){const Ke=e.exposed||(e.exposed={});pe.forEach(ft=>{Object.defineProperty(Ke,ft,{get:()=>r[ft],set:mt=>r[ft]=mt})})}else e.exposed||(e.exposed={});te&&e.render===js&&(e.render=te),_e!=null&&(e.inheritAttrs=_e),re&&(e.components=re),be&&(e.directives=be),fe&&cT(e)}function LM(e,n,r=js){yn(e)&&(e=__(e));for(const s in e){const c=e[s];let f;Ii(c)?"default"in c?f=_n(c.from||s,c.default,!0):f=_n(c.from||s):f=_n(c),tr(f)?Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get:()=>f.value,set:d=>f.value=d}):n[s]=f}}function Xw(e,n,r){gs(yn(e)?e.map(s=>s.bind(n.proxy)):e.bind(n.proxy),n,r)}function gT(e,n,r,s){let c=s.includes(".")?IT(r,s):()=>r[s];if(Oi(e)){const f=n[e];kn(f)&&Bt(c,f)}else if(kn(e))Bt(c,e.bind(r));else if(Ii(e))if(yn(e))e.forEach(f=>gT(f,n,r,s));else{const f=kn(e.handler)?e.handler.bind(r):n[e.handler];kn(f)&&Bt(c,f,e)}}function vT(e){const n=e.type,{mixins:r,extends:s}=n,{mixins:c,optionsCache:f,config:{optionMergeStrategies:d}}=e.appContext,a=f.get(n);let b;return a?b=a:!c.length&&!r&&!s?b=n:(b={},c.length&&c.forEach(C=>dg(b,C,d,!0)),dg(b,n,d)),Ii(n)&&f.set(n,b),b}function dg(e,n,r,s=!1){const{mixins:c,extends:f}=n;f&&dg(e,f,r,!0),c&&c.forEach(d=>dg(e,d,r,!0));for(const d in n)if(!(s&&d==="expose")){const a=zM[d]||r&&r[d];e[d]=a?a(e[d],n[d]):n[d]}return e}const zM={data:Jw,props:Qw,emits:Qw,methods:xf,computed:xf,beforeCreate:fa,created:fa,beforeMount:fa,mounted:fa,beforeUpdate:fa,updated:fa,beforeDestroy:fa,beforeUnmount:fa,destroyed:fa,unmounted:fa,activated:fa,deactivated:fa,errorCaptured:fa,serverPrefetch:fa,components:xf,directives:xf,watch:VM,provide:Jw,inject:BM};function Jw(e,n){return n?e?function(){return Tr(kn(e)?e.call(this,this):e,kn(n)?n.call(this,this):n)}:n:e}function BM(e,n){return xf(__(e),__(n))}function __(e){if(yn(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function fa(e,n){return e?[...new Set([].concat(e,n))]:n}function xf(e,n){return e?Tr(Object.create(null),e,n):n}function Qw(e,n){return e?yn(e)&&yn(n)?[...new Set([...e,...n])]:Tr(Object.create(null),Yw(e),Yw(n??{})):n}function VM(e,n){if(!e)return n;if(!n)return e;const r=Tr(Object.create(null),e);for(const s in n)r[s]=fa(e[s],n[s]);return r}function yT(){return{app:null,config:{isNativeTag:DE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OM=0;function FM(e,n){return function(s,c=null){kn(s)||(s=Tr({},s)),c!=null&&!Ii(c)&&(c=null);const f=yT(),d=new WeakSet,a=[];let b=!1;const C=f.app={_uid:OM++,_component:s,_props:c,_container:null,_context:f,_instance:null,version:vD,get config(){return f.config},set config(w){},use(w,...k){return d.has(w)||(w&&kn(w.install)?(d.add(w),w.install(C,...k)):kn(w)&&(d.add(w),w(C,...k))),C},mixin(w){return f.mixins.includes(w)||f.mixins.push(w),C},component(w,k){return k?(f.components[w]=k,C):f.components[w]},directive(w,k){return k?(f.directives[w]=k,C):f.directives[w]},mount(w,k,A){if(!b){const I=C._ceVNode||G(s,c);return I.appContext=f,A===!0?A="svg":A===!1&&(A=void 0),e(I,w,A),b=!0,C._container=w,w.__vue_app__=C,Fg(I.component)}},onUnmount(w){a.push(w)},unmount(){b&&(gs(a,C._instance,16),e(null,C._container),delete C._container.__vue_app__)},provide(w,k){return f.provides[w]=k,C},runWithContext(w){const k=Ed;Ed=C;try{return w()}finally{Ed=k}}};return C}}let Ed=null;function ri(e,n){if(qr){let r=qr.provides;const s=qr.parent&&qr.parent.provides;s===r&&(r=qr.provides=Object.create(s)),r[e]=n}}function _n(e,n,r=!1){const s=qr||ka;if(s||Ed){let c=Ed?Ed._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(c&&e in c)return c[e];if(arguments.length>1)return r&&kn(n)?n.call(s&&s.proxy):n}}const _T={},bT=()=>Object.create(_T),xT=e=>Object.getPrototypeOf(e)===_T;function $M(e,n,r,s=!1){const c={},f=bT();e.propsDefaults=Object.create(null),wT(e,n,c,f);for(const d in e.propsOptions[0])d in c||(c[d]=void 0);r?e.props=s?c:qC(c):e.type.props?e.props=c:e.props=f,e.attrs=f}function jM(e,n,r,s){const{props:c,attrs:f,vnode:{patchFlag:d}}=e,a=dn(c),[b]=e.propsOptions;let C=!1;if((s||d>0)&&!(d&16)){if(d&8){const w=e.vnode.dynamicProps;for(let k=0;k<w.length;k++){let A=w[k];if(Vg(e.emitsOptions,A))continue;const I=n[A];if(b)if(li(f,A))I!==f[A]&&(f[A]=I,C=!0);else{const R=va(A);c[R]=b_(b,a,R,I,e,!1)}else I!==f[A]&&(f[A]=I,C=!0)}}}else{wT(e,n,c,f)&&(C=!0);let w;for(const k in a)(!n||!li(n,k)&&((w=Xu(k))===k||!li(n,w)))&&(b?r&&(r[k]!==void 0||r[w]!==void 0)&&(c[k]=b_(b,a,k,void 0,e,!0)):delete c[k]);if(f!==a)for(const k in f)(!n||!li(n,k))&&(delete f[k],C=!0)}C&&_o(e.attrs,"set","")}function wT(e,n,r,s){const[c,f]=e.propsOptions;let d=!1,a;if(n)for(let b in n){if(Cf(b))continue;const C=n[b];let w;c&&li(c,w=va(b))?!f||!f.includes(w)?r[w]=C:(a||(a={}))[w]=C:Vg(e.emitsOptions,b)||(!(b in s)||C!==s[b])&&(s[b]=C,d=!0)}if(f){const b=dn(r),C=a||gi;for(let w=0;w<f.length;w++){const k=f[w];r[k]=b_(c,b,k,C[k],e,!li(C,k))}}return d}function b_(e,n,r,s,c,f){const d=e[r];if(d!=null){const a=li(d,"default");if(a&&s===void 0){const b=d.default;if(d.type!==Function&&!d.skipFactory&&kn(b)){const{propsDefaults:C}=c;if(r in C)s=C[r];else{const w=cm(c);s=C[r]=b.call(null,n),w()}}else s=b;c.ce&&c.ce._setProp(r,s)}d[0]&&(f&&!a?s=!1:d[1]&&(s===""||s===Xu(r))&&(s=!0))}return s}const NM=new WeakMap;function ST(e,n,r=!1){const s=r?NM:n.propsCache,c=s.get(e);if(c)return c;const f=e.props,d={},a=[];let b=!1;if(!kn(e)){const w=k=>{b=!0;const[A,I]=ST(k,n,!0);Tr(d,A),I&&a.push(...I)};!r&&n.mixins.length&&n.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!f&&!b)return Ii(e)&&s.set(e,kd),kd;if(yn(f))for(let w=0;w<f.length;w++){const k=va(f[w]);e1(k)&&(d[k]=gi)}else if(f)for(const w in f){const k=va(w);if(e1(k)){const A=f[w],I=d[k]=yn(A)||kn(A)?{type:A}:Tr({},A),R=I.type;let F=!1,B=!0;if(yn(R))for(let $=0;$<R.length;++$){const O=R[$],q=kn(O)&&O.name;if(q==="Boolean"){F=!0;break}else q==="String"&&(B=!1)}else F=kn(R)&&R.name==="Boolean";I[0]=F,I[1]=B,(F||li(I,"default"))&&a.push(k)}}const C=[d,a];return Ii(e)&&s.set(e,C),C}function e1(e){return e[0]!=="$"&&!Cf(e)}const qb=e=>e[0]==="_"||e==="$stable",Hb=e=>yn(e)?e.map($s):[$s(e)],UM=(e,n,r)=>{if(n._n)return n;const s=an((...c)=>Hb(n(...c)),r);return s._c=!1,s},CT=(e,n,r)=>{const s=e._ctx;for(const c in e){if(qb(c))continue;const f=e[c];if(kn(f))n[c]=UM(c,f,s);else if(f!=null){const d=Hb(f);n[c]=()=>d}}},TT=(e,n)=>{const r=Hb(n);e.slots.default=()=>r},kT=(e,n,r)=>{for(const s in n)(r||!qb(s))&&(e[s]=n[s])},GM=(e,n,r)=>{const s=e.slots=bT();if(e.vnode.shapeFlag&32){const c=n.__;c&&d_(s,"__",c,!0);const f=n._;f?(kT(s,n,r),r&&d_(s,"_",f,!0)):CT(n,s)}else n&&TT(e,n)},qM=(e,n,r)=>{const{vnode:s,slots:c}=e;let f=!0,d=gi;if(s.shapeFlag&32){const a=n._;a?r&&a===1?f=!1:kT(c,n,r):(f=!n.$stable,CT(n,c)),d=n}else n&&(TT(e,n),d={default:1});if(f)for(const a in c)!qb(a)&&d[a]==null&&delete c[a]},pa=aD;function HM(e){return WM(e)}function WM(e,n){const r=Mg();r.__VUE__=!0;const{insert:s,remove:c,patchProp:f,createElement:d,createText:a,createComment:b,setText:C,setElementText:w,parentNode:k,nextSibling:A,setScopeId:I=js,insertStaticContent:R}=e,F=(ie,le,Le,Ze=null,ut=null,Je=null,kt=void 0,ct=null,Dt=!!le.dynamicChildren)=>{if(ie===le)return;ie&&!Ru(ie,le)&&(Ze=Re(ie),Me(ie,ut,Je,!0),ie=null),le.patchFlag===-2&&(Dt=!1,le.dynamicChildren=null);const{type:Pt,ref:nn,shapeFlag:Ut}=le;switch(Pt){case um:B(ie,le,Le,Ze);break;case ta:$(ie,le,Le,Ze);break;case Oy:ie==null&&O(le,Le,Ze,kt);break;case qt:re(ie,le,Le,Ze,ut,Je,kt,ct,Dt);break;default:Ut&1?te(ie,le,Le,Ze,ut,Je,kt,ct,Dt):Ut&6?be(ie,le,Le,Ze,ut,Je,kt,ct,Dt):(Ut&64||Ut&128)&&Pt.process(ie,le,Le,Ze,ut,Je,kt,ct,Dt,Ye)}nn!=null&&ut?If(nn,ie&&ie.ref,Je,le||ie,!le):nn==null&&ie&&ie.ref!=null&&If(ie.ref,null,Je,ie,!0)},B=(ie,le,Le,Ze)=>{if(ie==null)s(le.el=a(le.children),Le,Ze);else{const ut=le.el=ie.el;le.children!==ie.children&&C(ut,le.children)}},$=(ie,le,Le,Ze)=>{ie==null?s(le.el=b(le.children||""),Le,Ze):le.el=ie.el},O=(ie,le,Le,Ze)=>{[ie.el,ie.anchor]=R(ie.children,le,Le,Ze,ie.el,ie.anchor)},q=({el:ie,anchor:le},Le,Ze)=>{let ut;for(;ie&&ie!==le;)ut=A(ie),s(ie,Le,Ze),ie=ut;s(le,Le,Ze)},X=({el:ie,anchor:le})=>{let Le;for(;ie&&ie!==le;)Le=A(ie),c(ie),ie=Le;c(le)},te=(ie,le,Le,Ze,ut,Je,kt,ct,Dt)=>{le.type==="svg"?kt="svg":le.type==="math"&&(kt="mathml"),ie==null?ae(le,Le,Ze,ut,Je,kt,ct,Dt):fe(ie,le,ut,Je,kt,ct,Dt)},ae=(ie,le,Le,Ze,ut,Je,kt,ct)=>{let Dt,Pt;const{props:nn,shapeFlag:Ut,transition:Jt,dirs:ln}=ie;if(Dt=ie.el=d(ie.type,Je,nn&&nn.is,nn),Ut&8?w(Dt,ie.children):Ut&16&&ce(ie.children,Dt,null,Ze,ut,Vy(ie,Je),kt,ct),ln&&Cu(ie,null,Ze,"created"),ue(Dt,ie,ie.scopeId,kt,Ze),nn){for(const En in nn)En!=="value"&&!Cf(En)&&f(Dt,En,null,nn[En],Je,Ze);"value"in nn&&f(Dt,"value",null,nn.value,Je),(Pt=nn.onVnodeBeforeMount)&&Vs(Pt,Ze,ie)}ln&&Cu(ie,null,Ze,"beforeMount");const gn=ZM(ut,Jt);gn&&Jt.beforeEnter(Dt),s(Dt,le,Le),((Pt=nn&&nn.onVnodeMounted)||gn||ln)&&pa(()=>{Pt&&Vs(Pt,Ze,ie),gn&&Jt.enter(Dt),ln&&Cu(ie,null,Ze,"mounted")},ut)},ue=(ie,le,Le,Ze,ut)=>{if(Le&&I(ie,Le),Ze)for(let Je=0;Je<Ze.length;Je++)I(ie,Ze[Je]);if(ut){let Je=ut.subTree;if(le===Je||ET(Je.type)&&(Je.ssContent===le||Je.ssFallback===le)){const kt=ut.vnode;ue(ie,kt,kt.scopeId,kt.slotScopeIds,ut.parent)}}},ce=(ie,le,Le,Ze,ut,Je,kt,ct,Dt=0)=>{for(let Pt=Dt;Pt<ie.length;Pt++){const nn=ie[Pt]=ct?vl(ie[Pt]):$s(ie[Pt]);F(null,nn,le,Le,Ze,ut,Je,kt,ct)}},fe=(ie,le,Le,Ze,ut,Je,kt)=>{const ct=le.el=ie.el;let{patchFlag:Dt,dynamicChildren:Pt,dirs:nn}=le;Dt|=ie.patchFlag&16;const Ut=ie.props||gi,Jt=le.props||gi;let ln;if(Le&&Tu(Le,!1),(ln=Jt.onVnodeBeforeUpdate)&&Vs(ln,Le,le,ie),nn&&Cu(le,ie,Le,"beforeUpdate"),Le&&Tu(Le,!0),(Ut.innerHTML&&Jt.innerHTML==null||Ut.textContent&&Jt.textContent==null)&&w(ct,""),Pt?pe(ie.dynamicChildren,Pt,ct,Le,Ze,Vy(le,ut),Je):kt||ft(ie,le,ct,null,Le,Ze,Vy(le,ut),Je,!1),Dt>0){if(Dt&16)_e(ct,Ut,Jt,Le,ut);else if(Dt&2&&Ut.class!==Jt.class&&f(ct,"class",null,Jt.class,ut),Dt&4&&f(ct,"style",Ut.style,Jt.style,ut),Dt&8){const gn=le.dynamicProps;for(let En=0;En<gn.length;En++){const Rn=gn[En],Ni=Ut[Rn],Yi=Jt[Rn];(Yi!==Ni||Rn==="value")&&f(ct,Rn,Ni,Yi,ut,Le)}}Dt&1&&ie.children!==le.children&&w(ct,le.children)}else!kt&&Pt==null&&_e(ct,Ut,Jt,Le,ut);((ln=Jt.onVnodeUpdated)||nn)&&pa(()=>{ln&&Vs(ln,Le,le,ie),nn&&Cu(le,ie,Le,"updated")},Ze)},pe=(ie,le,Le,Ze,ut,Je,kt)=>{for(let ct=0;ct<le.length;ct++){const Dt=ie[ct],Pt=le[ct],nn=Dt.el&&(Dt.type===qt||!Ru(Dt,Pt)||Dt.shapeFlag&198)?k(Dt.el):Le;F(Dt,Pt,nn,null,Ze,ut,Je,kt,!0)}},_e=(ie,le,Le,Ze,ut)=>{if(le!==Le){if(le!==gi)for(const Je in le)!Cf(Je)&&!(Je in Le)&&f(ie,Je,le[Je],null,ut,Ze);for(const Je in Le){if(Cf(Je))continue;const kt=Le[Je],ct=le[Je];kt!==ct&&Je!=="value"&&f(ie,Je,ct,kt,ut,Ze)}"value"in Le&&f(ie,"value",le.value,Le.value,ut)}},re=(ie,le,Le,Ze,ut,Je,kt,ct,Dt)=>{const Pt=le.el=ie?ie.el:a(""),nn=le.anchor=ie?ie.anchor:a("");let{patchFlag:Ut,dynamicChildren:Jt,slotScopeIds:ln}=le;ln&&(ct=ct?ct.concat(ln):ln),ie==null?(s(Pt,Le,Ze),s(nn,Le,Ze),ce(le.children||[],Le,nn,ut,Je,kt,ct,Dt)):Ut>0&&Ut&64&&Jt&&ie.dynamicChildren?(pe(ie.dynamicChildren,Jt,Le,ut,Je,kt,ct),(le.key!=null||ut&&le===ut.subTree)&&Wb(ie,le,!0)):ft(ie,le,Le,nn,ut,Je,kt,ct,Dt)},be=(ie,le,Le,Ze,ut,Je,kt,ct,Dt)=>{le.slotScopeIds=ct,ie==null?le.shapeFlag&512?ut.ctx.activate(le,Le,Ze,kt,Dt):je(le,Le,Ze,ut,Je,kt,Dt):Be(ie,le,Dt)},je=(ie,le,Le,Ze,ut,Je,kt)=>{const ct=ie.component=cD(ie,Ze,ut);if(Lg(ie)&&(ct.ctx.renderer=Ye),dD(ct,!1,kt),ct.asyncDep){if(ut&&ut.registerDep(ct,Fe,kt),!ie.el){const Dt=ct.subTree=G(ta);$(null,Dt,le,Le)}}else Fe(ct,ie,le,Le,ut,Je,kt)},Be=(ie,le,Le)=>{const Ze=le.component=ie.component;if(iD(ie,le,Le))if(Ze.asyncDep&&!Ze.asyncResolved){Ke(Ze,le,Le);return}else Ze.next=le,Ze.update();else le.el=ie.el,Ze.vnode=le},Fe=(ie,le,Le,Ze,ut,Je,kt)=>{const ct=()=>{if(ie.isMounted){let{next:Ut,bu:Jt,u:ln,parent:gn,vnode:En}=ie;{const qe=PT(ie);if(qe){Ut&&(Ut.el=En.el,Ke(ie,Ut,kt)),qe.asyncDep.then(()=>{ie.isUnmounted||ct()});return}}let Rn=Ut,Ni;Tu(ie,!1),Ut?(Ut.el=En.el,Ke(ie,Ut,kt)):Ut=En,Jt&&Jp(Jt),(Ni=Ut.props&&Ut.props.onVnodeBeforeUpdate)&&Vs(Ni,gn,Ut,En),Tu(ie,!0);const Yi=n1(ie),Ui=ie.subTree;ie.subTree=Yi,F(Ui,Yi,k(Ui.el),Re(Ui),ie,ut,Je),Ut.el=Yi.el,Rn===null&&rD(ie,Yi.el),ln&&pa(ln,ut),(Ni=Ut.props&&Ut.props.onVnodeUpdated)&&pa(()=>Vs(Ni,gn,Ut,En),ut)}else{let Ut;const{el:Jt,props:ln}=le,{bm:gn,m:En,parent:Rn,root:Ni,type:Yi}=ie,Ui=Af(le);Tu(ie,!1),gn&&Jp(gn),!Ui&&(Ut=ln&&ln.onVnodeBeforeMount)&&Vs(Ut,Rn,le),Tu(ie,!0);{Ni.ce&&Ni.ce._def.shadowRoot!==!1&&Ni.ce._injectChildStyle(Yi);const qe=ie.subTree=n1(ie);F(null,qe,Le,Ze,ie,ut,Je),le.el=qe.el}if(En&&pa(En,ut),!Ui&&(Ut=ln&&ln.onVnodeMounted)){const qe=le;pa(()=>Vs(Ut,Rn,qe),ut)}(le.shapeFlag&256||Rn&&Af(Rn.vnode)&&Rn.vnode.shapeFlag&256)&&ie.a&&pa(ie.a,ut),ie.isMounted=!0,le=Le=Ze=null}};ie.scope.on();const Dt=ie.effect=new MC(ct);ie.scope.off();const Pt=ie.update=Dt.run.bind(Dt),nn=ie.job=Dt.runIfDirty.bind(Dt);nn.i=ie,nn.id=ie.uid,Dt.scheduler=()=>Fb(nn),Tu(ie,!0),Pt()},Ke=(ie,le,Le)=>{le.component=ie;const Ze=ie.vnode.props;ie.vnode=le,ie.next=null,jM(ie,le.props,Ze,Le),qM(ie,le.children,Le),xo(),Gw(ie),wo()},ft=(ie,le,Le,Ze,ut,Je,kt,ct,Dt=!1)=>{const Pt=ie&&ie.children,nn=ie?ie.shapeFlag:0,Ut=le.children,{patchFlag:Jt,shapeFlag:ln}=le;if(Jt>0){if(Jt&128){ze(Pt,Ut,Le,Ze,ut,Je,kt,ct,Dt);return}else if(Jt&256){mt(Pt,Ut,Le,Ze,ut,Je,kt,ct,Dt);return}}ln&8?(nn&16&&xt(Pt,ut,Je),Ut!==Pt&&w(Le,Ut)):nn&16?ln&16?ze(Pt,Ut,Le,Ze,ut,Je,kt,ct,Dt):xt(Pt,ut,Je,!0):(nn&8&&w(Le,""),ln&16&&ce(Ut,Le,Ze,ut,Je,kt,ct,Dt))},mt=(ie,le,Le,Ze,ut,Je,kt,ct,Dt)=>{ie=ie||kd,le=le||kd;const Pt=ie.length,nn=le.length,Ut=Math.min(Pt,nn);let Jt;for(Jt=0;Jt<Ut;Jt++){const ln=le[Jt]=Dt?vl(le[Jt]):$s(le[Jt]);F(ie[Jt],ln,Le,null,ut,Je,kt,ct,Dt)}Pt>nn?xt(ie,ut,Je,!0,!1,Ut):ce(le,Le,Ze,ut,Je,kt,ct,Dt,Ut)},ze=(ie,le,Le,Ze,ut,Je,kt,ct,Dt)=>{let Pt=0;const nn=le.length;let Ut=ie.length-1,Jt=nn-1;for(;Pt<=Ut&&Pt<=Jt;){const ln=ie[Pt],gn=le[Pt]=Dt?vl(le[Pt]):$s(le[Pt]);if(Ru(ln,gn))F(ln,gn,Le,null,ut,Je,kt,ct,Dt);else break;Pt++}for(;Pt<=Ut&&Pt<=Jt;){const ln=ie[Ut],gn=le[Jt]=Dt?vl(le[Jt]):$s(le[Jt]);if(Ru(ln,gn))F(ln,gn,Le,null,ut,Je,kt,ct,Dt);else break;Ut--,Jt--}if(Pt>Ut){if(Pt<=Jt){const ln=Jt+1,gn=ln<nn?le[ln].el:Ze;for(;Pt<=Jt;)F(null,le[Pt]=Dt?vl(le[Pt]):$s(le[Pt]),Le,gn,ut,Je,kt,ct,Dt),Pt++}}else if(Pt>Jt)for(;Pt<=Ut;)Me(ie[Pt],ut,Je,!0),Pt++;else{const ln=Pt,gn=Pt,En=new Map;for(Pt=gn;Pt<=Jt;Pt++){const he=le[Pt]=Dt?vl(le[Pt]):$s(le[Pt]);he.key!=null&&En.set(he.key,Pt)}let Rn,Ni=0;const Yi=Jt-gn+1;let Ui=!1,qe=0;const se=new Array(Yi);for(Pt=0;Pt<Yi;Pt++)se[Pt]=0;for(Pt=ln;Pt<=Ut;Pt++){const he=ie[Pt];if(Ni>=Yi){Me(he,ut,Je,!0);continue}let Ce;if(he.key!=null)Ce=En.get(he.key);else for(Rn=gn;Rn<=Jt;Rn++)if(se[Rn-gn]===0&&Ru(he,le[Rn])){Ce=Rn;break}Ce===void 0?Me(he,ut,Je,!0):(se[Ce-gn]=Pt+1,Ce>=qe?qe=Ce:Ui=!0,F(he,le[Ce],Le,null,ut,Je,kt,ct,Dt),Ni++)}const oe=Ui?KM(se):kd;for(Rn=oe.length-1,Pt=Yi-1;Pt>=0;Pt--){const he=gn+Pt,Ce=le[he],$e=he+1<nn?le[he+1].el:Ze;se[Pt]===0?F(null,Ce,Le,$e,ut,Je,kt,ct,Dt):Ui&&(Rn<0||Pt!==oe[Rn]?Se(Ce,Le,$e,2):Rn--)}}},Se=(ie,le,Le,Ze,ut=null)=>{const{el:Je,type:kt,transition:ct,children:Dt,shapeFlag:Pt}=ie;if(Pt&6){Se(ie.component.subTree,le,Le,Ze);return}if(Pt&128){ie.suspense.move(le,Le,Ze);return}if(Pt&64){kt.move(ie,le,Le,Ye);return}if(kt===qt){s(Je,le,Le);for(let Ut=0;Ut<Dt.length;Ut++)Se(Dt[Ut],le,Le,Ze);s(ie.anchor,le,Le);return}if(kt===Oy){q(ie,le,Le);return}if(Ze!==2&&Pt&1&&ct)if(Ze===0)ct.beforeEnter(Je),s(Je,le,Le),pa(()=>ct.enter(Je),ut);else{const{leave:Ut,delayLeave:Jt,afterLeave:ln}=ct,gn=()=>{ie.ctx.isUnmounted?c(Je):s(Je,le,Le)},En=()=>{Ut(Je,()=>{gn(),ln&&ln()})};Jt?Jt(Je,gn,En):En()}else s(Je,le,Le)},Me=(ie,le,Le,Ze=!1,ut=!1)=>{const{type:Je,props:kt,ref:ct,children:Dt,dynamicChildren:Pt,shapeFlag:nn,patchFlag:Ut,dirs:Jt,cacheIndex:ln}=ie;if(Ut===-2&&(ut=!1),ct!=null&&(xo(),If(ct,null,Le,ie,!0),wo()),ln!=null&&(le.renderCache[ln]=void 0),nn&256){le.ctx.deactivate(ie);return}const gn=nn&1&&Jt,En=!Af(ie);let Rn;if(En&&(Rn=kt&&kt.onVnodeBeforeUnmount)&&Vs(Rn,le,ie),nn&6)Tt(ie.component,Le,Ze);else{if(nn&128){ie.suspense.unmount(Le,Ze);return}gn&&Cu(ie,null,le,"beforeUnmount"),nn&64?ie.type.remove(ie,le,Le,Ye,Ze):Pt&&!Pt.hasOnce&&(Je!==qt||Ut>0&&Ut&64)?xt(Pt,le,Le,!1,!0):(Je===qt&&Ut&384||!ut&&nn&16)&&xt(Dt,le,Le),Ze&&Qe(ie)}(En&&(Rn=kt&&kt.onVnodeUnmounted)||gn)&&pa(()=>{Rn&&Vs(Rn,le,ie),gn&&Cu(ie,null,le,"unmounted")},Le)},Qe=ie=>{const{type:le,el:Le,anchor:Ze,transition:ut}=ie;if(le===qt){Ft(Le,Ze);return}if(le===Oy){X(ie);return}const Je=()=>{c(Le),ut&&!ut.persisted&&ut.afterLeave&&ut.afterLeave()};if(ie.shapeFlag&1&&ut&&!ut.persisted){const{leave:kt,delayLeave:ct}=ut,Dt=()=>kt(Le,Je);ct?ct(ie.el,Je,Dt):Dt()}else Je()},Ft=(ie,le)=>{let Le;for(;ie!==le;)Le=A(ie),c(ie),ie=Le;c(le)},Tt=(ie,le,Le)=>{const{bum:Ze,scope:ut,job:Je,subTree:kt,um:ct,m:Dt,a:Pt,parent:nn,slots:{__:Ut}}=ie;t1(Dt),t1(Pt),Ze&&Jp(Ze),nn&&yn(Ut)&&Ut.forEach(Jt=>{nn.renderCache[Jt]=void 0}),ut.stop(),Je&&(Je.flags|=8,Me(kt,ie,le,Le)),ct&&pa(ct,le),pa(()=>{ie.isUnmounted=!0},le),le&&le.pendingBranch&&!le.isUnmounted&&ie.asyncDep&&!ie.asyncResolved&&ie.suspenseId===le.pendingId&&(le.deps--,le.deps===0&&le.resolve())},xt=(ie,le,Le,Ze=!1,ut=!1,Je=0)=>{for(let kt=Je;kt<ie.length;kt++)Me(ie[kt],le,Le,Ze,ut)},Re=ie=>{if(ie.shapeFlag&6)return Re(ie.component.subTree);if(ie.shapeFlag&128)return ie.suspense.next();const le=A(ie.anchor||ie.el),Le=le&&le[tT];return Le?A(Le):le};let vt=!1;const st=(ie,le,Le)=>{ie==null?le._vnode&&Me(le._vnode,null,null,!0):F(le._vnode||null,ie,le,null,null,null,Le),le._vnode=ie,vt||(vt=!0,Gw(),JC(),vt=!1)},Ye={p:F,um:Me,m:Se,r:Qe,mt:je,mc:ce,pc:ft,pbc:pe,n:Re,o:e};return{render:st,hydrate:void 0,createApp:FM(st)}}function Vy({type:e,props:n},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function Tu({effect:e,job:n},r){r?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function ZM(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Wb(e,n,r=!1){const s=e.children,c=n.children;if(yn(s)&&yn(c))for(let f=0;f<s.length;f++){const d=s[f];let a=c[f];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=c[f]=vl(c[f]),a.el=d.el),!r&&a.patchFlag!==-2&&Wb(d,a)),a.type===um&&(a.el=d.el),a.type===ta&&!a.el&&(a.el=d.el)}}function KM(e){const n=e.slice(),r=[0];let s,c,f,d,a;const b=e.length;for(s=0;s<b;s++){const C=e[s];if(C!==0){if(c=r[r.length-1],e[c]<C){n[s]=c,r.push(s);continue}for(f=0,d=r.length-1;f<d;)a=f+d>>1,e[r[a]]<C?f=a+1:d=a;C<e[r[f]]&&(f>0&&(n[s]=r[f-1]),r[f]=s)}}for(f=r.length,d=r[f-1];f-- >0;)r[f]=d,d=n[d];return r}function PT(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:PT(n)}function t1(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const YM=Symbol.for("v-scx"),XM=()=>_n(YM);function Ri(e,n){return Zb(e,null,n)}function Bt(e,n,r){return Zb(e,n,r)}function Zb(e,n,r=gi){const{immediate:s,deep:c,flush:f,once:d}=r,a=Tr({},r),b=n&&s||!n&&f!=="post";let C;if(Uf){if(f==="sync"){const I=XM();C=I.__watcherHandles||(I.__watcherHandles=[])}else if(!b){const I=()=>{};return I.stop=js,I.resume=js,I.pause=js,I}}const w=qr;a.call=(I,R,F)=>gs(I,w,R,F);let k=!1;f==="post"?a.scheduler=I=>{pa(I,w&&w.suspense)}:f!=="sync"&&(k=!0,a.scheduler=(I,R)=>{R?I():Fb(I)}),a.augmentJob=I=>{n&&(I.flags|=4),k&&(I.flags|=2,w&&(I.id=w.uid,I.i=w))};const A=vM(e,n,a);return Uf&&(C?C.push(A):b&&A()),A}function JM(e,n,r){const s=this.proxy,c=Oi(e)?e.includes(".")?IT(s,e):()=>s[e]:e.bind(s,s);let f;kn(n)?f=n:(f=n.handler,r=n);const d=cm(this),a=Zb(c,f.bind(s),r);return d(),a}function IT(e,n){const r=n.split(".");return()=>{let s=e;for(let c=0;c<r.length&&s;c++)s=s[r[c]];return s}}const QM=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${va(n)}Modifiers`]||e[`${Xu(n)}Modifiers`];function eD(e,n,...r){if(e.isUnmounted)return;const s=e.vnode.props||gi;let c=r;const f=n.startsWith("update:"),d=f&&QM(s,n.slice(7));d&&(d.trim&&(c=r.map(w=>Oi(w)?w.trim():w)),d.number&&(c=r.map(h_)));let a,b=s[a=Ey(n)]||s[a=Ey(va(n))];!b&&f&&(b=s[a=Ey(Xu(n))]),b&&gs(b,e,6,c);const C=s[a+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,gs(C,e,6,c)}}function AT(e,n,r=!1){const s=n.emitsCache,c=s.get(e);if(c!==void 0)return c;const f=e.emits;let d={},a=!1;if(!kn(e)){const b=C=>{const w=AT(C,n,!0);w&&(a=!0,Tr(d,w))};!r&&n.mixins.length&&n.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}return!f&&!a?(Ii(e)&&s.set(e,null),null):(yn(f)?f.forEach(b=>d[b]=null):Tr(d,f),Ii(e)&&s.set(e,d),d)}function Vg(e,n){return!e||!Ig(n)?!1:(n=n.slice(2).replace(/Once$/,""),li(e,n[0].toLowerCase()+n.slice(1))||li(e,Xu(n))||li(e,n))}function n1(e){const{type:n,vnode:r,proxy:s,withProxy:c,propsOptions:[f],slots:d,attrs:a,emit:b,render:C,renderCache:w,props:k,data:A,setupState:I,ctx:R,inheritAttrs:F}=e,B=cg(e);let $,O;try{if(r.shapeFlag&4){const X=c||s,te=X;$=$s(C.call(te,X,w,k,I,A,R)),O=a}else{const X=n;$=$s(X.length>1?X(k,{attrs:a,slots:d,emit:b}):X(k,null)),O=n.props?a:tD(a)}}catch(X){Mf.length=0,Rg(X,e,1),$=G(ta)}let q=$;if(O&&F!==!1){const X=Object.keys(O),{shapeFlag:te}=q;X.length&&te&7&&(f&&X.some(Ab)&&(O=nD(O,f)),q=So(q,O,!1,!0))}return r.dirs&&(q=So(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(r.dirs):r.dirs),r.transition&&Nu(q,r.transition),$=q,cg(B),$}const tD=e=>{let n;for(const r in e)(r==="class"||r==="style"||Ig(r))&&((n||(n={}))[r]=e[r]);return n},nD=(e,n)=>{const r={};for(const s in e)(!Ab(s)||!(s.slice(9)in n))&&(r[s]=e[s]);return r};function iD(e,n,r){const{props:s,children:c,component:f}=e,{props:d,children:a,patchFlag:b}=n,C=f.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&b>=0){if(b&1024)return!0;if(b&16)return s?i1(s,d,C):!!d;if(b&8){const w=n.dynamicProps;for(let k=0;k<w.length;k++){const A=w[k];if(d[A]!==s[A]&&!Vg(C,A))return!0}}}else return(c||a)&&(!a||!a.$stable)?!0:s===d?!1:s?d?i1(s,d,C):!0:!!d;return!1}function i1(e,n,r){const s=Object.keys(n);if(s.length!==Object.keys(e).length)return!0;for(let c=0;c<s.length;c++){const f=s[c];if(n[f]!==e[f]&&!Vg(r,f))return!0}return!1}function rD({vnode:e,parent:n},r){for(;n;){const s=n.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=n.vnode).el=r,n=n.parent;else break}}const ET=e=>e.__isSuspense;function aD(e,n){n&&n.pendingBranch?yn(e)?n.effects.push(...e):n.effects.push(e):bM(e)}const qt=Symbol.for("v-fgt"),um=Symbol.for("v-txt"),ta=Symbol.for("v-cmt"),Oy=Symbol.for("v-stc"),Mf=[];let Va=null;function vn(e=!1){Mf.push(Va=e?null:[])}function sD(){Mf.pop(),Va=Mf[Mf.length-1]||null}let jf=1;function r1(e,n=!1){jf+=e,e<0&&Va&&n&&(Va.hasOnce=!0)}function MT(e){return e.dynamicChildren=jf>0?Va||kd:null,sD(),jf>0&&Va&&Va.push(e),e}function ui(e,n,r,s,c,f){return MT(Z(e,n,r,s,c,f,!0))}function er(e,n,r,s,c){return MT(G(e,n,r,s,c,!0))}function Nf(e){return e?e.__v_isVNode===!0:!1}function Ru(e,n){return e.type===n.type&&e.key===n.key}const DT=({key:e})=>e??null,eg=({ref:e,ref_key:n,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Oi(e)||tr(e)||kn(e)?{i:ka,r:e,k:n,f:!!r}:e:null);function Z(e,n=null,r=null,s=0,c=null,f=e===qt?0:1,d=!1,a=!1){const b={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&DT(n),ref:n&&eg(n),scopeId:eT,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:s,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:ka};return a?(Kb(b,r),f&128&&e.normalize(b)):r&&(b.shapeFlag|=Oi(r)?8:16),jf>0&&!d&&Va&&(b.patchFlag>0||f&6)&&b.patchFlag!==32&&Va.push(b),b}const G=oD;function oD(e,n=null,r=null,s=0,c=null,f=!1){if((!e||e===EM)&&(e=ta),Nf(e)){const a=So(e,n,!0);return r&&Kb(a,r),jf>0&&!f&&Va&&(a.shapeFlag&6?Va[Va.indexOf(e)]=a:Va.push(a)),a.patchFlag=-2,a}if(gD(e)&&(e=e.__vccOpts),n){n=RT(n);let{class:a,style:b}=n;a&&!Oi(a)&&(n.class=gt(a)),Ii(b)&&(Ob(b)&&!yn(b)&&(b=Tr({},b)),n.style=zt(b))}const d=Oi(e)?1:ET(e)?128:nT(e)?64:Ii(e)?4:kn(e)?2:0;return Z(e,n,r,s,c,d,f,!0)}function RT(e){return e?Ob(e)||xT(e)?Tr({},e):e:null}function So(e,n,r=!1,s=!1){const{props:c,ref:f,patchFlag:d,children:a,transition:b}=e,C=n?lt(c||{},n):c,w={__v_isVNode:!0,__v_skip:!0,type:e.type,props:C,key:C&&DT(C),ref:n&&n.ref?r&&f?yn(f)?f.concat(eg(n)):[f,eg(n)]:eg(n):f,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==qt?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:b,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&So(e.ssContent),ssFallback:e.ssFallback&&So(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return b&&s&&Nu(w,b.clone(w)),w}function wn(e=" ",n=0){return G(um,null,e,n)}function Hr(e="",n=!1){return n?(vn(),er(ta,null,e)):G(ta,null,e)}function $s(e){return e==null||typeof e=="boolean"?G(ta):yn(e)?G(qt,null,e.slice()):Nf(e)?vl(e):G(um,null,String(e))}function vl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:So(e)}function Kb(e,n){let r=0;const{shapeFlag:s}=e;if(n==null)n=null;else if(yn(n))r=16;else if(typeof n=="object")if(s&65){const c=n.default;c&&(c._c&&(c._d=!1),Kb(e,c()),c._c&&(c._d=!0));return}else{r=32;const c=n._;!c&&!xT(n)?n._ctx=ka:c===3&&ka&&(ka.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else kn(n)?(n={default:n,_ctx:ka},r=32):(n=String(n),s&64?(r=16,n=[wn(n)]):r=8);e.children=n,e.shapeFlag|=r}function lt(...e){const n={};for(let r=0;r<e.length;r++){const s=e[r];for(const c in s)if(c==="class")n.class!==s.class&&(n.class=gt([n.class,s.class]));else if(c==="style")n.style=zt([n.style,s.style]);else if(Ig(c)){const f=n[c],d=s[c];d&&f!==d&&!(yn(f)&&f.includes(d))&&(n[c]=f?[].concat(f,d):d)}else c!==""&&(n[c]=s[c])}return n}function Vs(e,n,r,s=null){gs(e,n,7,[r,s])}const lD=yT();let uD=0;function cD(e,n,r){const s=e.type,c=(n?n.appContext:e.appContext)||lD,f={uid:uD++,vnode:e,type:s,parent:n,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new AC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(c.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ST(s,c),emitsOptions:AT(s,c),emit:null,emitted:null,propsDefaults:gi,inheritAttrs:s.inheritAttrs,ctx:gi,data:gi,props:gi,attrs:gi,slots:gi,refs:gi,setupState:gi,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=n?n.root:f,f.emit=eD.bind(null,f),e.ce&&e.ce(f),f}let qr=null;const Og=()=>qr||ka;let hg,x_;{const e=Mg(),n=(r,s)=>{let c;return(c=e[r])||(c=e[r]=[]),c.push(s),f=>{c.length>1?c.forEach(d=>d(f)):c[0](f)}};hg=n("__VUE_INSTANCE_SETTERS__",r=>qr=r),x_=n("__VUE_SSR_SETTERS__",r=>Uf=r)}const cm=e=>{const n=qr;return hg(e),e.scope.on(),()=>{e.scope.off(),hg(n)}},a1=()=>{qr&&qr.scope.off(),hg(null)};function LT(e){return e.vnode.shapeFlag&4}let Uf=!1;function dD(e,n=!1,r=!1){n&&x_(n);const{props:s,children:c}=e.vnode,f=LT(e);$M(e,s,f,n),GM(e,c,r||n);const d=f?hD(e,n):void 0;return n&&x_(!1),d}function hD(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,DM);const{setup:s}=r;if(s){xo();const c=e.setupContext=s.length>1?mD(e):null,f=cm(e),d=lm(s,e,0,[e.props,c]),a=SC(d);if(wo(),f(),(a||e.sp)&&!Af(e)&&cT(e),a){if(d.then(a1,a1),n)return d.then(b=>{s1(e,b)}).catch(b=>{Rg(b,e,0)});e.asyncDep=d}else s1(e,d)}else zT(e)}function s1(e,n,r){kn(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Ii(n)&&(e.setupState=ZC(n)),zT(e)}function zT(e,n,r){const s=e.type;e.render||(e.render=s.render||js);{const c=cm(e);xo();try{RM(e)}finally{wo(),c()}}}const fD={get(e,n){return ea(e,"get",""),e[n]}};function mD(e){const n=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,fD),slots:e.slots,emit:e.emit,expose:n}}function Fg(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ZC(HC(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in Ef)return Ef[r](e)},has(n,r){return r in n||r in Ef}})):e.proxy}function pD(e,n=!0){return kn(e)?e.displayName||e.name:e.name||n&&e.__name}function gD(e){return kn(e)&&"__vccOpts"in e}const ee=(e,n)=>pM(e,n,Uf);function bs(e,n,r){const s=arguments.length;return s===2?Ii(n)&&!yn(n)?Nf(n)?G(e,null,[n]):G(e,n):G(e,null,n):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&Nf(r)&&(r=[r]),G(e,n,r))}const vD="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let w_;const o1=typeof window<"u"&&window.trustedTypes;if(o1)try{w_=o1.createPolicy("vue",{createHTML:e=>e})}catch{}const BT=w_?e=>w_.createHTML(e):e=>e,yD="http://www.w3.org/2000/svg",_D="http://www.w3.org/1998/Math/MathML",vo=typeof document<"u"?document:null,l1=vo&&vo.createElement("template"),bD={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,s)=>{const c=n==="svg"?vo.createElementNS(yD,e):n==="mathml"?vo.createElementNS(_D,e):r?vo.createElement(e,{is:r}):vo.createElement(e);return e==="select"&&s&&s.multiple!=null&&c.setAttribute("multiple",s.multiple),c},createText:e=>vo.createTextNode(e),createComment:e=>vo.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vo.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,s,c,f){const d=r?r.previousSibling:n.lastChild;if(c&&(c===f||c.nextSibling))for(;n.insertBefore(c.cloneNode(!0),r),!(c===f||!(c=c.nextSibling)););else{l1.innerHTML=BT(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=l1.content;if(s==="svg"||s==="mathml"){const b=a.firstChild;for(;b.firstChild;)a.appendChild(b.firstChild);a.removeChild(b)}n.insertBefore(a,r)}return[d?d.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},dl="transition",pf="animation",Rd=Symbol("_vtc"),VT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},OT=Tr({},sT,VT),xD=e=>(e.displayName="Transition",e.props=OT,e),kl=xD((e,{slots:n})=>bs(CM,FT(e),n)),ku=(e,n=[])=>{yn(e)?e.forEach(r=>r(...n)):e&&e(...n)},u1=e=>e?yn(e)?e.some(n=>n.length>1):e.length>1:!1;function FT(e){const n={};for(const re in e)re in VT||(n[re]=e[re]);if(e.css===!1)return n;const{name:r="v",type:s,duration:c,enterFromClass:f=`${r}-enter-from`,enterActiveClass:d=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:b=f,appearActiveClass:C=d,appearToClass:w=a,leaveFromClass:k=`${r}-leave-from`,leaveActiveClass:A=`${r}-leave-active`,leaveToClass:I=`${r}-leave-to`}=e,R=wD(c),F=R&&R[0],B=R&&R[1],{onBeforeEnter:$,onEnter:O,onEnterCancelled:q,onLeave:X,onLeaveCancelled:te,onBeforeAppear:ae=$,onAppear:ue=O,onAppearCancelled:ce=q}=n,fe=(re,be,je,Be)=>{re._enterCancelled=Be,fl(re,be?w:a),fl(re,be?C:d),je&&je()},pe=(re,be)=>{re._isLeaving=!1,fl(re,k),fl(re,I),fl(re,A),be&&be()},_e=re=>(be,je)=>{const Be=re?ue:O,Fe=()=>fe(be,re,je);ku(Be,[be,Fe]),c1(()=>{fl(be,re?b:f),Os(be,re?w:a),u1(Be)||d1(be,s,F,Fe)})};return Tr(n,{onBeforeEnter(re){ku($,[re]),Os(re,f),Os(re,d)},onBeforeAppear(re){ku(ae,[re]),Os(re,b),Os(re,C)},onEnter:_e(!1),onAppear:_e(!0),onLeave(re,be){re._isLeaving=!0;const je=()=>pe(re,be);Os(re,k),re._enterCancelled?(Os(re,A),S_()):(S_(),Os(re,A)),c1(()=>{re._isLeaving&&(fl(re,k),Os(re,I),u1(X)||d1(re,s,B,je))}),ku(X,[re,je])},onEnterCancelled(re){fe(re,!1,void 0,!0),ku(q,[re])},onAppearCancelled(re){fe(re,!0,void 0,!0),ku(ce,[re])},onLeaveCancelled(re){pe(re),ku(te,[re])}})}function wD(e){if(e==null)return null;if(Ii(e))return[Fy(e.enter),Fy(e.leave)];{const n=Fy(e);return[n,n]}}function Fy(e){return VE(e)}function Os(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Rd]||(e[Rd]=new Set)).add(n)}function fl(e,n){n.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const r=e[Rd];r&&(r.delete(n),r.size||(e[Rd]=void 0))}function c1(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let SD=0;function d1(e,n,r,s){const c=e._endId=++SD,f=()=>{c===e._endId&&s()};if(r!=null)return setTimeout(f,r);const{type:d,timeout:a,propCount:b}=$T(e,n);if(!d)return s();const C=d+"end";let w=0;const k=()=>{e.removeEventListener(C,A),f()},A=I=>{I.target===e&&++w>=b&&k()};setTimeout(()=>{w<b&&k()},a+1),e.addEventListener(C,A)}function $T(e,n){const r=window.getComputedStyle(e),s=R=>(r[R]||"").split(", "),c=s(`${dl}Delay`),f=s(`${dl}Duration`),d=h1(c,f),a=s(`${pf}Delay`),b=s(`${pf}Duration`),C=h1(a,b);let w=null,k=0,A=0;n===dl?d>0&&(w=dl,k=d,A=f.length):n===pf?C>0&&(w=pf,k=C,A=b.length):(k=Math.max(d,C),w=k>0?d>C?dl:pf:null,A=w?w===dl?f.length:b.length:0);const I=w===dl&&/\b(transform|all)(,|$)/.test(s(`${dl}Property`).toString());return{type:w,timeout:k,propCount:A,hasTransform:I}}function h1(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,s)=>f1(r)+f1(e[s])))}function f1(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function S_(){return document.body.offsetHeight}function CD(e,n,r){const s=e[Rd];s&&(n=(n?[n,...s]:[...s]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}const fg=Symbol("_vod"),jT=Symbol("_vsh"),xs={beforeMount(e,{value:n},{transition:r}){e[fg]=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):gf(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:s}){!n!=!r&&(s?n?(s.beforeEnter(e),gf(e,!0),s.enter(e)):s.leave(e,()=>{gf(e,!1)}):gf(e,n))},beforeUnmount(e,{value:n}){gf(e,n)}};function gf(e,n){e.style.display=n?e[fg]:"none",e[jT]=!n}const TD=Symbol(""),kD=/(^|;)\s*display\s*:/;function PD(e,n,r){const s=e.style,c=Oi(r);let f=!1;if(r&&!c){if(n)if(Oi(n))for(const d of n.split(";")){const a=d.slice(0,d.indexOf(":")).trim();r[a]==null&&tg(s,a,"")}else for(const d in n)r[d]==null&&tg(s,d,"");for(const d in r)d==="display"&&(f=!0),tg(s,d,r[d])}else if(c){if(n!==r){const d=s[TD];d&&(r+=";"+d),s.cssText=r,f=kD.test(r)}}else n&&e.removeAttribute("style");fg in e&&(e[fg]=f?s.display:"",e[jT]&&(s.display="none"))}const m1=/\s*!important$/;function tg(e,n,r){if(yn(r))r.forEach(s=>tg(e,n,s));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const s=ID(e,n);m1.test(r)?e.setProperty(Xu(s),r.replace(m1,""),"important"):e[s]=r}}const p1=["Webkit","Moz","ms"],$y={};function ID(e,n){const r=$y[n];if(r)return r;let s=va(n);if(s!=="filter"&&s in e)return $y[n]=s;s=Ws(s);for(let c=0;c<p1.length;c++){const f=p1[c]+s;if(f in e)return $y[n]=f}return n}const g1="http://www.w3.org/1999/xlink";function v1(e,n,r,s,c,f=GE(n)){s&&n.startsWith("xlink:")?r==null?e.removeAttributeNS(g1,n.slice(6,n.length)):e.setAttributeNS(g1,n,r):r==null||f&&!kC(r)?e.removeAttribute(n):e.setAttribute(n,f?"":Al(r)?String(r):r)}function y1(e,n,r,s,c){if(n==="innerHTML"||n==="textContent"){r!=null&&(e[n]=n==="innerHTML"?BT(r):r);return}const f=e.tagName;if(n==="value"&&f!=="PROGRESS"&&!f.includes("-")){const a=f==="OPTION"?e.getAttribute("value")||"":e.value,b=r==null?e.type==="checkbox"?"on":"":String(r);(a!==b||!("_value"in e))&&(e.value=b),r==null&&e.removeAttribute(n),e._value=r;return}let d=!1;if(r===""||r==null){const a=typeof e[n];a==="boolean"?r=kC(r):r==null&&a==="string"?(r="",d=!0):a==="number"&&(r=0,d=!0)}try{e[n]=r}catch{}d&&e.removeAttribute(c||n)}function xd(e,n,r,s){e.addEventListener(n,r,s)}function AD(e,n,r,s){e.removeEventListener(n,r,s)}const _1=Symbol("_vei");function ED(e,n,r,s,c=null){const f=e[_1]||(e[_1]={}),d=f[n];if(s&&d)d.value=s;else{const[a,b]=MD(n);if(s){const C=f[n]=LD(s,c);xd(e,a,C,b)}else d&&(AD(e,a,d,b),f[n]=void 0)}}const b1=/(?:Once|Passive|Capture)$/;function MD(e){let n;if(b1.test(e)){n={};let s;for(;s=e.match(b1);)e=e.slice(0,e.length-s[0].length),n[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xu(e.slice(2)),n]}let jy=0;const DD=Promise.resolve(),RD=()=>jy||(DD.then(()=>jy=0),jy=Date.now());function LD(e,n){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;gs(zD(s,r.value),n,5,[s])};return r.value=e,r.attached=RD(),r}function zD(e,n){if(yn(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(s=>c=>!c._stopped&&s&&s(c))}else return n}const x1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,BD=(e,n,r,s,c,f)=>{const d=c==="svg";n==="class"?CD(e,s,d):n==="style"?PD(e,r,s):Ig(n)?Ab(n)||ED(e,n,r,s,f):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):VD(e,n,s,d))?(y1(e,n,s),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&v1(e,n,s,d,f,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!Oi(s))?y1(e,va(n),s,f,n):(n==="true-value"?e._trueValue=s:n==="false-value"&&(e._falseValue=s),v1(e,n,s,d))};function VD(e,n,r,s){if(s)return!!(n==="innerHTML"||n==="textContent"||n in e&&x1(n)&&kn(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const c=e.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return x1(n)&&Oi(r)?!1:n in e}const NT=new WeakMap,UT=new WeakMap,mg=Symbol("_moveCb"),w1=Symbol("_enterCb"),OD=e=>(delete e.props.mode,e),FD=OD({name:"TransitionGroup",props:Tr({},OT,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=Og(),s=aT();let c,f;return Ub(()=>{if(!c.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!UD(c[0].el,r.vnode.el,d)){c=[];return}c.forEach($D),c.forEach(jD);const a=c.filter(ND);S_(),a.forEach(b=>{const C=b.el,w=C.style;Os(C,d),w.transform=w.webkitTransform=w.transitionDuration="";const k=C[mg]=A=>{A&&A.target!==C||(!A||/transform$/.test(A.propertyName))&&(C.removeEventListener("transitionend",k),C[mg]=null,fl(C,d))};C.addEventListener("transitionend",k)}),c=[]}),()=>{const d=dn(e),a=FT(d);let b=d.tag||qt;if(c=[],f)for(let C=0;C<f.length;C++){const w=f[C];w.el&&w.el instanceof Element&&(c.push(w),Nu(w,$f(w,a,s,r)),NT.set(w,w.el.getBoundingClientRect()))}f=n.default?$b(n.default()):[];for(let C=0;C<f.length;C++){const w=f[C];w.key!=null&&Nu(w,$f(w,a,s,r))}return G(b,null,f)}}}),Yb=FD;function $D(e){const n=e.el;n[mg]&&n[mg](),n[w1]&&n[w1]()}function jD(e){UT.set(e,e.el.getBoundingClientRect())}function ND(e){const n=NT.get(e),r=UT.get(e),s=n.left-r.left,c=n.top-r.top;if(s||c){const f=e.el.style;return f.transform=f.webkitTransform=`translate(${s}px,${c}px)`,f.transitionDuration="0s",e}}function UD(e,n,r){const s=e.cloneNode(),c=e[Rd];c&&c.forEach(a=>{a.split(/\s+/).forEach(b=>b&&s.classList.remove(b))}),r.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const f=n.nodeType===1?n:n.parentNode;f.appendChild(s);const{hasTransform:d}=$T(s);return f.removeChild(s),d}const S1=e=>{const n=e.props["onUpdate:modelValue"]||!1;return yn(n)?r=>Jp(n,r):n};function GD(e){e.target.composing=!0}function C1(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Ny=Symbol("_assign"),Cl={created(e,{modifiers:{lazy:n,trim:r,number:s}},c){e[Ny]=S1(c);const f=s||c.props&&c.props.type==="number";xd(e,n?"change":"input",d=>{if(d.target.composing)return;let a=e.value;r&&(a=a.trim()),f&&(a=h_(a)),e[Ny](a)}),r&&xd(e,"change",()=>{e.value=e.value.trim()}),n||(xd(e,"compositionstart",GD),xd(e,"compositionend",C1),xd(e,"change",C1))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:r,modifiers:{lazy:s,trim:c,number:f}},d){if(e[Ny]=S1(d),e.composing)return;const a=(f||e.type==="number")&&!/^0\d/.test(e.value)?h_(e.value):e.value,b=n??"";a!==b&&(document.activeElement===e&&e.type!=="range"&&(s&&n===r||c&&e.value.trim()===b)||(e.value=b))}},qD=["ctrl","shift","alt","meta"],HD={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>qD.some(r=>e[`${r}Key`]&&!n.includes(r))},wl=(e,n)=>{const r=e._withMods||(e._withMods={}),s=n.join(".");return r[s]||(r[s]=(c,...f)=>{for(let d=0;d<n.length;d++){const a=HD[n[d]];if(a&&a(c,n))return}return e(c,...f)})},WD=Tr({patchProp:BD},bD);let T1;function GT(){return T1||(T1=HM(WD))}const qT=(...e)=>{GT().render(...e)},ZD=(...e)=>{const n=GT().createApp(...e),{mount:r}=n;return n.mount=s=>{const c=YD(s);if(!c)return;const f=n._component;!kn(f)&&!f.render&&!f.template&&(f.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const d=r(c,!1,KD(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),d},n};function KD(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function YD(e){return Oi(e)?document.querySelector(e):e}function ra(e,n){let r;function s(){r=Dd(),r.run(()=>n.length?n(()=>{r==null||r.stop(),s()}):n())}Bt(e,c=>{c&&!r?s():c||(r==null||r.stop(),r=void 0)},{immediate:!0}),fr(()=>{r==null||r.stop()})}const Kn=typeof window<"u",Xb=Kn&&"IntersectionObserver"in window,XD=Kn&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),k1=Kn&&"EyeDropper"in window,JD=Kn&&"matchMedia"in window&&typeof window.matchMedia=="function";function P1(e,n,r){QD(e,n),n.set(e,r)}function QD(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I1(e,n,r){return e.set(HT(e,n),r),r}function mo(e,n){return e.get(HT(e,n))}function HT(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function WT(e,n,r){const s=n.length-1;if(s<0)return e===void 0?r:e;for(let c=0;c<s;c++){if(e==null)return r;e=e[n[c]]}return e==null||e[n[s]]===void 0?r:e[n[s]]}function Lr(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date&&e.getTime()!==n.getTime()||e!==Object(e)||n!==Object(n))return!1;const r=Object.keys(e);return r.length!==Object.keys(n).length?!1:r.every(s=>Lr(e[s],n[s]))}function Uu(e,n,r){return e==null||!n||typeof n!="string"?r:e[n]!==void 0?e[n]:(n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),WT(e,n.split("."),r))}function Wi(e,n,r){if(n===!0)return e===void 0?r:e;if(n==null||typeof n=="boolean")return r;if(e!==Object(e)){if(typeof n!="function")return r;const c=n(e,r);return typeof c>"u"?r:c}if(typeof n=="string")return Uu(e,n,r);if(Array.isArray(n))return WT(e,n,r);if(typeof n!="function")return r;const s=n(e,r);return typeof s>"u"?r:s}function Oa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(r,s)=>n+s)}function Nt(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const r=Number(e);return isNaN(r)?String(e):isFinite(r)?`${r}${n}`:void 0}function Gf(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function A1(e){let n;return e!==null&&typeof e=="object"&&((n=Object.getPrototypeOf(e))===Object.prototype||n===null)}function Jb(e){if(e&&"$el"in e){const n=e.$el;return(n==null?void 0:n.nodeType)===Node.TEXT_NODE?n.nextElementSibling:n}return e}const C_=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),T_=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function ZT(e){return Object.keys(e)}function zu(e,n){return n.every(r=>e.hasOwnProperty(r))}function Io(e,n){const r={};for(const s of n)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}function k_(e,n,r){const s=Object.create(null),c=Object.create(null);for(const f in e)n.some(d=>d instanceof RegExp?d.test(f):d===f)?s[f]=e[f]:c[f]=e[f];return[s,c]}function hi(e,n){const r={...e};return n.forEach(s=>delete r[s]),r}const KT=/^on[^a-z]/,Qb=e=>KT.test(e),eR=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],tR=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function nR(e){return e.isComposing&&tR.includes(e.key)}function El(e){const[n,r]=k_(e,[KT]),s=hi(n,eR),[c,f]=k_(r,["class","style","id",/^data-/]);return Object.assign(c,n),Object.assign(f,s),[c,f]}function Di(e){return e==null?[]:Array.isArray(e)?e:[e]}function YT(e,n){let r=0;const s=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];clearTimeout(r),r=setTimeout(()=>e(...f),Cr(n))};return s.clear=()=>{clearTimeout(r)},s.immediate=e,s}function di(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(n,Math.min(r,e))}function E1(e){const n=e.toString().trim();return n.includes(".")?n.length-n.indexOf(".")-1:0}function M1(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+r.repeat(Math.max(0,n-e.length))}function D1(e,n){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,n-e.length))+e}function iR(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=[];let s=0;for(;s<e.length;)r.push(e.substr(s,n)),s+=n;return r}function R1(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<n)return`${e} B`;const r=n===1024?["Ki","Mi","Gi"]:["k","M","G"];let s=-1;for(;Math.abs(e)>=n&&s<r.length-1;)e/=n,++s;return`${e.toFixed(1)} ${r[s]}B`}function na(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s={};for(const c in e)s[c]=e[c];for(const c in n){const f=e[c],d=n[c];if(A1(f)&&A1(d)){s[c]=na(f,d,r);continue}if(r&&Array.isArray(f)&&Array.isArray(d)){s[c]=r(f,d);continue}s[c]=d}return s}function XT(e){return e.map(n=>n.type===qt?XT(n.children):n).flat()}function Fu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Fu.cache.has(e))return Fu.cache.get(e);const n=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Fu.cache.set(e,n),n}Fu.cache=new Map;function Cd(e,n){if(!n||typeof n!="object")return[];if(Array.isArray(n))return n.map(r=>Cd(e,r)).flat(1);if(n.suspense)return Cd(e,n.ssContent);if(Array.isArray(n.children))return n.children.map(r=>Cd(e,r)).flat(1);if(n.component){if(Object.getOwnPropertySymbols(n.component.provides).includes(e))return[n.component];if(n.component.subTree)return Cd(e,n.component.subTree).flat(1)}return[]}var od=new WeakMap,Pu=new WeakMap;class JT{constructor(n){P1(this,od,[]),P1(this,Pu,0),this.size=n}get isFull(){return mo(od,this).length===this.size}push(n){mo(od,this)[mo(Pu,this)]=n,I1(Pu,this,(mo(Pu,this)+1)%this.size)}values(){return mo(od,this).slice(mo(Pu,this)).concat(mo(od,this).slice(0,mo(Pu,this)))}clear(){mo(od,this).length=0,I1(Pu,this,0)}}function rR(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function e0(e){const n=Sr({});Ri(()=>{const s=e();for(const c in s)n[c]=s[c]},{flush:"sync"});const r={};for(const s in n)r[s]=Ee(()=>n[s]);return r}function pg(e,n){return e.includes(n)}function QT(e){return e[2].toLowerCase()+e.slice(3)}const zr=()=>[Function,Array];function L1(e,n){return n="on"+Ws(n),!!(e[n]||e[`${n}Once`]||e[`${n}Capture`]||e[`${n}OnceCapture`]||e[`${n}CaptureOnce`])}function $g(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(Array.isArray(e))for(const c of e)c(...r);else typeof e=="function"&&e(...r)}function qf(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(s=>`${s}${n?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(r)]}function ek(e,n,r){let s,c=e.indexOf(document.activeElement);const f=n==="next"?1:-1;do c+=f,s=e[c];while((!s||s.offsetParent==null||!((r==null?void 0:r(s))??!0))&&c<e.length&&c>=0);return s}function $u(e,n){var s,c,f,d;const r=qf(e);if(n==null)(e===document.activeElement||!e.contains(document.activeElement))&&((s=r[0])==null||s.focus());else if(n==="first")(c=r[0])==null||c.focus();else if(n==="last")(f=r.at(-1))==null||f.focus();else if(typeof n=="number")(d=r[n])==null||d.focus();else{const a=ek(r,n);a?a.focus():$u(e,n==="next"?"first":"last")}}function jp(e){return e==null||typeof e=="string"&&e.trim()===""}function tk(){}function Ld(e,n){if(!(Kn&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${n})`)))return null;try{return!!e&&e.matches(n)}catch{return null}}function jg(e){return e.some(n=>Nf(n)?n.type===ta?!1:n.type!==qt||jg(n.children):!0)?e:null}function Uy(e,n,r){return(e==null?void 0:e(n))??(r==null?void 0:r(n))}function aR(e,n){if(!Kn||e===0)return n(),()=>{};const r=window.setTimeout(n,e);return()=>window.clearTimeout(r)}function sR(e,n){const r=e.clientX,s=e.clientY,c=n.getBoundingClientRect(),f=c.left,d=c.top,a=c.right,b=c.bottom;return r>=f&&r<=a&&s>=d&&s<=b}function gg(){const e=Mt(),n=r=>{e.value=r};return Object.defineProperty(n,"value",{enumerable:!0,get:()=>e.value,set:r=>e.value=r}),Object.defineProperty(n,"el",{enumerable:!0,get:()=>Jb(e.value)}),n}function zd(e){const n=e.key.length===1,r=!e.ctrlKey&&!e.metaKey&&!e.altKey;return n&&r}function P_(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function I_(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function oR(e,n,r){const s=new RegExp(`[\\d\\-${I_(r)}]`),c=e.split("").filter(d=>s.test(d)).filter((d,a,b)=>a===0&&/[-]/.test(d)||d===r&&a===b.indexOf(d)||/\d/.test(d)).join("");if(n===0)return c.split(r)[0];const f=new RegExp(`${I_(r)}\\d`);if(n!==null&&f.test(c)){const d=c.split(r);return[d[0],d[1].substring(0,n)].join(r)}return c}function lR(e){const n={};for(const r in e)n[va(r)]=e[r];return n}function uR(e){const n=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(r=>{let[s,c]=r;return n.includes(s)?!!c:c!==void 0}))}const nk=["top","bottom"],cR=["start","end","left","right"];function A_(e,n){let[r,s]=e.split(" ");return s||(s=pg(nk,r)?"start":pg(cR,r)?"top":"center"),{side:E_(r,n),align:E_(s,n)}}function E_(e,n){return e==="start"?n?"right":"left":e==="end"?n?"left":"right":e}function Gy(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function qy(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function z1(e){return{side:e.align,align:e.side}}function B1(e){return pg(nk,e.side)?"y":"x"}class Ns{constructor(n){let{x:r,y:s,width:c,height:f}=n;this.x=r,this.y=s,this.width=c,this.height=f}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function V1(e,n){return{x:{before:Math.max(0,n.left-e.left),after:Math.max(0,e.right-n.right)},y:{before:Math.max(0,n.top-e.top),after:Math.max(0,e.bottom-n.bottom)}}}function ik(e){return Array.isArray(e)?new Ns({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function dR(e){if(e===document.documentElement)return visualViewport?new Ns({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Ns({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const n=e.getBoundingClientRect();return new Ns({x:n.x,y:n.y,width:e.clientWidth,height:e.clientHeight})}}function t0(e){const n=e.getBoundingClientRect(),r=getComputedStyle(e),s=r.transform;if(s){let c,f,d,a,b;if(s.startsWith("matrix3d("))c=s.slice(9,-1).split(/, /),f=Number(c[0]),d=Number(c[5]),a=Number(c[12]),b=Number(c[13]);else if(s.startsWith("matrix("))c=s.slice(7,-1).split(/, /),f=Number(c[0]),d=Number(c[3]),a=Number(c[4]),b=Number(c[5]);else return new Ns(n);const C=r.transformOrigin,w=n.x-a-(1-f)*parseFloat(C),k=n.y-b-(1-d)*parseFloat(C.slice(C.indexOf(" ")+1)),A=f?n.width/f:e.offsetWidth+1,I=d?n.height/d:e.offsetHeight+1;return new Ns({x:w,y:k,width:A,height:I})}else return new Ns(n)}function Bu(e,n,r){if(typeof e.animate>"u")return{finished:Promise.resolve()};let s;try{s=e.animate(n,r)}catch{return{finished:Promise.resolve()}}return typeof s.finished>"u"&&(s.finished=new Promise(c=>{s.onfinish=()=>{c(s)}})),s}const ng=new WeakMap;function hR(e,n){Object.keys(n).forEach(r=>{if(Qb(r)){const s=QT(r),c=ng.get(e);if(n[r]==null)c==null||c.forEach(f=>{const[d,a]=f;d===s&&(e.removeEventListener(s,a),c.delete(f))});else if(!c||![...c].some(f=>f[0]===s&&f[1]===n[r])){e.addEventListener(s,n[r]);const f=c||new Set;f.add([s,n[r]]),ng.has(e)||ng.set(e,f)}}else n[r]==null?e.removeAttribute(r):e.setAttribute(r,n[r])})}function fR(e,n){Object.keys(n).forEach(r=>{if(Qb(r)){const s=QT(r),c=ng.get(e);c==null||c.forEach(f=>{const[d,a]=f;d===s&&(e.removeEventListener(s,a),c.delete(f))})}else e.removeAttribute(r)})}const ld=2.4,O1=.2126729,F1=.7151522,$1=.072175,mR=.55,pR=.58,gR=.57,vR=.62,Np=.03,j1=1.45,yR=5e-4,_R=1.25,bR=1.25,N1=.078,U1=12.82051282051282,Up=.06,G1=.001;function q1(e,n){const r=(e.r/255)**ld,s=(e.g/255)**ld,c=(e.b/255)**ld,f=(n.r/255)**ld,d=(n.g/255)**ld,a=(n.b/255)**ld;let b=r*O1+s*F1+c*$1,C=f*O1+d*F1+a*$1;if(b<=Np&&(b+=(Np-b)**j1),C<=Np&&(C+=(Np-C)**j1),Math.abs(C-b)<yR)return 0;let w;if(C>b){const k=(C**mR-b**pR)*_R;w=k<G1?0:k<N1?k-k*U1*Up:k-Up}else{const k=(C**vR-b**gR)*bR;w=k>-G1?0:k>-N1?k-k*U1*Up:k+Up}return w*100}function rk(e,n){n=Array.isArray(n)?n.slice(0,-1).map(r=>`'${r}'`).join(", ")+` or '${n.at(-1)}'`:`'${n}'`}const vg=.20689655172413793,xR=e=>e>vg**3?Math.cbrt(e):e/(3*vg**2)+4/29,wR=e=>e>vg?e**3:3*vg**2*(e-4/29);function ak(e){const n=xR,r=n(e[1]);return[116*r-16,500*(n(e[0]/.95047)-r),200*(r-n(e[2]/1.08883))]}function sk(e){const n=wR,r=(e[0]+16)/116;return[n(r+e[1]/500)*.95047,n(r),n(r-e[2]/200)*1.08883]}const SR=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],CR=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,TR=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],kR=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function ok(e){const n=Array(3),r=CR,s=SR;for(let c=0;c<3;++c)n[c]=Math.round(di(r(s[c][0]*e[0]+s[c][1]*e[1]+s[c][2]*e[2]))*255);return{r:n[0],g:n[1],b:n[2]}}function n0(e){let{r:n,g:r,b:s}=e;const c=[0,0,0],f=kR,d=TR;n=f(n/255),r=f(r/255),s=f(s/255);for(let a=0;a<3;++a)c[a]=d[a][0]*n+d[a][1]*r+d[a][2]*s;return c}function M_(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function PR(e){return M_(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const H1=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,IR={rgb:(e,n,r,s)=>({r:e,g:n,b:r,a:s}),rgba:(e,n,r,s)=>({r:e,g:n,b:r,a:s}),hsl:(e,n,r,s)=>W1({h:e,s:n,l:r,a:s}),hsla:(e,n,r,s)=>W1({h:e,s:n,l:r,a:s}),hsv:(e,n,r,s)=>Gs({h:e,s:n,v:r,a:s}),hsva:(e,n,r,s)=>Gs({h:e,s:n,v:r,a:s})};function Fa(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&H1.test(e)){const{groups:n}=e.match(H1),{fn:r,values:s}=n,c=s.split(/,\s*|\s*\/\s*|\s+/).map((f,d)=>f.endsWith("%")||d>0&&d<3&&["hsl","hsla","hsv","hsva"].includes(r)?parseFloat(f)/100:parseFloat(f));return IR[r](...c)}else if(typeof e=="string"){let n=e.startsWith("#")?e.slice(1):e;return[3,4].includes(n.length)?n=n.split("").map(r=>r+r).join(""):[6,8].includes(n.length),dk(n)}else if(typeof e=="object"){if(zu(e,["r","g","b"]))return e;if(zu(e,["h","s","l"]))return Gs(i0(e));if(zu(e,["h","s","v"]))return Gs(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Gs(e){const{h:n,s:r,v:s,a:c}=e,f=a=>{const b=(a+n/60)%6;return s-s*r*Math.max(Math.min(b,4-b,1),0)},d=[f(5),f(3),f(1)].map(a=>Math.round(a*255));return{r:d[0],g:d[1],b:d[2],a:c}}function W1(e){return Gs(i0(e))}function dm(e){if(!e)return{h:0,s:1,v:1,a:1};const n=e.r/255,r=e.g/255,s=e.b/255,c=Math.max(n,r,s),f=Math.min(n,r,s);let d=0;c!==f&&(c===n?d=60*(0+(r-s)/(c-f)):c===r?d=60*(2+(s-n)/(c-f)):c===s&&(d=60*(4+(n-r)/(c-f)))),d<0&&(d=d+360);const a=c===0?0:(c-f)/c,b=[d,a,c];return{h:b[0],s:b[1],v:b[2],a:e.a}}function D_(e){const{h:n,s:r,v:s,a:c}=e,f=s-s*r/2,d=f===1||f===0?0:(s-f)/Math.min(f,1-f);return{h:n,s:d,l:f,a:c}}function i0(e){const{h:n,s:r,l:s,a:c}=e,f=s+r*Math.min(s,1-s),d=f===0?0:2-2*s/f;return{h:n,s:d,v:f,a:c}}function lk(e){let{r:n,g:r,b:s,a:c}=e;return c===void 0?`rgb(${n}, ${r}, ${s})`:`rgba(${n}, ${r}, ${s}, ${c})`}function uk(e){return lk(Gs(e))}function Gp(e){const n=Math.round(e).toString(16);return("00".substr(0,2-n.length)+n).toUpperCase()}function ck(e){let{r:n,g:r,b:s,a:c}=e;return`#${[Gp(n),Gp(r),Gp(s),c!==void 0?Gp(Math.round(c*255)):""].join("")}`}function dk(e){e=ER(e);let[n,r,s,c]=iR(e,2).map(f=>parseInt(f,16));return c=c===void 0?c:c/255,{r:n,g:r,b:s,a:c}}function AR(e){const n=dk(e);return dm(n)}function hk(e){return ck(Gs(e))}function ER(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(n=>n+n).join("")),e.length!==6&&(e=M1(M1(e,6),8,"F")),e}function MR(e,n){const r=ak(n0(e));return r[0]=r[0]+n*10,ok(sk(r))}function DR(e,n){const r=ak(n0(e));return r[0]=r[0]-n*10,ok(sk(r))}function R_(e){const n=Fa(e);return n0(n)[1]}function RR(e,n){const r=R_(e),s=R_(n),c=Math.max(r,s),f=Math.min(r,s);return(c+.05)/(f+.05)}function fk(e){const n=Math.abs(q1(Fa(0),Fa(e)));return Math.abs(q1(Fa(16777215),Fa(e)))>Math.min(n,50)?"#fff":"#000"}function Ue(e,n){return r=>Object.keys(e).reduce((s,c)=>{const d=typeof e[c]=="object"&&e[c]!=null&&!Array.isArray(e[c])?e[c]:{type:e[c]};return r&&c in r?s[c]={...d,default:r[c]}:s[c]=d,n&&!s[c].source&&(s[c].source=n),s},{})}const Ht=Ue({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function ji(e,n){const r=Og();if(!r)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return r}function Zs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const n=ji(e).type;return Fu((n==null?void 0:n.aliasName)||(n==null?void 0:n.name))}function LR(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ji("injectSelf");const{provides:r}=n;if(r&&e in r)return r[e]}const Bd=Symbol.for("vuetify:defaults");function zR(e){return tt(e)}function r0(){const e=_n(Bd);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function Li(e,n){const r=r0(),s=tt(e),c=ee(()=>{if(Cr(n==null?void 0:n.disabled))return r.value;const d=Cr(n==null?void 0:n.scoped),a=Cr(n==null?void 0:n.reset),b=Cr(n==null?void 0:n.root);if(s.value==null&&!(d||a||b))return r.value;let C=na(s.value,{prev:r.value});if(d)return C;if(a||b){const w=Number(a||1/0);for(let k=0;k<=w&&!(!C||!("prev"in C));k++)C=C.prev;return C&&typeof b=="string"&&b in C&&(C=na(na(C,{prev:C}),C[b])),C}return C.prev?na(C.prev,C):C});return ri(Bd,c),c}function BR(e,n){return e.props&&(typeof e.props[n]<"u"||typeof e.props[Fu(n)]<"u")}function VR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r0();const s=ji("useDefaults");if(n=n??s.type.name??s.type.__name,!n)throw new Error("[Vuetify] Could not determine component name");const c=ee(()=>{var b;return(b=r.value)==null?void 0:b[e._as??n]}),f=new Proxy(e,{get(b,C){var I,R,F,B;const w=Reflect.get(b,C);if(C==="class"||C==="style")return[(I=c.value)==null?void 0:I[C],w].filter($=>$!=null);if(BR(s.vnode,C))return w;const k=(R=c.value)==null?void 0:R[C];if(k!==void 0)return k;const A=(B=(F=r.value)==null?void 0:F.global)==null?void 0:B[C];return A!==void 0?A:w}}),d=Mt();Ri(()=>{if(c.value){const b=Object.entries(c.value).filter(C=>{let[w]=C;return w.startsWith(w[0].toUpperCase())});d.value=b.length?Object.fromEntries(b):void 0}else d.value=void 0});function a(){const b=LR(Bd,s);ri(Bd,ee(()=>d.value?na((b==null?void 0:b.value)??{},d.value):b==null?void 0:b.value))}return{props:f,provideSubDefaults:a}}function ja(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=Ue(e.props??{},e.name)();const n=Object.keys(e.props).filter(r=>r!=="class"&&r!=="style");e.filterProps=function(s){return Io(s,n)},e.props._as=String,e.setup=function(s,c){const f=r0();if(!f.value)return e._setup(s,c);const{props:d,provideSubDefaults:a}=VR(s,s._as??e.name,f),b=e._setup(d,c);return a(),b}}return e}function ht(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n=>(e?ja:jb)(n)}function OR(e,n){return n.props=e,n}function Ao(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",r=arguments.length>2?arguments[2]:void 0;return ht()({name:r??Ws(va(e.replace(/__/g,"-"))),props:{tag:{type:String,default:n},...Ht()},setup(s,c){let{slots:f}=c;return()=>{var d;return bs(s.tag,{class:[e,s.class],style:s.style},(d=f.default)==null?void 0:d.call(f))}}})}function mk(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const n=e.getRootNode();return n!==document&&n.getRootNode({composed:!0})!==document?null:n}const Hf="cubic-bezier(0.4, 0, 0.2, 1)",FR="cubic-bezier(0.0, 0, 0.2, 1)",$R="cubic-bezier(0.4, 0, 1, 1)";function Z1(e,n,r){return Object.keys(e).filter(s=>Qb(s)&&s.endsWith(n)).reduce((s,c)=>(s[c.slice(0,-n.length)]=f=>e[c](f,r(f)),s),{})}function a0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(n?jR(e):s0(e))return e;e=e.parentElement}return document.scrollingElement}function yg(e,n){const r=[];if(n&&e&&!n.contains(e))return r;for(;e&&(s0(e)&&r.push(e),e!==n);)e=e.parentElement;return r}function s0(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return n.overflowY==="scroll"||n.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function jR(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return["scroll","auto"].includes(n.overflowY)}function NR(e){let{depth:n,isLast:r,isLastGroup:s,leafLinks:c,separateRoots:f,parentIndentLines:d,variant:a}=e;if(!d||!n)return{leaf:void 0,node:void 0,children:d};if(a==="simple")return{leaf:[...d,"line"],node:[...d,"line"],children:[...d,"line"]};const b=r&&(!s||f||n>1);return{leaf:[...d,b?"last-leaf":"leaf",...c?["leaf-link"]:[]],node:[...d,b?"last-leaf":"leaf"],children:[...d,b?"none":"line"]}}function UR(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function _t(e){const n=ji("useRender");n.render=e}function Qt(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k=>k,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:k=>k;const f=ji("useProxiedModel"),d=tt(e[n]!==void 0?e[n]:r),a=Fu(n),C=ee(a!==n?()=>{var k,A,I,R;return e[n],!!(((k=f.vnode.props)!=null&&k.hasOwnProperty(n)||(A=f.vnode.props)!=null&&A.hasOwnProperty(a))&&((I=f.vnode.props)!=null&&I.hasOwnProperty(`onUpdate:${n}`)||(R=f.vnode.props)!=null&&R.hasOwnProperty(`onUpdate:${a}`)))}:()=>{var k,A;return e[n],!!((k=f.vnode.props)!=null&&k.hasOwnProperty(n)&&((A=f.vnode.props)!=null&&A.hasOwnProperty(`onUpdate:${n}`)))});ra(()=>!C.value,()=>{Bt(()=>e[n],k=>{d.value=k})});const w=ee({get(){const k=e[n];return s(C.value?k:d.value)},set(k){const A=c(k),I=dn(C.value?e[n]:d.value);I===A||s(I)===k||(d.value=A,f==null||f.emit(`update:${n}`,A))}});return Object.defineProperty(w,"externalValue",{get:()=>C.value?e[n]:d.value}),w}const GR={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"}},K1="$vuetify.",Y1=(e,n)=>e.replace(/\{(\d+)\}/g,(r,s)=>String(n[Number(s)])),pk=(e,n,r)=>function(s){for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];if(!s.startsWith(K1))return Y1(s,f);const a=s.replace(K1,""),b=e.value&&r.value[e.value],C=n.value&&r.value[n.value];let w=Uu(b,a,null);return w||(`${s}${e.value}`,w=Uu(C,a,null)),w||(w=s),typeof w!="string"&&(w=s),Y1(w,f)};function o0(e,n){return(r,s)=>new Intl.NumberFormat([e.value,n.value],s).format(r)}function gk(e,n){return o0(e,n)(.1).includes(",")?",":"."}function Hy(e,n,r){const s=Qt(e,n,e[n]??r.value);return s.value=e[n]??r.value,Bt(r,c=>{e[n]==null&&(s.value=r.value)}),s}function vk(e){return n=>{const r=Hy(n,"locale",e.current),s=Hy(n,"fallback",e.fallback),c=Hy(n,"messages",e.messages);return{name:"vuetify",current:r,fallback:s,messages:c,decimalSeparator:Ee(()=>gk(r,s)),t:pk(r,s,c),n:o0(r,s),provide:vk({current:r,fallback:s,messages:c})}}}function qR(e){const n=Mt((e==null?void 0:e.locale)??"en"),r=Mt((e==null?void 0:e.fallback)??"en"),s=tt({en:GR,...e==null?void 0:e.messages});return{name:"vuetify",current:n,fallback:r,messages:s,decimalSeparator:Ee(()=>(e==null?void 0:e.decimalSeparator)??gk(n,r)),t:pk(n,r,s),n:o0(n,r),provide:vk({current:n,fallback:r,messages:s})}}const Vd=Symbol.for("vuetify:locale");function HR(e){return e.name!=null}function WR(e){const n=e!=null&&e.adapter&&HR(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:qR(e),r=YR(n,e);return{...n,...r}}function vi(){const e=_n(Vd);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function ZR(e){const n=_n(Vd);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");const r=n.provide(e),s=XR(r,n.rtl,e),c={...r,...s};return ri(Vd,c),c}function KR(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function YR(e,n){const r=tt((n==null?void 0:n.rtl)??KR()),s=ee(()=>r.value[e.current.value]??!1);return{isRtl:s,rtl:r,rtlClasses:Ee(()=>`v-locale--is-${s.value?"rtl":"ltr"}`)}}function XR(e,n,r){const s=ee(()=>r.rtl??n.value[e.current.value]??!1);return{isRtl:s,rtl:n,rtlClasses:Ee(()=>`v-locale--is-${s.value?"rtl":"ltr"}`)}}function nr(){const e=_n(Vd);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function hm(e){const n=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(n):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(n):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(n):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(n):return{firstDay:6,firstWeekSize:1};case n==="MV":return{firstDay:5,firstWeekSize:1};case n==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function JR(e,n,r){var w;const s=[];let c=[];const f=yk(e),d=_k(e),a=r??((w=hm(n))==null?void 0:w.firstDay)??0,b=(f.getDay()-a+7)%7,C=(d.getDay()-a+7)%7;for(let k=0;k<b;k++){const A=new Date(f);A.setDate(A.getDate()-(b-k)),c.push(A)}for(let k=1;k<=d.getDate();k++){const A=new Date(e.getFullYear(),e.getMonth(),k);c.push(A),c.length===7&&(s.push(c),c=[])}for(let k=1;k<7-C;k++){const A=new Date(d);A.setDate(A.getDate()+k),c.push(A)}return c.length>0&&s.push(c),s}function L_(e,n,r){var f;const s=r??((f=hm(n))==null?void 0:f.firstDay)??0,c=new Date(e);for(;c.getDay()!==s;)c.setDate(c.getDate()-1);return c}function QR(e,n){var c;const r=new Date(e),s=((((c=hm(n))==null?void 0:c.firstDay)??0)+6)%7;for(;r.getDay()!==s;)r.setDate(r.getDate()+1);return r}function yk(e){return new Date(e.getFullYear(),e.getMonth(),1)}function _k(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function eL(e){const n=e.split("-").map(Number);return new Date(n[0],n[1]-1,n[2])}const tL=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function bk(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let n;if(tL.test(e))return eL(e);if(n=Date.parse(e),!isNaN(n))return new Date(n)}return null}const X1=new Date(2e3,0,2);function nL(e,n,r){var c;const s=n??((c=hm(e))==null?void 0:c.firstDay)??0;return Oa(7).map(f=>{const d=new Date(X1);return d.setDate(X1.getDate()+s+f),new Intl.DateTimeFormat(e,{weekday:r??"narrow"}).format(d)})}function iL(e,n,r,s){const c=bk(e)??new Date,f=s==null?void 0:s[n];if(typeof f=="function")return f(c,n,r);let d={};switch(n){case"fullDate":d={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":d={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const a=c.getDate(),b=new Intl.DateTimeFormat(r,{month:"long"}).format(c);return`${a} ${b}`;case"normalDateWithWeekday":d={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":d={month:"short",day:"numeric"};break;case"year":d={year:"numeric"};break;case"month":d={month:"long"};break;case"monthShort":d={month:"short"};break;case"monthAndYear":d={month:"long",year:"numeric"};break;case"monthAndDate":d={month:"long",day:"numeric"};break;case"weekday":d={weekday:"long"};break;case"weekdayShort":d={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(r).format(c.getDate());case"hours12h":d={hour:"numeric",hour12:!0};break;case"hours24h":d={hour:"numeric",hour12:!1};break;case"minutes":d={minute:"numeric"};break;case"seconds":d={second:"numeric"};break;case"fullTime":d={hour:"numeric",minute:"numeric"};break;case"fullTime12h":d={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":d={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":d={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");case"keyboardDateTime12h":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");case"keyboardDateTime24h":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");default:d=f??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(r,d).format(c)}function rL(e,n){const r=e.toJsDate(n),s=r.getFullYear(),c=D1(String(r.getMonth()+1),2,"0"),f=D1(String(r.getDate()),2,"0");return`${s}-${c}-${f}`}function aL(e){const[n,r,s]=e.split("-").map(Number);return new Date(n,r-1,s)}function sL(e,n){const r=new Date(e);return r.setMinutes(r.getMinutes()+n),r}function oL(e,n){const r=new Date(e);return r.setHours(r.getHours()+n),r}function ig(e,n){const r=new Date(e);return r.setDate(r.getDate()+n),r}function lL(e,n){const r=new Date(e);return r.setDate(r.getDate()+n*7),r}function uL(e,n){const r=new Date(e);return r.setDate(1),r.setMonth(r.getMonth()+n),r}function z_(e){return e.getFullYear()}function cL(e){return e.getMonth()}function dL(e,n,r,s){const c=hm(n),f=r??(c==null?void 0:c.firstDay)??0,d=s??(c==null?void 0:c.firstWeekSize)??1;function a(I){const R=new Date(I,0,1);return 7-B_(R,L_(R,n,f),"days")}let b=z_(e);const C=ig(L_(e,n,f),6);b<z_(C)&&a(b+1)>=d&&b++;const w=new Date(b,0,1),k=a(b),A=k>=d?ig(w,k-7):ig(w,k);return 1+B_(xk(e),bg(A),"weeks")}function hL(e){return e.getDate()}function fL(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function mL(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function pL(e){return e.getHours()}function gL(e){return e.getMinutes()}function vL(e){return new Date(e.getFullYear(),0,1)}function yL(e){return new Date(e.getFullYear(),11,31)}function _L(e,n){return _g(e,n[0])&&wL(e,n[1])}function bL(e){const n=new Date(e);return n instanceof Date&&!isNaN(n.getTime())}function _g(e,n){return e.getTime()>n.getTime()}function xL(e,n){return _g(bg(e),bg(n))}function wL(e,n){return e.getTime()<n.getTime()}function J1(e,n){return e.getTime()===n.getTime()}function SL(e,n){return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function CL(e,n){return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function TL(e,n){return e.getFullYear()===n.getFullYear()}function B_(e,n,r){const s=new Date(e),c=new Date(n);switch(r){case"years":return s.getFullYear()-c.getFullYear();case"quarters":return Math.floor((s.getMonth()-c.getMonth()+(s.getFullYear()-c.getFullYear())*12)/4);case"months":return s.getMonth()-c.getMonth()+(s.getFullYear()-c.getFullYear())*12;case"weeks":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60*24));case"hours":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60));case"minutes":return Math.floor((s.getTime()-c.getTime())/(1e3*60));case"seconds":return Math.floor((s.getTime()-c.getTime())/1e3);default:return s.getTime()-c.getTime()}}function kL(e,n){const r=new Date(e);return r.setHours(n),r}function PL(e,n){const r=new Date(e);return r.setMinutes(n),r}function IL(e,n){const r=new Date(e);return r.setMonth(n),r}function AL(e,n){const r=new Date(e);return r.setDate(n),r}function EL(e,n){const r=new Date(e);return r.setFullYear(n),r}function bg(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function xk(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class ML{constructor(n){this.locale=n.locale,this.formats=n.formats}date(n){return bk(n)}toJsDate(n){return n}toISO(n){return rL(this,n)}parseISO(n){return aL(n)}addMinutes(n,r){return sL(n,r)}addHours(n,r){return oL(n,r)}addDays(n,r){return ig(n,r)}addWeeks(n,r){return lL(n,r)}addMonths(n,r){return uL(n,r)}getWeekArray(n,r){const s=r!==void 0?Number(r):void 0;return JR(n,this.locale,s)}startOfWeek(n,r){const s=r!==void 0?Number(r):void 0;return L_(n,this.locale,s)}endOfWeek(n){return QR(n,this.locale)}startOfMonth(n){return yk(n)}endOfMonth(n){return _k(n)}format(n,r){return iL(n,r,this.locale,this.formats)}isEqual(n,r){return J1(n,r)}isValid(n){return bL(n)}isWithinRange(n,r){return _L(n,r)}isAfter(n,r){return _g(n,r)}isAfterDay(n,r){return xL(n,r)}isBefore(n,r){return!_g(n,r)&&!J1(n,r)}isSameDay(n,r){return SL(n,r)}isSameMonth(n,r){return CL(n,r)}isSameYear(n,r){return TL(n,r)}setMinutes(n,r){return PL(n,r)}setHours(n,r){return kL(n,r)}setMonth(n,r){return IL(n,r)}setDate(n,r){return AL(n,r)}setYear(n,r){return EL(n,r)}getDiff(n,r,s){return B_(n,r,s)}getWeekdays(n,r){const s=n!==void 0?Number(n):void 0;return nL(this.locale,s,r)}getYear(n){return z_(n)}getMonth(n){return cL(n)}getWeek(n,r,s){const c=r!==void 0?Number(r):void 0;return dL(n,this.locale,c,s)}getDate(n){return hL(n)}getNextMonth(n){return fL(n)}getPreviousMonth(n){return mL(n)}getHours(n){return pL(n)}getMinutes(n){return gL(n)}startOfDay(n){return bg(n)}endOfDay(n){return xk(n)}startOfYear(n){return vL(n)}endOfYear(n){return yL(n)}}const wk=Symbol.for("vuetify:date-options"),Q1=Symbol.for("vuetify:date-adapter");function DL(e,n){const r=na({adapter:ML,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:r,instance:Sk(r,n)}}function RL(e,n,r){const s=e.getDiff(e.endOfDay(r??n),e.startOfDay(n),"days"),c=[n];for(let f=1;f<s;f++){const d=e.addDays(n,f);c.push(d)}return r&&c.push(e.endOfDay(r)),c}function Sk(e,n){const r=Sr(typeof e.adapter=="function"?new e.adapter({locale:e.locale[n.current.value]??n.current.value,formats:e.formats}):e.adapter);return Bt(n.current,s=>{r.locale=e.locale[s]??s??r.locale}),r}function fm(){const e=_n(wk);if(!e)throw new Error("[Vuetify] Could not find injected date options");const n=vi();return Sk(e,n)}const Ng=["sm","md","lg","xl","xxl"],V_=Symbol.for("vuetify:display"),eS={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},LL=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eS;return na(eS,e)};function tS(e){return Kn&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function nS(e){return Kn&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function iS(e){const n=Kn&&!e?window.navigator.userAgent:"ssr";function r(R){return!!n.match(R)}const s=r(/android/i),c=r(/iphone|ipad|ipod/i),f=r(/cordova/i),d=r(/electron/i),a=r(/chrome/i),b=r(/edge/i),C=r(/firefox/i),w=r(/opera/i),k=r(/win/i),A=r(/mac/i),I=r(/linux/i);return{android:s,ios:c,cordova:f,electron:d,chrome:a,edge:b,firefox:C,opera:w,win:k,mac:A,linux:I,touch:XD,ssr:n==="ssr"}}function zL(e,n){const{thresholds:r,mobileBreakpoint:s}=LL(e),c=Mt(nS(n)),f=Mt(iS(n)),d=Sr({}),a=Mt(tS(n));function b(){c.value=nS(),a.value=tS()}function C(){b(),f.value=iS()}return Ri(()=>{const w=a.value<r.sm,k=a.value<r.md&&!w,A=a.value<r.lg&&!(k||w),I=a.value<r.xl&&!(A||k||w),R=a.value<r.xxl&&!(I||A||k||w),F=a.value>=r.xxl,B=w?"xs":k?"sm":A?"md":I?"lg":R?"xl":"xxl",$=typeof s=="number"?s:r[s],O=a.value<$;d.xs=w,d.sm=k,d.md=A,d.lg=I,d.xl=R,d.xxl=F,d.smAndUp=!w,d.mdAndUp=!(w||k),d.lgAndUp=!(w||k||A),d.xlAndUp=!(w||k||A||I),d.smAndDown=!(A||I||R||F),d.mdAndDown=!(I||R||F),d.lgAndDown=!(R||F),d.xlAndDown=!F,d.name=B,d.height=c.value,d.width=a.value,d.mobile=O,d.mobileBreakpoint=s,d.platform=f.value,d.thresholds=r}),Kn&&(window.addEventListener("resize",b,{passive:!0}),fr(()=>{window.removeEventListener("resize",b)},!0)),{...qd(d),update:C,ssr:!!n}}const Ju=Ue({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Qa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=_n(V_);if(!r)throw new Error("Could not find Vuetify display injection");const s=ee(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?r.width.value<e.mobileBreakpoint:e.mobileBreakpoint?r.width.value<r.thresholds.value[e.mobileBreakpoint]:e.mobile===null?r.mobile.value:!1),c=Ee(()=>n?{[`${n}--mobile`]:s.value}:{});return{...r,displayClasses:c,mobile:s}}const Ck=Symbol.for("vuetify:goto");function Tk(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5}}}function BL(e){return l0(e)??(document.scrollingElement||document.body)}function l0(e){return typeof e=="string"?document.querySelector(e):Jb(e)}function Wy(e,n,r){if(typeof e=="number")return n&&r?-e:e;let s=l0(e),c=0;for(;s;)c+=n?s.offsetLeft:s.offsetTop,s=s.offsetParent;return c}function VL(e,n){return{rtl:n.isRtl,options:na(Tk(),e)}}async function rS(e,n,r,s){const c=r?"scrollLeft":"scrollTop",f=na((s==null?void 0:s.options)??Tk(),n),d=s==null?void 0:s.rtl.value,a=(typeof e=="number"?e:l0(e))??0,b=f.container==="parent"&&a instanceof HTMLElement?a.parentElement:BL(f.container),C=typeof f.easing=="function"?f.easing:f.patterns[f.easing];if(!C)throw new TypeError(`Easing function "${f.easing}" not found.`);let w;if(typeof a=="number")w=Wy(a,r,d);else if(w=Wy(a,r,d)-Wy(b,r,d),f.layout){const R=window.getComputedStyle(a).getPropertyValue("--v-layout-top");R&&(w-=parseInt(R,10))}w+=f.offset,w=FL(b,w,!!d,!!r);const k=b[c]??0;if(w===k)return Promise.resolve(w);const A=performance.now();return new Promise(I=>requestAnimationFrame(function R(F){const $=(F-A)/f.duration,O=Math.floor(k+(w-k)*C(di($,0,1)));if(b[c]=O,$>=1&&Math.abs(O-b[c])<10)return I(w);if($>2)return I(b[c]);requestAnimationFrame(R)}))}function OL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=_n(Ck),{isRtl:r}=nr();if(!n)throw new Error("[Vuetify] Could not find injected goto instance");const s={...n,rtl:Ee(()=>n.rtl.value||r.value)};async function c(f,d){return rS(f,na(e,d),!1,s)}return c.horizontal=async(f,d)=>rS(f,na(e,d),!0,s),c}function FL(e,n,r,s){const{scrollWidth:c,scrollHeight:f}=e,[d,a]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let b,C;return s?r?(b=-(c-d),C=0):(b=0,C=c-d):(b=0,C=f+-a),di(n,b,C)}const $L={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace"},jL={component:e=>bs(c0,{...e,class:"mdi"})},tn=[String,Function,Object,Array],O_=Symbol.for("vuetify:icons"),Ug=Ue({icon:{type:tn},tag:{type:[String,Object,Function],required:!0}},"icon"),F_=ht()({name:"VComponentIcon",props:Ug(),setup(e,n){let{slots:r}=n;return()=>{const s=e.icon;return G(e.tag,null,{default:()=>{var c;return[e.icon?G(s,null,null):(c=r.default)==null?void 0:c.call(r)]}})}}}),u0=ja({name:"VSvgIcon",inheritAttrs:!1,props:Ug(),setup(e,n){let{attrs:r}=n;return()=>G(e.tag,lt(r,{style:null}),{default:()=>[Z("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(s=>Array.isArray(s)?Z("path",{d:s[0],"fill-opacity":s[1]},null):Z("path",{d:s},null)):Z("path",{d:e.icon},null)])]})}}),NL=ja({name:"VLigatureIcon",props:Ug(),setup(e){return()=>G(e.tag,null,{default:()=>[e.icon]})}}),c0=ja({name:"VClassIcon",props:Ug(),setup(e){return()=>G(e.tag,{class:gt(e.icon)},null)}});function UL(){return{svg:{component:u0},class:{component:c0}}}function GL(e){const n=UL(),r=(e==null?void 0:e.defaultSet)??"mdi";return r==="mdi"&&!n.mdi&&(n.mdi=jL),na({defaultSet:r,sets:n,aliases:{...$L,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const qL=e=>{const n=_n(O_);if(!n)throw new Error("Missing Vuetify Icons provide!");return{iconData:ee(()=>{var b;const s=Us(e);if(!s)return{component:F_};let c=s;if(typeof c=="string"&&(c=c.trim(),c.startsWith("$")&&(c=(b=n.aliases)==null?void 0:b[c.slice(1)])),Array.isArray(c))return{component:u0,icon:c};if(typeof c!="string")return{component:F_,icon:c};const f=Object.keys(n.sets).find(C=>typeof c=="string"&&c.startsWith(`${C}:`)),d=f?c.slice(f.length+1):c;return{component:n.sets[f??n.defaultSet].component,icon:d}})}},Wf=Symbol.for("vuetify:theme"),Un=Ue({theme:String},"theme");function aS(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function HL(){var s,c;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:aS();const n=aS();if(!e)return{...n,isDisabled:!0};const r={};for(const[f,d]of Object.entries(e.themes??{})){const a=d.dark||f==="dark"?(s=n.themes)==null?void 0:s.dark:(c=n.themes)==null?void 0:c.light;r[f]=na(a,d)}return na(n,{...e,themes:r})}function Iu(e,n,r,s){e.push(`${YL(n,s)} {
`,...r.map(c=>`  ${c};
`),`}
`)}function sS(e,n){const r=e.dark?2:1,s=e.dark?1:2,c=[];for(const[f,d]of Object.entries(e.colors)){const a=Fa(d);c.push(`--${n}theme-${f}: ${a.r},${a.g},${a.b}`),f.startsWith("on-")||c.push(`--${n}theme-${f}-overlay-multiplier: ${R_(d)>.18?r:s}`)}for(const[f,d]of Object.entries(e.variables)){const a=typeof d=="string"&&d.startsWith("#")?Fa(d):void 0,b=a?`${a.r}, ${a.g}, ${a.b}`:void 0;c.push(`--${n}${f}: ${b??d}`)}return c}function WL(e,n,r){const s={};if(r)for(const c of["lighten","darken"]){const f=c==="lighten"?MR:DR;for(const d of Oa(r[c],1))s[`${e}-${c}-${d}`]=ck(f(Fa(n),d))}return s}function ZL(e,n){if(!n)return{};let r={};for(const s of n.colors){const c=e[s];c&&(r={...r,...WL(s,c,n)})}return r}function KL(e){const n={};for(const r of Object.keys(e)){if(r.startsWith("on-")||e[`on-${r}`])continue;const s=`on-${r}`,c=Fa(e[r]);n[s]=fk(c)}return n}function YL(e,n){if(!n)return e;const r=`:where(${n})`;return e===":root"?r:`${r} ${e}`}function XL(e,n,r){const s=JL(e,n);s&&(s.innerHTML=r)}function JL(e,n){if(!Kn)return null;let r=document.getElementById(e);return r||(r=document.createElement("style"),r.id=e,r.type="text/css",n&&r.setAttribute("nonce",n),document.head.appendChild(r)),r}function QL(e){const n=HL(e),r=Mt(n.defaultTheme),s=tt(n.themes),c=Mt("light"),f=ee({get(){return r.value==="system"?c.value:r.value},set(B){r.value=B}}),d=ee(()=>{const B={};for(const[$,O]of Object.entries(s.value)){const q={...O.colors,...ZL(O.colors,n.variations)};B[$]={...O,colors:{...q,...KL(q)}}}return B}),a=Ee(()=>d.value[f.value]),b=ee(()=>{var q;const B=[],$=n.unimportant?"":" !important",O=n.scoped?n.prefix:"";(q=a.value)!=null&&q.dark&&Iu(B,":root",["color-scheme: dark"],n.scope),Iu(B,":root",sS(a.value,n.prefix),n.scope);for(const[X,te]of Object.entries(d.value))Iu(B,`.${n.prefix}theme--${X}`,[`color-scheme: ${te.dark?"dark":"normal"}`,...sS(te,n.prefix)],n.scope);if(n.utilities){const X=[],te=[],ae=new Set(Object.values(d.value).flatMap(ue=>Object.keys(ue.colors)));for(const ue of ae)ue.startsWith("on-")?Iu(te,`.${ue}`,[`color: rgb(var(--${n.prefix}theme-${ue}))${$}`],n.scope):(Iu(X,`.${O}bg-${ue}`,[`--${n.prefix}theme-overlay-multiplier: var(--${n.prefix}theme-${ue}-overlay-multiplier)`,`background-color: rgb(var(--${n.prefix}theme-${ue}))${$}`,`color: rgb(var(--${n.prefix}theme-on-${ue}))${$}`],n.scope),Iu(te,`.${O}text-${ue}`,[`color: rgb(var(--${n.prefix}theme-${ue}))${$}`],n.scope),Iu(te,`.${O}border-${ue}`,[`--${n.prefix}border-color: var(--${n.prefix}theme-${ue})`],n.scope));B.push(...X,...te)}return B.map((X,te)=>te===0?X:`    ${X}`).join("")}),C=Ee(()=>n.isDisabled?void 0:`${n.prefix}theme--${f.value}`),w=Ee(()=>Object.keys(d.value));if(JD){let $=function(){c.value=B.matches?"dark":"light"};const B=window.matchMedia("(prefers-color-scheme: dark)");$(),B.addEventListener("change",$,{passive:!0}),EC()&&fr(()=>{B.removeEventListener("change",$)})}function k(B){if(n.isDisabled)return;const $=B._context.provides.usehead;if($){let O=function(){return{style:[{textContent:b.value,id:n.stylesheetId,nonce:n.cspNonce||!1}]}};if($.push){const q=$.push(O);Kn&&Bt(b,()=>{q.patch(O)})}else Kn?($.addHeadObjs(Ee(O)),Ri(()=>$.updateDOM())):$.addHeadObjs(O())}else{let O=function(){XL(n.stylesheetId,n.cspNonce,b.value)};Kn?Bt(b,O,{immediate:!0}):O()}}function A(B){w.value.includes(B)&&(f.value=B)}function I(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.value;const $=B.indexOf(f.value),O=$===-1?0:($+1)%B.length;A(B[O])}function R(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];I(B)}const F=new Proxy(f,{get(B,$){return Reflect.get(B,$)},set(B,$,O){return $==="value"&&rk(`theme.global.name.value = ${O}`,`theme.change('${O}')`),Reflect.set(B,$,O)}});return{install:k,change:A,cycle:I,toggle:R,isDisabled:n.isDisabled,name:f,themes:s,current:a,computedThemes:d,prefix:n.prefix,themeClasses:C,styles:b,global:{name:F,current:a}}}function Xn(e){ji("provideTheme");const n=_n(Wf,null);if(!n)throw new Error("Could not find Vuetify theme injection");const r=Ee(()=>e.theme??n.name.value),s=Ee(()=>n.themes.value[r.value]),c=Ee(()=>n.isDisabled?void 0:`${n.prefix}theme--${r.value}`),f={...n,name:r,current:s,themeClasses:c};return ri(Wf,f),f}function d0(){ji("useTheme");const e=_n(Wf,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function vs(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const r=gg(),s=tt();if(Kn){const c=new ResizeObserver(f=>{e==null||e(f,c),f.length&&(n==="content"?s.value=f[0].contentRect:s.value=f[0].target.getBoundingClientRect())});Vr(()=>{c.disconnect()}),Bt(()=>r.el,(f,d)=>{d&&(c.unobserve(d),s.value=void 0),f&&c.observe(f)},{flush:"post"})}return{resizeRef:r,contentRect:Gd(s)}}const Zf=Symbol.for("vuetify:layout"),kk=Symbol.for("vuetify:layout-item"),oS=1e3,Pk=Ue({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Qu=Ue({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function Ik(){const e=_n(Zf);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function ec(e){const n=_n(Zf);if(!n)throw new Error("[Vuetify] Could not find injected layout");const r=e.id??`layout-item-${ya()}`,s=ji("useLayoutItem");ri(kk,{id:r});const c=Mt(!1);Nb(()=>c.value=!0),dT(()=>c.value=!1);const{layoutItemStyles:f,layoutItemScrimStyles:d}=n.register(s,{...e,active:ee(()=>c.value?!1:e.active.value),id:r});return Vr(()=>n.unregister(r)),{layoutItemStyles:f,layoutRect:n.layoutRect,layoutItemScrimStyles:d}}const ez=(e,n,r,s)=>{let c={top:0,left:0,right:0,bottom:0};const f=[{id:"",layer:{...c}}];for(const d of e){const a=n.get(d),b=r.get(d),C=s.get(d);if(!a||!b||!C)continue;const w={...c,[a.value]:parseInt(c[a.value],10)+(C.value?parseInt(b.value,10):0)};f.push({id:d,layer:w}),c=w}return f};function Ak(e){const n=_n(Zf,null),r=ee(()=>n?n.rootZIndex.value-100:oS),s=tt([]),c=Sr(new Map),f=Sr(new Map),d=Sr(new Map),a=Sr(new Map),b=Sr(new Map),{resizeRef:C,contentRect:w}=vs(),k=ee(()=>{const ae=new Map,ue=e.overlaps??[];for(const ce of ue.filter(fe=>fe.includes(":"))){const[fe,pe]=ce.split(":");if(!s.value.includes(fe)||!s.value.includes(pe))continue;const _e=c.get(fe),re=c.get(pe),be=f.get(fe),je=f.get(pe);!_e||!re||!be||!je||(ae.set(pe,{position:_e.value,amount:parseInt(be.value,10)}),ae.set(fe,{position:re.value,amount:-parseInt(je.value,10)}))}return ae}),A=ee(()=>{const ae=[...new Set([...d.values()].map(ce=>ce.value))].sort((ce,fe)=>ce-fe),ue=[];for(const ce of ae){const fe=s.value.filter(pe=>{var _e;return((_e=d.get(pe))==null?void 0:_e.value)===ce});ue.push(...fe)}return ez(ue,c,f,a)}),I=ee(()=>!Array.from(b.values()).some(ae=>ae.value)),R=ee(()=>A.value[A.value.length-1].layer),F=Ee(()=>({"--v-layout-left":Nt(R.value.left),"--v-layout-right":Nt(R.value.right),"--v-layout-top":Nt(R.value.top),"--v-layout-bottom":Nt(R.value.bottom),...I.value?void 0:{transition:"none"}})),B=ee(()=>A.value.slice(1).map((ae,ue)=>{let{id:ce}=ae;const{layer:fe}=A.value[ue],pe=f.get(ce),_e=c.get(ce);return{id:ce,...fe,size:Number(pe.value),position:_e.value}})),$=ae=>B.value.find(ue=>ue.id===ae),O=ji("createLayout"),q=Mt(!1);zi(()=>{q.value=!0}),ri(Zf,{register:(ae,ue)=>{let{id:ce,order:fe,position:pe,layoutSize:_e,elementSize:re,active:be,disableTransitions:je,absolute:Be}=ue;d.set(ce,fe),c.set(ce,pe),f.set(ce,_e),a.set(ce,be),je&&b.set(ce,je);const Ke=Cd(kk,O==null?void 0:O.vnode).indexOf(ae);Ke>-1?s.value.splice(Ke,0,ce):s.value.push(ce);const ft=ee(()=>B.value.findIndex(Me=>Me.id===ce)),mt=ee(()=>r.value+A.value.length*2-ft.value*2),ze=ee(()=>{const Me=pe.value==="left"||pe.value==="right",Qe=pe.value==="right",Ft=pe.value==="bottom",Tt=re.value??_e.value,xt=Tt===0?"%":"px",Re={[pe.value]:0,zIndex:mt.value,transform:`translate${Me?"X":"Y"}(${(be.value?0:-(Tt===0?100:Tt))*(Qe||Ft?-1:1)}${xt})`,position:Be.value||r.value!==oS?"absolute":"fixed",...I.value?void 0:{transition:"none"}};if(!q.value)return Re;const vt=B.value[ft.value];if(!vt)throw new Error(`[Vuetify] Could not find layout item "${ce}"`);const st=k.value.get(ce);return st&&(vt[st.position]+=st.amount),{...Re,height:Me?`calc(100% - ${vt.top}px - ${vt.bottom}px)`:re.value?`${re.value}px`:void 0,left:Qe?void 0:`${vt.left}px`,right:Qe?`${vt.right}px`:void 0,top:pe.value!=="bottom"?`${vt.top}px`:void 0,bottom:pe.value!=="top"?`${vt.bottom}px`:void 0,width:Me?re.value?`${re.value}px`:void 0:`calc(100% - ${vt.left}px - ${vt.right}px)`}}),Se=ee(()=>({zIndex:mt.value-1}));return{layoutItemStyles:ze,layoutItemScrimStyles:Se,zIndex:mt}},unregister:ae=>{d.delete(ae),c.delete(ae),f.delete(ae),a.delete(ae),b.delete(ae),s.value=s.value.filter(ue=>ue!==ae)},mainRect:R,mainStyles:F,getLayoutItem:$,items:B,layoutRect:w,rootZIndex:r});const X=Ee(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),te=Ee(()=>({zIndex:n?r.value:void 0,position:n?"relative":void 0,overflow:n?"hidden":void 0}));return{layoutClasses:X,layoutStyles:te,getLayoutItem:$,items:B,layoutRect:w,layoutRef:C}}function Ek(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:n,...r}=e,s=na(n,r),{aliases:c={},components:f={},directives:d={}}=s,a=Dd();return a.run(()=>{const b=zR(s.defaults),C=zL(s.display,s.ssr),w=QL(s.theme),k=GL(s.icons),A=WR(s.locale),I=DL(s.date,A),R=VL(s.goTo,A);function F($){for(const q in d)$.directive(q,d[q]);for(const q in f)$.component(q,f[q]);for(const q in c)$.component(q,ja({...c[q],name:q,aliasName:c[q].name}));const O=Dd();if(O.run(()=>{w.install($)}),$.onUnmount(()=>O.stop()),$.provide(Bd,b),$.provide(V_,C),$.provide(Wf,w),$.provide(O_,k),$.provide(Vd,A),$.provide(wk,I.options),$.provide(Q1,I.instance),$.provide(Ck,R),Kn&&s.ssr)if($.$nuxt)$.$nuxt.hook("app:suspense:resolve",()=>{C.update()});else{const{mount:q}=$;$.mount=function(){const X=q(...arguments);return Dn(()=>C.update()),$.mount=q,X}}$.mixin({computed:{$vuetify(){return Sr({defaults:ud.call(this,Bd),display:ud.call(this,V_),theme:ud.call(this,Wf),icons:ud.call(this,O_),locale:ud.call(this,Vd),date:ud.call(this,Q1)})}}})}function B(){a.stop()}return{install:F,unmount:B,defaults:b,display:C,theme:w,icons:k,locale:A,date:I,goTo:R}})}const tz="3.9.0";Ek.version=tz;function ud(e){var s,c;const n=this.$,r=((s=n.parent)==null?void 0:s.provides)??((c=n.vnode.appContext)==null?void 0:c.provides);if(r&&e in r)return r[e]}const nz=Ue({...Ht(),...Pk({fullHeight:!0}),...Un()},"VApp"),iz=ht()({name:"VApp",props:nz(),setup(e,n){let{slots:r}=n;const s=Xn(e),{layoutClasses:c,getLayoutItem:f,items:d,layoutRef:a}=Ak(e),{rtlClasses:b}=nr();return _t(()=>{var C;return Z("div",{ref:a,class:gt(["v-application",s.themeClasses.value,c.value,b.value,e.class]),style:zt([e.style])},[Z("div",{class:"v-application__wrap"},[(C=r.default)==null?void 0:C.call(r)])])}),{getLayoutItem:f,items:d,theme:s}}}),bn=Ue({tag:{type:[String,Object,Function],default:"div"}},"tag"),Mk=Ue({text:String,...Ht(),...bn()},"VToolbarTitle"),h0=ht()({name:"VToolbarTitle",props:Mk(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=!!(r.default||r.text||e.text);return G(e.tag,{class:gt(["v-toolbar-title",e.class]),style:zt(e.style)},{default:()=>{var c;return[s&&Z("div",{class:"v-toolbar-title__placeholder"},[r.text?r.text():e.text,(c=r.default)==null?void 0:c.call(r)])]}})}),{}}}),rz=Ue({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Na(e,n,r){return ht()({name:e,props:rz({mode:r,origin:n}),setup(s,c){let{slots:f}=c;const d={onBeforeEnter(a){s.origin&&(a.style.transformOrigin=s.origin)},onLeave(a){if(s.leaveAbsolute){const{offsetTop:b,offsetLeft:C,offsetWidth:w,offsetHeight:k}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${b}px`,a.style.left=`${C}px`,a.style.width=`${w}px`,a.style.height=`${k}px`}s.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(s.leaveAbsolute&&(a!=null&&a._transitionInitialStyles)){const{position:b,top:C,left:w,width:k,height:A}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=b||"",a.style.top=C||"",a.style.left=w||"",a.style.width=k||"",a.style.height=A||""}}};return()=>{const a=s.group?Yb:kl;return bs(a,{name:s.disabled?"":e,css:!s.disabled,...s.group?void 0:{mode:s.mode},...s.disabled?{}:d},f.default)}}})}function Dk(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return ht()({name:e,props:{mode:{type:String,default:r},disabled:Boolean,group:Boolean},setup(s,c){let{slots:f}=c;const d=s.group?Yb:kl;return()=>bs(d,{name:s.disabled?"":e,css:!s.disabled,...s.disabled?{}:n},f.default)}})}function Rk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",s=va(`offset-${r}`);return{onBeforeEnter(d){d._parent=d.parentNode,d._initialStyle={transition:d.style.transition,overflow:d.style.overflow,[r]:d.style[r]}},onEnter(d){const a=d._initialStyle;if(!a)return;d.style.setProperty("transition","none","important"),d.style.overflow="hidden";const b=`${d[s]}px`;d.style[r]="0",d.offsetHeight,d.style.transition=a.transition,e&&d._parent&&d._parent.classList.add(e),requestAnimationFrame(()=>{d.style[r]=b})},onAfterEnter:f,onEnterCancelled:f,onLeave(d){d._initialStyle={transition:"",overflow:d.style.overflow,[r]:d.style[r]},d.style.overflow="hidden",d.style[r]=`${d[s]}px`,d.offsetHeight,requestAnimationFrame(()=>d.style[r]="0")},onAfterLeave:c,onLeaveCancelled:c};function c(d){e&&d._parent&&d._parent.classList.remove(e),f(d)}function f(d){if(!d._initialStyle)return;const a=d._initialStyle[r];d.style.overflow=d._initialStyle.overflow,a!=null&&(d.style[r]=a),delete d._initialStyle}}const az=Ue({target:[Object,Array]},"v-dialog-transition"),Zy=new WeakMap,Gg=ht()({name:"VDialogTransition",props:az(),setup(e,n){let{slots:r}=n;const s={onBeforeEnter(c){c.style.pointerEvents="none",c.style.visibility="hidden"},async onEnter(c,f){var I;await new Promise(R=>requestAnimationFrame(R)),await new Promise(R=>requestAnimationFrame(R)),c.style.visibility="";const d=uS(e.target,c),{x:a,y:b,sx:C,sy:w,speed:k}=d;Zy.set(c,d);const A=Bu(c,[{transform:`translate(${a}px, ${b}px) scale(${C}, ${w})`,opacity:0},{}],{duration:225*k,easing:FR});(I=lS(c))==null||I.forEach(R=>{Bu(R,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*k,easing:Hf})}),A.finished.then(()=>f())},onAfterEnter(c){c.style.removeProperty("pointer-events")},onBeforeLeave(c){c.style.pointerEvents="none"},async onLeave(c,f){var I;await new Promise(R=>requestAnimationFrame(R));let d;!Zy.has(c)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?d=uS(e.target,c):d=Zy.get(c);const{x:a,y:b,sx:C,sy:w,speed:k}=d;Bu(c,[{},{transform:`translate(${a}px, ${b}px) scale(${C}, ${w})`,opacity:0}],{duration:125*k,easing:$R}).finished.then(()=>f()),(I=lS(c))==null||I.forEach(R=>{Bu(R,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*k,easing:Hf})})},onAfterLeave(c){c.style.removeProperty("pointer-events")}};return()=>e.target?G(kl,lt({name:"dialog-transition"},s,{css:!1}),r):G(kl,{name:"dialog-transition"},r)}});function lS(e){var r;const n=(r=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:r.children;return n&&[...n]}function uS(e,n){const r=ik(e),s=t0(n),[c,f]=getComputedStyle(n).transformOrigin.split(" ").map($=>parseFloat($)),[d,a]=getComputedStyle(n).getPropertyValue("--v-overlay-anchor-origin").split(" ");let b=r.left+r.width/2;d==="left"||a==="left"?b-=r.width/2:(d==="right"||a==="right")&&(b+=r.width/2);let C=r.top+r.height/2;d==="top"||a==="top"?C-=r.height/2:(d==="bottom"||a==="bottom")&&(C+=r.height/2);const w=r.width/s.width,k=r.height/s.height,A=Math.max(1,w,k),I=w/A||0,R=k/A||0,F=s.width*s.height/(window.innerWidth*window.innerHeight),B=F>.12?Math.min(1.5,(F-.12)*10+1):1;return{x:b-(c+s.left),y:C-(f+s.top),sx:I,sy:R,speed:B}}const sz=Na("fab-transition","center center","out-in"),oz=Na("dialog-bottom-transition"),lz=Na("dialog-top-transition"),Kf=Na("fade-transition"),f0=Na("scale-transition"),uz=Na("scroll-x-transition"),cz=Na("scroll-x-reverse-transition"),dz=Na("scroll-y-transition"),hz=Na("scroll-y-reverse-transition"),fz=Na("slide-x-transition"),mz=Na("slide-x-reverse-transition"),m0=Na("slide-y-transition"),pz=Na("slide-y-reverse-transition"),qg=Dk("expand-transition",Rk()),p0=Dk("expand-x-transition",Rk("",!0)),gz=Ue({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Sn=ht(!1)({name:"VDefaultsProvider",props:gz(),setup(e,n){let{slots:r}=n;const{defaults:s,disabled:c,reset:f,root:d,scoped:a}=qd(e);return Li(s,{reset:f,root:d,scoped:a,disabled:c}),()=>{var b;return(b=r.default)==null?void 0:b.call(r)}}}),Zi=Ue({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Ki(e){return{dimensionStyles:ee(()=>{const r={},s=Nt(e.height),c=Nt(e.maxHeight),f=Nt(e.maxWidth),d=Nt(e.minHeight),a=Nt(e.minWidth),b=Nt(e.width);return s!=null&&(r.height=s),c!=null&&(r.maxHeight=c),f!=null&&(r.maxWidth=f),d!=null&&(r.minHeight=d),a!=null&&(r.minWidth=a),b!=null&&(r.width=b),r})}}function vz(e){return{aspectStyles:ee(()=>{const n=Number(e.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const Lk=Ue({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Ht(),...Zi()},"VResponsive"),$_=ht()({name:"VResponsive",props:Lk(),setup(e,n){let{slots:r}=n;const{aspectStyles:s}=vz(e),{dimensionStyles:c}=Ki(e);return _t(()=>{var f;return Z("div",{class:gt(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:zt([c.value,e.style])},[Z("div",{class:"v-responsive__sizer",style:zt(s.value)},null),(f=r.additional)==null?void 0:f.call(r),r.default&&Z("div",{class:gt(["v-responsive__content",e.contentClass])},[r.default()])])}),{}}});function g0(e){return e0(()=>{const n=Us(e),r=[],s={};if(n.background)if(M_(n.background)){if(s.backgroundColor=n.background,!n.text&&PR(n.background)){const c=Fa(n.background);if(c.a==null||c.a===1){const f=fk(c);s.color=f,s.caretColor=f}}}else r.push(`bg-${n.background}`);return n.text&&(M_(n.text)?(s.color=n.text,s.caretColor=n.text):r.push(`text-${n.text}`)),{colorClasses:r,colorStyles:s}})}function Br(e){const{colorClasses:n,colorStyles:r}=g0(()=>({text:Us(e)}));return{textColorClasses:n,textColorStyles:r}}function ti(e){const{colorClasses:n,colorStyles:r}=g0(()=>({background:Us(e)}));return{backgroundColorClasses:n,backgroundColorStyles:r}}const yi=Ue({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Bi(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{roundedClasses:ee(()=>{const s=tr(e)?e.value:e.rounded,c=tr(e)?e.value:e.tile,f=[];if(s===!0||s==="")f.push(`${n}--rounded`);else if(typeof s=="string"||s===0)for(const d of String(s).split(" "))f.push(`rounded-${d}`);else(c||s===!1)&&f.push("rounded-0");return f})}}const ws=Ue({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),ia=(e,n)=>{let{slots:r}=n;const{transition:s,disabled:c,group:f,...d}=e,{component:a=f?Yb:kl,...b}=Gf(s)?s:{};let C;return Gf(s)?C=lt(b,uR({disabled:c,group:f}),d):C=lt({name:c||!s?"":s},d),bs(a,C,r)};function yz(e,n){if(!Xb)return;const r=n.modifiers||{},s=n.value,{handler:c,options:f}=typeof s=="object"?s:{handler:s,options:{}},d=new IntersectionObserver(function(){var k;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=arguments.length>1?arguments[1]:void 0;const C=(k=e._observe)==null?void 0:k[n.instance.$.uid];if(!C)return;const w=a.some(A=>A.isIntersecting);c&&(!r.quiet||C.init)&&(!r.once||w||C.init)&&c(w,a,b),w&&r.once?zk(e,n):C.init=!0},f);e._observe=Object(e._observe),e._observe[n.instance.$.uid]={init:!1,observer:d},d.observe(e)}function zk(e,n){var s;const r=(s=e._observe)==null?void 0:s[n.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[n.instance.$.uid])}const Co={mounted:yz,unmounted:zk},Bk=Ue({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...Lk(),...Ht(),...yi(),...ws()},"VImg"),To=ht()({name:"VImg",directives:{vIntersect:Co},props:Bk(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{roundedClasses:d}=Bi(e),a=ji("VImg"),b=Mt(""),C=tt(),w=Mt(e.eager?"loading":"idle"),k=Mt(),A=Mt(),I=ee(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),R=ee(()=>I.value.aspect||k.value/A.value||0);Bt(()=>e.src,()=>{F(w.value!=="idle")}),Bt(R,(re,be)=>{!re&&be&&C.value&&X(C.value)}),Hd(()=>F());function F(re){if(!(e.eager&&re)&&!(Xb&&!re&&!e.eager)){if(w.value="loading",I.value.lazySrc){const be=new Image;be.src=I.value.lazySrc,X(be,null)}I.value.src&&Dn(()=>{var be;r("loadstart",((be=C.value)==null?void 0:be.currentSrc)||I.value.src),setTimeout(()=>{var je;if(!a.isUnmounted)if((je=C.value)!=null&&je.complete){if(C.value.naturalWidth||$(),w.value==="error")return;R.value||X(C.value,null),w.value==="loading"&&B()}else R.value||X(C.value),O()})})}}function B(){var re;a.isUnmounted||(O(),X(C.value),w.value="loaded",r("load",((re=C.value)==null?void 0:re.currentSrc)||I.value.src))}function $(){var re;a.isUnmounted||(w.value="error",r("error",((re=C.value)==null?void 0:re.currentSrc)||I.value.src))}function O(){const re=C.value;re&&(b.value=re.currentSrc||re.src)}let q=-1;Vr(()=>{clearTimeout(q)});function X(re){let be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const je=()=>{if(clearTimeout(q),a.isUnmounted)return;const{naturalHeight:Be,naturalWidth:Fe}=re;Be||Fe?(k.value=Fe,A.value=Be):!re.complete&&w.value==="loading"&&be!=null?q=window.setTimeout(je,be):(re.currentSrc.endsWith(".svg")||re.currentSrc.startsWith("data:image/svg+xml"))&&(k.value=1,A.value=1)};je()}const te=Ee(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),ae=()=>{var je;if(!I.value.src||w.value==="idle")return null;const re=Z("img",{class:gt(["v-img__img",te.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:I.value.src,srcset:I.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:C,onLoad:B,onError:$},null),be=(je=s.sources)==null?void 0:je.call(s);return G(ia,{transition:e.transition,appear:!0},{default:()=>[ei(be?Z("picture",{class:"v-img__picture"},[be,re]):re,[[xs,w.value==="loaded"]])]})},ue=()=>G(ia,{transition:e.transition},{default:()=>[I.value.lazySrc&&w.value!=="loaded"&&Z("img",{class:gt(["v-img__img","v-img__img--preload",te.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:I.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),ce=()=>s.placeholder?G(ia,{transition:e.transition,appear:!0},{default:()=>[(w.value==="loading"||w.value==="error"&&!s.error)&&Z("div",{class:"v-img__placeholder"},[s.placeholder()])]}):null,fe=()=>s.error?G(ia,{transition:e.transition,appear:!0},{default:()=>[w.value==="error"&&Z("div",{class:"v-img__error"},[s.error()])]}):null,pe=()=>e.gradient?Z("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,_e=Mt(!1);{const re=Bt(R,be=>{be&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{_e.value=!0})}),re())})}return _t(()=>{const re=$_.filterProps(e);return ei(G($_,lt({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!_e.value},c.value,d.value,e.class],style:[{width:Nt(e.width==="auto"?k.value:e.width)},f.value,e.style]},re,{aspectRatio:R.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>Z(qt,null,[G(ae,null,null),G(ue,null,null),G(pe,null,null),G(ce,null,null),G(fe,null,null)]),default:s.default}),[[Co,{handler:F,options:e.options},null,{once:!0}]])}),{currentSrc:b,image:C,state:w,naturalWidth:k,naturalHeight:A}}}),_a=Ue({border:[Boolean,Number,String]},"border");function Pa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{borderClasses:ee(()=>{const s=e.border;return s===!0||s===""?`${n}--border`:typeof s=="string"||s===0?String(s).split(" ").map(c=>`border-${c}`):[]})}}const ir=Ue({elevation:{type:[Number,String],validator(e){const n=parseInt(e);return!isNaN(n)&&n>=0&&n<=24}}},"elevation");function kr(e){return{elevationClasses:Ee(()=>{const r=tr(e)?e.value:e.elevation;return r==null?[]:[`elevation-${r}`]})}}const _z=[null,"prominent","default","comfortable","compact"],Vk=Ue({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>_z.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,..._a(),...Ht(),...ir(),...yi(),...bn({tag:"header"}),...Un()},"VToolbar"),j_=ht()({name:"VToolbar",props:Vk(),setup(e,n){var I;let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color),{borderClasses:f}=Pa(e),{elevationClasses:d}=kr(e),{roundedClasses:a}=Bi(e),{themeClasses:b}=Xn(e),{rtlClasses:C}=nr(),w=Mt(e.extended===null?!!((I=r.extension)!=null&&I.call(r)):e.extended),k=ee(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),A=ee(()=>w.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Li({VBtn:{variant:"text"}}),_t(()=>{var $;const R=!!(e.title||r.title),F=!!(r.image||e.image),B=($=r.extension)==null?void 0:$.call(r);return w.value=e.extended===null?!!B:e.extended,G(e.tag,{class:gt(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},s.value,f.value,d.value,a.value,b.value,C.value,e.class]),style:zt([c.value,e.style])},{default:()=>[F&&Z("div",{key:"image",class:"v-toolbar__image"},[r.image?G(Sn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):G(To,{key:"image-img",cover:!0,src:e.image},null)]),G(Sn,{defaults:{VTabs:{height:Nt(k.value)}}},{default:()=>{var O,q,X;return[Z("div",{class:"v-toolbar__content",style:{height:Nt(k.value)}},[r.prepend&&Z("div",{class:"v-toolbar__prepend"},[(O=r.prepend)==null?void 0:O.call(r)]),R&&G(h0,{key:"title",text:e.title},{text:r.title}),(q=r.default)==null?void 0:q.call(r),r.append&&Z("div",{class:"v-toolbar__append"},[(X=r.append)==null?void 0:X.call(r)])])]}}),G(Sn,{defaults:{VTabs:{height:Nt(A.value)}}},{default:()=>[G(qg,null,{default:()=>[w.value&&Z("div",{class:"v-toolbar__extension",style:{height:Nt(A.value)}},[B])]})]})]})}),{contentHeight:k,extensionHeight:A}}}),bz=Ue({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function xz(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:r}=n;let s=0,c=0;const f=tt(null),d=Mt(0),a=Mt(0),b=Mt(0),C=Mt(!1),w=Mt(!1),k=ee(()=>Number(e.scrollThreshold)),A=ee(()=>di((k.value-d.value)/k.value||0)),I=()=>{const R=f.value;if(!R||r&&!r.value)return;s=d.value,d.value="window"in R?R.pageYOffset:R.scrollTop;const F=R instanceof Window?document.documentElement.scrollHeight:R.scrollHeight;if(c!==F){c=F;return}w.value=d.value<s,b.value=Math.abs(d.value-k.value)};return Bt(w,()=>{a.value=a.value||d.value}),Bt(C,()=>{a.value=0}),zi(()=>{Bt(()=>e.scrollTarget,R=>{var B;const F=R?document.querySelector(R):window;F&&F!==f.value&&((B=f.value)==null||B.removeEventListener("scroll",I),f.value=F,f.value.addEventListener("scroll",I,{passive:!0}))},{immediate:!0})}),Vr(()=>{var R;(R=f.value)==null||R.removeEventListener("scroll",I)}),r&&Bt(r,I,{immediate:!0}),{scrollThreshold:k,currentScroll:d,currentThreshold:b,isScrollActive:C,scrollRatio:A,isScrollingUp:w,savedScroll:a}}function tc(){const e=Mt(!1);return zi(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Ee(()=>e.value?void 0:{transition:"none !important"}),isBooted:Gd(e)}}const wz=Ue({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Vk(),...Qu(),...bz(),height:{type:[Number,String],default:64}},"VAppBar"),Sz=ht()({name:"VAppBar",props:wz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tt(),c=Qt(e,"modelValue"),f=ee(()=>{var q;const O=new Set(((q=e.scrollBehavior)==null?void 0:q.split(" "))??[]);return{hide:O.has("hide"),fullyHide:O.has("fully-hide"),inverted:O.has("inverted"),collapse:O.has("collapse"),elevate:O.has("elevate"),fadeImage:O.has("fade-image")}}),d=ee(()=>{const O=f.value;return O.hide||O.fullyHide||O.inverted||O.collapse||O.elevate||O.fadeImage||!c.value}),{currentScroll:a,scrollThreshold:b,isScrollingUp:C,scrollRatio:w}=xz(e,{canScroll:d}),k=Ee(()=>f.value.hide||f.value.fullyHide),A=ee(()=>e.collapse||f.value.collapse&&(f.value.inverted?w.value>0:w.value===0)),I=ee(()=>e.flat||f.value.fullyHide&&!c.value||f.value.elevate&&(f.value.inverted?a.value>0:a.value===0)),R=ee(()=>f.value.fadeImage?f.value.inverted?1-w.value:w.value:void 0),F=ee(()=>{var X,te;if(f.value.hide&&f.value.inverted)return 0;const O=((X=s.value)==null?void 0:X.contentHeight)??0,q=((te=s.value)==null?void 0:te.extensionHeight)??0;return k.value?a.value<b.value||f.value.fullyHide?O+q:O:O+q});ra(()=>!!e.scrollBehavior,()=>{Ri(()=>{k.value?f.value.inverted?c.value=a.value>b.value:c.value=C.value||a.value<b.value:c.value=!0})});const{ssrBootStyles:B}=tc(),{layoutItemStyles:$}=ec({id:e.name,order:ee(()=>parseInt(e.order,10)),position:Ee(()=>e.location),layoutSize:F,elementSize:Mt(void 0),active:c,absolute:Ee(()=>e.absolute)});return _t(()=>{const O=j_.filterProps(e);return G(j_,lt({ref:s,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...$.value,"--v-toolbar-image-opacity":R.value,height:void 0,...B.value},e.style]},O,{collapse:A.value,flat:I.value}),r)}),{}}}),Cz=[null,"default","comfortable","compact"],mr=Ue({density:{type:String,default:"default",validator:e=>Cz.includes(e)}},"density");function sa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{densityClasses:Ee(()=>`${n}--density-${e.density}`)}}const Tz=["elevated","flat","tonal","outlined","text","plain"];function Ml(e,n){return Z(qt,null,[e&&Z("span",{key:"overlay",class:gt(`${n}__overlay`)},null),Z("span",{key:"underlay",class:gt(`${n}__underlay`)},null)])}const es=Ue({color:String,variant:{type:String,default:"elevated",validator:e=>Tz.includes(e)}},"variant");function nc(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=Ee(()=>{const{variant:f}=Us(e);return`${n}--variant-${f}`}),{colorClasses:s,colorStyles:c}=g0(()=>{const{variant:f,color:d}=Us(e);return{[["elevated","flat"].includes(f)?"background":"text"]:d}});return{colorClasses:s,colorStyles:c,variantClasses:r}}const Ok=Ue({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},..._a(),...Ht(),...mr(),...ir(),...yi(),...bn(),...Un(),...es()},"VBtnGroup"),N_=ht()({name:"VBtnGroup",props:Ok(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{densityClasses:c}=sa(e),{borderClasses:f}=Pa(e),{elevationClasses:d}=kr(e),{roundedClasses:a}=Bi(e);Li({VBtn:{height:Ee(()=>e.direction==="horizontal"?"auto":null),baseColor:Ee(()=>e.baseColor),color:Ee(()=>e.color),density:Ee(()=>e.density),flat:!0,variant:Ee(()=>e.variant)}}),_t(()=>G(e.tag,{class:gt(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},s.value,f.value,c.value,d.value,a.value,e.class]),style:zt(e.style)},r))}}),ic=Ue({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),rc=Ue({value:null,disabled:Boolean,selectedClass:String},"group-item");function ac(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=ji("useGroupItem");if(!s)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const c=ya();ri(Symbol.for(`${n.description}:id`),c);const f=_n(n,null);if(!f){if(!r)return f;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${n.description}`)}const d=Ee(()=>e.value),a=ee(()=>!!(f.disabled.value||e.disabled));f.register({id:c,value:d,disabled:a},s),Vr(()=>{f.unregister(c)});const b=ee(()=>f.isSelected(c)),C=ee(()=>f.items.value[0].id===c),w=ee(()=>f.items.value[f.items.value.length-1].id===c),k=ee(()=>b.value&&[f.selectedClass.value,e.selectedClass]);return Bt(b,A=>{s.emit("group:selected",{value:A})},{flush:"sync"}),{id:c,isSelected:b,isFirst:C,isLast:w,toggle:()=>f.select(c,!b.value),select:A=>f.select(c,A),selectedClass:k,value:d,disabled:a,group:f}}function Dl(e,n){let r=!1;const s=Sr([]),c=Qt(e,"modelValue",[],A=>A==null?[]:Fk(s,Di(A)),A=>{const I=Pz(s,A);return e.multiple?I:I[0]}),f=ji("useGroup");function d(A,I){const R=A,F=Symbol.for(`${n.description}:id`),$=Cd(F,f==null?void 0:f.vnode).indexOf(I);Cr(R.value)==null&&(R.value=$,R.useIndexAsValue=!0),$>-1?s.splice($,0,R):s.push(R)}function a(A){if(r)return;b();const I=s.findIndex(R=>R.id===A);s.splice(I,1)}function b(){const A=s.find(I=>!I.disabled);A&&e.mandatory==="force"&&!c.value.length&&(c.value=[A.id])}zi(()=>{b()}),Vr(()=>{r=!0}),Ub(()=>{for(let A=0;A<s.length;A++)s[A].useIndexAsValue&&(s[A].value=A)});function C(A,I){const R=s.find(F=>F.id===A);if(!(I&&(R!=null&&R.disabled)))if(e.multiple){const F=c.value.slice(),B=F.findIndex(O=>O===A),$=~B;if(I=I??!$,$&&e.mandatory&&F.length<=1||!$&&e.max!=null&&F.length+1>e.max)return;B<0&&I?F.push(A):B>=0&&!I&&F.splice(B,1),c.value=F}else{const F=c.value.includes(A);if(e.mandatory&&F||!F&&!I)return;c.value=I??!F?[A]:[]}}function w(A){if(e.multiple,c.value.length){const I=c.value[0],R=s.findIndex($=>$.id===I);let F=(R+A)%s.length,B=s[F];for(;B.disabled&&F!==R;)F=(F+A)%s.length,B=s[F];if(B.disabled)return;c.value=[s[F].id]}else{const I=s.find(R=>!R.disabled);I&&(c.value=[I.id])}}const k={register:d,unregister:a,selected:c,select:C,disabled:Ee(()=>e.disabled),prev:()=>w(s.length-1),next:()=>w(1),isSelected:A=>c.value.includes(A),selectedClass:Ee(()=>e.selectedClass),items:Ee(()=>s),getItemIndex:A=>kz(s,A)};return ri(n,k),k}function kz(e,n){const r=Fk(e,[n]);return r.length?e.findIndex(s=>s.id===r[0]):-1}function Fk(e,n){const r=[];return n.forEach(s=>{const c=e.find(d=>Lr(s,d.value)),f=e[s];(c==null?void 0:c.value)!=null?r.push(c.id):f!=null&&r.push(f.id)}),r}function Pz(e,n){const r=[];return n.forEach(s=>{const c=e.findIndex(f=>f.id===s);if(~c){const f=e[c];r.push(f.value!=null?f.value:c)}}),r}const v0=Symbol.for("vuetify:v-btn-toggle"),Iz=Ue({...Ok(),...ic()},"VBtnToggle"),Az=ht()({name:"VBtnToggle",props:Iz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{isSelected:s,next:c,prev:f,select:d,selected:a}=Dl(e,v0);return _t(()=>{const b=N_.filterProps(e);return G(N_,lt({class:["v-btn-toggle",e.class]},b,{style:e.style}),{default:()=>{var C;return[(C=r.default)==null?void 0:C.call(r,{isSelected:s,next:c,prev:f,select:d,selected:a})]}})}),{next:c,prev:f,select:d}}}),Ez=["x-small","small","default","large","x-large"],Ks=Ue({size:{type:[String,Number],default:"default"}},"size");function Wd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return e0(()=>{const r=e.size;let s,c;return pg(Ez,r)?s=`${n}--size-${r}`:r&&(c={width:Nt(r),height:Nt(r)}),{sizeClasses:s,sizeStyles:c}})}const Mz=Ue({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:tn,opacity:[String,Number],...Ht(),...Ks(),...bn({tag:"i"}),...Un()},"VIcon"),Yn=ht()({name:"VIcon",props:Mz(),setup(e,n){let{attrs:r,slots:s}=n;const c=Mt(),{themeClasses:f}=d0(),{iconData:d}=qL(()=>c.value||e.icon),{sizeClasses:a}=Wd(e),{textColorClasses:b,textColorStyles:C}=Br(()=>e.color);return _t(()=>{var A,I;const w=(A=s.default)==null?void 0:A.call(s);w&&(c.value=(I=XT(w).filter(R=>R.type===um&&R.children&&typeof R.children=="string")[0])==null?void 0:I.children);const k=!!(r.onClick||r.onClickOnce);return G(d.value.component,{tag:e.tag,icon:d.value.icon,class:gt(["v-icon","notranslate",f.value,a.value,b.value,{"v-icon--clickable":k,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:zt([{"--v-icon-opacity":e.opacity},a.value?void 0:{fontSize:Nt(e.size),height:Nt(e.size),width:Nt(e.size)},C.value,e.style]),role:k?"button":void 0,"aria-hidden":!k,tabindex:k?e.disabled?-1:0:void 0},{default:()=>[w]})}),{}}});function mm(e,n){const r=tt(),s=Mt(!1);if(Xb){const c=new IntersectionObserver(f=>{s.value=!!f.find(d=>d.isIntersecting)},n);fr(()=>{c.disconnect()}),Bt(r,(f,d)=>{d&&(c.unobserve(d),s.value=!1),f&&c.observe(f)},{flush:"post"})}return{intersectionRef:r,isIntersecting:s}}const Dz=Ue({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ht(),...Ks(),...bn({tag:"div"}),...Un()},"VProgressCircular"),Gu=ht()({name:"VProgressCircular",props:Dz(),setup(e,n){let{slots:r}=n;const s=20,c=2*Math.PI*s,f=tt(),{themeClasses:d}=Xn(e),{sizeClasses:a,sizeStyles:b}=Wd(e),{textColorClasses:C,textColorStyles:w}=Br(()=>e.color),{textColorClasses:k,textColorStyles:A}=Br(()=>e.bgColor),{intersectionRef:I,isIntersecting:R}=mm(),{resizeRef:F,contentRect:B}=vs(),$=Ee(()=>di(parseFloat(e.modelValue),0,100)),O=Ee(()=>Number(e.width)),q=Ee(()=>b.value?Number(e.size):B.value?B.value.width:Math.max(O.value,32)),X=Ee(()=>s/(1-O.value/q.value)*2),te=Ee(()=>O.value/q.value*X.value),ae=Ee(()=>Nt((100-$.value)/100*c));return Ri(()=>{I.value=f.value,F.value=f.value}),_t(()=>G(e.tag,{ref:f,class:gt(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":R.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},d.value,a.value,C.value,e.class]),style:zt([b.value,w.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:$.value},{default:()=>[Z("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${X.value} ${X.value}`},[Z("circle",{class:gt(["v-progress-circular__underlay",k.value]),style:zt(A.value),fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":te.value,"stroke-dasharray":c,"stroke-dashoffset":0},null),Z("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":te.value,"stroke-dasharray":c,"stroke-dashoffset":ae.value},null)]),r.default&&Z("div",{class:"v-progress-circular__content"},[r.default({value:$.value})])]})),{}}}),cS={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Eo=Ue({location:String},"location");function sc(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2?arguments[2]:void 0;const{isRtl:s}=nr();return{locationStyles:ee(()=>{if(!e.location)return{};const{side:f,align:d}=A_(e.location.split(" ").length>1?e.location:`${e.location} center`,s.value);function a(C){return r?r(C):0}const b={};return f!=="center"&&(n?b[cS[f]]=`calc(100% - ${a(f)}px)`:b[f]=0),d!=="center"?n?b[cS[d]]=`calc(100% - ${a(d)}px)`:b[d]=0:(f==="center"?b.top=b.left="50%":b[{top:"left",bottom:"left",left:"top",right:"top"}[f]]="50%",b.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[f]),b})}}const Rz=Ue({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Ht(),...Eo({location:"top"}),...yi(),...bn(),...Un()},"VProgressLinear"),Hg=ht()({name:"VProgressLinear",props:Rz(),emits:{"update:modelValue":e=>!0},setup(e,n){var _e;let{slots:r}=n;const s=Qt(e,"modelValue"),{isRtl:c,rtlClasses:f}=nr(),{themeClasses:d}=Xn(e),{locationStyles:a}=sc(e),{textColorClasses:b,textColorStyles:C}=Br(()=>e.color),{backgroundColorClasses:w,backgroundColorStyles:k}=ti(()=>e.bgColor||e.color),{backgroundColorClasses:A,backgroundColorStyles:I}=ti(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:R,backgroundColorStyles:F}=ti(()=>e.color),{roundedClasses:B}=Bi(e),{intersectionRef:$,isIntersecting:O}=mm(),q=ee(()=>parseFloat(e.max)),X=ee(()=>parseFloat(e.height)),te=ee(()=>di(parseFloat(e.bufferValue)/q.value*100,0,100)),ae=ee(()=>di(parseFloat(s.value)/q.value*100,0,100)),ue=ee(()=>c.value!==e.reverse),ce=ee(()=>e.indeterminate?"fade-transition":"slide-x-transition"),fe=Kn&&((_e=window.matchMedia)==null?void 0:_e.call(window,"(forced-colors: active)").matches);function pe(re){if(!$.value)return;const{left:be,right:je,width:Be}=$.value.getBoundingClientRect(),Fe=ue.value?Be-re.clientX+(je-Be):re.clientX-be;s.value=Math.round(Fe/Be*q.value)}return _t(()=>G(e.tag,{ref:$,class:gt(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&O.value,"v-progress-linear--reverse":ue.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},B.value,d.value,f.value,e.class]),style:zt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Nt(X.value):0,"--v-progress-linear-height":Nt(X.value),...e.absolute?a.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(s.value),q.value),onClick:e.clickable&&pe},{default:()=>[e.stream&&Z("div",{key:"stream",class:gt(["v-progress-linear__stream",b.value]),style:{...C.value,[ue.value?"left":"right"]:Nt(-X.value),borderTop:`${Nt(X.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${Nt(X.value/4)})`,width:Nt(100-te.value,"%"),"--v-progress-linear-stream-to":Nt(X.value*(ue.value?1:-1))}},null),Z("div",{class:gt(["v-progress-linear__background",fe?void 0:w.value]),style:zt([k.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),Z("div",{class:gt(["v-progress-linear__buffer",fe?void 0:A.value]),style:zt([I.value,{opacity:parseFloat(e.bufferOpacity),width:Nt(te.value,"%")}])},null),G(kl,{name:ce.value},{default:()=>[e.indeterminate?Z("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(re=>Z("div",{key:re,class:gt(["v-progress-linear__indeterminate",re,fe?void 0:R.value]),style:zt(F.value)},null))]):Z("div",{class:gt(["v-progress-linear__determinate",fe?void 0:R.value]),style:zt([F.value,{width:Nt(ae.value,"%")}])},null)]}),r.default&&Z("div",{class:"v-progress-linear__content"},[r.default({value:ae.value,buffer:te.value})])]})),{}}}),Wg=Ue({loading:[Boolean,String]},"loader");function pm(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{loaderClasses:Ee(()=>({[`${n}--loading`]:e.loading}))}}function gm(e,n){var s;let{slots:r}=n;return Z("div",{class:gt(`${e.name}__loader`)},[((s=r.default)==null?void 0:s.call(r,{color:e.color,isActive:e.active}))||G(Hg,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const Lz=["static","relative","fixed","absolute","sticky"],Zd=Ue({position:{type:String,validator:e=>Lz.includes(e)}},"position");function Kd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{positionClasses:Ee(()=>e.position?`${n}--${e.position}`:void 0)}}function zz(){const e=ji("useRoute");return ee(()=>{var n;return(n=e==null?void 0:e.proxy)==null?void 0:n.$route})}function $k(){var e,n;return(n=(e=ji("useRouter"))==null?void 0:e.proxy)==null?void 0:n.$router}function vm(e,n){var w,k;const r=MM("RouterLink"),s=Ee(()=>!!(e.href||e.to)),c=ee(()=>(s==null?void 0:s.value)||L1(n,"click")||L1(e,"click"));if(typeof r=="string"||!("useLink"in r)){const A=Ee(()=>e.href);return{isLink:s,isClickable:c,href:A,linkProps:Sr({href:A})}}const f=r.useLink({to:Ee(()=>e.to||""),replace:Ee(()=>e.replace)}),d=ee(()=>e.to?f:void 0),a=zz(),b=ee(()=>{var A,I,R;return d.value?e.exact?a.value?((R=d.value.isExactActive)==null?void 0:R.value)&&Lr(d.value.route.value.query,a.value.query):((I=d.value.isExactActive)==null?void 0:I.value)??!1:((A=d.value.isActive)==null?void 0:A.value)??!1:!1}),C=ee(()=>{var A;return e.to?(A=d.value)==null?void 0:A.route.value.href:e.href});return{isLink:s,isClickable:c,isActive:b,route:(w=d.value)==null?void 0:w.route,navigate:(k=d.value)==null?void 0:k.navigate,href:C,linkProps:Sr({href:C,"aria-current":Ee(()=>b.value?"page":void 0)})}}const ym=Ue({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Ky=!1;function Bz(e,n){let r=!1,s,c;Kn&&(e!=null&&e.beforeEach)&&(Dn(()=>{window.addEventListener("popstate",f),s=e.beforeEach((d,a,b)=>{Ky?r?n(b):b():setTimeout(()=>r?n(b):b()),Ky=!0}),c=e==null?void 0:e.afterEach(()=>{Ky=!1})}),fr(()=>{window.removeEventListener("popstate",f),s==null||s(),c==null||c()}));function f(d){var a;(a=d.state)!=null&&a.replaced||(r=!0,setTimeout(()=>r=!1))}}function Vz(e,n){Bt(()=>{var r;return(r=e.isActive)==null?void 0:r.value},r=>{e.isLink.value&&r!=null&&n&&Dn(()=>{n(r)})},{immediate:!0})}const U_=Symbol("rippleStop"),Oz=80;function dS(e,n){e.style.transform=n,e.style.webkitTransform=n}function G_(e){return e.constructor.name==="TouchEvent"}function jk(e){return e.constructor.name==="KeyboardEvent"}const Fz=function(e,n){var k;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=0,c=0;if(!jk(e)){const A=n.getBoundingClientRect(),I=G_(e)?e.touches[e.touches.length-1]:e;s=I.clientX-A.left,c=I.clientY-A.top}let f=0,d=.3;(k=n._ripple)!=null&&k.circle?(d=.15,f=n.clientWidth/2,f=r.center?f:f+Math.sqrt((s-f)**2+(c-f)**2)/4):f=Math.sqrt(n.clientWidth**2+n.clientHeight**2)/2;const a=`${(n.clientWidth-f*2)/2}px`,b=`${(n.clientHeight-f*2)/2}px`,C=r.center?a:`${s-f}px`,w=r.center?b:`${c-f}px`;return{radius:f,scale:d,x:C,y:w,centerX:a,centerY:b}},xg={show(e,n){var I;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((I=n==null?void 0:n._ripple)!=null&&I.enabled))return;const s=document.createElement("span"),c=document.createElement("span");s.appendChild(c),s.className="v-ripple__container",r.class&&(s.className+=` ${r.class}`);const{radius:f,scale:d,x:a,y:b,centerX:C,centerY:w}=Fz(e,n,r),k=`${f*2}px`;c.className="v-ripple__animation",c.style.width=k,c.style.height=k,n.appendChild(s);const A=window.getComputedStyle(n);A&&A.position==="static"&&(n.style.position="relative",n.dataset.previousPosition="static"),c.classList.add("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--visible"),dS(c,`translate(${a}, ${b}) scale3d(${d},${d},${d})`),c.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{c.classList.remove("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--in"),dS(c,`translate(${C}, ${w}) scale3d(1,1,1)`)})})},hide(e){var f;if(!((f=e==null?void 0:e._ripple)!=null&&f.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const r=n[n.length-1];if(r.dataset.isHiding)return;r.dataset.isHiding="true";const s=performance.now()-Number(r.dataset.activated),c=Math.max(250-s,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),setTimeout(()=>{var a;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((a=r.parentNode)==null?void 0:a.parentNode)===e&&e.removeChild(r.parentNode)},300)},c)}};function Nk(e){return typeof e>"u"||!!e}function Yf(e){const n={},r=e.currentTarget;if(!(!(r!=null&&r._ripple)||r._ripple.touched||e[U_])){if(e[U_]=!0,G_(e))r._ripple.touched=!0,r._ripple.isTouch=!0;else if(r._ripple.isTouch)return;if(n.center=r._ripple.centered||jk(e),r._ripple.class&&(n.class=r._ripple.class),G_(e)){if(r._ripple.showTimerCommit)return;r._ripple.showTimerCommit=()=>{xg.show(e,r,n)},r._ripple.showTimer=window.setTimeout(()=>{var s;(s=r==null?void 0:r._ripple)!=null&&s.showTimerCommit&&(r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null)},Oz)}else xg.show(e,r,n)}}function hS(e){e[U_]=!0}function Ba(e){const n=e.currentTarget;if(n!=null&&n._ripple){if(window.clearTimeout(n._ripple.showTimer),e.type==="touchend"&&n._ripple.showTimerCommit){n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null,n._ripple.showTimer=window.setTimeout(()=>{Ba(e)});return}window.setTimeout(()=>{n._ripple&&(n._ripple.touched=!1)}),xg.hide(n)}}function Uk(e){const n=e.currentTarget;n!=null&&n._ripple&&(n._ripple.showTimerCommit&&(n._ripple.showTimerCommit=null),window.clearTimeout(n._ripple.showTimer))}let Xf=!1;function fS(e,n){!Xf&&n.includes(e.keyCode)&&(Xf=!0,Yf(e))}function Gk(e){Xf=!1,Ba(e)}function qk(e){Xf&&(Xf=!1,Ba(e))}function Hk(e,n,r){const{value:s,modifiers:c}=n,f=Nk(s);f||xg.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=f,e._ripple.centered=c.center,e._ripple.circle=c.circle;const d=Gf(s)?s:{};d.class&&(e._ripple.class=d.class);const a=d.keys??[C_.enter,C_.space];if(e._ripple.keyDownHandler=b=>fS(b,a),f&&!r){if(c.stop){e.addEventListener("touchstart",hS,{passive:!0}),e.addEventListener("mousedown",hS);return}e.addEventListener("touchstart",Yf,{passive:!0}),e.addEventListener("touchend",Ba,{passive:!0}),e.addEventListener("touchmove",Uk,{passive:!0}),e.addEventListener("touchcancel",Ba),e.addEventListener("mousedown",Yf),e.addEventListener("mouseup",Ba),e.addEventListener("mouseleave",Ba),e.addEventListener("keydown",b=>fS(b,a)),e.addEventListener("keyup",Gk),e.addEventListener("blur",qk),e.addEventListener("dragstart",Ba,{passive:!0})}else!f&&r&&Wk(e)}function Wk(e){var n;e.removeEventListener("mousedown",Yf),e.removeEventListener("touchstart",Yf),e.removeEventListener("touchend",Ba),e.removeEventListener("touchmove",Uk),e.removeEventListener("touchcancel",Ba),e.removeEventListener("mouseup",Ba),e.removeEventListener("mouseleave",Ba),(n=e._ripple)!=null&&n.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",Gk),e.removeEventListener("dragstart",Ba),e.removeEventListener("blur",qk)}function $z(e,n){Hk(e,n,!1)}function jz(e){Wk(e),delete e._ripple}function Nz(e,n){if(n.value===n.oldValue)return;const r=Nk(n.oldValue);Hk(e,n,r)}const aa={mounted:$z,unmounted:jz,updated:Nz},Zg=Ue({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:v0},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:tn,appendIcon:tn,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},..._a(),...Ht(),...mr(),...Zi(),...ir(),...rc(),...Wg(),...Eo(),...Zd(),...yi(),...ym(),...Ks(),...bn({tag:"button"}),...Un(),...es({variant:"elevated"})},"VBtn"),Mn=ht()({name:"VBtn",props:Zg(),emits:{"group:selected":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Xn(e),{borderClasses:f}=Pa(e),{densityClasses:d}=sa(e),{dimensionStyles:a}=Ki(e),{elevationClasses:b}=kr(e),{loaderClasses:C}=pm(e),{locationStyles:w}=sc(e),{positionClasses:k}=Kd(e),{roundedClasses:A}=Bi(e),{sizeClasses:I,sizeStyles:R}=Wd(e),F=ac(e,e.symbol,!1),B=vm(e,r),$=ee(()=>{var _e;return e.active!==void 0?e.active:B.isLink.value?(_e=B.isActive)==null?void 0:_e.value:F==null?void 0:F.isSelected.value}),O=Ee(()=>$.value?e.activeColor??e.color:e.color),q=ee(()=>{var re,be;return{color:(F==null?void 0:F.isSelected.value)&&(!B.isLink.value||((re=B.isActive)==null?void 0:re.value))||!F||((be=B.isActive)==null?void 0:be.value)?O.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:X,colorStyles:te,variantClasses:ae}=nc(q),ue=ee(()=>(F==null?void 0:F.disabled.value)||e.disabled),ce=Ee(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),fe=ee(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function pe(_e){var re;ue.value||B.isLink.value&&(_e.metaKey||_e.ctrlKey||_e.shiftKey||_e.button!==0||r.target==="_blank")||((re=B.navigate)==null||re.call(B,_e),F==null||F.toggle())}return Vz(B,F==null?void 0:F.select),_t(()=>{const _e=B.isLink.value?"a":e.tag,re=!!(e.prependIcon||s.prepend),be=!!(e.appendIcon||s.append),je=!!(e.icon&&e.icon!==!0);return ei(G(_e,lt({type:_e==="a"?void 0:"button",class:["v-btn",F==null?void 0:F.selectedClass.value,{"v-btn--active":$.value,"v-btn--block":e.block,"v-btn--disabled":ue.value,"v-btn--elevated":ce.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},c.value,f.value,X.value,d.value,b.value,C.value,k.value,A.value,I.value,ae.value,e.class],style:[te.value,a.value,w.value,R.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:ue.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:pe,value:fe.value},B.linkProps),{default:()=>{var Be;return[Ml(!0,"v-btn"),!e.icon&&re&&Z("span",{key:"prepend",class:"v-btn__prepend"},[s.prepend?G(Sn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},s.prepend):G(Yn,{key:"prepend-icon",icon:e.prependIcon},null)]),Z("span",{class:"v-btn__content","data-no-activator":""},[!s.default&&je?G(Yn,{key:"content-icon",icon:e.icon},null):G(Sn,{key:"content-defaults",disabled:!je,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var Fe;return[((Fe=s.default)==null?void 0:Fe.call(s))??Qn(e.text)]}})]),!e.icon&&be&&Z("span",{key:"append",class:"v-btn__append"},[s.append?G(Sn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},s.append):G(Yn,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&Z("span",{key:"loader",class:"v-btn__loader"},[((Be=s.loader)==null?void 0:Be.call(s))??G(Gu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[aa,!ue.value&&e.ripple,"",{center:!!e.icon}]])}),{group:F}}}),Uz=Ue({...Zg({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Gz=ht()({name:"VAppBarNavIcon",props:Uz(),setup(e,n){let{slots:r}=n;return _t(()=>G(Mn,lt(e,{class:["v-app-bar-nav-icon"]}),r)),{}}}),qz=ht()({name:"VAppBarTitle",props:Mk(),setup(e,n){let{slots:r}=n;return _t(()=>G(h0,lt(e,{class:"v-app-bar-title"}),r)),{}}}),Zk=Ao("v-alert-title"),Hz=Ue({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Wz(e,n){return{iconSize:ee(()=>{const s=new Map(e.iconSizes),c=e.iconSize??n()??"default";return s.has(c)?s.get(c):c})}}const Zz=["success","info","warning","error"],Kz=Ue({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:tn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Zz.includes(e)},...Ht(),...mr(),...Zi(),...ir(),...Hz(),...Eo(),...Zd(),...yi(),...bn(),...Un(),...es({variant:"flat"})},"VAlert"),Yz=ht()({name:"VAlert",props:Kz(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=Qt(e,"modelValue"),f=Ee(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:d}=Wz(e,()=>e.prominent?44:28),{themeClasses:a}=Xn(e),{colorClasses:b,colorStyles:C,variantClasses:w}=nc(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:k}=sa(e),{dimensionStyles:A}=Ki(e),{elevationClasses:I}=kr(e),{locationStyles:R}=sc(e),{positionClasses:F}=Kd(e),{roundedClasses:B}=Bi(e),{textColorClasses:$,textColorStyles:O}=Br(()=>e.borderColor),{t:q}=vi(),X=Ee(()=>({"aria-label":q(e.closeLabel),onClick(te){c.value=!1,r("click:close",te)}}));return()=>{const te=!!(s.prepend||f.value),ae=!!(s.title||e.title),ue=!!(s.close||e.closable),ce={density:e.density,icon:f.value,size:d.value};return c.value&&G(e.tag,{class:gt(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},a.value,b.value,k.value,I.value,F.value,B.value,w.value,e.class]),style:zt([C.value,A.value,R.value,e.style]),role:"alert"},{default:()=>{var fe,pe;return[Ml(!1,"v-alert"),e.border&&Z("div",{key:"border",class:gt(["v-alert__border",$.value]),style:zt(O.value)},null),te&&Z("div",{key:"prepend",class:"v-alert__prepend"},[s.prepend?G(Sn,{key:"prepend-defaults",disabled:!f.value,defaults:{VIcon:{...ce}}},s.prepend):G(Yn,lt({key:"prepend-icon"},ce),null)]),Z("div",{class:"v-alert__content"},[ae&&G(Zk,{key:"title"},{default:()=>{var _e;return[((_e=s.title)==null?void 0:_e.call(s))??e.title]}}),((fe=s.text)==null?void 0:fe.call(s))??e.text,(pe=s.default)==null?void 0:pe.call(s)]),s.append&&Z("div",{key:"append",class:"v-alert__append"},[s.append()]),ue&&Z("div",{key:"close",class:"v-alert__close"},[s.close?G(Sn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var _e;return[(_e=s.close)==null?void 0:_e.call(s,{props:X.value})]}}):G(Mn,lt({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},X.value),null)])]}})}}}),Xz=Ue({start:Boolean,end:Boolean,icon:tn,image:String,text:String,..._a(),...Ht(),...mr(),...yi(),...Ks(),...bn(),...Un(),...es({variant:"flat"})},"VAvatar"),Ja=ht()({name:"VAvatar",props:Xz(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{borderClasses:c}=Pa(e),{colorClasses:f,colorStyles:d,variantClasses:a}=nc(e),{densityClasses:b}=sa(e),{roundedClasses:C}=Bi(e),{sizeClasses:w,sizeStyles:k}=Wd(e);return _t(()=>G(e.tag,{class:gt(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},s.value,c.value,f.value,b.value,C.value,w.value,a.value,e.class]),style:zt([d.value,k.value,e.style])},{default:()=>[r.default?G(Sn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[r.default()]}):e.image?G(To,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?G(Yn,{key:"icon",icon:e.icon},null):e.text,Ml(!1,"v-avatar")]})),{}}}),Jz=Ue({text:String,onClick:zr(),...Ht(),...Un()},"VLabel"),Yd=ht()({name:"VLabel",props:Jz(),setup(e,n){let{slots:r}=n;return _t(()=>{var s;return Z("label",{class:gt(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:zt(e.style),onClick:e.onClick},[e.text,(s=r.default)==null?void 0:s.call(r)])}),{}}}),Kk=Symbol.for("vuetify:selection-control-group"),y0=Ue({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:tn,trueIcon:tn,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Lr},...Ht(),...mr(),...Un()},"SelectionControlGroup"),Qz=Ue({...y0({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),Yk=ht()({name:"VSelectionControlGroup",props:Qz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),c=ya(),f=Ee(()=>e.id||`v-selection-control-group-${c}`),d=Ee(()=>e.name||f.value),a=new Set;return ri(Kk,{modelValue:s,forceUpdate:()=>{a.forEach(b=>b())},onForceUpdate:b=>{a.add(b),fr(()=>{a.delete(b)})}}),Li({[e.defaultsTarget]:{color:Ee(()=>e.color),disabled:Ee(()=>e.disabled),density:Ee(()=>e.density),error:Ee(()=>e.error),inline:Ee(()=>e.inline),modelValue:s,multiple:Ee(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),name:d,falseIcon:Ee(()=>e.falseIcon),trueIcon:Ee(()=>e.trueIcon),readonly:Ee(()=>e.readonly),ripple:Ee(()=>e.ripple),type:Ee(()=>e.type),valueComparator:Ee(()=>e.valueComparator)}}),_t(()=>{var b;return Z("div",{class:gt(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:zt(e.style),role:e.type==="radio"?"radiogroup":void 0},[(b=r.default)==null?void 0:b.call(r)])}),{}}}),Kg=Ue({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Ht(),...y0()},"VSelectionControl");function eB(e){const n=_n(Kk,void 0),{densityClasses:r}=sa(e),s=Qt(e,"modelValue"),c=ee(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),f=ee(()=>e.falseValue!==void 0?e.falseValue:!1),d=ee(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),a=ee({get(){const I=n?n.modelValue.value:s.value;return d.value?Di(I).some(R=>e.valueComparator(R,c.value)):e.valueComparator(I,c.value)},set(I){if(e.readonly)return;const R=I?c.value:f.value;let F=R;d.value&&(F=I?[...Di(s.value),R]:Di(s.value).filter(B=>!e.valueComparator(B,c.value))),n?n.modelValue.value=F:s.value=F}}),{textColorClasses:b,textColorStyles:C}=Br(()=>{if(!(e.error||e.disabled))return a.value?e.color:e.baseColor}),{backgroundColorClasses:w,backgroundColorStyles:k}=ti(()=>a.value&&!e.error&&!e.disabled?e.color:e.baseColor),A=ee(()=>a.value?e.trueIcon:e.falseIcon);return{group:n,densityClasses:r,trueValue:c,falseValue:f,model:a,textColorClasses:b,textColorStyles:C,backgroundColorClasses:w,backgroundColorStyles:k,icon:A}}const Pl=ht()({name:"VSelectionControl",directives:{vRipple:aa},inheritAttrs:!1,props:Kg(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{group:c,densityClasses:f,icon:d,model:a,textColorClasses:b,textColorStyles:C,backgroundColorClasses:w,backgroundColorStyles:k,trueValue:A}=eB(e),I=ya(),R=Mt(!1),F=Mt(!1),B=tt(),$=Ee(()=>e.id||`input-${I}`),O=Ee(()=>!e.disabled&&!e.readonly);c==null||c.onForceUpdate(()=>{B.value&&(B.value.checked=a.value)});function q(ue){O.value&&(R.value=!0,Ld(ue.target,":focus-visible")!==!1&&(F.value=!0))}function X(){R.value=!1,F.value=!1}function te(ue){ue.stopPropagation()}function ae(ue){if(!O.value){B.value&&(B.value.checked=a.value);return}e.readonly&&c&&Dn(()=>c.forceUpdate()),a.value=ue.target.checked}return _t(()=>{var _e,re;const ue=s.label?s.label({label:e.label,props:{for:$.value}}):e.label,[ce,fe]=El(r),pe=Z("input",lt({ref:B,checked:a.value,disabled:!!e.disabled,id:$.value,onBlur:X,onFocus:q,onInput:ae,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:A.value,name:e.name,"aria-checked":e.type==="checkbox"?a.value:void 0},fe),null);return Z("div",lt({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":R.value,"v-selection-control--focus-visible":F.value,"v-selection-control--inline":e.inline},f.value,e.class]},ce,{style:e.style}),[Z("div",{class:gt(["v-selection-control__wrapper",b.value]),style:zt(C.value)},[(_e=s.default)==null?void 0:_e.call(s,{backgroundColorClasses:w,backgroundColorStyles:k}),ei(Z("div",{class:gt(["v-selection-control__input"])},[((re=s.input)==null?void 0:re.call(s,{model:a,textColorClasses:b,textColorStyles:C,backgroundColorClasses:w,backgroundColorStyles:k,inputNode:pe,icon:d.value,props:{onFocus:q,onBlur:X,id:$.value}}))??Z(qt,null,[d.value&&G(Yn,{key:"icon",icon:d.value},null),pe])]),[[aa,e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),ue&&G(Yd,{for:$.value,onClick:te},{default:()=>[ue]})])}),{isFocused:R,input:B}}}),Xk=Ue({indeterminate:Boolean,indeterminateIcon:{type:tn,default:"$checkboxIndeterminate"},...Kg({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),qs=ht()({name:"VCheckboxBtn",props:Xk(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"indeterminate"),c=Qt(e,"modelValue");function f(b){s.value&&(s.value=!1)}const d=Ee(()=>s.value?e.indeterminateIcon:e.falseIcon),a=Ee(()=>s.value?e.indeterminateIcon:e.trueIcon);return _t(()=>{const b=hi(Pl.filterProps(e),["modelValue"]);return G(Pl,lt(b,{modelValue:c.value,"onUpdate:modelValue":[C=>c.value=C,f],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:d.value,trueIcon:a.value,"aria-checked":s.value?"mixed":void 0}),r)}),{}}});function Jk(e){const{t:n}=vi();function r(s){let{name:c,color:f,...d}=s;const a={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[c],b=e[`onClick:${c}`];function C(k){k.key!=="Enter"&&k.key!==" "||(k.preventDefault(),k.stopPropagation(),$g(b,new PointerEvent("click",k)))}const w=b&&a?n(`$vuetify.input.${a}`,e.label??""):void 0;return G(Yn,lt({icon:e[`${c}Icon`],"aria-label":w,onClick:b,onKeydown:C,color:f},d),null)}return{InputIcon:r}}const tB=Ue({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ht(),...ws({transition:{component:m0,leaveAbsolute:!0,group:!0}})},"VMessages"),Qk=ht()({name:"VMessages",props:tB(),setup(e,n){let{slots:r}=n;const s=ee(()=>Di(e.messages)),{textColorClasses:c,textColorStyles:f}=Br(()=>e.color);return _t(()=>G(ia,{transition:e.transition,tag:"div",class:gt(["v-messages",c.value,e.class]),style:zt([f.value,e.style])},{default:()=>[e.active&&s.value.map((d,a)=>Z("div",{class:"v-messages__message",key:`${a}-${s.value}`},[r.message?r.message({message:d}):d]))]})),{}}}),_m=Ue({focused:Boolean,"onUpdate:focused":zr()},"focus");function Mo(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=Qt(e,"focused"),s=Ee(()=>({[`${n}--focused`]:r.value}));function c(){r.value=!0}function f(){r.value=!1}return{focusClasses:s,isFocused:r,focus:c,blur:f}}const eP=Symbol.for("vuetify:form"),nB=Ue({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function iB(e){const n=Qt(e,"modelValue"),r=Ee(()=>e.disabled),s=Ee(()=>e.readonly),c=Mt(!1),f=tt([]),d=tt([]);async function a(){const w=[];let k=!0;d.value=[],c.value=!0;for(const A of f.value){const I=await A.validate();if(I.length>0&&(k=!1,w.push({id:A.id,errorMessages:I})),!k&&e.fastFail)break}return d.value=w,c.value=!1,{valid:k,errors:d.value}}function b(){f.value.forEach(w=>w.reset())}function C(){f.value.forEach(w=>w.resetValidation())}return Bt(f,()=>{let w=0,k=0;const A=[];for(const I of f.value)I.isValid===!1?(k++,A.push({id:I.id,errorMessages:I.errorMessages})):I.isValid===!0&&w++;d.value=A,n.value=k>0?!1:w===f.value.length?!0:null},{deep:!0,flush:"post"}),ri(eP,{register:w=>{let{id:k,vm:A,validate:I,reset:R,resetValidation:F}=w;f.value.some(B=>B.id===k),f.value.push({id:k,validate:I,reset:R,resetValidation:F,vm:HC(A),isValid:null,errorMessages:[]})},unregister:w=>{f.value=f.value.filter(k=>k.id!==w)},update:(w,k,A)=>{const I=f.value.find(R=>R.id===w);I&&(I.isValid=k,I.errorMessages=A)},isDisabled:r,isReadonly:s,isValidating:c,isValid:n,items:f,validateOn:Ee(()=>e.validateOn)}),{errors:d,isDisabled:r,isReadonly:s,isValidating:c,isValid:n,items:f,validate:a,reset:b,resetValidation:C}}function bm(e){const n=_n(eP,null);return{...n,isReadonly:ee(()=>!!((e==null?void 0:e.readonly)??(n==null?void 0:n.isReadonly.value))),isDisabled:ee(()=>!!((e==null?void 0:e.disabled)??(n==null?void 0:n.isDisabled.value)))}}const rB=Symbol.for("vuetify:rules");function aB(e){const n=_n(rB,null);return n?n(e):Ee(e)}const tP=Ue({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,..._m()},"validation");function nP(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ya();const s=Qt(e,"modelValue"),c=ee(()=>e.validationValue===void 0?s.value:e.validationValue),f=bm(e),d=aB(()=>e.rules),a=tt([]),b=Mt(!0),C=ee(()=>!!(Di(s.value===""?null:s.value).length||Di(c.value===""?null:c.value).length)),w=ee(()=>{var X;return(X=e.errorMessages)!=null&&X.length?Di(e.errorMessages).concat(a.value).slice(0,Math.max(0,Number(e.maxErrors))):a.value}),k=ee(()=>{var ae;let X=(e.validateOn??((ae=f.validateOn)==null?void 0:ae.value))||"input";X==="lazy"&&(X="input lazy"),X==="eager"&&(X="input eager");const te=new Set((X==null?void 0:X.split(" "))??[]);return{input:te.has("input"),blur:te.has("blur")||te.has("input")||te.has("invalid-input"),invalidInput:te.has("invalid-input"),lazy:te.has("lazy"),eager:te.has("eager")}}),A=ee(()=>{var X;return e.error||(X=e.errorMessages)!=null&&X.length?!1:e.rules.length?b.value?a.value.length||k.value.lazy?null:!0:!a.value.length:!0}),I=Mt(!1),R=ee(()=>({[`${n}--error`]:A.value===!1,[`${n}--dirty`]:C.value,[`${n}--disabled`]:f.isDisabled.value,[`${n}--readonly`]:f.isReadonly.value})),F=ji("validation"),B=ee(()=>e.name??Cr(r));Hd(()=>{var X;(X=f.register)==null||X.call(f,{id:B.value,vm:F,validate:q,reset:$,resetValidation:O})}),Vr(()=>{var X;(X=f.unregister)==null||X.call(f,B.value)}),zi(async()=>{var X;k.value.lazy||await q(!k.value.eager),(X=f.update)==null||X.call(f,B.value,A.value,w.value)}),ra(()=>k.value.input||k.value.invalidInput&&A.value===!1,()=>{Bt(c,()=>{if(c.value!=null)q();else if(e.focused){const X=Bt(()=>e.focused,te=>{te||q(),X()})}})}),ra(()=>k.value.blur,()=>{Bt(()=>e.focused,X=>{X||q()})}),Bt([A,w],()=>{var X;(X=f.update)==null||X.call(f,B.value,A.value,w.value)});async function $(){s.value=null,await Dn(),await O()}async function O(){b.value=!0,k.value.lazy?a.value=[]:await q(!k.value.eager)}async function q(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const te=[];I.value=!0;for(const ae of d.value){if(te.length>=Number(e.maxErrors??1))break;const ce=await(typeof ae=="function"?ae:()=>ae)(c.value);if(ce!==!0){if(ce!==!1&&typeof ce!="string"){console.warn(`${ce} is not a valid value. Rule functions must return boolean true or a string.`);continue}te.push(ce||"")}}return a.value=te,I.value=!1,b.value=X,a.value}return{errorMessages:w,isDirty:C,isDisabled:f.isDisabled,isReadonly:f.isReadonly,isPristine:b,isValid:A,isValidating:I,reset:$,resetValidation:O,validate:q,validationClasses:R}}const Do=Ue({id:String,appendIcon:tn,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:tn,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":zr(),"onClick:append":zr(),...Ht(),...mr(),...Io(Zi(),["maxWidth","minWidth","width"]),...Un(),...tP()},"VInput"),Wr=ht()({name:"VInput",props:{...Do()},emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s,emit:c}=n;const{densityClasses:f}=sa(e),{dimensionStyles:d}=Ki(e),{themeClasses:a}=Xn(e),{rtlClasses:b}=nr(),{InputIcon:C}=Jk(e),w=ya(),k=ee(()=>e.id||`input-${w}`),A=ee(()=>`${k.value}-messages`),{errorMessages:I,isDirty:R,isDisabled:F,isReadonly:B,isPristine:$,isValid:O,isValidating:q,reset:X,resetValidation:te,validate:ae,validationClasses:ue}=nP(e,"v-input",k),ce=ee(()=>({id:k,messagesId:A,isDirty:R,isDisabled:F,isReadonly:B,isPristine:$,isValid:O,isValidating:q,reset:X,resetValidation:te,validate:ae})),fe=Ee(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),pe=Ee(()=>{if(e.iconColor)return e.iconColor===!0?fe.value:e.iconColor}),_e=ee(()=>{var re;return(re=e.errorMessages)!=null&&re.length||!$.value&&I.value.length?I.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return _t(()=>{var Fe,Ke,ft,mt;const re=!!(s.prepend||e.prependIcon),be=!!(s.append||e.appendIcon),je=_e.value.length>0,Be=!e.hideDetails||e.hideDetails==="auto"&&(je||!!s.details);return Z("div",{class:gt(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},f.value,a.value,b.value,ue.value,e.class]),style:zt([d.value,e.style])},[re&&Z("div",{key:"prepend",class:"v-input__prepend"},[(Fe=s.prepend)==null?void 0:Fe.call(s,ce.value),e.prependIcon&&G(C,{key:"prepend-icon",name:"prepend",color:pe.value},null)]),s.default&&Z("div",{class:"v-input__control"},[(Ke=s.default)==null?void 0:Ke.call(s,ce.value)]),be&&Z("div",{key:"append",class:"v-input__append"},[e.appendIcon&&G(C,{key:"append-icon",name:"append",color:pe.value},null),(ft=s.append)==null?void 0:ft.call(s,ce.value)]),Be&&Z("div",{id:A.value,class:"v-input__details",role:"alert","aria-live":"polite"},[G(Qk,{active:je,messages:_e.value},{message:s.message}),(mt=s.details)==null?void 0:mt.call(s,ce.value)])])}),{reset:X,resetValidation:te,validate:ae,isValid:O,errorMessages:I}}}),Yy=Symbol("Forwarded refs");function Xy(e,n){let r=e;for(;r;){const s=Reflect.getOwnPropertyDescriptor(r,n);if(s)return s;r=Object.getPrototypeOf(r)}}function Pr(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e[Yy]=r,new Proxy(e,{get(c,f){if(Reflect.has(c,f))return Reflect.get(c,f);if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const d of r)if(d.value&&Reflect.has(d.value,f)){const a=Reflect.get(d.value,f);return typeof a=="function"?a.bind(d.value):a}}},has(c,f){if(Reflect.has(c,f))return!0;if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const d of r)if(d.value&&Reflect.has(d.value,f))return!0;return!1},set(c,f,d){if(Reflect.has(c,f))return Reflect.set(c,f,d);if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const a of r)if(a.value&&Reflect.has(a.value,f))return Reflect.set(a.value,f,d);return!1},getOwnPropertyDescriptor(c,f){var a;const d=Reflect.getOwnPropertyDescriptor(c,f);if(d)return d;if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const b of r){if(!b.value)continue;const C=Xy(b.value,f)??("_"in b.value?Xy((a=b.value._)==null?void 0:a.setupState,f):void 0);if(C)return C}for(const b of r){const C=b.value&&b.value[Yy];if(!C)continue;const w=C.slice();for(;w.length;){const k=w.shift(),A=Xy(k.value,f);if(A)return A;const I=k.value&&k.value[Yy];I&&w.push(...I)}}}}})}const sB=Ue({...Do(),...hi(Xk(),["inline"])},"VCheckbox"),oB=ht()({name:"VCheckbox",inheritAttrs:!1,props:sB(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=Qt(e,"modelValue"),{isFocused:f,focus:d,blur:a}=Mo(e),b=tt(),C=ya();return _t(()=>{const[w,k]=El(r),A=Wr.filterProps(e),I=qs.filterProps(e);return G(Wr,lt({ref:b,class:["v-checkbox",e.class]},w,A,{modelValue:c.value,"onUpdate:modelValue":R=>c.value=R,id:e.id||`checkbox-${C}`,focused:f.value,style:e.style}),{...s,default:R=>{let{id:F,messagesId:B,isDisabled:$,isReadonly:O,isValid:q}=R;return G(qs,lt(I,{id:F.value,"aria-describedby":B.value,disabled:$.value,readonly:O.value},k,{error:q.value===!1,modelValue:c.value,"onUpdate:modelValue":X=>c.value=X,onFocus:d,onBlur:a}),s)}})}),Pr({},b)}});function lB(e){let{selectedElement:n,containerElement:r,isRtl:s,isHorizontal:c}=e;const f=Jf(c,r),d=iP(c,s,r),a=Jf(c,n),b=rP(c,n),C=a*.4;return d>b?b-C:d+f<b+a?b-f+a+C:d}function uB(e){let{selectedElement:n,containerElement:r,isHorizontal:s}=e;const c=Jf(s,r),f=rP(s,n),d=Jf(s,n);return f-c/2+d/2}function mS(e,n){const r=e?"scrollWidth":"scrollHeight";return(n==null?void 0:n[r])||0}function cB(e,n){const r=e?"clientWidth":"clientHeight";return(n==null?void 0:n[r])||0}function iP(e,n,r){if(!r)return 0;const{scrollLeft:s,offsetWidth:c,scrollWidth:f}=r;return e?n?f-c+s:s:r.scrollTop}function Jf(e,n){const r=e?"offsetWidth":"offsetHeight";return(n==null?void 0:n[r])||0}function rP(e,n){const r=e?"offsetLeft":"offsetTop";return(n==null?void 0:n[r])||0}const aP=Symbol.for("vuetify:v-slide-group"),_0=Ue({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:aP},nextIcon:{type:tn,default:"$next"},prevIcon:{type:tn,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Ht(),...Ju({mobile:null}),...bn(),...ic({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Qf=ht()({name:"VSlideGroup",props:_0(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{isRtl:s}=nr(),{displayClasses:c,mobile:f}=Qa(e),d=Dl(e,e.symbol),a=Mt(!1),b=Mt(0),C=Mt(0),w=Mt(0),k=ee(()=>e.direction==="horizontal"),{resizeRef:A,contentRect:I}=vs(),{resizeRef:R,contentRect:F}=vs(),B=OL(),$=ee(()=>({container:A.el,duration:200,easing:"easeOutQuart"})),O=ee(()=>d.selected.value.length?d.items.value.findIndex(Se=>Se.id===d.selected.value[0]):-1),q=ee(()=>d.selected.value.length?d.items.value.findIndex(Se=>Se.id===d.selected.value[d.selected.value.length-1]):-1);if(Kn){let Se=-1;Bt(()=>[d.selected.value,I.value,F.value,k.value],()=>{cancelAnimationFrame(Se),Se=requestAnimationFrame(()=>{if(I.value&&F.value){const Me=k.value?"width":"height";C.value=I.value[Me],w.value=F.value[Me],a.value=C.value+1<w.value}if(O.value>=0&&R.el){const Me=R.el.children[q.value];te(Me,e.centerActive)}})})}const X=Mt(!1);function te(Se,Me){let Qe=0;Me?Qe=uB({containerElement:A.el,isHorizontal:k.value,selectedElement:Se}):Qe=lB({containerElement:A.el,isHorizontal:k.value,isRtl:s.value,selectedElement:Se}),ae(Qe)}function ae(Se){if(!Kn||!A.el)return;const Me=Jf(k.value,A.el),Qe=iP(k.value,s.value,A.el);if(!(mS(k.value,A.el)<=Me||Math.abs(Se-Qe)<16)){if(k.value&&s.value&&A.el){const{scrollWidth:Tt,offsetWidth:xt}=A.el;Se=Tt-xt-Se}k.value?B.horizontal(Se,$.value):B(Se,$.value)}}function ue(Se){const{scrollTop:Me,scrollLeft:Qe}=Se.target;b.value=k.value?Qe:Me}function ce(Se){if(X.value=!0,!(!a.value||!R.el)){for(const Me of Se.composedPath())for(const Qe of R.el.children)if(Qe===Me){te(Qe);return}}}function fe(Se){X.value=!1}let pe=!1;function _e(Se){var Me;!pe&&!X.value&&!(Se.relatedTarget&&((Me=R.el)!=null&&Me.contains(Se.relatedTarget)))&&Be(),pe=!1}function re(){pe=!0}function be(Se){if(!R.el)return;function Me(Qe){Se.preventDefault(),Be(Qe)}k.value?Se.key==="ArrowRight"?Me(s.value?"prev":"next"):Se.key==="ArrowLeft"&&Me(s.value?"next":"prev"):Se.key==="ArrowDown"?Me("next"):Se.key==="ArrowUp"&&Me("prev"),Se.key==="Home"?Me("first"):Se.key==="End"&&Me("last")}function je(Se,Me){if(!Se)return;let Qe=Se;do Qe=Qe==null?void 0:Qe[Me==="next"?"nextElementSibling":"previousElementSibling"];while(Qe!=null&&Qe.hasAttribute("disabled"));return Qe}function Be(Se){if(!R.el)return;let Me;if(!Se)Me=qf(R.el)[0];else if(Se==="next"){if(Me=je(R.el.querySelector(":focus"),Se),!Me)return Be("first")}else if(Se==="prev"){if(Me=je(R.el.querySelector(":focus"),Se),!Me)return Be("last")}else Se==="first"?(Me=R.el.firstElementChild,Me!=null&&Me.hasAttribute("disabled")&&(Me=je(Me,"next"))):Se==="last"&&(Me=R.el.lastElementChild,Me!=null&&Me.hasAttribute("disabled")&&(Me=je(Me,"prev")));Me&&Me.focus({preventScroll:!0})}function Fe(Se){const Me=k.value&&s.value?-1:1,Qe=(Se==="prev"?-Me:Me)*C.value;let Ft=b.value+Qe;if(k.value&&s.value&&A.el){const{scrollWidth:Tt,offsetWidth:xt}=A.el;Ft+=Tt-xt}ae(Ft)}const Ke=ee(()=>({next:d.next,prev:d.prev,select:d.select,isSelected:d.isSelected})),ft=ee(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!f.value;case!0:return a.value||Math.abs(b.value)>0;case"mobile":return f.value||a.value||Math.abs(b.value)>0;default:return!f.value&&(a.value||Math.abs(b.value)>0)}}),mt=ee(()=>Math.abs(b.value)>1),ze=ee(()=>{if(!A.value)return!1;const Se=mS(k.value,A.el),Me=cB(k.value,A.el);return Se-Me-Math.abs(b.value)>1});return _t(()=>G(e.tag,{class:gt(["v-slide-group",{"v-slide-group--vertical":!k.value,"v-slide-group--has-affixes":ft.value,"v-slide-group--is-overflowing":a.value},c.value,e.class]),style:zt(e.style),tabindex:X.value||d.selected.value.length?-1:0,onFocus:_e},{default:()=>{var Se,Me,Qe;return[ft.value&&Z("div",{key:"prev",class:gt(["v-slide-group__prev",{"v-slide-group__prev--disabled":!mt.value}]),onMousedown:re,onClick:()=>mt.value&&Fe("prev")},[((Se=r.prev)==null?void 0:Se.call(r,Ke.value))??G(Kf,null,{default:()=>[G(Yn,{icon:s.value?e.nextIcon:e.prevIcon},null)]})]),Z("div",{key:"container",ref:A,class:gt(["v-slide-group__container",e.contentClass]),onScroll:ue},[Z("div",{ref:R,class:"v-slide-group__content",onFocusin:ce,onFocusout:fe,onKeydown:be},[(Me=r.default)==null?void 0:Me.call(r,Ke.value)])]),ft.value&&Z("div",{key:"next",class:gt(["v-slide-group__next",{"v-slide-group__next--disabled":!ze.value}]),onMousedown:re,onClick:()=>ze.value&&Fe("next")},[((Qe=r.next)==null?void 0:Qe.call(r,Ke.value))??G(Kf,null,{default:()=>[G(Yn,{icon:s.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:d.selected,scrollTo:Fe,scrollOffset:b,focus:Be,hasPrev:mt,hasNext:ze}}}),sP=Symbol.for("vuetify:v-chip-group"),dB=Ue({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Lr},..._0(),...Ht(),...ic({selectedClass:"v-chip--selected"}),...bn(),...Un(),...es({variant:"tonal"})},"VChipGroup"),hB=ht()({name:"VChipGroup",props:dB(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{isSelected:c,select:f,next:d,prev:a,selected:b}=Dl(e,sP);return Li({VChip:{baseColor:Ee(()=>e.baseColor),color:Ee(()=>e.color),disabled:Ee(()=>e.disabled),filter:Ee(()=>e.filter),variant:Ee(()=>e.variant)}}),_t(()=>{const C=Qf.filterProps(e);return G(Qf,lt(C,{class:["v-chip-group",{"v-chip-group--column":e.column},s.value,e.class],style:e.style}),{default:()=>{var w;return[(w=r.default)==null?void 0:w.call(r,{isSelected:c,select:f,next:d,prev:a,selected:b.value})]}})}),{}}}),fB=Ue({activeClass:String,appendAvatar:String,appendIcon:tn,baseColor:String,closable:Boolean,closeIcon:{type:tn,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:tn,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:tn,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:zr(),onClickOnce:zr(),..._a(),...Ht(),...mr(),...ir(),...rc(),...yi(),...ym(),...Ks(),...bn({tag:"span"}),...Un(),...es({variant:"tonal"})},"VChip"),Xd=ht()({name:"VChip",directives:{vRipple:aa},props:fB(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{t:f}=vi(),{borderClasses:d}=Pa(e),{densityClasses:a}=sa(e),{elevationClasses:b}=kr(e),{roundedClasses:C}=Bi(e),{sizeClasses:w}=Wd(e),{themeClasses:k}=Xn(e),A=Qt(e,"modelValue"),I=ac(e,sP,!1),R=vm(e,r),F=Ee(()=>e.link!==!1&&R.isLink.value),B=ee(()=>!e.disabled&&e.link!==!1&&(!!I||e.link||R.isClickable.value)),$=Ee(()=>({"aria-label":f(e.closeLabel),disabled:e.disabled,onClick(ue){ue.preventDefault(),ue.stopPropagation(),A.value=!1,s("click:close",ue)}})),{colorClasses:O,colorStyles:q,variantClasses:X}=nc(()=>({color:!I||I.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function te(ue){var ce;s("click",ue),B.value&&((ce=R.navigate)==null||ce.call(R,ue),I==null||I.toggle())}function ae(ue){(ue.key==="Enter"||ue.key===" ")&&(ue.preventDefault(),te(ue))}return()=>{var je;const ue=R.isLink.value?"a":e.tag,ce=!!(e.appendIcon||e.appendAvatar),fe=!!(ce||c.append),pe=!!(c.close||e.closable),_e=!!(c.filter||e.filter)&&I,re=!!(e.prependIcon||e.prependAvatar),be=!!(re||c.prepend);return A.value&&ei(G(ue,lt({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":B.value,"v-chip--filter":_e,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&((je=R.isActive)==null?void 0:je.value)},k.value,d.value,O.value,a.value,b.value,C.value,w.value,X.value,I==null?void 0:I.selectedClass.value,e.class],style:[q.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:B.value?0:void 0,onClick:te,onKeydown:B.value&&!F.value&&ae},R.linkProps),{default:()=>{var Be;return[Ml(B.value,"v-chip"),_e&&G(p0,{key:"filter"},{default:()=>[ei(Z("div",{class:"v-chip__filter"},[c.filter?G(Sn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},c.filter):G(Yn,{key:"filter-icon",icon:e.filterIcon},null)]),[[xs,I.isSelected.value]])]}),be&&Z("div",{key:"prepend",class:"v-chip__prepend"},[c.prepend?G(Sn,{key:"prepend-defaults",disabled:!re,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},c.prepend):Z(qt,null,[e.prependIcon&&G(Yn,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&G(Ja,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),Z("div",{class:"v-chip__content","data-no-activator":""},[((Be=c.default)==null?void 0:Be.call(c,{isSelected:I==null?void 0:I.isSelected.value,selectedClass:I==null?void 0:I.selectedClass.value,select:I==null?void 0:I.select,toggle:I==null?void 0:I.toggle,value:I==null?void 0:I.value.value,disabled:e.disabled}))??Qn(e.text)]),fe&&Z("div",{key:"append",class:"v-chip__append"},[c.append?G(Sn,{key:"append-defaults",disabled:!ce,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},c.append):Z(qt,null,[e.appendIcon&&G(Yn,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&G(Ja,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),pe&&Z("button",lt({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},$.value),[c.close?G(Sn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},c.close):G(Yn,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[aa,B.value&&e.ripple,null]])}}}),mB=Ue({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Ht(),...Un()},"VDivider"),$a=ht()({name:"VDivider",props:mB(),setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Xn(e),{textColorClasses:f,textColorStyles:d}=Br(()=>e.color),a=ee(()=>{const b={};return e.length&&(b[e.vertical?"height":"width"]=Nt(e.length)),e.thickness&&(b[e.vertical?"borderRightWidth":"borderTopWidth"]=Nt(e.thickness)),b});return _t(()=>{const b=Z("hr",{class:gt([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},c.value,f.value,e.class]),style:zt([a.value,d.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!r.role||r.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${r.role||"separator"}`},null);return s.default?Z("div",{class:gt(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[b,Z("div",{class:"v-divider__content"},[s.default()]),b]):b}),{}}}),q_=Symbol.for("vuetify:list");function oP(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const n=_n(q_,{filterable:!1,hasPrepend:Mt(!1),updateHasPrepend:()=>null}),r={filterable:n.filterable||e,hasPrepend:Mt(!1),updateHasPrepend:s=>{s&&(r.hasPrepend.value=s)}};return ri(q_,r),n}function lP(){return _n(q_,null)}const b0=e=>{const n={activate:r=>{let{id:s,value:c,activated:f}=r;return s=dn(s),e&&!c&&f.size===1&&f.has(s)||(c?f.add(s):f.delete(s)),f},in:(r,s,c)=>{let f=new Set;if(r!=null)for(const d of Di(r))f=n.activate({id:d,value:!0,activated:new Set(f),children:s,parents:c});return f},out:r=>Array.from(r)};return n},uP=e=>{const n=b0(e);return{activate:s=>{let{activated:c,id:f,...d}=s;f=dn(f);const a=c.has(f)?new Set([f]):new Set;return n.activate({...d,id:f,activated:a})},in:(s,c,f)=>{let d=new Set;if(s!=null){const a=Di(s);a.length&&(d=n.in(a.slice(0,1),c,f))}return d},out:(s,c,f)=>n.out(s,c,f)}},pB=e=>{const n=b0(e);return{activate:s=>{let{id:c,activated:f,children:d,...a}=s;return c=dn(c),d.has(c)?f:n.activate({id:c,activated:f,children:d,...a})},in:n.in,out:n.out}},gB=e=>{const n=uP(e);return{activate:s=>{let{id:c,activated:f,children:d,...a}=s;return c=dn(c),d.has(c)?f:n.activate({id:c,activated:f,children:d,...a})},in:n.in,out:n.out}},vB={open:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(r){const f=new Set;f.add(n);let d=c.get(n);for(;d!=null;)f.add(d),d=c.get(d);return f}else return s.delete(n),s},select:()=>null},cP={open:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(r){let f=c.get(n);for(s.add(n);f!=null&&f!==n;)s.add(f),f=c.get(f);return s}else s.delete(n);return s},select:()=>null},yB={open:cP.open,select:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(!r)return s;const f=[];let d=c.get(n);for(;d!=null;)f.push(d),d=c.get(d);return new Set(f)}},x0=e=>{const n={select:r=>{let{id:s,value:c,selected:f}=r;if(s=dn(s),e&&!c){const d=Array.from(f.entries()).reduce((a,b)=>{let[C,w]=b;return w==="on"&&a.push(C),a},[]);if(d.length===1&&d[0]===s)return f}return f.set(s,c?"on":"off"),f},in:(r,s,c,f)=>{const d=new Map;for(const a of r||[])n.select({id:a,value:!0,selected:d,children:s,parents:c,disabled:f});return d},out:r=>{const s=[];for(const[c,f]of r.entries())f==="on"&&s.push(c);return s}};return n},dP=e=>{const n=x0(e);return{select:s=>{let{selected:c,id:f,...d}=s;f=dn(f);const a=c.has(f)?new Map([[f,c.get(f)]]):new Map;return n.select({...d,id:f,selected:a})},in:(s,c,f,d)=>s!=null&&s.length?n.in(s.slice(0,1),c,f,d):new Map,out:(s,c,f)=>n.out(s,c,f)}},_B=e=>{const n=x0(e);return{select:s=>{let{id:c,selected:f,children:d,...a}=s;return c=dn(c),d.has(c)?f:n.select({id:c,selected:f,children:d,...a})},in:n.in,out:n.out}},bB=e=>{const n=dP(e);return{select:s=>{let{id:c,selected:f,children:d,...a}=s;return c=dn(c),d.has(c)?f:n.select({id:c,selected:f,children:d,...a})},in:n.in,out:n.out}},hP=e=>{const n={select:r=>{let{id:s,value:c,selected:f,children:d,parents:a,disabled:b}=r;s=dn(s);const C=new Map(f),w=[s];for(;w.length;){const A=w.shift();b.has(A)||f.set(dn(A),c?"on":"off"),d.has(A)&&w.push(...d.get(A))}let k=dn(a.get(s));for(;k;){let A=!0,I=!0;for(const R of d.get(k)){const F=dn(R);if(!b.has(F)&&(f.get(F)!=="on"&&(A=!1),f.has(F)&&f.get(F)!=="off"&&(I=!1),!A&&!I))break}f.set(k,A?"on":I?"off":"indeterminate"),k=dn(a.get(k))}return e&&!c&&Array.from(f.entries()).reduce((I,R)=>{let[F,B]=R;return B==="on"&&I.push(F),I},[]).length===0?C:f},in:(r,s,c,f)=>{let d=new Map;for(const a of r||[])d=n.select({id:a,value:!0,selected:d,children:s,parents:c,disabled:f});return d},out:(r,s)=>{const c=[];for(const[f,d]of r.entries())d==="on"&&!s.has(f)&&c.push(f);return c}};return n},xB=e=>{const n=hP(e);return{select:n.select,in:n.in,out:(s,c,f)=>{const d=[];for(const[a,b]of s.entries())if(b==="on"){if(f.has(a)){const C=f.get(a);if(s.get(C)==="on")continue}d.push(a)}return d}}},em=Symbol.for("vuetify:nested"),fP={id:Mt(),root:{register:()=>null,unregister:()=>null,children:tt(new Map),parents:tt(new Map),disabled:tt(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:tt(!1),selectable:tt(!1),opened:tt(new Set),activated:tt(new Set),selected:tt(new Map),selectedValues:tt([]),getPath:()=>[]}},wB=Ue({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),SB=e=>{let n=!1;const r=Mt(new Map),s=Mt(new Map),c=Mt(new Set),f=Qt(e,"opened",e.opened,F=>new Set(Array.isArray(F)?F.map(B=>dn(B)):F),F=>[...F.values()]),d=ee(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return pB(e.mandatory);case"single-leaf":return gB(e.mandatory);case"independent":return b0(e.mandatory);case"single-independent":default:return uP(e.mandatory)}}),a=ee(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return bB(e.mandatory);case"leaf":return _B(e.mandatory);case"independent":return x0(e.mandatory);case"single-independent":return dP(e.mandatory);case"trunk":return xB(e.mandatory);case"classic":default:return hP(e.mandatory)}}),b=ee(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return yB;case"single":return vB;case"multiple":default:return cP}}),C=Qt(e,"activated",e.activated,F=>d.value.in(F,r.value,s.value),F=>d.value.out(F,r.value,s.value)),w=Qt(e,"selected",e.selected,F=>a.value.in(F,r.value,s.value,c.value),F=>a.value.out(F,r.value,s.value));Vr(()=>{n=!0});function k(F){const B=[];let $=dn(F);for(;$!=null;)B.unshift($),$=s.value.get($);return B}const A=ji("nested"),I=new Set,R={id:Mt(),root:{opened:f,activatable:Ee(()=>e.activatable),selectable:Ee(()=>e.selectable),activated:C,selected:w,selectedValues:ee(()=>{const F=[];for(const[B,$]of w.value.entries())$==="on"&&F.push(B);return F}),register:(F,B,$,O)=>{if(I.has(F)){k(F).map(String).join(" -> "),k(B).concat(F).map(String).join(" -> ");return}else I.add(F);B&&F!==B&&s.value.set(F,B),$&&c.value.add(F),O&&r.value.set(F,[]),B!=null&&r.value.set(B,[...r.value.get(B)||[],F])},unregister:F=>{if(n)return;I.delete(F),r.value.delete(F),c.value.delete(F);const B=s.value.get(F);if(B){const $=r.value.get(B)??[];r.value.set(B,$.filter(O=>O!==F))}s.value.delete(F)},open:(F,B,$)=>{A.emit("click:open",{id:F,value:B,path:k(F),event:$});const O=b.value.open({id:F,value:B,opened:new Set(f.value),children:r.value,parents:s.value,event:$});O&&(f.value=O)},openOnSelect:(F,B,$)=>{const O=b.value.select({id:F,value:B,selected:new Map(w.value),opened:new Set(f.value),children:r.value,parents:s.value,event:$});O&&(f.value=O)},select:(F,B,$)=>{A.emit("click:select",{id:F,value:B,path:k(F),event:$});const O=a.value.select({id:F,value:B,selected:new Map(w.value),children:r.value,parents:s.value,disabled:c.value,event:$});O&&(w.value=O),R.root.openOnSelect(F,B,$)},activate:(F,B,$)=>{if(!e.activatable)return R.root.select(F,!0,$);A.emit("click:activate",{id:F,value:B,path:k(F),event:$});const O=d.value.activate({id:F,value:B,activated:new Set(C.value),children:r.value,parents:s.value,event:$});if(O.size!==C.value.size)C.value=O;else{for(const q of O)if(!C.value.has(q)){C.value=O;return}for(const q of C.value)if(!O.has(q)){C.value=O;return}}},children:r,parents:s,disabled:c,getPath:k}};return ri(em,R),R.root},mP=(e,n,r)=>{const s=_n(em,fP),c=Symbol("nested item"),f=ee(()=>dn(Us(e))??c),d={...s,id:f,open:(a,b)=>s.root.open(f.value,a,b),openOnSelect:(a,b)=>s.root.openOnSelect(f.value,a,b),isOpen:ee(()=>s.root.opened.value.has(f.value)),parent:ee(()=>s.root.parents.value.get(f.value)),activate:(a,b)=>s.root.activate(f.value,a,b),isActivated:ee(()=>s.root.activated.value.has(f.value)),select:(a,b)=>s.root.select(f.value,a,b),isSelected:ee(()=>s.root.selected.value.get(f.value)==="on"),isIndeterminate:ee(()=>s.root.selected.value.get(f.value)==="indeterminate"),isLeaf:ee(()=>!s.root.children.value.get(f.value)),isGroupActivator:s.isGroupActivator};return Hd(()=>{s.isGroupActivator||s.root.register(f.value,s.id.value,Us(n),r)}),Vr(()=>{s.isGroupActivator||s.root.unregister(f.value)}),r&&ri(em,d),d},CB=()=>{const e=_n(em,fP);ri(em,{...e,isGroupActivator:!0})},TB=ja({name:"VListGroupActivator",setup(e,n){let{slots:r}=n;return CB(),()=>{var s;return(s=r.default)==null?void 0:s.call(r)}}}),pP=Ue({activeColor:String,baseColor:String,color:String,collapseIcon:{type:tn,default:"$collapse"},disabled:Boolean,expandIcon:{type:tn,default:"$expand"},rawId:[String,Number],prependIcon:tn,appendIcon:tn,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Ht(),...bn()},"VListGroup"),tm=ht()({name:"VListGroup",props:pP(),setup(e,n){let{slots:r}=n;const{isOpen:s,open:c,id:f}=mP(()=>e.value,()=>e.disabled,!0),d=ee(()=>`v-list-group--id-${String(e.rawId??f.value)}`),a=lP(),{isBooted:b}=tc();function C(I){var R;["INPUT","TEXTAREA"].includes((R=I.target)==null?void 0:R.tagName)||c(!s.value,I)}const w=ee(()=>({onClick:C,class:"v-list-group__header",id:d.value})),k=ee(()=>s.value?e.collapseIcon:e.expandIcon),A=ee(()=>({VListItem:{active:s.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&k.value,appendIcon:e.appendIcon||!e.subgroup&&k.value,title:e.title,value:e.value}}));return _t(()=>G(e.tag,{class:gt(["v-list-group",{"v-list-group--prepend":a==null?void 0:a.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":s.value},e.class]),style:zt(e.style)},{default:()=>[r.activator&&G(Sn,{defaults:A.value},{default:()=>[G(TB,null,{default:()=>[r.activator({props:w.value,isOpen:s.value})]})]}),G(ia,{transition:{component:qg},disabled:!b.value},{default:()=>{var I;return[ei(Z("div",{class:"v-list-group__items",role:"group","aria-labelledby":d.value},[(I=r.default)==null?void 0:I.call(r)]),[[xs,s.value]])]}})]})),{isOpen:s}}}),kB=Ue({opacity:[Number,String],...Ht(),...bn()},"VListItemSubtitle"),gP=ht()({name:"VListItemSubtitle",props:kB(),setup(e,n){let{slots:r}=n;return _t(()=>G(e.tag,{class:gt(["v-list-item-subtitle",e.class]),style:zt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},r)),{}}}),vP=Ao("v-list-item-title"),yP=Ue({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:tn,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:tn,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:zr(),onClickOnce:zr(),..._a(),...Ht(),...mr(),...Zi(),...ir(),...yi(),...ym(),...bn(),...Un(),...es({variant:"text"})},"VListItem"),ys=ht()({name:"VListItem",directives:{vRipple:aa},props:yP(),emits:{click:e=>!0},setup(e,n){let{attrs:r,slots:s,emit:c}=n;const f=vm(e,r),d=ee(()=>e.value===void 0?f.href.value:e.value),{activate:a,isActivated:b,select:C,isOpen:w,isSelected:k,isIndeterminate:A,isGroupActivator:I,root:R,parent:F,openOnSelect:B,id:$}=mP(d,()=>e.disabled,!1),O=lP(),q=ee(()=>{var Tt;return e.active!==!1&&(e.active||((Tt=f.isActive)==null?void 0:Tt.value)||(R.activatable.value?b.value:k.value))}),X=Ee(()=>e.link!==!1&&f.isLink.value),te=ee(()=>!!O&&(R.selectable.value||R.activatable.value||e.value!=null)),ae=ee(()=>!e.disabled&&e.link!==!1&&(e.link||f.isClickable.value||te.value)),ue=Ee(()=>e.rounded||e.nav),ce=Ee(()=>e.color??e.activeColor),fe=Ee(()=>({color:q.value?ce.value??e.baseColor:e.baseColor,variant:e.variant}));Bt(()=>{var Tt;return(Tt=f.isActive)==null?void 0:Tt.value},Tt=>{Tt&&pe()}),Hd(()=>{var Tt;(Tt=f.isActive)!=null&&Tt.value&&pe()});function pe(){F.value!=null&&R.open(F.value,!0),B(!0)}const{themeClasses:_e}=Xn(e),{borderClasses:re}=Pa(e),{colorClasses:be,colorStyles:je,variantClasses:Be}=nc(fe),{densityClasses:Fe}=sa(e),{dimensionStyles:Ke}=Ki(e),{elevationClasses:ft}=kr(e),{roundedClasses:mt}=Bi(ue),ze=Ee(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),Se=Ee(()=>e.ripple!==void 0&&e.ripple&&(O!=null&&O.filterable)?{keys:[C_.enter]}:e.ripple),Me=ee(()=>({isActive:q.value,select:C,isOpen:w.value,isSelected:k.value,isIndeterminate:A.value}));function Qe(Tt){var xt,Re;c("click",Tt),!["INPUT","TEXTAREA"].includes((xt=Tt.target)==null?void 0:xt.tagName)&&ae.value&&((Re=f.navigate)==null||Re.call(f,Tt),!I&&(R.activatable.value?a(!b.value,Tt):(R.selectable.value||e.value!=null)&&C(!k.value,Tt)))}function Ft(Tt){const xt=Tt.target;["INPUT","TEXTAREA"].includes(xt.tagName)||(Tt.key==="Enter"||Tt.key===" "&&!(O!=null&&O.filterable))&&(Tt.preventDefault(),Tt.stopPropagation(),Tt.target.dispatchEvent(new MouseEvent("click",Tt)))}return _t(()=>{const Tt=X.value?"a":e.tag,xt=s.title||e.title!=null,Re=s.subtitle||e.subtitle!=null,vt=!!(e.appendAvatar||e.appendIcon),st=!!(vt||s.append),Ye=!!(e.prependAvatar||e.prependIcon),St=!!(Ye||s.prepend);return O==null||O.updateHasPrepend(St),e.activeColor&&rk("active-color",["color","base-color"]),ei(G(Tt,lt({class:["v-list-item",{"v-list-item--active":q.value,"v-list-item--disabled":e.disabled,"v-list-item--link":ae.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!St&&(O==null?void 0:O.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&q.value},_e.value,re.value,be.value,Fe.value,ft.value,ze.value,mt.value,Be.value,e.class],style:[je.value,Ke.value,e.style],tabindex:ae.value?O?-2:0:void 0,"aria-selected":te.value?R.activatable.value?b.value:R.selectable.value?k.value:q.value:void 0,onClick:Qe,onKeydown:ae.value&&!X.value&&Ft},f.linkProps),{default:()=>{var ie;return[Ml(ae.value||q.value,"v-list-item"),St&&Z("div",{key:"prepend",class:"v-list-item__prepend"},[s.prepend?G(Sn,{key:"prepend-defaults",disabled:!Ye,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var le;return[(le=s.prepend)==null?void 0:le.call(s,Me.value)]}}):Z(qt,null,[e.prependAvatar&&G(Ja,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&G(Yn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),Z("div",{class:"v-list-item__spacer"},null)]),Z("div",{class:"v-list-item__content","data-no-activator":""},[xt&&G(vP,{key:"title"},{default:()=>{var le;return[((le=s.title)==null?void 0:le.call(s,{title:e.title}))??Qn(e.title)]}}),Re&&G(gP,{key:"subtitle"},{default:()=>{var le;return[((le=s.subtitle)==null?void 0:le.call(s,{subtitle:e.subtitle}))??Qn(e.subtitle)]}}),(ie=s.default)==null?void 0:ie.call(s,Me.value)]),st&&Z("div",{key:"append",class:"v-list-item__append"},[s.append?G(Sn,{key:"append-defaults",disabled:!vt,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var le;return[(le=s.append)==null?void 0:le.call(s,Me.value)]}}):Z(qt,null,[e.appendIcon&&G(Yn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&G(Ja,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),Z("div",{class:"v-list-item__spacer"},null)])]}}),[[aa,ae.value&&Se.value]])}),{activate:a,isActivated:b,isGroupActivator:I,isSelected:k,list:O,select:C,root:R,id:$,link:f}}}),PB=Ue({color:String,inset:Boolean,sticky:Boolean,title:String,...Ht(),...bn()},"VListSubheader"),Jd=ht()({name:"VListSubheader",props:PB(),setup(e,n){let{slots:r}=n;const{textColorClasses:s,textColorStyles:c}=Br(()=>e.color);return _t(()=>{const f=!!(r.default||e.title);return G(e.tag,{class:gt(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},s.value,e.class]),style:zt([{textColorStyles:c},e.style])},{default:()=>{var d;return[f&&Z("div",{class:"v-list-subheader__text"},[((d=r.default)==null?void 0:d.call(r))??e.title])]}})}),{}}}),IB=Ue({items:Array,returnObject:Boolean},"VListChildren"),_P=ht()({name:"VListChildren",props:IB(),setup(e,n){let{slots:r}=n;return oP(),()=>{var s,c;return((s=r.default)==null?void 0:s.call(r))??((c=e.items)==null?void 0:c.map(f=>{var A,I;let{children:d,props:a,type:b,raw:C}=f;if(b==="divider")return((A=r.divider)==null?void 0:A.call(r,{props:a}))??G($a,a,null);if(b==="subheader")return((I=r.subheader)==null?void 0:I.call(r,{props:a}))??G(Jd,a,null);const w={subtitle:r.subtitle?R=>{var F;return(F=r.subtitle)==null?void 0:F.call(r,{...R,item:C})}:void 0,prepend:r.prepend?R=>{var F;return(F=r.prepend)==null?void 0:F.call(r,{...R,item:C})}:void 0,append:r.append?R=>{var F;return(F=r.append)==null?void 0:F.call(r,{...R,item:C})}:void 0,title:r.title?R=>{var F;return(F=r.title)==null?void 0:F.call(r,{...R,item:C})}:void 0},k=tm.filterProps(a);return d?G(tm,lt(k,{value:e.returnObject?C:a==null?void 0:a.value,rawId:a==null?void 0:a.value}),{activator:R=>{let{props:F}=R;const B={...a,...F,value:e.returnObject?C:a.value};return r.header?r.header({props:B}):G(ys,B,w)},default:()=>G(_P,{items:d,returnObject:e.returnObject},r)}):r.item?r.item({props:a}):G(ys,lt(a,{value:e.returnObject?C:a.value}),w)}))}}}),bP=Ue({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items");function bl(e,n){const r=Wi(n,e.itemTitle,n),s=Wi(n,e.itemValue,r),c=Wi(n,e.itemChildren),f=Wi(n,e.itemType,"item"),d=e.itemProps===!0?typeof n=="object"&&n!=null&&!Array.isArray(n)?"children"in n?hi(n,["children"]):n:void 0:Wi(n,e.itemProps),a={title:r,value:s,...d};return{type:f,title:String(a.title??""),value:a.value,props:a,children:f==="item"&&Array.isArray(c)?xP(e,c):void 0,raw:n}}function xP(e,n){const r=Io(e,["itemTitle","itemValue","itemChildren","itemProps","itemType","returnObject","valueComparator"]),s=[];for(const c of n)s.push(bl(r,c));return s}function w0(e){const n=ee(()=>xP(e,e.items)),r=ee(()=>n.value.some(a=>a.value===null)),s=Mt(new Map),c=Mt([]);Ri(()=>{const a=n.value,b=new Map,C=[];for(let w=0;w<a.length;w++){const k=a[w];if(P_(k.value)||k.value===null){let A=b.get(k.value);A||(A=[],b.set(k.value,A)),A.push(k)}else C.push(k)}s.value=b,c.value=C});function f(a){const b=s.value,C=n.value,w=c.value,k=r.value,A=e.returnObject,I=!!e.valueComparator,R=e.valueComparator||Lr,F=Io(e,["itemTitle","itemValue","itemChildren","itemProps","itemType","returnObject","valueComparator"]),B=[];e:for(const $ of a){if(!k&&$===null)continue;if(A&&typeof $=="string"){B.push(bl(F,$));continue}const O=b.get($);if(I||!O){for(const q of I?C:w)if(R($,q.value)){B.push(q);continue e}B.push(bl(F,$));continue}B.push(...O)}return B}function d(a){return e.returnObject?a.map(b=>{let{raw:C}=b;return C}):a.map(b=>{let{value:C}=b;return C})}return{items:n,transformIn:f,transformOut:d}}function AB(e,n){const r=Wi(n,e.itemType,"item"),s=P_(n)?n:Wi(n,e.itemTitle),c=P_(n)?n:Wi(n,e.itemValue,void 0),f=Wi(n,e.itemChildren),d=e.itemProps===!0?hi(n,["children"]):Wi(n,e.itemProps),a={title:s,value:c,...d};return{type:r,title:a.title,value:a.value,props:a,children:r==="item"&&f?wP(e,f):void 0,raw:n}}function wP(e,n){const r=[];for(const s of n)r.push(AB(e,s));return r}function SP(e){return{items:ee(()=>wP(e,e.items))}}const CP=Ue({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:tn,collapseIcon:tn,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":zr(),"onClick:select":zr(),"onUpdate:opened":zr(),...wB({selectStrategy:"single-leaf",openStrategy:"list"}),..._a(),...Ht(),...mr(),...Zi(),...ir(),...bP(),...yi(),...bn(),...Un(),...es({variant:"text"})},"VList"),Od=ht()({name:"VList",props:CP(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:r}=n;const{items:s}=SP(e),{themeClasses:c}=Xn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{borderClasses:a}=Pa(e),{densityClasses:b}=sa(e),{dimensionStyles:C}=Ki(e),{elevationClasses:w}=kr(e),{roundedClasses:k}=Bi(e),{children:A,open:I,parents:R,select:F,getPath:B}=SB(e),$=Ee(()=>e.lines?`v-list--${e.lines}-line`:void 0),O=Ee(()=>e.activeColor),q=Ee(()=>e.baseColor),X=Ee(()=>e.color);oP({filterable:e.filterable}),Li({VListGroup:{activeColor:O,baseColor:q,color:X,expandIcon:Ee(()=>e.expandIcon),collapseIcon:Ee(()=>e.collapseIcon)},VListItem:{activeClass:Ee(()=>e.activeClass),activeColor:O,baseColor:q,color:X,density:Ee(()=>e.density),disabled:Ee(()=>e.disabled),lines:Ee(()=>e.lines),nav:Ee(()=>e.nav),slim:Ee(()=>e.slim),variant:Ee(()=>e.variant)}});const te=Mt(!1),ae=tt();function ue(be){te.value=!0}function ce(be){te.value=!1}function fe(be){var je;!te.value&&!(be.relatedTarget&&((je=ae.value)!=null&&je.contains(be.relatedTarget)))&&re()}function pe(be){const je=be.target;if(!(!ae.value||["INPUT","TEXTAREA"].includes(je.tagName))){if(be.key==="ArrowDown")re("next");else if(be.key==="ArrowUp")re("prev");else if(be.key==="Home")re("first");else if(be.key==="End")re("last");else return;be.preventDefault()}}function _e(be){te.value=!0}function re(be){if(ae.value)return $u(ae.value,be)}return _t(()=>G(e.tag,{ref:ae,class:gt(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},c.value,f.value,a.value,b.value,w.value,$.value,k.value,e.class]),style:zt([d.value,C.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:ue,onFocusout:ce,onFocus:fe,onKeydown:pe,onMousedown:_e},{default:()=>[G(_P,{items:s.value,returnObject:e.returnObject},r)]})),{open:I,select:F,focus:re,children:A,parents:R,getPath:B}}}),EB=Ao("v-list-img"),MB=Ue({start:Boolean,end:Boolean,...Ht(),...bn()},"VListItemAction"),TP=ht()({name:"VListItemAction",props:MB(),setup(e,n){let{slots:r}=n;return _t(()=>G(e.tag,{class:gt(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:zt(e.style)},r)),{}}}),DB=Ue({start:Boolean,end:Boolean,...Ht(),...bn()},"VListItemMedia"),RB=ht()({name:"VListItemMedia",props:DB(),setup(e,n){let{slots:r}=n;return _t(()=>G(e.tag,{class:gt(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:zt(e.style)},r)),{}}});function Jy(e,n){return{x:e.x+n.x,y:e.y+n.y}}function LB(e,n){return{x:e.x-n.x,y:e.y-n.y}}function pS(e,n){if(e.side==="top"||e.side==="bottom"){const{side:r,align:s}=e,c=s==="left"?0:s==="center"?n.width/2:s==="right"?n.width:s,f=r==="top"?0:r==="bottom"?n.height:r;return Jy({x:c,y:f},n)}else if(e.side==="left"||e.side==="right"){const{side:r,align:s}=e,c=r==="left"?0:r==="right"?n.width:r,f=s==="top"?0:s==="center"?n.height/2:s==="bottom"?n.height:s;return Jy({x:c,y:f},n)}return Jy({x:n.width/2,y:n.height/2},n)}const kP={static:VB,connected:FB},zB=Ue({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in kP},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function BB(e,n){const r=tt({}),s=tt();Kn&&ra(()=>!!(n.isActive.value&&e.locationStrategy),a=>{var b,C;Bt(()=>e.locationStrategy,a),fr(()=>{window.removeEventListener("resize",c),visualViewport==null||visualViewport.removeEventListener("resize",f),visualViewport==null||visualViewport.removeEventListener("scroll",d),s.value=void 0}),window.addEventListener("resize",c,{passive:!0}),visualViewport==null||visualViewport.addEventListener("resize",f,{passive:!0}),visualViewport==null||visualViewport.addEventListener("scroll",d,{passive:!0}),typeof e.locationStrategy=="function"?s.value=(b=e.locationStrategy(n,e,r))==null?void 0:b.updateLocation:s.value=(C=kP[e.locationStrategy](n,e,r))==null?void 0:C.updateLocation});function c(a){var b;(b=s.value)==null||b.call(s,a)}function f(a){var b;(b=s.value)==null||b.call(s,a)}function d(a){var b;(b=s.value)==null||b.call(s,a)}return{contentStyles:r,updateLocation:s}}function VB(){}function OB(e,n){const r=t0(e);return n?r.x+=parseFloat(e.style.right||0):r.x-=parseFloat(e.style.left||0),r.y-=parseFloat(e.style.top||0),r}function FB(e,n,r){(Array.isArray(e.target.value)||UR(e.target.value))&&Object.assign(r.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:c,preferredOrigin:f}=e0(()=>{const $=A_(n.location,e.isRtl.value),O=n.origin==="overlap"?$:n.origin==="auto"?Gy($):A_(n.origin,e.isRtl.value);return $.side===O.side&&$.align===qy(O).align?{preferredAnchor:z1($),preferredOrigin:z1(O)}:{preferredAnchor:$,preferredOrigin:O}}),[d,a,b,C]=["minWidth","minHeight","maxWidth","maxHeight"].map($=>ee(()=>{const O=parseFloat(n[$]);return isNaN(O)?1/0:O})),w=ee(()=>{if(Array.isArray(n.offset))return n.offset;if(typeof n.offset=="string"){const $=n.offset.split(" ").map(parseFloat);return $.length<2&&$.push(0),$}return typeof n.offset=="number"?[n.offset,0]:[0,0]});let k=!1,A=-1;const I=new JT(4),R=new ResizeObserver(()=>{if(!k)return;if(requestAnimationFrame(O=>{O!==A&&I.clear(),requestAnimationFrame(q=>{A=q})}),I.isFull){const O=I.values();if(Lr(O.at(-1),O.at(-3))&&!Lr(O.at(-1),O.at(-2)))return}const $=B();$&&I.push($.flipped)});Bt([e.target,e.contentEl],($,O)=>{let[q,X]=$,[te,ae]=O;te&&!Array.isArray(te)&&R.unobserve(te),q&&!Array.isArray(q)&&R.observe(q),ae&&R.unobserve(ae),X&&R.observe(X)},{immediate:!0}),fr(()=>{R.disconnect()});let F=new Ns({x:0,y:0,width:0,height:0});function B(){if(k=!1,requestAnimationFrame(()=>k=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(F=ik(e.target.value));const $=OB(e.contentEl.value,e.isRtl.value),O=yg(e.contentEl.value),q=12;O.length||(O.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||($.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),$.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const X=O.reduce((be,je)=>{const Be=dR(je);return be?new Ns({x:Math.max(be.left,Be.left),y:Math.max(be.top,Be.top),width:Math.min(be.right,Be.right)-Math.max(be.left,Be.left),height:Math.min(be.bottom,Be.bottom)-Math.max(be.top,Be.top)}):Be},void 0);X.x+=q,X.y+=q,X.width-=q*2,X.height-=q*2;let te={anchor:c.value,origin:f.value};function ae(be){const je=new Ns($),Be=pS(be.anchor,F),Fe=pS(be.origin,je);let{x:Ke,y:ft}=LB(Be,Fe);switch(be.anchor.side){case"top":ft-=w.value[0];break;case"bottom":ft+=w.value[0];break;case"left":Ke-=w.value[0];break;case"right":Ke+=w.value[0];break}switch(be.anchor.align){case"top":ft-=w.value[1];break;case"bottom":ft+=w.value[1];break;case"left":Ke-=w.value[1];break;case"right":Ke+=w.value[1];break}return je.x+=Ke,je.y+=ft,je.width=Math.min(je.width,b.value),je.height=Math.min(je.height,C.value),{overflows:V1(je,X),x:Ke,y:ft}}let ue=0,ce=0;const fe={x:0,y:0},pe={x:!1,y:!1};let _e=-1;for(;!(_e++>10);){const{x:be,y:je,overflows:Be}=ae(te);ue+=be,ce+=je,$.x+=be,$.y+=je;{const Fe=B1(te.anchor),Ke=Be.x.before||Be.x.after,ft=Be.y.before||Be.y.after;let mt=!1;if(["x","y"].forEach(ze=>{if(ze==="x"&&Ke&&!pe.x||ze==="y"&&ft&&!pe.y){const Se={anchor:{...te.anchor},origin:{...te.origin}},Me=ze==="x"?Fe==="y"?qy:Gy:Fe==="y"?Gy:qy;Se.anchor=Me(Se.anchor),Se.origin=Me(Se.origin);const{overflows:Qe}=ae(Se);(Qe[ze].before<=Be[ze].before&&Qe[ze].after<=Be[ze].after||Qe[ze].before+Qe[ze].after<(Be[ze].before+Be[ze].after)/2)&&(te=Se,mt=pe[ze]=!0)}}),mt)continue}Be.x.before&&(ue+=Be.x.before,$.x+=Be.x.before),Be.x.after&&(ue-=Be.x.after,$.x-=Be.x.after),Be.y.before&&(ce+=Be.y.before,$.y+=Be.y.before),Be.y.after&&(ce-=Be.y.after,$.y-=Be.y.after);{const Fe=V1($,X);fe.x=X.width-Fe.x.before-Fe.x.after,fe.y=X.height-Fe.y.before-Fe.y.after,ue+=Fe.x.before,$.x+=Fe.x.before,ce+=Fe.y.before,$.y+=Fe.y.before}break}const re=B1(te.anchor);return Object.assign(r.value,{"--v-overlay-anchor-origin":`${te.anchor.side} ${te.anchor.align}`,transformOrigin:`${te.origin.side} ${te.origin.align}`,top:Nt(Qy(ce)),left:e.isRtl.value?void 0:Nt(Qy(ue)),right:e.isRtl.value?Nt(Qy(-ue)):void 0,minWidth:Nt(re==="y"?Math.min(d.value,F.width):d.value),maxWidth:Nt(gS(di(fe.x,d.value===1/0?0:d.value,b.value))),maxHeight:Nt(gS(di(fe.y,a.value===1/0?0:a.value,C.value)))}),{available:fe,contentBox:$,flipped:pe}}return Bt(()=>[c.value,f.value,n.offset,n.minWidth,n.minHeight,n.maxWidth,n.maxHeight],()=>B()),Dn(()=>{const $=B();if(!$)return;const{available:O,contentBox:q}=$;q.height>O.y&&requestAnimationFrame(()=>{B(),requestAnimationFrame(()=>{B()})})}),{updateLocation:B}}function Qy(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function gS(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let H_=!0;const wg=[];function $B(e){!H_||wg.length?(wg.push(e),W_()):(H_=!1,e(),W_())}let vS=-1;function W_(){cancelAnimationFrame(vS),vS=requestAnimationFrame(()=>{const e=wg.shift();e&&e(),wg.length?W_():H_=!0})}const rg={none:null,close:UB,block:GB,reposition:qB},jB=Ue({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in rg}},"VOverlay-scroll-strategies");function NB(e,n){if(!Kn)return;let r;Ri(async()=>{r==null||r.stop(),n.isActive.value&&e.scrollStrategy&&(r=Dd(),await new Promise(s=>setTimeout(s)),r.active&&r.run(()=>{var s;typeof e.scrollStrategy=="function"?e.scrollStrategy(n,e,r):(s=rg[e.scrollStrategy])==null||s.call(rg,n,e,r)}))}),fr(()=>{r==null||r.stop()})}function UB(e){function n(r){e.isActive.value=!1}PP(e.targetEl.value??e.contentEl.value,n)}function GB(e,n){var d;const r=(d=e.root.value)==null?void 0:d.offsetParent,s=[...new Set([...yg(e.targetEl.value,n.contained?r:void 0),...yg(e.contentEl.value,n.contained?r:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),c=window.innerWidth-document.documentElement.offsetWidth,f=(a=>s0(a)&&a)(r||document.documentElement);f&&e.root.value.classList.add("v-overlay--scroll-blocked"),s.forEach((a,b)=>{a.style.setProperty("--v-body-scroll-x",Nt(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",Nt(-a.scrollTop)),a!==document.documentElement&&a.style.setProperty("--v-scrollbar-offset",Nt(c)),a.classList.add("v-overlay-scroll-blocked")}),fr(()=>{s.forEach((a,b)=>{const C=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),w=parseFloat(a.style.getPropertyValue("--v-body-scroll-y")),k=a.style.scrollBehavior;a.style.scrollBehavior="auto",a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-C,a.scrollTop=-w,a.style.scrollBehavior=k}),f&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function qB(e,n,r){let s=!1,c=-1,f=-1;function d(a){$B(()=>{var w,k;const b=performance.now();(k=(w=e.updateLocation).value)==null||k.call(w,a),s=(performance.now()-b)/(1e3/60)>2})}f=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{r.run(()=>{PP(e.targetEl.value??e.contentEl.value,a=>{s?(cancelAnimationFrame(c),c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{d(a)})})):d(a)})})}),fr(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(f),cancelAnimationFrame(c)})}function PP(e,n){const r=[document,...yg(e)];r.forEach(s=>{s.addEventListener("scroll",n,{passive:!0})}),fr(()=>{r.forEach(s=>{s.removeEventListener("scroll",n)})})}const Z_=Symbol.for("vuetify:v-menu"),S0=Ue({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function C0(e,n){let r=()=>{};function s(d){r==null||r();const a=Number(d?e.openDelay:e.closeDelay);return new Promise(b=>{r=aR(a,()=>{n==null||n(d),b(d)})})}function c(){return s(!0)}function f(){return s(!1)}return{clearDelay:r,runOpenDelay:c,runCloseDelay:f}}const HB=Ue({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...S0()},"VOverlay-activator");function WB(e,n){let{isActive:r,isTop:s,contentEl:c}=n;const f=ji("useActivator"),d=tt();let a=!1,b=!1,C=!0;const w=ee(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),k=ee(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!w.value),{runOpenDelay:A,runCloseDelay:I}=C0(e,ce=>{ce===(e.openOnHover&&a||w.value&&b)&&!(e.openOnHover&&r.value&&!s.value)&&(r.value!==ce&&(C=!0),r.value=ce)}),R=tt(),F={onClick:ce=>{ce.stopPropagation(),d.value=ce.currentTarget||ce.target,r.value||(R.value=[ce.clientX,ce.clientY]),r.value=!r.value},onMouseenter:ce=>{var fe;(fe=ce.sourceCapabilities)!=null&&fe.firesTouchEvents||(a=!0,d.value=ce.currentTarget||ce.target,A())},onMouseleave:ce=>{a=!1,I()},onFocus:ce=>{Ld(ce.target,":focus-visible")!==!1&&(b=!0,ce.stopPropagation(),d.value=ce.currentTarget||ce.target,A())},onBlur:ce=>{b=!1,ce.stopPropagation(),I()}},B=ee(()=>{const ce={};return k.value&&(ce.onClick=F.onClick),e.openOnHover&&(ce.onMouseenter=F.onMouseenter,ce.onMouseleave=F.onMouseleave),w.value&&(ce.onFocus=F.onFocus,ce.onBlur=F.onBlur),ce}),$=ee(()=>{const ce={};if(e.openOnHover&&(ce.onMouseenter=()=>{a=!0,A()},ce.onMouseleave=()=>{a=!1,I()}),w.value&&(ce.onFocusin=()=>{b=!0,A()},ce.onFocusout=()=>{b=!1,I()}),e.closeOnContentClick){const fe=_n(Z_,null);ce.onClick=()=>{r.value=!1,fe==null||fe.closeParents()}}return ce}),O=ee(()=>{const ce={};return e.openOnHover&&(ce.onMouseenter=()=>{C&&(a=!0,C=!1,A())},ce.onMouseleave=()=>{a=!1,I()}),ce});Bt(s,ce=>{var fe;ce&&(e.openOnHover&&!a&&(!w.value||!b)||w.value&&!b&&(!e.openOnHover||!a))&&!((fe=c.value)!=null&&fe.contains(document.activeElement))&&(r.value=!1)}),Bt(r,ce=>{ce||setTimeout(()=>{R.value=void 0})},{flush:"post"});const q=gg();Ri(()=>{q.value&&Dn(()=>{d.value=q.el})});const X=gg(),te=ee(()=>e.target==="cursor"&&R.value?R.value:X.value?X.el:IP(e.target,f)||d.value),ae=ee(()=>Array.isArray(te.value)?void 0:te.value);let ue;return Bt(()=>!!e.activator,ce=>{ce&&Kn?(ue=Dd(),ue.run(()=>{ZB(e,f,{activatorEl:d,activatorEvents:B})})):ue&&ue.stop()},{flush:"post",immediate:!0}),fr(()=>{ue==null||ue.stop()}),{activatorEl:d,activatorRef:q,target:te,targetEl:ae,targetRef:X,activatorEvents:B,contentEvents:$,scrimEvents:O}}function ZB(e,n,r){let{activatorEl:s,activatorEvents:c}=r;Bt(()=>e.activator,(b,C)=>{if(C&&b!==C){const w=a(C);w&&d(w)}b&&Dn(()=>f())},{immediate:!0}),Bt(()=>e.activatorProps,()=>{f()}),fr(()=>{d()});function f(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&hR(b,lt(c.value,C))}function d(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&fR(b,lt(c.value,C))}function a(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const C=IP(b,n);return s.value=(C==null?void 0:C.nodeType)===Node.ELEMENT_NODE?C:void 0,s.value}}function IP(e,n){var s,c;if(!e)return;let r;if(e==="parent"){let f=(c=(s=n==null?void 0:n.proxy)==null?void 0:s.$el)==null?void 0:c.parentNode;for(;f!=null&&f.hasAttribute("data-no-activator");)f=f.parentNode;r=f}else typeof e=="string"?r=document.querySelector(e):"$el"in e?r=e.$el:r=e;return r}function AP(){if(!Kn)return Mt(!1);const{ssr:e}=Qa();if(e){const n=Mt(!1);return zi(()=>{n.value=!0}),n}else return Mt(!0)}const T0=Ue({eager:Boolean},"lazy");function k0(e,n){const r=Mt(!1),s=Ee(()=>r.value||e.eager||n.value);Bt(n,()=>r.value=!0);function c(){e.eager||(r.value=!1)}return{isBooted:r,hasContent:s,onAfterLeave:c}}function oc(){const n=ji("useScopeId").vnode.scopeId;return{scopeId:n?{[n]:""}:void 0}}const yS=Symbol.for("vuetify:stack"),vf=Sr([]);function KB(e,n,r){const s=ji("useStack"),c=!r,f=_n(yS,void 0),d=Sr({activeChildren:new Set});ri(yS,d);const a=Mt(Number(Us(n)));ra(e,()=>{var k;const w=(k=vf.at(-1))==null?void 0:k[1];a.value=w?w+10:Number(Us(n)),c&&vf.push([s.uid,a.value]),f==null||f.activeChildren.add(s.uid),fr(()=>{if(c){const A=dn(vf).findIndex(I=>I[0]===s.uid);vf.splice(A,1)}f==null||f.activeChildren.delete(s.uid)})});const b=Mt(!0);c&&Ri(()=>{var k;const w=((k=vf.at(-1))==null?void 0:k[0])===s.uid;setTimeout(()=>b.value=w)});const C=Ee(()=>!d.activeChildren.size);return{globalTop:Gd(b),localTop:C,stackStyles:Ee(()=>({zIndex:a.value}))}}function YB(e){return{teleportTarget:ee(()=>{const r=e();if(r===!0||!Kn)return;const s=r===!1?document.body:typeof r=="string"?document.querySelector(r):r;if(s==null)return;let c=[...s.children].find(f=>f.matches(".v-overlay-container"));return c||(c=document.createElement("div"),c.className="v-overlay-container",s.appendChild(c)),c})}}function XB(){return!0}function EP(e,n,r){if(!e||MP(e,r)===!1)return!1;const s=mk(n);if(typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&s.host===e.target)return!1;const c=(typeof r.value=="object"&&r.value.include||(()=>[]))();return c.push(n),!c.some(f=>f==null?void 0:f.contains(e.target))}function MP(e,n){return(typeof n.value=="object"&&n.value.closeConditional||XB)(e)}function JB(e,n,r){const s=typeof r.value=="function"?r.value:r.value.handler;e.shadowTarget=e.target,n._clickOutside.lastMousedownWasOutside&&EP(e,n,r)&&setTimeout(()=>{MP(e,r)&&s&&s(e)},0)}function _S(e,n){const r=mk(e);n(document),typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&n(r)}const K_={mounted(e,n){const r=c=>JB(c,e,n),s=c=>{e._clickOutside.lastMousedownWasOutside=EP(c,e,n)};_S(e,c=>{c.addEventListener("click",r,!0),c.addEventListener("mousedown",s,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[n.instance.$.uid]={onClick:r,onMousedown:s}},beforeUnmount(e,n){e._clickOutside&&(_S(e,r=>{var f;if(!r||!((f=e._clickOutside)!=null&&f[n.instance.$.uid]))return;const{onClick:s,onMousedown:c}=e._clickOutside[n.instance.$.uid];r.removeEventListener("click",s,!0),r.removeEventListener("mousedown",c,!0)}),delete e._clickOutside[n.instance.$.uid])}};function QB(e){const{modelValue:n,color:r,...s}=e;return G(kl,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&Z("div",lt({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},s),null)]})}const xm=Ue({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...HB(),...Ht(),...Zi(),...T0(),...zB(),...jB(),...Un(),...ws()},"VOverlay"),Hs=ht()({name:"VOverlay",directives:{vClickOutside:K_},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...xm()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{slots:r,attrs:s,emit:c}=n;const f=ji("VOverlay"),d=tt(),a=tt(),b=tt(),C=Qt(e,"modelValue"),w=ee({get:()=>C.value,set:Re=>{Re&&e.disabled||(C.value=Re)}}),{themeClasses:k}=Xn(e),{rtlClasses:A,isRtl:I}=nr(),{hasContent:R,onAfterLeave:F}=k0(e,w),B=ti(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:$,localTop:O,stackStyles:q}=KB(w,()=>e.zIndex,e._disableGlobalStack),{activatorEl:X,activatorRef:te,target:ae,targetEl:ue,targetRef:ce,activatorEvents:fe,contentEvents:pe,scrimEvents:_e}=WB(e,{isActive:w,isTop:O,contentEl:b}),{teleportTarget:re}=YB(()=>{var st,Ye,St;const Re=e.attach||e.contained;if(Re)return Re;const vt=((st=X==null?void 0:X.value)==null?void 0:st.getRootNode())||((St=(Ye=f.proxy)==null?void 0:Ye.$el)==null?void 0:St.getRootNode());return vt instanceof ShadowRoot?vt:!1}),{dimensionStyles:be}=Ki(e),je=AP(),{scopeId:Be}=oc();Bt(()=>e.disabled,Re=>{Re&&(w.value=!1)});const{contentStyles:Fe,updateLocation:Ke}=BB(e,{isRtl:I,contentEl:b,target:ae,isActive:w});NB(e,{root:d,contentEl:b,targetEl:ue,isActive:w,updateLocation:Ke});function ft(Re){c("click:outside",Re),e.persistent?Ft():w.value=!1}function mt(Re){return w.value&&$.value&&(!e.scrim||Re.target===a.value||Re instanceof MouseEvent&&Re.shadowTarget===a.value)}Kn&&Bt(w,Re=>{Re?window.addEventListener("keydown",ze):window.removeEventListener("keydown",ze)},{immediate:!0}),Vr(()=>{Kn&&window.removeEventListener("keydown",ze)});function ze(Re){var vt,st,Ye;Re.key==="Escape"&&$.value&&((vt=b.value)!=null&&vt.contains(document.activeElement)||c("keydown",Re),e.persistent?Ft():(w.value=!1,(st=b.value)!=null&&st.contains(document.activeElement)&&((Ye=X.value)==null||Ye.focus())))}function Se(Re){Re.key==="Escape"&&!$.value||c("keydown",Re)}const Me=$k();ra(()=>e.closeOnBack,()=>{Bz(Me,Re=>{$.value&&w.value?(Re(!1),e.persistent?Ft():w.value=!1):Re()})});const Qe=tt();Bt(()=>w.value&&(e.absolute||e.contained)&&re.value==null,Re=>{if(Re){const vt=a0(d.value);vt&&vt!==document.scrollingElement&&(Qe.value=vt.scrollTop)}});function Ft(){e.noClickAnimation||b.value&&Bu(b.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Hf})}function Tt(){c("afterEnter")}function xt(){F(),c("afterLeave")}return _t(()=>{var Re;return Z(qt,null,[(Re=r.activator)==null?void 0:Re.call(r,{isActive:w.value,targetRef:ce,props:lt({ref:te},fe.value,e.activatorProps)}),je.value&&R.value&&G(wM,{disabled:!re.value,to:re.value},{default:()=>[Z("div",lt({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":w.value,"v-overlay--contained":e.contained},k.value,A.value,e.class],style:[q.value,{"--v-overlay-opacity":e.opacity,top:Nt(Qe.value)},e.style],ref:d,onKeydown:Se},Be,s),[G(QB,lt({color:B,modelValue:w.value&&!!e.scrim,ref:a},_e.value),null),G(ia,{appear:!0,persisted:!0,transition:e.transition,target:ae.value,onAfterEnter:Tt,onAfterLeave:xt},{default:()=>{var vt;return[ei(Z("div",lt({ref:b,class:["v-overlay__content",e.contentClass],style:[be.value,Fe.value]},pe.value,e.contentProps),[(vt=r.default)==null?void 0:vt.call(r,{isActive:w})]),[[xs,w.value],[K_,{handler:ft,closeConditional:mt,include:()=>[X.value]}]])]}})])]})])}),{activatorEl:X,scrimEl:a,target:ae,animateClick:Ft,contentEl:b,globalTop:$,localTop:O,updateLocation:Ke}}}),DP=Ue({id:String,submenu:Boolean,disableInitialFocus:Boolean,...hi(xm({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Gg}}),["absolute"])},"VMenu"),Fd=ht()({name:"VMenu",props:DP(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),{scopeId:c}=oc(),{isRtl:f}=nr(),d=ya(),a=Ee(()=>e.id||`v-menu-${d}`),b=tt(),C=_n(Z_,null),w=Mt(new Set);ri(Z_,{register(){w.value.add(d)},unregister(){w.value.delete(d)},closeParents(B){setTimeout(()=>{var $;!w.value.size&&!e.persistent&&(B==null||($=b.value)!=null&&$.contentEl&&!sR(B,b.value.contentEl))&&(s.value=!1,C==null||C.closeParents())},40)}}),Vr(()=>{C==null||C.unregister(),document.removeEventListener("focusin",k)}),Nb(()=>s.value=!1);async function k(B){var q,X,te;const $=B.relatedTarget,O=B.target;await Dn(),s.value&&$!==O&&((q=b.value)!=null&&q.contentEl)&&((X=b.value)!=null&&X.globalTop)&&![document,b.value.contentEl].includes(O)&&!b.value.contentEl.contains(O)&&((te=qf(b.value.contentEl)[0])==null||te.focus())}Bt(s,B=>{B?(C==null||C.register(),Kn&&!e.disableInitialFocus&&document.addEventListener("focusin",k,{once:!0})):(C==null||C.unregister(),Kn&&document.removeEventListener("focusin",k))},{immediate:!0});function A(B){C==null||C.closeParents(B)}function I(B){var $,O,q,X,te;if(!e.disabled)if(B.key==="Tab"||B.key==="Enter"&&!e.closeOnContentClick){if(B.key==="Enter"&&(B.target instanceof HTMLTextAreaElement||B.target instanceof HTMLInputElement&&B.target.closest("form")))return;B.key==="Enter"&&B.preventDefault(),ek(qf(($=b.value)==null?void 0:$.contentEl,!1),B.shiftKey?"prev":"next",ue=>ue.tabIndex>=0)||(s.value=!1,(q=(O=b.value)==null?void 0:O.activatorEl)==null||q.focus())}else e.submenu&&B.key===(f.value?"ArrowRight":"ArrowLeft")&&(s.value=!1,(te=(X=b.value)==null?void 0:X.activatorEl)==null||te.focus())}function R(B){var O;if(e.disabled)return;const $=(O=b.value)==null?void 0:O.contentEl;$&&s.value?B.key==="ArrowDown"?(B.preventDefault(),B.stopImmediatePropagation(),$u($,"next")):B.key==="ArrowUp"?(B.preventDefault(),B.stopImmediatePropagation(),$u($,"prev")):e.submenu&&(B.key===(f.value?"ArrowRight":"ArrowLeft")?s.value=!1:B.key===(f.value?"ArrowLeft":"ArrowRight")&&(B.preventDefault(),$u($,"first"))):(e.submenu?B.key===(f.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(B.key))&&(s.value=!0,B.preventDefault(),setTimeout(()=>setTimeout(()=>R(B))))}const F=ee(()=>lt({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-controls":a.value,onKeydown:R},e.activatorProps));return _t(()=>{const B=Hs.filterProps(e);return G(Hs,lt({ref:b,id:a.value,class:["v-menu",e.class],style:e.style},B,{modelValue:s.value,"onUpdate:modelValue":$=>s.value=$,absolute:!0,activatorProps:F.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":A,onKeydown:I},c),{activator:r.activator,default:function(){for(var $=arguments.length,O=new Array($),q=0;q<$;q++)O[q]=arguments[q];return G(Sn,{root:"VMenu"},{default:()=>{var X;return[(X=r.default)==null?void 0:X.call(r,...O)]}})}})}),Pr({id:a,openChildren:w},b)}}),eV=Ue({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ht(),...ws({transition:{component:m0}})},"VCounter"),Yg=ht()({name:"VCounter",functional:!0,props:eV(),setup(e,n){let{slots:r}=n;const s=Ee(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return _t(()=>G(ia,{transition:e.transition},{default:()=>[ei(Z("div",{class:gt(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:zt(e.style)},[r.default?r.default({counter:s.value,max:e.max,value:e.value}):s.value]),[[xs,e.active]])]})),{}}}),tV=Ue({floating:Boolean,...Ht()},"VFieldLabel"),wf=ht()({name:"VFieldLabel",props:tV(),setup(e,n){let{slots:r}=n;return _t(()=>G(Yd,{class:gt(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:zt(e.style),"aria-hidden":e.floating||void 0},r)),{}}}),nV=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],wm=Ue({appendInnerIcon:tn,bgColor:String,clearable:Boolean,clearIcon:{type:tn,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:tn,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>nV.includes(e)},"onClick:clear":zr(),"onClick:appendInner":zr(),"onClick:prependInner":zr(),...Ht(),...Wg(),...yi(),...Un()},"VField"),Il=ht()({name:"VField",inheritAttrs:!1,props:{id:String,..._m(),...wm()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{themeClasses:f}=Xn(e),{loaderClasses:d}=pm(e),{focusClasses:a,isFocused:b,focus:C,blur:w}=Mo(e),{InputIcon:k}=Jk(e),{roundedClasses:A}=Bi(e),{rtlClasses:I}=nr(),R=Ee(()=>e.dirty||e.active),F=Ee(()=>!!(e.label||c.label)),B=Ee(()=>!e.singleLine&&F.value),$=ya(),O=ee(()=>e.id||`input-${$}`),q=Ee(()=>`${O.value}-messages`),X=tt(),te=tt(),ae=tt(),ue=ee(()=>["plain","underlined"].includes(e.variant)),ce=ee(()=>e.error||e.disabled?void 0:R.value&&b.value?e.color:e.baseColor),fe=ee(()=>{if(!(!e.iconColor||e.glow&&!b.value))return e.iconColor===!0?ce.value:e.iconColor}),{backgroundColorClasses:pe,backgroundColorStyles:_e}=ti(()=>e.bgColor),{textColorClasses:re,textColorStyles:be}=Br(ce);Bt(R,Fe=>{if(B.value){const Ke=X.value.$el,ft=te.value.$el;requestAnimationFrame(()=>{const mt=t0(Ke),ze=ft.getBoundingClientRect(),Se=ze.x-mt.x,Me=ze.y-mt.y-(mt.height/2-ze.height/2),Qe=ze.width/.75,Ft=Math.abs(Qe-mt.width)>1?{maxWidth:Nt(Qe)}:void 0,Tt=getComputedStyle(Ke),xt=getComputedStyle(ft),Re=parseFloat(Tt.transitionDuration)*1e3||150,vt=parseFloat(xt.getPropertyValue("--v-field-label-scale")),st=xt.getPropertyValue("color");Ke.style.visibility="visible",ft.style.visibility="hidden",Bu(Ke,{transform:`translate(${Se}px, ${Me}px) scale(${vt})`,color:st,...Ft},{duration:Re,easing:Hf,direction:Fe?"normal":"reverse"}).finished.then(()=>{Ke.style.removeProperty("visibility"),ft.style.removeProperty("visibility")})})}},{flush:"post"});const je=ee(()=>({isActive:R,isFocused:b,controlRef:ae,blur:w,focus:C}));function Be(Fe){Fe.target!==document.activeElement&&Fe.preventDefault()}return _t(()=>{var Se,Me,Qe;const Fe=e.variant==="outlined",Ke=!!(c["prepend-inner"]||e.prependInnerIcon),ft=!!(e.clearable||c.clear)&&!e.disabled,mt=!!(c["append-inner"]||e.appendInnerIcon||ft),ze=()=>c.label?c.label({...je.value,label:e.label,props:{for:O.value}}):e.label;return Z("div",lt({class:["v-field",{"v-field--active":R.value,"v-field--appended":mt,"v-field--center-affix":e.centerAffix??!ue.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Ke,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!ze(),[`v-field--variant-${e.variant}`]:!0},f.value,pe.value,a.value,d.value,A.value,I.value,e.class],style:[_e.value,e.style],onClick:Be},r),[Z("div",{class:"v-field__overlay"},null),G(gm,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:c.loader}),Ke&&Z("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&G(k,{key:"prepend-icon",name:"prependInner",color:fe.value},null),(Se=c["prepend-inner"])==null?void 0:Se.call(c,je.value)]),Z("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&B.value&&G(wf,{key:"floating-label",ref:te,class:gt([re.value]),floating:!0,for:O.value,style:zt(be.value)},{default:()=>[ze()]}),F.value&&G(wf,{key:"label",ref:X,for:O.value},{default:()=>[ze()]}),((Me=c.default)==null?void 0:Me.call(c,{...je.value,props:{id:O.value,class:"v-field__input","aria-describedby":q.value},focus:C,blur:w}))??Z("div",{id:O.value,class:"v-field__input","aria-describedby":q.value},null)]),ft&&G(p0,{key:"clear"},{default:()=>[ei(Z("div",{class:"v-field__clearable",onMousedown:Ft=>{Ft.preventDefault(),Ft.stopPropagation()}},[G(Sn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[c.clear?c.clear({...je.value,props:{onFocus:C,onBlur:w,onClick:e["onClick:clear"],tabindex:-1}}):G(k,{name:"clear",onFocus:C,onBlur:w,tabindex:-1},null)]})]),[[xs,e.dirty]])]}),mt&&Z("div",{key:"append",class:"v-field__append-inner"},[(Qe=c["append-inner"])==null?void 0:Qe.call(c,je.value),e.appendInnerIcon&&G(k,{key:"append-icon",name:"appendInner",color:fe.value},null)]),Z("div",{class:gt(["v-field__outline",re.value]),style:zt(be.value)},[Fe&&Z(qt,null,[Z("div",{class:"v-field__outline__start"},null),B.value&&Z("div",{class:"v-field__outline__notch"},[G(wf,{ref:te,floating:!0,for:O.value},{default:()=>[ze()]})]),Z("div",{class:"v-field__outline__end"},null)]),ue.value&&B.value&&G(wf,{ref:te,floating:!0,for:O.value},{default:()=>[ze()]})])])}),{controlRef:ae,fieldIconColor:fe}}});function RP(e){function n(r,s){var c,f;!e.autofocus||!r||(f=(c=s[0].target)==null?void 0:c.focus)==null||f.call(c)}return{onIntersect:n}}const iV=["color","file","time","date","datetime-local","week","month"],Sm=Ue({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Do(),...wm()},"VTextField"),ko=ht()({name:"VTextField",directives:{vIntersect:Co},inheritAttrs:!1,props:Sm(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const f=Qt(e,"modelValue"),{isFocused:d,focus:a,blur:b}=Mo(e),{onIntersect:C}=RP(e),w=ee(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:(f.value??"").toString().length),k=ee(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),A=ee(()=>["plain","underlined"].includes(e.variant)),I=tt(),R=tt(),F=tt(),B=ee(()=>iV.includes(e.type)||e.persistentPlaceholder||d.value||e.active);function $(){d.value||a(),Dn(()=>{F.value!==document.activeElement&&Dn(()=>{var ae;return(ae=F.value)==null?void 0:ae.focus()})})}function O(ae){s("mousedown:control",ae),ae.target!==F.value&&($(),ae.preventDefault())}function q(ae){s("click:control",ae)}function X(ae,ue){ae.stopPropagation(),$(),Dn(()=>{f.value=null,ue(),$g(e["onClick:clear"],ae)})}function te(ae){var ce;const ue=ae.target;if(f.value=ue.value,(ce=e.modelModifiers)!=null&&ce.trim&&["text","search","password","tel","url"].includes(e.type)){const fe=[ue.selectionStart,ue.selectionEnd];Dn(()=>{ue.selectionStart=fe[0],ue.selectionEnd=fe[1]})}}return _t(()=>{const ae=!!(c.counter||e.counter!==!1&&e.counter!=null),ue=!!(ae||c.details),[ce,fe]=El(r),{modelValue:pe,..._e}=Wr.filterProps(e),re=Il.filterProps(e);return G(Wr,lt({ref:I,modelValue:f.value,"onUpdate:modelValue":be=>f.value=be,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":A.value},e.class],style:e.style},ce,_e,{centerAffix:!A.value,focused:d.value}),{...c,default:be=>{let{id:je,isDisabled:Be,isDirty:Fe,isReadonly:Ke,isValid:ft,reset:mt}=be;return G(Il,lt({ref:R,onMousedown:O,onClick:q,"onClick:clear":ze=>X(ze,mt),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},re,{id:je.value,active:B.value||Fe.value,dirty:Fe.value||e.dirty,disabled:Be.value,focused:d.value,error:ft.value===!1}),{...c,default:ze=>{let{props:{class:Se,...Me}}=ze;const Qe=ei(Z("input",lt({ref:F,value:f.value,onInput:te,autofocus:e.autofocus,readonly:Ke.value,disabled:Be.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:$,onBlur:b},Me,fe),null),[[Co,{handler:C},null,{once:!0}]]);return Z(qt,null,[e.prefix&&Z("span",{class:"v-text-field__prefix"},[Z("span",{class:"v-text-field__prefix__text"},[e.prefix])]),c.default?Z("div",{class:gt(Se),"data-no-activator":""},[c.default(),Qe]):So(Qe,{class:Se}),e.suffix&&Z("span",{class:"v-text-field__suffix"},[Z("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:ue?be=>{var je;return Z(qt,null,[(je=c.details)==null?void 0:je.call(c,be),ae&&Z(qt,null,[Z("span",null,null),G(Yg,{active:e.persistentCounter||d.value,value:w.value,max:k.value,disabled:e.disabled},c.counter)])])}:void 0})}),Pr({},I,R,F)}}),rV=Ue({renderless:Boolean,...Ht()},"VVirtualScrollItem"),LP=ht()({name:"VVirtualScrollItem",inheritAttrs:!1,props:rV(),emits:{"update:height":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{resizeRef:f,contentRect:d}=vs(void 0,"border");Bt(()=>{var a;return(a=d.value)==null?void 0:a.height},a=>{a!=null&&s("update:height",a)}),_t(()=>{var a,b;return e.renderless?Z(qt,null,[(a=c.default)==null?void 0:a.call(c,{itemRef:f})]):Z("div",lt({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},r),[(b=c.default)==null?void 0:b.call(c)])})}}),aV=-1,sV=1,e_=100,zP=Ue({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function BP(e,n){const r=Qa(),s=Mt(0);Ri(()=>{s.value=parseFloat(e.itemHeight||0)});const c=Mt(0),f=Mt(Math.ceil((parseInt(e.height)||r.height.value)/(s.value||16))||1),d=Mt(0),a=Mt(0),b=tt(),C=tt();let w=0;const{resizeRef:k,contentRect:A}=vs();Ri(()=>{k.value=b.value});const I=ee(()=>{var ze;return b.value===document.documentElement?r.height.value:((ze=A.value)==null?void 0:ze.height)||parseInt(e.height)||0}),R=ee(()=>!!(b.value&&C.value&&I.value&&s.value));let F=Array.from({length:n.value.length}),B=Array.from({length:n.value.length});const $=Mt(0);let O=-1;function q(ze){return F[ze]||s.value}const X=YT(()=>{const ze=performance.now();B[0]=0;const Se=n.value.length;for(let Me=1;Me<=Se-1;Me++)B[Me]=(B[Me-1]||0)+q(Me-1);$.value=Math.max($.value,performance.now()-ze)},$),te=Bt(R,ze=>{ze&&(te(),w=C.value.offsetTop,X.immediate(),Fe(),~O&&Dn(()=>{Kn&&window.requestAnimationFrame(()=>{ft(O),O=-1})}))});fr(()=>{X.clear()});function ae(ze,Se){const Me=F[ze],Qe=s.value;s.value=Qe?Math.min(s.value,Se):Se,(Me!==Se||Qe!==s.value)&&(F[ze]=Se,X())}function ue(ze){ze=di(ze,0,n.value.length-1);const Se=Math.floor(ze),Me=ze%1,Qe=Se+1,Ft=B[Se]||0,Tt=B[Qe]||Ft;return Ft+(Tt-Ft)*Me}function ce(ze){return oV(B,ze)}let fe=0,pe=0,_e=0;Bt(I,(ze,Se)=>{Se&&(Fe(),ze<Se&&requestAnimationFrame(()=>{pe=0,Fe()}))});let re=-1;function be(){if(!b.value||!C.value)return;const ze=b.value.scrollTop,Se=performance.now();Se-_e>500?(pe=Math.sign(ze-fe),w=C.value.offsetTop):pe=ze-fe,fe=ze,_e=Se,window.clearTimeout(re),re=window.setTimeout(je,500),Fe()}function je(){!b.value||!C.value||(pe=0,_e=0,window.clearTimeout(re),Fe())}let Be=-1;function Fe(){cancelAnimationFrame(Be),Be=requestAnimationFrame(Ke)}function Ke(){if(!b.value||!I.value||!s.value)return;const ze=fe-w,Se=Math.sign(pe),Me=Math.max(0,ze-e_),Qe=di(ce(Me),0,n.value.length),Ft=ze+I.value+e_,Tt=di(ce(Ft)+1,Qe+1,n.value.length);if((Se!==aV||Qe<c.value)&&(Se!==sV||Tt>f.value)){const xt=ue(c.value)-ue(Qe),Re=ue(Tt)-ue(f.value);Math.max(xt,Re)>e_?(c.value=Qe,f.value=Tt):(Qe<=0&&(c.value=Qe),Tt>=n.value.length&&(f.value=Tt))}d.value=ue(c.value),a.value=ue(n.value.length)-ue(f.value)}function ft(ze){const Se=ue(ze);!b.value||ze&&!Se?O=ze:b.value.scrollTop=Se}const mt=ee(()=>n.value.slice(c.value,f.value).map((ze,Se)=>{const Me=Se+c.value;return{raw:ze,index:Me,key:Wi(ze,e.itemKey,Me)}}));return Bt(n,()=>{F=Array.from({length:n.value.length}),B=Array.from({length:n.value.length}),X.immediate(),Fe()},{deep:1}),{calculateVisibleItems:Fe,containerRef:b,markerRef:C,computedItems:mt,paddingTop:d,paddingBottom:a,scrollToIndex:ft,handleScroll:be,handleScrollend:je,handleItemResize:ae}}function oV(e,n){let r=e.length-1,s=0,c=0,f=null,d=-1;if(e[r]<n)return r;for(;s<=r;)if(c=s+r>>1,f=e[c],f>n)r=c-1;else if(f<n)d=c,s=c+1;else return f===n?c:s;return d}const lV=Ue({items:{type:Array,default:()=>[]},renderless:Boolean,...zP(),...Ht(),...Zi()},"VVirtualScroll"),Xg=ht()({name:"VVirtualScroll",props:lV(),setup(e,n){let{slots:r}=n;const s=ji("VVirtualScroll"),{dimensionStyles:c}=Ki(e),{calculateVisibleItems:f,containerRef:d,markerRef:a,handleScroll:b,handleScrollend:C,handleItemResize:w,scrollToIndex:k,paddingTop:A,paddingBottom:I,computedItems:R}=BP(e,Ee(()=>e.items));return ra(()=>e.renderless,()=>{function F(){var O,q;const $=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";d.value===document.documentElement?(document[$]("scroll",b,{passive:!0}),document[$]("scrollend",C)):((O=d.value)==null||O[$]("scroll",b,{passive:!0}),(q=d.value)==null||q[$]("scrollend",C))}zi(()=>{d.value=a0(s.vnode.el,!0),F(!0)}),fr(F)}),_t(()=>{const F=R.value.map(B=>G(LP,{key:B.key,renderless:e.renderless,"onUpdate:height":$=>w(B.index,$)},{default:$=>{var O;return(O=r.default)==null?void 0:O.call(r,{item:B.raw,index:B.index,...$})}}));return e.renderless?Z(qt,null,[Z("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:Nt(A.value)}},null),F,Z("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Nt(I.value)}},null)]):Z("div",{ref:d,class:gt(["v-virtual-scroll",e.class]),onScrollPassive:b,onScrollend:C,style:zt([c.value,e.style])},[Z("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:Nt(A.value),paddingBottom:Nt(I.value)}},[F])])}),{calculateVisibleItems:f,scrollToIndex:k}}});function P0(e,n){const r=Mt(!1);let s;function c(a){cancelAnimationFrame(s),r.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{r.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(r.value){const b=Bt(r,()=>{b(),a()})}else a()})}async function d(a){var w,k;if(a.key==="Tab"&&((w=n.value)==null||w.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const b=(k=e.value)==null?void 0:k.$el;if(!b)return;(a.key==="Home"||a.key==="End")&&b.scrollTo({top:a.key==="Home"?0:b.scrollHeight,behavior:"smooth"}),await f();const C=b.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const A=b.getBoundingClientRect().top;for(const I of C)if(I.getBoundingClientRect().top>=A){I.focus();break}}else{const A=b.getBoundingClientRect().bottom;for(const I of[...C].reverse())if(I.getBoundingClientRect().bottom<=A){I.focus();break}}}return{onScrollPassive:c,onKeydown:d}}const I0=Ue({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:tn,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...bP({itemChildren:!1})},"Select"),uV=Ue({...I0(),...hi(Sm({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:{component:Gg}})},"VSelect"),A0=ht()({name:"VSelect",props:uV(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=vi(),c=tt(),f=tt(),d=tt(),{items:a,transformIn:b,transformOut:C}=w0(e),w=Qt(e,"modelValue",[],ze=>b(ze===null?[null]:Di(ze)),ze=>{const Se=C(ze);return e.multiple?Se:Se[0]??null}),k=ee(()=>typeof e.counterValue=="function"?e.counterValue(w.value):typeof e.counterValue=="number"?e.counterValue:w.value.length),A=bm(e),I=ee(()=>w.value.map(ze=>ze.value)),R=Mt(!1);let F="",B=-1,$;const O=ee(()=>e.hideSelected?a.value.filter(ze=>!w.value.some(Se=>(e.valueComparator||Lr)(Se,ze))):a.value),q=ee(()=>e.hideNoData&&!O.value.length||A.isReadonly.value||A.isDisabled.value),X=Qt(e,"menu"),te=ee({get:()=>X.value,set:ze=>{var Se;X.value&&!ze&&((Se=f.value)!=null&&Se.openChildren.size)||ze&&q.value||(X.value=ze)}}),ae=Ee(()=>te.value?e.closeText:e.openText),ue=ee(()=>{var ze;return{...e.menuProps,activatorProps:{...((ze=e.menuProps)==null?void 0:ze.activatorProps)||{},"aria-haspopup":"listbox"}}}),ce=tt(),fe=P0(ce,c);function pe(ze){e.openOnClear&&(te.value=!0)}function _e(){q.value||(te.value=!te.value)}function re(ze){zd(ze)&&be(ze)}function be(ze){var st,Ye,St;if(!ze.key||A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ze.key)&&ze.preventDefault(),["Enter","ArrowDown"," "].includes(ze.key)&&(te.value=!0),["Escape","Tab"].includes(ze.key)&&(te.value=!1),ze.key==="Home"?(st=ce.value)==null||st.focus("first"):ze.key==="End"&&((Ye=ce.value)==null||Ye.focus("last"));const Se=1e3;if(!zd(ze))return;const Me=performance.now();Me-$>Se&&(F="",B=-1),F+=ze.key.toLowerCase(),$=Me;const Qe=O.value;function Ft(){let ie=Tt();return ie||F.at(-1)===F.at(-2)&&(F=F.slice(0,-1),ie=Tt(),ie)||(B=-1,ie=Tt(),ie)?ie:(F=ze.key.toLowerCase(),Tt())}function Tt(){for(let ie=B+1;ie<Qe.length;ie++){const le=Qe[ie];if(le.title.toLowerCase().startsWith(F))return[le,ie]}}const xt=Ft();if(!xt)return;const[Re,vt]=xt;B=vt,(St=ce.value)==null||St.focus(vt),e.multiple||(w.value=[Re])}function je(ze){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!ze.props.disabled)if(e.multiple){const Me=w.value.findIndex(Ft=>(e.valueComparator||Lr)(Ft.value,ze.value)),Qe=Se??!~Me;if(~Me){const Ft=Qe?[...w.value,ze]:[...w.value];Ft.splice(Me,1),w.value=Ft}else Qe&&(w.value=[...w.value,ze])}else{const Me=Se!==!1;w.value=Me?[ze]:[],Dn(()=>{te.value=!1})}}function Be(ze){var Se;(Se=ce.value)!=null&&Se.$el.contains(ze.relatedTarget)||(te.value=!1)}function Fe(){var ze;e.eager&&((ze=d.value)==null||ze.calculateVisibleItems())}function Ke(){var ze;R.value&&((ze=c.value)==null||ze.focus())}function ft(ze){R.value=!0}function mt(ze){if(ze==null)w.value=[];else if(Ld(c.value,":autofill")||Ld(c.value,":-webkit-autofill")){const Se=a.value.find(Me=>Me.title===ze);Se&&je(Se)}else c.value&&(c.value.value="")}return Bt(te,()=>{if(!e.hideSelected&&te.value&&w.value.length){const ze=O.value.findIndex(Se=>w.value.some(Me=>(e.valueComparator||Lr)(Me.value,Se.value)));Kn&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var Se;ze>=0&&((Se=d.value)==null||Se.scrollToIndex(ze))})}}),Bt(()=>e.items,(ze,Se)=>{te.value||R.value&&!Se.length&&ze.length&&(te.value=!0)}),_t(()=>{const ze=!!(e.chips||r.chip),Se=!!(!e.hideNoData||O.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),Me=w.value.length>0,Qe=ko.filterProps(e),Ft=Me||!R.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return G(ko,lt({ref:c},Qe,{modelValue:w.value.map(Tt=>Tt.props.value).join(", "),"onUpdate:modelValue":mt,focused:R.value,"onUpdate:focused":Tt=>R.value=Tt,validationValue:w.externalValue,counterValue:k.value,dirty:Me,class:["v-select",{"v-select--active-menu":te.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":w.value.length,"v-select--selection-slot":!!r.selection},e.class],style:e.style,inputmode:"none",placeholder:Ft,"onClick:clear":pe,"onMousedown:control":_e,onBlur:Be,onKeydown:be,"aria-label":s(ae.value),title:s(ae.value)}),{...r,default:()=>Z(qt,null,[G(Fd,lt({ref:f,modelValue:te.value,"onUpdate:modelValue":Tt=>te.value=Tt,activator:"parent",contentClass:"v-select__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Fe,onAfterLeave:Ke},ue.value),{default:()=>[Se&&G(Od,lt({ref:ce,selected:I.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Tt=>Tt.preventDefault(),onKeydown:re,onFocusin:ft,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},fe,e.listProps),{default:()=>{var Tt,xt,Re;return[(Tt=r["prepend-item"])==null?void 0:Tt.call(r),!O.value.length&&!e.hideNoData&&(((xt=r["no-data"])==null?void 0:xt.call(r))??G(ys,{key:"no-data",title:s(e.noDataText)},null)),G(Xg,{ref:d,renderless:!0,items:O.value,itemKey:"value"},{default:vt=>{var Le,Ze,ut;let{item:st,index:Ye,itemRef:St}=vt;const ie=lR(st.props),le=lt(st.props,{ref:St,key:st.value,onClick:()=>je(st,null)});return st.type==="divider"?((Le=r.divider)==null?void 0:Le.call(r,{props:st.raw,index:Ye}))??G($a,lt(st.props,{key:`divider-${Ye}`}),null):st.type==="subheader"?((Ze=r.subheader)==null?void 0:Ze.call(r,{props:st.raw,index:Ye}))??G(Jd,lt(st.props,{key:`subheader-${Ye}`}),null):((ut=r.item)==null?void 0:ut.call(r,{item:st,index:Ye,props:le}))??G(ys,lt(le,{role:"option"}),{prepend:Je=>{let{isSelected:kt}=Je;return Z(qt,null,[e.multiple&&!e.hideSelected?G(qs,{key:st.value,modelValue:kt,ripple:!1,tabindex:"-1"},null):void 0,ie.prependAvatar&&G(Ja,{image:ie.prependAvatar},null),ie.prependIcon&&G(Yn,{icon:ie.prependIcon},null)])}})}}),(Re=r["append-item"])==null?void 0:Re.call(r)]}})]}),w.value.map((Tt,xt)=>{function Re(St){St.stopPropagation(),St.preventDefault(),je(Tt,!1)}const vt={"onClick:close":Re,onKeydown(St){St.key!=="Enter"&&St.key!==" "||(St.preventDefault(),St.stopPropagation(),Re(St))},onMousedown(St){St.preventDefault(),St.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},st=ze?!!r.chip:!!r.selection,Ye=st?jg(ze?r.chip({item:Tt,index:xt,props:vt}):r.selection({item:Tt,index:xt})):void 0;if(!(st&&!Ye))return Z("div",{key:Tt.value,class:"v-select__selection"},[ze?r.chip?G(Sn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Tt.title}}},{default:()=>[Ye]}):G(Xd,lt({key:"chip",closable:e.closableChips,size:"small",text:Tt.title,disabled:Tt.props.disabled},vt),null):Ye??Z("span",{class:"v-select__selection-text"},[Tt.title,e.multiple&&xt<w.value.length-1&&Z("span",{class:"v-select__selection-comma"},[wn(",")])])])})]),"append-inner":function(){var vt,st;for(var Tt=arguments.length,xt=new Array(Tt),Re=0;Re<Tt;Re++)xt[Re]=arguments[Re];return Z(qt,null,[(vt=r["append-inner"])==null?void 0:vt.call(r,...xt),e.menuIcon?G(Yn,{class:"v-select__menu-icon",color:(st=c.value)==null?void 0:st.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Pr({isFocused:R,menu:te,select:je},c)}}),cV=(e,n,r)=>{if(e==null||n==null)return-1;if(!n.length)return 0;e=e.toString().toLocaleLowerCase(),n=n.toString().toLocaleLowerCase();const s=[];let c=e.indexOf(n);for(;~c;)s.push([c,c+n.length]),c=e.indexOf(n,c+n.length);return s.length?s:-1};function t_(e,n){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+n.length]]:Array.isArray(e[0])?e:[e]}const Qd=Ue({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function dV(e,n,r){var a;const s=[],c=(r==null?void 0:r.default)??cV,f=r!=null&&r.filterKeys?Di(r.filterKeys):!1,d=Object.keys((r==null?void 0:r.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return s;e:for(let b=0;b<e.length;b++){const[C,w=C]=Di(e[b]),k={},A={};let I=-1;if((n||d>0)&&!(r!=null&&r.noFilter)){if(typeof C=="object"){if(C.type==="divider"||C.type==="subheader")continue;const B=f||Object.keys(w);for(const $ of B){const O=Wi(w,$),q=(a=r==null?void 0:r.customKeyFilter)==null?void 0:a[$];if(I=q?q(O,n,C):c(O,n,C),I!==-1&&I!==!1)q?k[$]=t_(I,n):A[$]=t_(I,n);else if((r==null?void 0:r.filterMode)==="every")continue e}}else I=c(C,n,C),I!==-1&&I!==!1&&(A.title=t_(I,n));const R=Object.keys(A).length,F=Object.keys(k).length;if(!R&&!F||(r==null?void 0:r.filterMode)==="union"&&F!==d&&!R||(r==null?void 0:r.filterMode)==="intersection"&&(F!==d||!R))continue}s.push({index:b,matches:{...A,...k}})}return s}function eh(e,n,r,s){const c=Mt([]),f=Mt(new Map),d=ee(()=>s!=null&&s.transform?Cr(n).map(b=>[b,s.transform(b)]):Cr(n));Ri(()=>{const b=typeof r=="function"?r():Cr(r),C=typeof b!="string"&&typeof b!="number"?"":String(b),w=dV(d.value,C,{customKeyFilter:{...e.customKeyFilter,...Cr(s==null?void 0:s.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),k=Cr(n),A=[],I=new Map;w.forEach(R=>{let{index:F,matches:B}=R;const $=k[F];A.push($),I.set($.value,B)}),c.value=A,f.value=I});function a(b){return f.value.get(b.value)}return{filteredItems:c,filteredMatches:f,getMatches:a}}function VP(e,n,r){return r==null||!r.length?n:r.map((s,c)=>{const f=c===0?0:r[c-1][1],d=[Z("span",{class:gt(`${e}__unmask`)},[n.slice(f,s[0])]),Z("span",{class:gt(`${e}__mask`)},[n.slice(s[0],s[1])])];return c===r.length-1&&d.push(Z("span",{class:gt(`${e}__unmask`)},[n.slice(s[1])])),Z(qt,null,[d])})}const hV=Ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Qd({filterKeys:["title"]}),...I0(),...hi(Sm({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:!1})},"VAutocomplete"),fV=ht()({name:"VAutocomplete",props:hV(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=vi(),c=tt(),f=Mt(!1),d=Mt(!0),a=Mt(!1),b=tt(),C=tt(),w=Mt(-1),{items:k,transformIn:A,transformOut:I}=w0(e),{textColorClasses:R,textColorStyles:F}=Br(()=>{var Ye;return(Ye=c.value)==null?void 0:Ye.color}),B=Qt(e,"search",""),$=Qt(e,"modelValue",[],Ye=>A(Ye===null?[null]:Di(Ye)),Ye=>{const St=I(Ye);return e.multiple?St:St[0]??null}),O=ee(()=>typeof e.counterValue=="function"?e.counterValue($.value):typeof e.counterValue=="number"?e.counterValue:$.value.length),q=bm(e),{filteredItems:X,getMatches:te}=eh(e,k,()=>d.value?"":B.value),ae=ee(()=>e.hideSelected?X.value.filter(Ye=>!$.value.some(St=>St.value===Ye.value)):X.value),ue=ee(()=>!!(e.chips||r.chip)),ce=ee(()=>ue.value||!!r.selection),fe=ee(()=>$.value.map(Ye=>Ye.props.value)),pe=ee(()=>{var St;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&B.value===((St=ae.value[0])==null?void 0:St.title))&&ae.value.length>0&&!d.value&&!a.value}),_e=ee(()=>e.hideNoData&&!ae.value.length||q.isReadonly.value||q.isDisabled.value),re=Qt(e,"menu"),be=ee({get:()=>re.value,set:Ye=>{var St;re.value&&!Ye&&((St=b.value)!=null&&St.openChildren.size)||Ye&&_e.value||(re.value=Ye)}}),je=ee(()=>be.value?e.closeText:e.openText),Be=tt(),Fe=P0(Be,c);function Ke(Ye){e.openOnClear&&(be.value=!0),B.value=""}function ft(){_e.value||(be.value=!0)}function mt(Ye){_e.value||(f.value&&(Ye.preventDefault(),Ye.stopPropagation()),be.value=!be.value)}function ze(Ye){var St;(zd(Ye)||Ye.key==="Backspace")&&((St=c.value)==null||St.focus())}function Se(Ye){var le,Le,Ze,ut,Je;if(q.isReadonly.value)return;const St=(le=c.value)==null?void 0:le.selectionStart,ie=$.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Ye.key)&&Ye.preventDefault(),["Enter","ArrowDown"].includes(Ye.key)&&(be.value=!0),["Escape"].includes(Ye.key)&&(be.value=!1),pe.value&&["Enter","Tab"].includes(Ye.key)&&!$.value.some(kt=>{let{value:ct}=kt;return ct===ae.value[0].value})&&st(ae.value[0]),Ye.key==="ArrowDown"&&pe.value&&((Le=Be.value)==null||Le.focus("next")),["Backspace","Delete"].includes(Ye.key)){if(!e.multiple&&ce.value&&$.value.length>0&&!B.value)return st($.value[0],!1);if(~w.value){Ye.preventDefault();const kt=w.value;st($.value[w.value],!1),w.value=kt>=ie-1?ie-2:kt}else Ye.key==="Backspace"&&!B.value&&(w.value=ie-1);return}if(e.multiple)if(Ye.key==="ArrowLeft"){if(w.value<0&&St&&St>0)return;const kt=w.value>-1?w.value-1:ie-1;if($.value[kt])w.value=kt;else{const ct=((Ze=B.value)==null?void 0:Ze.length)??null;w.value=-1,(ut=c.value)==null||ut.setSelectionRange(ct,ct)}}else if(Ye.key==="ArrowRight"){if(w.value<0)return;const kt=w.value+1;$.value[kt]?w.value=kt:(w.value=-1,(Je=c.value)==null||Je.setSelectionRange(0,0))}else~w.value&&zd(Ye)&&(w.value=-1)}function Me(Ye){if(Ld(c.value,":autofill")||Ld(c.value,":-webkit-autofill")){const St=k.value.find(ie=>ie.title===Ye.target.value);St&&st(St)}}function Qe(){var Ye;e.eager&&((Ye=C.value)==null||Ye.calculateVisibleItems())}function Ft(){var Ye;f.value&&(d.value=!0,(Ye=c.value)==null||Ye.focus())}function Tt(Ye){f.value=!0,setTimeout(()=>{a.value=!0})}function xt(Ye){a.value=!1}function Re(Ye){(Ye==null||Ye===""&&!e.multiple&&!ce.value)&&($.value=[])}const vt=Mt(!1);function st(Ye){let St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Ye||Ye.props.disabled))if(e.multiple){const ie=$.value.findIndex(Le=>(e.valueComparator||Lr)(Le.value,Ye.value)),le=St??!~ie;if(~ie){const Le=le?[...$.value,Ye]:[...$.value];Le.splice(ie,1),$.value=Le}else le&&($.value=[...$.value,Ye]);e.clearOnSelect&&(B.value="")}else{const ie=St!==!1;$.value=ie?[Ye]:[],B.value=ie&&!ce.value?Ye.title:"",Dn(()=>{be.value=!1,d.value=!0})}}return Bt(f,(Ye,St)=>{var ie;Ye!==St&&(Ye?(vt.value=!0,B.value=e.multiple||ce.value?"":String(((ie=$.value.at(-1))==null?void 0:ie.props.title)??""),d.value=!0,Dn(()=>vt.value=!1)):(!e.multiple&&B.value==null&&($.value=[]),be.value=!1,(e.multiple||ce.value)&&(B.value=""),w.value=-1))}),Bt(B,Ye=>{!f.value||vt.value||(Ye&&(be.value=!0),d.value=!Ye)}),Bt(be,()=>{if(!e.hideSelected&&be.value&&$.value.length){const Ye=ae.value.findIndex(St=>$.value.some(ie=>St.value===ie.value));Kn&&window.requestAnimationFrame(()=>{var St;Ye>=0&&((St=C.value)==null||St.scrollToIndex(Ye))})}}),Bt(()=>e.items,(Ye,St)=>{be.value||f.value&&!St.length&&Ye.length&&(be.value=!0)}),_t(()=>{const Ye=!!(!e.hideNoData||ae.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),St=$.value.length>0,ie=ko.filterProps(e);return G(ko,lt({ref:c},ie,{modelValue:B.value,"onUpdate:modelValue":[le=>B.value=le,Re],focused:f.value,"onUpdate:focused":le=>f.value=le,validationValue:$.externalValue,counterValue:O.value,dirty:St,onChange:Me,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":be.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!ce.value,"v-autocomplete--selecting-index":w.value>-1},e.class],style:e.style,readonly:q.isReadonly.value,placeholder:St?void 0:e.placeholder,"onClick:clear":Ke,"onMousedown:control":ft,onKeydown:Se}),{...r,default:()=>Z(qt,null,[G(Fd,lt({ref:b,modelValue:be.value,"onUpdate:modelValue":le=>be.value=le,activator:"parent",contentClass:"v-autocomplete__content",disabled:_e.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Qe,onAfterLeave:Ft},e.menuProps),{default:()=>[Ye&&G(Od,lt({ref:Be,filterable:!0,selected:fe.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:le=>le.preventDefault(),onKeydown:ze,onFocusin:Tt,onFocusout:xt,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Fe,e.listProps),{default:()=>{var le,Le,Ze;return[(le=r["prepend-item"])==null?void 0:le.call(r),!ae.value.length&&!e.hideNoData&&(((Le=r["no-data"])==null?void 0:Le.call(r))??G(ys,{key:"no-data",title:s(e.noDataText)},null)),G(Xg,{ref:C,renderless:!0,items:ae.value,itemKey:"value"},{default:ut=>{var Pt,nn,Ut;let{item:Je,index:kt,itemRef:ct}=ut;const Dt=lt(Je.props,{ref:ct,key:Je.value,active:pe.value&&kt===0?!0:void 0,onClick:()=>st(Je,null)});return Je.type==="divider"?((Pt=r.divider)==null?void 0:Pt.call(r,{props:Je.raw,index:kt}))??G($a,lt(Je.props,{key:`divider-${kt}`}),null):Je.type==="subheader"?((nn=r.subheader)==null?void 0:nn.call(r,{props:Je.raw,index:kt}))??G(Jd,lt(Je.props,{key:`subheader-${kt}`}),null):((Ut=r.item)==null?void 0:Ut.call(r,{item:Je,index:kt,props:Dt}))??G(ys,lt(Dt,{role:"option"}),{prepend:Jt=>{let{isSelected:ln}=Jt;return Z(qt,null,[e.multiple&&!e.hideSelected?G(qs,{key:Je.value,modelValue:ln,ripple:!1,tabindex:"-1"},null):void 0,Je.props.prependAvatar&&G(Ja,{image:Je.props.prependAvatar},null),Je.props.prependIcon&&G(Yn,{icon:Je.props.prependIcon},null)])},title:()=>{var Jt;return d.value?Je.title:VP("v-autocomplete",Je.title,(Jt=te(Je))==null?void 0:Jt.title)}})}}),(Ze=r["append-item"])==null?void 0:Ze.call(r)]}})]}),$.value.map((le,Le)=>{function Ze(ct){ct.stopPropagation(),ct.preventDefault(),st(le,!1)}const ut={"onClick:close":Ze,onKeydown(ct){ct.key!=="Enter"&&ct.key!==" "||(ct.preventDefault(),ct.stopPropagation(),Ze(ct))},onMousedown(ct){ct.preventDefault(),ct.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Je=ue.value?!!r.chip:!!r.selection,kt=Je?jg(ue.value?r.chip({item:le,index:Le,props:ut}):r.selection({item:le,index:Le})):void 0;if(!(Je&&!kt))return Z("div",{key:le.value,class:gt(["v-autocomplete__selection",Le===w.value&&["v-autocomplete__selection--selected",R.value]]),style:zt(Le===w.value?F.value:{})},[ue.value?r.chip?G(Sn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:le.title}}},{default:()=>[kt]}):G(Xd,lt({key:"chip",closable:e.closableChips,size:"small",text:le.title,disabled:le.props.disabled},ut),null):kt??Z("span",{class:"v-autocomplete__selection-text"},[le.title,e.multiple&&Le<$.value.length-1&&Z("span",{class:"v-autocomplete__selection-comma"},[wn(",")])])])})]),"append-inner":function(){var ut,Je;for(var le=arguments.length,Le=new Array(le),Ze=0;Ze<le;Ze++)Le[Ze]=arguments[Ze];return Z(qt,null,[(ut=r["append-inner"])==null?void 0:ut.call(r,...Le),e.menuIcon?G(Yn,{class:"v-autocomplete__menu-icon",color:(Je=c.value)==null?void 0:Je.fieldIconColor,icon:e.menuIcon,onMousedown:mt,onClick:tk,"aria-label":s(je.value),title:s(je.value),tabindex:"-1"},null):void 0])}})}),Pr({isFocused:f,isPristine:d,menu:be,search:B,filteredItems:X,select:st},c)}}),mV=Ue({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:tn,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ht(),...Eo({location:"top end"}),...yi(),...bn(),...Un(),...ws({transition:"scale-rotate-transition"}),...Zi()},"VBadge"),pV=ht()({name:"VBadge",inheritAttrs:!1,props:mV(),setup(e,n){const{backgroundColorClasses:r,backgroundColorStyles:s}=ti(()=>e.color),{roundedClasses:c}=Bi(e),{t:f}=vi(),{textColorClasses:d,textColorStyles:a}=Br(()=>e.textColor),{themeClasses:b}=d0(),{locationStyles:C}=sc(e,!0,k=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(k)?Number(e.offsetY??0):["left","right"].includes(k)?Number(e.offsetX??0):0)),{dimensionStyles:w}=Ki(e);return _t(()=>{const k=Number(e.content),A=!e.max||isNaN(k)?e.content:k<=Number(e.max)?k:`${e.max}+`,[I,R]=k_(n.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return G(e.tag,lt({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},R,{style:e.style}),{default:()=>{var F,B;return[Z("div",{class:"v-badge__wrapper"},[(B=(F=n.slots).default)==null?void 0:B.call(F),G(ia,{transition:e.transition},{default:()=>{var $,O;return[ei(Z("span",lt({class:["v-badge__badge",b.value,r.value,c.value,d.value],style:[s.value,a.value,w.value,e.inline?{}:C.value],"aria-atomic":"true","aria-label":f(e.label,k),"aria-live":"polite",role:"status"},I),[e.dot?void 0:n.slots.badge?(O=($=n.slots).badge)==null?void 0:O.call($):e.icon?G(Yn,{icon:e.icon},null):A]),[[xs,e.modelValue]])]}})])]}})}),{}}}),gV=Ue({color:String,density:String,...Ht()},"VBannerActions"),OP=ht()({name:"VBannerActions",props:gV(),setup(e,n){let{slots:r}=n;return Li({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),_t(()=>{var s;return Z("div",{class:gt(["v-banner-actions",e.class]),style:zt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),FP=Ao("v-banner-text"),vV=Ue({avatar:String,bgColor:String,color:String,icon:tn,lines:String,stacked:Boolean,sticky:Boolean,text:String,..._a(),...Ht(),...mr(),...Zi(),...Ju({mobile:null}),...ir(),...Eo(),...Zd(),...yi(),...bn(),...Un()},"VBanner"),yV=ht()({name:"VBanner",props:vV(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.bgColor),{borderClasses:f}=Pa(e),{densityClasses:d}=sa(e),{displayClasses:a,mobile:b}=Qa(e),{dimensionStyles:C}=Ki(e),{elevationClasses:w}=kr(e),{locationStyles:k}=sc(e),{positionClasses:A}=Kd(e),{roundedClasses:I}=Bi(e),{themeClasses:R}=Xn(e),F=Ee(()=>e.color),B=Ee(()=>e.density);Li({VBannerActions:{color:F,density:B}}),_t(()=>{const $=!!(e.text||r.text),O=!!(e.avatar||e.icon),q=!!(O||r.prepend);return G(e.tag,{class:gt(["v-banner",{"v-banner--stacked":e.stacked||b.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},R.value,s.value,f.value,d.value,a.value,w.value,A.value,I.value,e.class]),style:zt([c.value,C.value,k.value,e.style]),role:"banner"},{default:()=>{var X;return[q&&Z("div",{key:"prepend",class:"v-banner__prepend"},[r.prepend?G(Sn,{key:"prepend-defaults",disabled:!O,defaults:{VAvatar:{color:F.value,density:B.value,icon:e.icon,image:e.avatar}}},r.prepend):G(Ja,{key:"prepend-avatar",color:F.value,density:B.value,icon:e.icon,image:e.avatar},null)]),Z("div",{class:"v-banner__content"},[$&&G(FP,{key:"text"},{default:()=>{var te;return[((te=r.text)==null?void 0:te.call(r))??e.text]}}),(X=r.default)==null?void 0:X.call(r)]),r.actions&&G(OP,{key:"actions"},r.actions)]}})})}}),_V=Ue({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},..._a(),...Ht(),...mr(),...ir(),...yi(),...Qu({name:"bottom-navigation"}),...bn({tag:"header"}),...ic({selectedClass:"v-btn--selected"}),...Un()},"VBottomNavigation"),bV=ht()({name:"VBottomNavigation",props:_V(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=d0(),{borderClasses:c}=Pa(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{densityClasses:a}=sa(e),{elevationClasses:b}=kr(e),{roundedClasses:C}=Bi(e),{ssrBootStyles:w}=tc(),k=ee(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),A=Qt(e,"active",e.active),{layoutItemStyles:I}=ec({id:e.name,order:ee(()=>parseInt(e.order,10)),position:Ee(()=>"bottom"),layoutSize:Ee(()=>A.value?k.value:0),elementSize:k,active:A,absolute:Ee(()=>e.absolute)});return Dl(e,v0),Li({VBtn:{baseColor:Ee(()=>e.baseColor),color:Ee(()=>e.color),density:Ee(()=>e.density),stacked:Ee(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),_t(()=>G(e.tag,{class:gt(["v-bottom-navigation",{"v-bottom-navigation--active":A.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},s.value,f.value,c.value,a.value,b.value,C.value,e.class]),style:zt([d.value,I.value,{height:Nt(k.value)},w.value,e.style])},{default:()=>[r.default&&Z("div",{class:"v-bottom-navigation__content"},[r.default()])]})),{}}}),$P=Ue({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...xm({origin:"center center",scrollStrategy:"block",transition:{component:Gg},zIndex:2400})},"VDialog"),Y_=ht()({name:"VDialog",props:$P(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=Qt(e,"modelValue"),{scopeId:f}=oc(),d=tt();function a(w){var I,R;const k=w.relatedTarget,A=w.target;if(k!==A&&((I=d.value)!=null&&I.contentEl)&&((R=d.value)!=null&&R.globalTop)&&![document,d.value.contentEl].includes(A)&&!d.value.contentEl.contains(A)){const F=qf(d.value.contentEl);if(!F.length)return;const B=F[0],$=F[F.length-1];k===B?$.focus():B.focus()}}Vr(()=>{document.removeEventListener("focusin",a)}),Kn&&Bt(()=>c.value&&e.retainFocus,w=>{w?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0});function b(){var w;r("afterEnter"),(e.scrim||e.retainFocus)&&((w=d.value)!=null&&w.contentEl)&&!d.value.contentEl.contains(document.activeElement)&&d.value.contentEl.focus({preventScroll:!0})}function C(){r("afterLeave")}return Bt(c,async w=>{var k;w||(await Dn(),(k=d.value.activatorEl)==null||k.focus({preventScroll:!0}))}),_t(()=>{const w=Hs.filterProps(e),k=lt({"aria-haspopup":"dialog"},e.activatorProps),A=lt({tabindex:-1},e.contentProps);return G(Hs,lt({ref:d,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},w,{modelValue:c.value,"onUpdate:modelValue":I=>c.value=I,"aria-modal":"true",activatorProps:k,contentProps:A,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:C},f),{activator:s.activator,default:function(){for(var I=arguments.length,R=new Array(I),F=0;F<I;F++)R[F]=arguments[F];return G(Sn,{root:"VDialog"},{default:()=>{var B;return[(B=s.default)==null?void 0:B.call(s,...R)]}})}})}),Pr({},d)}}),xV=Ue({inset:Boolean,...$P({transition:"bottom-sheet-transition"})},"VBottomSheet"),wV=ht()({name:"VBottomSheet",props:xV(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue");return _t(()=>{const c=Y_.filterProps(e);return G(Y_,lt(c,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),r)}),{}}}),SV=Ue({divider:[Number,String],...Ht()},"VBreadcrumbsDivider"),jP=ht()({name:"VBreadcrumbsDivider",props:SV(),setup(e,n){let{slots:r}=n;return _t(()=>{var s;return Z("li",{"aria-hidden":"true",class:gt(["v-breadcrumbs-divider",e.class]),style:zt(e.style)},[((s=r==null?void 0:r.default)==null?void 0:s.call(r))??e.divider])}),{}}}),CV=Ue({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Ht(),...ym(),...bn({tag:"li"})},"VBreadcrumbsItem"),NP=ht()({name:"VBreadcrumbsItem",props:CV(),setup(e,n){let{slots:r,attrs:s}=n;const c=vm(e,s),f=ee(()=>{var b;return e.active||((b=c.isActive)==null?void 0:b.value)}),{textColorClasses:d,textColorStyles:a}=Br(()=>f.value?e.activeColor:e.color);return _t(()=>G(e.tag,{class:gt(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":f.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:f.value&&e.activeClass},d.value,e.class]),style:zt([a.value,e.style]),"aria-current":f.value?"page":void 0},{default:()=>{var b,C;return[c.isLink.value?Z("a",lt({class:"v-breadcrumbs-item--link",onClick:c.navigate},c.linkProps),[((C=r.default)==null?void 0:C.call(r))??e.title]):((b=r.default)==null?void 0:b.call(r))??e.title]}})),{}}}),TV=Ue({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:tn,items:{type:Array,default:()=>[]},...Ht(),...mr(),...yi(),...bn({tag:"ul"})},"VBreadcrumbs"),kV=ht()({name:"VBreadcrumbs",props:TV(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.bgColor),{densityClasses:f}=sa(e),{roundedClasses:d}=Bi(e);Li({VBreadcrumbsDivider:{divider:Ee(()=>e.divider)},VBreadcrumbsItem:{activeClass:Ee(()=>e.activeClass),activeColor:Ee(()=>e.activeColor),color:Ee(()=>e.color),disabled:Ee(()=>e.disabled)}});const a=ee(()=>e.items.map(b=>typeof b=="string"?{item:{title:b},raw:b}:{item:b,raw:b}));return _t(()=>{const b=!!(r.prepend||e.icon);return G(e.tag,{class:gt(["v-breadcrumbs",s.value,f.value,d.value,e.class]),style:zt([c.value,e.style])},{default:()=>{var C;return[b&&Z("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[r.prepend?G(Sn,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},r.prepend):G(Yn,{key:"prepend-icon",start:!0,icon:e.icon},null)]),a.value.map((w,k,A)=>{var F;let{item:I,raw:R}=w;return Z(qt,null,[((F=r.item)==null?void 0:F.call(r,{item:I,index:k}))??G(NP,lt({key:k,disabled:k>=A.length-1},typeof I=="string"?{title:I}:I),{default:r.title?()=>{var B;return(B=r.title)==null?void 0:B.call(r,{item:I,index:k})}:void 0}),k<A.length-1&&G(jP,null,{default:r.divider?()=>{var B;return(B=r.divider)==null?void 0:B.call(r,{item:R,index:k})}:void 0})])}),(C=r.default)==null?void 0:C.call(r)]}})}),{}}}),UP=ht()({name:"VCardActions",props:Ht(),setup(e,n){let{slots:r}=n;return Li({VBtn:{slim:!0,variant:"text"}}),_t(()=>{var s;return Z("div",{class:gt(["v-card-actions",e.class]),style:zt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),PV=Ue({opacity:[Number,String],...Ht(),...bn()},"VCardSubtitle"),GP=ht()({name:"VCardSubtitle",props:PV(),setup(e,n){let{slots:r}=n;return _t(()=>G(e.tag,{class:gt(["v-card-subtitle",e.class]),style:zt([{"--v-card-subtitle-opacity":e.opacity},e.style])},r)),{}}}),qP=Ao("v-card-title"),IV=Ue({appendAvatar:String,appendIcon:tn,prependAvatar:String,prependIcon:tn,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ht(),...mr()},"VCardItem"),HP=ht()({name:"VCardItem",props:IV(),setup(e,n){let{slots:r}=n;return _t(()=>{var C;const s=!!(e.prependAvatar||e.prependIcon),c=!!(s||r.prepend),f=!!(e.appendAvatar||e.appendIcon),d=!!(f||r.append),a=!!(e.title!=null||r.title),b=!!(e.subtitle!=null||r.subtitle);return Z("div",{class:gt(["v-card-item",e.class]),style:zt(e.style)},[c&&Z("div",{key:"prepend",class:"v-card-item__prepend"},[r.prepend?G(Sn,{key:"prepend-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},r.prepend):Z(qt,null,[e.prependAvatar&&G(Ja,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&G(Yn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),Z("div",{class:"v-card-item__content"},[a&&G(qP,{key:"title"},{default:()=>{var w;return[((w=r.title)==null?void 0:w.call(r))??Qn(e.title)]}}),b&&G(GP,{key:"subtitle"},{default:()=>{var w;return[((w=r.subtitle)==null?void 0:w.call(r))??Qn(e.subtitle)]}}),(C=r.default)==null?void 0:C.call(r)]),d&&Z("div",{key:"append",class:"v-card-item__append"},[r.append?G(Sn,{key:"append-defaults",disabled:!f,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},r.append):Z(qt,null,[e.appendIcon&&G(Yn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&G(Ja,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),AV=Ue({opacity:[Number,String],...Ht(),...bn()},"VCardText"),WP=ht()({name:"VCardText",props:AV(),setup(e,n){let{slots:r}=n;return _t(()=>G(e.tag,{class:gt(["v-card-text",e.class]),style:zt([{"--v-card-text-opacity":e.opacity},e.style])},r)),{}}}),EV=Ue({appendAvatar:String,appendIcon:tn,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:tn,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},..._a(),...Ht(),...mr(),...Zi(),...ir(),...Wg(),...Eo(),...Zd(),...yi(),...ym(),...bn(),...Un(),...es({variant:"elevated"})},"VCard"),MV=ht()({name:"VCard",directives:{vRipple:aa},props:EV(),setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Xn(e),{borderClasses:f}=Pa(e),{colorClasses:d,colorStyles:a,variantClasses:b}=nc(e),{densityClasses:C}=sa(e),{dimensionStyles:w}=Ki(e),{elevationClasses:k}=kr(e),{loaderClasses:A}=pm(e),{locationStyles:I}=sc(e),{positionClasses:R}=Kd(e),{roundedClasses:F}=Bi(e),B=vm(e,r);return _t(()=>{const $=e.link!==!1&&B.isLink.value,O=!e.disabled&&e.link!==!1&&(e.link||B.isClickable.value),q=$?"a":e.tag,X=!!(s.title||e.title!=null),te=!!(s.subtitle||e.subtitle!=null),ae=X||te,ue=!!(s.append||e.appendAvatar||e.appendIcon),ce=!!(s.prepend||e.prependAvatar||e.prependIcon),fe=!!(s.image||e.image),pe=ae||ce||ue,_e=!!(s.text||e.text!=null);return ei(G(q,lt({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":O},c.value,f.value,d.value,C.value,k.value,A.value,R.value,F.value,b.value,e.class],style:[a.value,w.value,I.value,e.style],onClick:O&&B.navigate,tabindex:e.disabled?-1:void 0},B.linkProps),{default:()=>{var re;return[fe&&Z("div",{key:"image",class:"v-card__image"},[s.image?G(Sn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},s.image):G(To,{key:"image-img",cover:!0,src:e.image},null)]),G(gm,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:s.loader}),pe&&G(HP,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:s.item,prepend:s.prepend,title:s.title,subtitle:s.subtitle,append:s.append}),_e&&G(WP,{key:"text"},{default:()=>{var be;return[((be=s.text)==null?void 0:be.call(s))??e.text]}}),(re=s.default)==null?void 0:re.call(s),s.actions&&G(UP,null,{default:s.actions}),Ml(O,"v-card")]}}),[[aa,O&&e.ripple]])}),{}}}),DV=e=>{const{touchstartX:n,touchendX:r,touchstartY:s,touchendY:c}=e,f=.5,d=16;e.offsetX=r-n,e.offsetY=c-s,Math.abs(e.offsetY)<f*Math.abs(e.offsetX)&&(e.left&&r<n-d&&e.left(e),e.right&&r>n+d&&e.right(e)),Math.abs(e.offsetX)<f*Math.abs(e.offsetY)&&(e.up&&c<s-d&&e.up(e),e.down&&c>s+d&&e.down(e))};function RV(e,n){var s;const r=e.changedTouches[0];n.touchstartX=r.clientX,n.touchstartY=r.clientY,(s=n.start)==null||s.call(n,{originalEvent:e,...n})}function LV(e,n){var s;const r=e.changedTouches[0];n.touchendX=r.clientX,n.touchendY=r.clientY,(s=n.end)==null||s.call(n,{originalEvent:e,...n}),DV(n)}function zV(e,n){var s;const r=e.changedTouches[0];n.touchmoveX=r.clientX,n.touchmoveY=r.clientY,(s=n.move)==null||s.call(n,{originalEvent:e,...n})}function BV(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:r=>RV(r,n),touchend:r=>LV(r,n),touchmove:r=>zV(r,n)}}function VV(e,n){var a;const r=n.value,s=r!=null&&r.parent?e.parentElement:e,c=(r==null?void 0:r.options)??{passive:!0},f=(a=n.instance)==null?void 0:a.$.uid;if(!s||!f)return;const d=BV(n.value);s._touchHandlers=s._touchHandlers??Object.create(null),s._touchHandlers[f]=d,ZT(d).forEach(b=>{s.addEventListener(b,d[b],c)})}function OV(e,n){var f,d;const r=(f=n.value)!=null&&f.parent?e.parentElement:e,s=(d=n.instance)==null?void 0:d.$.uid;if(!(r!=null&&r._touchHandlers)||!s)return;const c=r._touchHandlers[s];ZT(c).forEach(a=>{r.removeEventListener(a,c[a])}),delete r._touchHandlers[s]}const Sg={mounted:VV,unmounted:OV},ZP=Symbol.for("vuetify:v-window"),KP=Symbol.for("vuetify:v-window-group"),Jg=Ue({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ht(),...bn(),...Un()},"VWindow"),qu=ht()({name:"VWindow",directives:{vTouch:Sg},props:Jg(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{isRtl:c}=nr(),{t:f}=vi(),d=Dl(e,KP),a=tt(),b=ee(()=>c.value?!e.reverse:e.reverse),C=Mt(!1),w=ee(()=>{const X=e.direction==="vertical"?"y":"x",ae=(b.value?!C.value:C.value)?"-reverse":"";return`v-window-${X}${ae}-transition`}),k=Mt(0),A=tt(void 0),I=ee(()=>d.items.value.findIndex(X=>d.selected.value.includes(X.id)));Bt(I,(X,te)=>{const ae=d.items.value.length,ue=ae-1;ae<=2?C.value=X<te:X===ue&&te===0?C.value=!0:X===0&&te===ue?C.value=!1:C.value=X<te}),ri(ZP,{transition:w,isReversed:C,transitionCount:k,transitionHeight:A,rootRef:a});const R=Ee(()=>e.continuous||I.value!==0),F=Ee(()=>e.continuous||I.value!==d.items.value.length-1);function B(){R.value&&d.prev()}function $(){F.value&&d.next()}const O=ee(()=>{const X=[],te={icon:c.value?e.nextIcon:e.prevIcon,class:`v-window__${b.value?"right":"left"}`,onClick:d.prev,"aria-label":f("$vuetify.carousel.prev")};X.push(R.value?r.prev?r.prev({props:te}):G(Mn,te,null):Z("div",null,null));const ae={icon:c.value?e.prevIcon:e.nextIcon,class:`v-window__${b.value?"left":"right"}`,onClick:d.next,"aria-label":f("$vuetify.carousel.next")};return X.push(F.value?r.next?r.next({props:ae}):G(Mn,ae,null):Z("div",null,null)),X}),q=ee(()=>e.touch===!1?e.touch:{...{left:()=>{b.value?B():$()},right:()=>{b.value?$():B()},start:te=>{let{originalEvent:ae}=te;ae.stopPropagation()}},...e.touch===!0?{}:e.touch});return _t(()=>ei(G(e.tag,{ref:a,class:gt(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows},s.value,e.class]),style:zt(e.style)},{default:()=>{var X,te;return[Z("div",{class:"v-window__container",style:{height:A.value}},[(X=r.default)==null?void 0:X.call(r,{group:d}),e.showArrows!==!1&&Z("div",{class:gt(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[O.value])]),(te=r.additional)==null?void 0:te.call(r,{group:d})]}}),[[Sg,q.value]])),{group:d}}}),FV=Ue({color:String,cycle:Boolean,delimiterIcon:{type:tn,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Jg({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),$V=ht()({name:"VCarousel",props:FV(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),{t:c}=vi(),f=tt();let d=-1;Bt(s,b),Bt(()=>e.interval,b),Bt(()=>e.cycle,C=>{C?b():window.clearTimeout(d)}),zi(a);function a(){!e.cycle||!f.value||(d=window.setTimeout(f.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function b(){window.clearTimeout(d),window.requestAnimationFrame(a)}return _t(()=>{const C=qu.filterProps(e);return G(qu,lt({ref:f},C,{modelValue:s.value,"onUpdate:modelValue":w=>s.value=w,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:Nt(e.height)},e.style]}),{default:r.default,additional:w=>{let{group:k}=w;return Z(qt,null,[!e.hideDelimiters&&Z("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[k.items.value.length>0&&G(Sn,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[k.items.value.map((A,I)=>{const R={id:`carousel-item-${A.id}`,"aria-label":c("$vuetify.carousel.ariaLabel.delimiter",I+1,k.items.value.length),class:["v-carousel__controls__item",k.isSelected(A.id)&&"v-btn--active"],onClick:()=>k.select(A.id,!0)};return r.item?r.item({props:R,item:A}):G(Mn,lt(A,R),null)})]})]),e.progress&&G(Hg,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(k.getItemIndex(s.value)+1)/k.items.value.length*100},null)])},prev:r.prev,next:r.next})}),{}}}),Qg=Ue({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ht(),...rc(),...T0()},"VWindowItem"),Hu=ht()({name:"VWindowItem",directives:{vTouch:Sg},props:Qg(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=_n(ZP),c=ac(e,KP),{isBooted:f}=tc();if(!s||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=Mt(!1),a=ee(()=>f.value&&(s.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function b(){!d.value||!s||(d.value=!1,s.transitionCount.value>0&&(s.transitionCount.value-=1,s.transitionCount.value===0&&(s.transitionHeight.value=void 0)))}function C(){var R;d.value||!s||(d.value=!0,s.transitionCount.value===0&&(s.transitionHeight.value=Nt((R=s.rootRef.value)==null?void 0:R.clientHeight)),s.transitionCount.value+=1)}function w(){b()}function k(R){d.value&&Dn(()=>{!a.value||!d.value||!s||(s.transitionHeight.value=Nt(R.clientHeight))})}const A=ee(()=>{const R=s.isReversed.value?e.reverseTransition:e.transition;return a.value?{name:typeof R!="string"?s.transition.value:R,onBeforeEnter:C,onAfterEnter:b,onEnterCancelled:w,onBeforeLeave:C,onAfterLeave:b,onLeaveCancelled:w,onEnter:k}:!1}),{hasContent:I}=k0(e,c.isSelected);return _t(()=>G(ia,{transition:A.value,disabled:!f.value},{default:()=>{var R;return[ei(Z("div",{class:gt(["v-window-item",c.selectedClass.value,e.class]),style:zt(e.style)},[I.value&&((R=r.default)==null?void 0:R.call(r))]),[[xs,c.isSelected.value]])]}})),{groupItem:c}}}),jV=Ue({...Bk(),...Qg()},"VCarouselItem"),NV=ht()({name:"VCarouselItem",inheritAttrs:!1,props:jV(),setup(e,n){let{slots:r,attrs:s}=n;_t(()=>{const c=To.filterProps(e),f=Hu.filterProps(e);return G(Hu,lt({class:["v-carousel-item",e.class]},f),{default:()=>[G(To,lt(s,c),r)]})})}}),UV=Ao("v-code","code"),GV=Ue({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Ht()},"VColorPickerCanvas"),qV=ja({name:"VColorPickerCanvas",props:GV(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,n){let{emit:r}=n;const s=Mt(!1),c=tt(),f=Mt(parseFloat(e.width)),d=Mt(parseFloat(e.height)),a=tt({x:0,y:0}),b=ee({get:()=>a.value,set(B){var q,X;if(!c.value)return;const{x:$,y:O}=B;a.value=B,r("update:color",{h:((q=e.color)==null?void 0:q.h)??0,s:di($,0,f.value)/f.value,v:1-di(O,0,d.value)/d.value,a:((X=e.color)==null?void 0:X.a)??1})}}),C=ee(()=>{const{x:B,y:$}=b.value,O=parseInt(e.dotSize,10)/2;return{width:Nt(e.dotSize),height:Nt(e.dotSize),transform:`translate(${Nt(B-O)}, ${Nt($-O)})`}}),{resizeRef:w}=vs(B=>{var q;if(!((q=w.el)!=null&&q.offsetParent))return;const{width:$,height:O}=B[0].contentRect;f.value=$,d.value=O});function k(B,$,O){const{left:q,top:X,width:te,height:ae}=O;b.value={x:di(B-q,0,te),y:di($-X,0,ae)}}function A(B){B.type==="mousedown"&&B.preventDefault(),!e.disabled&&(I(B),window.addEventListener("mousemove",I),window.addEventListener("mouseup",R),window.addEventListener("touchmove",I),window.addEventListener("touchend",R))}function I(B){if(e.disabled||!c.value)return;s.value=!0;const $=rR(B);k($.clientX,$.clientY,c.value.getBoundingClientRect())}function R(){window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",R)}function F(){var X;if(!c.value)return;const B=c.value,$=B.getContext("2d");if(!$)return;const O=$.createLinearGradient(0,0,B.width,0);O.addColorStop(0,"hsla(0, 0%, 100%, 1)"),O.addColorStop(1,`hsla(${((X=e.color)==null?void 0:X.h)??0}, 100%, 50%, 1)`),$.fillStyle=O,$.fillRect(0,0,B.width,B.height);const q=$.createLinearGradient(0,0,0,B.height);q.addColorStop(0,"hsla(0, 0%, 0%, 0)"),q.addColorStop(1,"hsla(0, 0%, 0%, 1)"),$.fillStyle=q,$.fillRect(0,0,B.width,B.height)}return Bt(()=>{var B;return(B=e.color)==null?void 0:B.h},F,{immediate:!0}),Bt(()=>[f.value,d.value],(B,$)=>{F(),a.value={x:b.value.x*B[0]/$[0],y:b.value.y*B[1]/$[1]}},{flush:"post"}),Bt(()=>e.color,()=>{if(s.value){s.value=!1;return}a.value=e.color?{x:e.color.s*f.value,y:(1-e.color.v)*d.value}:{x:0,y:0}},{deep:!0,immediate:!0}),zi(()=>F()),_t(()=>Z("div",{ref:w,class:gt(["v-color-picker-canvas",e.class]),style:zt(e.style),onMousedown:A,onTouchstartPassive:A},[Z("canvas",{ref:c,width:f.value,height:d.value},null),e.color&&Z("div",{class:gt(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:zt(C.value)},null)])),{}}});function HV(e,n){if(n){const{a:r,...s}=e;return s}return e}function WV(e,n){if(n==null||typeof n=="string"){const r=e.a!==1;if(n!=null&&n.startsWith("rgb(")){const{r:c,g:f,b:d,a}=Gs(e);return`rgb(${c} ${f} ${d}`+(r?` / ${a})`:")")}else if(n!=null&&n.startsWith("hsl(")){const{h:c,s:f,l:d,a}=D_(e);return`hsl(${c} ${Math.round(f*100)} ${Math.round(d*100)}`+(r?` / ${a})`:")")}const s=hk(e);return e.a===1?s.slice(0,7):s}if(typeof n=="object"){let r;return zu(n,["r","g","b"])?r=Gs(e):zu(n,["h","s","l"])?r=D_(e):zu(n,["h","s","v"])&&(r=e),HV(r,!zu(n,["a"])&&e.a===1)}return e}const Td={h:0,s:0,v:0,a:1},X_={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,n)=>({...e,r:Number(n)})},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,n)=>({...e,g:Number(n)})},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,n)=>({...e,b:Number(n)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:n}=e;return n!=null?Math.round(n*100)/100:1},getColor:(e,n)=>({...e,a:Number(n)})}],to:Gs,from:dm};var xC;const ZV={...X_,inputs:(xC=X_.inputs)==null?void 0:xC.slice(0,3)},J_={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,n)=>({...e,h:Number(n)})},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,n)=>({...e,s:Number(n)})},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,n)=>({...e,l:Number(n)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:n}=e;return n!=null?Math.round(n*100)/100:1},getColor:(e,n)=>({...e,a:Number(n)})}],to:D_,from:i0},KV={...J_,inputs:J_.inputs.slice(0,3)},YP={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,n)=>n}],to:hk,from:AR},YV={...YP,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,n)=>n}]},ju={rgb:ZV,rgba:X_,hsl:KV,hsla:J_,hex:YV,hexa:YP},XV=e=>{let{label:n,...r}=e;return Z("div",{class:"v-color-picker-edit__input"},[Z("input",NE(RT(r)),null),Z("span",null,[n])])},JV=Ue({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(ju).includes(e)},modes:{type:Array,default:()=>Object.keys(ju),validator:e=>Array.isArray(e)&&e.every(n=>Object.keys(ju).includes(n))},...Ht()},"VColorPickerEdit"),QV=ja({name:"VColorPickerEdit",props:JV(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,n){let{emit:r}=n;const s=ee(()=>e.modes.map(f=>({...ju[f],name:f}))),c=ee(()=>{var a;const f=s.value.find(b=>b.name===e.mode);if(!f)return[];const d=e.color?f.to(e.color):null;return(a=f.inputs)==null?void 0:a.map(b=>{let{getValue:C,getColor:w,...k}=b;return{...f.inputProps,...k,disabled:e.disabled,value:d&&C(d),onChange:A=>{const I=A.target;I&&r("update:color",f.from(w(d??f.to(Td),I.value)))}}})});return _t(()=>{var f;return Z("div",{class:gt(["v-color-picker-edit",e.class]),style:zt(e.style)},[(f=c.value)==null?void 0:f.map(d=>G(XV,d,null)),s.value.length>1&&G(Mn,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const d=s.value.findIndex(a=>a.name===e.mode);r("update:mode",s.value[(d+1)%s.value.length].name)}},null)])}),{}}}),E0=Symbol.for("vuetify:v-slider");function Q_(e,n,r){const s=r==="vertical",c=n.getBoundingClientRect(),f="touches"in e?e.touches[0]:e;return s?f.clientY-(c.top+c.height/2):f.clientX-(c.left+c.width/2)}function eO(e,n){return"touches"in e&&e.touches.length?e.touches[0][n]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][n]:e[n]}const XP=Ue({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...yi(),...ir({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),JP=e=>{const n=ee(()=>parseFloat(e.min)),r=ee(()=>parseFloat(e.max)),s=ee(()=>Number(e.step)>0?parseFloat(e.step):0),c=ee(()=>Math.max(E1(s.value),E1(n.value)));function f(d){if(d=parseFloat(d),s.value<=0)return d;const a=di(d,n.value,r.value),b=n.value%s.value;let C=Math.round((a-b)/s.value)*s.value+b;return a>C&&C+s.value>r.value&&(C=r.value),parseFloat(Math.min(C,r.value).toFixed(c.value))}return{min:n,max:r,step:s,decimals:c,roundValue:f}},QP=e=>{let{props:n,steps:r,onSliderStart:s,onSliderMove:c,onSliderEnd:f,getActiveThumb:d}=e;const{isRtl:a}=nr(),b=Ee(()=>n.reverse),C=ee(()=>n.direction==="vertical"),w=ee(()=>C.value!==b.value),{min:k,max:A,step:I,decimals:R,roundValue:F}=r,B=ee(()=>parseInt(n.thumbSize,10)),$=ee(()=>parseInt(n.tickSize,10)),O=ee(()=>parseInt(n.trackSize,10)),q=ee(()=>(A.value-k.value)/I.value),X=Ee(()=>n.disabled),te=ee(()=>n.error||n.disabled?void 0:n.thumbColor??n.color),ae=ee(()=>n.error||n.disabled?void 0:n.trackColor??n.color),ue=ee(()=>n.error||n.disabled?void 0:n.trackFillColor??n.color),ce=Mt(!1),fe=Mt(0),pe=tt(),_e=tt();function re(xt){var ut;const Re=(ut=pe.value)==null?void 0:ut.$el;if(!Re)return;const vt=n.direction==="vertical",st=vt?"top":"left",Ye=vt?"height":"width",St=vt?"clientY":"clientX",{[st]:ie,[Ye]:le}=Re.getBoundingClientRect(),Le=eO(xt,St);let Ze=di((Le-ie-fe.value)/le)||0;return(vt?w.value:w.value!==a.value)&&(Ze=1-Ze),F(k.value+Ze*(A.value-k.value))}const be=xt=>{const Re=re(xt);Re!=null&&f({value:Re}),ce.value=!1,fe.value=0},je=xt=>{const Re=re(xt);_e.value=d(xt),_e.value&&(ce.value=!0,_e.value.contains(xt.target)?fe.value=Q_(xt,_e.value,n.direction):(fe.value=0,Re!=null&&c({value:Re})),Re!=null&&s({value:Re}),Dn(()=>{var vt;return(vt=_e.value)==null?void 0:vt.focus()}))},Be={passive:!0,capture:!0};function Fe(xt){const Re=re(xt);Re!=null&&c({value:Re})}function Ke(xt){xt.stopPropagation(),xt.preventDefault(),be(xt),window.removeEventListener("mousemove",Fe,Be),window.removeEventListener("mouseup",Ke)}function ft(xt){var Re;be(xt),window.removeEventListener("touchmove",Fe,Be),(Re=xt.target)==null||Re.removeEventListener("touchend",ft)}function mt(xt){var Re;je(xt),window.addEventListener("touchmove",Fe,Be),(Re=xt.target)==null||Re.addEventListener("touchend",ft,{passive:!1})}function ze(xt){xt.button===0&&(xt.preventDefault(),je(xt),window.addEventListener("mousemove",Fe,Be),window.addEventListener("mouseup",Ke,{passive:!1}))}const Se=xt=>{const Re=(xt-k.value)/(A.value-k.value)*100;return di(isNaN(Re)?0:Re,0,100)},Me=Ee(()=>n.showTicks),Qe=ee(()=>Me.value?n.ticks?Array.isArray(n.ticks)?n.ticks.map(xt=>({value:xt,position:Se(xt),label:xt.toString()})):Object.keys(n.ticks).map(xt=>({value:parseFloat(xt),position:Se(parseFloat(xt)),label:n.ticks[xt]})):q.value!==1/0?Oa(q.value+1).map(xt=>{const Re=k.value+xt*I.value;return{value:Re,position:Se(Re)}}):[]:[]),Ft=ee(()=>Qe.value.some(xt=>{let{label:Re}=xt;return!!Re})),Tt={activeThumbRef:_e,color:Ee(()=>n.color),decimals:R,disabled:X,direction:Ee(()=>n.direction),elevation:Ee(()=>n.elevation),hasLabels:Ft,isReversed:b,indexFromEnd:w,min:k,max:A,mousePressed:ce,numTicks:q,onSliderMousedown:ze,onSliderTouchstart:mt,parsedTicks:Qe,parseMouseMove:re,position:Se,readonly:Ee(()=>n.readonly),rounded:Ee(()=>n.rounded),roundValue:F,showTicks:Me,startOffset:fe,step:I,thumbSize:B,thumbColor:te,thumbLabel:Ee(()=>n.thumbLabel),ticks:Ee(()=>n.ticks),tickSize:$,trackColor:ae,trackContainerRef:pe,trackFillColor:ue,trackSize:O,vertical:C};return ri(E0,Tt),Tt},tO=Ue({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...Ht()},"VSliderThumb"),eb=ht()({name:"VSliderThumb",directives:{vRipple:aa},props:tO(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=_n(E0),{isRtl:f,rtlClasses:d}=nr();if(!c)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:a,max:b,thumbColor:C,step:w,disabled:k,thumbSize:A,thumbLabel:I,direction:R,isReversed:F,vertical:B,readonly:$,elevation:O,mousePressed:q,decimals:X,indexFromEnd:te}=c,ae=ee(()=>k.value?void 0:O.value),{elevationClasses:ue}=kr(ae),{textColorClasses:ce,textColorStyles:fe}=Br(C),{pageup:pe,pagedown:_e,end:re,home:be,left:je,right:Be,down:Fe,up:Ke}=T_,ft=[pe,_e,re,be,je,Be,Fe,Ke],mt=ee(()=>w.value?[1,2,3]:[1,5,10]);function ze(Me,Qe){if(!ft.includes(Me.key))return;Me.preventDefault();const Ft=w.value||.1,Tt=(b.value-a.value)/Ft;if([je,Be,Fe,Ke].includes(Me.key)){const Re=(B.value?[f.value?je:Be,F.value?Fe:Ke]:te.value!==f.value?[je,Ke]:[Be,Ke]).includes(Me.key)?1:-1,vt=Me.shiftKey?2:Me.ctrlKey?1:0;Re===-1&&Qe===b.value&&!vt&&!Number.isInteger(Tt)?Qe=Qe-Tt%1*Ft:Qe=Qe+Re*Ft*mt.value[vt]}else if(Me.key===be)Qe=a.value;else if(Me.key===re)Qe=b.value;else{const xt=Me.key===_e?1:-1;Qe=Qe-xt*Ft*(Tt>100?Tt/10:10)}return Math.max(e.min,Math.min(e.max,Qe))}function Se(Me){const Qe=ze(Me,e.modelValue);Qe!=null&&s("update:modelValue",Qe)}return _t(()=>{const Me=Nt(te.value?100-e.position:e.position,"%");return Z("div",{class:gt(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&q.value},e.class,d.value]),style:zt([{"--v-slider-thumb-position":Me,"--v-slider-thumb-size":Nt(A.value)},e.style]),role:"slider",tabindex:k.value?-1:0,"aria-label":e.name,"aria-valuemin":a.value,"aria-valuemax":b.value,"aria-valuenow":e.modelValue,"aria-readonly":!!$.value,"aria-orientation":R.value,onKeydown:$.value?void 0:Se},[Z("div",{class:gt(["v-slider-thumb__surface",ce.value,ue.value]),style:{...fe.value}},null),ei(Z("div",{class:gt(["v-slider-thumb__ripple",ce.value]),style:zt(fe.value)},null),[[aa,e.ripple,null,{circle:!0,center:!0}]]),G(f0,{origin:"bottom center"},{default:()=>{var Qe;return[ei(Z("div",{class:"v-slider-thumb__label-container"},[Z("div",{class:gt(["v-slider-thumb__label",ce.value])},[Z("div",null,[((Qe=r["thumb-label"])==null?void 0:Qe.call(r,{modelValue:e.modelValue}))??e.modelValue.toFixed(w.value?X.value:1)])])]),[[xs,I.value&&e.focused||I.value==="always"]])]}})])}),{}}}),nO=Ue({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Ht()},"VSliderTrack"),eI=ht()({name:"VSliderTrack",props:nO(),emits:{},setup(e,n){let{slots:r}=n;const s=_n(E0);if(!s)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:c,parsedTicks:f,rounded:d,showTicks:a,tickSize:b,trackColor:C,trackFillColor:w,trackSize:k,vertical:A,min:I,max:R,indexFromEnd:F}=s,{roundedClasses:B}=Bi(d),{backgroundColorClasses:$,backgroundColorStyles:O}=ti(w),{backgroundColorClasses:q,backgroundColorStyles:X}=ti(C),te=ee(()=>`inset-${A.value?"block":"inline"}-${F.value?"end":"start"}`),ae=ee(()=>A.value?"height":"width"),ue=ee(()=>({[te.value]:"0%",[ae.value]:"100%"})),ce=ee(()=>e.stop-e.start),fe=ee(()=>({[te.value]:Nt(e.start,"%"),[ae.value]:Nt(ce.value,"%")})),pe=ee(()=>a.value?(A.value?f.value.slice().reverse():f.value).map((re,be)=>{var Be;const je=re.value!==I.value&&re.value!==R.value?Nt(re.position,"%"):void 0;return Z("div",{key:re.value,class:gt(["v-slider-track__tick",{"v-slider-track__tick--filled":re.position>=e.start&&re.position<=e.stop,"v-slider-track__tick--first":re.value===I.value,"v-slider-track__tick--last":re.value===R.value}]),style:{[te.value]:je}},[(re.label||r["tick-label"])&&Z("div",{class:"v-slider-track__tick-label"},[((Be=r["tick-label"])==null?void 0:Be.call(r,{tick:re,index:be}))??re.label])])}):[]);return _t(()=>Z("div",{class:gt(["v-slider-track",B.value,e.class]),style:zt([{"--v-slider-track-size":Nt(k.value),"--v-slider-tick-size":Nt(b.value)},e.style])},[Z("div",{class:gt(["v-slider-track__background",q.value,{"v-slider-track__background--opacity":!!c.value||!w.value}]),style:{...ue.value,...X.value}},null),Z("div",{class:gt(["v-slider-track__fill",$.value]),style:{...fe.value,...O.value}},null),a.value&&Z("div",{class:gt(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":a.value==="always"}])},[pe.value])])),{}}}),iO=Ue({..._m(),...XP(),...Do(),modelValue:{type:[Number,String],default:0}},"VSlider"),tb=ht()({name:"VSlider",props:iO(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=tt(),f=tt(),{rtlClasses:d}=nr(),a=JP(e),b=Qt(e,"modelValue",void 0,ue=>a.roundValue(ue??a.min.value)),{min:C,max:w,mousePressed:k,roundValue:A,onSliderMousedown:I,onSliderTouchstart:R,trackContainerRef:F,position:B,hasLabels:$,readonly:O}=QP({props:e,steps:a,onSliderStart:()=>{s("start",b.value)},onSliderEnd:ue=>{let{value:ce}=ue;const fe=A(ce);b.value=fe,s("end",fe)},onSliderMove:ue=>{let{value:ce}=ue;return b.value=A(ce)},getActiveThumb:()=>{var ue;return(ue=c.value)==null?void 0:ue.$el}}),{isFocused:q,focus:X,blur:te}=Mo(e),ae=ee(()=>B(b.value));return _t(()=>{const ue=Wr.filterProps(e),ce=!!(e.label||r.label||r.prepend);return G(Wr,lt({ref:f,class:["v-slider",{"v-slider--has-labels":!!r["tick-label"]||$.value,"v-slider--focused":q.value,"v-slider--pressed":k.value,"v-slider--disabled":e.disabled},d.value,e.class],style:e.style},ue,{focused:q.value}),{...r,prepend:ce?fe=>{var pe,_e;return Z(qt,null,[((pe=r.label)==null?void 0:pe.call(r,fe))??(e.label?G(Yd,{id:fe.id.value,class:"v-slider__label",text:e.label},null):void 0),(_e=r.prepend)==null?void 0:_e.call(r,fe)])}:void 0,default:fe=>{let{id:pe,messagesId:_e}=fe;return Z("div",{class:"v-slider__container",onMousedown:O.value?void 0:I,onTouchstartPassive:O.value?void 0:R},[Z("input",{id:pe.value,name:e.name||pe.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:b.value},null),G(eI,{ref:F,start:0,stop:ae.value},{"tick-label":r["tick-label"]}),G(eb,{ref:c,"aria-describedby":_e.value,focused:q.value,min:C.value,max:w.value,modelValue:b.value,"onUpdate:modelValue":re=>b.value=re,position:ae.value,elevation:e.elevation,onFocus:X,onBlur:te,ripple:e.ripple,name:e.name},{"thumb-label":r["thumb-label"]})])}})}),Pr({focus:()=>{var ue;return(ue=c.value)==null?void 0:ue.$el.focus()}},f)}}),rO=Ue({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...Ht()},"VColorPickerPreview"),aO=ja({name:"VColorPickerPreview",props:rO(),emits:{"update:color":e=>!0},setup(e,n){let{emit:r}=n;const s=new AbortController;Bg(()=>s.abort());async function c(){if(!k1||e.disabled)return;const f=new window.EyeDropper;try{const d=await f.open({signal:s.signal}),a=dm(Fa(d.sRGBHex));r("update:color",{...e.color??Td,...a})}catch{}}return _t(()=>{var f,d;return Z("div",{class:gt(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:zt(e.style)},[k1&&Z("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[G(Mn,{density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:c},null)]),Z("div",{class:"v-color-picker-preview__dot"},[Z("div",{style:{background:uk(e.color??Td)}},null)]),Z("div",{class:"v-color-picker-preview__sliders"},[G(tb,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(f=e.color)==null?void 0:f.h,"onUpdate:modelValue":a=>r("update:color",{...e.color??Td,h:a}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&G(tb,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:((d=e.color)==null?void 0:d.a)??1,"onUpdate:modelValue":a=>r("update:color",{...e.color??Td,a}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),sO={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},oO={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},lO={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},uO={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},cO={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},dO={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},hO={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},fO={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},mO={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},pO={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},gO={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},vO={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},yO={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},_O={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},bO={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},xO={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},wO={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},SO={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},CO={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},TO={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},kO={red:sO,pink:oO,purple:lO,deepPurple:uO,indigo:cO,blue:dO,lightBlue:hO,cyan:fO,teal:mO,green:pO,lightGreen:gO,lime:vO,yellow:yO,amber:_O,orange:bO,deepOrange:xO,brown:wO,blueGrey:SO,grey:CO,shades:TO},PO=Ue({swatches:{type:Array,default:()=>IO(kO)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Ht()},"VColorPickerSwatches");function IO(e){return Object.keys(e).map(n=>{const r=e[n];return r.base?[r.base,r.darken4,r.darken3,r.darken2,r.darken1,r.lighten1,r.lighten2,r.lighten3,r.lighten4,r.lighten5]:[r.black,r.white,r.transparent]})}const AO=ja({name:"VColorPickerSwatches",props:PO(),emits:{"update:color":e=>!0},setup(e,n){let{emit:r}=n;return _t(()=>Z("div",{class:gt(["v-color-picker-swatches",e.class]),style:zt([{maxHeight:Nt(e.maxHeight)},e.style])},[Z("div",null,[e.swatches.map(s=>Z("div",{class:"v-color-picker-swatches__swatch"},[s.map(c=>{const f=Fa(c),d=dm(f),a=lk(f);return Z("div",{class:"v-color-picker-swatches__color",onClick:()=>d&&r("update:color",d)},[Z("div",{style:{background:a}},[e.color&&Lr(e.color,d)?G(Yn,{size:"x-small",icon:"$success",color:RR(c,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),EO=Ao("v-picker-title"),M0=Ue({color:String,..._a(),...Ht(),...Zi(),...ir(),...Eo(),...Zd(),...yi(),...bn(),...Un()},"VSheet"),nm=ht()({name:"VSheet",props:M0(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{borderClasses:d}=Pa(e),{dimensionStyles:a}=Ki(e),{elevationClasses:b}=kr(e),{locationStyles:C}=sc(e),{positionClasses:w}=Kd(e),{roundedClasses:k}=Bi(e);return _t(()=>G(e.tag,{class:gt(["v-sheet",s.value,c.value,d.value,b.value,w.value,k.value,e.class]),style:zt([f.value,a.value,C.value,e.style])},r)),{}}}),ev=Ue({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...M0()},"VPicker"),$d=ht()({name:"VPicker",props:ev(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color);return _t(()=>{const f=nm.filterProps(e),d=!!(e.title||r.title);return G(nm,lt(f,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!r.actions},e.class],style:e.style}),{default:()=>{var a;return[!e.hideHeader&&Z("div",{key:"header",class:gt([s.value]),style:zt([c.value])},[d&&G(EO,{key:"picker-title"},{default:()=>{var b;return[((b=r.title)==null?void 0:b.call(r))??e.title]}}),r.header&&Z("div",{class:"v-picker__header"},[r.header()])]),Z("div",{class:"v-picker__body"},[(a=r.default)==null?void 0:a.call(r)]),r.actions&&G(Sn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[Z("div",{class:"v-picker__actions"},[r.actions()])]})]}})}),{}}}),MO=Ue({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(ju).includes(e)},modes:{type:Array,default:()=>Object.keys(ju),validator:e=>Array.isArray(e)&&e.every(n=>Object.keys(ju).includes(n))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...ev({hideHeader:!0})},"VColorPicker"),DO=ja({name:"VColorPicker",props:MO(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"mode"),c=tt(null),f=Qt(e,"modelValue",void 0,w=>{if(w==null||w==="")return null;let k;try{k=dm(Fa(w))}catch{return null}return k},w=>w?WV(w,e.modelValue):null),d=ee(()=>f.value?{...f.value,h:c.value??f.value.h}:null),{rtlClasses:a}=nr();let b=!0;Bt(f,w=>{if(!b){b=!0;return}w&&(c.value=w.h)},{immediate:!0});const C=w=>{b=!1,c.value=w.h,f.value=w};return Hd(()=>{e.modes.includes(s.value)||(s.value=e.modes[0])}),Li({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),_t(()=>{const w=$d.filterProps(e);return G($d,lt(w,{class:["v-color-picker",a.value,e.class],style:[{"--v-color-picker-color-hsv":uk({...d.value??Td,a:1})},e.style]}),{...r,default:()=>Z(qt,null,[!e.hideCanvas&&G(qV,{key:"canvas",color:d.value,"onUpdate:color":C,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&Z("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&G(aO,{key:"preview",color:d.value,"onUpdate:color":C,hideAlpha:!s.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&G(QV,{key:"edit",modes:e.modes,mode:s.value,"onUpdate:mode":k=>s.value=k,color:d.value,"onUpdate:color":C,disabled:e.disabled},null)]),e.showSwatches&&G(AO,{key:"swatches",color:d.value,"onUpdate:color":C,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),RO=Ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Qd({filterKeys:["title"]}),...I0({hideNoData:!0,returnObject:!0}),...hi(Sm({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:!1})},"VCombobox"),LO=ht()({name:"VCombobox",props:RO(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,n){var St;let{emit:r,slots:s}=n;const{t:c}=vi(),f=tt(),d=Mt(!1),a=Mt(!0),b=Mt(!1),C=tt(),w=tt(),k=Mt(-1);let A=!1;const{items:I,transformIn:R,transformOut:F}=w0(e),{textColorClasses:B,textColorStyles:$}=Br(()=>{var ie;return(ie=f.value)==null?void 0:ie.color}),O=Qt(e,"modelValue",[],ie=>R(Di(ie)),ie=>{const le=F(ie);return e.multiple?le:le[0]??null}),q=bm(e),X=ee(()=>!!(e.chips||s.chip)),te=ee(()=>X.value||!!s.selection),ae=Mt(!e.multiple&&!te.value?((St=O.value[0])==null?void 0:St.title)??"":""),ue=ee({get:()=>ae.value,set:ie=>{var le;if(ae.value=ie??"",!e.multiple&&!te.value&&(O.value=[bl(e,ie)],Dn(()=>{var Le;return(Le=w.value)==null?void 0:Le.scrollToIndex(0)})),ie&&e.multiple&&((le=e.delimiters)!=null&&le.length)){const Le=ie.split(new RegExp(`(?:${e.delimiters.join("|")})+`));Le.length>1&&(Le.forEach(Ze=>{Ze=Ze.trim(),Ze&&Re(bl(e,Ze))}),ae.value="")}ie||(k.value=-1),a.value=!ie}}),ce=ee(()=>typeof e.counterValue=="function"?e.counterValue(O.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?O.value.length:ue.value.length),{filteredItems:fe,getMatches:pe}=eh(e,I,()=>a.value?"":ue.value),_e=ee(()=>e.hideSelected?fe.value.filter(ie=>!O.value.some(le=>le.value===ie.value)):fe.value),re=ee(()=>e.hideNoData&&!_e.value.length||q.isReadonly.value||q.isDisabled.value),be=Qt(e,"menu"),je=ee({get:()=>be.value,set:ie=>{var le;be.value&&!ie&&((le=C.value)!=null&&le.openChildren.size)||ie&&re.value||(be.value=ie)}}),Be=Ee(()=>je.value?e.closeText:e.openText);Bt(ae,ie=>{A?Dn(()=>A=!1):d.value&&!je.value&&(je.value=!0),r("update:search",ie)}),Bt(O,ie=>{var le;!e.multiple&&!te.value&&(ae.value=((le=ie[0])==null?void 0:le.title)??"")});const Fe=ee(()=>O.value.map(ie=>ie.value)),Ke=ee(()=>{var le;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&ue.value===((le=_e.value[0])==null?void 0:le.title))&&_e.value.length>0&&!a.value&&!b.value}),ft=tt(),mt=P0(ft,f);function ze(ie){A=!0,e.openOnClear&&(je.value=!0)}function Se(){re.value||(je.value=!0)}function Me(ie){re.value||(d.value&&(ie.preventDefault(),ie.stopPropagation()),je.value=!je.value)}function Qe(ie){var le;(zd(ie)||ie.key==="Backspace")&&((le=f.value)==null||le.focus())}function Ft(ie){var Ze,ut,Je,kt;if(nR(ie)||q.isReadonly.value)return;const le=(Ze=f.value)==null?void 0:Ze.selectionStart,Le=O.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(ie.key)&&ie.preventDefault(),["Enter","ArrowDown"].includes(ie.key)&&(je.value=!0),["Escape"].includes(ie.key)&&(je.value=!1),["Enter","Escape","Tab"].includes(ie.key)&&(Ke.value&&["Enter","Tab"].includes(ie.key)&&!O.value.some(ct=>{let{value:Dt}=ct;return Dt===_e.value[0].value})&&Re(fe.value[0]),a.value=!0),ie.key==="ArrowDown"&&Ke.value&&((ut=ft.value)==null||ut.focus("next")),ie.key==="Enter"&&ue.value&&(Re(bl(e,ue.value)),te.value&&(ae.value="")),["Backspace","Delete"].includes(ie.key)){if(!e.multiple&&te.value&&O.value.length>0&&!ue.value)return Re(O.value[0],!1);if(~k.value){ie.preventDefault();const ct=k.value;Re(O.value[k.value],!1),k.value=ct>=Le-1?Le-2:ct}else ie.key==="Backspace"&&!ue.value&&(k.value=Le-1);return}if(e.multiple)if(ie.key==="ArrowLeft"){if(k.value<0&&le&&le>0)return;const ct=k.value>-1?k.value-1:Le-1;O.value[ct]?k.value=ct:(k.value=-1,(Je=f.value)==null||Je.setSelectionRange(ue.value.length,ue.value.length))}else if(ie.key==="ArrowRight"){if(k.value<0)return;const ct=k.value+1;O.value[ct]?k.value=ct:(k.value=-1,(kt=f.value)==null||kt.setSelectionRange(0,0))}else~k.value&&zd(ie)&&(k.value=-1)}function Tt(){var ie;e.eager&&((ie=w.value)==null||ie.calculateVisibleItems())}function xt(){var ie;d.value&&(a.value=!0,(ie=f.value)==null||ie.focus())}function Re(ie){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!ie||ie.props.disabled))if(e.multiple){const Le=O.value.findIndex(ut=>(e.valueComparator||Lr)(ut.value,ie.value)),Ze=le??!~Le;if(~Le){const ut=Ze?[...O.value,ie]:[...O.value];ut.splice(Le,1),O.value=ut}else Ze&&(O.value=[...O.value,ie]);e.clearOnSelect&&(ue.value="")}else{const Le=le!==!1;O.value=Le?[ie]:[],ae.value=Le&&!te.value?ie.title:"",Dn(()=>{je.value=!1,a.value=!0})}}function vt(ie){d.value=!0,setTimeout(()=>{b.value=!0})}function st(ie){b.value=!1}function Ye(ie){(ie==null||ie===""&&!e.multiple&&!te.value)&&(O.value=[])}return Bt(d,(ie,le)=>{if(!(ie||ie===le)&&(k.value=-1,je.value=!1,ue.value)){if(e.multiple){Re(bl(e,ue.value));return}if(!te.value)return;O.value.some(Le=>{let{title:Ze}=Le;return Ze===ue.value})?ae.value="":Re(bl(e,ue.value))}}),Bt(je,()=>{if(!e.hideSelected&&je.value&&O.value.length){const ie=_e.value.findIndex(le=>O.value.some(Le=>(e.valueComparator||Lr)(Le.value,le.value)));Kn&&window.requestAnimationFrame(()=>{var le;ie>=0&&((le=w.value)==null||le.scrollToIndex(ie))})}}),Bt(()=>e.items,(ie,le)=>{je.value||d.value&&!le.length&&ie.length&&(je.value=!0)}),_t(()=>{const ie=!!(!e.hideNoData||_e.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),le=O.value.length>0,Le=ko.filterProps(e);return G(ko,lt({ref:f},Le,{modelValue:ue.value,"onUpdate:modelValue":[Ze=>ue.value=Ze,Ye],focused:d.value,"onUpdate:focused":Ze=>d.value=Ze,validationValue:O.externalValue,counterValue:ce.value,dirty:le,class:["v-combobox",{"v-combobox--active-menu":je.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!te.value,"v-combobox--selecting-index":k.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:q.isReadonly.value,placeholder:le?void 0:e.placeholder,"onClick:clear":ze,"onMousedown:control":Se,onKeydown:Ft}),{...s,default:()=>Z(qt,null,[G(Fd,lt({ref:C,modelValue:je.value,"onUpdate:modelValue":Ze=>je.value=Ze,activator:"parent",contentClass:"v-combobox__content",disabled:re.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Tt,onAfterLeave:xt},e.menuProps),{default:()=>[ie&&G(Od,lt({ref:ft,filterable:!0,selected:Fe.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Ze=>Ze.preventDefault(),onKeydown:Qe,onFocusin:vt,onFocusout:st,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},mt,e.listProps),{default:()=>{var Ze,ut,Je;return[(Ze=s["prepend-item"])==null?void 0:Ze.call(s),!_e.value.length&&!e.hideNoData&&(((ut=s["no-data"])==null?void 0:ut.call(s))??G(ys,{key:"no-data",title:c(e.noDataText)},null)),G(Xg,{ref:w,renderless:!0,items:_e.value,itemKey:"value"},{default:kt=>{var Ut,Jt,ln;let{item:ct,index:Dt,itemRef:Pt}=kt;const nn=lt(ct.props,{ref:Pt,key:ct.value,active:Ke.value&&Dt===0?!0:void 0,onClick:()=>Re(ct,null)});return ct.type==="divider"?((Ut=s.divider)==null?void 0:Ut.call(s,{props:ct.raw,index:Dt}))??G($a,lt(ct.props,{key:`divider-${Dt}`}),null):ct.type==="subheader"?((Jt=s.subheader)==null?void 0:Jt.call(s,{props:ct.raw,index:Dt}))??G(Jd,lt(ct.props,{key:`subheader-${Dt}`}),null):((ln=s.item)==null?void 0:ln.call(s,{item:ct,index:Dt,props:nn}))??G(ys,lt(nn,{role:"option"}),{prepend:gn=>{let{isSelected:En}=gn;return Z(qt,null,[e.multiple&&!e.hideSelected?G(qs,{key:ct.value,modelValue:En,ripple:!1,tabindex:"-1"},null):void 0,ct.props.prependAvatar&&G(Ja,{image:ct.props.prependAvatar},null),ct.props.prependIcon&&G(Yn,{icon:ct.props.prependIcon},null)])},title:()=>{var gn;return a.value?ct.title:VP("v-combobox",ct.title,(gn=pe(ct))==null?void 0:gn.title)}})}}),(Je=s["append-item"])==null?void 0:Je.call(s)]}})]}),O.value.map((Ze,ut)=>{function Je(Pt){Pt.stopPropagation(),Pt.preventDefault(),Re(Ze,!1)}const kt={"onClick:close":Je,onKeydown(Pt){Pt.key!=="Enter"&&Pt.key!==" "||(Pt.preventDefault(),Pt.stopPropagation(),Je(Pt))},onMousedown(Pt){Pt.preventDefault(),Pt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ct=X.value?!!s.chip:!!s.selection,Dt=ct?jg(X.value?s.chip({item:Ze,index:ut,props:kt}):s.selection({item:Ze,index:ut})):void 0;if(!(ct&&!Dt))return Z("div",{key:Ze.value,class:gt(["v-combobox__selection",ut===k.value&&["v-combobox__selection--selected",B.value]]),style:zt(ut===k.value?$.value:{})},[X.value?s.chip?G(Sn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Ze.title}}},{default:()=>[Dt]}):G(Xd,lt({key:"chip",closable:e.closableChips,size:"small",text:Ze.title,disabled:Ze.props.disabled},kt),null):Dt??Z("span",{class:"v-combobox__selection-text"},[Ze.title,e.multiple&&ut<O.value.length-1&&Z("span",{class:"v-combobox__selection-comma"},[wn(",")])])])})]),"append-inner":function(){var kt,ct;for(var Ze=arguments.length,ut=new Array(Ze),Je=0;Je<Ze;Je++)ut[Je]=arguments[Je];return Z(qt,null,[(kt=s["append-inner"])==null?void 0:kt.call(s,...ut),(!e.hideNoData||e.items.length)&&e.menuIcon?G(Yn,{class:"v-combobox__menu-icon",color:(ct=f.value)==null?void 0:ct.fieldIconColor,icon:e.menuIcon,onMousedown:Me,onClick:tk,"aria-label":c(Be.value),title:c(Be.value),tabindex:"-1"},null):void 0])}})}),Pr({isFocused:d,isPristine:a,menu:je,search:ue,selectionIndex:k,filteredItems:fe,select:Re},f)}}),zO=Ue({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),BO=ht()({name:"VConfirmEdit",props:zO(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=Qt(e,"modelValue"),f=tt();Ri(()=>{f.value=structuredClone(dn(c.value))});const{t:d}=vi(),a=ee(()=>Lr(c.value,f.value));function b(F){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(F):a.value}const C=ee(()=>b("save")),w=ee(()=>b("cancel"));function k(){c.value=f.value,r("save",f.value)}function A(){f.value=structuredClone(dn(c.value)),r("cancel")}function I(F){return Z(qt,null,[G(Mn,lt({disabled:w.value,variant:"text",color:e.color,onClick:A,text:d(e.cancelText)},F),null),G(Mn,lt({disabled:C.value,variant:"text",color:e.color,onClick:k,text:d(e.okText)},F),null)])}let R=!1;return _t(()=>{var F;return Z(qt,null,[(F=s.default)==null?void 0:F.call(s,{model:f,save:k,cancel:A,isPristine:a.value,get actions(){return R=!0,I}}),!e.hideActions&&!R&&I()])}),{save:k,cancel:A,isPristine:a}}}),tI=Ue({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),nI=Symbol.for("vuetify:datatable:expanded");function tv(e){const n=Ee(()=>e.expandOnClick),r=Qt(e,"expanded",e.expanded,a=>new Set(a),a=>[...a.values()]);function s(a,b){const C=new Set(r.value);b?C.add(a.value):C.delete(a.value),r.value=C}function c(a){return r.value.has(a.value)}function f(a){s(a,!c(a))}const d={expand:s,expanded:r,expandOnClick:n,isExpanded:c,toggleExpand:f};return ri(nI,d),d}function iI(){const e=_n(nI);if(!e)throw new Error("foo");return e}const D0=Ue({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),rI=Symbol.for("vuetify:data-table-group");function R0(e){return{groupBy:Qt(e,"groupBy")}}function nv(e){const{disableSort:n,groupBy:r,sortBy:s}=e,c=tt(new Set),f=ee(()=>r.value.map(w=>({...w,order:w.order??!1})).concat(n!=null&&n.value?[]:s.value));function d(w){return c.value.has(w.id)}function a(w){const k=new Set(c.value);d(w)?k.delete(w.id):k.add(w.id),c.value=k}function b(w){function k(A){const I=[];for(const R of A.items)"type"in R&&R.type==="group"?I.push(...k(R)):I.push(R);return[...new Set(I)]}return k({items:w})}const C={sortByWithGroups:f,toggleGroup:a,opened:c,groupBy:r,extractRows:b,isGroupOpen:d};return ri(rI,C),C}function aI(){const e=_n(rI);if(!e)throw new Error("Missing group!");return e}function VO(e,n){if(!e.length)return[];const r=new Map;for(const s of e){const c=Uu(s.raw,n);r.has(c)||r.set(c,[]),r.get(c).push(s)}return r}function sI(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!n.length)return[];const c=VO(e,n[0]),f=[],d=n.slice(1);return c.forEach((a,b)=>{const C=n[0],w=`${s}_${C}_${b}`;f.push({depth:r,id:w,key:C,value:b,items:d.length?sI(a,d,r+1,w):a,type:"group"})}),f}function oI(e,n){const r=[];for(const s of e)"type"in s&&s.type==="group"?(s.value!=null&&r.push(s),(n.has(s.id)||s.value==null)&&r.push(...oI(s.items,n))):r.push(s);return r}function iv(e,n,r){return{flatItems:ee(()=>{if(!n.value.length)return e.value;const c=sI(e.value,n.value.map(f=>f.key));return oI(c,r.value)})}}function rv(e){let{page:n,itemsPerPage:r,sortBy:s,groupBy:c,search:f}=e;const d=ji("VDataTable"),a=()=>({page:n.value,itemsPerPage:r.value,sortBy:s.value,groupBy:c.value,search:f.value});let b=null;Bt(a,C=>{Lr(b,C)||(b&&b.search!==C.search&&(n.value=1),d.emit("update:options",C),b=C)},{deep:!0,immediate:!0})}const L0=Ue({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),lI=Symbol.for("vuetify:data-table-pagination");function z0(e){const n=Qt(e,"page",void 0,s=>Number(s??1)),r=Qt(e,"itemsPerPage",void 0,s=>Number(s??10));return{page:n,itemsPerPage:r}}function B0(e){const{page:n,itemsPerPage:r,itemsLength:s}=e,c=ee(()=>r.value===-1?0:r.value*(n.value-1)),f=ee(()=>r.value===-1?s.value:Math.min(s.value,c.value+r.value)),d=ee(()=>r.value===-1||s.value===0?1:Math.ceil(s.value/r.value));Bt([n,d],()=>{n.value>d.value&&(n.value=d.value)});function a(A){r.value=A,n.value=1}function b(){n.value=di(n.value+1,1,d.value)}function C(){n.value=di(n.value-1,1,d.value)}function w(A){n.value=di(A,1,d.value)}const k={page:n,itemsPerPage:r,startIndex:c,stopIndex:f,pageCount:d,itemsLength:s,nextPage:b,prevPage:C,setPage:w,setItemsPerPage:a};return ri(lI,k),k}function OO(){const e=_n(lI);if(!e)throw new Error("Missing pagination!");return e}function uI(e){const n=ji("usePaginatedItems"),{items:r,startIndex:s,stopIndex:c,itemsPerPage:f}=e,d=ee(()=>f.value<=0?r.value:r.value.slice(s.value,c.value));return Bt(d,a=>{n.emit("update:currentItems",a)},{immediate:!0}),{paginatedItems:d}}const FO={showSelectAll:!1,allSelected:()=>[],select:e=>{var s;let{items:n,value:r}=e;return new Set(r?[(s=n[0])==null?void 0:s.value]:[])},selectAll:e=>{let{selected:n}=e;return n}},cI={showSelectAll:!0,allSelected:e=>{let{currentPage:n}=e;return n},select:e=>{let{items:n,value:r,selected:s}=e;for(const c of n)r?s.add(c.value):s.delete(c.value);return s},selectAll:e=>{let{value:n,currentPage:r,selected:s}=e;return cI.select({items:r,value:n,selected:s})}},dI={showSelectAll:!0,allSelected:e=>{let{allItems:n}=e;return n},select:e=>{let{items:n,value:r,selected:s}=e;for(const c of n)r?s.add(c.value):s.delete(c.value);return s},selectAll:e=>{let{value:n,allItems:r,selected:s}=e;return dI.select({items:r,value:n,selected:s})}},hI=Ue({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Lr}},"DataTable-select"),fI=Symbol.for("vuetify:data-table-selection");function av(e,n){let{allItems:r,currentPage:s}=n;const c=Qt(e,"modelValue",e.modelValue,O=>new Set(Di(O).map(q=>{var X;return((X=r.value.find(te=>e.valueComparator(q,te.value)))==null?void 0:X.value)??q})),O=>[...O.values()]),f=ee(()=>r.value.filter(O=>O.selectable)),d=ee(()=>s.value.filter(O=>O.selectable)),a=ee(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return FO;case"all":return dI;case"page":default:return cI}}),b=Mt(null);function C(O){return Di(O).every(q=>c.value.has(q.value))}function w(O){return Di(O).some(q=>c.value.has(q.value))}function k(O,q){const X=a.value.select({items:O,value:q,selected:new Set(c.value)});c.value=X}function A(O,q,X){const te=[];if(q=q??s.value.findIndex(ae=>ae.value===O.value),e.selectStrategy!=="single"&&(X!=null&&X.shiftKey)&&b.value!==null){const[ae,ue]=[b.value,q].sort((ce,fe)=>ce-fe);te.push(...s.value.slice(ae,ue+1).filter(ce=>ce.selectable))}else te.push(O),b.value=q;k(te,!C([O]))}function I(O){const q=a.value.selectAll({value:O,allItems:f.value,currentPage:d.value,selected:new Set(c.value)});c.value=q}const R=ee(()=>c.value.size>0),F=ee(()=>{const O=a.value.allSelected({allItems:f.value,currentPage:d.value});return!!O.length&&C(O)}),B=Ee(()=>a.value.showSelectAll),$={toggleSelect:A,select:k,selectAll:I,isSelected:C,isSomeSelected:w,someSelected:R,allSelected:F,showSelectAll:B,lastSelectedIndex:b,selectStrategy:a};return ri(fI,$),$}function sv(){const e=_n(fI);if(!e)throw new Error("Missing selection!");return e}const mI=Ue({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),pI=Symbol.for("vuetify:data-table-sort");function ov(e){const n=Qt(e,"sortBy"),r=Ee(()=>e.mustSort),s=Ee(()=>e.multiSort);return{sortBy:n,mustSort:r,multiSort:s}}function lv(e){const{sortBy:n,mustSort:r,multiSort:s,page:c}=e,f=b=>{if(b.key==null)return;let C=n.value.map(k=>({...k}))??[];const w=C.find(k=>k.key===b.key);w?w.order==="desc"?r.value&&C.length===1?w.order="asc":C=C.filter(k=>k.key!==b.key):w.order="desc":s.value?C.push({key:b.key,order:"asc"}):C=[{key:b.key,order:"asc"}],n.value=C,c&&(c.value=1)};function d(b){return!!n.value.find(C=>C.key===b.key)}const a={sortBy:n,toggleSort:f,isSorted:d};return ri(pI,a),a}function gI(){const e=_n(pI);if(!e)throw new Error("Missing sort!");return e}function V0(e,n,r,s){const c=vi();return{sortedItems:ee(()=>{var d,a;return r.value.length?$O(n.value,r.value,c.current.value,{transform:s==null?void 0:s.transform,sortFunctions:{...e.customKeySort,...(d=s==null?void 0:s.sortFunctions)==null?void 0:d.value},sortRawFunctions:(a=s==null?void 0:s.sortRawFunctions)==null?void 0:a.value}):n.value})}}function $O(e,n,r,s){const c=new Intl.Collator(r,{sensitivity:"accent",usage:"sort"});return e.map(d=>[d,s!=null&&s.transform?s.transform(d):d]).sort((d,a)=>{var b,C;for(let w=0;w<n.length;w++){let k=!1;const A=n[w].key,I=n[w].order??"asc";if(I===!1)continue;let R=Uu(d[1],A),F=Uu(a[1],A),B=d[0].raw,$=a[0].raw;if(I==="desc"&&([R,F]=[F,R],[B,$]=[$,B]),(b=s==null?void 0:s.sortRawFunctions)!=null&&b[A]){const O=s.sortRawFunctions[A](B,$);if(O==null)continue;if(k=!0,O)return O}if((C=s==null?void 0:s.sortFunctions)!=null&&C[A]){const O=s.sortFunctions[A](R,F);if(O==null)continue;if(k=!0,O)return O}if(!k&&(R instanceof Date&&F instanceof Date&&(R=R.getTime(),F=F.getTime()),[R,F]=[R,F].map(O=>O!=null?O.toString().toLocaleLowerCase():O),R!==F))return jp(R)&&jp(F)?0:jp(R)?-1:jp(F)?1:!isNaN(R)&&!isNaN(F)?Number(R)-Number(F):c.compare(R,F)}return 0}).map(d=>{let[a]=d;return a})}const jO=Ue({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function NO(e,n){const r=e.returnObject?n:Wi(n,e.itemValue),s=Wi(n,e.itemSelectable,!0);return{type:"item",value:r,selectable:s,raw:n}}function UO(e,n){const r=[];for(const s of n)r.push(NO(e,s));return r}function GO(e){return{items:ee(()=>UO(e,e.items))}}const qO=Ue({search:String,loading:Boolean,...Ht(),...jO(),...hI(),...mI(),...L0({itemsPerPage:5}),...tI(),...D0(),...Qd(),...bn(),...ws({transition:{component:Kf,hideOnLeave:!0}})},"VDataIterator"),HO=ht()({name:"VDataIterator",props:qO(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"groupBy"),c=Ee(()=>e.search),{items:f}=GO(e),{filteredItems:d}=eh(e,f,c,{transform:Se=>Se.raw}),{sortBy:a,multiSort:b,mustSort:C}=ov(e),{page:w,itemsPerPage:k}=z0(e),{toggleSort:A}=lv({sortBy:a,multiSort:b,mustSort:C,page:w}),{sortByWithGroups:I,opened:R,extractRows:F,isGroupOpen:B,toggleGroup:$}=nv({groupBy:s,sortBy:a}),{sortedItems:O}=V0(e,d,I,{transform:Se=>Se.raw}),{flatItems:q}=iv(O,s,R),X=Ee(()=>q.value.length),{startIndex:te,stopIndex:ae,pageCount:ue,prevPage:ce,nextPage:fe,setItemsPerPage:pe,setPage:_e}=B0({page:w,itemsPerPage:k,itemsLength:X}),{paginatedItems:re}=uI({items:q,startIndex:te,stopIndex:ae,itemsPerPage:k}),be=ee(()=>F(re.value)),{isSelected:je,select:Be,selectAll:Fe,toggleSelect:Ke}=av(e,{allItems:f,currentPage:be}),{isExpanded:ft,toggleExpand:mt}=tv(e);rv({page:w,itemsPerPage:k,sortBy:a,groupBy:s,search:c});const ze=ee(()=>({page:w.value,itemsPerPage:k.value,sortBy:a.value,pageCount:ue.value,toggleSort:A,prevPage:ce,nextPage:fe,setPage:_e,setItemsPerPage:pe,isSelected:je,select:Be,selectAll:Fe,toggleSelect:Ke,isExpanded:ft,toggleExpand:mt,isGroupOpen:B,toggleGroup:$,items:be.value,groupedItems:re.value}));return _t(()=>G(e.tag,{class:gt(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:zt(e.style)},{default:()=>{var Se,Me;return[(Se=r.header)==null?void 0:Se.call(r,ze.value),G(ia,{transition:e.transition},{default:()=>{var Qe,Ft;return[e.loading?G(gm,{key:"loader",name:"v-data-iterator",active:!0},{default:Tt=>{var xt;return(xt=r.loader)==null?void 0:xt.call(r,Tt)}}):Z("div",{key:"items"},[re.value.length?(Ft=r.default)==null?void 0:Ft.call(r,ze.value):(Qe=r["no-data"])==null?void 0:Qe.call(r)])]}}),(Me=r.footer)==null?void 0:Me.call(r,ze.value)]}})),{}}});function WO(){const e=tt([]);fT(()=>e.value=[]);function n(r,s){e.value[s]=r}return{refs:e,updateRef:n}}const ZO=Ue({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:tn,default:"$first"},prevIcon:{type:tn,default:"$prev"},nextIcon:{type:tn,default:"$next"},lastIcon:{type:tn,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,..._a(),...Ht(),...mr(),...ir(),...yi(),...Ks(),...bn({tag:"nav"}),...Un(),...es({variant:"text"})},"VPagination"),nb=ht()({name:"VPagination",props:ZO(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=Qt(e,"modelValue"),{t:f,n:d}=vi(),{isRtl:a}=nr(),{themeClasses:b}=Xn(e),{width:C}=Qa(),w=Mt(-1);Li(void 0,{scoped:!0});const{resizeRef:k}=vs(ce=>{if(!ce.length)return;const{target:fe,contentRect:pe}=ce[0],_e=fe.querySelector(".v-pagination__list > *");if(!_e)return;const re=pe.width,be=_e.offsetWidth+parseFloat(getComputedStyle(_e).marginRight)*2;w.value=F(re,be)}),A=ee(()=>parseInt(e.length,10)),I=ee(()=>parseInt(e.start,10)),R=ee(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):w.value>=0?w.value:F(C.value,58));function F(ce,fe){const pe=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((ce-fe*pe)/fe).toFixed(2))))}const B=ee(()=>{if(A.value<=0||isNaN(A.value)||A.value>Number.MAX_SAFE_INTEGER)return[];if(R.value<=0)return[];if(R.value===1)return[c.value];if(A.value<=R.value)return Oa(A.value,I.value);const ce=R.value%2===0,fe=ce?R.value/2:Math.floor(R.value/2),pe=ce?fe:fe+1,_e=A.value-fe;if(pe-c.value>=0)return[...Oa(Math.max(1,R.value-1),I.value),e.ellipsis,A.value];if(c.value-_e>=(ce?1:0)){const re=R.value-1,be=A.value-re+I.value;return[I.value,e.ellipsis,...Oa(re,be)]}else{const re=Math.max(1,R.value-2),be=re===1?c.value:c.value-Math.ceil(re/2)+I.value;return[I.value,e.ellipsis,...Oa(re,be),e.ellipsis,A.value]}});function $(ce,fe,pe){ce.preventDefault(),c.value=fe,pe&&s(pe,fe)}const{refs:O,updateRef:q}=WO();Li({VPaginationBtn:{color:Ee(()=>e.color),border:Ee(()=>e.border),density:Ee(()=>e.density),size:Ee(()=>e.size),variant:Ee(()=>e.variant),rounded:Ee(()=>e.rounded),elevation:Ee(()=>e.elevation)}});const X=ee(()=>B.value.map((ce,fe)=>{const pe=_e=>q(_e,fe);if(typeof ce=="string")return{isActive:!1,key:`ellipsis-${fe}`,page:ce,props:{ref:pe,ellipsis:!0,icon:!0,disabled:!0}};{const _e=ce===c.value;return{isActive:_e,key:ce,page:d(ce),props:{ref:pe,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:_e?e.activeColor:e.color,"aria-current":_e,"aria-label":f(_e?e.currentPageAriaLabel:e.pageAriaLabel,ce),onClick:re=>$(re,ce)}}}})),te=ee(()=>{const ce=!!e.disabled||c.value<=I.value,fe=!!e.disabled||c.value>=I.value+A.value-1;return{first:e.showFirstLastPage?{icon:a.value?e.lastIcon:e.firstIcon,onClick:pe=>$(pe,I.value,"first"),disabled:ce,"aria-label":f(e.firstAriaLabel),"aria-disabled":ce}:void 0,prev:{icon:a.value?e.nextIcon:e.prevIcon,onClick:pe=>$(pe,c.value-1,"prev"),disabled:ce,"aria-label":f(e.previousAriaLabel),"aria-disabled":ce},next:{icon:a.value?e.prevIcon:e.nextIcon,onClick:pe=>$(pe,c.value+1,"next"),disabled:fe,"aria-label":f(e.nextAriaLabel),"aria-disabled":fe},last:e.showFirstLastPage?{icon:a.value?e.firstIcon:e.lastIcon,onClick:pe=>$(pe,I.value+A.value-1,"last"),disabled:fe,"aria-label":f(e.lastAriaLabel),"aria-disabled":fe}:void 0}});function ae(){var fe;const ce=c.value-I.value;(fe=O.value[ce])==null||fe.$el.focus()}function ue(ce){ce.key===T_.left&&!e.disabled&&c.value>Number(e.start)?(c.value=c.value-1,Dn(ae)):ce.key===T_.right&&!e.disabled&&c.value<I.value+A.value-1&&(c.value=c.value+1,Dn(ae))}return _t(()=>G(e.tag,{ref:k,class:gt(["v-pagination",b.value,e.class]),style:zt(e.style),role:"navigation","aria-label":f(e.ariaLabel),onKeydown:ue,"data-test":"v-pagination-root"},{default:()=>[Z("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&Z("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(te.value.first):G(Mn,lt({_as:"VPaginationBtn"},te.value.first),null)]),Z("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(te.value.prev):G(Mn,lt({_as:"VPaginationBtn"},te.value.prev),null)]),X.value.map((ce,fe)=>Z("li",{key:ce.key,class:gt(["v-pagination__item",{"v-pagination__item--is-active":ce.isActive}]),"data-test":"v-pagination-item"},[r.item?r.item(ce):G(Mn,lt({_as:"VPaginationBtn"},ce.props),{default:()=>[ce.page]})])),Z("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(te.value.next):G(Mn,lt({_as:"VPaginationBtn"},te.value.next),null)]),e.showFirstLastPage&&Z("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(te.value.last):G(Mn,lt({_as:"VPaginationBtn"},te.value.last),null)])])]})),{}}}),O0=Ue({prevIcon:{type:tn,default:"$prev"},nextIcon:{type:tn,default:"$next"},firstIcon:{type:tn,default:"$first"},lastIcon:{type:tn,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),im=ht()({name:"VDataTableFooter",props:O0(),setup(e,n){let{slots:r}=n;const{t:s}=vi(),{page:c,pageCount:f,startIndex:d,stopIndex:a,itemsLength:b,itemsPerPage:C,setItemsPerPage:w}=OO(),k=ee(()=>e.itemsPerPageOptions.map(A=>typeof A=="number"?{value:A,title:A===-1?s("$vuetify.dataFooter.itemsPerPageAll"):String(A)}:{...A,title:isNaN(Number(A.title))?s(A.title):A.title}));return _t(()=>{var I;const A=nb.filterProps(e);return Z("div",{class:"v-data-table-footer"},[(I=r.prepend)==null?void 0:I.call(r),Z("div",{class:"v-data-table-footer__items-per-page"},[Z("span",{"aria-label":s(e.itemsPerPageText)},[s(e.itemsPerPageText)]),G(A0,{items:k.value,modelValue:C.value,"onUpdate:modelValue":R=>w(Number(R)),density:"compact",variant:"outlined","hide-details":!0},null)]),Z("div",{class:"v-data-table-footer__info"},[Z("div",null,[s(e.pageText,b.value?d.value+1:0,a.value,b.value)])]),Z("div",{class:"v-data-table-footer__pagination"},[G(nb,lt({modelValue:c.value,"onUpdate:modelValue":R=>c.value=R,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:f.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},A),null)])])}),{}}}),Cg=OR({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,n)=>{let{slots:r}=n;const s=e.tag??"td",c=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return G(s,{class:gt(["v-data-table__td",{"v-data-table-column--fixed":c==="start","v-data-table-column--fixed-end":c==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:Nt(e.height),width:Nt(e.width),maxWidth:Nt(e.maxWidth),left:c==="start"?Nt(e.fixedOffset||null):void 0,right:c==="end"?Nt(e.fixedEndOffset||null):void 0}},{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r)]}})}),KO=Ue({headers:Array},"DataTable-header"),vI=Symbol.for("vuetify:data-table-headers"),yI={title:"",sortable:!1},YO={...yI,width:48};function XO(){const n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(r=>({element:r,priority:0}));return{enqueue:(r,s)=>{let c=!1;for(let f=0;f<n.length;f++)if(n[f].priority>s){n.splice(f,0,{element:r,priority:s}),c=!0;break}c||n.push({element:r,priority:s})},size:()=>n.length,count:()=>{let r=0;if(!n.length)return 0;const s=Math.floor(n[0].priority);for(let c=0;c<n.length;c++)Math.floor(n[c].priority)===s&&(r+=1);return r},dequeue:()=>n.shift()}}function ib(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)n.push(e);else for(const r of e.children)ib(r,n);return n}function _I(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const r of e)r.key&&n.add(r.key),r.children&&_I(r.children,n);return n}function JO(e){if(e.key){if(e.key==="data-table-group")return yI;if(["data-table-expand","data-table-select"].includes(e.key))return YO}}function F0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(n,...e.children.map(r=>F0(r,n+1))):n}function QO(e){let n=!1;function r(a,b){var k;let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(!a)return;C!=="none"&&(a.fixed=C),a.fixed===!0&&(a.fixed="start");const w=b==="start"?(k=a.children)==null?void 0:k.toReversed():a.children;if(a.fixed===b)if(w)for(const A of w)r(A,b,b);else!n&&b==="start"?a.lastFixed=!0:!n&&b==="end"?a.firstFixedEnd=!0:isNaN(Number(a.width))?(`${a.key}`,void 0):a.minWidth=Math.max(Number(a.width)||0,Number(a.minWidth)||0),n=!0;else if(w)for(const A of w)r(A,b);else n=!1}for(const a of e.toReversed())r(a,"start");for(const a of e)r(a,"end");function s(a){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!a)return b;if(a.children){a.fixedOffset=b;for(const C of a.children)b=s(C,b)}else a.fixed&&a.fixed!=="end"&&(a.fixedOffset=b,b+=parseFloat(a.width||"0")||0);return b}let c=0;for(const a of e)c=s(a,c);function f(a){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!a)return b;if(a.children){a.fixedEndOffset=b;for(const C of a.children)b=f(C,b)}else a.fixed==="end"&&(a.fixedEndOffset=b,b+=parseFloat(a.width||"0")||0);return b}let d=0;for(const a of e.toReversed())d=f(a,d)}function eF(e,n){const r=[];let s=0;const c=XO(e);for(;c.size()>0;){let d=c.count();const a=[];let b=1;for(;d>0;){const{element:C,priority:w}=c.dequeue(),k=n-s-F0(C);if(a.push({...C,rowspan:k??1,colspan:C.children?ib(C).length:1}),C.children)for(const A of C.children){const I=w%1+b/Math.pow(10,s+2);c.enqueue(A,s+k+I)}b+=1,d-=1}s+=1,r.push(a)}return{columns:e.map(d=>ib(d)).flat(),headers:r}}function bI(e){const n=[];for(const r of e){const s={...JO(r),...r},c=s.key??(typeof s.value=="string"?s.value:null),f=s.value??c??null,d={...s,key:c,value:f,sortable:s.sortable??(s.key!=null||!!s.sort),children:s.children?bI(s.children):void 0};n.push(d)}return n}function $0(e,n){const r=tt([]),s=tt([]),c=tt({}),f=tt({}),d=tt({});Ri(()=>{var F,B,$;const C=(e.headers||Object.keys(e.items[0]??{}).map(O=>({key:O,title:Ws(O)}))).slice(),w=_I(C);(F=n==null?void 0:n.groupBy)!=null&&F.value.length&&!w.has("data-table-group")&&C.unshift({key:"data-table-group",title:"Group"}),(B=n==null?void 0:n.showSelect)!=null&&B.value&&!w.has("data-table-select")&&C.unshift({key:"data-table-select"}),($=n==null?void 0:n.showExpand)!=null&&$.value&&!w.has("data-table-expand")&&C.push({key:"data-table-expand"});const k=bI(C);QO(k);const A=Math.max(...k.map(O=>F0(O)))+1,I=eF(k,A);r.value=I.headers,s.value=I.columns;const R=I.headers.flat(1);for(const O of R)O.key&&(O.sortable&&(O.sort&&(c.value[O.key]=O.sort),O.sortRaw&&(f.value[O.key]=O.sortRaw)),O.filter&&(d.value[O.key]=O.filter))});const a={headers:r,columns:s,sortFunctions:c,sortRawFunctions:f,filterFunctions:d};return ri(vI,a),a}function uv(){const e=_n(vI);if(!e)throw new Error("Missing headers!");return e}const xI=Ue({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:tn,default:"$sortAsc"},sortDescIcon:{type:tn,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Ju(),...Wg()},"VDataTableHeaders"),Wu=ht()({name:"VDataTableHeaders",props:xI(),setup(e,n){let{slots:r}=n;const{t:s}=vi(),{toggleSort:c,sortBy:f,isSorted:d}=gI(),{someSelected:a,allSelected:b,selectAll:C,showSelectAll:w}=sv(),{columns:k,headers:A}=uv(),{loaderClasses:I}=pm(e);function R(fe,pe){if(!(e.sticky||e.fixedHeader)&&!fe.fixed)return;const _e=typeof fe.fixed=="string"?fe.fixed:fe.fixed?"start":"none";return{position:"sticky",left:_e==="start"?Nt(fe.fixedOffset):void 0,right:_e==="end"?Nt(fe.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${pe})`:void 0}}function F(fe,pe){fe.key==="Enter"&&!e.disableSort&&c(pe)}function B(fe){const pe=f.value.find(_e=>_e.key===fe.key);return pe?pe.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:$,backgroundColorStyles:O}=ti(()=>e.color),{displayClasses:q,mobile:X}=Qa(e),te=ee(()=>({headers:A.value,columns:k.value,toggleSort:c,isSorted:d,sortBy:f.value,someSelected:a.value,allSelected:b.value,selectAll:C,getSortIcon:B})),ae=ee(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},q.value,I.value]),ue=fe=>{let{column:pe,x:_e,y:re}=fe;const be=pe.key==="data-table-select"||pe.key==="data-table-expand",je=lt(e.headerProps??{},pe.headerProps??{});return G(Cg,lt({tag:"th",align:pe.align,class:[{"v-data-table__th--sortable":pe.sortable&&!e.disableSort,"v-data-table__th--sorted":d(pe),"v-data-table__th--fixed":pe.fixed},...ae.value],style:{width:Nt(pe.width),minWidth:Nt(pe.minWidth),maxWidth:Nt(pe.maxWidth),...R(pe,re)},colspan:pe.colspan,rowspan:pe.rowspan,fixed:pe.fixed,nowrap:pe.nowrap,lastFixed:pe.lastFixed,firstFixedEnd:pe.firstFixedEnd,noPadding:be,tabindex:pe.sortable?0:void 0,onClick:pe.sortable?()=>c(pe):void 0,onKeydown:pe.sortable?Be=>F(Be,pe):void 0},je),{default:()=>{var Ke;const Be=`header.${pe.key}`,Fe={column:pe,selectAll:C,isSorted:d,toggleSort:c,sortBy:f.value,someSelected:a.value,allSelected:b.value,getSortIcon:B};return r[Be]?r[Be](Fe):pe.key==="data-table-select"?((Ke=r["header.data-table-select"])==null?void 0:Ke.call(r,Fe))??(w.value&&G(qs,{modelValue:b.value,indeterminate:a.value&&!b.value,"onUpdate:modelValue":C},null)):Z("div",{class:"v-data-table-header__content"},[Z("span",null,[pe.title]),pe.sortable&&!e.disableSort&&G(Yn,{key:"icon",class:"v-data-table-header__sort-icon",icon:B(pe)},null),e.multiSort&&d(pe)&&Z("div",{key:"badge",class:gt(["v-data-table-header__sort-badge",...$.value]),style:zt(O.value)},[f.value.findIndex(ft=>ft.key===pe.key)+1])])}})},ce=()=>{const fe=ee(()=>k.value.filter(_e=>(_e==null?void 0:_e.sortable)&&!e.disableSort)),pe=ee(()=>{if(k.value.find(re=>re.key==="data-table-select")!=null)return b.value?"$checkboxOn":a.value?"$checkboxIndeterminate":"$checkboxOff"});return G(Cg,lt({tag:"th",class:[...ae.value],colspan:A.value.length+1},e.headerProps),{default:()=>[Z("div",{class:"v-data-table-header__content"},[G(A0,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:fe.value,label:s("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>f.value=[],appendIcon:pe.value,"onClick:append":()=>C(!b.value)},{...r,chip:_e=>{var re;return G(Xd,{onClick:(re=_e.item.raw)!=null&&re.sortable?()=>c(_e.item.raw):void 0,onMousedown:be=>{be.preventDefault(),be.stopPropagation()}},{default:()=>[_e.item.title,G(Yn,{class:gt(["v-data-table__td-sort-icon",d(_e.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:B(_e.item.raw),size:"small"},null)]})}})])]})};_t(()=>X.value?Z("tr",null,[G(ce,null,null)]):Z(qt,null,[r.headers?r.headers(te.value):A.value.map((fe,pe)=>Z("tr",null,[fe.map((_e,re)=>G(ue,{column:_e,x:re,y:pe},null))])),e.loading&&Z("tr",{class:"v-data-table-progress"},[Z("th",{colspan:k.value.length},[G(gm,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:r.loader})])])]))}}),tF=Ue({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),nF=ht()({name:"VDataTableGroupHeaderRow",props:tF(),setup(e,n){let{slots:r}=n;const{isGroupOpen:s,toggleGroup:c,extractRows:f}=aI(),{isSelected:d,isSomeSelected:a,select:b}=sv(),{columns:C}=uv(),w=ee(()=>f([e.item]));return()=>Z("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[C.value.map(k=>{var A,I;if(k.key==="data-table-group"){const R=s(e.item)?"$expand":"$next",F=()=>c(e.item);return((A=r["data-table-group"])==null?void 0:A.call(r,{item:e.item,count:w.value.length,props:{icon:R,onClick:F}}))??G(Cg,{class:"v-data-table-group-header-row__column"},{default:()=>[G(Mn,{size:"small",variant:"text",icon:R,onClick:F},null),Z("span",null,[e.item.value]),Z("span",null,[wn("("),w.value.length,wn(")")])]})}if(k.key==="data-table-select"){const R=d(w.value),F=a(w.value)&&!R,B=$=>b(w.value,$);return((I=r["data-table-select"])==null?void 0:I.call(r,{props:{modelValue:R,indeterminate:F,"onUpdate:modelValue":B}}))??Z("td",null,[G(qs,{modelValue:R,indeterminate:F,"onUpdate:modelValue":B},null)])}return Z("td",null,null)})])}}),iF=Ue({index:Number,item:Object,cellProps:[Object,Function],onClick:zr(),onContextmenu:zr(),onDblclick:zr(),...Ju()},"VDataTableRow"),j0=ht()({name:"VDataTableRow",props:iF(),setup(e,n){let{slots:r}=n;const{displayClasses:s,mobile:c}=Qa(e,"v-data-table__tr"),{isSelected:f,toggleSelect:d,someSelected:a,allSelected:b,selectAll:C}=sv(),{isExpanded:w,toggleExpand:k}=iI(),{toggleSort:A,sortBy:I,isSorted:R}=gI(),{columns:F}=uv();_t(()=>Z("tr",{class:gt(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},s.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&F.value.map((B,$)=>{const O=e.item,q=`item.${B.key}`,X=`header.${B.key}`,te={index:e.index,item:O.raw,internalItem:O,value:Uu(O.columns,B.key),column:B,isSelected:f,toggleSelect:d,isExpanded:w,toggleExpand:k},ae={column:B,selectAll:C,isSorted:R,toggleSort:A,sortBy:I.value,someSelected:a.value,allSelected:b.value,getSortIcon:()=>""},ue=typeof e.cellProps=="function"?e.cellProps({index:te.index,item:te.item,internalItem:te.internalItem,value:te.value,column:B}):e.cellProps,ce=typeof B.cellProps=="function"?B.cellProps({index:te.index,item:te.item,internalItem:te.internalItem,value:te.value}):B.cellProps;return G(Cg,lt({align:B.align,class:{"v-data-table__td--expanded-row":B.key==="data-table-expand","v-data-table__td--select-row":B.key==="data-table-select"},fixed:B.fixed,fixedOffset:B.fixedOffset,fixedEndOffset:B.fixedEndOffset,lastFixed:B.lastFixed,firstFixedEnd:B.firstFixedEnd,maxWidth:c.value?void 0:B.maxWidth,noPadding:B.key==="data-table-select"||B.key==="data-table-expand",nowrap:B.nowrap,width:c.value?void 0:B.width},ue,ce),{default:()=>{var pe,_e,re,be;if(B.key==="data-table-select")return((pe=r["item.data-table-select"])==null?void 0:pe.call(r,{...te,props:{disabled:!O.selectable,modelValue:f([O]),onClick:wl(()=>d(O),["stop"])}}))??G(qs,{disabled:!O.selectable,modelValue:f([O]),onClick:wl(je=>d(O,e.index,je),["stop"])},null);if(B.key==="data-table-expand")return((_e=r["item.data-table-expand"])==null?void 0:_e.call(r,{...te,props:{icon:w(O)?"$collapse":"$expand",size:"small",variant:"text",onClick:wl(()=>k(O),["stop"])}}))??G(Mn,{icon:w(O)?"$collapse":"$expand",size:"small",variant:"text",onClick:wl(()=>k(O),["stop"])},null);if(r[q]&&!c.value)return r[q](te);const fe=Qn(te.value);return c.value?Z(qt,null,[Z("div",{class:"v-data-table__td-title"},[((re=r[X])==null?void 0:re.call(r,ae))??B.title]),Z("div",{class:"v-data-table__td-value"},[((be=r[q])==null?void 0:be.call(r,te))??fe])]):fe}})})]))}}),wI=Ue({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Ju()},"VDataTableRows"),Zu=ht()({name:"VDataTableRows",inheritAttrs:!1,props:wI(),setup(e,n){let{attrs:r,slots:s}=n;const{columns:c}=uv(),{expandOnClick:f,toggleExpand:d,isExpanded:a}=iI(),{isSelected:b,toggleSelect:C}=sv(),{toggleGroup:w,isGroupOpen:k}=aI(),{t:A}=vi(),{mobile:I}=Qa(e);return _t(()=>{var R,F;return e.loading&&(!e.items.length||s.loading)?Z("tr",{class:"v-data-table-rows-loading",key:"loading"},[Z("td",{colspan:c.value.length},[((R=s.loading)==null?void 0:R.call(s))??A(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?Z("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[Z("td",{colspan:c.value.length},[((F=s["no-data"])==null?void 0:F.call(s))??A(e.noDataText)])]):Z(qt,null,[e.items.map((B,$)=>{var X;if(B.type==="group"){const te={index:$,item:B,columns:c.value,isExpanded:a,toggleExpand:d,isSelected:b,toggleSelect:C,toggleGroup:w,isGroupOpen:k};return s["group-header"]?s["group-header"](te):G(nF,lt({key:`group-header_${B.id}`,item:B},Z1(r,":group-header",()=>te)),s)}const O={index:$,item:B.raw,internalItem:B,columns:c.value,isExpanded:a,toggleExpand:d,isSelected:b,toggleSelect:C},q={...O,props:lt({key:`item_${B.key??B.index}`,onClick:f.value?()=>{d(B)}:void 0,index:$,item:B,cellProps:e.cellProps,mobile:I.value},Z1(r,":row",()=>O),typeof e.rowProps=="function"?e.rowProps({item:O.item,index:O.index,internalItem:O.internalItem}):e.rowProps)};return Z(qt,{key:q.props.key},[s.item?s.item(q):G(j0,q.props,s),a(B)&&((X=s["expanded-row"])==null?void 0:X.call(s,O))])})])}),{}}}),SI=Ue({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Ht(),...mr(),...bn(),...Un()},"VTable"),Ku=ht()({name:"VTable",props:SI(),setup(e,n){let{slots:r,emit:s}=n;const{themeClasses:c}=Xn(e),{densityClasses:f}=sa(e);return _t(()=>G(e.tag,{class:gt(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!r.top,"v-table--has-bottom":!!r.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},c.value,f.value,e.class]),style:zt(e.style)},{default:()=>{var d,a,b;return[(d=r.top)==null?void 0:d.call(r),r.default?Z("div",{class:"v-table__wrapper",style:{height:Nt(e.height)}},[Z("table",null,[r.default()])]):(a=r.wrapper)==null?void 0:a.call(r),(b=r.bottom)==null?void 0:b.call(r)]}})),{}}}),rF=Ue({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function aF(e,n,r,s){const c=e.returnObject?n:Wi(n,e.itemValue),f=Wi(n,e.itemSelectable,!0),d=s.reduce((a,b)=>(b.key!=null&&(a[b.key]=Wi(n,b.value)),a),{});return{type:"item",key:e.returnObject?Wi(n,e.itemValue):c,index:r,value:c,selectable:f,columns:d,raw:n}}function sF(e,n,r){return n.map((s,c)=>aF(e,s,c,r))}function N0(e,n){return{items:ee(()=>sF(e,e.items,n.value))}}const U0=Ue({...wI(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...tI(),...D0(),...KO(),...rF(),...hI(),...mI(),...xI(),...SI()},"DataTable"),oF=Ue({...L0(),...U0(),...Qd(),...O0()},"VDataTable"),lF=ht()({name:"VDataTable",props:oF(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=R0(e),{sortBy:f,multiSort:d,mustSort:a}=ov(e),{page:b,itemsPerPage:C}=z0(e),{disableSort:w}=qd(e),{columns:k,headers:A,sortFunctions:I,sortRawFunctions:R,filterFunctions:F}=$0(e,{groupBy:c,showSelect:Ee(()=>e.showSelect),showExpand:Ee(()=>e.showExpand)}),{items:B}=N0(e,k),$=Ee(()=>e.search),{filteredItems:O}=eh(e,B,$,{transform:Re=>Re.columns,customKeyFilter:F}),{toggleSort:q}=lv({sortBy:f,multiSort:d,mustSort:a,page:b}),{sortByWithGroups:X,opened:te,extractRows:ae,isGroupOpen:ue,toggleGroup:ce}=nv({groupBy:c,sortBy:f,disableSort:w}),{sortedItems:fe}=V0(e,O,X,{transform:Re=>({...Re.raw,...Re.columns}),sortFunctions:I,sortRawFunctions:R}),{flatItems:pe}=iv(fe,c,te),_e=ee(()=>pe.value.length),{startIndex:re,stopIndex:be,pageCount:je,setItemsPerPage:Be}=B0({page:b,itemsPerPage:C,itemsLength:_e}),{paginatedItems:Fe}=uI({items:pe,startIndex:re,stopIndex:be,itemsPerPage:C}),Ke=ee(()=>ae(Fe.value)),{isSelected:ft,select:mt,selectAll:ze,toggleSelect:Se,someSelected:Me,allSelected:Qe}=av(e,{allItems:B,currentPage:Ke}),{isExpanded:Ft,toggleExpand:Tt}=tv(e);rv({page:b,itemsPerPage:C,sortBy:f,groupBy:c,search:$}),Li({VDataTableRows:{hideNoData:Ee(()=>e.hideNoData),noDataText:Ee(()=>e.noDataText),loading:Ee(()=>e.loading),loadingText:Ee(()=>e.loadingText)}});const xt=ee(()=>({page:b.value,itemsPerPage:C.value,sortBy:f.value,pageCount:je.value,toggleSort:q,setItemsPerPage:Be,someSelected:Me.value,allSelected:Qe.value,isSelected:ft,select:mt,selectAll:ze,toggleSelect:Se,isExpanded:Ft,toggleExpand:Tt,isGroupOpen:ue,toggleGroup:ce,items:Ke.value.map(Re=>Re.raw),internalItems:Ke.value,groupedItems:Fe.value,columns:k.value,headers:A.value}));return _t(()=>{const Re=im.filterProps(e),vt=Wu.filterProps(e),st=Zu.filterProps(e),Ye=Ku.filterProps(e);return G(Ku,lt({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},Ye,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var St;return(St=s.top)==null?void 0:St.call(s,xt.value)},default:()=>{var St,ie,le,Le,Ze,ut;return s.default?s.default(xt.value):Z(qt,null,[(St=s.colgroup)==null?void 0:St.call(s,xt.value),!e.hideDefaultHeader&&Z("thead",{key:"thead"},[G(Wu,vt,s)]),(ie=s.thead)==null?void 0:ie.call(s,xt.value),!e.hideDefaultBody&&Z("tbody",null,[(le=s["body.prepend"])==null?void 0:le.call(s,xt.value),s.body?s.body(xt.value):G(Zu,lt(r,st,{items:Fe.value}),s),(Le=s["body.append"])==null?void 0:Le.call(s,xt.value)]),(Ze=s.tbody)==null?void 0:Ze.call(s,xt.value),(ut=s.tfoot)==null?void 0:ut.call(s,xt.value)])},bottom:()=>s.bottom?s.bottom(xt.value):!e.hideDefaultFooter&&Z(qt,null,[G($a,null,null),G(im,Re,{prepend:s["footer.prepend"]})])})}),{}}}),uF=Ue({...hi(U0(),["hideDefaultFooter"]),...D0(),...zP(),...Qd()},"VDataTableVirtual"),cF=ht()({name:"VDataTableVirtual",props:uF(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=R0(e),{sortBy:f,multiSort:d,mustSort:a}=ov(e),{disableSort:b}=qd(e),{columns:C,headers:w,filterFunctions:k,sortFunctions:A,sortRawFunctions:I}=$0(e,{groupBy:c,showSelect:Ee(()=>e.showSelect),showExpand:Ee(()=>e.showExpand)}),{items:R}=N0(e,C),F=Ee(()=>e.search),{filteredItems:B}=eh(e,R,F,{transform:Ye=>Ye.columns,customKeyFilter:k}),{toggleSort:$}=lv({sortBy:f,multiSort:d,mustSort:a}),{sortByWithGroups:O,opened:q,extractRows:X,isGroupOpen:te,toggleGroup:ae}=nv({groupBy:c,sortBy:f,disableSort:b}),{sortedItems:ue}=V0(e,B,O,{transform:Ye=>({...Ye.raw,...Ye.columns}),sortFunctions:A,sortRawFunctions:I}),{flatItems:ce}=iv(ue,c,q),fe=ee(()=>X(ce.value)),{isSelected:pe,select:_e,selectAll:re,toggleSelect:be,someSelected:je,allSelected:Be}=av(e,{allItems:fe,currentPage:fe}),{isExpanded:Fe,toggleExpand:Ke}=tv(e),{containerRef:ft,markerRef:mt,paddingTop:ze,paddingBottom:Se,computedItems:Me,handleItemResize:Qe,handleScroll:Ft,handleScrollend:Tt,calculateVisibleItems:xt,scrollToIndex:Re}=BP(e,ce),vt=ee(()=>Me.value.map(Ye=>Ye.raw));rv({sortBy:f,page:Mt(1),itemsPerPage:Mt(-1),groupBy:c,search:F}),Li({VDataTableRows:{hideNoData:Ee(()=>e.hideNoData),noDataText:Ee(()=>e.noDataText),loading:Ee(()=>e.loading),loadingText:Ee(()=>e.loadingText)}});const st=ee(()=>({sortBy:f.value,toggleSort:$,someSelected:je.value,allSelected:Be.value,isSelected:pe,select:_e,selectAll:re,toggleSelect:be,isExpanded:Fe,toggleExpand:Ke,isGroupOpen:te,toggleGroup:ae,items:fe.value.map(Ye=>Ye.raw),internalItems:fe.value,groupedItems:ce.value,columns:C.value,headers:w.value}));return _t(()=>{const Ye=Wu.filterProps(e),St=Zu.filterProps(e),ie=Ku.filterProps(e);return G(Ku,lt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ie,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var le;return(le=s.top)==null?void 0:le.call(s,st.value)},wrapper:()=>{var le,Le,Ze,ut,Je,kt;return Z("div",{ref:ft,onScrollPassive:Ft,onScrollend:Tt,class:"v-table__wrapper",style:{height:Nt(e.height)}},[Z("table",null,[(le=s.colgroup)==null?void 0:le.call(s,st.value),!e.hideDefaultHeader&&Z("thead",{key:"thead"},[G(Wu,Ye,s)]),(Le=s.thead)==null?void 0:Le.call(s,st.value),!e.hideDefaultBody&&Z("tbody",{key:"tbody"},[Z("tr",{ref:mt,style:{height:Nt(ze.value),border:0}},[Z("td",{colspan:C.value.length,style:{height:0,border:0}},null)]),(Ze=s["body.prepend"])==null?void 0:Ze.call(s,st.value),G(Zu,lt(r,St,{items:vt.value}),{...s,item:ct=>G(LP,{key:ct.internalItem.index,renderless:!0,"onUpdate:height":Dt=>Qe(ct.internalItem.index,Dt)},{default:Dt=>{var nn;let{itemRef:Pt}=Dt;return((nn=s.item)==null?void 0:nn.call(s,{...ct,itemRef:Pt}))??G(j0,lt(ct.props,{ref:Pt,key:ct.internalItem.index,index:ct.internalItem.index}),s)}})}),(ut=s["body.append"])==null?void 0:ut.call(s,st.value),Z("tr",{style:{height:Nt(Se.value),border:0}},[Z("td",{colspan:C.value.length,style:{height:0,border:0}},null)])]),(Je=s.tbody)==null?void 0:Je.call(s,st.value),(kt=s.tfoot)==null?void 0:kt.call(s,st.value)])])},bottom:()=>{var le;return(le=s.bottom)==null?void 0:le.call(s,st.value)}})}),{calculateVisibleItems:xt,scrollToIndex:Re}}}),dF=Ue({itemsLength:{type:[Number,String],required:!0},...L0(),...U0(),...O0()},"VDataTableServer"),hF=ht()({name:"VDataTableServer",props:dF(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=R0(e),{sortBy:f,multiSort:d,mustSort:a}=ov(e),{page:b,itemsPerPage:C}=z0(e),{disableSort:w}=qd(e),k=ee(()=>parseInt(e.itemsLength,10)),{columns:A,headers:I}=$0(e,{groupBy:c,showSelect:Ee(()=>e.showSelect),showExpand:Ee(()=>e.showExpand)}),{items:R}=N0(e,A),{toggleSort:F}=lv({sortBy:f,multiSort:d,mustSort:a,page:b}),{opened:B,isGroupOpen:$,toggleGroup:O,extractRows:q}=nv({groupBy:c,sortBy:f,disableSort:w}),{pageCount:X,setItemsPerPage:te}=B0({page:b,itemsPerPage:C,itemsLength:k}),{flatItems:ae}=iv(R,c,B),{isSelected:ue,select:ce,selectAll:fe,toggleSelect:pe,someSelected:_e,allSelected:re}=av(e,{allItems:R,currentPage:R}),{isExpanded:be,toggleExpand:je}=tv(e),Be=ee(()=>q(R.value));rv({page:b,itemsPerPage:C,sortBy:f,groupBy:c,search:Ee(()=>e.search)}),ri("v-data-table",{toggleSort:F,sortBy:f}),Li({VDataTableRows:{hideNoData:Ee(()=>e.hideNoData),noDataText:Ee(()=>e.noDataText),loading:Ee(()=>e.loading),loadingText:Ee(()=>e.loadingText)}});const Fe=ee(()=>({page:b.value,itemsPerPage:C.value,sortBy:f.value,pageCount:X.value,toggleSort:F,setItemsPerPage:te,someSelected:_e.value,allSelected:re.value,isSelected:ue,select:ce,selectAll:fe,toggleSelect:pe,isExpanded:be,toggleExpand:je,isGroupOpen:$,toggleGroup:O,items:Be.value.map(Ke=>Ke.raw),internalItems:Be.value,groupedItems:ae.value,columns:A.value,headers:I.value}));_t(()=>{const Ke=im.filterProps(e),ft=Wu.filterProps(e),mt=Zu.filterProps(e),ze=Ku.filterProps(e);return G(Ku,lt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ze,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Se;return(Se=s.top)==null?void 0:Se.call(s,Fe.value)},default:()=>{var Se,Me,Qe,Ft,Tt,xt;return s.default?s.default(Fe.value):Z(qt,null,[(Se=s.colgroup)==null?void 0:Se.call(s,Fe.value),!e.hideDefaultHeader&&Z("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[G(Wu,ft,s)]),(Me=s.thead)==null?void 0:Me.call(s,Fe.value),!e.hideDefaultBody&&Z("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(Qe=s["body.prepend"])==null?void 0:Qe.call(s,Fe.value),s.body?s.body(Fe.value):G(Zu,lt(r,mt,{items:ae.value}),s),(Ft=s["body.append"])==null?void 0:Ft.call(s,Fe.value)]),(Tt=s.tbody)==null?void 0:Tt.call(s,Fe.value),(xt=s.tfoot)==null?void 0:xt.call(s,Fe.value)])},bottom:()=>s.bottom?s.bottom(Fe.value):!e.hideDefaultFooter&&Z(qt,null,[G($a,null,null),G(im,Ke,{prepend:s["footer.prepend"]})])})})}}),fF=Ue({fluid:{type:Boolean,default:!1},...Ht(),...Zi(),...bn()},"VContainer"),mF=ht()({name:"VContainer",props:fF(),setup(e,n){let{slots:r}=n;const{rtlClasses:s}=nr(),{dimensionStyles:c}=Ki(e);return _t(()=>G(e.tag,{class:gt(["v-container",{"v-container--fluid":e.fluid},s.value,e.class]),style:zt([c.value,e.style])},r)),{}}}),CI=Ng.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}),TI=Ng.reduce((e,n)=>{const r="offset"+Ws(n);return e[r]={type:[String,Number],default:null},e},{}),kI=Ng.reduce((e,n)=>{const r="order"+Ws(n);return e[r]={type:[String,Number],default:null},e},{}),bS={col:Object.keys(CI),offset:Object.keys(TI),order:Object.keys(kI)};function pF(e,n,r){let s=e;if(!(r==null||r===!1)){if(n){const c=n.replace(e,"");s+=`-${c}`}return e==="col"&&(s="v-"+s),e==="col"&&(r===""||r===!0)||(s+=`-${r}`),s.toLowerCase()}}const gF=["auto","start","end","center","baseline","stretch"],vF=Ue({cols:{type:[Boolean,String,Number],default:!1},...CI,offset:{type:[String,Number],default:null},...TI,order:{type:[String,Number],default:null},...kI,alignSelf:{type:String,default:null,validator:e=>gF.includes(e)},...Ht(),...bn()},"VCol"),yF=ht()({name:"VCol",props:vF(),setup(e,n){let{slots:r}=n;const s=ee(()=>{const c=[];let f;for(f in bS)bS[f].forEach(a=>{const b=e[a],C=pF(f,a,b);C&&c.push(C)});const d=c.some(a=>a.startsWith("v-col-"));return c.push({"v-col":!d||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),c});return()=>{var c;return bs(e.tag,{class:[s.value,e.class],style:e.style},(c=r.default)==null?void 0:c.call(r))}}}),G0=["start","end","center"],PI=["space-between","space-around","space-evenly"];function q0(e,n){return Ng.reduce((r,s)=>{const c=e+Ws(s);return r[c]=n(),r},{})}const _F=[...G0,"baseline","stretch"],II=e=>_F.includes(e),AI=q0("align",()=>({type:String,default:null,validator:II})),bF=[...G0,...PI],EI=e=>bF.includes(e),MI=q0("justify",()=>({type:String,default:null,validator:EI})),xF=[...G0,...PI,"stretch"],DI=e=>xF.includes(e),RI=q0("alignContent",()=>({type:String,default:null,validator:DI})),xS={align:Object.keys(AI),justify:Object.keys(MI),alignContent:Object.keys(RI)},wF={align:"align",justify:"justify",alignContent:"align-content"};function SF(e,n,r){let s=wF[e];if(r!=null){if(n){const c=n.replace(e,"");s+=`-${c}`}return s+=`-${r}`,s.toLowerCase()}}const CF=Ue({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:II},...AI,justify:{type:String,default:null,validator:EI},...MI,alignContent:{type:String,default:null,validator:DI},...RI,...Ht(),...bn()},"VRow"),TF=ht()({name:"VRow",props:CF(),setup(e,n){let{slots:r}=n;const s=ee(()=>{const c=[];let f;for(f in xS)xS[f].forEach(d=>{const a=e[d],b=SF(f,d,a);b&&c.push(b)});return c.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),c});return()=>{var c;return bs(e.tag,{class:["v-row",s.value,e.class],style:e.style},(c=r.default)==null?void 0:c.call(r))}}}),LI=Ao("v-spacer","div","VSpacer"),zI=Ue({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:tn,default:"$next"},prevIcon:{type:tn,default:"$prev"},modeIcon:{type:tn,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),rb=ht()({name:"VDatePickerControls",props:zI(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:r}=n;const s=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),c=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),f=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),d=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function a(){r("click:prev")}function b(){r("click:next")}function C(){r("click:year")}function w(){r("click:month")}return _t(()=>Z("div",{class:gt(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Nt(e.controlHeight)}},[G(Mn,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:s.value,text:e.text,variant:"text",rounded:!0,onClick:w},null),G(Mn,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:c.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:C},null),G(LI,null,null),Z("div",{class:"v-date-picker-controls__month"},[G(Mn,{"data-testid":"prev-month",disabled:f.value,density:"comfortable",icon:e.prevIcon,variant:"text",onClick:a},null),G(Mn,{"data-testid":"next-month",disabled:d.value,icon:e.nextIcon,density:"comfortable",variant:"text",onClick:b},null)])])),{}}}),kF=Ue({appendIcon:tn,color:String,header:String,transition:String,onClick:zr()},"VDatePickerHeader"),ab=ht()({name:"VDatePickerHeader",props:kF(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:r,slots:s}=n;const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color);function d(){r("click")}function a(){r("click:append")}return _t(()=>{const b=!!(s.default||e.header),C=!!(s.append||e.appendIcon);return Z("div",{class:gt(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},c.value]),style:zt(f.value),onClick:d},[s.prepend&&Z("div",{key:"prepend",class:"v-date-picker-header__prepend"},[s.prepend()]),b&&G(ia,{key:"content",name:e.transition},{default:()=>{var w;return[Z("div",{key:e.header,class:"v-date-picker-header__content"},[((w=s.default)==null?void 0:w.call(s))??e.header])]}}),C&&Z("div",{class:"v-date-picker-header__append"},[s.append?G(Sn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var w;return[(w=s.append)==null?void 0:w.call(s)]}}):G(Mn,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:a},null)])])}),{}}}),PF=Ue({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function IF(e){const n=fm(),r=Qt(e,"modelValue",[],I=>Di(I).map(R=>n.date(R))),s=ee(()=>e.displayValue?n.date(e.displayValue):r.value.length>0?n.date(r.value[0]):e.min?n.date(e.min):Array.isArray(e.allowedDates)?n.date(e.allowedDates[0]):n.date()),c=Qt(e,"year",void 0,I=>{const R=I!=null?Number(I):n.getYear(s.value);return n.startOfYear(n.setYear(n.date(),R))},I=>n.getYear(I)),f=Qt(e,"month",void 0,I=>{const R=I!=null?Number(I):n.getMonth(s.value),F=n.setYear(n.startOfMonth(n.date()),n.getYear(c.value));return n.setMonth(F,R)},I=>n.getMonth(I)),d=ee(()=>{const I=n.toJsDate(n.startOfWeek(n.date(),e.firstDayOfWeek)).getDay();return n.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((R,F)=>e.weekdays.includes((F+I)%7))}),a=ee(()=>{const I=n.getWeekArray(f.value,e.firstDayOfWeek),R=I.flat(),F=6*7;if(e.weeksInMonth==="static"&&R.length<F){const B=R[R.length-1];let $=[];for(let O=1;O<=F-R.length;O++)$.push(n.addDays(B,O)),O%7===0&&(I.push($),$=[])}return I});function b(I,R){return I.filter(F=>e.weekdays.includes(n.toJsDate(F).getDay())).map((F,B)=>{const $=n.toISO(F),O=!n.isSameMonth(F,f.value),q=n.isSameDay(F,n.startOfMonth(f.value)),X=n.isSameDay(F,n.endOfMonth(f.value)),te=n.isSameDay(F,f.value),ae=e.weekdays.length;return{date:F,formatted:n.format(F,"keyboardDate"),isAdjacent:O,isDisabled:A(F),isEnd:X,isHidden:O&&!e.showAdjacentMonths,isSame:te,isSelected:r.value.some(ue=>n.isSameDay(F,ue)),isStart:q,isToday:n.isSameDay(F,R),isWeekEnd:B%ae===ae-1,isWeekStart:B%ae===0,isoDate:$,localized:n.format(F,"dayOfMonth"),month:n.getMonth(F),year:n.getYear(F)}})}const C=ee(()=>{const I=n.startOfWeek(s.value,e.firstDayOfWeek),R=[];for(let B=0;B<=6;B++)R.push(n.addDays(I,B));const F=n.date();return b(R,F)}),w=ee(()=>{const I=a.value.flat(),R=n.date();return b(I,R)}),k=ee(()=>a.value.map(I=>I.length?n.getWeek(I[0],e.firstDayOfWeek):null));function A(I){if(e.disabled)return!0;const R=n.date(I);return e.min&&n.isAfter(n.date(e.min),R)||e.max&&n.isAfter(R,n.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(F=>n.isSameDay(n.date(F),R)):typeof e.allowedDates=="function"?!e.allowedDates(R):!1}return{displayValue:s,daysInMonth:w,daysInWeek:C,genDays:b,model:r,weeksInMonth:a,weekdayLabels:d,weekNumbers:k}}const BI=Ue({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...hi(PF(),["displayValue"])},"VDatePickerMonth"),sb=ht()({name:"VDatePickerMonth",props:BI(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=tt(),{daysInMonth:f,model:d,weekNumbers:a,weekdayLabels:b}=IF(e),C=fm(),w=Mt(),k=Mt(),A=Mt(!1),I=Ee(()=>A.value?e.reverseTransition:e.transition);e.multiple==="range"&&d.value.length>0&&(w.value=d.value[0],d.value.length>1&&(k.value=d.value[d.value.length-1]));const R=ee(()=>{const O=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return d.value.length>=O});Bt(f,(O,q)=>{q&&(A.value=C.isBefore(O[0].date,q[0].date))});function F(O){const q=C.startOfDay(O);if(d.value.length===0?w.value=void 0:d.value.length===1&&(w.value=d.value[0],k.value=void 0),!w.value)w.value=q,d.value=[w.value];else if(k.value)w.value=O,k.value=void 0,d.value=[w.value];else{if(C.isSameDay(q,w.value)){w.value=void 0,d.value=[];return}else C.isBefore(q,w.value)?(k.value=C.endOfDay(w.value),w.value=q):k.value=C.endOfDay(q);d.value=RL(C,w.value,k.value)}}function B(O){const q=d.value.findIndex(X=>C.isSameDay(X,O));if(q===-1)d.value=[...d.value,O];else{const X=[...d.value];X.splice(q,1),d.value=X}}function $(O){e.multiple==="range"?F(O):e.multiple?B(O):d.value=[O]}_t(()=>Z("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&Z("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&Z("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[wn("")]),a.value.map(O=>Z("div",{class:gt(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[O]))]),G(ia,{name:I.value},{default:()=>{var O;return[Z("div",{ref:c,key:(O=f.value[0].date)==null?void 0:O.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&b.value.map(q=>Z("div",{class:gt(["v-date-picker-month__day","v-date-picker-month__weekday"])},[q])),f.value.map((q,X)=>{var ae;const te={props:{class:"v-date-picker-month__day-btn",color:q.isSelected||q.isToday?e.color:void 0,disabled:q.isDisabled,icon:!0,ripple:!1,text:q.localized,variant:q.isSelected?"flat":q.isToday?"outlined":"text",onClick:()=>$(q.date)},item:q,i:X};return R.value&&!q.isSelected&&(q.isDisabled=!0),Z("div",{class:gt(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":q.isAdjacent,"v-date-picker-month__day--hide-adjacent":q.isHidden,"v-date-picker-month__day--selected":q.isSelected,"v-date-picker-month__day--week-end":q.isWeekEnd,"v-date-picker-month__day--week-start":q.isWeekStart}]),"data-v-date":q.isDisabled?void 0:q.isoDate},[(e.showAdjacentMonths||!q.isAdjacent)&&(((ae=s.day)==null?void 0:ae.call(s,te))??G(Mn,te.props,null))])})])]}})]))}}),VI=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),ob=ht()({name:"VDatePickerMonths",props:VI(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=fm(),f=Qt(e,"modelValue"),d=ee(()=>{let b=c.startOfYear(c.date());return e.year&&(b=c.setYear(b,e.year)),Oa(12).map(C=>{const w=c.format(b,"monthShort"),k=!!(!a(C)||e.min&&c.isAfter(c.startOfMonth(c.date(e.min)),b)||e.max&&c.isAfter(b,c.startOfMonth(c.date(e.max))));return b=c.getNextMonth(b),{isDisabled:k,text:w,value:C}})});Ri(()=>{f.value=f.value??c.getMonth(c.date())});function a(b){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(b):typeof e.allowedMonths=="function"?e.allowedMonths(b):!0}return _t(()=>Z("div",{class:"v-date-picker-months",style:{height:Nt(e.height)}},[Z("div",{class:"v-date-picker-months__content"},[d.value.map((b,C)=>{var A;const w={active:f.value===C,color:f.value===C?e.color:void 0,disabled:b.isDisabled,rounded:!0,text:b.text,variant:f.value===b.value?"flat":"text",onClick:()=>k(C)};function k(I){if(f.value===I){r("update:modelValue",f.value);return}f.value=I}return((A=s.month)==null?void 0:A.call(s,{month:b,i:C,props:w}))??G(Mn,lt({key:"month"},w),null)})])])),{}}}),OI=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),lb=ht()({name:"VDatePickerYears",props:OI(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=fm(),f=Qt(e,"modelValue"),d=ee(()=>{const C=c.getYear(c.date());let w=C-100,k=C+52;e.min&&(w=c.getYear(c.date(e.min))),e.max&&(k=c.getYear(c.date(e.max)));let A=c.startOfYear(c.date());return A=c.setYear(A,w),Oa(k-w+1,w).map(I=>{const R=c.format(A,"year");return A=c.setYear(A,c.getYear(A)+1),{text:R,value:I,isDisabled:!b(I)}})});Ri(()=>{f.value=f.value??c.getYear(c.date())});const a=gg();zi(async()=>{var C;await Dn(),(C=a.el)==null||C.focus()});function b(C){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(C):typeof e.allowedYears=="function"?e.allowedYears(C):!0}return _t(()=>Z("div",{class:"v-date-picker-years",style:{height:Nt(e.height)}},[Z("div",{class:"v-date-picker-years__content"},[d.value.map((C,w)=>{var A;const k={ref:f.value===C.value?a:void 0,active:f.value===C.value,color:f.value===C.value?e.color:void 0,rounded:!0,text:C.text,disabled:C.isDisabled,variant:f.value===C.value?"flat":"text",onClick:()=>{if(f.value===C.value){r("update:modelValue",f.value);return}f.value=C.value}};return((A=s.year)==null?void 0:A.call(s,{year:C,i:w,props:k}))??G(Mn,lt({key:"month"},k),null)})])])),{}}}),AF=Ue({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...zI(),...BI({weeksInMonth:"static"}),...hi(VI(),["modelValue"]),...hi(OI(),["modelValue"]),...ev({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),EF=ht()({name:"VDatePicker",props:AF(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=fm(),{t:f}=vi(),{rtlClasses:d}=nr(),a=Qt(e,"modelValue",void 0,Fe=>Di(Fe).map(Ke=>c.date(Ke)),Fe=>e.multiple?Fe:Fe[0]),b=Qt(e,"viewMode"),C=ee(()=>{const Fe=c.date(e.min);return e.min&&c.isValid(Fe)?Fe:null}),w=ee(()=>{const Fe=c.date(e.max);return e.max&&c.isValid(Fe)?Fe:null}),k=ee(()=>{var ft;const Fe=c.date();let Ke=Fe;return(ft=a.value)!=null&&ft[0]?Ke=c.date(a.value[0]):C.value&&c.isBefore(Fe,C.value)?Ke=C.value:w.value&&c.isAfter(Fe,w.value)&&(Ke=w.value),Ke&&c.isValid(Ke)?Ke:Fe}),A=Ee(()=>e.headerColor??e.color),I=Qt(e,"month"),R=ee({get:()=>Number(I.value??c.getMonth(c.startOfMonth(k.value))),set:Fe=>I.value=Fe}),F=Qt(e,"year"),B=ee({get:()=>Number(F.value??c.getYear(c.startOfYear(c.setMonth(k.value,R.value)))),set:Fe=>F.value=Fe}),$=Mt(!1),O=ee(()=>e.multiple&&a.value.length>1?f("$vuetify.datePicker.itemsSelected",a.value.length):a.value[0]&&c.isValid(a.value[0])?c.format(c.date(a.value[0]),"normalDateWithWeekday"):f(e.header)),q=ee(()=>{let Fe=c.date();return Fe=c.setDate(Fe,1),Fe=c.setMonth(Fe,R.value),Fe=c.setYear(Fe,B.value),c.format(Fe,"monthAndYear")}),X=Ee(()=>`date-picker-header${$.value?"-reverse":""}-transition`),te=ee(()=>{if(e.disabled)return!0;const Fe=[];if(b.value!=="month")Fe.push("prev","next");else{let Ke=c.date();if(Ke=c.startOfMonth(Ke),Ke=c.setMonth(Ke,R.value),Ke=c.setYear(Ke,B.value),C.value){const ft=c.addDays(c.startOfMonth(Ke),-1);c.isAfter(C.value,ft)&&Fe.push("prev")}if(w.value){const ft=c.addDays(c.endOfMonth(Ke),1);c.isAfter(ft,w.value)&&Fe.push("next")}}return Fe});function ae(Fe,Ke){const ft=e.allowedDates;if(typeof ft!="function")return!0;const mt=c.getDiff(Ke,Fe,"days");for(let ze=0;ze<mt;ze++)if(ft(c.addDays(Fe,ze)))return!0;return!1}function ue(Fe){if(typeof e.allowedDates=="function"){const Ke=c.parseISO(`${Fe}-01-01`);return ae(Ke,c.endOfYear(Ke))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ke of e.allowedDates)if(c.getYear(c.date(Ke))===Fe)return!0;return!1}return!0}function ce(Fe){if(typeof e.allowedDates=="function"){const Ke=String(Fe+1).padStart(2,"0"),ft=c.parseISO(`${B.value}-${Ke}-01`);return ae(ft,c.endOfMonth(ft))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ke of e.allowedDates)if(c.getYear(c.date(Ke))===B.value&&c.getMonth(c.date(Ke))===Fe)return!0;return!1}return!0}function fe(){R.value<11?R.value++:(B.value++,R.value=0,Be()),je()}function pe(){R.value>0?R.value--:(B.value--,R.value=11,Be()),je()}function _e(){b.value="month"}function re(){b.value=b.value==="months"?"month":"months"}function be(){b.value=b.value==="year"?"month":"year"}function je(){b.value==="months"&&re()}function Be(){b.value==="year"&&be()}return Bt(a,(Fe,Ke)=>{const ft=Di(Ke),mt=Di(Fe);if(!mt.length)return;const ze=c.date(ft[ft.length-1]),Se=c.date(mt[mt.length-1]),Me=c.getMonth(Se),Qe=c.getYear(Se);Me!==R.value&&(R.value=Me,je()),Qe!==B.value&&(B.value=Qe,Be()),$.value=c.isBefore(ze,Se)}),_t(()=>{const Fe=$d.filterProps(e),Ke=rb.filterProps(e),ft=ab.filterProps(e),mt=sb.filterProps(e),ze=hi(ob.filterProps(e),["modelValue"]),Se=hi(lb.filterProps(e),["modelValue"]),Me={color:A.value,header:O.value,transition:X.value};return G($d,lt(Fe,{color:A.value,class:["v-date-picker",`v-date-picker--${b.value}`,{"v-date-picker--show-week":e.showWeek},d.value,e.class],style:e.style}),{title:()=>{var Qe;return((Qe=s.title)==null?void 0:Qe.call(s))??Z("div",{class:"v-date-picker__title"},[f(e.title)])},header:()=>s.header?G(Sn,{defaults:{VDatePickerHeader:{...Me}}},{default:()=>{var Qe;return[(Qe=s.header)==null?void 0:Qe.call(s,Me)]}}):G(ab,lt({key:"header"},ft,Me,{onClick:b.value!=="month"?_e:void 0}),{prepend:s.prepend,append:s.append}),default:()=>Z(qt,null,[G(rb,lt(Ke,{disabled:te.value,text:q.value,"onClick:next":fe,"onClick:prev":pe,"onClick:month":re,"onClick:year":be}),null),G(Kf,{hideOnLeave:!0},{default:()=>[b.value==="months"?G(ob,lt({key:"date-picker-months"},ze,{modelValue:R.value,"onUpdate:modelValue":[Qe=>R.value=Qe,je],min:C.value,max:w.value,year:B.value,allowedMonths:ce}),{month:s.month}):b.value==="year"?G(lb,lt({key:"date-picker-years"},Se,{modelValue:B.value,"onUpdate:modelValue":[Qe=>B.value=Qe,Be],min:C.value,max:w.value,allowedYears:ue}),{year:s.year}):G(sb,lt({key:"date-picker-month"},mt,{modelValue:a.value,"onUpdate:modelValue":Qe=>a.value=Qe,month:R.value,"onUpdate:month":[Qe=>R.value=Qe,je],year:B.value,"onUpdate:year":[Qe=>B.value=Qe,Be],min:C.value,max:w.value}),{day:s.day})]})]),actions:s.actions})}),{}}}),MF=Ue({actionText:String,bgColor:String,color:String,icon:tn,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Ht(),...Zi(),...Ks({size:void 0}),...Un()},"VEmptyState"),DF=ht()({name:"VEmptyState",props:MF(),emits:{"click:action":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{themeClasses:c}=Xn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{dimensionStyles:a}=Ki(e),{displayClasses:b}=Qa();function C(w){r("click:action",w)}return _t(()=>{var B,$,O;const w=!!(s.actions||e.actionText),k=!!(s.headline||e.headline),A=!!(s.title||e.title),I=!!(s.text||e.text),R=!!(s.media||e.image||e.icon),F=e.size||(e.image?200:96);return Z("div",{class:gt(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},c.value,f.value,b.value,e.class]),style:zt([d.value,a.value,e.style])},[R&&Z("div",{key:"media",class:"v-empty-state__media"},[s.media?G(Sn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:F},VIcon:{size:F,icon:e.icon}}},{default:()=>[s.media()]}):Z(qt,null,[e.image?G(To,{key:"image",src:e.image,height:F},null):e.icon?G(Yn,{key:"icon",color:e.color,size:F,icon:e.icon},null):void 0])]),k&&Z("div",{key:"headline",class:"v-empty-state__headline"},[((B=s.headline)==null?void 0:B.call(s))??e.headline]),A&&Z("div",{key:"title",class:"v-empty-state__title"},[(($=s.title)==null?void 0:$.call(s))??e.title]),I&&Z("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Nt(e.textWidth)}},[((O=s.text)==null?void 0:O.call(s))??e.text]),s.default&&Z("div",{key:"content",class:"v-empty-state__content"},[s.default()]),w&&Z("div",{key:"actions",class:"v-empty-state__actions"},[G(Sn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>{var q;return[((q=s.actions)==null?void 0:q.call(s,{props:{onClick:C}}))??G(Mn,{onClick:C},null)]}})])])}),{}}}),rm=Symbol.for("vuetify:v-expansion-panel"),FI=Ue({...Ht(),...T0()},"VExpansionPanelText"),ub=ht()({name:"VExpansionPanelText",props:FI(),setup(e,n){let{slots:r}=n;const s=_n(rm);if(!s)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:c,onAfterLeave:f}=k0(e,s.isSelected);return _t(()=>G(qg,{onAfterLeave:f},{default:()=>{var d;return[ei(Z("div",{class:gt(["v-expansion-panel-text",e.class]),style:zt(e.style)},[r.default&&c.value&&Z("div",{class:"v-expansion-panel-text__wrapper"},[(d=r.default)==null?void 0:d.call(r)])]),[[xs,s.isSelected.value]])]}})),{}}}),$I=Ue({color:String,expandIcon:{type:tn,default:"$expand"},collapseIcon:{type:tn,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Ht(),...Zi()},"VExpansionPanelTitle"),cb=ht()({name:"VExpansionPanelTitle",directives:{vRipple:aa},props:$I(),setup(e,n){let{slots:r}=n;const s=_n(rm);if(!s)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{dimensionStyles:d}=Ki(e),a=ee(()=>({collapseIcon:e.collapseIcon,disabled:s.disabled.value,expanded:s.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),b=Ee(()=>s.isSelected.value?e.collapseIcon:e.expandIcon);return _t(()=>{var C;return ei(Z("button",{class:gt(["v-expansion-panel-title",{"v-expansion-panel-title--active":s.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},c.value,e.class]),style:zt([f.value,d.value,e.style]),type:"button",tabindex:s.disabled.value?-1:void 0,disabled:s.disabled.value,"aria-expanded":s.isSelected.value,onClick:e.readonly?void 0:s.toggle},[Z("span",{class:"v-expansion-panel-title__overlay"},null),(C=r.default)==null?void 0:C.call(r,a.value),!e.hideActions&&G(Sn,{defaults:{VIcon:{icon:b.value}}},{default:()=>{var w;return[Z("span",{class:"v-expansion-panel-title__icon"},[((w=r.actions)==null?void 0:w.call(r,a.value))??G(Yn,null,null)])]}})]),[[aa,e.ripple]])}),{}}}),jI=Ue({title:String,text:String,bgColor:String,...ir(),...rc(),...yi(),...bn(),...$I(),...FI()},"VExpansionPanel"),RF=ht()({name:"VExpansionPanel",props:jI(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=ac(e,rm),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.bgColor),{elevationClasses:d}=kr(e),{roundedClasses:a}=Bi(e),b=Ee(()=>(s==null?void 0:s.disabled.value)||e.disabled),C=ee(()=>s.group.items.value.reduce((A,I,R)=>(s.group.selected.value.includes(I.id)&&A.push(R),A),[])),w=ee(()=>{const A=s.group.items.value.findIndex(I=>I.id===s.id);return!s.isSelected.value&&C.value.some(I=>I-A===1)}),k=ee(()=>{const A=s.group.items.value.findIndex(I=>I.id===s.id);return!s.isSelected.value&&C.value.some(I=>I-A===-1)});return ri(rm,s),_t(()=>{const A=!!(r.text||e.text),I=!!(r.title||e.title),R=cb.filterProps(e),F=ub.filterProps(e);return G(e.tag,{class:gt(["v-expansion-panel",{"v-expansion-panel--active":s.isSelected.value,"v-expansion-panel--before-active":w.value,"v-expansion-panel--after-active":k.value,"v-expansion-panel--disabled":b.value},a.value,c.value,e.class]),style:zt([f.value,e.style])},{default:()=>[Z("div",{class:gt(["v-expansion-panel__shadow",...d.value])},null),G(Sn,{defaults:{VExpansionPanelTitle:{...R},VExpansionPanelText:{...F}}},{default:()=>{var B;return[I&&G(cb,{key:"title"},{default:()=>[r.title?r.title():e.title]}),A&&G(ub,{key:"text"},{default:()=>[r.text?r.text():e.text]}),(B=r.default)==null?void 0:B.call(r)]}})]})}),{groupItem:s}}}),LF=["default","accordion","inset","popout"],zF=Ue({flat:Boolean,...ic(),...Io(jI(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Un(),...Ht(),...bn(),variant:{type:String,default:"default",validator:e=>LF.includes(e)}},"VExpansionPanels"),BF=ht()({name:"VExpansionPanels",props:zF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{next:s,prev:c}=Dl(e,rm),{themeClasses:f}=Xn(e),d=Ee(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return Li({VExpansionPanel:{bgColor:Ee(()=>e.bgColor),collapseIcon:Ee(()=>e.collapseIcon),color:Ee(()=>e.color),eager:Ee(()=>e.eager),elevation:Ee(()=>e.elevation),expandIcon:Ee(()=>e.expandIcon),focusable:Ee(()=>e.focusable),hideActions:Ee(()=>e.hideActions),readonly:Ee(()=>e.readonly),ripple:Ee(()=>e.ripple),rounded:Ee(()=>e.rounded),static:Ee(()=>e.static)}}),_t(()=>G(e.tag,{class:gt(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},f.value,d.value,e.class]),style:zt(e.style)},{default:()=>{var a;return[(a=r.default)==null?void 0:a.call(r,{prev:c,next:s})]}})),{next:s,prev:c}}}),VF=Ue({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...hi(Zg({active:!0}),["location"]),...Qu(),...Eo(),...ws({transition:"fab-transition"})},"VFab"),OF=ht()({name:"VFab",props:VF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),c=Mt(56),f=tt(),{resizeRef:d}=vs(k=>{k.length&&(c.value=k[0].target.clientHeight)}),a=Ee(()=>e.app||e.absolute),b=ee(()=>{var k;return a.value?((k=e.location)==null?void 0:k.split(" ").shift())??"bottom":!1}),C=ee(()=>{var k;return a.value?((k=e.location)==null?void 0:k.split(" ")[1])??"end":!1});ra(()=>e.app,()=>{const k=ec({id:e.name,order:ee(()=>parseInt(e.order,10)),position:b,layoutSize:ee(()=>e.layout?c.value+24:0),elementSize:ee(()=>c.value+24),active:ee(()=>e.app&&s.value),absolute:Ee(()=>e.absolute)});Ri(()=>{f.value=k.layoutItemStyles.value})});const w=tt();return _t(()=>{const k=Mn.filterProps(e);return Z("div",{ref:w,class:gt(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${b.value}`]:a.value,[`v-fab--${C.value}`]:a.value},e.class]),style:zt([e.app?{...f.value}:{height:e.absolute?"100%":"inherit"},e.style])},[Z("div",{class:"v-fab__container"},[G(ia,{appear:e.appear,transition:e.transition},{default:()=>[ei(G(Mn,lt({ref:d},k,{active:void 0,location:void 0}),r),[[xs,e.active]])]})])])}),{}}});function FF(){function e(r){var c,f;return[...((c=r.dataTransfer)==null?void 0:c.items)??[]].filter(d=>d.kind==="file").map(d=>d.webkitGetAsEntry()).filter(Boolean).length>0||[...((f=r.dataTransfer)==null?void 0:f.files)??[]].length>0}async function n(r){var f,d;const s=[],c=[...((f=r.dataTransfer)==null?void 0:f.items)??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean);if(c.length)for(const a of c){const b=await NI(a,UI(".",a));s.push(...b.map(C=>C.file))}else s.push(...((d=r.dataTransfer)==null?void 0:d.files)??[]);return s}return{handleDrop:n,hasFilesOrFolders:e}}function NI(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((r,s)=>{e.isFile?e.file(f=>r([{file:f,path:n}]),s):e.isDirectory&&e.createReader().readEntries(async f=>{const d=[];for(const a of f)d.push(...await NI(a,UI(n,a)));r(d)})})}function UI(e,n){return n.isDirectory?`${e}/${n.name}`:e}const $F=Ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Do({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Di(e).every(n=>n!=null&&typeof n=="object")},...wm({clearable:!0})},"VFileInput"),jF=ht()({name:"VFileInput",inheritAttrs:!1,props:$F(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{t:f}=vi(),d=Qt(e,"modelValue",e.modelValue,Be=>Di(Be),Be=>!e.multiple&&Array.isArray(Be)?Be[0]:Be),{isFocused:a,focus:b,blur:C}=Mo(e),w=ee(()=>typeof e.showSize!="boolean"?e.showSize:void 0),k=ee(()=>(d.value??[]).reduce((Be,Fe)=>{let{size:Ke=0}=Fe;return Be+Ke},0)),A=ee(()=>R1(k.value,w.value)),I=ee(()=>(d.value??[]).map(Be=>{const{name:Fe="",size:Ke=0}=Be;return e.showSize?`${Fe} (${R1(Ke,w.value)})`:Fe})),R=ee(()=>{var Fe;const Be=((Fe=d.value)==null?void 0:Fe.length)??0;return e.showSize?f(e.counterSizeString,Be,A.value):f(e.counterString,Be)}),F=tt(),B=tt(),$=tt(),O=Ee(()=>a.value||e.active),q=ee(()=>["plain","underlined"].includes(e.variant)),X=Mt(!1),{handleDrop:te,hasFilesOrFolders:ae}=FF();function ue(){var Be;$.value!==document.activeElement&&((Be=$.value)==null||Be.focus()),a.value||b()}function ce(Be){var Fe;(Fe=$.value)==null||Fe.click()}function fe(Be){s("mousedown:control",Be)}function pe(Be){var Fe;(Fe=$.value)==null||Fe.click(),s("click:control",Be)}function _e(Be){Be.stopPropagation(),ue(),Dn(()=>{d.value=[],$g(e["onClick:clear"],Be)})}function re(Be){Be.preventDefault(),Be.stopImmediatePropagation(),X.value=!0}function be(Be){Be.preventDefault(),X.value=!1}async function je(Be){if(Be.preventDefault(),Be.stopImmediatePropagation(),X.value=!1,!$.value||!ae(Be))return;const Fe=new DataTransfer;for(const Ke of await te(Be))Fe.items.add(Ke);$.value.files=Fe.files,$.value.dispatchEvent(new Event("change",{bubbles:!0}))}return Bt(d,Be=>{(!Array.isArray(Be)||!Be.length)&&$.value&&($.value.value="")}),_t(()=>{const Be=!!(c.counter||e.counter),Fe=!!(Be||c.details),[Ke,ft]=El(r),{modelValue:mt,...ze}=Wr.filterProps(e),Se=Il.filterProps(e);return G(Wr,lt({ref:F,modelValue:e.multiple?d.value:d.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":X.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":q.value},e.class],style:e.style,"onClick:prepend":ce},Ke,ze,{centerAffix:!q.value,focused:a.value}),{...c,default:Me=>{let{id:Qe,isDisabled:Ft,isDirty:Tt,isReadonly:xt,isValid:Re}=Me;return G(Il,lt({ref:B,"prepend-icon":e.prependIcon,onMousedown:fe,onClick:pe,"onClick:clear":_e,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Se,{id:Qe.value,active:O.value||Tt.value,dirty:Tt.value||e.dirty,disabled:Ft.value,focused:a.value,error:Re.value===!1,onDragover:re,onDrop:je}),{...c,default:vt=>{var St;let{props:{class:st,...Ye}}=vt;return Z(qt,null,[Z("input",lt({ref:$,type:"file",readonly:xt.value,disabled:Ft.value,multiple:e.multiple,name:e.name,onClick:ie=>{ie.stopPropagation(),xt.value&&ie.preventDefault(),ue()},onChange:ie=>{if(!ie.target)return;const le=ie.target;d.value=[...le.files??[]]},onDragleave:be,onFocus:ue,onBlur:C},Ye,ft),null),Z("div",{class:gt(st)},[!!((St=d.value)!=null&&St.length)&&!e.hideInput&&(c.selection?c.selection({fileNames:I.value,totalBytes:k.value,totalBytesReadable:A.value}):e.chips?I.value.map(ie=>G(Xd,{key:ie,size:"small",text:ie},null)):I.value.join(", "))])])}})},details:Fe?Me=>{var Qe,Ft;return Z(qt,null,[(Qe=c.details)==null?void 0:Qe.call(c,Me),Be&&Z(qt,null,[Z("span",null,null),G(Yg,{active:!!((Ft=d.value)!=null&&Ft.length),value:R.value,disabled:e.disabled},c.counter)])])}:void 0})}),Pr({},F,B,$)}}),NF=Ue({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},..._a(),...Ht(),...ir(),...Qu(),...yi(),...bn({tag:"footer"}),...Un()},"VFooter"),UF=ht()({name:"VFooter",props:NF(),setup(e,n){let{slots:r}=n;const s=tt(),{themeClasses:c}=Xn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.color),{borderClasses:a}=Pa(e),{elevationClasses:b}=kr(e),{roundedClasses:C}=Bi(e),w=Mt(32),{resizeRef:k}=vs(I=>{I.length&&(w.value=I[0].target.clientHeight)}),A=ee(()=>e.height==="auto"?w.value:parseInt(e.height,10));return ra(()=>e.app,()=>{const I=ec({id:e.name,order:ee(()=>parseInt(e.order,10)),position:Ee(()=>"bottom"),layoutSize:A,elementSize:ee(()=>e.height==="auto"?void 0:A.value),active:Ee(()=>e.app),absolute:Ee(()=>e.absolute)});Ri(()=>{s.value=I.layoutItemStyles.value})}),_t(()=>G(e.tag,{ref:k,class:gt(["v-footer",c.value,f.value,a.value,b.value,C.value,e.class]),style:zt([d.value,e.app?s.value:{height:Nt(e.height)},e.style])},r)),{}}}),GF=Ue({...Ht(),...nB()},"VForm"),qF=ht()({name:"VForm",props:GF(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=iB(e),f=tt();function d(b){b.preventDefault(),c.reset()}function a(b){const C=b,w=c.validate();C.then=w.then.bind(w),C.catch=w.catch.bind(w),C.finally=w.finally.bind(w),s("submit",C),C.defaultPrevented||w.then(k=>{var I;let{valid:A}=k;A&&((I=f.value)==null||I.submit())}),C.preventDefault()}return _t(()=>{var b;return Z("form",{ref:f,class:gt(["v-form",e.class]),style:zt(e.style),novalidate:!0,onReset:d,onSubmit:a},[(b=r.default)==null?void 0:b.call(r,c)])}),Pr(c,f)}}),HF=Ue({disabled:Boolean,modelValue:{type:Boolean,default:null},...S0()},"VHover"),WF=ht()({name:"VHover",props:HF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),{runOpenDelay:c,runCloseDelay:f}=C0(e,d=>!e.disabled&&(s.value=d));return()=>{var d;return(d=r.default)==null?void 0:d.call(r,{isHovering:s.value,props:{onMouseenter:c,onMouseleave:f}})}}}),ZF=Ue({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Zi(),...bn()},"VInfiniteScroll"),wS=ja({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,n)=>!0},setup(e,n){let{emit:r}=n;const{intersectionRef:s,isIntersecting:c}=mm();return Bt(c,async f=>{r("intersect",e.side,f)}),_t(()=>Z("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:s},[wn("")])),{}}}),KF=ht()({name:"VInfiniteScroll",props:ZF(),emits:{load:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=tt(),f=Mt("ok"),d=Mt("ok"),a=ee(()=>Nt(e.margin)),b=Mt(!1);function C(ae){if(!c.value)return;const ue=e.direction==="vertical"?"scrollTop":"scrollLeft";c.value[ue]=ae}function w(){if(!c.value)return 0;const ae=e.direction==="vertical"?"scrollTop":"scrollLeft";return c.value[ae]}function k(){if(!c.value)return 0;const ae=e.direction==="vertical"?"scrollHeight":"scrollWidth";return c.value[ae]}function A(){if(!c.value)return 0;const ae=e.direction==="vertical"?"clientHeight":"clientWidth";return c.value[ae]}zi(()=>{c.value&&(e.side==="start"?C(k()):e.side==="both"&&C(k()/2-A()/2))});function I(ae,ue){ae==="start"?f.value=ue:ae==="end"?d.value=ue:ae==="both"&&(f.value=ue,d.value=ue)}function R(ae){return ae==="start"?f.value:d.value}let F=0;function B(ae,ue){b.value=ue,b.value&&$(ae)}function $(ae){if(e.mode!=="manual"&&!b.value)return;const ue=R(ae);if(!c.value||["empty","loading"].includes(ue))return;F=k(),I(ae,"loading");function ce(fe){I(ae,fe),Dn(()=>{fe==="empty"||fe==="error"||(fe==="ok"&&ae==="start"&&C(k()-F+w()),e.mode!=="manual"&&Dn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{$(ae)})})})}))})}s("load",{side:ae,done:ce})}const{t:O}=vi();function q(ae,ue){var pe,_e,re,be,je;if(e.side!==ae&&e.side!=="both")return;const ce=()=>$(ae),fe={side:ae,props:{onClick:ce,color:e.color}};return ue==="error"?(pe=r.error)==null?void 0:pe.call(r,fe):ue==="empty"?((_e=r.empty)==null?void 0:_e.call(r,fe))??Z("div",null,[O(e.emptyText)]):e.mode==="manual"?ue==="loading"?((re=r.loading)==null?void 0:re.call(r,fe))??G(Gu,{indeterminate:!0,color:e.color},null):((be=r["load-more"])==null?void 0:be.call(r,fe))??G(Mn,{variant:"outlined",color:e.color,onClick:ce},{default:()=>[O(e.loadMoreText)]}):((je=r.loading)==null?void 0:je.call(r,fe))??G(Gu,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:X}=Ki(e);_t(()=>{const ae=e.tag,ue=e.side==="start"||e.side==="both",ce=e.side==="end"||e.side==="both",fe=e.mode==="intersect";return G(ae,{ref:c,class:gt(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":ue,"v-infinite-scroll--end":ce}]),style:zt(X.value)},{default:()=>{var pe;return[Z("div",{class:"v-infinite-scroll__side"},[q("start",f.value)]),ue&&fe&&G(wS,{key:"start",side:"start",onIntersect:B,rootMargin:a.value},null),(pe=r.default)==null?void 0:pe.call(r),ce&&fe&&G(wS,{key:"end",side:"end",onIntersect:B,rootMargin:a.value},null),Z("div",{class:"v-infinite-scroll__side"},[q("end",d.value)])]}})});function te(ae){const ue=ae??e.side;I(ue,"ok"),Dn(()=>{C(k()-F+w()),e.mode!=="manual"&&Dn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{ue==="both"?($("start"),$("end")):$(ue)})})})})})}return{reset:te}}}),GI=Symbol.for("vuetify:v-item-group"),YF=Ue({...Ht(),...ic({selectedClass:"v-item--selected"}),...bn(),...Un()},"VItemGroup"),XF=ht()({name:"VItemGroup",props:YF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{isSelected:c,select:f,next:d,prev:a,selected:b}=Dl(e,GI);return()=>G(e.tag,{class:gt(["v-item-group",s.value,e.class]),style:zt(e.style)},{default:()=>{var C;return[(C=r.default)==null?void 0:C.call(r,{isSelected:c,select:f,next:d,prev:a,selected:b.value})]}})}}),JF=ht()({name:"VItem",props:rc(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const{isSelected:s,select:c,toggle:f,selectedClass:d,value:a,disabled:b}=ac(e,GI);return()=>{var C;return(C=r.default)==null?void 0:C.call(r,{isSelected:s.value,selectedClass:d.value,select:c,toggle:f,value:a.value,disabled:b.value})}}}),QF=Ue({color:String,..._a(),...Ht(),...yi(),...bn({tag:"kbd"}),...Un(),...ir()},"VKbd"),e3=ht()({name:"VKbd",props:QF(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{borderClasses:c}=Pa(e),{roundedClasses:f}=Bi(e),{backgroundColorClasses:d,backgroundColorStyles:a}=ti(()=>e.color),{elevationClasses:b}=kr(e);return _t(()=>G(e.tag,{class:gt(["v-kbd",s.value,d.value,c.value,b.value,f.value,e.class]),style:zt([a.value,e.style])},r)),{}}}),t3=Ue({...Ht(),...Zi(),...Pk()},"VLayout"),n3=ht()({name:"VLayout",props:t3(),setup(e,n){let{slots:r}=n;const{layoutClasses:s,layoutStyles:c,getLayoutItem:f,items:d,layoutRef:a}=Ak(e),{dimensionStyles:b}=Ki(e);return _t(()=>{var C;return Z("div",{ref:a,class:gt([s.value,e.class]),style:zt([b.value,c.value,e.style])},[(C=r.default)==null?void 0:C.call(r)])}),{getLayoutItem:f,items:d}}}),i3=Ue({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Ht(),...Qu()},"VLayoutItem"),r3=ht()({name:"VLayoutItem",props:i3(),setup(e,n){let{slots:r}=n;const{layoutItemStyles:s}=ec({id:e.name,order:ee(()=>parseInt(e.order,10)),position:Ee(()=>e.position),elementSize:Ee(()=>e.size),layoutSize:Ee(()=>e.size),active:Ee(()=>e.modelValue),absolute:Ee(()=>e.absolute)});return()=>{var c;return Z("div",{class:gt(["v-layout-item",e.class]),style:zt([s.value,e.style])},[(c=r.default)==null?void 0:c.call(r)])}}}),a3=Ue({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Ht(),...Zi(),...bn(),...ws({transition:"fade-transition"})},"VLazy"),s3=ht()({name:"VLazy",directives:{vIntersect:Co},props:a3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),c=Qt(e,"modelValue");function f(d){c.value||(c.value=d)}return _t(()=>ei(G(e.tag,{class:gt(["v-lazy",e.class]),style:zt([s.value,e.style])},{default:()=>[c.value&&G(ia,{transition:e.transition,appear:!0},{default:()=>{var d;return[(d=r.default)==null?void 0:d.call(r)]}})]}),[[Co,{handler:f,options:e.options},null]])),{}}}),o3=Ue({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Ht()},"VLocaleProvider"),l3=ht()({name:"VLocaleProvider",props:o3(),setup(e,n){let{slots:r}=n;const{rtlClasses:s}=ZR(e);return _t(()=>{var c;return Z("div",{class:gt(["v-locale-provider",s.value,e.class]),style:zt(e.style)},[(c=r.default)==null?void 0:c.call(r)])}),{}}}),u3=Ue({scrollable:Boolean,...Ht(),...Zi(),...bn({tag:"main"})},"VMain"),c3=ht()({name:"VMain",props:u3(),setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),{mainStyles:c}=Ik(),{ssrBootStyles:f}=tc();return _t(()=>G(e.tag,{class:gt(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:zt([c.value,f.value,s.value,e.style])},{default:()=>{var d,a;return[e.scrollable?Z("div",{class:"v-main__scroller"},[(d=r.default)==null?void 0:d.call(r)]):(a=r.default)==null?void 0:a.call(r)]}})),{}}});function d3(e){let{rootEl:n,isSticky:r,layoutItemStyles:s}=e;const c=Mt(!1),f=Mt(0),d=ee(()=>{const C=typeof c.value=="boolean"?"top":c.value;return[r.value?{top:"auto",bottom:"auto",height:void 0}:void 0,c.value?{[C]:Nt(f.value)}:{top:s.value.top}]});zi(()=>{Bt(r,C=>{C?window.addEventListener("scroll",b,{passive:!0}):window.removeEventListener("scroll",b)},{immediate:!0})}),Vr(()=>{window.removeEventListener("scroll",b)});let a=0;function b(){const C=a>window.scrollY?"up":"down",w=n.value.getBoundingClientRect(),k=parseFloat(s.value.top??0),A=window.scrollY-Math.max(0,f.value-k),I=w.height+Math.max(f.value,k)-window.scrollY-window.innerHeight,R=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;w.height<window.innerHeight-k?(c.value="top",f.value=k):C==="up"&&c.value==="bottom"||C==="down"&&c.value==="top"?(f.value=window.scrollY+w.top-R,c.value=!0):C==="down"&&I<=0?(f.value=0,c.value="bottom"):C==="up"&&A<=0&&(R?c.value!=="top"&&(f.value=-A+R+k,c.value="top"):(f.value=w.top+A,c.value="top")),a=window.scrollY}return{isStuck:c,stickyStyles:d}}const h3=100,f3=20;function SS(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function CS(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let n=0;for(let r=e.length-1;r>0;r--){if(e[r].t===e[r-1].t)continue;const s=SS(n),c=(e[r].d-e[r-1].d)/(e[r].t-e[r-1].t);n+=(c-s)*Math.abs(c),r===e.length-1&&(n*=.5)}return SS(n)*1e3}function m3(){const e={};function n(c){Array.from(c.changedTouches).forEach(f=>{(e[f.identifier]??(e[f.identifier]=new JT(f3))).push([c.timeStamp,f])})}function r(c){Array.from(c.changedTouches).forEach(f=>{delete e[f.identifier]})}function s(c){var C;const f=(C=e[c])==null?void 0:C.values().reverse();if(!f)throw new Error(`No samples for touch id ${c}`);const d=f[0],a=[],b=[];for(const w of f){if(d[0]-w[0]>h3)break;a.push({t:w[0],d:w[1].clientX}),b.push({t:w[0],d:w[1].clientY})}return{x:CS(a),y:CS(b),get direction(){const{x:w,y:k}=this,[A,I]=[Math.abs(w),Math.abs(k)];return A>I&&w>=0?"right":A>I&&w<=0?"left":I>A&&k>=0?"down":I>A&&k<=0?"up":p3()}}}return{addMovement:n,endTouch:r,getVelocity:s}}function p3(){throw new Error}function g3(e){let{el:n,isActive:r,isTemporary:s,width:c,touchless:f,position:d}=e;zi(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",q,{passive:!1}),window.addEventListener("touchend",X,{passive:!0})}),Vr(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",q),window.removeEventListener("touchend",X)});const a=ee(()=>["left","right"].includes(d.value)),{addMovement:b,endTouch:C,getVelocity:w}=m3();let k=!1;const A=Mt(!1),I=Mt(0),R=Mt(0);let F;function B(ae,ue){return(d.value==="left"?ae:d.value==="right"?document.documentElement.clientWidth-ae:d.value==="top"?ae:d.value==="bottom"?document.documentElement.clientHeight-ae:cd())-(ue?c.value:0)}function $(ae){let ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const ce=d.value==="left"?(ae-R.value)/c.value:d.value==="right"?(document.documentElement.clientWidth-ae-R.value)/c.value:d.value==="top"?(ae-R.value)/c.value:d.value==="bottom"?(document.documentElement.clientHeight-ae-R.value)/c.value:cd();return ue?di(ce):ce}function O(ae){if(f.value)return;const ue=ae.changedTouches[0].clientX,ce=ae.changedTouches[0].clientY,fe=25,pe=d.value==="left"?ue<fe:d.value==="right"?ue>document.documentElement.clientWidth-fe:d.value==="top"?ce<fe:d.value==="bottom"?ce>document.documentElement.clientHeight-fe:cd(),_e=r.value&&(d.value==="left"?ue<c.value:d.value==="right"?ue>document.documentElement.clientWidth-c.value:d.value==="top"?ce<c.value:d.value==="bottom"?ce>document.documentElement.clientHeight-c.value:cd());(pe||_e||r.value&&s.value)&&(F=[ue,ce],R.value=B(a.value?ue:ce,r.value),I.value=$(a.value?ue:ce),k=R.value>-20&&R.value<80,C(ae),b(ae))}function q(ae){const ue=ae.changedTouches[0].clientX,ce=ae.changedTouches[0].clientY;if(k){if(!ae.cancelable){k=!1;return}const pe=Math.abs(ue-F[0]),_e=Math.abs(ce-F[1]);(a.value?pe>_e&&pe>3:_e>pe&&_e>3)?(A.value=!0,k=!1):(a.value?_e:pe)>3&&(k=!1)}if(!A.value)return;ae.preventDefault(),b(ae);const fe=$(a.value?ue:ce,!1);I.value=Math.max(0,Math.min(1,fe)),fe>1?R.value=B(a.value?ue:ce,!0):fe<0&&(R.value=B(a.value?ue:ce,!1))}function X(ae){if(k=!1,!A.value)return;b(ae),A.value=!1;const ue=w(ae.changedTouches[0].identifier),ce=Math.abs(ue.x),fe=Math.abs(ue.y);(a.value?ce>fe&&ce>400:fe>ce&&fe>3)?r.value=ue.direction===({left:"right",right:"left",top:"down",bottom:"up"}[d.value]||cd()):r.value=I.value>.5}const te=ee(()=>A.value?{transform:d.value==="left"?`translateX(calc(-100% + ${I.value*c.value}px))`:d.value==="right"?`translateX(calc(100% - ${I.value*c.value}px))`:d.value==="top"?`translateY(calc(-100% + ${I.value*c.value}px))`:d.value==="bottom"?`translateY(calc(100% - ${I.value*c.value}px))`:cd(),transition:"none"}:void 0);return ra(A,()=>{var ce,fe;const ae=((ce=n.value)==null?void 0:ce.style.transform)??null,ue=((fe=n.value)==null?void 0:fe.style.transition)??null;Ri(()=>{var pe,_e,re,be;(_e=n.value)==null||_e.style.setProperty("transform",((pe=te.value)==null?void 0:pe.transform)||"none"),(be=n.value)==null||be.style.setProperty("transition",((re=te.value)==null?void 0:re.transition)||null)}),fr(()=>{var pe,_e;(pe=n.value)==null||pe.style.setProperty("transform",ae),(_e=n.value)==null||_e.style.setProperty("transition",ue)})}),{isDragging:A,dragProgress:I,dragStyles:te}}function cd(){throw new Error}const v3=["start","end","left","right","top","bottom"],y3=Ue({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>v3.includes(e)},sticky:Boolean,..._a(),...Ht(),...S0(),...Ju({mobile:null}),...ir(),...Qu(),...yi(),...bn({tag:"nav"}),...Un()},"VNavigationDrawer"),_3=ht()({name:"VNavigationDrawer",props:y3(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{isRtl:f}=nr(),{themeClasses:d}=Xn(e),{borderClasses:a}=Pa(e),{backgroundColorClasses:b,backgroundColorStyles:C}=ti(()=>e.color),{elevationClasses:w}=kr(e),{displayClasses:k,mobile:A}=Qa(e),{roundedClasses:I}=Bi(e),R=$k(),F=Qt(e,"modelValue",null,ze=>!!ze),{ssrBootStyles:B}=tc(),{scopeId:$}=oc(),O=tt(),q=Mt(!1),{runOpenDelay:X,runCloseDelay:te}=C0(e,ze=>{q.value=ze}),ae=ee(()=>e.rail&&e.expandOnHover&&q.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),ue=ee(()=>E_(e.location,f.value)),ce=Ee(()=>e.persistent),fe=ee(()=>!e.permanent&&(A.value||e.temporary)),pe=ee(()=>e.sticky&&!fe.value&&ue.value!=="bottom");ra(()=>e.expandOnHover&&e.rail!=null,()=>{Bt(q,ze=>s("update:rail",!ze))}),ra(()=>!e.disableResizeWatcher,()=>{Bt(fe,ze=>!e.permanent&&Dn(()=>F.value=!ze))}),ra(()=>!e.disableRouteWatcher&&!!R,()=>{Bt(R.currentRoute,()=>fe.value&&(F.value=!1))}),Bt(()=>e.permanent,ze=>{ze&&(F.value=!0)}),e.modelValue==null&&!fe.value&&(F.value=e.permanent||!A.value);const{isDragging:_e,dragProgress:re}=g3({el:O,isActive:F,isTemporary:fe,width:ae,touchless:Ee(()=>e.touchless),position:ue}),be=ee(()=>{const ze=fe.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):ae.value;return _e.value?ze*re.value:ze}),{layoutItemStyles:je,layoutItemScrimStyles:Be}=ec({id:e.name,order:ee(()=>parseInt(e.order,10)),position:ue,layoutSize:be,elementSize:ae,active:Gd(F),disableTransitions:Ee(()=>_e.value),absolute:ee(()=>e.absolute||pe.value&&typeof Fe.value!="string")}),{isStuck:Fe,stickyStyles:Ke}=d3({rootEl:O,isSticky:pe,layoutItemStyles:je}),ft=ti(()=>typeof e.scrim=="string"?e.scrim:null),mt=ee(()=>({..._e.value?{opacity:re.value*.2,transition:"none"}:void 0,...Be.value}));return Li({VList:{bgColor:"transparent"}}),_t(()=>{const ze=c.image||e.image;return Z(qt,null,[G(e.tag,lt({ref:O,onMouseenter:X,onMouseleave:te,class:["v-navigation-drawer",`v-navigation-drawer--${ue.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":q.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":fe.value,"v-navigation-drawer--persistent":ce.value,"v-navigation-drawer--active":F.value,"v-navigation-drawer--sticky":pe.value},d.value,b.value,a.value,k.value,w.value,I.value,e.class],style:[C.value,je.value,B.value,Ke.value,e.style]},$,r),{default:()=>{var Se,Me,Qe;return[ze&&Z("div",{key:"image",class:"v-navigation-drawer__img"},[c.image?G(Sn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},c.image):G(To,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),c.prepend&&Z("div",{class:"v-navigation-drawer__prepend"},[(Se=c.prepend)==null?void 0:Se.call(c)]),Z("div",{class:"v-navigation-drawer__content"},[(Me=c.default)==null?void 0:Me.call(c)]),c.append&&Z("div",{class:"v-navigation-drawer__append"},[(Qe=c.append)==null?void 0:Qe.call(c)])]}}),G(kl,{name:"fade-transition"},{default:()=>[fe.value&&(_e.value||F.value)&&!!e.scrim&&Z("div",lt({class:["v-navigation-drawer__scrim",ft.backgroundColorClasses.value],style:[mt.value,ft.backgroundColorStyles.value],onClick:()=>{ce.value||(F.value=!1)}},$),null)]})])}),{isStuck:Fe}}}),b3=ja({name:"VNoSsr",setup(e,n){let{slots:r}=n;const s=AP();return()=>{var c;return s.value&&((c=r.default)==null?void 0:c.call(r))}}}),x3=50,w3=500;function S3(e){let{toggleUpDown:n}=e,r=-1,s=-1;fr(f);function c(a){f(),d(a),window.addEventListener("pointerup",f),document.addEventListener("blur",f),r=window.setTimeout(()=>{s=window.setInterval(()=>d(a),x3)},w3)}function f(){window.clearTimeout(r),window.clearInterval(s),window.removeEventListener("pointerup",f),document.removeEventListener("blur",f)}function d(a){n(a==="up")}return{holdStart:c,holdStop:f}}const C3=Ue({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...hi(Sm(),["modelValue","validationValue"])},"VNumberInput"),T3=ht()({name:"VNumberInput",props:{...C3()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tt(),{holdStart:c,holdStop:f}=S3({toggleUpDown:fe}),d=bm(e),a=ee(()=>d.isDisabled.value||d.isReadonly.value),b=Mt(e.focused),{decimalSeparator:C}=vi(),w=ee(()=>{var Se;return((Se=e.decimalSeparator)==null?void 0:Se[0])||C.value});function k(Se){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,Qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const Ft=Me==null?String(Se):Se.toFixed(Me);if(b.value&&Qe)return Number(Ft).toString().replace(".",w.value);if(e.minFractionDigits===null||Me!==null&&Me<e.minFractionDigits)return Ft.replace(".",w.value);let[Tt,xt]=Ft.split(".");return xt=(xt??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0`,"g"),""),[Tt,xt].filter(Boolean).join(w.value)}const A=Qt(e,"modelValue",null,Se=>Se??null,Se=>Se==null?Se??null:di(Number(Se),e.min,e.max)),I=Mt(null);Ri(()=>{b.value&&!a.value||(A.value==null?I.value=null:isNaN(A.value)||(I.value=k(A.value)))});const R=ee({get:()=>I.value,set(Se){if(Se===null||Se===""){A.value=null,I.value=null;return}const Me=Number(Se.replace(w.value,"."));!isNaN(Me)&&Me<=e.max&&Me>=e.min&&(A.value=Me,I.value=Se)}}),F=ee(()=>a.value?!1:(A.value??0)+e.step<=e.max),B=ee(()=>a.value?!1:(A.value??0)-e.step>=e.min),$=ee(()=>e.hideInput?"stacked":e.controlVariant),O=Ee(()=>$.value==="split"?"$plus":"$collapse"),q=Ee(()=>$.value==="split"?"$minus":"$expand"),X=Ee(()=>$.value==="split"?"default":"small"),te=Ee(()=>$.value==="stacked"?"auto":"100%"),ae={props:{onClick:re,onPointerup:be,onPointerdown:je,onPointercancel:be}},ue={props:{onClick:re,onPointerup:be,onPointerdown:Be,onPointercancel:be}};Bt(()=>e.precision,()=>Ke()),Bt(()=>e.minFractionDigits,()=>Ke()),zi(()=>{Fe()});function ce(Se){if(Se==null)return 0;const Me=Se.toString(),Qe=Me.indexOf(".");return~Qe?Me.length-Qe:0}function fe(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(a.value)return;if(A.value==null){R.value=k(di(0,e.min,e.max));return}let Me=Math.max(ce(A.value),ce(e.step));e.precision!=null&&(Me=Math.max(Me,e.precision)),Se?F.value&&(R.value=k(A.value+e.step,Me)):B.value&&(R.value=k(A.value-e.step,Me))}function pe(Se){var vt;if(!Se.data)return;const Me=Se.target,{value:Qe,selectionStart:Ft,selectionEnd:Tt}=Me??{},xt=Qe?Qe.slice(0,Ft)+Se.data+Qe.slice(Tt):Se.data,Re=oR(xt,e.precision,w.value);new RegExp(`^-?\\d*${I_(w.value)}?\\d*$`).test(xt)||(Se.preventDefault(),Me.value=Re),e.precision!=null&&(((vt=xt.split(w.value)[1])==null?void 0:vt.length)>e.precision&&(Se.preventDefault(),Me.value=Re),e.precision===0&&xt.includes(w.value)&&(Se.preventDefault(),Me.value=Re))}async function _e(Se){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(Se.key)||Se.ctrlKey||["ArrowDown","ArrowUp"].includes(Se.key)&&(Se.preventDefault(),Fe(),await Dn(),Se.key==="ArrowDown"?fe(!1):fe())}function re(Se){Se.stopPropagation()}function be(Se){const Me=Se.currentTarget;Me==null||Me.releasePointerCapture(Se.pointerId),Se.preventDefault(),f()}function je(Se){const Me=Se.currentTarget;Me==null||Me.setPointerCapture(Se.pointerId),Se.preventDefault(),Se.stopPropagation(),c("up")}function Be(Se){const Me=Se.currentTarget;Me==null||Me.setPointerCapture(Se.pointerId),Se.preventDefault(),Se.stopPropagation(),c("down")}function Fe(){if(a.value||!s.value)return;const Se=s.value.value,Me=Number(Se.replace(w.value,"."));Se&&!isNaN(Me)?R.value=k(di(Me,e.min,e.max)):R.value=null}function Ke(){a.value||(R.value=A.value!==null&&!isNaN(A.value)?k(A.value,e.precision,!1):null)}function ft(){if(!a.value){if(A.value===null||isNaN(A.value)){R.value=null;return}R.value=A.value.toString().replace(".",w.value)}}function mt(){ft()}function ze(){Fe()}return _t(()=>{const{modelValue:Se,...Me}=ko.filterProps(e);function Qe(){return r.increment?G(Sn,{key:"increment-defaults",defaults:{VBtn:{disabled:!F.value,flat:!0,height:te.value,size:X.value,icon:O.value}}},{default:()=>[r.increment(ae)]}):G(Mn,{"aria-hidden":"true","data-testid":"increment",disabled:!F.value,flat:!0,height:te.value,icon:O.value,key:"increment-btn",onClick:re,onPointerdown:je,onPointerup:be,onPointercancel:be,size:X.value,tabindex:"-1"},null)}function Ft(){return r.decrement?G(Sn,{key:"decrement-defaults",defaults:{VBtn:{disabled:!B.value,flat:!0,height:te.value,size:X.value,icon:q.value}}},{default:()=>[r.decrement(ue)]}):G(Mn,{"aria-hidden":"true","data-testid":"decrement",disabled:!B.value,flat:!0,height:te.value,icon:q.value,key:"decrement-btn",onClick:re,onPointerdown:Be,onPointerup:be,onPointercancel:be,size:X.value,tabindex:"-1"},null)}function Tt(){return Z("div",{class:"v-number-input__control"},[Ft(),G($a,{vertical:$.value!=="stacked"},null),Qe()])}function xt(){return!e.hideInput&&!e.inset?G($a,{vertical:!0},null):void 0}const Re=$.value==="split"?Z("div",{class:"v-number-input__control"},[G($a,{vertical:!0},null),Qe()]):e.reverse||$.value==="hidden"?void 0:Z(qt,null,[xt(),Tt()]),vt=r["append-inner"]||Re,st=$.value==="split"?Z("div",{class:"v-number-input__control"},[Ft(),G($a,{vertical:!0},null)]):e.reverse&&$.value!=="hidden"?Z(qt,null,[Tt(),xt()]):void 0,Ye=r["prepend-inner"]||st;return G(ko,lt({ref:s},Me,{modelValue:R.value,"onUpdate:modelValue":St=>R.value=St,focused:b.value,"onUpdate:focused":St=>b.value=St,validationValue:A.value,onBeforeinput:pe,onFocus:mt,onBlur:ze,onKeydown:_e,class:["v-number-input",{"v-number-input--default":$.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":$.value==="split","v-number-input--stacked":$.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...r,"append-inner":vt?function(){var Le;for(var St=arguments.length,ie=new Array(St),le=0;le<St;le++)ie[le]=arguments[le];return Z(qt,null,[(Le=r["append-inner"])==null?void 0:Le.call(r,...ie),Re])}:void 0,"prepend-inner":Ye?function(){var Le;for(var St=arguments.length,ie=new Array(St),le=0;le<St;le++)ie[le]=arguments[le];return Z(qt,null,[st,(Le=r["prepend-inner"])==null?void 0:Le.call(r,...ie)])}:void 0})}),Pr({},s)}}),k3=Ue({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Zi(),..._m(),...Io(wm({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),P3=ht()({name:"VOtpInput",props:k3(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{dimensionStyles:f}=Ki(e),{isFocused:d,focus:a,blur:b}=Mo(e),C=Qt(e,"modelValue","",ce=>ce==null?[]:String(ce).split(""),ce=>ce.join("")),{t:w}=vi(),k=ee(()=>Number(e.length)),A=ee(()=>Array(k.value).fill(0)),I=tt(-1),R=tt(),F=tt([]),B=ee(()=>F.value[I.value]);ra(()=>e.autofocus,()=>{const ce=Dd();ce.run(()=>{const{intersectionRef:fe,isIntersecting:pe}=mm();Ri(()=>{fe.value=F.value[0]}),Bt(pe,_e=>{var re;_e&&((re=fe.value)==null||re.focus(),ce.stop())})})});function $(){if(ue(B.value.value)){B.value.value="";return}const ce=C.value.slice(),fe=B.value.value;ce[I.value]=fe;let pe=null;I.value>C.value.length?pe=C.value.length+1:I.value+1!==k.value&&(pe="next"),C.value=ce,pe&&$u(R.value,pe)}function O(ce){const fe=C.value.slice(),pe=I.value;let _e=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(ce.key)&&(ce.preventDefault(),ce.key==="ArrowLeft"?_e="prev":ce.key==="ArrowRight"?_e="next":["Backspace","Delete"].includes(ce.key)&&(fe[I.value]="",C.value=fe,I.value>0&&ce.key==="Backspace"?_e="prev":requestAnimationFrame(()=>{var re;(re=F.value[pe])==null||re.select()})),requestAnimationFrame(()=>{_e!=null&&$u(R.value,_e)}))}function q(ce,fe){var re,be;fe.preventDefault(),fe.stopPropagation();const pe=((re=fe==null?void 0:fe.clipboardData)==null?void 0:re.getData("Text").trim().slice(0,k.value))??"",_e=pe.length-1===-1?ce:pe.length-1;ue(pe)||(C.value=pe.split(""),(be=F.value)==null||be[_e].focus())}function X(){C.value=[]}function te(ce,fe){a(),I.value=fe}function ae(){b(),I.value=-1}function ue(ce){return e.type==="number"&&/[^0-9]/g.test(ce)}return Li({VField:{color:Ee(()=>e.color),bgColor:Ee(()=>e.color),baseColor:Ee(()=>e.baseColor),disabled:Ee(()=>e.disabled),error:Ee(()=>e.error),variant:Ee(()=>e.variant)}},{scoped:!0}),Bt(C,ce=>{ce.length===k.value&&(I.value=k.value-1,s("finish",ce.join("")))},{deep:!0}),Bt(I,ce=>{ce<0||Dn(()=>{var fe;(fe=F.value[ce])==null||fe.select()})}),_t(()=>{var pe;const[ce,fe]=El(r);return Z("div",lt({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},ce),[Z("div",{ref:R,class:"v-otp-input__content",style:zt([f.value])},[A.value.map((_e,re)=>Z(qt,null,[e.divider&&re!==0&&Z("span",{class:"v-otp-input__divider"},[e.divider]),G(Il,{focused:d.value&&e.focusAll||I.value===re,key:re},{...c,loader:void 0,default:()=>Z("input",{ref:be=>F.value[re]=be,"aria-label":w(e.label,re+1),autofocus:re===0&&e.autofocus,autocomplete:"one-time-code",class:gt(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:re===0?k.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:C.value[re],onInput:$,onFocus:be=>te(be,re),onBlur:ae,onKeydown:O,onPaste:be=>q(re,be)},null)})])),Z("input",lt({class:"v-otp-input-input",type:"hidden"},fe,{value:C.value.join("")}),null),G(Hs,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var _e;return[((_e=c.loader)==null?void 0:_e.call(c))??G(Gu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(pe=c.default)==null?void 0:pe.call(c)])])}),{blur:()=>{var ce;(ce=F.value)==null||ce.some(fe=>fe.blur())},focus:()=>{var ce;(ce=F.value)==null||ce[0].focus()},reset:X,isFocused:d}}});function I3(e){return Math.floor(Math.abs(e))*Math.sign(e)}const A3=Ue({scale:{type:[Number,String],default:.5},...Ht()},"VParallax"),E3=ht()({name:"VParallax",props:A3(),setup(e,n){let{slots:r}=n;const{intersectionRef:s,isIntersecting:c}=mm(),{resizeRef:f,contentRect:d}=vs(),{height:a}=Qa(),b=tt();Ri(()=>{var I;s.value=f.value=(I=b.value)==null?void 0:I.$el});let C;Bt(c,I=>{I?(C=a0(s.value),C=C===document.scrollingElement?document:C,C.addEventListener("scroll",A,{passive:!0}),A()):C.removeEventListener("scroll",A)}),Vr(()=>{C==null||C.removeEventListener("scroll",A)}),Bt(a,A),Bt(()=>{var I;return(I=d.value)==null?void 0:I.height},A);const w=ee(()=>1-di(Number(e.scale)));let k=-1;function A(){c.value&&(cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var te;const I=((te=b.value)==null?void 0:te.$el).querySelector(".v-img__img");if(!I)return;const R=C instanceof Document?document.documentElement.clientHeight:C.clientHeight,F=C instanceof Document?window.scrollY:C.scrollTop,B=s.value.getBoundingClientRect().top+F,$=d.value.height,O=B+($-R)/2,q=I3((F-O)*w.value),X=Math.max(1,(w.value*(R-$)+$)/$);I.style.setProperty("transform",`translateY(${q}px) scale(${X})`)}))}return _t(()=>G(To,{class:gt(["v-parallax",{"v-parallax--active":c.value},e.class]),style:zt(e.style),ref:b,cover:!0,onLoadstart:A,onLoad:A},r)),{}}}),M3=Ue({...Kg({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),D3=ht()({name:"VRadio",props:M3(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=Pl.filterProps(e);return G(Pl,lt(s,{class:["v-radio",e.class],style:e.style,type:"radio"}),r)}),{}}}),R3=Ue({height:{type:[Number,String],default:"auto"},...Do(),...hi(y0(),["multiple"]),trueIcon:{type:tn,default:"$radioOn"},falseIcon:{type:tn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),L3=ht()({name:"VRadioGroup",inheritAttrs:!1,props:R3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=ya(),f=ee(()=>e.id||`radio-group-${c}`),d=Qt(e,"modelValue"),a=tt();return _t(()=>{const[b,C]=El(r),w=Wr.filterProps(e),k=Pl.filterProps(e),A=s.label?s.label({label:e.label,props:{for:f.value}}):e.label;return G(Wr,lt({ref:a,class:["v-radio-group",e.class],style:e.style},b,w,{modelValue:d.value,"onUpdate:modelValue":I=>d.value=I,id:f.value}),{...s,default:I=>{let{id:R,messagesId:F,isDisabled:B,isReadonly:$}=I;return Z(qt,null,[A&&G(Yd,{id:R.value},{default:()=>[A]}),G(Yk,lt(k,{id:R.value,"aria-describedby":F.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:B.value,readonly:$.value,"aria-labelledby":A?R.value:void 0,multiple:!1},C,{modelValue:d.value,"onUpdate:modelValue":O=>d.value=O}),s)])}})}),Pr({},a)}}),z3=Ue({..._m(),...Do(),...XP(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),B3=ht()({name:"VRangeSlider",props:z3(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=tt(),f=tt(),d=tt(),{rtlClasses:a}=nr();function b(pe){if(!c.value||!f.value)return;const _e=Q_(pe,c.value.$el,e.direction),re=Q_(pe,f.value.$el,e.direction),be=Math.abs(_e),je=Math.abs(re);return be<je||be===je&&_e<0?c.value.$el:f.value.$el}const C=JP(e),w=Qt(e,"modelValue",void 0,pe=>pe!=null&&pe.length?pe.map(_e=>C.roundValue(_e)):[0,0]),{activeThumbRef:k,hasLabels:A,max:I,min:R,mousePressed:F,onSliderMousedown:B,onSliderTouchstart:$,position:O,trackContainerRef:q,readonly:X}=QP({props:e,steps:C,onSliderStart:()=>{s("start",w.value)},onSliderEnd:pe=>{var be;let{value:_e}=pe;const re=k.value===((be=c.value)==null?void 0:be.$el)?[_e,w.value[1]]:[w.value[0],_e];!e.strict&&re[0]<re[1]&&(w.value=re),s("end",w.value)},onSliderMove:pe=>{var je,Be,Fe,Ke;let{value:_e}=pe;const[re,be]=w.value;!e.strict&&re===be&&re!==R.value&&(k.value=_e>re?(je=f.value)==null?void 0:je.$el:(Be=c.value)==null?void 0:Be.$el,(Fe=k.value)==null||Fe.focus()),k.value===((Ke=c.value)==null?void 0:Ke.$el)?w.value=[Math.min(_e,be),be]:w.value=[re,Math.max(re,_e)]},getActiveThumb:b}),{isFocused:te,focus:ae,blur:ue}=Mo(e),ce=ee(()=>O(w.value[0])),fe=ee(()=>O(w.value[1]));return _t(()=>{const pe=Wr.filterProps(e),_e=!!(e.label||r.label||r.prepend);return G(Wr,lt({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!r["tick-label"]||A.value,"v-slider--focused":te.value,"v-slider--pressed":F.value,"v-slider--disabled":e.disabled},a.value,e.class],style:e.style,ref:d},pe,{focused:te.value}),{...r,prepend:_e?re=>{var be,je;return Z(qt,null,[((be=r.label)==null?void 0:be.call(r,re))??(e.label?G(Yd,{class:"v-slider__label",text:e.label},null):void 0),(je=r.prepend)==null?void 0:je.call(r,re)])}:void 0,default:re=>{var Be,Fe;let{id:be,messagesId:je}=re;return Z("div",{class:"v-slider__container",onMousedown:X.value?void 0:B,onTouchstartPassive:X.value?void 0:$},[Z("input",{id:`${be.value}_start`,name:e.name||be.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:w.value[0]},null),Z("input",{id:`${be.value}_stop`,name:e.name||be.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:w.value[1]},null),G(eI,{ref:q,start:ce.value,stop:fe.value},{"tick-label":r["tick-label"]}),G(eb,{ref:c,"aria-describedby":je.value,focused:te&&k.value===((Be=c.value)==null?void 0:Be.$el),modelValue:w.value[0],"onUpdate:modelValue":Ke=>w.value=[Ke,w.value[1]],onFocus:Ke=>{var ft,mt,ze,Se;ae(),k.value=(ft=c.value)==null?void 0:ft.$el,I.value!==R.value&&w.value[0]===w.value[1]&&w.value[1]===R.value&&Ke.relatedTarget!==((mt=f.value)==null?void 0:mt.$el)&&((ze=c.value)==null||ze.$el.blur(),(Se=f.value)==null||Se.$el.focus())},onBlur:()=>{ue(),k.value=void 0},min:R.value,max:w.value[1],position:ce.value,ripple:e.ripple},{"thumb-label":r["thumb-label"]}),G(eb,{ref:f,"aria-describedby":je.value,focused:te&&k.value===((Fe=f.value)==null?void 0:Fe.$el),modelValue:w.value[1],"onUpdate:modelValue":Ke=>w.value=[w.value[0],Ke],onFocus:Ke=>{var ft,mt,ze,Se;ae(),k.value=(ft=f.value)==null?void 0:ft.$el,I.value!==R.value&&w.value[0]===w.value[1]&&w.value[0]===I.value&&Ke.relatedTarget!==((mt=c.value)==null?void 0:mt.$el)&&((ze=f.value)==null||ze.$el.blur(),(Se=c.value)==null||Se.$el.focus())},onBlur:()=>{ue(),k.value=void 0},min:w.value[0],max:I.value,position:fe.value,ripple:e.ripple},{"thumb-label":r["thumb-label"]})])}})}),Pr({focus:()=>{var pe;return(pe=c.value)==null?void 0:pe.$el.focus()}},d)}}),V3=Ue({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:tn,default:"$ratingEmpty"},fullIcon:{type:tn,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Ht(),...mr(),...Ks(),...bn(),...Un()},"VRating"),O3=ht()({name:"VRating",props:V3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=vi(),{themeClasses:c}=Xn(e),f=Qt(e,"modelValue"),d=ee(()=>di(parseFloat(f.value),0,Number(e.length))),a=ee(()=>Oa(Number(e.length),1)),b=ee(()=>a.value.flatMap(B=>e.halfIncrements?[B-.5,B]:[B])),C=Mt(-1),w=ee(()=>b.value.map(B=>{const $=e.hover&&C.value>-1,O=d.value>=B,q=C.value>=B,te=($?q:O)?e.fullIcon:e.emptyIcon,ae=e.activeColor??e.color,ue=O||q?ae:e.color;return{isFilled:O,isHovered:q,icon:te,color:ue}})),k=ee(()=>[0,...b.value].map(B=>{function $(){C.value=B}function O(){C.value=-1}function q(){e.disabled||e.readonly||(f.value=d.value===B&&e.clearable?0:B)}return{onMouseenter:e.hover?$:void 0,onMouseleave:e.hover?O:void 0,onClick:q}})),A=ya(),I=ee(()=>e.name??`v-rating-${A}`);function R(B){var fe,pe;let{value:$,index:O,showStar:q=!0}=B;const{onMouseenter:X,onMouseleave:te,onClick:ae}=k.value[O+1],ue=`${I.value}-${String($).replace(".","-")}`,ce={color:(fe=w.value[O])==null?void 0:fe.color,density:e.density,disabled:e.disabled,icon:(pe=w.value[O])==null?void 0:pe.icon,ripple:e.ripple,size:e.size,variant:"plain"};return Z(qt,null,[Z("label",{for:ue,class:gt({"v-rating__item--half":e.halfIncrements&&$%1>0,"v-rating__item--full":e.halfIncrements&&$%1===0}),onMouseenter:X,onMouseleave:te,onClick:ae},[Z("span",{class:"v-rating__hidden"},[s(e.itemAriaLabel,$,e.length)]),q?r.item?r.item({...w.value[O],props:ce,value:$,index:O,rating:d.value}):G(Mn,lt({"aria-label":s(e.itemAriaLabel,$,e.length)},ce),null):void 0]),Z("input",{class:"v-rating__hidden",name:I.value,id:ue,type:"radio",value:$,checked:d.value===$,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function F(B){return r["item-label"]?r["item-label"](B):B.label?Z("span",null,[B.label]):Z("span",null,[wn("")])}return _t(()=>{var $;const B=!!(($=e.itemLabels)!=null&&$.length)||r["item-label"];return G(e.tag,{class:gt(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},c.value,e.class]),style:zt(e.style)},{default:()=>[G(R,{value:0,index:-1,showStar:!1},null),a.value.map((O,q)=>{var X,te;return Z("div",{class:"v-rating__wrapper"},[B&&e.itemLabelPosition==="top"?F({value:O,index:q,label:(X=e.itemLabels)==null?void 0:X[q]}):void 0,Z("div",{class:"v-rating__item"},[e.halfIncrements?Z(qt,null,[G(R,{value:O-.5,index:q*2},null),G(R,{value:O,index:q*2+1},null)]):G(R,{value:O,index:q},null)]),B&&e.itemLabelPosition==="bottom"?F({value:O,index:q,label:(te=e.itemLabels)==null?void 0:te[q]}):void 0])})]})}),{}}}),F3={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function $3(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Z("div",{class:gt(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[n])}function TS(e){const[n,r]=e.split("@");return Array.from({length:r}).map(()=>cv(n))}function cv(e){let n=[];if(!e)return n;const r=F3[e];if(e!==r){if(e.includes(","))return kS(e);if(e.includes("@"))return TS(e);r.includes(",")?n=kS(r):r.includes("@")?n=TS(r):r&&n.push(cv(r))}return[$3(e,n)]}function kS(e){return e.replace(/\s/g,"").split(",").map(cv)}const j3=Ue({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Zi(),...ir(),...Un()},"VSkeletonLoader"),N3=ht()({name:"VSkeletonLoader",props:j3(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color),{dimensionStyles:f}=Ki(e),{elevationClasses:d}=kr(e),{themeClasses:a}=Xn(e),{t:b}=vi(),C=ee(()=>cv(Di(e.type).join(",")));return _t(()=>{var A;const w=!r.default||e.loading,k=e.boilerplate||!w?{}:{ariaLive:"polite",ariaLabel:b(e.loadingText),role:"alert"};return Z("div",lt({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},a.value,s.value,d.value],style:[c.value,w?f.value:{}]},k),[w?C.value:(A=r.default)==null?void 0:A.call(r)])}),{}}}),U3=ht()({name:"VSlideGroupItem",props:rc(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=ac(e,aP);return()=>{var c;return(c=r.default)==null?void 0:c.call(r,{isSelected:s.isSelected.value,select:s.select,toggle:s.toggle,selectedClass:s.selectedClass.value})}}});function G3(e){const n=Mt(e());let r=-1;function s(){clearInterval(r)}function c(){s(),Dn(()=>n.value=e())}function f(d){const a=d?getComputedStyle(d):{transitionDuration:.2},b=parseFloat(a.transitionDuration)*1e3||200;if(s(),n.value<=0)return;const C=performance.now();r=window.setInterval(()=>{const w=performance.now()-C+b;n.value=Math.max(e()-w,0),n.value<=0&&s()},b)}return fr(s),{clear:s,time:n,start:f,reset:c}}const qI=Ue({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Eo({location:"bottom"}),...Zd(),...yi(),...es(),...Un(),...hi(xm({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),db=ht()({name:"VSnackbar",props:qI(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),{positionClasses:c}=Kd(e),{scopeId:f}=oc(),{themeClasses:d}=Xn(e),{colorClasses:a,colorStyles:b,variantClasses:C}=nc(e),{roundedClasses:w}=Bi(e),k=G3(()=>Number(e.timeout)),A=tt(),I=tt(),R=Mt(!1),F=Mt(0),B=tt(),$=_n(Zf,void 0);ra(()=>!!$,()=>{const _e=Ik();Ri(()=>{B.value=_e.mainStyles.value})}),Bt(s,q),Bt(()=>e.timeout,q),zi(()=>{s.value&&q()});let O=-1;function q(){k.reset(),window.clearTimeout(O);const _e=Number(e.timeout);if(!s.value||_e===-1)return;const re=Jb(I.value);k.start(re),O=window.setTimeout(()=>{s.value=!1},_e)}function X(){k.reset(),window.clearTimeout(O)}function te(){R.value=!0,X()}function ae(){R.value=!1,q()}function ue(_e){F.value=_e.touches[0].clientY}function ce(_e){Math.abs(F.value-_e.changedTouches[0].clientY)>50&&(s.value=!1)}function fe(){R.value&&ae()}const pe=ee(()=>e.location.split(" ").reduce((_e,re)=>(_e[`v-snackbar--${re}`]=!0,_e),{}));return _t(()=>{const _e=Hs.filterProps(e),re=!!(r.default||r.text||e.text);return G(Hs,lt({ref:A,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},pe.value,c.value,e.class],style:[B.value,e.style]},_e,{modelValue:s.value,"onUpdate:modelValue":be=>s.value=be,contentProps:lt({class:["v-snackbar__wrapper",d.value,a.value,w.value,C.value],style:[b.value],onPointerenter:te,onPointerleave:ae},_e.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:ue,onTouchend:ce,onAfterLeave:fe},f),{default:()=>{var be,je;return[Ml(!1,"v-snackbar"),e.timer&&!R.value&&Z("div",{key:"timer",class:"v-snackbar__timer"},[G(Hg,{ref:I,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":k.time.value},null)]),re&&Z("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((be=r.text)==null?void 0:be.call(r))??e.text,(je=r.default)==null?void 0:je.call(r)]),r.actions&&G(Sn,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[Z("div",{class:"v-snackbar__actions"},[r.actions({isActive:s})])]})]},activator:r.activator})}),Pr({},A)}}),q3=Ue({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...hi(qI(),["modelValue"])},"VSnackbarQueue"),H3=ht()({name:"VSnackbarQueue",props:q3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi(),f=Mt(!1),d=Mt(!1),a=Mt();Bt(()=>e.modelValue.length,(A,I)=>{!d.value&&A>I&&C()}),Bt(f,A=>{A&&(d.value=!0)});function b(){e.modelValue.length?C():(a.value=void 0,d.value=!1)}function C(){const[A,...I]=e.modelValue;r("update:modelValue",I),a.value=typeof A=="string"?{text:A}:A,Dn(()=>{f.value=!0})}function w(){f.value=!1}const k=ee(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:c(e.closeText)}));_t(()=>{const A=!!(e.closable||s.actions),{modelValue:I,...R}=db.filterProps(e);return Z(qt,null,[d.value&&!!a.value&&(s.default?G(Sn,{defaults:{VSnackbar:a.value}},{default:()=>[s.default({item:a.value})]}):G(db,lt(R,a.value,{modelValue:f.value,"onUpdate:modelValue":F=>f.value=F,onAfterLeave:b}),{text:s.text?()=>{var F;return(F=s.text)==null?void 0:F.call(s,{item:a.value})}:void 0,actions:A?()=>Z(qt,null,[s.actions?G(Sn,{defaults:{VBtn:k.value}},{default:()=>[s.actions({item:a.value,props:{onClick:w}})]}):G(Mn,lt(k.value,{onClick:w}),null)]):void 0}))])})}}),HI=Ue({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),WI=Ue({autoLineWidth:Boolean,...HI()},"VBarline"),PS=ht()({name:"VBarline",props:WI(),setup(e,n){let{slots:r}=n;const s=ya(),c=ee(()=>e.id||`barline-${s}`),f=ee(()=>Number(e.autoDrawDuration)||500),d=ee(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),a=ee(()=>parseFloat(e.lineWidth)||4),b=ee(()=>Math.max(e.modelValue.length*a.value,Number(e.width))),C=ee(()=>({minX:0,maxX:b.value,minY:0,maxY:parseInt(e.height,10)})),w=ee(()=>e.modelValue.map(B=>Wi(B,e.itemValue,B)));function k(B,$){const{minX:O,maxX:q,minY:X,maxY:te}=$,ae=B.length;let ue=e.max!=null?Number(e.max):Math.max(...B),ce=e.min!=null?Number(e.min):Math.min(...B);ce>0&&e.min==null&&(ce=0),ue<0&&e.max==null&&(ue=0);const fe=q/ae,pe=(te-X)/(ue-ce||1),_e=te-Math.abs(ce*pe);return B.map((re,be)=>{const je=Math.abs(pe*re);return{x:O+be*fe,y:_e-je+ +(re<0)*je,height:je,value:re}})}const A=ee(()=>{const B=[],$=k(w.value,C.value),O=$.length;for(let q=0;B.length<O;q++){const X=$[q];let te=e.labels[q];te||(te=typeof X=="object"?X.value:X),B.push({x:X.x,value:String(te)})}return B}),I=ee(()=>k(w.value,C.value)),R=ee(()=>(Math.abs(I.value[0].x-I.value[1].x)-a.value)/2),F=ee(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));_t(()=>{const B=e.gradient.slice().length?e.gradient.slice().reverse():[""];return Z("svg",{display:"block"},[Z("defs",null,[Z("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[B.map(($,O)=>Z("stop",{offset:O/Math.max(B.length-1,1),"stop-color":$||"currentColor"},null))])]),Z("clipPath",{id:`${c.value}-clip`},[I.value.map($=>Z("rect",{x:$.x+R.value,y:$.y,width:a.value,height:$.height,rx:F.value,ry:F.value},[e.autoDraw&&Z(qt,null,[Z("animate",{attributeName:"y",from:$.y+$.height,to:$.y,dur:`${f.value}ms`,fill:"freeze"},null),Z("animate",{attributeName:"height",from:"0",to:$.height,dur:`${f.value}ms`,fill:"freeze"},null)])]))]),d.value&&Z("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[A.value.map(($,O)=>{var q;return Z("text",{x:$.x+R.value+a.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((q=r.label)==null?void 0:q.call(r,{index:O,value:$.value}))??$.value])})]),Z("g",{"clip-path":`url(#${c.value}-clip)`,fill:`url(#${c.value})`},[Z("rect",{x:0,y:0,width:Math.max(e.modelValue.length*a.value,Number(e.width)),height:e.height},null)])])})}});function W3(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const c=e.shift(),f=e[e.length-1];return(r?`M${c.x} ${s-c.x+2} L${c.x} ${c.y}`:`M${c.x} ${c.y}`)+e.map((d,a)=>{const b=e[a+1],C=e[a-1]||c,w=b&&Z3(b,d,C);if(!b||w)return`L${d.x} ${d.y}`;const k=Math.min(IS(C,d),IS(b,d)),I=k/2<n?k/2:n,R=AS(C,d,I),F=AS(b,d,I);return`L${R.x} ${R.y}S${d.x} ${d.y} ${F.x} ${F.y}`}).join("")+(r?`L${f.x} ${s-c.x+2} Z`:"")}function qp(e){return parseInt(e,10)}function Z3(e,n,r){return qp(e.x+r.x)===qp(2*n.x)&&qp(e.y+r.y)===qp(2*n.y)}function IS(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function AS(e,n,r){const s={x:e.x-n.x,y:e.y-n.y},c=Math.sqrt(s.x*s.x+s.y*s.y),f={x:s.x/c,y:s.y/c};return{x:n.x+f.x*r,y:n.y+f.y*r}}const ZI=Ue({fill:Boolean,...HI()},"VTrendline"),ES=ht()({name:"VTrendline",props:ZI(),setup(e,n){let{slots:r}=n;const s=ya(),c=ee(()=>e.id||`trendline-${s}`),f=ee(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),d=tt(0),a=tt(null);function b(B,$){const{minX:O,maxX:q,minY:X,maxY:te}=$,ae=B.length,ue=e.max!=null?Number(e.max):Math.max(...B),ce=e.min!=null?Number(e.min):Math.min(...B),fe=(q-O)/(ae-1),pe=(te-X)/(ue-ce||1);return B.map((_e,re)=>({x:O+re*fe,y:te-(_e-ce)*pe,value:_e}))}const C=ee(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),w=ee(()=>parseFloat(e.lineWidth)||4),k=ee(()=>Number(e.width)),A=ee(()=>{const B=Number(e.padding);return{minX:B,maxX:k.value-B,minY:B,maxY:parseInt(e.height,10)-B}}),I=ee(()=>e.modelValue.map(B=>Wi(B,e.itemValue,B))),R=ee(()=>{const B=[],$=b(I.value,A.value),O=$.length;for(let q=0;B.length<O;q++){const X=$[q];let te=e.labels[q];te||(te=typeof X=="object"?X.value:X),B.push({x:X.x,value:String(te)})}return B});Bt(()=>e.modelValue,async()=>{if(await Dn(),!e.autoDraw||!a.value)return;const B=a.value,$=B.getTotalLength();e.fill?(B.style.transformOrigin="bottom center",B.style.transition="none",B.style.transform="scaleY(0)",B.getBoundingClientRect(),B.style.transition=`transform ${f.value}ms ${e.autoDrawEasing}`,B.style.transform="scaleY(1)"):(B.style.strokeDasharray=`${$}`,B.style.strokeDashoffset=`${$}`,B.getBoundingClientRect(),B.style.transition=`stroke-dashoffset ${f.value}ms ${e.autoDrawEasing}`,B.style.strokeDashoffset="0"),d.value=$},{immediate:!0});function F(B){const $=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return W3(b(I.value,A.value),$,B,parseInt(e.height,10))}_t(()=>{var $;const B=e.gradient.slice().length?e.gradient.slice().reverse():[""];return Z("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[Z("defs",null,[Z("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[B.map((O,q)=>Z("stop",{offset:q/Math.max(B.length-1,1),"stop-color":O||"currentColor"},null))])]),C.value&&Z("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[R.value.map((O,q)=>{var X;return Z("text",{x:O.x+w.value/2+w.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((X=r.label)==null?void 0:X.call(r,{index:q,value:O.value}))??O.value])})]),Z("path",{ref:a,d:F(e.fill),fill:e.fill?`url(#${c.value})`:"none",stroke:e.fill?"none":`url(#${c.value})`},null),e.fill&&Z("path",{d:F(!1),fill:"none",stroke:e.color??(($=e.gradient)==null?void 0:$[0])},null)])})}}),K3=Ue({type:{type:String,default:"trend"},...WI(),...ZI()},"VSparkline"),Y3=ht()({name:"VSparkline",props:K3(),setup(e,n){let{slots:r}=n;const{textColorClasses:s,textColorStyles:c}=Br(()=>e.color),f=ee(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),d=ee(()=>{let a=parseInt(e.height,10);return f.value&&(a+=parseInt(e.labelSize,10)*1.5),a});_t(()=>{const a=e.type==="trend"?ES:PS,b=e.type==="trend"?ES.filterProps(e):PS.filterProps(e);return G(a,lt({key:e.type,class:s.value,style:c.value,viewBox:`0 0 ${e.width} ${parseInt(d.value,10)}`},b),r)})}}),X3=Ue({...Ht(),...DP({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),J3=ht()({name:"VSpeedDial",props:X3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),c=tt(),f=ee(()=>{var C;const[a,b="center"]=((C=e.location)==null?void 0:C.split(" "))??[];return`${a} ${b}`}),d=ee(()=>({[`v-speed-dial__content--${f.value.replace(" ","-")}`]:!0}));return _t(()=>{const a=Fd.filterProps(e);return G(Fd,lt(a,{modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,class:e.class,style:e.style,contentClass:["v-speed-dial__content",d.value,e.contentClass],location:f.value,ref:c,transition:"fade-transition"}),{...r,default:b=>G(Sn,{defaults:{VBtn:{size:"small"}}},{default:()=>[G(ia,{appear:!0,group:!0,transition:e.transition},{default:()=>{var C;return[(C=r.default)==null?void 0:C.call(r,b)]}})]})})}),{}}}),H0=Symbol.for("vuetify:v-stepper"),KI=Ue({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),YI=ht()({name:"VStepperActions",props:KI(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi();function f(){r("click:prev")}function d(){r("click:next")}return _t(()=>{const a={onClick:f},b={onClick:d};return Z("div",{class:"v-stepper-actions"},[G(Sn,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:c(e.prevText),variant:"text"}}},{default:()=>{var C;return[((C=s.prev)==null?void 0:C.call(s,{props:a}))??G(Mn,a,null)]}}),G(Sn,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:c(e.nextText),variant:"tonal"}}},{default:()=>{var C;return[((C=s.next)==null?void 0:C.call(s,{props:b}))??G(Mn,b,null)]}})])}),{}}}),XI=Ao("v-stepper-header"),Q3=Ue({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:tn,default:"$complete"},editable:Boolean,editIcon:{type:tn,default:"$edit"},error:Boolean,errorIcon:{type:tn,default:"$error"},icon:tn,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),e5=Ue({...Q3(),...rc()},"VStepperItem"),JI=ht()({name:"VStepperItem",directives:{vRipple:aa},props:e5(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=ac(e,H0,!0),c=ee(()=>(s==null?void 0:s.value.value)??e.value),f=ee(()=>e.rules.every(A=>A()===!0)),d=ee(()=>!e.disabled&&e.editable),a=ee(()=>!e.disabled&&e.editable),b=ee(()=>e.error||!f.value),C=ee(()=>e.complete||e.rules.length>0&&f.value),w=ee(()=>b.value?e.errorIcon:C.value?e.completeIcon:s.isSelected.value&&e.editable?e.editIcon:e.icon),k=ee(()=>({canEdit:a.value,hasError:b.value,hasCompleted:C.value,title:e.title,subtitle:e.subtitle,step:c.value,value:e.value}));return _t(()=>{var B,$,O;const A=(!s||s.isSelected.value||C.value||a.value)&&!b.value&&!e.disabled,I=!!(e.title!=null||r.title),R=!!(e.subtitle!=null||r.subtitle);function F(){s==null||s.toggle()}return ei(Z("button",{class:gt(["v-stepper-item",{"v-stepper-item--complete":C.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":b.value},s==null?void 0:s.selectedClass.value]),disabled:!e.editable,type:"button",onClick:F},[d.value&&Ml(!0,"v-stepper-item"),G(Ja,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:A?e.color:void 0,size:24},{default:()=>{var q;return[((q=r.icon)==null?void 0:q.call(r,k.value))??(w.value?G(Yn,{icon:w.value},null):c.value)]}}),Z("div",{class:"v-stepper-item__content"},[I&&Z("div",{key:"title",class:"v-stepper-item__title"},[((B=r.title)==null?void 0:B.call(r,k.value))??e.title]),R&&Z("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[(($=r.subtitle)==null?void 0:$.call(r,k.value))??e.subtitle]),(O=r.default)==null?void 0:O.call(r,k.value)])]),[[aa,e.ripple&&e.editable,null]])}),{}}}),t5=Ue({...hi(Jg(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),QI=ht()({name:"VStepperWindow",props:t5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=_n(H0,null),c=Qt(e,"modelValue"),f=ee({get(){var d;return c.value!=null||!s?c.value:(d=s.items.value.find(a=>s.selected.value.includes(a.id)))==null?void 0:d.value},set(d){c.value=d}});return _t(()=>{const d=qu.filterProps(e);return G(qu,lt({_as:"VStepperWindow"},d,{modelValue:f.value,"onUpdate:modelValue":a=>f.value=a,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),r)}),{}}}),n5=Ue({...Qg()},"VStepperWindowItem"),e2=ht()({name:"VStepperWindowItem",props:n5(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=Hu.filterProps(e);return G(Hu,lt({_as:"VStepperWindowItem"},s,{class:["v-stepper-window-item",e.class],style:e.style}),r)}),{}}}),i5=Ue({altLabels:Boolean,bgColor:String,completeIcon:tn,editIcon:tn,editable:Boolean,errorIcon:tn,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Ju()},"Stepper"),r5=Ue({...i5(),...ic({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...M0(),...Io(KI(),["prevText","nextText"])},"VStepper"),a5=ht()({name:"VStepper",props:r5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{items:s,next:c,prev:f,selected:d}=Dl(e,H0),{displayClasses:a,mobile:b}=Qa(e),{completeIcon:C,editIcon:w,errorIcon:k,color:A,editable:I,prevText:R,nextText:F}=qd(e),B=ee(()=>e.items.map((q,X)=>{const te=Wi(q,e.itemTitle,q),ae=Wi(q,e.itemValue,X+1);return{title:te,value:ae,raw:q}})),$=ee(()=>s.value.findIndex(q=>d.value.includes(q.id))),O=ee(()=>e.disabled?e.disabled:$.value===0?"prev":$.value===s.value.length-1?"next":!1);return Li({VStepperItem:{editable:I,errorIcon:k,completeIcon:C,editIcon:w,prevText:R,nextText:F},VStepperActions:{color:A,disabled:O,prevText:R,nextText:F}}),_t(()=>{const q=nm.filterProps(e),X=!!(r.header||e.items.length),te=e.items.length>0,ae=!e.hideActions&&!!(te||r.actions);return G(nm,lt(q,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":b.value},a.value,e.class],style:e.style}),{default:()=>{var ue,ce;return[X&&G(XI,{key:"stepper-header"},{default:()=>[B.value.map((fe,pe)=>{let{raw:_e,...re}=fe;return Z(qt,null,[!!pe&&G($a,null,null),G(JI,re,{default:r[`header-item.${re.value}`]??r.header,icon:r.icon,title:r.title,subtitle:r.subtitle})])})]}),te&&G(QI,{key:"stepper-window"},{default:()=>[B.value.map(fe=>G(e2,{value:fe.value},{default:()=>{var pe,_e;return((pe=r[`item.${fe.value}`])==null?void 0:pe.call(r,fe))??((_e=r.item)==null?void 0:_e.call(r,fe))}}))]}),(ue=r.default)==null?void 0:ue.call(r,{prev:f,next:c}),ae&&(((ce=r.actions)==null?void 0:ce.call(r,{next:c,prev:f}))??G(YI,{key:"stepper-actions","onClick:prev":f,"onClick:next":c},r))]}})}),{prev:f,next:c}}}),s5=Ue({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Do(),...Kg()},"VSwitch"),o5=ht()({name:"VSwitch",inheritAttrs:!1,props:s5(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=Qt(e,"indeterminate"),f=Qt(e,"modelValue"),{loaderClasses:d}=pm(e),{isFocused:a,focus:b,blur:C}=Mo(e),w=tt(),k=tt(),A=Kn&&window.matchMedia("(forced-colors: active)").matches,I=Ee(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),R=ya(),F=Ee(()=>e.id||`switch-${R}`);function B(){c.value&&(c.value=!1)}function $(O){var q,X;O.stopPropagation(),O.preventDefault(),(X=(q=w.value)==null?void 0:q.input)==null||X.click()}return _t(()=>{const[O,q]=El(r),X=Wr.filterProps(e),te=Pl.filterProps(e);return G(Wr,lt({ref:k,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":c.value},d.value,e.class]},O,X,{modelValue:f.value,"onUpdate:modelValue":ae=>f.value=ae,id:F.value,focused:a.value,style:e.style}),{...s,default:ae=>{let{id:ue,messagesId:ce,isDisabled:fe,isReadonly:pe,isValid:_e}=ae;const re={model:f,isValid:_e};return G(Pl,lt({ref:w},te,{modelValue:f.value,"onUpdate:modelValue":[be=>f.value=be,B],id:ue.value,"aria-describedby":ce.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:fe.value,readonly:pe.value,onFocus:b,onBlur:C},q),{...s,default:be=>{let{backgroundColorClasses:je,backgroundColorStyles:Be}=be;return Z("div",{class:gt(["v-switch__track",A?void 0:je.value]),style:zt(Be.value),onClick:$},[s["track-true"]&&Z("div",{key:"prepend",class:"v-switch__track-true"},[s["track-true"](re)]),s["track-false"]&&Z("div",{key:"append",class:"v-switch__track-false"},[s["track-false"](re)])])},input:be=>{let{inputNode:je,icon:Be,backgroundColorClasses:Fe,backgroundColorStyles:Ke}=be;return Z(qt,null,[je,Z("div",{class:gt(["v-switch__thumb",{"v-switch__thumb--filled":Be||e.loading},e.inset||A?void 0:Fe.value]),style:zt(e.inset?void 0:Ke.value)},[s.thumb?G(Sn,{defaults:{VIcon:{icon:Be,size:"x-small"}}},{default:()=>[s.thumb({...re,icon:Be})]}):G(f0,null,{default:()=>[e.loading?G(gm,{name:"v-switch",active:!0,color:_e.value===!1?void 0:I.value},{default:ft=>s.loader?s.loader(ft):G(Gu,{active:ft.isActive,color:ft.color,indeterminate:!0,size:"16",width:"2"},null)}):Be&&G(Yn,{key:String(Be),icon:Be,size:"x-small"},null)]})])])}})}})}),Pr({},k)}}),l5=Ue({color:String,height:[Number,String],window:Boolean,...Ht(),...ir(),...Qu(),...yi(),...bn(),...Un()},"VSystemBar"),u5=ht()({name:"VSystemBar",props:l5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{elevationClasses:d}=kr(e),{roundedClasses:a}=Bi(e),{ssrBootStyles:b}=tc(),C=ee(()=>e.height??(e.window?32:24)),{layoutItemStyles:w}=ec({id:e.name,order:ee(()=>parseInt(e.order,10)),position:Mt("top"),layoutSize:C,elementSize:C,active:ee(()=>!0),absolute:Ee(()=>e.absolute)});return _t(()=>G(e.tag,{class:gt(["v-system-bar",{"v-system-bar--window":e.window},s.value,c.value,d.value,a.value,e.class]),style:zt([f.value,w.value,b.value,e.style])},r)),{}}}),W0=Symbol.for("vuetify:v-tabs"),c5=Ue({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...hi(Zg({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),t2=ht()({name:"VTab",props:c5(),setup(e,n){let{slots:r,attrs:s}=n;const{textColorClasses:c,textColorStyles:f}=Br(()=>e.sliderColor),d=tt(),a=tt(),b=ee(()=>e.direction==="horizontal"),C=ee(()=>{var k,A;return((A=(k=d.value)==null?void 0:k.group)==null?void 0:A.isSelected.value)??!1});function w(k){var I,R;let{value:A}=k;if(A){const F=(R=(I=d.value)==null?void 0:I.$el.parentElement)==null?void 0:R.querySelector(".v-tab--selected .v-tab__slider"),B=a.value;if(!F||!B)return;const $=getComputedStyle(F).color,O=F.getBoundingClientRect(),q=B.getBoundingClientRect(),X=b.value?"x":"y",te=b.value?"X":"Y",ae=b.value?"right":"bottom",ue=b.value?"width":"height",ce=O[X],fe=q[X],pe=ce>fe?O[ae]-q[ae]:O[X]-q[X],_e=Math.sign(pe)>0?b.value?"right":"bottom":Math.sign(pe)<0?b.value?"left":"top":"center",be=(Math.abs(pe)+(Math.sign(pe)<0?O[ue]:q[ue]))/Math.max(O[ue],q[ue])||0,je=O[ue]/q[ue]||0,Be=1.5;Bu(B,{backgroundColor:[$,"currentcolor"],transform:[`translate${te}(${pe}px) scale${te}(${je})`,`translate${te}(${pe/Be}px) scale${te}(${(be-1)/Be+1})`,"none"],transformOrigin:Array(3).fill(_e)},{duration:225,easing:Hf})}}return _t(()=>{const k=Mn.filterProps(e);return G(Mn,lt({symbol:W0,ref:d,class:["v-tab",e.class],style:e.style,tabindex:C.value?0:-1,role:"tab","aria-selected":String(C.value),active:!1},k,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":w}),{...r,default:()=>{var A;return Z(qt,null,[((A=r.default)==null?void 0:A.call(r))??e.text,!e.hideSlider&&Z("div",{ref:a,class:gt(["v-tab__slider",c.value]),style:zt(f.value)},null)])}})}),Pr({},d)}}),d5=Ue({...hi(Jg(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),n2=ht()({name:"VTabsWindow",props:d5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=_n(W0,null),c=Qt(e,"modelValue"),f=ee({get(){var d;return c.value!=null||!s?c.value:(d=s.items.value.find(a=>s.selected.value.includes(a.id)))==null?void 0:d.value},set(d){c.value=d}});return _t(()=>{const d=qu.filterProps(e);return G(qu,lt({_as:"VTabsWindow"},d,{modelValue:f.value,"onUpdate:modelValue":a=>f.value=a,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),r)}),{}}}),h5=Ue({...Qg()},"VTabsWindowItem"),i2=ht()({name:"VTabsWindowItem",props:h5(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=Hu.filterProps(e);return G(Hu,lt({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),r)}),{}}});function f5(e){return e?e.map(n=>Gf(n)?n:{text:n,value:n}):[]}const m5=Ue({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,..._0({mandatory:"force",selectedClass:"v-tab-item--selected"}),...mr(),...bn()},"VTabs"),p5=ht()({name:"VTabs",props:m5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=Qt(e,"modelValue"),f=ee(()=>f5(e.items)),{densityClasses:d}=sa(e),{backgroundColorClasses:a,backgroundColorStyles:b}=ti(()=>e.bgColor),{scopeId:C}=oc();return Li({VTab:{color:Ee(()=>e.color),direction:Ee(()=>e.direction),stacked:Ee(()=>e.stacked),fixed:Ee(()=>e.fixedTabs),sliderColor:Ee(()=>e.sliderColor),hideSlider:Ee(()=>e.hideSlider)}}),_t(()=>{const w=Qf.filterProps(e),k=!!(s.window||e.items.length>0);return Z(qt,null,[G(Qf,lt(w,{modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,a.value,e.class],style:[{"--v-tabs-height":Nt(e.height)},b.value,e.style],role:"tablist",symbol:W0},C,r),{default:()=>{var A;return[((A=s.default)==null?void 0:A.call(s))??f.value.map(I=>{var R;return((R=s.tab)==null?void 0:R.call(s,{item:I}))??G(t2,lt(I,{key:I.text,value:I.value}),{default:s[`tab.${I.value}`]?()=>{var F;return(F=s[`tab.${I.value}`])==null?void 0:F.call(s,{item:I})}:void 0})})]}}),k&&G(n2,lt({modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,key:"tabs-window"},C),{default:()=>{var A;return[f.value.map(I=>{var R;return((R=s.item)==null?void 0:R.call(s,{item:I}))??G(i2,{value:I.value},{default:()=>{var F;return(F=s[`item.${I.value}`])==null?void 0:F.call(s,{item:I})}})}),(A=s.window)==null?void 0:A.call(s)]}})])}),{}}}),g5=Ue({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Do(),...wm()},"VTextarea"),v5=ht()({name:"VTextarea",directives:{vIntersect:Co},inheritAttrs:!1,props:g5(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const f=Qt(e,"modelValue"),{isFocused:d,focus:a,blur:b}=Mo(e),{onIntersect:C}=RP(e),w=ee(()=>typeof e.counterValue=="function"?e.counterValue(f.value):(f.value||"").toString().length),k=ee(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),A=tt(),I=tt(),R=Mt(""),F=tt(),B=ee(()=>e.persistentPlaceholder||d.value||e.active);function $(){var _e;F.value!==document.activeElement&&((_e=F.value)==null||_e.focus()),d.value||a()}function O(_e){$(),s("click:control",_e)}function q(_e){s("mousedown:control",_e)}function X(_e){_e.stopPropagation(),$(),Dn(()=>{f.value="",$g(e["onClick:clear"],_e)})}function te(_e){var be;const re=_e.target;if(f.value=re.value,(be=e.modelModifiers)!=null&&be.trim){const je=[re.selectionStart,re.selectionEnd];Dn(()=>{re.selectionStart=je[0],re.selectionEnd=je[1]})}}const ae=tt(),ue=tt(Number(e.rows)),ce=ee(()=>["plain","underlined"].includes(e.variant));Ri(()=>{e.autoGrow||(ue.value=Number(e.rows))});function fe(){e.autoGrow&&Dn(()=>{if(!ae.value||!I.value)return;const _e=getComputedStyle(ae.value),re=getComputedStyle(I.value.$el),be=parseFloat(_e.getPropertyValue("--v-field-padding-top"))+parseFloat(_e.getPropertyValue("--v-input-padding-top"))+parseFloat(_e.getPropertyValue("--v-field-padding-bottom")),je=ae.value.scrollHeight,Be=parseFloat(_e.lineHeight),Fe=Math.max(parseFloat(e.rows)*Be+be,parseFloat(re.getPropertyValue("--v-input-control-height"))),Ke=parseFloat(e.maxRows)*Be+be||1/0,ft=di(je??0,Fe,Ke);ue.value=Math.floor((ft-be)/Be),R.value=Nt(ft)})}zi(fe),Bt(f,fe),Bt(()=>e.rows,fe),Bt(()=>e.maxRows,fe),Bt(()=>e.density,fe),Bt(ue,_e=>{s("update:rows",_e)});let pe;return Bt(ae,_e=>{_e?(pe=new ResizeObserver(fe),pe.observe(ae.value)):pe==null||pe.disconnect()}),Vr(()=>{pe==null||pe.disconnect()}),_t(()=>{const _e=!!(c.counter||e.counter||e.counterValue),re=!!(_e||c.details),[be,je]=El(r),{modelValue:Be,...Fe}=Wr.filterProps(e),Ke=Il.filterProps(e);return G(Wr,lt({ref:A,modelValue:f.value,"onUpdate:modelValue":ft=>f.value=ft,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":ce.value},e.class],style:e.style},be,Fe,{centerAffix:ue.value===1&&!ce.value,focused:d.value}),{...c,default:ft=>{let{id:mt,isDisabled:ze,isDirty:Se,isReadonly:Me,isValid:Qe}=ft;return G(Il,lt({ref:I,style:{"--v-textarea-control-height":R.value},onClick:O,onMousedown:q,"onClick:clear":X,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ke,{id:mt.value,active:B.value||Se.value,centerAffix:ue.value===1&&!ce.value,dirty:Se.value||e.dirty,disabled:ze.value,focused:d.value,error:Qe.value===!1}),{...c,default:Ft=>{let{props:{class:Tt,...xt}}=Ft;return Z(qt,null,[e.prefix&&Z("span",{class:"v-text-field__prefix"},[e.prefix]),ei(Z("textarea",lt({ref:F,class:Tt,value:f.value,onInput:te,autofocus:e.autofocus,readonly:Me.value,disabled:ze.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:$,onBlur:b},xt,je),null),[[Co,{handler:C},null,{once:!0}]]),e.autoGrow&&ei(Z("textarea",{class:gt([Tt,"v-textarea__sizer"]),id:`${xt.id}-sizer`,"onUpdate:modelValue":Re=>f.value=Re,ref:ae,readonly:!0,"aria-hidden":"true"},null),[[Cl,f.value]]),e.suffix&&Z("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:re?ft=>{var mt;return Z(qt,null,[(mt=c.details)==null?void 0:mt.call(c,ft),_e&&Z(qt,null,[Z("span",null,null),G(Yg,{active:e.persistentCounter||d.value,value:w.value,max:k.value,disabled:e.disabled},c.counter)])])}:void 0})}),Pr({},A,I,F)}}),y5=Ue({withBackground:Boolean,...Ht(),...Un(),...bn()},"VThemeProvider"),_5=ht()({name:"VThemeProvider",props:y5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e);return()=>{var c;return e.withBackground?G(e.tag,{class:gt(["v-theme-provider",s.value,e.class]),style:zt(e.style)},{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r)]}}):(c=r.default)==null?void 0:c.call(r)}}}),b5=Ue({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:tn,iconColor:String,lineColor:String,...Ht(),...yi(),...Ks(),...ir()},"VTimelineDivider"),x5=ht()({name:"VTimelineDivider",props:b5(),setup(e,n){let{slots:r}=n;const{sizeClasses:s,sizeStyles:c}=Wd(e,"v-timeline-divider__dot"),{backgroundColorStyles:f,backgroundColorClasses:d}=ti(()=>e.dotColor),{roundedClasses:a}=Bi(e,"v-timeline-divider__dot"),{elevationClasses:b}=kr(e),{backgroundColorClasses:C,backgroundColorStyles:w}=ti(()=>e.lineColor);return _t(()=>Z("div",{class:gt(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:zt(e.style)},[Z("div",{class:gt(["v-timeline-divider__before",C.value]),style:zt(w.value)},null),!e.hideDot&&Z("div",{key:"dot",class:gt(["v-timeline-divider__dot",b.value,a.value,s.value]),style:zt(c.value)},[Z("div",{class:gt(["v-timeline-divider__inner-dot",d.value,a.value]),style:zt(f.value)},[r.default?G(Sn,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},r.default):G(Yn,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),Z("div",{class:gt(["v-timeline-divider__after",C.value]),style:zt(w.value)},null)])),{}}}),r2=Ue({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:tn,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Ht(),...Zi(),...ir(),...yi(),...Ks(),...bn()},"VTimelineItem"),w5=ht()({name:"VTimelineItem",props:r2(),setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),c=Mt(0),f=tt();return Bt(f,d=>{var a;d&&(c.value=((a=d.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:a.getBoundingClientRect().width)??0)},{flush:"post"}),_t(()=>{var d,a;return Z("div",{class:gt(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:zt([{"--v-timeline-dot-size":Nt(c.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Nt(e.lineInset)})`:Nt(0)},e.style])},[Z("div",{class:"v-timeline-item__body",style:zt(s.value)},[(d=r.default)==null?void 0:d.call(r)]),G(x5,{ref:f,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:r.icon}),e.density!=="compact"&&Z("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((a=r.opposite)==null?void 0:a.call(r))])])}),{}}}),S5=Ue({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Io(r2({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Ht(),...mr(),...bn(),...Un()},"VTimeline"),C5=ht()({name:"VTimeline",props:S5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Xn(e),{densityClasses:c}=sa(e),{rtlClasses:f}=nr();Li({VTimelineDivider:{lineColor:Ee(()=>e.lineColor)},VTimelineItem:{density:Ee(()=>e.density),dotColor:Ee(()=>e.dotColor),fillDot:Ee(()=>e.fillDot),hideOpposite:Ee(()=>e.hideOpposite),iconColor:Ee(()=>e.iconColor),lineColor:Ee(()=>e.lineColor),lineInset:Ee(()=>e.lineInset),size:Ee(()=>e.size)}});const d=ee(()=>{const b=e.side?e.side:e.density!=="default"?"end":null;return b&&`v-timeline--side-${b}`}),a=ee(()=>{const b=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return b;case"start":return b[0];case"end":return b[1];default:return null}});return _t(()=>G(e.tag,{class:gt(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,a.value,{"v-timeline--inset-line":!!e.lineInset},s.value,c.value,d.value,f.value,e.class]),style:zt([{"--v-timeline-line-thickness":Nt(e.lineThickness)},e.style])},r)),{}}});function Vu(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(n,"0")}const T5=Ue({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),hb=ht()({name:"VTimePickerClock",props:T5(),emits:{change:e=>!0,input:e=>!0},setup(e,n){let{emit:r}=n;const s=tt(null),c=tt(null),f=tt(void 0),d=tt(!1),a=tt(null),b=tt(null),C=YT(mt=>r("change",mt),750),{textColorClasses:w,textColorStyles:k}=Br(()=>e.color),{backgroundColorClasses:A,backgroundColorStyles:I}=ti(()=>e.color),R=ee(()=>e.max-e.min+1),F=ee(()=>e.double?R.value/2:R.value),B=ee(()=>360/F.value),$=ee(()=>B.value*Math.PI/180),O=ee(()=>e.modelValue==null?e.min:e.modelValue),q=ee(()=>.62),X=ee(()=>{const mt=[];for(let ze=e.min;ze<=e.max;ze=ze+e.step)mt.push(ze);return mt});Bt(()=>e.modelValue,mt=>{f.value=mt});function te(mt){f.value!==mt&&(f.value=mt),r("input",mt)}function ae(mt){return!e.allowedValues||e.allowedValues(mt)}function ue(mt){if(!e.scrollable||e.disabled)return;mt.preventDefault();const ze=Math.sign(-mt.deltaY||1);let Se=O.value;do Se=Se+ze,Se=(Se-e.min+R.value)%R.value+e.min;while(!ae(Se)&&Se!==O.value);Se!==e.displayedValue&&te(Se),C(Se)}function ce(mt){return e.double&&mt-e.min>=F.value}function fe(mt){return ce(mt)?q.value:1}function pe(mt){const ze=e.rotate*Math.PI/180;return{x:Math.sin((mt-e.min)*$.value+ze)*fe(mt),y:-Math.cos((mt-e.min)*$.value+ze)*fe(mt)}}function _e(mt,ze){const Se=(Math.round(mt/B.value)+(ze?F.value:0))%R.value+e.min;return mt<360-B.value/2?Se:ze?e.max-F.value+1:e.min}function re(mt){const{x:ze,y:Se}=pe(mt);return{left:`${Math.round(50+ze*50)}%`,top:`${Math.round(50+Se*50)}%`}}function be(mt,ze){const Se=ze.x-mt.x,Me=ze.y-mt.y;return Math.sqrt(Se*Se+Me*Me)}function je(mt,ze){const Se=2*Math.atan2(ze.y-mt.y-be(mt,ze),ze.x-mt.x);return Math.abs(Se*180/Math.PI)}function Be(mt){a.value===null&&(a.value=mt),b.value=mt,te(mt)}function Fe(mt){var ie,le;if(mt.preventDefault(),!d.value&&mt.type!=="click"||!s.value)return;const{width:ze,top:Se,left:Me}=(ie=s.value)==null?void 0:ie.getBoundingClientRect(),{width:Qe}=((le=c.value)==null?void 0:le.getBoundingClientRect())??{width:0},{clientX:Ft,clientY:Tt}="touches"in mt?mt.touches[0]:mt,xt={x:ze/2,y:-ze/2},Re={x:Ft-Me,y:Se-Tt},vt=Math.round(je(xt,Re)-e.rotate+360)%360,st=e.double&&be(xt,Re)<(Qe+Qe*q.value)/4,Ye=Math.ceil(15/B.value);let St;for(let Le=0;Le<Ye;Le++)if(St=_e(vt+Le*B.value,st),ae(St)||(St=_e(vt-Le*B.value,st),ae(St)))return Be(St)}function Ke(mt){e.disabled||(mt.preventDefault(),window.addEventListener("mousemove",Fe),window.addEventListener("touchmove",Fe),window.addEventListener("mouseup",ft),window.addEventListener("touchend",ft),a.value=null,b.value=null,d.value=!0,Fe(mt))}function ft(mt){mt.stopPropagation(),window.removeEventListener("mousemove",Fe),window.removeEventListener("touchmove",Fe),window.removeEventListener("mouseup",ft),window.removeEventListener("touchend",ft),d.value=!1,b.value!==null&&ae(b.value)&&r("change",b.value)}_t(()=>Z("div",{class:gt([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Ke,onTouchstart:Ke,onWheel:ue,ref:s},[Z("div",{class:"v-time-picker-clock__inner",ref:c},[Z("div",{class:gt([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":ce(e.modelValue)},w.value]),style:zt([{transform:`rotate(${e.rotate+B.value*(O.value-e.min)}deg) scaleY(${fe(O.value)})`},k.value])},null),X.value.map(mt=>{const ze=mt===O.value;return Z("div",{class:gt([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":ze,"v-time-picker-clock__item--disabled":e.disabled||!ae(mt)},ze&&A.value]),style:zt([re(mt),ze&&I.value])},[Z("span",null,[e.format(mt)])])})])]))}}),k5=Ue({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),fb=ht()({name:"VTimePickerControls",props:k5(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi();return _t(()=>{let f=e.hour;return e.ampm&&(f=f?(f-1)%12+1:12),Z("div",{class:"v-time-picker-controls"},[Z("div",{class:gt({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[G(Mn,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:gt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":Vu(`${f}`),onClick:()=>r("update:viewMode","hour")},null),Z("span",{class:gt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[wn(":")]),G(Mn,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:gt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":Vu(e.minute),onClick:()=>r("update:viewMode","minute")},null),e.useSeconds&&Z("span",{class:gt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[wn(":")]),e.useSeconds&&G(Mn,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>r("update:viewMode","second"),class:gt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":Vu(e.second)},null),e.ampm&&Z("div",{class:"v-time-picker-controls__ampm"},[G(Mn,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:gt({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:c("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?r("update:period","am"):null},null),G(Mn,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:gt({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:c("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?r("update:period","pm"):null},null)])])])}),{}}}),P5=Oa(24),a2=Oa(12),I5=a2.map(e=>e+12);Oa(60);const A5=Ue({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...hi(ev({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),E5=ht()({name:"VTimePicker",props:A5(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi(),f=tt(null),d=tt(null),a=tt(null),b=tt(null),C=tt(null),w=tt(null),k=tt("am"),A=Qt(e,"viewMode","hour"),I=tt(null),R=tt(null),F=ee(()=>{let re;if(e.allowedHours instanceof Array?re=Be=>e.allowedHours.includes(Be):re=e.allowedHours,!e.min&&!e.max)return re;const be=e.min?Number(e.min.split(":")[0]):0,je=e.max?Number(e.max.split(":")[0]):23;return Be=>Be>=Number(be)&&Be<=Number(je)&&(!re||re(Be))}),B=ee(()=>{let re;const be=!F.value||f.value===null||F.value(f.value);if(e.allowedMinutes instanceof Array?re=ze=>e.allowedMinutes.includes(ze):re=e.allowedMinutes,!e.min&&!e.max)return be?re:()=>!1;const[je,Be]=e.min?e.min.split(":").map(Number):[0,0],[Fe,Ke]=e.max?e.max.split(":").map(Number):[23,59],ft=je*60+Number(Be),mt=Fe*60+Number(Ke);return ze=>{const Se=60*f.value+ze;return Se>=ft&&Se<=mt&&be&&(!re||re(ze))}}),$=ee(()=>{let re;const je=(!F.value||f.value===null||F.value(f.value))&&(!B.value||d.value===null||B.value(d.value));if(e.allowedSeconds instanceof Array?re=Qe=>e.allowedSeconds.includes(Qe):re=e.allowedSeconds,!e.min&&!e.max)return je?re:()=>!1;const[Be,Fe,Ke]=e.min?e.min.split(":").map(Number):[0,0,0],[ft,mt,ze]=e.max?e.max.split(":").map(Number):[23,59,59],Se=Be*3600+Fe*60+Number(Ke||0),Me=ft*3600+mt*60+Number(ze||0);return Qe=>{const Ft=3600*f.value+60*d.value+Qe;return Ft>=Se&&Ft<=Me&&je&&(!re||re(Qe))}}),O=ee(()=>e.format==="ampm");Bt(()=>e.modelValue,re=>ue(re)),zi(()=>{ue(e.modelValue)});function q(){return f.value!=null&&d.value!=null&&(!e.useSeconds||a.value!=null)?`${Vu(f.value)}:${Vu(d.value)}`+(e.useSeconds?`:${Vu(a.value)}`:""):null}function X(){const re=q();re!==null&&r("update:modelValue",re)}function te(re){return re?(re-1)%12+1:12}function ae(re,be){return re%12+(be==="pm"?12:0)}function ue(re){if(re==null||re==="")f.value=null,d.value=null,a.value=null;else if(re instanceof Date)f.value=re.getHours(),d.value=re.getMinutes(),a.value=re.getSeconds();else{const[be,,je,,Be,Fe]=re.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);f.value=Fe?ae(parseInt(be,10),Fe):parseInt(be,10),d.value=parseInt(je,10),a.value=parseInt(Be||0,10)}k.value=f.value==null||f.value<12?"am":"pm"}function ce(re,be){const je=F.value;if(!je)return be;const Be=O.value?be<12?a2:I5:P5;return((Be.find(Ke=>je((Ke+be)%Be.length+Be[0]))||0)+be)%Be.length+Be[0]}function fe(re){if(k.value=re,f.value!=null){const be=f.value+(k.value==="am"?-12:12);f.value=ce("hour",be)}return r("update:period",re),X(),!0}function pe(re){A.value==="hour"?f.value=O.value?ae(re,k.value):re:A.value==="minute"?d.value=re:a.value=re}function _e(re){switch(A.value||"hour"){case"hour":r("update:hour",re);break;case"minute":r("update:minute",re);break;case"second":r("update:second",re);break}const be=f.value!==null&&d.value!==null&&(e.useSeconds?a.value!==null:!0);A.value==="hour"?A.value="minute":e.useSeconds&&A.value==="minute"&&(A.value="second"),!(f.value===b.value&&d.value===C.value&&(!e.useSeconds||a.value===w.value)||q()===null)&&(b.value=f.value,C.value=d.value,e.useSeconds&&(w.value=a.value),be&&X())}_t(()=>{const re=$d.filterProps(e),be=fb.filterProps(e),je=hb.filterProps(hi(e,["format","modelValue","min","max"]));return G($d,lt(re,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>{var Be;return((Be=s.title)==null?void 0:Be.call(s))??Z("div",{class:"v-time-picker__title"},[c(e.title)])},header:()=>G(fb,lt(be,{ampm:O.value,hour:f.value,minute:d.value,period:k.value,second:a.value,viewMode:A.value,"onUpdate:period":Be=>fe(Be),"onUpdate:viewMode":Be=>A.value=Be,ref:I}),null),default:()=>G(hb,lt(je,{allowedValues:A.value==="hour"?F.value:A.value==="minute"?B.value:$.value,double:A.value==="hour"&&!O.value,format:A.value==="hour"?O.value?te:Be=>Be:Be=>Vu(Be,2),max:A.value==="hour"?O.value&&k.value==="am"?11:23:59,min:A.value==="hour"&&O.value&&k.value==="pm"?12:0,size:20,step:A.value==="hour"?1:5,modelValue:A.value==="hour"?f.value:A.value==="minute"?d.value:a.value,onChange:_e,onInput:pe,ref:R}),null),actions:s.actions})})}}),M5=Ue({...Ht(),...es({variant:"text"})},"VToolbarItems"),D5=ht()({name:"VToolbarItems",props:M5(),setup(e,n){let{slots:r}=n;return Li({VBtn:{color:Ee(()=>e.color),height:"inherit",variant:Ee(()=>e.variant)}}),_t(()=>{var s;return Z("div",{class:gt(["v-toolbar-items",e.class]),style:zt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),R5=Ue({id:String,interactive:Boolean,text:String,...hi(xm({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),s2=ht()({name:"VTooltip",props:R5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Qt(e,"modelValue"),{scopeId:c}=oc(),f=ya(),d=Ee(()=>e.id||`v-tooltip-${f}`),a=tt(),b=ee(()=>e.location.split(" ").length>1?e.location:e.location+" center"),C=ee(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),w=Ee(()=>e.transition!=null?e.transition:s.value?"scale-transition":"fade-transition"),k=ee(()=>lt({"aria-describedby":d.value},e.activatorProps));return _t(()=>{const A=Hs.filterProps(e);return G(Hs,lt({ref:a,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:d.value},A,{modelValue:s.value,"onUpdate:modelValue":I=>s.value=I,transition:w.value,absolute:!0,location:b.value,origin:C.value,persistent:!0,role:"tooltip",activatorProps:k.value,_disableGlobalStack:!0},c),{activator:r.activator,default:function(){var B;for(var I=arguments.length,R=new Array(I),F=0;F<I;F++)R[F]=arguments[F];return((B=r.default)==null?void 0:B.call(r,...R))??e.text}})}),Pr({},a)}}),L5=Ue({...hi(pP({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),mb=ht()({name:"VTreeviewGroup",props:L5(),setup(e,n){let{slots:r}=n;const s=tt(),c=ee(()=>{var d;return(d=s.value)!=null&&d.isOpen?e.collapseIcon:e.expandIcon}),f=ee(()=>{var d;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(d=s.value)==null?void 0:d.isOpen,toggleIcon:c.value}}});return _t(()=>{const d=tm.filterProps(e);return G(tm,lt(d,{ref:s,class:["v-treeview-group",e.class],subgroup:!0}),{...r,activator:r.activator?a=>Z(qt,null,[G(Sn,{defaults:f.value},{default:()=>{var b;return[(b=r.activator)==null?void 0:b.call(r,a)]}})]):void 0})}),{}}}),o2=Symbol.for("vuetify:v-treeview"),l2=Ue({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:tn,...yP({slim:!0})},"VTreeviewItem"),pb=ht()({name:"VTreeviewItem",props:l2(),emits:{toggleExpand:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=_n(o2,{visibleIds:tt()}).visibleIds,f=tt(),d=ee(()=>{var A,I;return((A=f.value)==null?void 0:A.root.activatable.value)&&((I=f.value)==null?void 0:I.isGroupActivator)}),a=ee(()=>{var A,I;return((A=f.value)==null?void 0:A.link.isClickable.value)||e.value!=null&&!!((I=f.value)!=null&&I.list)}),b=ee(()=>!e.disabled&&e.link!==!1&&(e.link||a.value||d.value)),C=ee(()=>{var A;return c.value&&!c.value.has(dn((A=f.value)==null?void 0:A.id))});function w(A){var I,R;b.value&&d.value&&((R=f.value)==null||R.activate(!((I=f.value)!=null&&I.isActivated),A))}function k(A){A.preventDefault(),A.stopPropagation(),s("toggleExpand",A)}return _t(()=>{var R;const A=ys.filterProps(e),I=r.prepend||e.toggleIcon||e.indentLines;return G(ys,lt({ref:f},A,{active:((R=f.value)==null?void 0:R.isActivated)||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":d.value,"v-treeview-item--filtered":C.value},e.class],ripple:!1,onClick:w}),{...r,prepend:I?F=>{var B;return Z(qt,null,[e.indentLines&&e.indentLines.length>0?Z("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map($=>Z("div",{class:gt(`v-treeview-indent-line v-treeview-indent-line--${$}`)},null))]):"",!e.hideActions&&G(TP,{start:!0},{default:()=>[e.toggleIcon?G(Mn,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:k},{loader:()=>G(Gu,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):Z("div",{class:"v-treeview-item__level"},null)]}),(B=r.prepend)==null?void 0:B.call(r,F)])}:void 0})}),Pr({},f)}}),u2=Ue({disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:tn,default:"$checkboxIndeterminate"},falseIcon:tn,trueIcon:tn,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Io(l2(),["hideActions"]),...mr()},"VTreeviewChildren"),Tg=ht()({name:"VTreeviewChildren",props:u2(),setup(e,n){let{slots:r}=n;const s=Sr(new Set),c=tt([]),f=ee(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function d(b){var C,w;try{if(!((C=e.items)!=null&&C.length)||!e.loadChildren)return;((w=b==null?void 0:b.children)==null?void 0:w.length)===0&&(s.add(b.value),await e.loadChildren(b.raw))}finally{s.delete(b.value)}}function a(b,C){e.selectable&&b(C)}return()=>{var b,C;return((b=r.default)==null?void 0:b.call(r))??((C=e.items)==null?void 0:C.map((w,k,A)=>{var ce,fe;const{children:I,props:R}=w,F=s.has(w.value),B=!!((ce=A.at(k+1))!=null&&ce.children),$=((fe=e.path)==null?void 0:fe.length)??0,O=A.length-1===k,q={index:k,depth:$,isFirst:k===0,isLast:O,path:[...e.path,k],hideAction:e.hideActions},X=NR({depth:$,isLast:O,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),te={prepend:pe=>{var _e;return Z(qt,null,[e.selectable&&(!I||I&&!["leaf","single-leaf"].includes(e.selectStrategy))&&Z("div",null,[G(qs,{key:w.value,modelValue:pe.isSelected,disabled:e.disabled,loading:F,color:e.selectedColor,density:e.density,indeterminate:pe.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":re=>a(pe.select,re),onClick:re=>re.stopPropagation(),onKeydown:re=>{["Enter","Space"].includes(re.key)&&(re.stopPropagation(),a(pe.select,pe.isSelected))}},null)]),(_e=r.prepend)==null?void 0:_e.call(r,{...pe,...q,item:w.raw,internalItem:w})])},append:r.append?pe=>{var _e;return(_e=r.append)==null?void 0:_e.call(r,{...pe,...q,item:w.raw,internalItem:w})}:void 0,title:r.title?pe=>{var _e;return(_e=r.title)==null?void 0:_e.call(r,{...pe,item:w.raw,internalItem:w})}:void 0,subtitle:r.subtitle?pe=>{var _e;return(_e=r.subtitle)==null?void 0:_e.call(r,{...pe,item:w.raw,internalItem:w})}:void 0},ae=mb.filterProps(R),ue=Tg.filterProps({...e,...q});return I?G(mb,lt(ae,{value:e.returnObject?w.raw:ae==null?void 0:ae.value,rawId:ae==null?void 0:ae.value}),{activator:pe=>{let{props:_e}=pe;const re={...R,..._e,value:R==null?void 0:R.value,onToggleExpand:[()=>d(w),_e.onClick],onClick:f.value?[()=>d(w),_e.onClick]:()=>{var be,je;return a((be=c.value[k])==null?void 0:be.select,!((je=c.value[k])!=null&&je.isSelected))}};return G(pb,lt({ref:be=>c.value[k]=be},re,{hideActions:e.hideActions,indentLines:X.node,value:e.returnObject?w.raw:R.value,loading:F}),te)},default:()=>G(Tg,lt(ue,{items:I,indentLinesVariant:e.indentLinesVariant,parentIndentLines:X.children,isLastGroup:B,returnObject:e.returnObject}),r)}):Uy(r.item,{props:R,item:w.raw,internalItem:w},()=>w.type==="divider"?Uy(r.divider,{props:w.raw},()=>G($a,w.props,null)):w.type==="subheader"?Uy(r.subheader,{props:w.raw},()=>G(Jd,w.props,null)):G(pb,lt(R,{hideActions:e.hideActions,indentLines:X.leaf,value:e.returnObject?dn(w.raw):R.value}),te))}))}}});function c2(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const r of e)n.push(r),r.children&&c2(r.children,n);return n}const z5=Ue({fluid:Boolean,openAll:Boolean,indentLines:[Boolean,String],search:String,...Qd({filterKeys:["title"]}),...hi(u2(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...hi(CP({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),B5=ht()({name:"VTreeview",props:z5(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:r,emit:s}=n;const{items:c}=SP(e),f=Ee(()=>e.activeColor),d=Ee(()=>e.baseColor),a=Ee(()=>e.color),b=Qt(e,"activated"),C=Qt(e,"selected"),w=ee({get:()=>e.modelValue??C.value,set(q){C.value=q,s("update:modelValue",q)}}),k=tt(),A=ee(()=>e.openAll?O(c.value):e.opened),I=ee(()=>c2(c.value)),R=Ee(()=>e.search),{filteredItems:F}=eh(e,I,R),B=ee(()=>{var X;if(!R.value)return null;const q=(X=k.value)==null?void 0:X.getPath;return q?new Set(F.value.flatMap(te=>{const ae=e.returnObject?te.raw:te.props.value;return[...q(ae),...$(ae)].map(dn)})):null});function $(q){var ae,ue;const X=[],te=(((ae=k.value)==null?void 0:ae.children.get(q))??[]).slice();for(;te.length;){const ce=te.shift();ce&&(X.push(ce),te.push(...(((ue=k.value)==null?void 0:ue.children.get(ce))??[]).slice()))}return X}function O(q){let X=[];for(const te of q)te.children&&(X.push(e.returnObject?dn(te.raw):te.value),te.children&&(X=X.concat(O(te.children))));return X}return ri(o2,{visibleIds:B}),Li({VTreeviewGroup:{activeColor:f,baseColor:d,color:a,collapseIcon:Ee(()=>e.collapseIcon),expandIcon:Ee(()=>e.expandIcon)},VTreeviewItem:{activeClass:Ee(()=>e.activeClass),activeColor:f,baseColor:d,color:a,density:Ee(()=>e.density),disabled:Ee(()=>e.disabled),lines:Ee(()=>e.lines),variant:Ee(()=>e.variant)}}),_t(()=>{const q=Od.filterProps(e),X=Tg.filterProps(e),te=typeof e.indentLines=="boolean"?"default":e.indentLines;return G(Od,lt({ref:k},q,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],"open-strategy":"multiple",style:e.style,opened:A.value,activated:b.value,"onUpdate:activated":ae=>b.value=ae,selected:w.value,"onUpdate:selected":ae=>w.value=ae}),{default:()=>[G(Tg,lt(X,{density:e.density,returnObject:e.returnObject,items:c.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:te}),r)]})}),{}}}),V5=ht()({name:"VValidation",props:tP(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nP(e,"validation");return()=>{var c;return(c=r.default)==null?void 0:c.call(r,s)}}}),O5=Object.freeze(Object.defineProperty({__proto__:null,VAlert:Yz,VAlertTitle:Zk,VApp:iz,VAppBar:Sz,VAppBarNavIcon:Gz,VAppBarTitle:qz,VAutocomplete:fV,VAvatar:Ja,VBadge:pV,VBanner:yV,VBannerActions:OP,VBannerText:FP,VBottomNavigation:bV,VBottomSheet:wV,VBreadcrumbs:kV,VBreadcrumbsDivider:jP,VBreadcrumbsItem:NP,VBtn:Mn,VBtnGroup:N_,VBtnToggle:Az,VCard:MV,VCardActions:UP,VCardItem:HP,VCardSubtitle:GP,VCardText:WP,VCardTitle:qP,VCarousel:$V,VCarouselItem:NV,VCheckbox:oB,VCheckboxBtn:qs,VChip:Xd,VChipGroup:hB,VClassIcon:c0,VCode:UV,VCol:yF,VColorPicker:DO,VCombobox:LO,VComponentIcon:F_,VConfirmEdit:BO,VContainer:mF,VCounter:Yg,VDataIterator:HO,VDataTable:lF,VDataTableFooter:im,VDataTableHeaders:Wu,VDataTableRow:j0,VDataTableRows:Zu,VDataTableServer:hF,VDataTableVirtual:cF,VDatePicker:EF,VDatePickerControls:rb,VDatePickerHeader:ab,VDatePickerMonth:sb,VDatePickerMonths:ob,VDatePickerYears:lb,VDefaultsProvider:Sn,VDialog:Y_,VDialogBottomTransition:oz,VDialogTopTransition:lz,VDialogTransition:Gg,VDivider:$a,VEmptyState:DF,VExpandTransition:qg,VExpandXTransition:p0,VExpansionPanel:RF,VExpansionPanelText:ub,VExpansionPanelTitle:cb,VExpansionPanels:BF,VFab:OF,VFabTransition:sz,VFadeTransition:Kf,VField:Il,VFieldLabel:wf,VFileInput:jF,VFooter:UF,VForm:qF,VHover:WF,VIcon:Yn,VImg:To,VInfiniteScroll:KF,VInput:Wr,VItem:JF,VItemGroup:XF,VKbd:e3,VLabel:Yd,VLayout:n3,VLayoutItem:r3,VLazy:s3,VLigatureIcon:NL,VList:Od,VListGroup:tm,VListImg:EB,VListItem:ys,VListItemAction:TP,VListItemMedia:RB,VListItemSubtitle:gP,VListItemTitle:vP,VListSubheader:Jd,VLocaleProvider:l3,VMain:c3,VMenu:Fd,VMessages:Qk,VNavigationDrawer:_3,VNoSsr:b3,VNumberInput:T3,VOtpInput:P3,VOverlay:Hs,VPagination:nb,VParallax:E3,VProgressCircular:Gu,VProgressLinear:Hg,VRadio:D3,VRadioGroup:L3,VRangeSlider:B3,VRating:O3,VResponsive:$_,VRow:TF,VScaleTransition:f0,VScrollXReverseTransition:cz,VScrollXTransition:uz,VScrollYReverseTransition:hz,VScrollYTransition:dz,VSelect:A0,VSelectionControl:Pl,VSelectionControlGroup:Yk,VSheet:nm,VSkeletonLoader:N3,VSlideGroup:Qf,VSlideGroupItem:U3,VSlideXReverseTransition:mz,VSlideXTransition:fz,VSlideYReverseTransition:pz,VSlideYTransition:m0,VSlider:tb,VSnackbar:db,VSnackbarQueue:H3,VSpacer:LI,VSparkline:Y3,VSpeedDial:J3,VStepper:a5,VStepperActions:YI,VStepperHeader:XI,VStepperItem:JI,VStepperWindow:QI,VStepperWindowItem:e2,VSvgIcon:u0,VSwitch:o5,VSystemBar:u5,VTab:t2,VTable:Ku,VTabs:p5,VTabsWindow:n2,VTabsWindowItem:i2,VTextField:ko,VTextarea:v5,VThemeProvider:_5,VTimePicker:E5,VTimePickerClock:hb,VTimePickerControls:fb,VTimeline:C5,VTimelineItem:w5,VToolbar:j_,VToolbarItems:D5,VToolbarTitle:h0,VTooltip:s2,VTreeview:B5,VTreeviewGroup:mb,VTreeviewItem:pb,VValidation:V5,VVirtualScroll:Xg,VWindow:qu,VWindowItem:Hu},Symbol.toStringTag,{value:"Module"}));function F5(e,n){const r=n.modifiers||{},s=n.value,{once:c,immediate:f,...d}=r,a=!Object.keys(d).length,{handler:b,options:C}=typeof s=="object"?s:{handler:s,options:{attributes:(d==null?void 0:d.attr)??a,characterData:(d==null?void 0:d.char)??a,childList:(d==null?void 0:d.child)??a,subtree:(d==null?void 0:d.sub)??a}},w=new MutationObserver(function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=arguments.length>1?arguments[1]:void 0;b==null||b(k,A),c&&d2(e,n)});f&&(b==null||b([],w)),e._mutate=Object(e._mutate),e._mutate[n.instance.$.uid]={observer:w},w.observe(e,C)}function d2(e,n){var r;(r=e._mutate)!=null&&r[n.instance.$.uid]&&(e._mutate[n.instance.$.uid].observer.disconnect(),delete e._mutate[n.instance.$.uid])}const $5={mounted:F5,unmounted:d2};function j5(e,n){var c,f;const r=n.value,s={passive:!((c=n.modifiers)!=null&&c.active)};window.addEventListener("resize",r,s),e._onResize=Object(e._onResize),e._onResize[n.instance.$.uid]={handler:r,options:s},(f=n.modifiers)!=null&&f.quiet||r()}function N5(e,n){var c;if(!((c=e._onResize)!=null&&c[n.instance.$.uid]))return;const{handler:r,options:s}=e._onResize[n.instance.$.uid];window.removeEventListener("resize",r,s),delete e._onResize[n.instance.$.uid]}const U5={mounted:j5,unmounted:N5};function h2(e,n){const{self:r=!1}=n.modifiers??{},s=n.value,c=typeof s=="object"&&s.options||{passive:!0},f=typeof s=="function"||"handleEvent"in s?s:s.handler,d=r?e:n.arg?document.querySelector(n.arg):window;d&&(d.addEventListener("scroll",f,c),e._onScroll=Object(e._onScroll),e._onScroll[n.instance.$.uid]={handler:f,options:c,target:r?void 0:d})}function f2(e,n){var f;if(!((f=e._onScroll)!=null&&f[n.instance.$.uid]))return;const{handler:r,options:s,target:c=e}=e._onScroll[n.instance.$.uid];c.removeEventListener("scroll",r,s),delete e._onScroll[n.instance.$.uid]}function G5(e,n){n.value!==n.oldValue&&(f2(e,n),h2(e,n))}const q5={mounted:h2,unmounted:f2,updated:G5};function H5(e,n){const r=typeof e=="string"?mn(e):e,s=W5(r,n);return{mounted:s,updated:s,unmounted(c){qT(null,c)}}}function W5(e,n){return function(r,s,c){var k,A,I;const f=typeof n=="function"?n(s):n,d=((k=s.value)==null?void 0:k.text)??s.value??(f==null?void 0:f.text),a=Gf(s.value)?s.value:{},b=()=>d??r.textContent,C=(c.ctx===s.instance.$?(A=Z5(c,s.instance.$))==null?void 0:A.provides:(I=c.ctx)==null?void 0:I.provides)??s.instance.$.provides,w=bs(e,lt(f,a),b);w.appContext=Object.assign(Object.create(null),s.instance.$.appContext,{provides:C}),qT(w,r)}}function Z5(e,n){const r=new Set,s=f=>{var d,a;for(const b of f){if(!b)continue;if(b===e||b.el&&e.el&&b.el===e.el)return!0;r.add(b);let C;if(b.suspense?C=s([b.ssContent]):Array.isArray(b.children)?C=s(b.children):(d=b.component)!=null&&d.vnode&&(C=s([(a=b.component)==null?void 0:a.subTree])),C)return C;r.delete(b)}return!1};if(!s([n.subTree]))return n;const c=Array.from(r).reverse();for(const f of c)if(f.component)return f.component;return n}const K5=H5(s2,e=>{var n;return{activator:"parent",location:(n=e.arg)==null?void 0:n.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value}}),Y5=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:K_,Intersect:Co,Mutate:$5,Resize:U5,Ripple:aa,Scroll:q5,Tooltip:K5,Touch:Sg},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const wd=typeof document<"u";function m2(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function X5(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&m2(e.default)}const oi=Object.assign;function n_(e,n){const r={};for(const s in n){const c=n[s];r[s]=_s(c)?c.map(e):e(c)}return r}const Df=()=>{},_s=Array.isArray,p2=/#/g,J5=/&/g,Q5=/\//g,e$=/=/g,t$=/\?/g,g2=/\+/g,n$=/%5B/g,i$=/%5D/g,v2=/%5E/g,r$=/%60/g,y2=/%7B/g,a$=/%7C/g,_2=/%7D/g,s$=/%20/g;function Z0(e){return encodeURI(""+e).replace(a$,"|").replace(n$,"[").replace(i$,"]")}function o$(e){return Z0(e).replace(y2,"{").replace(_2,"}").replace(v2,"^")}function gb(e){return Z0(e).replace(g2,"%2B").replace(s$,"+").replace(p2,"%23").replace(J5,"%26").replace(r$,"`").replace(y2,"{").replace(_2,"}").replace(v2,"^")}function l$(e){return gb(e).replace(e$,"%3D")}function u$(e){return Z0(e).replace(p2,"%23").replace(t$,"%3F")}function c$(e){return e==null?"":u$(e).replace(Q5,"%2F")}function am(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const d$=/\/$/,h$=e=>e.replace(d$,"");function i_(e,n,r="/"){let s,c={},f="",d="";const a=n.indexOf("#");let b=n.indexOf("?");return a<b&&a>=0&&(b=-1),b>-1&&(s=n.slice(0,b),f=n.slice(b+1,a>-1?a:n.length),c=e(f)),a>-1&&(s=s||n.slice(0,a),d=n.slice(a,n.length)),s=g$(s??n,r),{fullPath:s+(f&&"?")+f+d,path:s,query:c,hash:am(d)}}function f$(e,n){const r=n.query?e(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function MS(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function m$(e,n,r){const s=n.matched.length-1,c=r.matched.length-1;return s>-1&&s===c&&jd(n.matched[s],r.matched[c])&&b2(n.params,r.params)&&e(n.query)===e(r.query)&&n.hash===r.hash}function jd(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function b2(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!p$(e[r],n[r]))return!1;return!0}function p$(e,n){return _s(e)?DS(e,n):_s(n)?DS(n,e):e===n}function DS(e,n){return _s(n)?e.length===n.length&&e.every((r,s)=>r===n[s]):e.length===1&&e[0]===n}function g$(e,n){if(e.startsWith("/"))return e;if(!e)return n;const r=n.split("/"),s=e.split("/"),c=s[s.length-1];(c===".."||c===".")&&s.push("");let f=r.length-1,d,a;for(d=0;d<s.length;d++)if(a=s[d],a!==".")if(a==="..")f>1&&f--;else break;return r.slice(0,f).join("/")+"/"+s.slice(d).join("/")}const hl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var sm;(function(e){e.pop="pop",e.push="push"})(sm||(sm={}));var Rf;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Rf||(Rf={}));function v$(e){if(!e)if(wd){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),h$(e)}const y$=/^[^#]+#/;function _$(e,n){return e.replace(y$,"#")+n}function b$(e,n){const r=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:n.behavior,left:s.left-r.left-(n.left||0),top:s.top-r.top-(n.top||0)}}const dv=()=>({left:window.scrollX,top:window.scrollY});function x$(e){let n;if("el"in e){const r=e.el,s=typeof r=="string"&&r.startsWith("#"),c=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!c)return;n=b$(c,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function RS(e,n){return(history.state?history.state.position-n:-1)+e}const vb=new Map;function w$(e,n){vb.set(e,n)}function S$(e){const n=vb.get(e);return vb.delete(e),n}let C$=()=>location.protocol+"//"+location.host;function x2(e,n){const{pathname:r,search:s,hash:c}=n,f=e.indexOf("#");if(f>-1){let a=c.includes(e.slice(f))?e.slice(f).length:1,b=c.slice(a);return b[0]!=="/"&&(b="/"+b),MS(b,"")}return MS(r,e)+s+c}function T$(e,n,r,s){let c=[],f=[],d=null;const a=({state:A})=>{const I=x2(e,location),R=r.value,F=n.value;let B=0;if(A){if(r.value=I,n.value=A,d&&d===R){d=null;return}B=F?A.position-F.position:0}else s(I);c.forEach($=>{$(r.value,R,{delta:B,type:sm.pop,direction:B?B>0?Rf.forward:Rf.back:Rf.unknown})})};function b(){d=r.value}function C(A){c.push(A);const I=()=>{const R=c.indexOf(A);R>-1&&c.splice(R,1)};return f.push(I),I}function w(){const{history:A}=window;A.state&&A.replaceState(oi({},A.state,{scroll:dv()}),"")}function k(){for(const A of f)A();f=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:b,listen:C,destroy:k}}function LS(e,n,r,s=!1,c=!1){return{back:e,current:n,forward:r,replaced:s,position:window.history.length,scroll:c?dv():null}}function k$(e){const{history:n,location:r}=window,s={value:x2(e,r)},c={value:n.state};c.value||f(s.value,{back:null,current:s.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function f(b,C,w){const k=e.indexOf("#"),A=k>-1?(r.host&&document.querySelector("base")?e:e.slice(k))+b:C$()+e+b;try{n[w?"replaceState":"pushState"](C,"",A),c.value=C}catch(I){console.error(I),r[w?"replace":"assign"](A)}}function d(b,C){const w=oi({},n.state,LS(c.value.back,b,c.value.forward,!0),C,{position:c.value.position});f(b,w,!0),s.value=b}function a(b,C){const w=oi({},c.value,n.state,{forward:b,scroll:dv()});f(w.current,w,!0);const k=oi({},LS(s.value,b,null),{position:w.position+1},C);f(b,k,!1),s.value=b}return{location:s,state:c,push:a,replace:d}}function P$(e){e=v$(e);const n=k$(e),r=T$(e,n.state,n.location,n.replace);function s(f,d=!0){d||r.pauseListeners(),history.go(f)}const c=oi({location:"",base:e,go:s,createHref:_$.bind(null,e)},n,r);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>n.state.value}),c}function I$(e){return typeof e=="string"||e&&typeof e=="object"}function w2(e){return typeof e=="string"||typeof e=="symbol"}const S2=Symbol("");var zS;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(zS||(zS={}));function Nd(e,n){return oi(new Error,{type:e,[S2]:!0},n)}function po(e,n){return e instanceof Error&&S2 in e&&(n==null||!!(e.type&n))}const BS="[^/]+?",A$={sensitive:!1,strict:!1,start:!0,end:!0},E$=/[.+*?^${}()[\]/\\]/g;function M$(e,n){const r=oi({},A$,n),s=[];let c=r.start?"^":"";const f=[];for(const C of e){const w=C.length?[]:[90];r.strict&&!C.length&&(c+="/");for(let k=0;k<C.length;k++){const A=C[k];let I=40+(r.sensitive?.25:0);if(A.type===0)k||(c+="/"),c+=A.value.replace(E$,"\\$&"),I+=40;else if(A.type===1){const{value:R,repeatable:F,optional:B,regexp:$}=A;f.push({name:R,repeatable:F,optional:B});const O=$||BS;if(O!==BS){I+=10;try{new RegExp(`(${O})`)}catch(X){throw new Error(`Invalid custom RegExp for param "${R}" (${O}): `+X.message)}}let q=F?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;k||(q=B&&C.length<2?`(?:/${q})`:"/"+q),B&&(q+="?"),c+=q,I+=20,B&&(I+=-8),F&&(I+=-20),O===".*"&&(I+=-50)}w.push(I)}s.push(w)}if(r.strict&&r.end){const C=s.length-1;s[C][s[C].length-1]+=.7000000000000001}r.strict||(c+="/?"),r.end?c+="$":r.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const d=new RegExp(c,r.sensitive?"":"i");function a(C){const w=C.match(d),k={};if(!w)return null;for(let A=1;A<w.length;A++){const I=w[A]||"",R=f[A-1];k[R.name]=I&&R.repeatable?I.split("/"):I}return k}function b(C){let w="",k=!1;for(const A of e){(!k||!w.endsWith("/"))&&(w+="/"),k=!1;for(const I of A)if(I.type===0)w+=I.value;else if(I.type===1){const{value:R,repeatable:F,optional:B}=I,$=R in C?C[R]:"";if(_s($)&&!F)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const O=_s($)?$.join("/"):$;if(!O)if(B)A.length<2&&(w.endsWith("/")?w=w.slice(0,-1):k=!0);else throw new Error(`Missing required param "${R}"`);w+=O}}return w||"/"}return{re:d,score:s,keys:f,parse:a,stringify:b}}function D$(e,n){let r=0;for(;r<e.length&&r<n.length;){const s=n[r]-e[r];if(s)return s;r++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function C2(e,n){let r=0;const s=e.score,c=n.score;for(;r<s.length&&r<c.length;){const f=D$(s[r],c[r]);if(f)return f;r++}if(Math.abs(c.length-s.length)===1){if(VS(s))return 1;if(VS(c))return-1}return c.length-s.length}function VS(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const R$={type:0,value:""},L$=/[a-zA-Z0-9_]/;function z$(e){if(!e)return[[]];if(e==="/")return[[R$]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(I){throw new Error(`ERR (${r})/"${C}": ${I}`)}let r=0,s=r;const c=[];let f;function d(){f&&c.push(f),f=[]}let a=0,b,C="",w="";function k(){C&&(r===0?f.push({type:0,value:C}):r===1||r===2||r===3?(f.length>1&&(b==="*"||b==="+")&&n(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),f.push({type:1,value:C,regexp:w,repeatable:b==="*"||b==="+",optional:b==="*"||b==="?"})):n("Invalid state to consume buffer"),C="")}function A(){C+=b}for(;a<e.length;){if(b=e[a++],b==="\\"&&r!==2){s=r,r=4;continue}switch(r){case 0:b==="/"?(C&&k(),d()):b===":"?(k(),r=1):A();break;case 4:A(),r=s;break;case 1:b==="("?r=2:L$.test(b)?A():(k(),r=0,b!=="*"&&b!=="?"&&b!=="+"&&a--);break;case 2:b===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+b:r=3:w+=b;break;case 3:k(),r=0,b!=="*"&&b!=="?"&&b!=="+"&&a--,w="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${C}"`),k(),d(),c}function B$(e,n,r){const s=M$(z$(e.path),r),c=oi(s,{record:e,parent:n,children:[],alias:[]});return n&&!c.record.aliasOf==!n.record.aliasOf&&n.children.push(c),c}function V$(e,n){const r=[],s=new Map;n=jS({strict:!1,end:!0,sensitive:!1},n);function c(k){return s.get(k)}function f(k,A,I){const R=!I,F=FS(k);F.aliasOf=I&&I.record;const B=jS(n,k),$=[F];if("alias"in k){const X=typeof k.alias=="string"?[k.alias]:k.alias;for(const te of X)$.push(FS(oi({},F,{components:I?I.record.components:F.components,path:te,aliasOf:I?I.record:F})))}let O,q;for(const X of $){const{path:te}=X;if(A&&te[0]!=="/"){const ae=A.record.path,ue=ae[ae.length-1]==="/"?"":"/";X.path=A.record.path+(te&&ue+te)}if(O=B$(X,A,B),I?I.alias.push(O):(q=q||O,q!==O&&q.alias.push(O),R&&k.name&&!$S(O)&&d(k.name)),T2(O)&&b(O),F.children){const ae=F.children;for(let ue=0;ue<ae.length;ue++)f(ae[ue],O,I&&I.children[ue])}I=I||O}return q?()=>{d(q)}:Df}function d(k){if(w2(k)){const A=s.get(k);A&&(s.delete(k),r.splice(r.indexOf(A),1),A.children.forEach(d),A.alias.forEach(d))}else{const A=r.indexOf(k);A>-1&&(r.splice(A,1),k.record.name&&s.delete(k.record.name),k.children.forEach(d),k.alias.forEach(d))}}function a(){return r}function b(k){const A=$$(k,r);r.splice(A,0,k),k.record.name&&!$S(k)&&s.set(k.record.name,k)}function C(k,A){let I,R={},F,B;if("name"in k&&k.name){if(I=s.get(k.name),!I)throw Nd(1,{location:k});B=I.record.name,R=oi(OS(A.params,I.keys.filter(q=>!q.optional).concat(I.parent?I.parent.keys.filter(q=>q.optional):[]).map(q=>q.name)),k.params&&OS(k.params,I.keys.map(q=>q.name))),F=I.stringify(R)}else if(k.path!=null)F=k.path,I=r.find(q=>q.re.test(F)),I&&(R=I.parse(F),B=I.record.name);else{if(I=A.name?s.get(A.name):r.find(q=>q.re.test(A.path)),!I)throw Nd(1,{location:k,currentLocation:A});B=I.record.name,R=oi({},A.params,k.params),F=I.stringify(R)}const $=[];let O=I;for(;O;)$.unshift(O.record),O=O.parent;return{name:B,path:F,params:R,matched:$,meta:F$($)}}e.forEach(k=>f(k));function w(){r.length=0,s.clear()}return{addRoute:f,resolve:C,removeRoute:d,clearRoutes:w,getRoutes:a,getRecordMatcher:c}}function OS(e,n){const r={};for(const s of n)s in e&&(r[s]=e[s]);return r}function FS(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:O$(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function O$(e){const n={},r=e.props||!1;if("component"in e)n.default=r;else for(const s in e.components)n[s]=typeof r=="object"?r[s]:r;return n}function $S(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function F$(e){return e.reduce((n,r)=>oi(n,r.meta),{})}function jS(e,n){const r={};for(const s in e)r[s]=s in n?n[s]:e[s];return r}function $$(e,n){let r=0,s=n.length;for(;r!==s;){const f=r+s>>1;C2(e,n[f])<0?s=f:r=f+1}const c=j$(e);return c&&(s=n.lastIndexOf(c,s-1)),s}function j$(e){let n=e;for(;n=n.parent;)if(T2(n)&&C2(e,n)===0)return n}function T2({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function N$(e){const n={};if(e===""||e==="?")return n;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<s.length;++c){const f=s[c].replace(g2," "),d=f.indexOf("="),a=am(d<0?f:f.slice(0,d)),b=d<0?null:am(f.slice(d+1));if(a in n){let C=n[a];_s(C)||(C=n[a]=[C]),C.push(b)}else n[a]=b}return n}function NS(e){let n="";for(let r in e){const s=e[r];if(r=l$(r),s==null){s!==void 0&&(n+=(n.length?"&":"")+r);continue}(_s(s)?s.map(f=>f&&gb(f)):[s&&gb(s)]).forEach(f=>{f!==void 0&&(n+=(n.length?"&":"")+r,f!=null&&(n+="="+f))})}return n}function U$(e){const n={};for(const r in e){const s=e[r];s!==void 0&&(n[r]=_s(s)?s.map(c=>c==null?null:""+c):s==null?s:""+s)}return n}const G$=Symbol(""),US=Symbol(""),hv=Symbol(""),K0=Symbol(""),yb=Symbol("");function yf(){let e=[];function n(s){return e.push(s),()=>{const c=e.indexOf(s);c>-1&&e.splice(c,1)}}function r(){e=[]}return{add:n,list:()=>e.slice(),reset:r}}function yl(e,n,r,s,c,f=d=>d()){const d=s&&(s.enterCallbacks[c]=s.enterCallbacks[c]||[]);return()=>new Promise((a,b)=>{const C=A=>{A===!1?b(Nd(4,{from:r,to:n})):A instanceof Error?b(A):I$(A)?b(Nd(2,{from:n,to:A})):(d&&s.enterCallbacks[c]===d&&typeof A=="function"&&d.push(A),a())},w=f(()=>e.call(s&&s.instances[c],n,r,C));let k=Promise.resolve(w);e.length<3&&(k=k.then(C)),k.catch(A=>b(A))})}function r_(e,n,r,s,c=f=>f()){const f=[];for(const d of e)for(const a in d.components){let b=d.components[a];if(!(n!=="beforeRouteEnter"&&!d.instances[a]))if(m2(b)){const w=(b.__vccOpts||b)[n];w&&f.push(yl(w,r,s,d,a,c))}else{let C=b();f.push(()=>C.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${a}" at "${d.path}"`);const k=X5(w)?w.default:w;d.mods[a]=w,d.components[a]=k;const I=(k.__vccOpts||k)[n];return I&&yl(I,r,s,d,a,c)()}))}}return f}function GS(e){const n=_n(hv),r=_n(K0),s=ee(()=>{const b=Cr(e.to);return n.resolve(b)}),c=ee(()=>{const{matched:b}=s.value,{length:C}=b,w=b[C-1],k=r.matched;if(!w||!k.length)return-1;const A=k.findIndex(jd.bind(null,w));if(A>-1)return A;const I=qS(b[C-2]);return C>1&&qS(w)===I&&k[k.length-1].path!==I?k.findIndex(jd.bind(null,b[C-2])):A}),f=ee(()=>c.value>-1&&K$(r.params,s.value.params)),d=ee(()=>c.value>-1&&c.value===r.matched.length-1&&b2(r.params,s.value.params));function a(b={}){if(Z$(b)){const C=n[Cr(e.replace)?"replace":"push"](Cr(e.to)).catch(Df);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>C),C}return Promise.resolve()}return{route:s,href:ee(()=>s.value.href),isActive:f,isExactActive:d,navigate:a}}function q$(e){return e.length===1?e[0]:e}const H$=jb({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:GS,setup(e,{slots:n}){const r=Sr(GS(e)),{options:s}=_n(hv),c=ee(()=>({[HS(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[HS(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const f=n.default&&q$(n.default(r));return e.custom?f:bs("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:c.value},f)}}}),W$=H$;function Z$(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function K$(e,n){for(const r in n){const s=n[r],c=e[r];if(typeof s=="string"){if(s!==c)return!1}else if(!_s(c)||c.length!==s.length||s.some((f,d)=>f!==c[d]))return!1}return!0}function qS(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const HS=(e,n,r)=>e??n??r,Y$=jb({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:r}){const s=_n(yb),c=ee(()=>e.route||s.value),f=_n(US,0),d=ee(()=>{let C=Cr(f);const{matched:w}=c.value;let k;for(;(k=w[C])&&!k.components;)C++;return C}),a=ee(()=>c.value.matched[d.value]);ri(US,ee(()=>d.value+1)),ri(G$,a),ri(yb,c);const b=tt();return Bt(()=>[b.value,a.value,e.name],([C,w,k],[A,I,R])=>{w&&(w.instances[k]=C,I&&I!==w&&C&&C===A&&(w.leaveGuards.size||(w.leaveGuards=I.leaveGuards),w.updateGuards.size||(w.updateGuards=I.updateGuards))),C&&w&&(!I||!jd(w,I)||!A)&&(w.enterCallbacks[k]||[]).forEach(F=>F(C))},{flush:"post"}),()=>{const C=c.value,w=e.name,k=a.value,A=k&&k.components[w];if(!A)return WS(r.default,{Component:A,route:C});const I=k.props[w],R=I?I===!0?C.params:typeof I=="function"?I(C):I:null,B=bs(A,oi({},R,n,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(k.instances[w]=null)},ref:b}));return WS(r.default,{Component:B,route:C})||B}}});function WS(e,n){if(!e)return null;const r=e(n);return r.length===1?r[0]:r}const X$=Y$;function J$(e){const n=V$(e.routes,e),r=e.parseQuery||N$,s=e.stringifyQuery||NS,c=e.history,f=yf(),d=yf(),a=yf(),b=Mt(hl);let C=hl;wd&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=n_.bind(null,Re=>""+Re),k=n_.bind(null,c$),A=n_.bind(null,am);function I(Re,vt){let st,Ye;return w2(Re)?(st=n.getRecordMatcher(Re),Ye=vt):Ye=Re,n.addRoute(Ye,st)}function R(Re){const vt=n.getRecordMatcher(Re);vt&&n.removeRoute(vt)}function F(){return n.getRoutes().map(Re=>Re.record)}function B(Re){return!!n.getRecordMatcher(Re)}function $(Re,vt){if(vt=oi({},vt||b.value),typeof Re=="string"){const Le=i_(r,Re,vt.path),Ze=n.resolve({path:Le.path},vt),ut=c.createHref(Le.fullPath);return oi(Le,Ze,{params:A(Ze.params),hash:am(Le.hash),redirectedFrom:void 0,href:ut})}let st;if(Re.path!=null)st=oi({},Re,{path:i_(r,Re.path,vt.path).path});else{const Le=oi({},Re.params);for(const Ze in Le)Le[Ze]==null&&delete Le[Ze];st=oi({},Re,{params:k(Le)}),vt.params=k(vt.params)}const Ye=n.resolve(st,vt),St=Re.hash||"";Ye.params=w(A(Ye.params));const ie=f$(s,oi({},Re,{hash:o$(St),path:Ye.path})),le=c.createHref(ie);return oi({fullPath:ie,hash:St,query:s===NS?U$(Re.query):Re.query||{}},Ye,{redirectedFrom:void 0,href:le})}function O(Re){return typeof Re=="string"?i_(r,Re,b.value.path):oi({},Re)}function q(Re,vt){if(C!==Re)return Nd(8,{from:vt,to:Re})}function X(Re){return ue(Re)}function te(Re){return X(oi(O(Re),{replace:!0}))}function ae(Re){const vt=Re.matched[Re.matched.length-1];if(vt&&vt.redirect){const{redirect:st}=vt;let Ye=typeof st=="function"?st(Re):st;return typeof Ye=="string"&&(Ye=Ye.includes("?")||Ye.includes("#")?Ye=O(Ye):{path:Ye},Ye.params={}),oi({query:Re.query,hash:Re.hash,params:Ye.path!=null?{}:Re.params},Ye)}}function ue(Re,vt){const st=C=$(Re),Ye=b.value,St=Re.state,ie=Re.force,le=Re.replace===!0,Le=ae(st);if(Le)return ue(oi(O(Le),{state:typeof Le=="object"?oi({},St,Le.state):St,force:ie,replace:le}),vt||st);const Ze=st;Ze.redirectedFrom=vt;let ut;return!ie&&m$(s,Ye,st)&&(ut=Nd(16,{to:Ze,from:Ye}),Se(Ye,Ye,!0,!1)),(ut?Promise.resolve(ut):pe(Ze,Ye)).catch(Je=>po(Je)?po(Je,2)?Je:ze(Je):ft(Je,Ze,Ye)).then(Je=>{if(Je){if(po(Je,2))return ue(oi({replace:le},O(Je.to),{state:typeof Je.to=="object"?oi({},St,Je.to.state):St,force:ie}),vt||Ze)}else Je=re(Ze,Ye,!0,le,St);return _e(Ze,Ye,Je),Je})}function ce(Re,vt){const st=q(Re,vt);return st?Promise.reject(st):Promise.resolve()}function fe(Re){const vt=Ft.values().next().value;return vt&&typeof vt.runWithContext=="function"?vt.runWithContext(Re):Re()}function pe(Re,vt){let st;const[Ye,St,ie]=Q$(Re,vt);st=r_(Ye.reverse(),"beforeRouteLeave",Re,vt);for(const Le of Ye)Le.leaveGuards.forEach(Ze=>{st.push(yl(Ze,Re,vt))});const le=ce.bind(null,Re,vt);return st.push(le),xt(st).then(()=>{st=[];for(const Le of f.list())st.push(yl(Le,Re,vt));return st.push(le),xt(st)}).then(()=>{st=r_(St,"beforeRouteUpdate",Re,vt);for(const Le of St)Le.updateGuards.forEach(Ze=>{st.push(yl(Ze,Re,vt))});return st.push(le),xt(st)}).then(()=>{st=[];for(const Le of ie)if(Le.beforeEnter)if(_s(Le.beforeEnter))for(const Ze of Le.beforeEnter)st.push(yl(Ze,Re,vt));else st.push(yl(Le.beforeEnter,Re,vt));return st.push(le),xt(st)}).then(()=>(Re.matched.forEach(Le=>Le.enterCallbacks={}),st=r_(ie,"beforeRouteEnter",Re,vt,fe),st.push(le),xt(st))).then(()=>{st=[];for(const Le of d.list())st.push(yl(Le,Re,vt));return st.push(le),xt(st)}).catch(Le=>po(Le,8)?Le:Promise.reject(Le))}function _e(Re,vt,st){a.list().forEach(Ye=>fe(()=>Ye(Re,vt,st)))}function re(Re,vt,st,Ye,St){const ie=q(Re,vt);if(ie)return ie;const le=vt===hl,Le=wd?history.state:{};st&&(Ye||le?c.replace(Re.fullPath,oi({scroll:le&&Le&&Le.scroll},St)):c.push(Re.fullPath,St)),b.value=Re,Se(Re,vt,st,le),ze()}let be;function je(){be||(be=c.listen((Re,vt,st)=>{if(!Tt.listening)return;const Ye=$(Re),St=ae(Ye);if(St){ue(oi(St,{replace:!0,force:!0}),Ye).catch(Df);return}C=Ye;const ie=b.value;wd&&w$(RS(ie.fullPath,st.delta),dv()),pe(Ye,ie).catch(le=>po(le,12)?le:po(le,2)?(ue(oi(O(le.to),{force:!0}),Ye).then(Le=>{po(Le,20)&&!st.delta&&st.type===sm.pop&&c.go(-1,!1)}).catch(Df),Promise.reject()):(st.delta&&c.go(-st.delta,!1),ft(le,Ye,ie))).then(le=>{le=le||re(Ye,ie,!1),le&&(st.delta&&!po(le,8)?c.go(-st.delta,!1):st.type===sm.pop&&po(le,20)&&c.go(-1,!1)),_e(Ye,ie,le)}).catch(Df)}))}let Be=yf(),Fe=yf(),Ke;function ft(Re,vt,st){ze(Re);const Ye=Fe.list();return Ye.length?Ye.forEach(St=>St(Re,vt,st)):console.error(Re),Promise.reject(Re)}function mt(){return Ke&&b.value!==hl?Promise.resolve():new Promise((Re,vt)=>{Be.add([Re,vt])})}function ze(Re){return Ke||(Ke=!Re,je(),Be.list().forEach(([vt,st])=>Re?st(Re):vt()),Be.reset()),Re}function Se(Re,vt,st,Ye){const{scrollBehavior:St}=e;if(!wd||!St)return Promise.resolve();const ie=!st&&S$(RS(Re.fullPath,0))||(Ye||!st)&&history.state&&history.state.scroll||null;return Dn().then(()=>St(Re,vt,ie)).then(le=>le&&x$(le)).catch(le=>ft(le,Re,vt))}const Me=Re=>c.go(Re);let Qe;const Ft=new Set,Tt={currentRoute:b,listening:!0,addRoute:I,removeRoute:R,clearRoutes:n.clearRoutes,hasRoute:B,getRoutes:F,resolve:$,options:e,push:X,replace:te,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:f.add,beforeResolve:d.add,afterEach:a.add,onError:Fe.add,isReady:mt,install(Re){const vt=this;Re.component("RouterLink",W$),Re.component("RouterView",X$),Re.config.globalProperties.$router=vt,Object.defineProperty(Re.config.globalProperties,"$route",{enumerable:!0,get:()=>Cr(b)}),wd&&!Qe&&b.value===hl&&(Qe=!0,X(c.location).catch(St=>{}));const st={};for(const St in hl)Object.defineProperty(st,St,{get:()=>b.value[St],enumerable:!0});Re.provide(hv,vt),Re.provide(K0,qC(st)),Re.provide(yb,b);const Ye=Re.unmount;Ft.add(Re),Re.unmount=function(){Ft.delete(Re),Ft.size<1&&(C=hl,be&&be(),be=null,b.value=hl,Qe=!1,Ke=!1),Ye()}}};function xt(Re){return Re.reduce((vt,st)=>vt.then(()=>fe(st)),Promise.resolve())}return Tt}function Q$(e,n){const r=[],s=[],c=[],f=Math.max(n.matched.length,e.matched.length);for(let d=0;d<f;d++){const a=n.matched[d];a&&(e.matched.find(C=>jd(C,a))?s.push(a):r.push(a));const b=e.matched[d];b&&(n.matched.find(C=>jd(C,b))||c.push(b))}return[r,s,c]}function lc(){return _n(hv)}function t6(e){return _n(K0)}const ej="modulepreload",tj=function(e){return"/fahrrad_kilometer_tracker/"+e},ZS={},Yu=function(n,r,s){let c=Promise.resolve();if(r&&r.length>0){let d=function(C){return Promise.all(C.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),b=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));c=d(r.map(C=>{if(C=tj(C),C in ZS)return;ZS[C]=!0;const w=C.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${k}`))return;const A=document.createElement("link");if(A.rel=w?"stylesheet":ej,w||(A.as="script"),A.crossOrigin="",A.href=C,b&&A.setAttribute("nonce",b),document.head.appendChild(A),w)return new Promise((I,R)=>{A.addEventListener("load",I),A.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${C}`)))})}))}function f(d){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=d,window.dispatchEvent(a),!a.defaultPrevented)throw d}return c.then(d=>{for(const a of d||[])a.status==="rejected"&&f(a.reason);return n().catch(f)})},nj=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Yu(async()=>{const{default:s}=await Promise.resolve().then(()=>th);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)};class Y0 extends Error{constructor(n,r="FunctionsError",s){super(n),this.name=r,this.context=s}}class ij extends Y0{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class rj extends Y0{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class aj extends Y0{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var _b;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_b||(_b={}));var sj=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};class oj{constructor(n,{headers:r={},customFetch:s,region:c=_b.Any}={}){this.url=n,this.headers=r,this.region=c,this.fetch=nj(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var s;return sj(this,void 0,void 0,function*(){try{const{headers:c,method:f,body:d}=r;let a={},{region:b}=r;b||(b=this.region),b&&b!=="any"&&(a["x-region"]=b);let C;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",C=d):typeof d=="string"?(a["Content-Type"]="text/plain",C=d):typeof FormData<"u"&&d instanceof FormData?C=d:(a["Content-Type"]="application/json",C=JSON.stringify(d)));const w=yield this.fetch(`${this.url}/${n}`,{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),c),body:C}).catch(R=>{throw new ij(R)}),k=w.headers.get("x-relay-error");if(k&&k==="true")throw new rj(w);if(!w.ok)throw new aj(w);let A=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),I;return A==="application/json"?I=yield w.json():A==="application/octet-stream"?I=yield w.blob():A==="text/event-stream"?I=w:A==="multipart/form-data"?I=yield w.formData():I=yield w.text(),{data:I,error:null}}catch(c){return{data:null,error:c}}})}}function k2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lj(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),r}var Dr={},dd={},hd={},fd={},md={},pd={},uj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ud=uj();const cj=Ud.fetch,P2=Ud.fetch.bind(Ud),I2=Ud.Headers,dj=Ud.Request,hj=Ud.Response,th=Object.freeze(Object.defineProperty({__proto__:null,Headers:I2,Request:dj,Response:hj,default:P2,fetch:cj},Symbol.toStringTag,{value:"Module"})),fj=lj(th);var Hp={},KS;function A2(){if(KS)return Hp;KS=1,Object.defineProperty(Hp,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Hp.default=e,Hp}var YS;function E2(){if(YS)return pd;YS=1;var e=pd&&pd.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(pd,"__esModule",{value:!0});const n=e(fj),r=e(A2());class s{constructor(f){this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=f.headers,this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=f.shouldThrowOnError,this.signal=f.signal,this.isMaybeSingle=f.isMaybeSingle,f.fetch?this.fetch=f.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,d){return this.headers=Object.assign({},this.headers),this.headers[f]=d,this}then(f,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let b=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async C=>{var w,k,A;let I=null,R=null,F=null,B=C.status,$=C.statusText;if(C.ok){if(this.method!=="HEAD"){const te=await C.text();te===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?R=te:R=JSON.parse(te))}const q=(w=this.headers.Prefer)===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),X=(k=C.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");q&&X&&X.length>1&&(F=parseInt(X[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(I={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,F=null,B=406,$="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const q=await C.text();try{I=JSON.parse(q),Array.isArray(I)&&C.status===404&&(R=[],I=null,B=200,$="OK")}catch{C.status===404&&q===""?(B=204,$="No Content"):I={message:q}}if(I&&this.isMaybeSingle&&(!((A=I==null?void 0:I.details)===null||A===void 0)&&A.includes("0 rows"))&&(I=null,B=200,$="OK"),I&&this.shouldThrowOnError)throw new r.default(I)}return{error:I,data:R,count:F,status:B,statusText:$}});return this.shouldThrowOnError||(b=b.catch(C=>{var w,k,A;return{error:{message:`${(w=C==null?void 0:C.name)!==null&&w!==void 0?w:"FetchError"}: ${C==null?void 0:C.message}`,details:`${(k=C==null?void 0:C.stack)!==null&&k!==void 0?k:""}`,hint:"",code:`${(A=C==null?void 0:C.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),b.then(f,d)}returns(){return this}overrideTypes(){return this}}return pd.default=s,pd}var XS;function M2(){if(XS)return md;XS=1;var e=md&&md.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(md,"__esModule",{value:!0});const n=e(E2());class r extends n.default{select(c){let f=!1;const d=(c??"*").split("").map(a=>/\s/.test(a)&&!f?"":(a==='"'&&(f=!f),a)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(c,{ascending:f=!0,nullsFirst:d,foreignTable:a,referencedTable:b=a}={}){const C=b?`${b}.order`:"order",w=this.url.searchParams.get(C);return this.url.searchParams.set(C,`${w?`${w},`:""}${c}.${f?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:f,referencedTable:d=f}={}){const a=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(a,`${c}`),this}range(c,f,{foreignTable:d,referencedTable:a=d}={}){const b=typeof a>"u"?"offset":`${a}.offset`,C=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(b,`${c}`),this.url.searchParams.set(C,`${f-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:c=!1,verbose:f=!1,settings:d=!1,buffers:a=!1,wal:b=!1,format:C="text"}={}){var w;const k=[c?"analyze":null,f?"verbose":null,d?"settings":null,a?"buffers":null,b?"wal":null].filter(Boolean).join("|"),A=(w=this.headers.Accept)!==null&&w!==void 0?w:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${C}; for="${A}"; options=${k};`,C==="json"?this:this}rollback(){var c;return((c=this.headers.Prefer)!==null&&c!==void 0?c:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return md.default=r,md}var JS;function X0(){if(JS)return fd;JS=1;var e=fd&&fd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fd,"__esModule",{value:!0});const n=e(M2());class r extends n.default{eq(c,f){return this.url.searchParams.append(c,`eq.${f}`),this}neq(c,f){return this.url.searchParams.append(c,`neq.${f}`),this}gt(c,f){return this.url.searchParams.append(c,`gt.${f}`),this}gte(c,f){return this.url.searchParams.append(c,`gte.${f}`),this}lt(c,f){return this.url.searchParams.append(c,`lt.${f}`),this}lte(c,f){return this.url.searchParams.append(c,`lte.${f}`),this}like(c,f){return this.url.searchParams.append(c,`like.${f}`),this}likeAllOf(c,f){return this.url.searchParams.append(c,`like(all).{${f.join(",")}}`),this}likeAnyOf(c,f){return this.url.searchParams.append(c,`like(any).{${f.join(",")}}`),this}ilike(c,f){return this.url.searchParams.append(c,`ilike.${f}`),this}ilikeAllOf(c,f){return this.url.searchParams.append(c,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(c,f){return this.url.searchParams.append(c,`ilike(any).{${f.join(",")}}`),this}is(c,f){return this.url.searchParams.append(c,`is.${f}`),this}in(c,f){const d=Array.from(new Set(f)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(c,`in.(${d})`),this}contains(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cs.{${f.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(f)}`),this}containedBy(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cd.{${f.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(f)}`),this}rangeGt(c,f){return this.url.searchParams.append(c,`sr.${f}`),this}rangeGte(c,f){return this.url.searchParams.append(c,`nxl.${f}`),this}rangeLt(c,f){return this.url.searchParams.append(c,`sl.${f}`),this}rangeLte(c,f){return this.url.searchParams.append(c,`nxr.${f}`),this}rangeAdjacent(c,f){return this.url.searchParams.append(c,`adj.${f}`),this}overlaps(c,f){return typeof f=="string"?this.url.searchParams.append(c,`ov.${f}`):this.url.searchParams.append(c,`ov.{${f.join(",")}}`),this}textSearch(c,f,{config:d,type:a}={}){let b="";a==="plain"?b="pl":a==="phrase"?b="ph":a==="websearch"&&(b="w");const C=d===void 0?"":`(${d})`;return this.url.searchParams.append(c,`${b}fts${C}.${f}`),this}match(c){return Object.entries(c).forEach(([f,d])=>{this.url.searchParams.append(f,`eq.${d}`)}),this}not(c,f,d){return this.url.searchParams.append(c,`not.${f}.${d}`),this}or(c,{foreignTable:f,referencedTable:d=f}={}){const a=d?`${d}.or`:"or";return this.url.searchParams.append(a,`(${c})`),this}filter(c,f,d){return this.url.searchParams.append(c,`${f}.${d}`),this}}return fd.default=r,fd}var QS;function D2(){if(QS)return hd;QS=1;var e=hd&&hd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hd,"__esModule",{value:!0});const n=e(X0());class r{constructor(c,{headers:f={},schema:d,fetch:a}){this.url=c,this.headers=f,this.schema=d,this.fetch=a}select(c,{head:f=!1,count:d}={}){const a=f?"HEAD":"GET";let b=!1;const C=(c??"*").split("").map(w=>/\s/.test(w)&&!b?"":(w==='"'&&(b=!b),w)).join("");return this.url.searchParams.set("select",C),d&&(this.headers.Prefer=`count=${d}`),new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(c,{count:f,defaultToNull:d=!0}={}){const a="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),f&&b.push(`count=${f}`),d||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(c)){const C=c.reduce((w,k)=>w.concat(Object.keys(k)),[]);if(C.length>0){const w=[...new Set(C)].map(k=>`"${k}"`);this.url.searchParams.set("columns",w.join(","))}}return new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}upsert(c,{onConflict:f,ignoreDuplicates:d=!1,count:a,defaultToNull:b=!0}={}){const C="POST",w=[`resolution=${d?"ignore":"merge"}-duplicates`];if(f!==void 0&&this.url.searchParams.set("on_conflict",f),this.headers.Prefer&&w.push(this.headers.Prefer),a&&w.push(`count=${a}`),b||w.push("missing=default"),this.headers.Prefer=w.join(","),Array.isArray(c)){const k=c.reduce((A,I)=>A.concat(Object.keys(I)),[]);if(k.length>0){const A=[...new Set(k)].map(I=>`"${I}"`);this.url.searchParams.set("columns",A.join(","))}}return new n.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}update(c,{count:f}={}){const d="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),f&&a.push(`count=${f}`),this.headers.Prefer=a.join(","),new n.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}delete({count:c}={}){const f="DELETE",d=[];return c&&d.push(`count=${c}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return hd.default=r,hd}var _f={},bf={},eC;function mj(){return eC||(eC=1,Object.defineProperty(bf,"__esModule",{value:!0}),bf.version=void 0,bf.version="0.0.0-automated"),bf}var tC;function pj(){if(tC)return _f;tC=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.DEFAULT_HEADERS=void 0;const e=mj();return _f.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},_f}var nC;function gj(){if(nC)return dd;nC=1;var e=dd&&dd.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(dd,"__esModule",{value:!0});const n=e(D2()),r=e(X0()),s=pj();class c{constructor(d,{headers:a={},schema:b,fetch:C}={}){this.url=d,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),a),this.schemaName=b,this.fetch=C}from(d){const a=new URL(`${this.url}/${d}`);return new n.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new c(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,a={},{head:b=!1,get:C=!1,count:w}={}){let k;const A=new URL(`${this.url}/rpc/${d}`);let I;b||C?(k=b?"HEAD":"GET",Object.entries(a).filter(([F,B])=>B!==void 0).map(([F,B])=>[F,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([F,B])=>{A.searchParams.append(F,B)})):(k="POST",I=a);const R=Object.assign({},this.headers);return w&&(R.Prefer=`count=${w}`),new r.default({method:k,url:A,headers:R,schema:this.schemaName,body:I,fetch:this.fetch,allowEmpty:!1})}}return dd.default=c,dd}var iC;function vj(){if(iC)return Dr;iC=1;var e=Dr&&Dr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.PostgrestError=Dr.PostgrestBuilder=Dr.PostgrestTransformBuilder=Dr.PostgrestFilterBuilder=Dr.PostgrestQueryBuilder=Dr.PostgrestClient=void 0;const n=e(gj());Dr.PostgrestClient=n.default;const r=e(D2());Dr.PostgrestQueryBuilder=r.default;const s=e(X0());Dr.PostgrestFilterBuilder=s.default;const c=e(M2());Dr.PostgrestTransformBuilder=c.default;const f=e(E2());Dr.PostgrestBuilder=f.default;const d=e(A2());return Dr.PostgrestError=d.default,Dr.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:f.default,PostgrestError:d.default},Dr}var yj=vj();const _j=k2(yj),{PostgrestClient:bj,PostgrestQueryBuilder:n6,PostgrestFilterBuilder:i6,PostgrestTransformBuilder:r6,PostgrestBuilder:a6,PostgrestError:s6}=_j;let bb;typeof window>"u"?bb=require("ws"):bb=window.WebSocket;const xj="2.11.10",wj={"X-Client-Info":`realtime-js/${xj}`},Sj="1.0.0",R2=1e4,Cj=1e3;var Md;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Md||(Md={}));var ma;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ma||(ma={}));var ms;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ms||(ms={}));var xb;(function(e){e.websocket="websocket"})(xb||(xb={}));var Lu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Lu||(Lu={}));class Tj{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),s=new TextDecoder;return this._decodeBroadcast(n,r,s)}_decodeBroadcast(n,r,s){const c=r.getUint8(1),f=r.getUint8(2);let d=this.HEADER_LENGTH+2;const a=s.decode(n.slice(d,d+c));d=d+c;const b=s.decode(n.slice(d,d+f));d=d+f;const C=JSON.parse(s.decode(n.slice(d,n.byteLength)));return{ref:null,topic:a,event:b,payload:C}}}class L2{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ki;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ki||(ki={}));const rC=(e,n,r={})=>{var s;const c=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(n).reduce((f,d)=>(f[d]=kj(d,e,n,c),f),{})},kj=(e,n,r,s)=>{const c=n.find(a=>a.name===e),f=c==null?void 0:c.type,d=r[e];return f&&!s.includes(f)?z2(f,d):wb(d)},z2=(e,n)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Ej(n,r)}switch(e){case ki.bool:return Pj(n);case ki.float4:case ki.float8:case ki.int2:case ki.int4:case ki.int8:case ki.numeric:case ki.oid:return Ij(n);case ki.json:case ki.jsonb:return Aj(n);case ki.timestamp:return Mj(n);case ki.abstime:case ki.date:case ki.daterange:case ki.int4range:case ki.int8range:case ki.money:case ki.reltime:case ki.text:case ki.time:case ki.timestamptz:case ki.timetz:case ki.tsrange:case ki.tstzrange:return wb(n);default:return wb(n)}},wb=e=>e,Pj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ij=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},Aj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.log(`JSON parse error: ${n}`),e}return e},Ej=(e,n)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let f;const d=e.slice(1,r);try{f=JSON.parse("["+d+"]")}catch{f=d?d.split(","):[]}return f.map(a=>z2(n,a))}return e},Mj=e=>typeof e=="string"?e.replace(" ","T"):e,B2=e=>{let n=e;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class a_{constructor(n,r,s={},c=R2){this.channel=n,this.event=r,this.payload=s,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var s;return this._hasReceived(n)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var aC;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(aC||(aC={}));class Lf{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},c=>{const{onJoin:f,onLeave:d,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lf.syncState(this.state,c,f,d),this.pendingDiffs.forEach(b=>{this.state=Lf.syncDiff(this.state,b,f,d)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},c=>{const{onJoin:f,onLeave:d,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Lf.syncDiff(this.state,c,f,d),a())}),this.onJoin((c,f,d)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:f,newPresences:d})}),this.onLeave((c,f,d)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:f,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,s,c){const f=this.cloneDeep(n),d=this.transformState(r),a={},b={};return this.map(f,(C,w)=>{d[C]||(b[C]=w)}),this.map(d,(C,w)=>{const k=f[C];if(k){const A=w.map(B=>B.presence_ref),I=k.map(B=>B.presence_ref),R=w.filter(B=>I.indexOf(B.presence_ref)<0),F=k.filter(B=>A.indexOf(B.presence_ref)<0);R.length>0&&(a[C]=R),F.length>0&&(b[C]=F)}else a[C]=w}),this.syncDiff(f,{joins:a,leaves:b},s,c)}static syncDiff(n,r,s,c){const{joins:f,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),c||(c=()=>{}),this.map(f,(a,b)=>{var C;const w=(C=n[a])!==null&&C!==void 0?C:[];if(n[a]=this.cloneDeep(b),w.length>0){const k=n[a].map(I=>I.presence_ref),A=w.filter(I=>k.indexOf(I.presence_ref)<0);n[a].unshift(...A)}s(a,w,b)}),this.map(d,(a,b)=>{let C=n[a];if(!C)return;const w=b.map(k=>k.presence_ref);C=C.filter(k=>w.indexOf(k.presence_ref)<0),n[a]=C,c(a,C,b),C.length===0&&delete n[a]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(s=>r(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,s)=>{const c=n[s];return"metas"in c?r[s]=c.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):r[s]=c,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sC;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(sC||(sC={}));var oC;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(oC||(oC={}));var yo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yo||(yo={}));class J0{constructor(n,r={config:{}},s){this.topic=n,this.params=r,this.socket=s,this.bindings={},this.state=ma.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new a_(this,ms.join,this.params,this.timeout),this.rejoinTimer=new L2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ma.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ma.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ma.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ma.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ms.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Lf(this),this.broadcastEndpointURL=B2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,r=this.timeout){var s,c;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:f,presence:d,private:a}}=this.params;this._onError(w=>n==null?void 0:n(yo.CHANNEL_ERROR,w)),this._onClose(()=>n==null?void 0:n(yo.CLOSED));const b={},C={broadcast:f,presence:d,postgres_changes:(c=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&c!==void 0?c:[],private:a};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:C},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var k;if(this.socket.setAuth(),w===void 0){n==null||n(yo.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,I=(k=A==null?void 0:A.length)!==null&&k!==void 0?k:0,R=[];for(let F=0;F<I;F++){const B=A[F],{filter:{event:$,schema:O,table:q,filter:X}}=B,te=w&&w[F];if(te&&te.event===$&&te.schema===O&&te.table===q&&te.filter===X)R.push(Object.assign(Object.assign({},B),{id:te.id}));else{this.unsubscribe(),this.state=ma.errored,n==null||n(yo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,n&&n(yo.SUBSCRIBED);return}}).receive("error",w=>{this.state=ma.errored,n==null||n(yo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(yo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,s){return this._on(n,r,s)}async send(n,r={}){var s,c;if(!this._canPush()&&n.type==="broadcast"){const{event:f,payload:d}=n,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:d,private:this.private}]})};try{const C=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((c=C.body)===null||c===void 0?void 0:c.cancel()),C.ok?"ok":"error"}catch(C){return C.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var d,a,b;const C=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((b=(a=(d=this.params)===null||d===void 0?void 0:d.config)===null||a===void 0?void 0:a.broadcast)===null||b===void 0)&&b.ack)&&f("ok"),C.receive("ok",()=>f("ok")),C.receive("error",()=>f("error")),C.receive("timeout",()=>f("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ma.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ms.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const c=new a_(this,ms.leave,{},n);c.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),c.send(),this._canPush()||c.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(n,r,s){const c=new AbortController,f=setTimeout(()=>c.abort(),s),d=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(f),d}_push(n,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new a_(this,n,r,s);return this._canPush()?c.send():(c.startTimeout(),this.pushBuffer.push(c)),c}_onMessage(n,r,s){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,s){var c,f;const d=n.toLocaleLowerCase(),{close:a,error:b,leave:C,join:w}=ms;if(s&&[a,b,C,w].indexOf(d)>=0&&s!==this._joinRef())return;let A=this._onMessage(d,r,s);if(r&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(I=>{var R,F,B;return((R=I.filter)===null||R===void 0?void 0:R.event)==="*"||((B=(F=I.filter)===null||F===void 0?void 0:F.event)===null||B===void 0?void 0:B.toLocaleLowerCase())===d}).map(I=>I.callback(A,s)):(f=this.bindings[d])===null||f===void 0||f.filter(I=>{var R,F,B,$,O,q;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in I){const X=I.id,te=(R=I.filter)===null||R===void 0?void 0:R.event;return X&&((F=r.ids)===null||F===void 0?void 0:F.includes(X))&&(te==="*"||(te==null?void 0:te.toLocaleLowerCase())===((B=r.data)===null||B===void 0?void 0:B.type.toLocaleLowerCase()))}else{const X=(O=($=I==null?void 0:I.filter)===null||$===void 0?void 0:$.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return X==="*"||X===((q=r==null?void 0:r.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===d}).map(I=>{if(typeof A=="object"&&"ids"in A){const R=A.data,{schema:F,table:B,commit_timestamp:$,type:O,errors:q}=R;A=Object.assign(Object.assign({},{schema:F,table:B,commit_timestamp:$,eventType:O,new:{},old:{},errors:q}),this._getPayloadRecords(R))}I.callback(A,s)})}_isClosed(){return this.state===ma.closed}_isJoined(){return this.state===ma.joined}_isJoining(){return this.state===ma.joining}_isLeaving(){return this.state===ma.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,s){const c=n.toLocaleLowerCase(),f={type:c,filter:r,callback:s};return this.bindings[c]?this.bindings[c].push(f):this.bindings[c]=[f],this}_off(n,r){const s=n.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(c=>{var f;return!(((f=c.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===s&&J0.isEqual(c.filter,r))}),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const s in n)if(n[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ms.close,{},n)}_onError(n){this._on(ms.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ma.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=rC(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=rC(n.columns,n.old_record)),r}}const lC=()=>{},Dj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Rj{constructor(n,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=wj,this.params={},this.timeout=R2,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lC,this.ref=0,this.logger=lC,this.conn=null,this.sendBuffer=[],this.serializer=new Tj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=f=>{let d;return f?d=f:typeof fetch>"u"?d=(...a)=>Yu(async()=>{const{default:b}=await Promise.resolve().then(()=>th);return{default:b}},void 0).then(({default:b})=>b(...a)):d=fetch,(...a)=>d(...a)},this.endPoint=`${n}/${xb.websocket}`,this.httpEndpoint=B2(n),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const c=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(c&&(this.accessTokenValue=c,this.apiKey=c),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:f=>[1e3,2e3,5e3,1e4][f-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(f,d)=>d(JSON.stringify(f)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new L2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bb),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Lj(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sj}))}disconnect(n,r){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==n._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,s){this.logger(n,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Md.connecting:return Lu.Connecting;case Md.open:return Lu.Open;case Md.closing:return Lu.Closing;default:return Lu.Closed}}isConnected(){return this.connectionState()===Lu.Open}channel(n,r={config:{}}){const s=`realtime:${n}`,c=this.getChannels().find(f=>f.topic===s);if(c)return c;{const f=new J0(`realtime:${n}`,r,this);return this.channels.push(f),f}}push(n){const{topic:r,event:s,payload:c,ref:f}=n,d=()=>{this.encode(n,a=>{var b;(b=this.conn)===null||b===void 0||b.send(a)})};this.log("push",`${r} ${s} (${f})`,c),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){let r=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(ms.access_token,{access_token:r})}))}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(n=this.conn)===null||n===void 0||n.close(Cj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,r=>{let{topic:s,event:c,payload:f,ref:d}=r;s==="phoenix"&&c==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${f.status||""} ${s} ${c} ${d&&"("+d+")"||""}`,f),Array.from(this.channels).filter(a=>a._isMember(s)).forEach(a=>a._trigger(c,f,d)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(n=>n())}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(n))}_onConnError(n){this.log("transport",n.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(ms.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const s=n.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${n}${s}${c}`}_workerObjectUrl(n){let r;if(n)r=n;else{const s=new Blob([Dj],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class Lj{constructor(n,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Md.connecting,this.send=()=>{},this.url=null,this.url=n,this.close=s.close}}class Q0 extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Rr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class zj extends Q0{constructor(n,r){super(n),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Sb extends Q0{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var Bj=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const V2=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Yu(async()=>{const{default:s}=await Promise.resolve().then(()=>th);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},Vj=()=>Bj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yu(()=>Promise.resolve().then(()=>th),void 0)).Response:Response}),Cb=e=>{if(Array.isArray(e))return e.map(r=>Cb(r));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([r,s])=>{const c=r.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));n[c]=Cb(s)}),n};var uc=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const s_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oj=(e,n,r)=>uc(void 0,void 0,void 0,function*(){const s=yield Vj();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(c=>{n(new zj(s_(c),e.status||500))}).catch(c=>{n(new Sb(s_(c),c))}):n(new Sb(s_(e),e))}),Fj=(e,n,r,s)=>{const c={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),s&&(c.body=JSON.stringify(s)),Object.assign(Object.assign({},c),r))};function Cm(e,n,r,s,c,f){return uc(this,void 0,void 0,function*(){return new Promise((d,a)=>{e(r,Fj(n,s,c,f)).then(b=>{if(!b.ok)throw b;return s!=null&&s.noResolveJson?b:b.json()}).then(b=>d(b)).catch(b=>Oj(b,a,s))})})}function kg(e,n,r,s){return uc(this,void 0,void 0,function*(){return Cm(e,"GET",n,r,s)})}function _l(e,n,r,s,c){return uc(this,void 0,void 0,function*(){return Cm(e,"POST",n,s,c,r)})}function $j(e,n,r,s,c){return uc(this,void 0,void 0,function*(){return Cm(e,"PUT",n,s,c,r)})}function jj(e,n,r,s){return uc(this,void 0,void 0,function*(){return Cm(e,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function O2(e,n,r,s,c){return uc(this,void 0,void 0,function*(){return Cm(e,"DELETE",n,s,c,r)})}var Ta=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const Nj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uj{constructor(n,r={},s,c){this.url=n,this.headers=r,this.bucketId=s,this.fetch=V2(c)}uploadOrUpdate(n,r,s,c){return Ta(this,void 0,void 0,function*(){try{let f;const d=Object.assign(Object.assign({},uC),c);let a=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const b=d.metadata;typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),b&&f.append("metadata",this.encodeMetadata(b)),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",d.cacheControl),b&&f.append("metadata",this.encodeMetadata(b))):(f=s,a["cache-control"]=`max-age=${d.cacheControl}`,a["content-type"]=d.contentType,b&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),c!=null&&c.headers&&(a=Object.assign(Object.assign({},a),c.headers));const C=this._removeEmptyFolders(r),w=this._getFinalPath(C),k=yield this.fetch(`${this.url}/object/${w}`,Object.assign({method:n,body:f,headers:a},d!=null&&d.duplex?{duplex:d.duplex}:{})),A=yield k.json();return k.ok?{data:{path:C,id:A.Id,fullPath:A.Key},error:null}:{data:null,error:A}}catch(f){if(Rr(f))return{data:null,error:f};throw f}})}upload(n,r,s){return Ta(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,s)})}uploadToSignedUrl(n,r,s,c){return Ta(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(n),d=this._getFinalPath(f),a=new URL(this.url+`/object/upload/sign/${d}`);a.searchParams.set("token",r);try{let b;const C=Object.assign({upsert:uC.upsert},c),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(C.upsert)});typeof Blob<"u"&&s instanceof Blob?(b=new FormData,b.append("cacheControl",C.cacheControl),b.append("",s)):typeof FormData<"u"&&s instanceof FormData?(b=s,b.append("cacheControl",C.cacheControl)):(b=s,w["cache-control"]=`max-age=${C.cacheControl}`,w["content-type"]=C.contentType);const k=yield this.fetch(a.toString(),{method:"PUT",body:b,headers:w}),A=yield k.json();return k.ok?{data:{path:f,fullPath:A.Key},error:null}:{data:null,error:A}}catch(b){if(Rr(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(n,r){return Ta(this,void 0,void 0,function*(){try{let s=this._getFinalPath(n);const c=Object.assign({},this.headers);r!=null&&r.upsert&&(c["x-upsert"]="true");const f=yield _l(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:c}),d=new URL(this.url+f.url),a=d.searchParams.get("token");if(!a)throw new Q0("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:a},error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}update(n,r,s){return Ta(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,s)})}move(n,r,s){return Ta(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}copy(n,r,s){return Ta(this,void 0,void 0,function*(){try{return{data:{path:(yield _l(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}createSignedUrl(n,r,s){return Ta(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),f=yield _l(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${d}`)},{data:f,error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}createSignedUrls(n,r,s){return Ta(this,void 0,void 0,function*(){try{const c=yield _l(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),f=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${f}`):null})),error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}download(n,r){return Ta(this,void 0,void 0,function*(){const c=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=f?`?${f}`:"";try{const a=this._getFinalPath(n);return{data:yield(yield kg(this.fetch,`${this.url}/${c}/${a}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Rr(a))return{data:null,error:a};throw a}})}info(n){return Ta(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const s=yield kg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Cb(s),error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}exists(n){return Ta(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield jj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Rr(s)&&s instanceof Sb){const c=s.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:s}}throw s}})}getPublicUrl(n,r){const s=this._getFinalPath(n),c=[],f=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";f!==""&&c.push(f);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});b!==""&&c.push(b);let C=c.join("&");return C!==""&&(C=`?${C}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${C}`)}}}remove(n){return Ta(this,void 0,void 0,function*(){try{return{data:yield O2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}list(n,r,s){return Ta(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Nj),r),{prefix:n||""});return{data:yield _l(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},s),error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const Gj="2.7.1",qj={"X-Client-Info":`storage-js/${Gj}`};var gd=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};class Hj{constructor(n,r={},s){this.url=n,this.headers=Object.assign(Object.assign({},qj),r),this.fetch=V2(s)}listBuckets(){return gd(this,void 0,void 0,function*(){try{return{data:yield kg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Rr(n))return{data:null,error:n};throw n}})}getBucket(n){return gd(this,void 0,void 0,function*(){try{return{data:yield kg(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return gd(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/bucket`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}updateBucket(n,r){return gd(this,void 0,void 0,function*(){try{return{data:yield $j(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}emptyBucket(n){return gd(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}deleteBucket(n){return gd(this,void 0,void 0,function*(){try{return{data:yield O2(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}}class Wj extends Hj{constructor(n,r={},s){super(n,r,s)}from(n){return new Uj(this.url,this.headers,n,this.fetch)}}const Zj="2.50.0";let Sf="";typeof Deno<"u"?Sf="deno":typeof document<"u"?Sf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sf="react-native":Sf="node";const Kj={"X-Client-Info":`supabase-js-${Sf}/${Zj}`},Yj={headers:Kj},Xj={schema:"public"},Jj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qj={};var e4=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const t4=e=>{let n;return e?n=e:typeof fetch>"u"?n=P2:n=fetch,(...r)=>n(...r)},n4=()=>typeof Headers>"u"?I2:Headers,i4=(e,n,r)=>{const s=t4(r),c=n4();return(f,d)=>e4(void 0,void 0,void 0,function*(){var a;const b=(a=yield n())!==null&&a!==void 0?a:e;let C=new c(d==null?void 0:d.headers);return C.has("apikey")||C.set("apikey",e),C.has("Authorization")||C.set("Authorization",`Bearer ${b}`),s(f,Object.assign(Object.assign({},d),{headers:C}))})};var r4=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};function a4(e){return e.endsWith("/")?e:e+"/"}function s4(e,n){var r,s;const{db:c,auth:f,realtime:d,global:a}=e,{db:b,auth:C,realtime:w,global:k}=n,A={db:Object.assign(Object.assign({},b),c),auth:Object.assign(Object.assign({},C),f),realtime:Object.assign(Object.assign({},w),d),global:Object.assign(Object.assign(Object.assign({},k),a),{headers:Object.assign(Object.assign({},(r=k==null?void 0:k.headers)!==null&&r!==void 0?r:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>r4(this,void 0,void 0,function*(){return""})};return e.accessToken?A.accessToken=e.accessToken:delete A.accessToken,A}const F2="2.70.0",Sd=30*1e3,Tb=3,o_=Tb*Sd,o4="http://localhost:9999",l4="supabase.auth.token",u4={"X-Client-Info":`gotrue-js/${F2}`},kb="X-Supabase-Api-Version",$2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,d4=6e5;class ex extends Error{constructor(n,r,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function On(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class h4 extends ex{constructor(n,r,s){super(n,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function f4(e){return On(e)&&e.name==="AuthApiError"}class j2 extends ex{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Rl extends ex{constructor(n,r,s,c){super(n,s,c),this.name=r,this.status=s}}class ml extends Rl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function m4(e){return On(e)&&e.name==="AuthSessionMissingError"}class Wp extends Rl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zp extends Rl{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Kp extends Rl{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p4(e){return On(e)&&e.name==="AuthImplicitGrantRedirectError"}class cC extends Rl{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pb extends Rl{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function l_(e){return On(e)&&e.name==="AuthRetryableFetchError"}class dC extends Rl{constructor(n,r,s){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class zf extends Rl{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hC=` 	
\r=`.split(""),g4=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<hC.length;n+=1)e[hC[n].charCodeAt(0)]=-2;for(let n=0;n<Pg.length;n+=1)e[Pg[n].charCodeAt(0)]=n;return e})();function fC(e,n,r){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(Pg[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(Pg[s]),n.queuedBits-=6}}function N2(e,n,r){const s=g4[e];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function mC(e){const n=[],r=d=>{n.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},f=d=>{_4(d,s,r)};for(let d=0;d<e.length;d+=1)N2(e.charCodeAt(d),c,f);return n.join("")}function v4(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function y4(e,n){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const c=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}v4(s,n)}}function _4(e,n,r){if(n.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function b4(e){const n=[],r={queue:0,queuedBits:0},s=c=>{n.push(c)};for(let c=0;c<e.length;c+=1)N2(e.charCodeAt(c),r,s);return new Uint8Array(n)}function x4(e){const n=[];return y4(e,r=>n.push(r)),new Uint8Array(n)}function w4(e){const n=[],r={queue:0,queuedBits:0},s=c=>{n.push(c)};return e.forEach(c=>fC(c,r,s)),fC(null,r,s),n.join("")}function S4(e){return Math.round(Date.now()/1e3)+e}function C4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=Math.random()*16|0;return(e=="x"?n:n&3|8).toString(16)})}const fs=()=>typeof window<"u"&&typeof document<"u",Au={tested:!1,writable:!1},Bf=()=>{if(!fs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Au.tested)return Au.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Au.tested=!0,Au.writable=!0}catch{Au.tested=!0,Au.writable=!1}return Au.writable};function T4(e){const n={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,f)=>{n[f]=c})}catch{}return r.searchParams.forEach((s,c)=>{n[c]=s}),n}const U2=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Yu(async()=>{const{default:s}=await Promise.resolve().then(()=>th);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},k4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",G2=async(e,n,r)=>{await e.setItem(n,JSON.stringify(r))},Yp=async(e,n)=>{const r=await e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Xp=async(e,n)=>{await e.removeItem(n)};class fv{constructor(){this.promise=new fv.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}fv.promiseConstructor=Promise;function u_(e){const n=e.split(".");if(n.length!==3)throw new zf("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!c4.test(n[s]))throw new zf("JWT not in base64url format");return{header:JSON.parse(mC(n[0])),payload:JSON.parse(mC(n[1])),signature:b4(n[2]),raw:{header:n[0],payload:n[1]}}}async function P4(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function I4(e,n){return new Promise((s,c)=>{(async()=>{for(let f=0;f<1/0;f++)try{const d=await e(f);if(!n(f,null,d)){s(d);return}}catch(d){if(!n(f,d)){c(d);return}}})()})}function A4(e){return("0"+e.toString(16)).substr(-2)}function E4(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let c="";for(let f=0;f<56;f++)c+=r.charAt(Math.floor(Math.random()*s));return c}return crypto.getRandomValues(n),Array.from(n,A4).join("")}async function M4(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(s);return Array.from(c).map(f=>String.fromCharCode(f)).join("")}async function D4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await M4(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vd(e,n,r=!1){const s=E4();let c=s;r&&(c+="/PASSWORD_RECOVERY"),await G2(e,`${n}-code-verifier`,c);const f=await D4(s);return[f,s===f?"plain":"s256"]}const R4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function L4(e){const n=e.headers.get(kb);if(!n||!n.match(R4))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function z4(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function B4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const V4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yd(e){if(!V4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var O4=function(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(r[s[c]]=e[s[c]]);return r};const Mu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),F4=[502,503,504];async function pC(e){var n;if(!k4(e))throw new Pb(Mu(e),0);if(F4.includes(e.status))throw new Pb(Mu(e),e.status);let r;try{r=await e.json()}catch(f){throw new j2(Mu(f),f)}let s;const c=L4(e);if(c&&c.getTime()>=$2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new dC(Mu(r),e.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new ml}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((f,d)=>f&&typeof d=="string",!0))throw new dC(Mu(r),e.status,r.weak_password.reasons);throw new h4(Mu(r),e.status||500,s)}const $4=(e,n,r,s)=>{const c={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),c.body=JSON.stringify(s),Object.assign(Object.assign({},c),r))};async function Gn(e,n,r,s){var c;const f=Object.assign({},s==null?void 0:s.headers);f[kb]||(f[kb]=$2["2024-01-01"].name),s!=null&&s.jwt&&(f.Authorization=`Bearer ${s.jwt}`);const d=(c=s==null?void 0:s.query)!==null&&c!==void 0?c:{};s!=null&&s.redirectTo&&(d.redirect_to=s.redirectTo);const a=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",b=await j4(e,n,r+a,{headers:f,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(b):{data:Object.assign({},b),error:null}}async function j4(e,n,r,s,c,f){const d=$4(n,s,c,f);let a;try{a=await e(r,Object.assign({},d))}catch(b){throw console.error(b),new Pb(Mu(b),0)}if(a.ok||await pC(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(b){await pC(b)}}function go(e){var n;let r=null;q4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=S4(e.expires_in)));const s=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:r,user:s},error:null}}function gC(e){const n=go(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(n.data.weak_password=e.weak_password),n}function xl(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function N4(e){return{data:e,error:null}}function U4(e){const{action_link:n,email_otp:r,hashed_token:s,redirect_to:c,verification_type:f}=e,d=O4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:n,email_otp:r,hashed_token:s,redirect_to:c,verification_type:f},b=Object.assign({},d);return{data:{properties:a,user:b},error:null}}function G4(e){return e}function q4(e){return e.access_token&&e.refresh_token&&e.expires_in}const c_=["global","local","others"];var H4=function(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(r[s[c]]=e[s[c]]);return r};class W4{constructor({url:n="",headers:r={},fetch:s}){this.url=n,this.headers=r,this.fetch=U2(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r=c_[0]){if(c_.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${c_.join(", ")}`);try{return await Gn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,r={}){try{return await Gn(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xl})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:r}=n,s=H4(n,["options"]),c=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(c.new_email=s==null?void 0:s.newEmail,delete c.newEmail),await Gn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:U4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(On(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Gn(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:xl})}catch(r){if(On(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,s,c,f,d,a,b;try{const C={nextPage:null,lastPage:0,total:0},w=await Gn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(f=(c=n==null?void 0:n.perPage)===null||c===void 0?void 0:c.toString())!==null&&f!==void 0?f:""},xform:G4});if(w.error)throw w.error;const k=await w.json(),A=(d=w.headers.get("x-total-count"))!==null&&d!==void 0?d:0,I=(b=(a=w.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&b!==void 0?b:[];return I.length>0&&(I.forEach(R=>{const F=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(R.split(";")[1].split("=")[1]);C[`${B}Page`]=F}),C.total=parseInt(A)),{data:Object.assign(Object.assign({},k),C),error:null}}catch(C){if(On(C))return{data:{users:[]},error:C};throw C}}async getUserById(n){yd(n);try{return await Gn(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:xl})}catch(r){if(On(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){yd(n);try{return await Gn(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:xl})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,r=!1){yd(n);try{return await Gn(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:xl})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){yd(n.userId);try{const{data:r,error:s}=await Gn(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:s}}catch(r){if(On(r))return{data:null,error:r};throw r}}async _deleteFactor(n){yd(n.userId),yd(n.id);try{return{data:await Gn(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}}}const Z4={getItem:e=>Bf()?globalThis.localStorage.getItem(e):null,setItem:(e,n)=>{Bf()&&globalThis.localStorage.setItem(e,n)},removeItem:e=>{Bf()&&globalThis.localStorage.removeItem(e)}};function vC(e={}){return{getItem:n=>e[n]||null,setItem:(n,r)=>{e[n]=r},removeItem:n=>{delete e[n]}}}function K4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _d={debug:!!(globalThis&&Bf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class q2 extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Y4 extends q2{}async function X4(e,n,r){_d.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),_d.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async c=>{if(c){_d.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,c.name);try{return await r()}finally{_d.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,c.name)}}else{if(n===0)throw _d.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Y4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_d.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}K4();const J4={url:o4,storageKey:l4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:u4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yC(e,n,r){return await r()}class om{constructor(n){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=om.nextInstanceID,om.nextInstanceID+=1,this.instanceID>0&&fs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},J4),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new W4({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=U2(c.fetch),this.lock=c.lock||yC,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:fs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=X4:this.lock=yC,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?c.storage?this.storage=c.storage:Bf()?this.storage=Z4:(this.memoryStorage={},this.storage=vC(this.memoryStorage)):(this.memoryStorage={},this.storage=vC(this.memoryStorage)),fs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${F2}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=T4(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),fs()&&this.detectSessionInUrl&&s!=="none"){const{data:c,error:f}=await this._getSessionFromURL(r,s);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),p4(f)){const b=(n=f.details)===null||n===void 0?void 0:n.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:d,redirectType:a}=c;return this._debug("#_initialize()","detected session in URL",d,"redirect type",a),await this._saveSession(d),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return On(r)?{error:r}:{error:new j2("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,s,c;try{const f=await Gn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(c=n==null?void 0:n.options)===null||c===void 0?void 0:c.captchaToken}},xform:go}),{data:d,error:a}=f;if(a||!d)return{data:{user:null,session:null},error:a};const b=d.session,C=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:C,session:b},error:null}}catch(f){if(On(f))return{data:{user:null,session:null},error:f};throw f}}async signUp(n){var r,s,c;try{let f;if("email"in n){const{email:w,password:k,options:A}=n;let I=null,R=null;this.flowType==="pkce"&&([I,R]=await vd(this.storage,this.storageKey)),f=await Gn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:w,password:k,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:I,code_challenge_method:R},xform:go})}else if("phone"in n){const{phone:w,password:k,options:A}=n;f=await Gn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:k,data:(s=A==null?void 0:A.data)!==null&&s!==void 0?s:{},channel:(c=A==null?void 0:A.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:go})}else throw new Zp("You must provide either an email or phone number and a password");const{data:d,error:a}=f;if(a||!d)return{data:{user:null,session:null},error:a};const b=d.session,C=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:C,session:b},error:null}}catch(f){if(On(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithPassword(n){try{let r;if("email"in n){const{email:f,password:d,options:a}=n;r=await Gn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gC})}else if("phone"in n){const{phone:f,password:d,options:a}=n;r=await Gn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gC})}else throw new Zp("You must provide either an email or phone number and a password");const{data:s,error:c}=r;return c?{data:{user:null,session:null},error:c}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Wp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:c})}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,s,c,f;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(f=n.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;if(r==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(n){var r,s,c,f,d,a,b,C,w,k,A,I;let R,F;if("message"in n)R=n.message,F=n.signature;else{const{chain:B,wallet:$,statement:O,options:q}=n;let X;if(fs())if(typeof $=="object")X=$;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))X=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=$}const te=new URL((r=q==null?void 0:q.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in X&&X.signIn){const ae=await X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q==null?void 0:q.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),O?{statement:O}:null));let ue;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")ue=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)ue=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ue&&"signature"in ue&&(typeof ue.signedMessage=="string"||ue.signedMessage instanceof Uint8Array)&&ue.signature instanceof Uint8Array)R=typeof ue.signedMessage=="string"?ue.signedMessage:new TextDecoder().decode(ue.signedMessage),F=ue.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${te.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(c=(s=q==null?void 0:q.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((f=q==null?void 0:q.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((d=q==null?void 0:q.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((a=q==null?void 0:q.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((b=q==null?void 0:q.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((C=q==null?void 0:q.signInWithSolana)===null||C===void 0)&&C.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((k=(w=q==null?void 0:q.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||k===void 0)&&k.length?["Resources",...q.signInWithSolana.resources.map(ue=>`- ${ue}`)]:[]].join(`
`);const ae=await X.signMessage(new TextEncoder().encode(R),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");F=ae}}try{const{data:B,error:$}=await Gn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:w4(F)},!((A=n.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(I=n.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:go});if($)throw $;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new Wp}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:$})}catch(B){if(On(B))return{data:{user:null,session:null},error:B};throw B}}async _exchangeCodeForSession(n){const r=await Yp(this.storage,`${this.storageKey}-code-verifier`),[s,c]=(r??"").split("/");try{const{data:f,error:d}=await Gn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:go});if(await Xp(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!f||!f.session||!f.user?{data:{user:null,session:null,redirectType:null},error:new Wp}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign(Object.assign({},f),{redirectType:c??null}),error:d})}catch(f){if(On(f))return{data:{user:null,session:null,redirectType:null},error:f};throw f}}async signInWithIdToken(n){try{const{options:r,provider:s,token:c,access_token:f,nonce:d}=n,a=await Gn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:c,access_token:f,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:go}),{data:b,error:C}=a;return C?{data:{user:null,session:null},error:C}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Wp}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:C})}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,s,c,f,d;try{if("email"in n){const{email:a,options:b}=n;let C=null,w=null;this.flowType==="pkce"&&([C,w]=await vd(this.storage,this.storageKey));const{error:k}=await Gn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},create_user:(s=b==null?void 0:b.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:C,code_challenge_method:w},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:k}}if("phone"in n){const{phone:a,options:b}=n,{data:C,error:w}=await Gn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(c=b==null?void 0:b.data)!==null&&c!==void 0?c:{},create_user:(f=b==null?void 0:b.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(d=b==null?void 0:b.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:C==null?void 0:C.message_id},error:w}}throw new Zp("You must provide either an email or phone number.")}catch(a){if(On(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(n){var r,s;try{let c,f;"options"in n&&(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo,f=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:a}=await Gn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:f}}),redirectTo:c,xform:go});if(a)throw a;if(!d)throw new Error("An error occurred on token verification.");const b=d.session,C=d.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:C,session:b},error:null}}catch(c){if(On(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var r,s,c;try{let f=null,d=null;return this.flowType==="pkce"&&([f,d]=await vd(this.storage,this.storageKey)),await Gn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((c=n==null?void 0:n.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:d}),headers:this.headers,xform:N4})}catch(f){if(On(f))return{data:null,error:f};throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)throw s;if(!r)throw new ml;const{error:c}=await Gn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(On(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:s,type:c,options:f}=n,{error:d}=await Gn(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in n){const{phone:s,type:c,options:f}=n,{data:d,error:a}=await Gn(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:a}}throw new Zp("You must provide either an email or phone number and a type")}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Yp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<o_:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.storage.isServer){let d=this.suppressGetSessionWarning;n=new Proxy(n,{get:(b,C,w)=>(!d&&C==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,C,w))})}return{data:{session:n},error:null}}const{session:c,error:f}=await this._callRefreshToken(n.refresh_token);return f?{data:{session:null},error:f}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Gn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:xl}):await this._useSession(async r=>{var s,c,f;const{data:d,error:a}=r;if(a)throw a;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ml}:await Gn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0,xform:xl})})}catch(r){if(On(r))return m4(r)&&(await this._removeSession(),await Xp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async s=>{const{data:c,error:f}=s;if(f)throw f;if(!c.session)throw new ml;const d=c.session;let a=null,b=null;this.flowType==="pkce"&&n.email!=null&&([a,b]=await vd(this.storage,this.storageKey));const{data:C,error:w}=await Gn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:a,code_challenge_method:b}),jwt:d.access_token,xform:xl});if(w)throw w;return d.user=C.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new ml;const r=Date.now()/1e3;let s=r,c=!0,f=null;const{payload:d}=u_(n.access_token);if(d.exp&&(s=d.exp,c=s<=r),c){const{session:a,error:b}=await this._callRefreshToken(n.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!a)return{data:{user:null,session:null},error:null};f=a}else{const{data:a,error:b}=await this._getUser(n.access_token);if(b)throw b;f={access_token:n.access_token,refresh_token:n.refresh_token,user:a.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return{data:{user:f.user,session:f},error:null}}catch(r){if(On(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var s;if(!n){const{data:d,error:a}=r;if(a)throw a;n=(s=d.session)!==null&&s!==void 0?s:void 0}if(!(n!=null&&n.refresh_token))throw new ml;const{session:c,error:f}=await this._callRefreshToken(n.refresh_token);return f?{data:{user:null,session:null},error:f}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!fs())throw new Kp("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Kp(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new cC("No code detected.");const{data:O,error:q}=await this._exchangeCodeForSession(n.code);if(q)throw q;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:c,access_token:f,refresh_token:d,expires_in:a,expires_at:b,token_type:C}=n;if(!f||!a||!d||!C)throw new Kp("No session defined in URL");const w=Math.round(Date.now()/1e3),k=parseInt(a);let A=w+k;b&&(A=parseInt(b));const I=A-w;I*1e3<=Sd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${k}s`);const R=A-k;w-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,A,w):w-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,A,w);const{data:F,error:B}=await this._getUser(f);if(B)throw B;const $={provider_token:s,provider_refresh_token:c,access_token:f,expires_in:k,expires_at:A,refresh_token:d,token_type:C,user:F.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:n.type},error:null}}catch(s){if(On(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Yp(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:c,error:f}=r;if(f)return{error:f};const d=(s=c.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:a}=await this.admin.signOut(d,n);if(a&&!(f4(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return n!=="others"&&(await this._removeSession(),await Xp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=C4(),s={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async r=>{var s,c;try{const{data:{session:f},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",n,"session",f)}catch(f){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",f),console.error(f)}})}async resetPasswordForEmail(n,r={}){let s=null,c=null;this.flowType==="pkce"&&([s,c]=await vd(this.storage,this.storageKey,!0));try{return await Gn(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(f){if(On(f))return{data:null,error:f};throw f}}async getUserIdentities(){var n;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{const{data:s,error:c}=await this._useSession(async f=>{var d,a,b,C,w;const{data:k,error:A}=f;if(A)throw A;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(b=n.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Gn(this.fetch,"GET",I,{headers:this.headers,jwt:(w=(C=k.session)===null||C===void 0?void 0:C.access_token)!==null&&w!==void 0?w:void 0})});if(c)throw c;return fs()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:n.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(On(s))return{data:{provider:n.provider,url:null},error:s};throw s}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var s,c;const{data:f,error:d}=r;if(d)throw d;return await Gn(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(s=f.session)===null||s===void 0?void 0:s.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(On(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await I4(async c=>(c>0&&await P4(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await Gn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:go})),(c,f)=>{const d=200*Math.pow(2,c);return f&&l_(f)&&Date.now()+d-s<Sd})}catch(s){if(this._debug(r,"error",s),On(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",s),fs()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Yp(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const c=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<o_;if(this._debug(r,`session has${c?"":" not"} expired with margin of ${o_}s`),c){if(this.autoRefreshToken&&s.refresh_token){const{error:f}=await this._callRefreshToken(s.refresh_token);f&&(console.error(f),l_(f)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var r,s;if(!n)throw new ml;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new fv;const{data:f,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!f.session)throw new ml;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const a={session:f.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(f){if(this._debug(c,"error",f),On(f)){const d={session:null,error:f};return l_(f)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(f),f}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,r,s=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:r});const f=[],d=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(n,r)}catch(b){f.push(b)}});if(await Promise.all(d),f.length>0){for(let a=0;a<f.length;a+=1)console.error(f[a]);throw f[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await G2(this.storage,this.storageKey,n)}async _removeSession(){this._debug("#_removeSession()"),await Xp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&fs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Sd);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((s.expires_at*1e3-n)/Sd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Sd}ms, refresh threshold is ${Tb} ticks`),c<=Tb&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof q2)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,s){const c=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&c.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&c.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[f,d]=await vd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(d)}`});c.push(a.toString())}if(s!=null&&s.queryParams){const f=new URLSearchParams(s.queryParams);c.push(f.toString())}return s!=null&&s.skipBrowserRedirect&&c.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;return f?{data:null,error:f}:await Gn(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(On(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var s,c;const{data:f,error:d}=r;if(d)return{data:null,error:d};const a=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:b,error:C}=await Gn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=f==null?void 0:f.session)===null||s===void 0?void 0:s.access_token});return C?{data:null,error:C}:(n.factorType==="totp"&&(!((c=b==null?void 0:b.totp)===null||c===void 0)&&c.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(r){if(On(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;if(f)return{data:null,error:f};const{data:d,error:a}=await Gn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:a})})}catch(r){if(On(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;return f?{data:null,error:f}:await Gn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(On(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:s}=await this._challenge({factorId:n.factorId});return s?{data:null,error:s}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(n==null?void 0:n.factors)||[],c=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),f=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:c,phone:f},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,s;const{data:{session:c},error:f}=n;if(f)return{data:null,error:f};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=u_(c.access_token);let a=null;d.aal&&(a=d.aal);let b=a;((s=(r=c.user.factors)===null||r===void 0?void 0:r.filter(k=>k.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(b="aal2");const w=d.amr||[];return{data:{currentLevel:a,nextLevel:b,currentAuthenticationMethods:w},error:null}}))}async fetchJwk(n,r={keys:[]}){let s=r.keys.find(d=>d.kid===n);if(s||(s=this.jwks.keys.find(d=>d.kid===n),s&&this.jwks_cached_at+d4>Date.now()))return s;const{data:c,error:f}=await Gn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;if(!c.keys||c.keys.length===0)throw new zf("JWKS is empty");if(this.jwks=c,this.jwks_cached_at=Date.now(),s=c.keys.find(d=>d.kid===n),!s)throw new zf("No matching signing key found in JWKS");return s}async getClaims(n,r={keys:[]}){try{let s=n;if(!s){const{data:I,error:R}=await this.getSession();if(R||!I.session)return{data:null,error:R};s=I.session.access_token}const{header:c,payload:f,signature:d,raw:{header:a,payload:b}}=u_(s);if(z4(f.exp),!c.kid||c.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:I}=await this.getUser(s);if(I)throw I;return{data:{claims:f,header:c,signature:d},error:null}}const C=B4(c.alg),w=await this.fetchJwk(c.kid,r),k=await crypto.subtle.importKey("jwk",w,C,!0,["verify"]);if(!await crypto.subtle.verify(C,k,d,x4(`${a}.${b}`)))throw new zf("Invalid JWT signature");return{data:{claims:f,header:c,signature:d},error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}}}om.nextInstanceID=0;const Q4=om;class eN extends Q4{constructor(n){super(n)}}var tN=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(k){d(k)}}function b(w){try{C(s.throw(w))}catch(k){d(k)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};class nN{constructor(n,r,s){var c,f,d;if(this.supabaseUrl=n,this.supabaseKey=r,!n)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=a4(n),b=new URL(a);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const C=`sb-${b.hostname.split(".")[0]}-auth-token`,w={db:Xj,realtime:Qj,auth:Object.assign(Object.assign({},Jj),{storageKey:C}),global:Yj},k=s4(s??{},w);this.storageKey=(c=k.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(f=k.global.headers)!==null&&f!==void 0?f:{},k.accessToken?(this.accessToken=k.accessToken,this.auth=new Proxy({},{get:(A,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=k.auth)!==null&&d!==void 0?d:{},this.headers,k.global.fetch),this.fetch=i4(r,this._getAccessToken.bind(this),k.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},k.realtime)),this.rest=new bj(new URL("rest/v1",b).href,{headers:this.headers,schema:k.db.schema,fetch:this.fetch}),k.accessToken||this._listenForAuthEvents()}get functions(){return new oj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Wj(this.storageUrl.href,this.headers,this.fetch)}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},s={}){return this.rest.rpc(n,r,s)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return tN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:c,storageKey:f,flowType:d,lock:a,debug:b},C,w){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eN({url:this.authUrl.href,headers:Object.assign(Object.assign({},k),C),storageKey:f,autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:c,flowType:d,lock:a,debug:b,fetch:w,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new Rj(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(n,r,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iN=(e,n,r)=>new nN(e,n,r);console.log("Supabase URL:","https://rbtgxdcfchiewbqzzawc.supabase.co");const rN="https://rbtgxdcfchiewbqzzawc.supabase.co",aN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJidGd4ZGNmY2hpZXdicXp6YXdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3Mzk3OTMsImV4cCI6MjA2NjMxNTc5M30.-9DrWPykR5qI4jGEBtZDmTCrNHAqHoaA3t0zYrVIYSY",qn=iN(rN,aN),sN={__name:"NavBar",setup(e){const n=lc(),r=tt(!1),s=async()=>{const{data:{session:a}}=await qn.auth.getSession();r.value=!!a};zi(s),qn.auth.onAuthStateChange(()=>s());const c=async()=>{const{data:{session:a}}=await qn.auth.getSession();n.push(a?"/profile":"/login")},f=async()=>{const{error:a}=await qn.auth.signOut();a?alert("Fehler beim Logout"):n.push("/login")},d=a=>{n.push(a)};return(a,b)=>{const C=mn("v-toolbar-title"),w=mn("v-spacer"),k=mn("v-icon"),A=mn("v-btn"),I=mn("v-list-item-title"),R=mn("v-list-item"),F=mn("v-list"),B=mn("v-menu"),$=mn("v-app-bar");return vn(),er($,{app:"",color:"primary",dark:""},{default:an(()=>[G(C,{class:"cursor-pointer",onClick:c},{default:an(()=>b[3]||(b[3]=[wn("  Fahrrad App ")])),_:1,__:[3]}),r.value?(vn(),ui(qt,{key:0},[G(w),G(B,{"offset-y":""},{activator:an(({props:O})=>[G(A,lt({icon:""},O),{default:an(()=>[G(k,null,{default:an(()=>b[4]||(b[4]=[wn("mdi-menu")])),_:1,__:[4]})]),_:2},1040)]),default:an(()=>[G(F,null,{default:an(()=>[G(R,{onClick:b[0]||(b[0]=O=>d("/teams"))},{default:an(()=>[G(I,null,{default:an(()=>b[5]||(b[5]=[wn("Teams")])),_:1,__:[5]})]),_:1}),G(R,{onClick:b[1]||(b[1]=O=>d("/rides/new"))},{default:an(()=>[G(I,null,{default:an(()=>b[6]||(b[6]=[wn("Fahrt eintragen")])),_:1,__:[6]})]),_:1}),G(R,{onClick:b[2]||(b[2]=O=>d("/profile"))},{default:an(()=>[G(I,null,{default:an(()=>b[7]||(b[7]=[wn("Profil")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1}),G(A,{text:"",onClick:f,class:"ml-2",color:"white"},{default:an(()=>b[8]||(b[8]=[wn(" Logout ")])),_:1,__:[8]})],64)):Hr("",!0)]),_:1})}}},oN={__name:"App",setup(e){return(n,r)=>{const s=mn("router-view"),c=mn("v-layout"),f=mn("v-card");return vn(),ui(qt,null,[r[1]||(r[1]=wn("  ")),Z("div",null,[G(f,{class:"mx-auto"},{default:an(()=>[G(c,{class:"pa-0"},{default:an(()=>[G(sN),G(s),r[0]||(r[0]=wn("  "))]),_:1,__:[0]})]),_:1})])],64)}}},lN={class:"page-container"},uN={class:"buttons"},cN={__name:"HomePage",setup(e){const n=lc();return zi(async()=>{const{data:{session:r}}=await qn.auth.getSession();r&&n.replace("/teams")}),(r,s)=>{const c=mn("router-link");return vn(),ui("div",lN,[s[2]||(s[2]=Z("h1",null," Fahrrad Kilometer App",-1)),s[3]||(s[3]=Z("p",null,[wn(" Willkommen! Dies ist ein "),Z("strong",null,"Testprojekt"),wn(", um "),Z("strong",null,"Supabase"),wn(" auszuprobieren. Die App wurde mit "),Z("strong",null,"Vue.js"),wn(" entwickelt und dient zum Sammeln und Vergleichen von gefahrenen Fahrradkilometern. ")],-1)),Z("div",uN,[G(c,{to:"/login"},{default:an(()=>s[0]||(s[0]=[Z("button",null,"Anmelden",-1)])),_:1,__:[0]}),G(c,{to:"/register"},{default:an(()=>s[1]||(s[1]=[Z("button",null,"Registrieren",-1)])),_:1,__:[1]})])])}}},dN={class:"mt-4 text-center"},hN={__name:"LoginPage",setup(e){const n=lc(),r=tt(""),s=tt(""),c=tt("");async function f(){c.value="";const{error:a}=await qn.auth.signInWithPassword({email:r.value,password:s.value});a?c.value=a.message:n.push("/teams")}async function d(){const{error:a}=await qn.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});a&&(c.value=a.message)}return(a,b)=>{const C=mn("v-card-title"),w=mn("v-text-field"),k=mn("v-btn"),A=mn("v-form"),I=mn("v-alert"),R=mn("router-link"),F=mn("v-card-text"),B=mn("v-card"),$=mn("v-col"),O=mn("v-row"),q=mn("v-container"),X=mn("v-main");return vn(),er(X,null,{default:an(()=>[G(q,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:an(()=>[G(O,{justify:"center"},{default:an(()=>[G($,{cols:"12",sm:"8",md:"4"},{default:an(()=>[G(B,{class:"pa-4",elevation:"6"},{default:an(()=>[G(C,{class:"text-h5 text-center"},{default:an(()=>b[2]||(b[2]=[wn(" Fahrrad App  Login")])),_:1,__:[2]}),G(F,null,{default:an(()=>[G(A,{onSubmit:wl(f,["prevent"])},{default:an(()=>[G(w,{modelValue:r.value,"onUpdate:modelValue":b[0]||(b[0]=te=>r.value=te),label:"E-Mail",type:"email",required:"","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),G(w,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=te=>s.value=te),label:"Passwort",type:"password",required:"","prepend-inner-icon":"mdi-lock"},null,8,["modelValue"]),G(k,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:an(()=>b[3]||(b[3]=[wn("Anmelden")])),_:1,__:[3]})]),_:1}),G(k,{class:"mt-4",color:"black",block:"",onClick:d,"prepend-icon":"mdi-github"},{default:an(()=>b[4]||(b[4]=[wn(" Mit GitHub anmelden ")])),_:1,__:[4]}),c.value?(vn(),er(I,{key:0,type:"error",class:"mt-4",dense:"",border:"start"},{default:an(()=>[wn(Qn(c.value),1)]),_:1})):Hr("",!0),Z("div",dN,[b[6]||(b[6]=wn(" Noch kein Konto? ")),G(R,{to:"/register"},{default:an(()=>b[5]||(b[5]=[wn("Hier registrieren")])),_:1,__:[5]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},fN={key:1},mN={key:1},pN={class:"d-flex justify-space-between align-center"},gN={class:"text-h6"},vN={class:"text-right"},yN={key:1},_N={class:"text-caption"},bN={class:"text-right font-weight-bold"},xN={key:4,class:"mt-6"},wN={__name:"TeamsPage",setup(e){const n=[{title:"Rang",value:"rank"},{title:"Teamname",value:"name"},{title:"Kilometer",value:"total_km"},{title:"Mitglieder",value:"member_count"}],r=lc(),s=tt([]),c=tt(!0),f=tt(null),d=tt(null),a=tt(window.innerWidth<=900);async function b(){c.value=!0;const{data:I,error:R}=await qn.from("teams").select(`
            id,
            name,
            members:members (
                user_id
            )
        `).order("created_at",{ascending:!1});if(R){f.value=R.message,c.value=!1;return}const F=[];for(const B of I){let $=0,O=B.members?B.members.length:0;if(B.members&&B.members.length>0){const q=B.members.map(te=>te.user_id),{data:X}=await qn.from("rides").select("km").in("user_id",q);if(X)for(const te of X)$+=Number(te.km)||0}F.push({id:B.id,name:B.name,total_km:$,member_count:O})}s.value=F,c.value=!1}async function C(){const{data:{user:I}}=await qn.auth.getUser();if(!I){d.value=null;return}const{data:R}=await qn.from("members").select("team_id").eq("user_id",I.id).single();d.value=(R==null?void 0:R.team_id)||null}function w(){r.push("/create-team")}const k=ee(()=>[...s.value].sort((I,R)=>(R.total_km??0)-(I.total_km??0)));function A(){a.value=window.innerWidth<=700}return zi(()=>{b(),C(),window.addEventListener("resize",A)}),Bg(()=>{window.removeEventListener("resize",A)}),(I,R)=>{const F=mn("v-card-title"),B=mn("v-progress-circular"),$=mn("router-link"),O=mn("v-chip"),q=mn("v-data-table"),X=mn("v-card"),te=mn("v-col"),ae=mn("v-row"),ue=mn("v-btn"),ce=mn("v-alert"),fe=mn("v-card-text"),pe=mn("v-container"),_e=mn("v-main");return vn(),er(_e,null,{default:an(()=>[G(pe,{class:"page-container",fluid:""},{default:an(()=>[G(X,{class:"pa-6 mb-6",elevation:"4"},{default:an(()=>[G(F,{class:"text-h5"},{default:an(()=>R[0]||(R[0]=[wn(" Team-bersicht")])),_:1,__:[0]}),G(fe,null,{default:an(()=>[c.value?(vn(),er(B,{key:0,indeterminate:"",color:"primary",class:"ma-4"})):s.value.length===0?(vn(),ui("div",fN,"Keine Teams gefunden.")):Hr("",!0),a.value?(vn(),er(ae,{key:3,class:"mt-4",dense:""},{default:an(()=>[(vn(!0),ui(qt,null,Gb(k.value,(re,be)=>(vn(),er(te,{key:re.id,cols:"12"},{default:an(()=>[G(X,{color:re.id===d.value?"primary":"surface",class:"pa-4",elevation:"2"},{default:an(()=>[Z("div",pN,[Z("div",gN,"#"+Qn(be+1),1),Z("div",vN,[re.id===d.value?(vn(),er($,{key:0,to:"/my-team",class:"my-team-link"},{default:an(()=>[Z("strong",null,Qn(re.name),1)]),_:2},1024)):(vn(),ui("strong",yN,Qn(re.name),1)),Z("div",_N,Qn(re.member_count)+" Mitglieder ",1)]),Z("div",bN,Qn(re.total_km??0)+" km ",1)])]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1})):(vn(),er(q,{key:2,headers:n,items:k.value,class:"elevation-1 mt-4","item-value":"id","disable-pagination":"","hide-default-footer":""},{"item.name":an(({item:re})=>[Z("div",null,[re.id===d.value?(vn(),er($,{key:0,to:"/my-team",class:"my-team-link"},{default:an(()=>[Z("strong",null,Qn(re.name),1)]),_:2},1024)):(vn(),ui("strong",mN,Qn(re.name),1)),re.id===d.value?(vn(),er(O,{key:2,color:"primary",size:"small",class:"ml-2"},{default:an(()=>R[1]||(R[1]=[wn(" Mein Team ")])),_:1,__:[1]})):Hr("",!0)])]),"item.rank":an(({index:re})=>[wn(" #"+Qn(re+1),1)]),_:1},8,["items"])),d.value?Hr("",!0):(vn(),ui("div",xN,[G(ue,{color:"primary",onClick:w},{default:an(()=>R[2]||(R[2]=[wn("  Team erstellen ")])),_:1,__:[2]})])),f.value?(vn(),er(ce,{key:5,type:"error",class:"mt-4"},{default:an(()=>[wn(Qn(f.value),1)]),_:1})):Hr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},SN={class:"page-container"},CN={key:0,class:"error"},TN={__name:"CreateTeamPage",setup(e){const n=lc(),r=tt(""),s=tt(null);async function c(){const{data:{user:f}}=await qn.auth.getUser(),{data:d,error:a}=await qn.from("teams").insert([{name:r.value}]).select().single();if(a){s.value=a.message;return}const{error:b}=await qn.from("members").insert([{user_id:f.id,team_id:d.id}]);if(b){s.value=b.message;return}n.push("/teams")}return(f,d)=>(vn(),ui("div",SN,[d[2]||(d[2]=Z("h1",null," Neues Team erstellen",-1)),Z("form",{onSubmit:wl(c,["prevent"])},[ei(Z("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>r.value=a),type:"text",placeholder:"Teamname",required:""},null,512),[[Cl,r.value]]),d[1]||(d[1]=Z("button",{type:"submit"},"Team erstellen",-1))],32),s.value?(vn(),ui("p",CN,Qn(s.value),1)):Hr("",!0)]))}},kN={class:"page-container"},PN={key:0,class:"success"},IN={key:2,class:"error"},AN={__name:"RegisterPage",setup(e){const n=tt(""),r=tt(""),s=tt(""),c=tt(null),f=tt(null);lc();async function d(){var k;c.value=null,f.value=null;const{data:b,error:C}=await qn.auth.signUp({email:n.value,password:r.value,options:{emailRedirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});if(C){c.value=C.message;return}const w=(k=b.user)==null?void 0:k.id;if(w){const{error:A}=await qn.from("profiles").update({username:s.value}).eq("id",w);if(A){c.value=A.message;return}}f.value="Bitte besttige deine E-Mail-Adresse ber den Link, den wir dir geschickt haben, bevor du dich einloggst."}async function a(){const{error:b}=await qn.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});b&&(c.value=b.message)}return(b,C)=>(vn(),ui("div",kN,[C[5]||(C[5]=Z("h1",null,"Registrieren",-1)),f.value?(vn(),ui("p",PN,Qn(f.value),1)):Hr("",!0),f.value?Hr("",!0):(vn(),ui("form",{key:1,onSubmit:wl(d,["prevent"])},[ei(Z("input",{"onUpdate:modelValue":C[0]||(C[0]=w=>n.value=w),type:"email",placeholder:"E-Mail",required:""},null,512),[[Cl,n.value]]),ei(Z("input",{"onUpdate:modelValue":C[1]||(C[1]=w=>r.value=w),type:"password",placeholder:"Passwort",required:""},null,512),[[Cl,r.value]]),ei(Z("input",{"onUpdate:modelValue":C[2]||(C[2]=w=>s.value=w),type:"text",placeholder:"Benutzername",required:""},null,512),[[Cl,s.value]]),C[3]||(C[3]=Z("button",{type:"submit"},"Registrieren",-1))],32)),Z("button",{class:"oauth-btn",onClick:a,type:"button"},C[4]||(C[4]=[Z("span",{style:{"margin-right":"0.5em"}},"",-1),wn(" Mit GitHub registrieren ")])),c.value?(vn(),ui("p",IN,Qn(c.value),1)):Hr("",!0)]))}},EN={key:1},MN={key:2},DN={key:4},RN={__name:"ProfilePage",setup(e){const n=tt(null),r=tt("Kein Team"),s=tt(null),c=tt([]),f=tt(!0),d=tt(null),a=tt(null),b=tt(""),C=tt(""),w=tt(""),k=async()=>{const{data:{user:$},error:O}=await qn.auth.getUser();if(O||!$){s.value="Nicht eingeloggt.";return}f.value=$.email_confirmed_at!==null;const{data:q,error:X}=await qn.from("profiles").select("username").eq("id",$.id).single();if(X){s.value="Profil nicht gefunden.";return}n.value=q,b.value=q.username;const{data:te}=await qn.from("members").select("team_id").eq("user_id",$.id).single();if(te&&te.team_id){d.value=te.id;const{data:ue}=await qn.from("teams").select("name").eq("id",te.team_id).single();ue&&ue.name?r.value=ue.name:r.value="Kein Team"}else d.value=null,r.value="Kein Team";const{data:ae}=await qn.from("rides").select("id, created_at, km").eq("user_id",$.id).order("created_at",{ascending:!1});c.value=ae||[]};async function A(){if(!d.value)return;const{error:$}=await qn.from("members").delete().eq("id",d.value);$?s.value="Fehler beim Verlassen des Teams: "+$.message:(r.value="Kein Team",d.value=null)}function I($){const O=new Date($),q=String(O.getDate()).padStart(2,"0"),X=String(O.getMonth()+1).padStart(2,"0"),te=O.getFullYear(),ae=String(O.getHours()).padStart(2,"0"),ue=String(O.getMinutes()).padStart(2,"0");return`${q}.${X}.${te} ${ae}:${ue}`}async function R(){s.value=null,a.value=null;const{data:{user:$}}=await qn.auth.getUser(),{error:O}=await qn.functions.invoke("delete-user",{body:{userId:$.id}});O?s.value="Fehler beim Lschen des Accounts: "+O.message:(a.value="Account gelscht.",await qn.auth.signOut(),window.location.href="/login")}function F(){confirm("Bist du sicher, dass du deinen Account unwiderruflich lschen mchtest?")&&R()}async function B(){C.value="",w.value="";const{data:{user:$}}=await qn.auth.getUser();if(!$){C.value="Nicht eingeloggt.";return}if(!b.value||b.value.length<3){C.value="Benutzername zu kurz.";return}const{error:O}=await qn.from("profiles").update({username:b.value}).eq("id",$.id);O?C.value="Fehler beim Speichern: "+O.message:(w.value="Benutzername gespeichert!",n.value.username=b.value)}return zi(k),($,O)=>{const q=mn("v-card-title"),X=mn("v-alert"),te=mn("v-progress-circular"),ae=mn("v-text-field"),ue=mn("v-btn"),ce=mn("v-col"),fe=mn("v-row"),pe=mn("v-list-item-title"),_e=mn("v-list-item-content"),re=mn("v-list-item"),be=mn("v-list"),je=mn("v-card-text"),Be=mn("v-card"),Fe=mn("v-container"),Ke=mn("v-main");return vn(),er(Ke,null,{default:an(()=>[G(Fe,{class:"page-container",fluid:""},{default:an(()=>[G(Be,{class:"pa-6",elevation:"4"},{default:an(()=>[G(q,{class:"text-h5"},{default:an(()=>O[1]||(O[1]=[wn(" Profil")])),_:1,__:[1]}),G(je,null,{default:an(()=>[s.value?(vn(),er(X,{key:0,type:"error",dense:"",class:"mb-4"},{default:an(()=>[wn(Qn(s.value),1)]),_:1})):n.value?(vn(),ui("div",MN,[f.value?Hr("",!0):(vn(),er(X,{key:0,type:"warning",dense:"",class:"mb-4"},{default:an(()=>O[3]||(O[3]=[wn(" Bitte besttige deine E-Mail-Adresse, um alle Funktionen nutzen zu knnen. ")])),_:1,__:[3]})),G(fe,{class:"mb-4"},{default:an(()=>[G(ce,{cols:"12",md:"8"},{default:an(()=>[G(ae,{modelValue:b.value,"onUpdate:modelValue":O[0]||(O[0]=ft=>b.value=ft),label:"Benutzername",variant:"outlined"},null,8,["modelValue"]),G(ue,{color:"primary",onClick:B},{default:an(()=>O[4]||(O[4]=[wn("Speichern")])),_:1,__:[4]})]),_:1})]),_:1}),w.value?(vn(),er(X,{key:1,type:"success",dense:"",class:"mb-2"},{default:an(()=>[wn(Qn(w.value),1)]),_:1})):Hr("",!0),C.value?(vn(),er(X,{key:2,type:"error",dense:"",class:"mb-2"},{default:an(()=>[wn(Qn(C.value),1)]),_:1})):Hr("",!0),Z("p",null,[O[6]||(O[6]=Z("strong",null,"Team:",-1)),wn(" "+Qn(r.value)+" ",1),r.value!=="Kein Team"?(vn(),er(ue,{key:0,color:"warning",class:"ml-4",onClick:A},{default:an(()=>O[5]||(O[5]=[wn(" Team verlassen ")])),_:1,__:[5]})):Hr("",!0)]),O[8]||(O[8]=Z("h2",{class:"mt-6 mb-4"},"Deine Fahrten",-1)),c.value.length>0?(vn(),er(be,{key:3,class:"mb-4"},{default:an(()=>[(vn(!0),ui(qt,null,Gb(c.value,ft=>(vn(),er(re,{key:ft.id},{default:an(()=>[G(_e,null,{default:an(()=>[G(pe,null,{default:an(()=>[wn(Qn(I(ft.created_at))+": "+Qn(ft.km)+" km ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(vn(),ui("p",DN,"Keine Fahrten gefunden.")),G(ue,{color:"error",class:"mt-6",onClick:F},{default:an(()=>O[7]||(O[7]=[wn(" Account lschen ")])),_:1,__:[7]})])):(vn(),ui("div",EN,[G(te,{indeterminate:"",color:"primary"}),O[2]||(O[2]=Z("span",{class:"ml-2"},"Lade Profil...",-1))]))]),_:1})]),_:1})]),_:1})]),_:1})}}};var ag={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */var LN=ag.exports,_C;function zN(){return _C||(_C=1,function(e,n){(function(r,s){e.exports=s()})(LN,function(){var r={},s={};function c(d,a,b){if(s[d]=b,d==="index"){var C="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",w={};return s.shared(w),s.index(r,w),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),r}}c("shared",["exports"],function(d){function a(u,i,l,h){return new(l||(l=Promise))(function(g,_){function x(D){try{E(h.next(D))}catch(z){_(z)}}function T(D){try{E(h.throw(D))}catch(z){_(z)}}function E(D){var z;D.done?g(D.value):(z=D.value,z instanceof l?z:new l(function(j){j(z)})).then(x,T)}E((h=h.apply(u,i||[])).next())})}function b(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var C,w;function k(){if(w)return C;function u(i,l){this.x=i,this.y=l}return w=1,C=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,l){return this.clone()._rotateAround(i,l)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var l=i.x-this.x,h=i.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,l){return Math.atan2(this.x*l-this.y*i,this.x*i+this.y*l)},_matMult:function(i){var l=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=l,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var l=Math.cos(i),h=Math.sin(i),g=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=g,this},_rotateAround:function(i,l){var h=Math.cos(i),g=Math.sin(i),_=l.y+g*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-g*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(i){return i instanceof u?i:Array.isArray(i)?new u(i[0],i[1]):i},C}typeof SuppressedError=="function"&&SuppressedError;var A,I,R=b(k()),F=function(){if(I)return A;function u(i,l,h,g){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=h,this.p2y=g}return I=1,A=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,g=0;g<8;g++){var _=this.sampleCurveX(h)-i;if(Math.abs(_)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var T=0,E=1;for(h=i,g=0;g<20&&(_=this.sampleCurveX(h),!(Math.abs(_-i)<l));g++)i>_?T=h:E=h,h=.5*(E-T)+T;return h},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},A}(),B=b(F);let $,O;function q(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function X(){if(O==null&&(O=!1,q())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){const g=4*h;i.fillStyle=`rgb(${g},${g+1},${g+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){O=!0;break}}}return O||!1}var te=1e-6,ae=typeof Float32Array<"u"?Float32Array:Array;function ue(){var u=new ae(9);return ae!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function ce(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function fe(){var u=new ae(3);return ae!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function pe(u){return Math.hypot(u[0],u[1],u[2])}function _e(u,i,l){var h=new ae(3);return h[0]=u,h[1]=i,h[2]=l,h}function re(u,i,l){return u[0]=i[0]+l[0],u[1]=i[1]+l[1],u[2]=i[2]+l[2],u}function be(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u}function je(u,i,l){var h=i[0],g=i[1],_=i[2],x=l[0],T=l[1],E=l[2];return u[0]=g*E-_*T,u[1]=_*x-h*E,u[2]=h*T-g*x,u}Math.hypot||(Math.hypot=function(){for(var u=0,i=arguments.length;i--;)u+=arguments[i]*arguments[i];return Math.sqrt(u)});var Be,Fe=pe;function Ke(u,i,l){var h=i[0],g=i[1],_=i[2],x=i[3];return u[0]=l[0]*h+l[4]*g+l[8]*_+l[12]*x,u[1]=l[1]*h+l[5]*g+l[9]*_+l[13]*x,u[2]=l[2]*h+l[6]*g+l[10]*_+l[14]*x,u[3]=l[3]*h+l[7]*g+l[11]*_+l[15]*x,u}function ft(){var u=new ae(4);return ae!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function mt(u,i,l,h){var g=.5*Math.PI/180;i*=g,l*=g,h*=g;var _=Math.sin(i),x=Math.cos(i),T=Math.sin(l),E=Math.cos(l),D=Math.sin(h),z=Math.cos(h);return u[0]=_*E*z-x*T*D,u[1]=x*T*z+_*E*D,u[2]=x*E*D-_*T*z,u[3]=x*E*z+_*T*D,u}function ze(){var u=new ae(2);return ae!=Float32Array&&(u[0]=0,u[1]=0),u}function Se(u,i){var l=new ae(2);return l[0]=u,l[1]=i,l}fe(),Be=new ae(4),ae!=Float32Array&&(Be[0]=0,Be[1]=0,Be[2]=0,Be[3]=0),fe(),_e(1,0,0),_e(0,1,0),ft(),ft(),ue(),ze();const Me=8192;function Qe(u,i,l){return i*(Me/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}function Ft(u,i){return(u%i+i)%i}function Tt(u,i,l){return u*(1-l)+i*l}function xt(u){if(u<=0)return 0;if(u>=1)return 1;const i=u*u,l=i*u;return 4*(u<.5?l:3*(u-i)+l-.75)}function Re(u,i,l,h){const g=new B(u,i,l,h);return _=>g.solve(_)}const vt=Re(.25,.1,.25,1);function st(u,i,l){return Math.min(l,Math.max(i,u))}function Ye(u,i,l){const h=l-i,g=((u-i)%h+h)%h+i;return g===i?l:g}function St(u,...i){for(const l of i)for(const h in l)u[h]=l[h];return u}let ie=1;function le(u,i,l){const h={};for(const g in u)h[g]=i.call(this,u[g],g,u);return h}function Le(u,i,l){const h={};for(const g in u)i.call(this,u[g],g,u)&&(h[g]=u[g]);return h}function Ze(u){return Array.isArray(u)?u.map(Ze):typeof u=="object"&&u?le(u,Ze):u}const ut={};function Je(u){ut[u]||(typeof console<"u"&&console.warn(u),ut[u]=!0)}function kt(u,i,l){return(l.y-u.y)*(i.x-u.x)>(i.y-u.y)*(l.x-u.x)}function ct(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Dt=null;function Pt(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ut(u,i,l,h,g){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(u,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const T=x.startsWith("BGR"),E=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(E,function(D,z,j,H,Y){const J=4*Math.max(1,0),ne=(Math.max(0,j)-j)*H*4+J,me=4*H,xe=Math.max(0,z),Ne=Math.max(0,j);return{rect:{x:xe,y:Ne,width:Math.min(D.width,z+H)-xe,height:Math.min(D.height,j+Y)-Ne},layout:[{offset:ne,stride:me}]}}(u,i,l,h,g)),T)for(let D=0;D<E.length;D+=4){const z=E[D];E[D]=E[D+2],E[D+2]=z}return E}finally{_.close()}})}let Jt,ln;function gn(u,i,l,h){return u.addEventListener(i,l,h),{unsubscribe:()=>{u.removeEventListener(i,l,h)}}}function En(u){return u*Math.PI/180}function Rn(u){return u/Math.PI*180}const Ni={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Yi={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ui="AbortError";function qe(){return new Error(Ui)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function oe(u){return se.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const he="global-dispatcher";class Ce extends Error{constructor(i,l,h,g){super(`AJAXError: ${l} (${i}): ${h}`),this.status=i,this.statusText=l,this.url=h,this.body=g}}const $e=()=>ct(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,We=function(u,i){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const h=oe(u.url);if(h)return h(u,i);if(ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:he},i)}if(!(/^file:/.test(l=u.url)||/^file:/.test($e())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return a(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:$e(),signal:g.signal});let x,T;h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{x=yield fetch(_)}catch(D){throw new Ce(0,D.message,h.url,new Blob)}if(!x.ok){const D=yield x.blob();throw new Ce(x.status,x.statusText,h.url,D)}T=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const E=yield T;if(g.signal.aborted)throw qe();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(u,i);if(ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:he},i)}var l;return function(h,g){return new Promise((_,x)=>{var T;const E=new XMLHttpRequest;E.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(E.responseType="arraybuffer");for(const D in h.headers)E.setRequestHeader(D,h.headers[D]);h.type==="json"&&(E.responseType="text",!((T=h.headers)===null||T===void 0)&&T.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=h.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!g.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let D=E.response;if(h.type==="json")try{D=JSON.parse(E.response)}catch(z){return void x(z)}_({data:D,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const D=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new Ce(E.status,E.statusText,h.url,D))}},g.signal.addEventListener("abort",()=>{E.abort(),x(qe())}),E.send(h.body)})}(u,i)};function rt(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const i=new URL(u),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function He(u,i,l){l[u]&&l[u].indexOf(i)!==-1||(l[u]=l[u]||[],l[u].push(i))}function bt(u,i,l){if(l&&l[u]){const h=l[u].indexOf(i);h!==-1&&l[u].splice(h,1)}}class pt{constructor(i,l={}){St(this,l),this.type=i}}class Xe extends pt{constructor(i,l={}){super("error",St({error:i},l))}}class Ct{on(i,l){return this._listeners=this._listeners||{},He(i,l,this._listeners),{unsubscribe:()=>{this.off(i,l)}}}off(i,l){return bt(i,l,this._listeners),bt(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},He(i,l,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,l){typeof i=="string"&&(i=new pt(i,l||{}));const h=i.type;if(this.listens(h)){i.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of g)T.call(this,i);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of _)bt(h,T,this._oneTimeListeners),T.call(this,i);const x=this._eventedParent;x&&(St(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Xe&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Gt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function cn(u,i){const l={};for(const h in u)h!=="ref"&&(l[h]=u[h]);return Gt.forEach(h=>{h in i&&(l[h]=i[h])}),l}function Zt(u,i){if(Array.isArray(u)){if(!Array.isArray(i)||u.length!==i.length)return!1;for(let l=0;l<u.length;l++)if(!Zt(u[l],i[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&i!==null){if(typeof i!="object"||Object.keys(u).length!==Object.keys(i).length)return!1;for(const l in u)if(!Zt(u[l],i[l]))return!1;return!0}return u===i}function rn(u,i){u.push(i)}function pn(u,i,l){rn(l,{command:"addSource",args:[u,i[u]]})}function ci(u,i,l){rn(i,{command:"removeSource",args:[u]}),l[u]=!0}function Jn(u,i,l,h){ci(u,l,h),pn(u,i,l)}function Hn(u,i,l){let h;for(h in u[l])if(Object.prototype.hasOwnProperty.call(u[l],h)&&h!=="data"&&!Zt(u[l][h],i[l][h]))return!1;for(h in i[l])if(Object.prototype.hasOwnProperty.call(i[l],h)&&h!=="data"&&!Zt(u[l][h],i[l][h]))return!1;return!0}function fn(u,i,l,h,g,_){u=u||{},i=i||{};for(const x in u)Object.prototype.hasOwnProperty.call(u,x)&&(Zt(u[x],i[x])||l.push({command:_,args:[h,x,i[x],g]}));for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&!Object.prototype.hasOwnProperty.call(u,x)&&(Zt(u[x],i[x])||l.push({command:_,args:[h,x,i[x],g]}))}function $n(u){return u.id}function rr(u,i){return u[i.id]=i,u}class Vt{constructor(i,l,h,g){this.message=(i?`${i}: `:"")+h,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function pr(u,...i){for(const l of i)for(const h in l)u[h]=l[h];return u}class _i extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class Ss{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[h,g]of l)this.bindings[h]=g}concat(i){return new Ss(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ys={kind:"null"},jt={kind:"number"},Pn={kind:"string"},In={kind:"boolean"},oa={kind:"color"},cc={kind:"projectionDefinition"},Ua={kind:"object"},An={kind:"value"},ts={kind:"collator"},Xs={kind:"formatted"},Fi={kind:"padding"},Ll={kind:"colorArray"},zl={kind:"numberArray"},ns={kind:"resolvedImage"},Bl={kind:"variableAnchorOffsetCollection"};function la(u,i){return{kind:"array",itemType:u,N:i}}function bi(u){if(u.kind==="array"){const i=bi(u.itemType);return typeof u.N=="number"?`array<${i}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${i}>`}return u.kind}const Tm=[Ys,jt,Pn,In,oa,cc,Xs,Ua,la(An),Fi,zl,Ll,ns,Bl];function Vl(u,i){if(i.kind==="error")return null;if(u.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Vl(u.itemType,i.itemType))&&(typeof u.N!="number"||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if(u.kind==="value"){for(const l of Tm)if(!Vl(l,i))return null}}return`Expected ${bi(u)} but found ${bi(i)} instead.`}function dc(u,i){return i.some(l=>l.kind===u.kind)}function Js(u,i){return i.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}function Cs(u,i){return u.kind==="array"&&i.kind==="array"?u.itemType.kind===i.itemType.kind&&typeof u.N=="number":u.kind===i.kind}const km=.96422,Pm=.82521,Im=4/29,Ro=6/29,Am=3*Ro*Ro,Em=Ro*Ro*Ro,Ol=Math.PI/180,mv=180/Math.PI;function Mm(u){return(u%=360)<0&&(u+=360),u}function Lo([u,i,l,h]){let g,_;const x=ih((.2225045*(u=nh(u))+.7168786*(i=nh(i))+.0606169*(l=nh(l)))/1);u===i&&i===l?g=_=x:(g=ih((.4360747*u+.3850649*i+.1430804*l)/km),_=ih((.0139322*u+.0971045*i+.7141733*l)/Pm));const T=116*x-16;return[T<0?0:T,500*(g-x),200*(x-_),h]}function nh(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function ih(u){return u>Em?Math.pow(u,1/3):u/Am+Im}function Dm([u,i,l,h]){let g=(u+16)/116,_=isNaN(i)?g:g+i/500,x=isNaN(l)?g:g-l/200;return g=1*fc(g),_=km*fc(_),x=Pm*fc(x),[hc(3.1338561*_-1.6168667*g-.4906146*x),hc(-.9787684*_+1.9161415*g+.033454*x),hc(.0719453*_-.2289914*g+1.4052427*x),h]}function hc(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function fc(u){return u>Ro?u*u*u:Am*(u-Im)}const Ga=Object.hasOwn||function(u,i){return Object.prototype.hasOwnProperty.call(u,i)};function Ln(u,i){return Ga(u,i)?u[i]:void 0}function is(u){return parseInt(u.padEnd(2,u),16)/255}function rs(u,i){return Qs(i?u/100:u,0,1)}function Qs(u,i,l){return Math.min(Math.max(i,u),l)}function rh(u){return!u.some(Number.isNaN)}const ah={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ba(u,i,l){return u+l*(i-u)}function as(u,i,l){return u.map((h,g)=>ba(h,i[g],l))}class zn{constructor(i,l,h,g=1,_=!0){this.r=i,this.g=l,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,l,h,g]))}static parse(i){if(i instanceof zn)return i;if(typeof i!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Ln(ah,h);if(g){const[x,T,E]=g;return[x/255,T/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let T=1;return[is(h.slice(T,T+=x)),is(h.slice(T,T+=x)),is(h.slice(T,T+=x)),is(h.slice(T,T+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[T,E,D,z,j,H,Y,J,ne,me,xe,Ne]=x,Pe=[z||" ",Y||" ",me].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const K=[D,H,ne].join(""),de=K==="%%%"?100:K===""?255:0;if(de){const Ae=[Qs(+E/de,0,1),Qs(+j/de,0,1),Qs(+J/de,0,1),xe?rs(+xe,Ne):1];if(rh(Ae))return Ae}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,T,E,D,z,j,H,Y,J]=_,ne=[E||" ",z||" ",H].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const me=[+T,Qs(+D,0,100),Qs(+j,0,100),Y?rs(+Y,J):1];if(rh(me))return function([xe,Ne,Pe,K]){function de(Ae){const it=(Ae+xe/30)%12,It=Ne*Math.min(Pe,1-Pe);return Pe-It*Math.max(-1,Math.min(it-3,9-it,1))}return xe=Mm(xe),Ne/=100,Pe/=100,[de(0),de(8),de(4),K]}(me)}}}(i);return l?new zn(...l,!1):void 0}get rgb(){const{r:i,g:l,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[i/_,l/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[l,h,g,_]=Lo(i),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Mm(Math.atan2(g,h)*mv):NaN,x,l,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Lo(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,h,g]=this.rgb;return`rgba(${[i,l,h].map(_=>Math.round(255*_)).join(",")},${g})`}static interpolate(i,l,h,g="rgb"){switch(g){case"rgb":{const[_,x,T,E]=as(i.rgb,l.rgb,h);return new zn(_,x,T,E,!1)}case"hcl":{const[_,x,T,E]=i.hcl,[D,z,j,H]=l.hcl;let Y,J;if(isNaN(_)||isNaN(D))isNaN(_)?isNaN(D)?Y=NaN:(Y=D,T!==1&&T!==0||(J=z)):(Y=_,j!==1&&j!==0||(J=x));else{let Pe=D-_;D>_&&Pe>180?Pe-=360:D<_&&_-D>180&&(Pe+=360),Y=_+h*Pe}const[ne,me,xe,Ne]=function([Pe,K,de,Ae]){return Pe=isNaN(Pe)?0:Pe*Ol,Dm([de,Math.cos(Pe)*K,Math.sin(Pe)*K,Ae])}([Y,J??ba(x,z,h),ba(T,j,h),ba(E,H,h)]);return new zn(ne,me,xe,Ne,!1)}case"lab":{const[_,x,T,E]=Dm(as(i.lab,l.lab,h));return new zn(_,x,T,E,!1)}}}}zn.black=new zn(0,0,0,1),zn.white=new zn(1,1,1,1),zn.transparent=new zn(0,0,0,0),zn.red=new zn(1,0,0,1);class Fl{constructor(i,l,h){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const mc=["bottom","center","top"];class sh{constructor(i,l,h,g,_,x){this.text=i,this.image=l,this.scale=h,this.fontStack=g,this.textColor=_,this.verticalAlign=x}}class Ir{constructor(i){this.sections=i}static fromString(i){return new Ir([new sh(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Ir?i:Ir.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Gi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Gi)return i;if(typeof i=="number")return new Gi([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Gi(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){return new Gi(as(i.values,l.values,h))}}class Ar{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ar)return i;if(typeof i=="number")return new Ar([i]);if(Array.isArray(i)){for(const l of i)if(typeof l!="number")return;return new Ar(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){return new Ar(as(i.values,l.values,h))}}class ar{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof ar)return i;if(typeof i=="string"){const h=zn.parse(i);return h?new ar([h]):void 0}if(!Array.isArray(i))return;const l=[];for(const h of i){if(typeof h!="string")return;const g=zn.parse(h);if(!g)return;l.push(g)}return new ar(l)}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h,g="rgb"){const _=[];if(i.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let x=0;x<i.values.length;x++)_.push(zn.interpolate(i.values[x],l.values[x],h,g));return new ar(_)}}class xi extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const pc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class jn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof jn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const h=i[l],g=i[l+1];if(typeof h!="string"||!pc.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new jn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){const g=i.values,_=l.values;if(g.length!==_.length)throw new xi(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${l.toString()}`);const x=[];for(let T=0;T<g.length;T+=2){if(g[T]!==_[T])throw new xi(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${g[T]}, to[${T}]: ${_[T]}`);x.push(g[T]);const[E,D]=g[T+1],[z,j]=_[T+1];x.push([ba(E,z,h),ba(D,j,h)])}return new jn(x)}}class Zr{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Zr({name:i,available:!1}):null}}class xn{constructor(i,l,h){this.from=i,this.to=l,this.transition=h}static interpolate(i,l,h){return new xn(i,l,h)}static parse(i){return i instanceof xn?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new xn(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new xn(i.from,i.to,i.transition):typeof i=="string"?new xn(i,i,1):void 0}}function Cn(u,i,l,h){return typeof u=="number"&&u>=0&&u<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[u,i,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[u,i,l,h]:[u,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof xn||u instanceof zn||u instanceof Fl||u instanceof Ir||u instanceof Gi||u instanceof Ar||u instanceof ar||u instanceof jn||u instanceof Zr)return!0;if(Array.isArray(u)){for(const i of u)if(!eo(i))return!1;return!0}if(typeof u=="object"){for(const i in u)if(!eo(u[i]))return!1;return!0}return!1}function hn(u){if(u===null)return Ys;if(typeof u=="string")return Pn;if(typeof u=="boolean")return In;if(typeof u=="number")return jt;if(u instanceof zn)return oa;if(u instanceof xn)return cc;if(u instanceof Fl)return ts;if(u instanceof Ir)return Xs;if(u instanceof Gi)return Fi;if(u instanceof Ar)return zl;if(u instanceof ar)return Ll;if(u instanceof jn)return Bl;if(u instanceof Zr)return ns;if(Array.isArray(u)){const i=u.length;let l;for(const h of u){const g=hn(h);if(l){if(l===g)continue;l=An;break}l=g}return la(l||An,i)}return Ua}function to(u){const i=typeof u;return u===null?"":i==="string"||i==="number"||i==="boolean"?String(u):u instanceof zn||u instanceof xn||u instanceof Ir||u instanceof Gi||u instanceof Ar||u instanceof ar||u instanceof jn||u instanceof Zr?u.toString():JSON.stringify(u)}class Or{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!eo(i[1]))return l.error("invalid value");const h=i[1];let g=hn(h);const _=l.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Or(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const zo={string:Pn,number:jt,boolean:In,object:Ua};class xa{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h,g=1;const _=i[0];if(_==="array"){let T,E;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in zo)||D==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);T=zo[D],g++}else T=An;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=i[2],g++}h=la(T,E)}else{if(!zo[_])throw new Error(`Types doesn't contain name = ${_}`);h=zo[_]}const x=[];for(;g<i.length;g++){const T=l.parse(i[g],g,An);if(!T)return null;x.push(T)}return new xa(h,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(i);if(!Vl(this.type,hn(h)))return h;if(l===this.args.length-1)throw new xi(`Expected value to be of type ${bi(this.type)}, but found ${bi(hn(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const oh={"to-boolean":In,"to-color":oa,"to-number":jt,"to-string":Pn};class qa{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[0];if(!oh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return l.error("Expected one argument.");const g=oh[h],_=[];for(let x=1;x<i.length;x++){const T=l.parse(i[x],x,An);if(!T)return null;_.push(T)}return new qa(g,_)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,h;for(const g of this.args){if(l=g.evaluate(i),h=null,l instanceof zn)return l;if(typeof l=="string"){const _=i.parseColor(l);if(_)return _}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Cn(l[0],l[1],l[2],l[3]),!h))return new zn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new xi(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(i);const g=Gi.parse(l);if(g)return g}throw new xi(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const h of this.args){l=h.evaluate(i);const g=Ar.parse(l);if(g)return g}throw new xi(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const h of this.args){l=h.evaluate(i);const g=ar.parse(l);if(g)return g}throw new xi(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(i);const g=jn.parse(l);if(g)return g}throw new xi(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(i),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new xi(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Ir.fromString(to(this.args[0].evaluate(i)));case"resolvedImage":return Zr.fromString(to(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return to(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Rm=["Unknown","Point","LineString","Polygon"];class Lm{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Rm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache.get(i);return l||(l=zn.parse(i),this._parseColorCache.set(i,l)),l}}class $l{constructor(i,l,h=[],g,_=new Ss,x=[]){this.registry=i,this.path=h,this.key=h.map(T=>`[${T}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=l}parse(i,l,h,g,_={}){return l?this.concat(l,h,g)._parse(i,_):this._parse(i,_)}_parse(i,l){function h(g,_,x){return x==="assert"?new xa(_,[g]):x==="coerce"?new qa(_,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(i,this);if(!x)return null;if(this.expectedType){const T=this.expectedType,E=x.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||E.kind!=="value"){if(T.kind==="projectionDefinition"&&["string","array"].includes(E.kind)||["color","formatted","resolvedImage"].includes(T.kind)&&["value","string"].includes(E.kind)||["padding","numberArray"].includes(T.kind)&&["value","number","array"].includes(E.kind)||T.kind==="colorArray"&&["value","string","array"].includes(E.kind)||T.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(E.kind))x=h(x,T,l.typeAnnotation||"coerce");else if(this.checkSubtype(T,E))return null}else x=h(x,T,l.typeAnnotation||"assert")}if(!(x instanceof Or)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const T=new Lm;try{x=new Or(x.type,x.evaluate(T))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,h){const g=typeof i=="number"?this.path.concat(i):this.path,_=h?this.scope.concat(h):this.scope;return new $l(this.registry,this._isConstant,g,l||null,_,this.errors)}error(i,...l){const h=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new _i(h,i))}checkSubtype(i,l){const h=Vl(i,l);return h&&this.error(h),h}}class jl{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let _=1;_<i.length-1;_+=2){const x=i[_];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",_);const T=l.parse(i[_+1],_+1);if(!T)return null;h.push([x,T])}const g=l.parse(i[i.length-1],i.length-1,l.expectedType,h);return g?new jl(h,g):null}outputDefined(){return this.result.outputDefined()}}class Ia{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=i[1];return l.scope.has(h)?new Ia(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class sr{constructor(i,l,h){this.type=i,this.index=l,this.input=h}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,jt),g=l.parse(i[2],2,la(l.expectedType||An));return h&&g?new sr(g.type.itemType,h,g):null}evaluate(i){const l=this.index.evaluate(i),h=this.input.evaluate(i);if(l<0)throw new xi(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new xi(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new xi(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Bo{constructor(i,l){this.type=In,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,An),g=l.parse(i[2],2,An);return h&&g?dc(h.type,[In,Pn,jt,Ys,An])?new Bo(h,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(h.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!Js(l,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${bi(hn(l))} instead.`);if(!Js(h,["string","array"]))throw new xi(`Expected second argument to be of type array or string, but found ${bi(hn(h))} instead.`);return h.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Nl{constructor(i,l,h){this.type=jt,this.needle=i,this.haystack=l,this.fromIndex=h}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,An),g=l.parse(i[2],2,An);if(!h||!g)return null;if(!dc(h.type,[In,Pn,jt,Ys,An]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(h.type)} instead`);if(i.length===4){const _=l.parse(i[3],3,jt);return _?new Nl(h,g,_):null}return new Nl(h,g)}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!Js(l,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${bi(hn(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(i)),Js(h,["string"])){const _=h.indexOf(l,g);return _===-1?-1:[...h.slice(0,_)].length}if(Js(h,["array"]))return h.indexOf(l,g);throw new xi(`Expected second argument to be of type array or string, but found ${bi(hn(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Vo{constructor(i,l,h,g,_,x){this.inputType=i,this.type=l,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let h,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const _={},x=[];for(let D=2;D<i.length-1;D+=2){let z=i[D];const j=i[D+1];Array.isArray(z)||(z=[z]);const H=l.concat(D);if(z.length===0)return H.error("Expected at least one branch label.");for(const J of z){if(typeof J!="number"&&typeof J!="string")return H.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return H.error("Numeric branch labels must be integer values.");if(h){if(H.checkSubtype(h,hn(J)))return null}else h=hn(J);if(_[String(J)]!==void 0)return H.error("Branch labels must be unique.");_[String(J)]=x.length}const Y=l.parse(j,D,g);if(!Y)return null;g=g||Y.type,x.push(Y)}const T=l.parse(i[1],1,An);if(!T)return null;const E=l.parse(i[i.length-1],i.length-1,g);return E?T.type.kind!=="value"&&l.concat(1).checkSubtype(h,T.type)?null:new Vo(h,g,T,_,x,E):null}evaluate(i){const l=this.input.evaluate(i);return(hn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class qi{constructor(i,l,h){this.type=i,this.branches=l,this.otherwise=h}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const g=[];for(let x=1;x<i.length-1;x+=2){const T=l.parse(i[x],x,In);if(!T)return null;const E=l.parse(i[x+1],x+1,h);if(!E)return null;g.push([T,E]),h=h||E.type}const _=l.parse(i[i.length-1],i.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new qi(h,g,_)}evaluate(i){for(const[l,h]of this.branches)if(l.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,h]of this.branches)i(l),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Ul{constructor(i,l,h,g){this.type=i,this.input=l,this.beginIndex=h,this.endIndex=g}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,An),g=l.parse(i[2],2,jt);if(!h||!g)return null;if(!dc(h.type,[la(An),Pn,An]))return l.error(`Expected first argument to be of type array or string, but found ${bi(h.type)} instead`);if(i.length===4){const _=l.parse(i[3],3,jt);return _?new Ul(h.type,h,g,_):null}return new Ul(h.type,h,g)}evaluate(i){const l=this.input.evaluate(i),h=this.beginIndex.evaluate(i);let g;if(this.endIndex&&(g=this.endIndex.evaluate(i)),Js(l,["string"]))return[...l].slice(h,g).join("");if(Js(l,["array"]))return l.slice(h,g);throw new xi(`Expected first argument to be of type array or string, but found ${bi(hn(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Oo(u,i){const l=u.length-1;let h,g,_=0,x=l,T=0;for(;_<=x;)if(T=Math.floor((_+x)/2),h=u[T],g=u[T+1],h<=i){if(T===l||i<g)return T;_=T+1}else{if(!(h>i))throw new xi("Input is not a number.");x=T-1}return 0}class Fo{constructor(i,l,h){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(i[1],1,jt);if(!h)return null;const g=[];let _=null;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);for(let x=1;x<i.length;x+=2){const T=x===1?-1/0:i[x],E=i[x+1],D=x,z=x+1;if(typeof T!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=T)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const j=l.parse(E,z,_);if(!j)return null;_=_||j.type,g.push([T,j])}return new Fo(_,h,g)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return h[0].evaluate(i);const _=l.length;return g>=l[_-1]?h[_-1].evaluate(i):h[Oo(l,g)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function pv(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Ts,Gl,lh=function(){if(Gl)return Ts;function u(i,l,h,g){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=h,this.p2y=g}return Gl=1,Ts=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,g=0;g<8;g++){var _=this.sampleCurveX(h)-i;if(Math.abs(_)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var T=0,E=1;for(h=i,g=0;g<20&&(_=this.sampleCurveX(h),!(Math.abs(_-i)<l));g++)i>_?T=h:E=h,h=.5*(E-T)+T;return h},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},Ts}(),gv=pv(lh);class Fr{constructor(i,l,h,g,_){this.type=i,this.operator=l,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,T]of _)this.labels.push(x),this.outputs.push(T)}static interpolationFactor(i,l,h,g){let _=0;if(i.name==="exponential")_=$o(l,i.base,h,g);else if(i.name==="linear")_=$o(l,1,h,g);else if(i.name==="cubic-bezier"){const x=i.controlPoints;_=new gv(x[0],x[1],x[2],x[3]).solve($o(l,1,h,g))}return _}static parse(i,l){let[h,g,_,...x]=i;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some(z=>typeof z!="number"||z<0||z>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(_=l.parse(_,2,jt),!_)return null;const T=[];let E=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||l.expectedType==Ll?l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType):E=oa;for(let D=0;D<x.length;D+=2){const z=x[D],j=x[D+1],H=D+3,Y=D+4;if(typeof z!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(T.length&&T[T.length-1][0]>=z)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const J=l.parse(j,Y,E);if(!J)return null;E=E||J.type,T.push([z,J])}return Cs(E,jt)||Cs(E,cc)||Cs(E,oa)||Cs(E,Fi)||Cs(E,zl)||Cs(E,Ll)||Cs(E,Bl)||Cs(E,la(jt))?new Fr(E,h,g,_,T):l.error(`Type ${bi(E)} is not interpolatable.`)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return h[0].evaluate(i);const _=l.length;if(g>=l[_-1])return h[_-1].evaluate(i);const x=Oo(l,g),T=Fr.interpolationFactor(this.interpolation,g,l[x],l[x+1]),E=h[x].evaluate(i),D=h[x+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ba(E,D,T);case"color":return zn.interpolate(E,D,T);case"padding":return Gi.interpolate(E,D,T);case"colorArray":return ar.interpolate(E,D,T);case"numberArray":return Ar.interpolate(E,D,T);case"variableAnchorOffsetCollection":return jn.interpolate(E,D,T);case"array":return as(E,D,T);case"projectionDefinition":return xn.interpolate(E,D,T)}case"interpolate-hcl":switch(this.type.kind){case"color":return zn.interpolate(E,D,T,"hcl");case"colorArray":return ar.interpolate(E,D,T,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return zn.interpolate(E,D,T,"lab");case"colorArray":return ar.interpolate(E,D,T,"lab")}}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function $o(u,i,l,h){const g=h-l,_=u-l;return g===0?0:i===1?_/g:(Math.pow(i,_)-1)/(Math.pow(i,g)-1)}const ua={color:zn.interpolate,number:ba,padding:Gi.interpolate,numberArray:Ar.interpolate,colorArray:ar.interpolate,variableAnchorOffsetCollection:jn.interpolate,array:as};class Kr{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h=null;const g=l.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const T of i.slice(1)){const E=l.parse(T,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,_.push(E)}if(!h)throw new Error("No output type");const x=g&&_.some(T=>Vl(g,T.type));return new Kr(x?An:h,_)}evaluate(i){let l,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(i),h&&h instanceof Zr&&!h.available&&(l||(l=h.name),h=null,g===this.args.length&&(h=l)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function uh(u,i){return u==="=="||u==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function ql(u,i,l,h){return h.compare(i,l)===0}function jo(u,i,l){const h=u!=="=="&&u!=="!=";return class H2{constructor(_,x,T){this.type=In,this.lhs=_,this.rhs=x,this.collator=T,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const T=_[0];let E=x.parse(_[1],1,An);if(!E)return null;if(!uh(T,E.type))return x.concat(1).error(`"${T}" comparisons are not supported for type '${bi(E.type)}'.`);let D=x.parse(_[2],2,An);if(!D)return null;if(!uh(T,D.type))return x.concat(2).error(`"${T}" comparisons are not supported for type '${bi(D.type)}'.`);if(E.type.kind!==D.type.kind&&E.type.kind!=="value"&&D.type.kind!=="value")return x.error(`Cannot compare types '${bi(E.type)}' and '${bi(D.type)}'.`);h&&(E.type.kind==="value"&&D.type.kind!=="value"?E=new xa(D.type,[E]):E.type.kind!=="value"&&D.type.kind==="value"&&(D=new xa(E.type,[D])));let z=null;if(_.length===4){if(E.type.kind!=="string"&&D.type.kind!=="string"&&E.type.kind!=="value"&&D.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(z=x.parse(_[3],3,ts),!z)return null}return new H2(E,D,z)}evaluate(_){const x=this.lhs.evaluate(_),T=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const E=hn(x),D=hn(T);if(E.kind!==D.kind||E.kind!=="string"&&E.kind!=="number")throw new xi(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${E.kind}, ${D.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=hn(x),D=hn(T);if(E.kind!=="string"||D.kind!=="string")return i(_,x,T)}return this.collator?l(_,x,T,this.collator.evaluate(_)):i(_,x,T)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const ch=jo("==",function(u,i,l){return i===l},ql),vv=jo("!=",function(u,i,l){return i!==l},function(u,i,l,h){return!ql(0,i,l,h)}),yv=jo("<",function(u,i,l){return i<l},function(u,i,l,h){return h.compare(i,l)<0}),_v=jo(">",function(u,i,l){return i>l},function(u,i,l,h){return h.compare(i,l)>0}),bv=jo("<=",function(u,i,l){return i<=l},function(u,i,l,h){return h.compare(i,l)<=0}),gc=jo(">=",function(u,i,l){return i>=l},function(u,i,l,h){return h.compare(i,l)>=0});class vc{constructor(i,l,h){this.type=ts,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const g=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,In);if(!g)return null;const _=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,In);if(!_)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,Pn),!x)?null:new vc(g,_,x)}evaluate(i){return new Fl(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class yc{constructor(i,l,h,g,_){this.type=Pn,this.number=i,this.locale=l,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const h=l.parse(i[1],1,jt);if(!h)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=l.parse(g.locale,1,Pn),!_))return null;let x=null;if(g.currency&&(x=l.parse(g.currency,1,Pn),!x))return null;let T=null;if(g["min-fraction-digits"]&&(T=l.parse(g["min-fraction-digits"],1,jt),!T))return null;let E=null;return g["max-fraction-digits"]&&(E=l.parse(g["max-fraction-digits"],1,jt),!E)?null:new yc(h,_,x,T,E)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Hl{constructor(i){this.type=Xs,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=i.length-1;++x){const T=i[x];if(_&&typeof T=="object"&&!Array.isArray(T)){_=!1;let E=null;if(T["font-scale"]&&(E=l.parse(T["font-scale"],1,jt),!E))return null;let D=null;if(T["text-font"]&&(D=l.parse(T["text-font"],1,la(Pn)),!D))return null;let z=null;if(T["text-color"]&&(z=l.parse(T["text-color"],1,oa),!z))return null;let j=null;if(T["vertical-align"]){if(typeof T["vertical-align"]=="string"&&!mc.includes(T["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${T["vertical-align"]}' instead.`);if(j=l.parse(T["vertical-align"],1,Pn),!j)return null}const H=g[g.length-1];H.scale=E,H.font=D,H.textColor=z,H.verticalAlign=j}else{const E=l.parse(i[x],1,An);if(!E)return null;const D=E.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:E,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Hl(g)}evaluate(i){return new Ir(this.sections.map(l=>{const h=l.content.evaluate(i);return hn(h)===ns?new sh("",h,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(i):null):new sh(to(h),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null,l.verticalAlign?l.verticalAlign.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor),l.verticalAlign&&i(l.verticalAlign)}outputDefined(){return!1}}class dh{constructor(i){this.type=ns,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const h=l.parse(i[1],1,Pn);return h?new dh(h):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),h=Zr.fromString(l);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(l)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class _c{constructor(i){this.type=jt,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=l.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${bi(h.type)} instead.`):new _c(h):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new xi(`Expected value to be of type string or array, but found ${bi(hn(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Ha=8192;function xv(u,i){const l=(180+u[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(l*g*Ha),Math.round(h*g*Ha)]}function hh(u,i){const l=Math.pow(2,i.z);return[(g=(u[0]/Ha+i.x)/l,360*g-180),(h=(u[1]/Ha+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function Wl(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function Zl(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function zm(u,i,l){const h=u[0]-i[0],g=u[1]-i[1],_=u[0]-l[0],x=u[1]-l[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function Kl(u,i,l,h){return(g=[h[0]-l[0],h[1]-l[1]])[0]*(_=[i[0]-u[0],i[1]-u[1]])[1]-g[1]*_[0]!=0&&!(!bc(u,i,l,h)||!bc(l,h,u,i));var g,_}function Bm(u,i,l){for(const h of l)for(let g=0;g<h.length-1;++g)if(Kl(u,i,h[g],h[g+1]))return!0;return!1}function No(u,i,l=!1){let h=!1;for(const T of i)for(let E=0;E<T.length-1;E++){if(zm(u,T[E],T[E+1]))return l;(_=T[E])[1]>(g=u)[1]!=(x=T[E+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var g,_,x;return h}function wv(u,i){for(const l of i)if(No(u,l))return!0;return!1}function Vm(u,i){for(const l of u)if(!No(l,i))return!1;for(let l=0;l<u.length-1;++l)if(Bm(u[l],u[l+1],i))return!1;return!0}function Sv(u,i){for(const l of i)if(Vm(u,l))return!0;return!1}function bc(u,i,l,h){const g=h[0]-l[0],_=h[1]-l[1],x=(u[0]-l[0])*_-g*(u[1]-l[1]),T=(i[0]-l[0])*_-g*(i[1]-l[1]);return x>0&&T<0||x<0&&T>0}function fh(u,i,l){const h=[];for(let g=0;g<u.length;g++){const _=[];for(let x=0;x<u[g].length;x++){const T=xv(u[g][x],l);Wl(i,T),_.push(T)}h.push(_)}return h}function Om(u,i,l){const h=[];for(let g=0;g<u.length;g++){const _=fh(u[g],i,l);h.push(_)}return h}function Fm(u,i,l,h){if(u[0]<l[0]||u[0]>l[2]){const g=.5*h;let _=u[0]-l[0]>g?-h:l[0]-u[0]>g?h:0;_===0&&(_=u[0]-l[2]>g?-h:l[2]-u[0]>g?h:0),u[0]+=_}Wl(i,u)}function mh(u,i,l,h){const g=Math.pow(2,h.z)*Ha,_=[h.x*Ha,h.y*Ha],x=[];for(const T of u)for(const E of T){const D=[E.x+_[0],E.y+_[1]];Fm(D,i,l,g),x.push(D)}return x}function ph(u,i,l,h){const g=Math.pow(2,h.z)*Ha,_=[h.x*Ha,h.y*Ha],x=[];for(const E of u){const D=[];for(const z of E){const j=[z.x+_[0],z.y+_[1]];Wl(i,j),D.push(j)}x.push(D)}if(i[2]-i[0]<=g/2){(T=i)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const E of x)for(const D of E)Fm(D,i,l,g)}var T;return x}class no{constructor(i,l){this.type=In,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(eo(i[1])){const h=i[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:T}=_.geometry;x==="Polygon"&&g.push(T),x==="MultiPolygon"&&g.push(...T)}if(g.length)return new no(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new no(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new no(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const T=fh(h.coordinates,_,x),E=mh(l.geometry(),g,_,x);if(!Zl(g,_))return!1;for(const D of E)if(!No(D,T))return!1}if(h.type==="MultiPolygon"){const T=Om(h.coordinates,_,x),E=mh(l.geometry(),g,_,x);if(!Zl(g,_))return!1;for(const D of E)if(!wv(D,T))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const T=fh(h.coordinates,_,x),E=ph(l.geometry(),g,_,x);if(!Zl(g,_))return!1;for(const D of E)if(!Vm(D,T))return!1}if(h.type==="MultiPolygon"){const T=Om(h.coordinates,_,x),E=ph(l.geometry(),g,_,x);if(!Zl(g,_))return!1;for(const D of E)if(!Sv(D,T))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let $m=class{constructor(u=[],i=(l,h)=>l<h?-1:l>h?1:0){if(this.data=u,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:i,compare:l}=this,h=i[u];for(;u>0;){const g=u-1>>1,_=i[g];if(l(h,_)>=0)break;i[u]=_,u=g}i[u]=h}_down(u){const{data:i,compare:l}=this,h=this.length>>1,g=i[u];for(;u<h;){let _=1+(u<<1);const x=_+1;if(x<this.length&&l(i[x],i[_])<0&&(_=x),l(i[_],g)>=0)break;i[u]=i[_],u=_}i[u]=g}};function gh(u,i,l=0,h=u.length-1,g=Cv){for(;h>l;){if(h-l>600){const E=h-l+1,D=i-l+1,z=Math.log(E),j=.5*Math.exp(2*z/3),H=.5*Math.sqrt(z*j*(E-j)/E)*(D-E/2<0?-1:1);gh(u,i,Math.max(l,Math.floor(i-D*j/E+H)),Math.min(h,Math.floor(i+(E-D)*j/E+H)),g)}const _=u[i];let x=l,T=h;for(Uo(u,l,i),g(u[h],_)>0&&Uo(u,l,h);x<T;){for(Uo(u,x,T),x++,T--;g(u[x],_)<0;)x++;for(;g(u[T],_)>0;)T--}g(u[l],_)===0?Uo(u,l,T):(T++,Uo(u,T,h)),T<=i&&(l=T+1),i<=T&&(h=T-1)}}function Uo(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}function Cv(u,i){return u<i?-1:u>i?1:0}function xc(u,i){if(u.length<=1)return[u];const l=[];let h,g;for(const _ of u){const x=jm(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&l.push(h),h=[_]):h.push(_))}if(h&&l.push(h),i>1)for(let _=0;_<l.length;_++)l[_].length<=i||(gh(l[_],i,1,l[_].length-1,Tv),l[_]=l[_].slice(0,i));return l}function Tv(u,i){return i.area-u.area}function jm(u){let i=0;for(let l,h,g=0,_=u.length,x=_-1;g<_;x=g++)l=u[g],h=u[x],i+=(h.x-l.x)*(l.y+h.y);return i}const Nm=1/298.257223563,Um=Nm*(2-Nm),Gm=Math.PI/180;class vh{constructor(i){const l=6378.137*Gm*1e3,h=Math.cos(i*Gm),g=1/(1-Um*(1-h*h)),_=Math.sqrt(g);this.kx=l*_*h,this.ky=l*_*g*(1-Um)}distance(i,l){const h=this.wrap(i[0]-l[0])*this.kx,g=(i[1]-l[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(i,l){let h,g,_,x,T=1/0;for(let E=0;E<i.length-1;E++){let D=i[E][0],z=i[E][1],j=this.wrap(i[E+1][0]-D)*this.kx,H=(i[E+1][1]-z)*this.ky,Y=0;j===0&&H===0||(Y=(this.wrap(l[0]-D)*this.kx*j+(l[1]-z)*this.ky*H)/(j*j+H*H),Y>1?(D=i[E+1][0],z=i[E+1][1]):Y>0&&(D+=j/this.kx*Y,z+=H/this.ky*Y)),j=this.wrap(l[0]-D)*this.kx,H=(l[1]-z)*this.ky;const J=j*j+H*H;J<T&&(T=J,h=D,g=z,_=E,x=Y)}return{point:[h,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Wn(u,i){return i[0]-u[0]}function wc(u){return u[1]-u[0]+1}function ss(u,i){return u[1]>=u[0]&&u[1]<i}function yh(u,i){if(u[0]>u[1])return[null,null];const l=wc(u);if(i){if(l===2)return[u,null];const g=Math.floor(l/2);return[[u[0],u[0]+g],[u[0]+g,u[1]]]}if(l===1)return[u,null];const h=Math.floor(l/2)-1;return[[u[0],u[0]+h],[u[0]+h+1,u[1]]]}function _h(u,i){if(!ss(i,u.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)Wl(l,u[h]);return l}function bh(u){const i=[1/0,1/0,-1/0,-1/0];for(const l of u)for(const h of l)Wl(i,h);return i}function qm(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function xh(u,i,l){if(!qm(u)||!qm(i))return NaN;let h=0,g=0;return u[2]<i[0]&&(h=i[0]-u[2]),u[0]>i[2]&&(h=u[0]-i[2]),u[1]>i[3]&&(g=u[1]-i[3]),u[3]<i[1]&&(g=i[1]-u[3]),l.distance([0,0],[h,g])}function io(u,i,l){const h=l.pointOnLine(i,u);return l.distance(u,h.point)}function wh(u,i,l,h,g){const _=Math.min(io(u,[l,h],g),io(i,[l,h],g)),x=Math.min(io(l,[u,i],g),io(h,[u,i],g));return Math.min(_,x)}function kv(u,i,l,h,g){if(!ss(i,u.length)||!ss(h,l.length))return 1/0;let _=1/0;for(let x=i[0];x<i[1];++x){const T=u[x],E=u[x+1];for(let D=h[0];D<h[1];++D){const z=l[D],j=l[D+1];if(Kl(T,E,z,j))return 0;_=Math.min(_,wh(T,E,z,j,g))}}return _}function Pv(u,i,l,h,g){if(!ss(i,u.length)||!ss(h,l.length))return NaN;let _=1/0;for(let x=i[0];x<=i[1];++x)for(let T=h[0];T<=h[1];++T)if(_=Math.min(_,g.distance(u[x],l[T])),_===0)return _;return _}function Iv(u,i,l){if(No(u,i,!0))return 0;let h=1/0;for(const g of i){const _=g[0],x=g[g.length-1];if(_!==x&&(h=Math.min(h,io(u,[x,_],l)),h===0))return h;const T=l.pointOnLine(g,u);if(h=Math.min(h,l.distance(u,T.point)),h===0)return h}return h}function Av(u,i,l,h){if(!ss(i,u.length))return NaN;for(let _=i[0];_<=i[1];++_)if(No(u[_],l,!0))return 0;let g=1/0;for(let _=i[0];_<i[1];++_){const x=u[_],T=u[_+1];for(const E of l)for(let D=0,z=E.length,j=z-1;D<z;j=D++){const H=E[j],Y=E[D];if(Kl(x,T,H,Y))return 0;g=Math.min(g,wh(x,T,H,Y,h))}}return g}function Hm(u,i){for(const l of u)for(const h of l)if(No(h,i,!0))return!0;return!1}function Ev(u,i,l,h=1/0){const g=bh(u),_=bh(i);if(h!==1/0&&xh(g,_,l)>=h)return h;if(Zl(g,_)){if(Hm(u,i))return 0}else if(Hm(i,u))return 0;let x=1/0;for(const T of u)for(let E=0,D=T.length,z=D-1;E<D;z=E++){const j=T[z],H=T[E];for(const Y of i)for(let J=0,ne=Y.length,me=ne-1;J<ne;me=J++){const xe=Y[me],Ne=Y[J];if(Kl(j,H,xe,Ne))return 0;x=Math.min(x,wh(j,H,xe,Ne,l))}}return x}function Wm(u,i,l,h,g,_){if(!_)return;const x=xh(_h(h,_),g,l);x<i&&u.push([x,_,[0,0]])}function Sc(u,i,l,h,g,_,x){if(!_||!x)return;const T=xh(_h(h,_),_h(g,x),l);T<i&&u.push([T,_,x])}function Cc(u,i,l,h,g=1/0){let _=Math.min(h.distance(u[0],l[0][0]),g);if(_===0)return _;const x=new $m([[0,[0,u.length-1],[0,0]]],Wn),T=bh(l);for(;x.length>0;){const E=x.pop();if(E[0]>=_)continue;const D=E[1],z=i?50:100;if(wc(D)<=z){if(!ss(D,u.length))return NaN;if(i){const j=Av(u,D,l,h);if(isNaN(j)||j===0)return j;_=Math.min(_,j)}else for(let j=D[0];j<=D[1];++j){const H=Iv(u[j],l,h);if(_=Math.min(_,H),_===0)return 0}}else{const j=yh(D,i);Wm(x,_,h,u,T,j[0]),Wm(x,_,h,u,T,j[1])}}return _}function Tc(u,i,l,h,g,_=1/0){let x=Math.min(_,g.distance(u[0],l[0]));if(x===0)return x;const T=new $m([[0,[0,u.length-1],[0,l.length-1]]],Wn);for(;T.length>0;){const E=T.pop();if(E[0]>=x)continue;const D=E[1],z=E[2],j=i?50:100,H=h?50:100;if(wc(D)<=j&&wc(z)<=H){if(!ss(D,u.length)&&ss(z,l.length))return NaN;let Y;if(i&&h)Y=kv(u,D,l,z,g),x=Math.min(x,Y);else if(i&&!h){const J=u.slice(D[0],D[1]+1);for(let ne=z[0];ne<=z[1];++ne)if(Y=io(l[ne],J,g),x=Math.min(x,Y),x===0)return x}else if(!i&&h){const J=l.slice(z[0],z[1]+1);for(let ne=D[0];ne<=D[1];++ne)if(Y=io(u[ne],J,g),x=Math.min(x,Y),x===0)return x}else Y=Pv(u,D,l,z,g),x=Math.min(x,Y)}else{const Y=yh(D,i),J=yh(z,h);Sc(T,x,g,u,l,Y[0],J[0]),Sc(T,x,g,u,l,Y[0],J[1]),Sc(T,x,g,u,l,Y[1],J[0]),Sc(T,x,g,u,l,Y[1],J[1])}}return x}function Sh(u){return u.type==="MultiPolygon"?u.coordinates.map(i=>({type:"Polygon",coordinates:i})):u.type==="MultiLineString"?u.coordinates.map(i=>({type:"LineString",coordinates:i})):u.type==="MultiPoint"?u.coordinates.map(i=>({type:"Point",coordinates:i})):[u]}class ro{constructor(i,l){this.type=jt,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(eo(i[1])){const h=i[1];if(h.type==="FeatureCollection")return new ro(h,h.features.map(g=>Sh(g.geometry)).flat());if(h.type==="Feature")return new ro(h,Sh(h.geometry));if("type"in h&&"coordinates"in h)return new ro(h,Sh(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const g=l.geometry(),_=g.flat().map(E=>hh([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new vh(_[0][1]);let T=1/0;for(const E of h){switch(E.type){case"Point":T=Math.min(T,Tc(_,!1,[E.coordinates],!1,x,T));break;case"LineString":T=Math.min(T,Tc(_,!1,E.coordinates,!0,x,T));break;case"Polygon":T=Math.min(T,Cc(_,!1,E.coordinates,x,T))}if(T===0)return T}return T}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const g=l.geometry(),_=g.flat().map(E=>hh([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new vh(_[0][1]);let T=1/0;for(const E of h){switch(E.type){case"Point":T=Math.min(T,Tc(_,!0,[E.coordinates],!1,x,T));break;case"LineString":T=Math.min(T,Tc(_,!0,E.coordinates,!0,x,T));break;case"Polygon":T=Math.min(T,Cc(_,!0,E.coordinates,x,T))}if(T===0)return T}return T}(i,this.geometries);if(i.geometryType()==="Polygon")return function(l,h){const g=l.geometry();if(g.length===0||g[0].length===0)return NaN;const _=xc(g,0).map(E=>E.map(D=>D.map(z=>hh([z.x,z.y],l.canonical)))),x=new vh(_[0][0][0][1]);let T=1/0;for(const E of h)for(const D of _){switch(E.type){case"Point":T=Math.min(T,Cc([E.coordinates],!1,D,x,T));break;case"LineString":T=Math.min(T,Cc(E.coordinates,!0,D,x,T));break;case"Polygon":T=Math.min(T,Ev(D,E.coordinates,x,T))}if(T===0)return T}return T}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Yl{constructor(i){this.type=An,this.key=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=i[1];return h==null?l.error("Global state property must be defined."):typeof h!="string"?l.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new Yl(h)}evaluate(i){var l;const h=(l=i.globals)===null||l===void 0?void 0:l.globalState;return h&&Object.keys(h).length!==0?Ln(h,this.key):null}eachChild(){}outputDefined(){return!1}}const Go={"==":ch,"!=":vv,">":_v,"<":yv,">=":gc,"<=":bv,array:xa,at:sr,boolean:xa,case:qi,coalesce:Kr,collator:vc,format:Hl,image:dh,in:Bo,"index-of":Nl,interpolate:Fr,"interpolate-hcl":Fr,"interpolate-lab":Fr,length:_c,let:jl,literal:Or,match:Vo,number:xa,"number-format":yc,object:xa,slice:Ul,step:Fo,string:xa,"to-boolean":qa,"to-color":qa,"to-number":qa,"to-string":qa,var:Ia,within:no,distance:ro,"global-state":Yl};class wa{constructor(i,l,h,g){this.name=i,this.type=l,this._evaluate=h,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const h=i[0],g=wa.definitions[h];if(!g)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,T=x.filter(([D])=>!Array.isArray(D)||D.length===i.length-1);let E=null;for(const[D,z]of T){E=new $l(l.registry,kc,l.path,null,l.scope);const j=[];let H=!1;for(let Y=1;Y<i.length;Y++){const J=i[Y],ne=Array.isArray(D)?D[Y-1]:D.type,me=E.parse(J,1+j.length,ne);if(!me){H=!0;break}j.push(me)}if(!H)if(Array.isArray(D)&&D.length!==j.length)E.error(`Expected ${D.length} arguments, but found ${j.length} instead.`);else{for(let Y=0;Y<j.length;Y++){const J=Array.isArray(D)?D[Y]:D.type,ne=j[Y];E.concat(Y+1).checkSubtype(J,ne.type)}if(E.errors.length===0)return new wa(h,_,z,j)}}if(T.length===1)l.errors.push(...E.errors);else{const D=(T.length?T:x).map(([j])=>{return H=j,Array.isArray(H)?`(${H.map(bi).join(", ")})`:`(${bi(H.type)}...)`;var H}).join(" | "),z=[];for(let j=1;j<i.length;j++){const H=l.parse(i[j],1+z.length);if(!H)return null;z.push(bi(H.type))}l.error(`Expected arguments of type ${D}, but found (${z.join(", ")}) instead.`)}return null}static register(i,l){wa.definitions=l;for(const h in l)i[h]=wa}}function Zm(u,[i,l,h,g]){i=i.evaluate(u),l=l.evaluate(u),h=h.evaluate(u);const _=g?g.evaluate(u):1,x=Cn(i,l,h,_);if(x)throw new xi(x);return new zn(i/255,l/255,h/255,_,!1)}function Km(u,i){return u in i}function Ch(u,i){const l=i[u];return l===void 0?null:l}function ao(u){return{type:u}}function kc(u){if(u instanceof Ia)return kc(u.boundExpression);if(u instanceof wa&&u.name==="error"||u instanceof vc||u instanceof no||u instanceof ro||u instanceof Yl)return!1;const i=u instanceof qa||u instanceof xa;let l=!0;return u.eachChild(h=>{l=i?l&&kc(h):l&&h instanceof Or}),!!l&&Pc(u)&&qo(u,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Pc(u){if(u instanceof wa&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof no||u instanceof ro)return!1;let i=!0;return u.eachChild(l=>{i&&!Pc(l)&&(i=!1)}),i}function Xl(u){if(u instanceof wa&&u.name==="feature-state")return!1;let i=!0;return u.eachChild(l=>{i&&!Xl(l)&&(i=!1)}),i}function qo(u,i){if(u instanceof wa&&i.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(h=>{l&&!qo(h,i)&&(l=!1)}),l}function Ym(u){return{result:"success",value:u}}function Ho(u){return{result:"error",value:u}}function Wo(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Th(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function kh(u){return!!u.expression&&u.expression.interpolated}function Bn(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function so(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&hn(u)===Ua}function Xm(u){return u}function Jm(u,i){const l=u.stops&&typeof u.stops[0][0]=="object",h=l||!(l||u.property!==void 0),g=u.type||(kh(i)?"exponential":"interval"),_=function(z){switch(z.type){case"color":return zn.parse;case"padding":return Gi.parse;case"numberArray":return Ar.parse;case"colorArray":return ar.parse;default:return null}}(i);if(_&&((u=pr({},u)).stops&&(u.stops=u.stops.map(z=>[z[0],_(z[1])])),u.default=_(u.default?u.default:i.default)),u.colorSpace&&(x=u.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var x;const T=function(z){switch(z){case"exponential":return Qm;case"interval":return Dv;case"categorical":return Mv;case"identity":return ep;default:throw new Error(`Unknown function type "${z}"`)}}(g);let E,D;if(g==="categorical"){E=Object.create(null);for(const z of u.stops)E[z[0]]=z[1];D=typeof u.stops[0][0]}if(l){const z={},j=[];for(let J=0;J<u.stops.length;J++){const ne=u.stops[J],me=ne[0].zoom;z[me]===void 0&&(z[me]={zoom:me,type:u.type,property:u.property,default:u.default,stops:[]},j.push(me)),z[me].stops.push([ne[0].value,ne[1]])}const H=[];for(const J of j)H.push([z[J].zoom,Jm(z[J],i)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Fr.interpolationFactor.bind(void 0,Y),zoomStops:H.map(J=>J[0]),evaluate:({zoom:J},ne)=>Qm({stops:H,base:u.base},i,J).evaluate(J,ne)}}if(h){const z=g==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Fr.interpolationFactor.bind(void 0,z),zoomStops:u.stops.map(j=>j[0]),evaluate:({zoom:j})=>T(u,i,j,E,D)}}return{kind:"source",evaluate(z,j){const H=j&&j.properties?j.properties[u.property]:void 0;return H===void 0?Jl(u.default,i.default):T(u,i,H,E,D)}}}function Jl(u,i,l){return u!==void 0?u:i!==void 0?i:l!==void 0?l:void 0}function Mv(u,i,l,h,g){return Jl(typeof l===g?h[l]:void 0,u.default,i.default)}function Dv(u,i,l){if(Bn(l)!=="number")return Jl(u.default,i.default);const h=u.stops.length;if(h===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[h-1][0])return u.stops[h-1][1];const g=Oo(u.stops.map(_=>_[0]),l);return u.stops[g][1]}function Qm(u,i,l){const h=u.base!==void 0?u.base:1;if(Bn(l)!=="number")return Jl(u.default,i.default);const g=u.stops.length;if(g===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[g-1][0])return u.stops[g-1][1];const _=Oo(u.stops.map(z=>z[0]),l),x=function(z,j,H,Y){const J=Y-H,ne=z-H;return J===0?0:j===1?ne/J:(Math.pow(j,ne)-1)/(Math.pow(j,J)-1)}(l,h,u.stops[_][0],u.stops[_+1][0]),T=u.stops[_][1],E=u.stops[_+1][1],D=ua[i.type]||Xm;return typeof T.evaluate=="function"?{evaluate(...z){const j=T.evaluate.apply(void 0,z),H=E.evaluate.apply(void 0,z);if(j!==void 0&&H!==void 0)return D(j,H,x,u.colorSpace)}}:D(T,E,x,u.colorSpace)}function ep(u,i,l){switch(i.type){case"color":l=zn.parse(l);break;case"formatted":l=Ir.fromString(l.toString());break;case"resolvedImage":l=Zr.fromString(l.toString());break;case"padding":l=Gi.parse(l);break;case"colorArray":l=ar.parse(l);break;case"numberArray":l=Ar.parse(l);break;default:Bn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return Jl(l,u.default,i.default)}wa.register(Go,{error:[{kind:"error"},[Pn],(u,[i])=>{throw new xi(i.evaluate(u))}],typeof:[Pn,[An],(u,[i])=>bi(hn(i.evaluate(u)))],"to-rgba":[la(jt,4),[oa],(u,[i])=>{const[l,h,g,_]=i.evaluate(u).rgb;return[255*l,255*h,255*g,_]}],rgb:[oa,[jt,jt,jt],Zm],rgba:[oa,[jt,jt,jt,jt],Zm],has:{type:In,overloads:[[[Pn],(u,[i])=>Km(i.evaluate(u),u.properties())],[[Pn,Ua],(u,[i,l])=>Km(i.evaluate(u),l.evaluate(u))]]},get:{type:An,overloads:[[[Pn],(u,[i])=>Ch(i.evaluate(u),u.properties())],[[Pn,Ua],(u,[i,l])=>Ch(i.evaluate(u),l.evaluate(u))]]},"feature-state":[An,[Pn],(u,[i])=>Ch(i.evaluate(u),u.featureState||{})],properties:[Ua,[],u=>u.properties()],"geometry-type":[Pn,[],u=>u.geometryType()],id:[An,[],u=>u.id()],zoom:[jt,[],u=>u.globals.zoom],"heatmap-density":[jt,[],u=>u.globals.heatmapDensity||0],elevation:[jt,[],u=>u.globals.elevation||0],"line-progress":[jt,[],u=>u.globals.lineProgress||0],accumulated:[An,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[jt,ao(jt),(u,i)=>{let l=0;for(const h of i)l+=h.evaluate(u);return l}],"*":[jt,ao(jt),(u,i)=>{let l=1;for(const h of i)l*=h.evaluate(u);return l}],"-":{type:jt,overloads:[[[jt,jt],(u,[i,l])=>i.evaluate(u)-l.evaluate(u)],[[jt],(u,[i])=>-i.evaluate(u)]]},"/":[jt,[jt,jt],(u,[i,l])=>i.evaluate(u)/l.evaluate(u)],"%":[jt,[jt,jt],(u,[i,l])=>i.evaluate(u)%l.evaluate(u)],ln2:[jt,[],()=>Math.LN2],pi:[jt,[],()=>Math.PI],e:[jt,[],()=>Math.E],"^":[jt,[jt,jt],(u,[i,l])=>Math.pow(i.evaluate(u),l.evaluate(u))],sqrt:[jt,[jt],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[jt,[jt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[jt,[jt],(u,[i])=>Math.log(i.evaluate(u))],log2:[jt,[jt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[jt,[jt],(u,[i])=>Math.sin(i.evaluate(u))],cos:[jt,[jt],(u,[i])=>Math.cos(i.evaluate(u))],tan:[jt,[jt],(u,[i])=>Math.tan(i.evaluate(u))],asin:[jt,[jt],(u,[i])=>Math.asin(i.evaluate(u))],acos:[jt,[jt],(u,[i])=>Math.acos(i.evaluate(u))],atan:[jt,[jt],(u,[i])=>Math.atan(i.evaluate(u))],min:[jt,ao(jt),(u,i)=>Math.min(...i.map(l=>l.evaluate(u)))],max:[jt,ao(jt),(u,i)=>Math.max(...i.map(l=>l.evaluate(u)))],abs:[jt,[jt],(u,[i])=>Math.abs(i.evaluate(u))],round:[jt,[jt],(u,[i])=>{const l=i.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[jt,[jt],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[jt,[jt],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[In,[Pn,An],(u,[i,l])=>u.properties()[i.value]===l.value],"filter-id-==":[In,[An],(u,[i])=>u.id()===i.value],"filter-type-==":[In,[Pn],(u,[i])=>u.geometryType()===i.value],"filter-<":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h<g}],"filter-id-<":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l<h}],"filter->":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h>g}],"filter-id->":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l>h}],"filter-<=":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l<=h}],"filter->=":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l>=h}],"filter-has":[In,[An],(u,[i])=>i.value in u.properties()],"filter-has-id":[In,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[In,[la(Pn)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[In,[la(An)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[In,[Pn,la(An)],(u,[i,l])=>l.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[In,[Pn,la(An)],(u,[i,l])=>function(h,g,_,x){for(;_<=x;){const T=_+x>>1;if(g[T]===h)return!0;g[T]>h?x=T-1:_=T+1}return!1}(u.properties()[i.value],l.value,0,l.value.length-1)],all:{type:In,overloads:[[[In,In],(u,[i,l])=>i.evaluate(u)&&l.evaluate(u)],[ao(In),(u,i)=>{for(const l of i)if(!l.evaluate(u))return!1;return!0}]]},any:{type:In,overloads:[[[In,In],(u,[i,l])=>i.evaluate(u)||l.evaluate(u)],[ao(In),(u,i)=>{for(const l of i)if(l.evaluate(u))return!0;return!1}]]},"!":[In,[In],(u,[i])=>!i.evaluate(u)],"is-supported-script":[In,[Pn],(u,[i])=>{const l=u.globals&&u.globals.isSupportedScript;return!l||l(i.evaluate(u))}],upcase:[Pn,[Pn],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[Pn,[Pn],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[Pn,ao(An),(u,i)=>i.map(l=>to(l.evaluate(u))).join("")],"resolved-locale":[Pn,[ts],(u,[i])=>i.evaluate(u).resolvedLocale()]});class Ic{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new Lm,this._defaultValue=l?function(h){if(h.type==="color"&&so(h.default))return new zn(0,0,0,0);switch(h.type){case"color":return zn.parse(h.default)||null;case"padding":return Gi.parse(h.default)||null;case"numberArray":return Ar.parse(h.default)||null;case"colorArray":return ar.parse(h.default)||null;case"variableAnchorOffsetCollection":return jn.parse(h.default)||null;case"projectionDefinition":return xn.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,h,g,_,x){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(i,l,h,g,_,x){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new xi(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Ac(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Go}function Ec(u,i){const l=new $l(Go,kc,[],i?function(g){const _={color:oa,string:Pn,number:jt,enum:Pn,boolean:In,formatted:Xs,padding:Fi,numberArray:zl,colorArray:Ll,projectionDefinition:cc,resolvedImage:ns,variableAnchorOffsetCollection:Bl};return g.type==="array"?la(_[g.value]||An,g.length):_[g.type]}(i):void 0),h=l.parse(u,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ym(new Ic(h,i)):Ho(l.errors)}class Ql{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Xl(l.expression),this.globalStateRefs=Ko(l.expression)}evaluateWithoutErrorHandling(i,l,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,g,_,x)}evaluate(i,l,h,g,_,x){return this._styleExpression.evaluate(i,l,h,g,_,x)}}class Mc{constructor(i,l,h,g){this.kind=i,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Xl(l.expression),this.globalStateRefs=Ko(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,l,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,g,_,x)}evaluate(i,l,h,g,_,x){return this._styleExpression.evaluate(i,l,h,g,_,x)}interpolationFactor(i,l,h){return this.interpolationType?Fr.interpolationFactor(this.interpolationType,i,l,h):0}}function Ph(u,i){const l=Ec(u,i);if(l.result==="error")return l;const h=l.value.expression,g=Pc(h);if(!g&&!Wo(i))return Ho([new _i("","data expressions not supported")]);const _=qo(h,["zoom"]);if(!_&&!Th(i))return Ho([new _i("","zoom expressions not supported")]);const x=Zo(h);return x||_?x instanceof _i?Ho([x]):x instanceof Fr&&!kh(i)?Ho([new _i("",'"interpolate" expressions cannot be used with this property')]):Ym(x?new Mc(g?"camera":"composite",l.value,x.labels,x instanceof Fr?x.interpolation:void 0):new Ql(g?"constant":"source",l.value)):Ho([new _i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class eu{constructor(i,l){this._parameters=i,this._specification=l,pr(this,Jm(this._parameters,this._specification))}static deserialize(i){return new eu(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Zo(u){let i=null;if(u instanceof jl)i=Zo(u.result);else if(u instanceof Kr){for(const l of u.args)if(i=Zo(l),i)break}else(u instanceof Fo||u instanceof Fr)&&u.input instanceof wa&&u.input.name==="zoom"&&(i=u);return i instanceof _i||u.eachChild(l=>{const h=Zo(l);h instanceof _i?i=h:!i&&h?i=new _i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new _i("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Ko(u,i=new Set){return u instanceof Yl&&i.add(u.key),u.eachChild(l=>{Ko(l,i)}),i}function tu(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!tu(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Ih={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ks(u){if(u==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};tu(u)||(u=Dc(u));const i=Ec(u,Ih);if(i.result==="error")throw new Error(i.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,g)=>i.value.evaluate(l,h,{},g),needGeometry:tp(u),getGlobalStateRefs:()=>Ko(i.value.expression)}}function Rv(u,i){return u<i?-1:u>i?1:0}function tp(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let i=1;i<u.length;i++)if(tp(u[i]))return!0;return!1}function Dc(u){if(!u)return!0;const i=u[0];return u.length<=1?i!=="any":i==="=="?Ah(u[1],u[2],"=="):i==="!="?nu(Ah(u[1],u[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Ah(u[1],u[2],i):i==="any"?(l=u.slice(1),["any"].concat(l.map(Dc))):i==="all"?["all"].concat(u.slice(1).map(Dc)):i==="none"?["all"].concat(u.slice(1).map(Dc).map(nu)):i==="in"?np(u[1],u.slice(2)):i==="!in"?nu(np(u[1],u.slice(2))):i==="has"?ip(u[1]):i!=="!has"||nu(ip(u[1]));var l}function Ah(u,i,l){switch(u){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,u,i]}}function np(u,i){if(i.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",u,["literal",i.sort(Rv)]]:["filter-in-small",u,["literal",i]]}}function ip(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function nu(u){return["!",u]}function Rc(u){const i=typeof u;if(i==="number"||i==="boolean"||i==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let g="[";for(const _ of u)g+=`${Rc(_)},`;return`${g}]`}const l=Object.keys(u).sort();let h="{";for(let g=0;g<l.length;g++)h+=`${JSON.stringify(l[g])}:${Rc(u[l[g]])},`;return`${h}}`}function Lc(u){let i="";for(const l of Gt)i+=`/${Rc(u[l])}`;return i}function rp(u){const i=u.value;return i?[new Vt(u.key,i,"constants have been deprecated as of v8")]:[]}function Ai(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Ps(u){if(Array.isArray(u))return u.map(Ps);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const l in u)i[l]=Ps(u[l]);return i}return Ai(u)}function Sa(u){const i=u.key,l=u.value,h=u.valueSpec||{},g=u.objectElementValidators||{},_=u.style,x=u.styleSpec,T=u.validateSpec;let E=[];const D=Bn(l);if(D!=="object")return[new Vt(i,l,`object expected, ${D} found`)];for(const z in l){const j=z.split(".")[0],H=Ln(h,j)||h["*"];let Y;if(Ln(g,j))Y=g[j];else if(Ln(h,j))Y=T;else if(g["*"])Y=g["*"];else{if(!h["*"]){E.push(new Vt(i,l[z],`unknown property "${z}"`));continue}Y=T}E=E.concat(Y({key:(i&&`${i}.`)+z,value:l[z],valueSpec:H,style:_,styleSpec:x,object:l,objectKey:z,validateSpec:T},l))}for(const z in h)g[z]||h[z].required&&h[z].default===void 0&&l[z]===void 0&&E.push(new Vt(i,l,`missing required property "${z}"`));return E}function zc(u){const i=u.value,l=u.valueSpec,h=u.style,g=u.styleSpec,_=u.key,x=u.arrayElementValidator||u.validateSpec;if(Bn(i)!=="array")return[new Vt(_,i,`array expected, ${Bn(i)} found`)];if(l.length&&i.length!==l.length)return[new Vt(_,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Vt(_,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let T={type:l.value,values:l.values};g.$version<7&&(T.function=l.function),Bn(l.value)==="object"&&(T=l.value);let E=[];for(let D=0;D<i.length;D++)E=E.concat(x({array:i,arrayIndex:D,value:i[D],valueSpec:T,validateSpec:u.validateSpec,style:h,styleSpec:g,key:`${_}[${D}]`}));return E}function iu(u){const i=u.key,l=u.value,h=u.valueSpec;let g=Bn(l);return g==="number"&&l!=l&&(g="NaN"),g!=="number"?[new Vt(i,l,`number expected, ${g} found`)]:"minimum"in h&&l<h.minimum?[new Vt(i,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Vt(i,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function Yo(u){const i=u.valueSpec,l=Ai(u.value.type);let h,g,_,x={};const T=l!=="categorical"&&u.value.property===void 0,E=!T,D=Bn(u.value.stops)==="array"&&Bn(u.value.stops[0])==="array"&&Bn(u.value.stops[0][0])==="object",z=Sa({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Y){if(l==="identity")return[new Vt(Y.key,Y.value,'identity function may not have a "stops" property')];let J=[];const ne=Y.value;return J=J.concat(zc({key:Y.key,value:ne,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:j})),Bn(ne)==="array"&&ne.length===0&&J.push(new Vt(Y.key,ne,"array must have at least one stop")),J},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:i,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return l==="identity"&&T&&z.push(new Vt(u.key,u.value,'missing required property "property"')),l==="identity"||u.value.stops||z.push(new Vt(u.key,u.value,'missing required property "stops"')),l==="exponential"&&u.valueSpec.expression&&!kh(u.valueSpec)&&z.push(new Vt(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(E&&!Wo(u.valueSpec)?z.push(new Vt(u.key,u.value,"property functions not supported")):T&&!Th(u.valueSpec)&&z.push(new Vt(u.key,u.value,"zoom functions not supported"))),l!=="categorical"&&!D||u.value.property!==void 0||z.push(new Vt(u.key,u.value,'"property" property is required')),z;function j(Y){let J=[];const ne=Y.value,me=Y.key;if(Bn(ne)!=="array")return[new Vt(me,ne,`array expected, ${Bn(ne)} found`)];if(ne.length!==2)return[new Vt(me,ne,`array length 2 expected, length ${ne.length} found`)];if(D){if(Bn(ne[0])!=="object")return[new Vt(me,ne,`object expected, ${Bn(ne[0])} found`)];if(ne[0].zoom===void 0)return[new Vt(me,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new Vt(me,ne,"object stop key must have value")];if(_&&_>Ai(ne[0].zoom))return[new Vt(me,ne[0].zoom,"stop zoom values must appear in ascending order")];Ai(ne[0].zoom)!==_&&(_=Ai(ne[0].zoom),g=void 0,x={}),J=J.concat(Sa({key:`${me}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:iu,value:H}}))}else J=J.concat(H({key:`${me}[0]`,value:ne[0],validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},ne));return Ac(Ps(ne[1]))?J.concat([new Vt(`${me}[1]`,ne[1],"expressions are not allowed in function stops.")]):J.concat(Y.validateSpec({key:`${me}[1]`,value:ne[1],valueSpec:i,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function H(Y,J){const ne=Bn(Y.value),me=Ai(Y.value),xe=Y.value!==null?Y.value:J;if(h){if(ne!==h)return[new Vt(Y.key,xe,`${ne} stop domain type must match previous stop domain type ${h}`)]}else h=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new Vt(Y.key,xe,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&l!=="categorical"){let Ne=`number expected, ${ne} found`;return Wo(i)&&l===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Vt(Y.key,xe,Ne)]}return l!=="categorical"||ne!=="number"||isFinite(me)&&Math.floor(me)===me?l!=="categorical"&&ne==="number"&&g!==void 0&&me<g?[new Vt(Y.key,xe,"stop domain values must appear in ascending order")]:(g=me,l==="categorical"&&me in x?[new Vt(Y.key,xe,"stop domain values must be unique")]:(x[me]=!0,[])):[new Vt(Y.key,xe,`integer expected, found ${me}`)]}}function Xo(u){const i=(u.expressionContext==="property"?Ph:Ec)(Ps(u.value),u.valueSpec);if(i.result==="error")return i.value.map(h=>new Vt(`${u.key}${h.key}`,u.value,h.message));const l=i.value.expression||i.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!l.outputDefined())return[new Vt(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Xl(l))return[new Vt(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Xl(l))return[new Vt(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!qo(l,["zoom","feature-state"]))return[new Vt(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Pc(l))return[new Vt(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eh(u){const i=u.key,l=u.value,h=Bn(l);return h!=="string"?[new Vt(i,l,`color expected, ${h} found`)]:zn.parse(String(l))?[]:[new Vt(i,l,`color expected, "${l}" found`)]}function ru(u){const i=u.key,l=u.value,h=u.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(Ai(l))===-1&&g.push(new Vt(i,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Ai(l))===-1&&g.push(new Vt(i,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Mh(u){return tu(Ps(u.value))?Xo(pr({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ap(u)}function ap(u){const i=u.value,l=u.key;if(Bn(i)!=="array")return[new Vt(l,i,`array expected, ${Bn(i)} found`)];const h=u.styleSpec;let g,_=[];if(i.length<1)return[new Vt(l,i,"filter array must have at least 1 element")];switch(_=_.concat(ru({key:`${l}[0]`,value:i[0],valueSpec:h.filter_operator,style:u.style,styleSpec:u.styleSpec})),Ai(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Ai(i[1])==="$type"&&_.push(new Vt(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&_.push(new Vt(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=Bn(i[1]),g!=="string"&&_.push(new Vt(`${l}[1]`,i[1],`string expected, ${g} found`)));for(let x=2;x<i.length;x++)g=Bn(i[x]),Ai(i[1])==="$type"?_=_.concat(ru({key:`${l}[${x}]`,value:i[x],valueSpec:h.geometry_type,style:u.style,styleSpec:u.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Vt(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)_=_.concat(ap({key:`${l}[${x}]`,value:i[x],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":g=Bn(i[1]),i.length!==2?_.push(new Vt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Vt(`${l}[1]`,i[1],`string expected, ${g} found`))}return _}function sp(u,i){const l=u.key,h=u.validateSpec,g=u.style,_=u.styleSpec,x=u.value,T=u.objectKey,E=_[`${i}_${u.layerType}`];if(!E)return[];const D=T.match(/^(.*)-transition$/);if(i==="paint"&&D&&E[D[1]]&&E[D[1]].transition)return h({key:l,value:x,valueSpec:_.transition,style:g,styleSpec:_});const z=u.valueSpec||E[T];if(!z)return[new Vt(l,x,`unknown property "${T}"`)];let j;if(Bn(x)==="string"&&Wo(z)&&!z.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new Vt(l,x,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const H=[];return u.layerType==="symbol"&&(T==="text-field"&&g&&!g.glyphs&&H.push(new Vt(l,x,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&so(Ps(x))&&Ai(x.type)==="identity"&&H.push(new Vt(l,x,'"text-font" does not support identity functions'))),H.concat(h({key:u.key,value:x,valueSpec:z,style:g,styleSpec:_,expressionContext:"property",propertyType:i,propertyKey:T}))}function Jo(u){return sp(u,"paint")}function Qo(u){return sp(u,"layout")}function Yr(u){let i=[];const l=u.value,h=u.key,g=u.style,_=u.styleSpec;if(Bn(l)!=="object")return[new Vt(h,l,`object expected, ${Bn(l)} found`)];l.type||l.ref||i.push(new Vt(h,l,'either "type" or "ref" is required'));let x=Ai(l.type);const T=Ai(l.ref);if(l.id){const E=Ai(l.id);for(let D=0;D<u.arrayIndex;D++){const z=g.layers[D];Ai(z.id)===E&&i.push(new Vt(h,l.id,`duplicate layer id "${l.id}", previously used at line ${z.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(D=>{D in l&&i.push(new Vt(h,l[D],`"${D}" is prohibited for ref layers`))}),g.layers.forEach(D=>{Ai(D.id)===T&&(E=D)}),E?E.ref?i.push(new Vt(h,l.ref,"ref cannot reference another ref layer")):x=Ai(E.type):i.push(new Vt(h,l.ref,`ref layer "${T}" not found`))}else if(x!=="background")if(l.source){const E=g.sources&&g.sources[l.source],D=E&&Ai(E.type);E?D==="vector"&&x==="raster"?i.push(new Vt(h,l.source,`layer "${l.id}" requires a raster source`)):D!=="raster-dem"&&x==="hillshade"||D!=="raster-dem"&&x==="color-relief"?i.push(new Vt(h,l.source,`layer "${l.id}" requires a raster-dem source`)):D==="raster"&&x!=="raster"?i.push(new Vt(h,l.source,`layer "${l.id}" requires a vector source`)):D!=="vector"||l["source-layer"]?D==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?i.push(new Vt(h,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||D==="geojson"&&E.lineMetrics||i.push(new Vt(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Vt(h,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Vt(h,l.source,`source "${l.source}" not found`))}else i.push(new Vt(h,l,'missing required property "source"'));return i=i.concat(Sa({key:h,value:l,valueSpec:_.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${h}.type`,value:l.type,valueSpec:_.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:l,objectKey:"type"}),filter:Mh,layout:E=>Sa({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":D=>Qo(pr({layerType:x},D))}}),paint:E=>Sa({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":D=>Jo(pr({layerType:x},D))}})}})),i}function Aa(u){const i=u.value,l=u.key,h=Bn(i);return h!=="string"?[new Vt(l,i,`string expected, ${h} found`)]:[]}const Dh={promoteId:function({key:u,value:i}){if(Bn(i)==="string")return Aa({key:u,value:i});{const l=[];for(const h in i)l.push(...Aa({key:`${u}.${h}`,value:i[h]}));return l}}};function op(u){const i=u.value,l=u.key,h=u.styleSpec,g=u.style,_=u.validateSpec;if(!i.type)return[new Vt(l,i,'"type" is required')];const x=Ai(i.type);let T;switch(x){case"vector":case"raster":return T=Sa({key:l,value:i,valueSpec:h[`source_${x.replace("-","_")}`],style:u.style,styleSpec:h,objectElementValidators:Dh,validateSpec:_}),T;case"raster-dem":return T=function(E){var D;const z=(D=E.sourceName)!==null&&D!==void 0?D:"",j=E.value,H=E.styleSpec,Y=H.source_raster_dem,J=E.style;let ne=[];const me=Bn(j);if(j===void 0)return ne;if(me!=="object")return ne.push(new Vt("source_raster_dem",j,`object expected, ${me} found`)),ne;const xe=Ai(j.encoding)==="custom",Ne=["redFactor","greenFactor","blueFactor","baseShift"],Pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const K in j)!xe&&Ne.includes(K)?ne.push(new Vt(K,j[K],`In "${z}": "${K}" is only valid when "encoding" is set to "custom". ${Pe} encoding found`)):Y[K]?ne=ne.concat(E.validateSpec({key:K,value:j[K],valueSpec:Y[K],validateSpec:E.validateSpec,style:J,styleSpec:H})):ne.push(new Vt(K,j[K],`unknown property "${K}"`));return ne}({sourceName:l,value:i,style:u.style,styleSpec:h,validateSpec:_}),T;case"geojson":if(T=Sa({key:l,value:i,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:Dh}),i.cluster)for(const E in i.clusterProperties){const[D,z]=i.clusterProperties[E],j=typeof D=="string"?[D,["accumulated"],["get",E]]:D;T.push(...Xo({key:`${l}.${E}.map`,value:z,expressionContext:"cluster-map"})),T.push(...Xo({key:`${l}.${E}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return T;case"video":return Sa({key:l,value:i,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return Sa({key:l,value:i,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new Vt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ru({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function lp(u){const i=u.value,l=u.styleSpec,h=l.light,g=u.style;let _=[];const x=Bn(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Vt("light",i,`object expected, ${x} found`)]),_;for(const T in i){const E=T.match(/^(.*)-transition$/);_=_.concat(E&&h[E[1]]&&h[E[1]].transition?u.validateSpec({key:T,value:i[T],valueSpec:l.transition,validateSpec:u.validateSpec,style:g,styleSpec:l}):h[T]?u.validateSpec({key:T,value:i[T],valueSpec:h[T],validateSpec:u.validateSpec,style:g,styleSpec:l}):[new Vt(T,i[T],`unknown property "${T}"`)])}return _}function el(u){const i=u.value,l=u.styleSpec,h=l.sky,g=u.style,_=Bn(i);if(i===void 0)return[];if(_!=="object")return[new Vt("sky",i,`object expected, ${_} found`)];let x=[];for(const T in i)x=x.concat(h[T]?u.validateSpec({key:T,value:i[T],valueSpec:h[T],style:g,styleSpec:l}):[new Vt(T,i[T],`unknown property "${T}"`)]);return x}function Rh(u){const i=u.value,l=u.styleSpec,h=l.terrain,g=u.style;let _=[];const x=Bn(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Vt("terrain",i,`object expected, ${x} found`)]),_;for(const T in i)_=_.concat(h[T]?u.validateSpec({key:T,value:i[T],valueSpec:h[T],validateSpec:u.validateSpec,style:g,styleSpec:l}):[new Vt(T,i[T],`unknown property "${T}"`)]);return _}function Bc(u){let i=[];const l=u.value,h=u.key;if(Array.isArray(l)){const g=[],_=[];for(const x in l)l[x].id&&g.includes(l[x].id)&&i.push(new Vt(h,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),g.push(l[x].id),l[x].url&&_.includes(l[x].url)&&i.push(new Vt(h,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),_.push(l[x].url),i=i.concat(Sa({key:`${h}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return i}return Aa({key:h,value:l})}function up(u){return i=u.value,i&&i.constructor===Object?[]:[new Vt(u.key,u.value,`object expected, ${Bn(u.value)} found`)];var i}const Vc={"*":()=>[],array:zc,boolean:function(u){const i=u.value,l=u.key,h=Bn(i);return h!=="boolean"?[new Vt(l,i,`boolean expected, ${h} found`)]:[]},number:iu,color:Eh,constants:rp,enum:ru,filter:Mh,function:Yo,layer:Yr,object:Sa,source:op,light:lp,sky:el,terrain:Rh,projection:function(u){const i=u.value,l=u.styleSpec,h=l.projection,g=u.style,_=Bn(i);if(i===void 0)return[];if(_!=="object")return[new Vt("projection",i,`object expected, ${_} found`)];let x=[];for(const T in i)x=x.concat(h[T]?u.validateSpec({key:T,value:i[T],valueSpec:h[T],style:g,styleSpec:l}):[new Vt(T,i[T],`unknown property "${T}"`)]);return x},projectionDefinition:function(u){const i=u.key;let l=u.value;l=l instanceof String?l.valueOf():l;const h=Bn(l);return h!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(l)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(l)?["array","string"].includes(h)?[]:[new Vt(i,l,`projection expected, invalid type "${h}" found`)]:[new Vt(i,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Aa,formatted:function(u){return Aa(u).length===0?[]:Xo(u)},resolvedImage:function(u){return Aa(u).length===0?[]:Xo(u)},padding:function(u){const i=u.key,l=u.value;if(Bn(l)==="array"){if(l.length<1||l.length>4)return[new Vt(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<l.length;_++)g=g.concat(u.validateSpec({key:`${i}[${_}]`,value:l[_],validateSpec:u.validateSpec,valueSpec:h}));return g}return iu({key:i,value:l,valueSpec:{}})},numberArray:function(u){const i=u.key,l=u.value;if(Bn(l)==="array"){const h={type:"number"};if(l.length<1)return[new Vt(i,l,"array length at least 1 expected, length 0 found")];let g=[];for(let _=0;_<l.length;_++)g=g.concat(u.validateSpec({key:`${i}[${_}]`,value:l[_],validateSpec:u.validateSpec,valueSpec:h}));return g}return iu({key:i,value:l,valueSpec:{}})},colorArray:function(u){const i=u.key,l=u.value;if(Bn(l)==="array"){if(l.length<1)return[new Vt(i,l,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<l.length;g++)h=h.concat(Eh({key:`${i}[${g}]`,value:l[g]}));return h}return Eh({key:i,value:l})},variableAnchorOffsetCollection:function(u){const i=u.key,l=u.value,h=Bn(l),g=u.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Vt(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<l.length;x+=2)_=_.concat(ru({key:`${i}[${x}]`,value:l[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(zc({key:`${i}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:g}));return _},sprite:Bc,state:up};function Oc(u){const i=u.value,l=u.valueSpec,h=u.styleSpec;return u.validateSpec=Oc,l.expression&&so(Ai(i))?Yo(u):l.expression&&Ac(Ps(i))?Xo(u):l.type&&Vc[l.type]?Vc[l.type](u):Sa(pr({},u,{valueSpec:l.type?h[l.type]:l}))}function tl(u){const i=u.value,l=u.key,h=Aa(u);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new Vt(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new Vt(l,i,'"glyphs" url must include a "{range}" token'))),h}function Ca(u,i=Oe){let l=[];return l=l.concat(Oc({key:"",value:u,valueSpec:i.$root,styleSpec:i,style:u,validateSpec:Oc,objectElementValidators:{glyphs:tl,"*":()=>[]}})),u.constants&&(l=l.concat(rp({key:"constants",value:u.constants}))),cp(l)}function Ea(u){return function(i){return u({...i,validateSpec:Oc})}}function cp(u){return[].concat(u).sort((i,l)=>i.line-l.line)}function $r(u){return function(...i){return cp(u.apply(this,i))}}Ca.source=$r(Ea(op)),Ca.sprite=$r(Ea(Bc)),Ca.glyphs=$r(Ea(tl)),Ca.light=$r(Ea(lp)),Ca.sky=$r(Ea(el)),Ca.terrain=$r(Ea(Rh)),Ca.state=$r(Ea(up)),Ca.layer=$r(Ea(Yr)),Ca.filter=$r(Ea(Mh)),Ca.paintProperty=$r(Ea(Jo)),Ca.layoutProperty=$r(Ea(Qo));const nl=Ca,Lv=nl.light,Fc=nl.sky,zv=nl.paintProperty,Lh=nl.layoutProperty;function au(u,i){let l=!1;if(i&&i.length)for(const h of i)u.fire(new Xe(new Error(h.message))),l=!0;return l}class il{constructor(i,l,h){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const x=new Int32Array(this.arrayBuffer);i=x[0],this.d=(l=x[1])+2*(h=x[2]);for(let E=0;E<this.d*this.d;E++){const D=x[3+E],z=x[3+E+1];g.push(D===z?null:x.subarray(D,z))}const T=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],T),this.bboxes=x.subarray(T),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=h,this.scale=l/i,this.uid=0;const _=h/l*i;this.min=-_,this.max=i+_}insert(i,l,h,g,_){this._forEachCell(l,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,h,g,_,x){this.cells[_].push(x)}query(i,l,h,g,_){const x=this.min,T=this.max;if(i<=x&&l<=x&&T<=h&&T<=g&&!_)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(i,l,h,g,this._queryCell,E,{},_),E}}_queryCell(i,l,h,g,_,x,T,E){const D=this.cells[_];if(D!==null){const z=this.keys,j=this.bboxes;for(let H=0;H<D.length;H++){const Y=D[H];if(T[Y]===void 0){const J=4*Y;(E?E(j[J+0],j[J+1],j[J+2],j[J+3]):i<=j[J+2]&&l<=j[J+3]&&h>=j[J+0]&&g>=j[J+1])?(T[Y]=!0,x.push(z[Y])):T[Y]=!1}}}}_forEachCell(i,l,h,g,_,x,T,E){const D=this._convertToCellCoord(i),z=this._convertToCellCoord(l),j=this._convertToCellCoord(h),H=this._convertToCellCoord(g);for(let Y=D;Y<=j;Y++)for(let J=z;J<=H;J++){const ne=this.d*J+Y;if((!E||E(this._convertFromCellCoord(Y),this._convertFromCellCoord(J),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(J+1)))&&_.call(this,i,l,h,g,ne,x,T,E))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(l+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=l;for(let x=0;x<i.length;x++){const T=i[x];g[3+x]=_,g.set(T,_),_+=T.length}return g[3+i.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+i.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(i,l){const h=i.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(i){return new il(i.buffer)}}const Wa={};function Wt(u,i,l={}){if(Wa[u])throw new Error(`${u} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:u,writeable:!1}),Wa[u]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}Wt("Object",Object),Wt("Set",Set),Wt("TransferableGridIndex",il),Wt("Color",zn),Wt("Error",Error),Wt("AJAXError",Ce),Wt("ResolvedImage",Zr),Wt("StylePropertyFunction",eu),Wt("StyleExpression",Ic,{omit:["_evaluator"]}),Wt("ZoomDependentExpression",Mc),Wt("ZoomConstantExpression",Ql),Wt("CompoundExpression",wa,{omit:["_evaluate"]});for(const u in Go)Go[u]._classRegistryKey||Wt(`Expression_${u}`,Go[u]);function zh(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function su(u){return u.$name||u.constructor._classRegistryKey}function Bh(u){return!function(i){if(i===null||typeof i!="object")return!1;const l=su(i);return!(!l||l==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||zh(u)||Pt(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function ou(u,i){if(Bh(u))return(zh(u)||Pt(u))&&i&&i.push(u),ArrayBuffer.isView(u)&&i&&i.push(u.buffer),u instanceof ImageData&&i&&i.push(u.data.buffer),u;if(Array.isArray(u)){const _=[];for(const x of u)_.push(ou(x,i));return _}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const l=su(u);if(!l)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!Wa[l])throw new Error(`${l} is not registered.`);const{klass:h}=Wa[l],g=h.serialize?h.serialize(u,i):{};if(h.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in u){if(!u.hasOwnProperty(_)||Wa[l].omit.indexOf(_)>=0)continue;const x=u[_];g[_]=Wa[l].shallow.indexOf(_)>=0?x:ou(x,i)}u instanceof Error&&(g.message=u.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(g.$name=l),g}function rl(u){if(Bh(u))return u;if(Array.isArray(u))return u.map(rl);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const i=su(u)||"Object";if(!Wa[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=Wa[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(u);const h=Object.create(l.prototype);for(const g of Object.keys(u)){if(g==="$name")continue;const _=u[g];h[g]=Wa[i].shallow.indexOf(g)>=0?_:rl(_)}return h}class Vh{constructor(){this.first=!0}update(i,l){const h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}const Vn={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Oh(u){for(const i of u)if(jc(i.charCodeAt(0)))return!0;return!1}function dp(u){for(const i of u)if(!Vv(i.charCodeAt(0)))return!1;return!0}function $c(u){const i=u.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(i.join("|"),"u")}const Bv=$c(["Arab","Dupl","Mong","Ougr","Syrc"]);function Vv(u){return!Bv.test(String.fromCodePoint(u))}const Fh=$c(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function jc(u){return!(u!==746&&u!==747&&(u<4352||!(Vn["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Vn["CJK Compatibility"](u)||Vn["CJK Strokes"](u)||!(!Vn["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Vn["Enclosed CJK Letters and Months"](u)||Vn["Ideographic Description Characters"](u)||Vn.Kanbun(u)||Vn.Katakana(u)&&u!==12540||!(!Vn["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Vn["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Vn["Vertical Forms"](u)||Vn["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Fh.test(String.fromCodePoint(u)))))}function $h(u){return!(jc(u)||function(i){return!!(Vn["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Vn["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Vn["Letterlike Symbols"](i)||Vn["Number Forms"](i)||Vn["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Vn["Control Pictures"](i)&&i!==9251||Vn["Optical Character Recognition"](i)||Vn["Enclosed Alphanumerics"](i)||Vn["Geometric Shapes"](i)||Vn["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Vn["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Vn["CJK Symbols and Punctuation"](i)||Vn.Katakana(i)||Vn["Private Use Area"](i)||Vn["CJK Compatibility Forms"](i)||Vn["Small Form Variants"](i)||Vn["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(u))}const hp=$c(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function lu(u){return hp.test(String.fromCodePoint(u))}function Ov(u,i){return!(!i&&lu(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Vn.Khmer(u))}function jh(u){for(const i of u)if(lu(i.charCodeAt(0)))return!0;return!1}const Is=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(Is.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,i){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const l=u.pluginURL,h=new Promise(_=>{this.loadScriptResolve=_});i(l);const g=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([h,g]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:l};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class pi{constructor(i,l){this.zoom=i,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new Vh,this.transition=l.transition||{},this.globalState=l.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vh,this.transition={},this.globalState={})}isSupportedScript(i){return function(l,h){for(const g of l)if(!Ov(g.charCodeAt(0),h))return!1;return!0}(i,Is.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class uu{constructor(i,l){this.property=i,this.value=l,this.expression=function(h,g){if(so(h))return new eu(h,g);if(Ac(h)){const _=Ph(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=zn.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?g.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?_=jn.parse(h):g.type==="projectionDefinition"&&typeof h=="string"&&(_=xn.parse(h)):_=ar.parse(h):_=Ar.parse(h):_=Gi.parse(h),{globalStateRefs:new Set,kind:"constant",evaluate:()=>_}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,l,h){return this.property.possiblyEvaluate(this,i,l,h)}}class Nc{constructor(i){this.property=i,this.value=new uu(i,void 0)}transitioned(i,l){return new fp(this.property,this.value,l,St({},i.transition,this.transition),i.now)}untransitioned(){return new fp(this.property,this.value,null,{},0)}}class Nh{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Ze(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Nc(this._values[i].property)),this._values[i].value=new uu(this._values[i].property,l===null?void 0:Ze(l))}getTransition(i){return Ze(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Nc(this._values[i].property)),this._values[i].transition=Ze(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h);const g=this.getTransition(l);g!==void 0&&(i[`${l}-transition`]=g)}return i}transitioned(i,l){const h=new mp(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(i,l._values[g]);return h}untransitioned(){const i=new mp(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class fp{constructor(i,l,h,g,_){this.property=i,this.value=l,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(i,l,h){const g=i.now||0,_=this.value.possiblyEvaluate(i,l,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(i,l,h);{const T=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,h),_,xt(T))}}return _}}class mp{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,h){const g=new Uc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,l,h);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Fv{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Ze(this._values[i].value)}setValue(i,l){this._values[i]=new uu(this._values[i].property,l===null?void 0:Ze(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h)}return i}possiblyEvaluate(i,l,h){const g=new Uc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,l,h);return g}}class Za{constructor(i,l,h){this.property=i,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,h,g){return this.property.evaluate(this.value,this.parameters,i,l,h,g)}}class Uc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Xt{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,h){const g=ua[this.specification.type];return g?g(i,l,h):i}}class un{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,h,g){return new Za(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},h,g)}:i.expression,l)}interpolate(i,l,h){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Za(this,{kind:"constant",value:void 0},i.parameters);const g=ua[this.specification.type];if(g){const _=g(i.value.value,l.value.value,h);return new Za(this,{kind:"constant",value:_},i.parameters)}return i}evaluate(i,l,h,g,_,x){return i.kind==="constant"?i.value:i.evaluate(l,h,g,_,x)}}class Gc extends un{possiblyEvaluate(i,l,h,g){if(i.value===void 0)return new Za(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const _=i.expression.evaluate(l,null,{},h,g),x=i.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,T=this._calculate(x,x,x,l);return new Za(this,{kind:"constant",value:T},l)}if(i.expression.kind==="camera"){const _=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Za(this,{kind:"constant",value:_},l)}return new Za(this,i.expression,l)}evaluate(i,l,h,g,_,x){if(i.kind==="source"){const T=i.evaluate(l,h,g,_,x);return this._calculate(T,T,T,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},h,g),i.evaluate({zoom:Math.floor(l.zoom)},h,g),i.evaluate({zoom:Math.floor(l.zoom)+1},h,g),l):i.value}_calculate(i,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:h,to:l}}interpolate(i){return i}}class Uh{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const _=i.expression.evaluate(l,null,{},h,g);return this._calculate(_,_,_,l)}return this._calculate(i.expression.evaluate(new pi(Math.floor(l.zoom-1),l)),i.expression.evaluate(new pi(Math.floor(l.zoom),l)),i.expression.evaluate(new pi(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:h,to:l}}interpolate(i){return i}}class cu{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,g){return!!i.expression.evaluate(l,null,{},h,g)}interpolate(){return!1}}class jr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const h=i[l];h.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new uu(h,void 0),_=this.defaultTransitionablePropertyValues[l]=new Nc(h);this.defaultTransitioningPropertyValues[l]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}Wt("DataDrivenProperty",un),Wt("DataConstantProperty",Xt),Wt("CrossFadedDataDrivenProperty",Gc),Wt("CrossFadedProperty",Uh),Wt("ColorRampProperty",cu);const pp="-transition";class gr extends Ct{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=ks(i.filter)),l.layout&&(this._unevaluatedLayout=new Fv(l.layout)),l.paint)){this._transitionablePaint=new Nh(l.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Uc(l.paint)}}setFilter(i){this.filter=i,this._featureFilter=ks(i)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[l];for(const g of h.getGlobalStateRefs())i.add(g)}for(const l of this._featureFilter.getGlobalStateRefs())i.add(l);return i}setLayoutProperty(i,l,h={}){l!=null&&this._validate(Lh,`layers.${this.id}.layout.${i}`,i,l,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(pp)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,h={}){if(l!=null&&this._validate(zv,`layers.${this.id}.paint.${i}`,i,l,h))return!1;if(i.endsWith(pp))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[i],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),T=g.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const E=this._transitionablePaint._values[i].value;return E.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(i,T,E)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Le(i,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(i,l,h,g,_={}){return(!_||_.validate!==!1)&&au(this,i.call(nl,{key:l,layerType:this.type,objectKey:h,value:g,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Za&&Wo(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const gp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oo{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ei(u,i=1){let l=0,h=0;return{members:u.map(g=>{const _=gp[g.type].BYTES_PER_ELEMENT,x=l=vp(l,Math.max(i,_)),T=g.components||1;return h=Math.max(h,_),l+=_*T,{name:g.name,type:g.type,components:T,offset:x}}),size:vp(l,Math.max(h,i)),alignment:i}}function vp(u,i){return Math.ceil(u/i)*i}class As extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.int16[g+0]=l,this.int16[g+1]=h,i}}As.prototype.bytesPerElement=4,Wt("StructArrayLayout2i4",As);class Es extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.int16[_+0]=l,this.int16[_+1]=h,this.int16[_+2]=g,i}}Es.prototype.bytesPerElement=6,Wt("StructArrayLayout3i6",Es);class Gh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,l,h,g)}emplace(i,l,h,g,_){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,i}}Gh.prototype.bytesPerElement=8,Wt("StructArrayLayout4i8",Gh);class qc extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const T=this.length;return this.resize(T+1),this.emplace(T,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,T){const E=6*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=T,i}}qc.prototype.bytesPerElement=12,Wt("StructArrayLayout2i4i12",qc);class lo extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const T=this.length;return this.resize(T+1),this.emplace(T,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,T){const E=4*i,D=8*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.uint8[D+4]=g,this.uint8[D+5]=_,this.uint8[D+6]=x,this.uint8[D+7]=T,i}}lo.prototype.bytesPerElement=8,Wt("StructArrayLayout2i4ub8",lo);class du extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.float32[g+0]=l,this.float32[g+1]=h,i}}du.prototype.bytesPerElement=8,Wt("StructArrayLayout2f8",du);class qh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,T,E,D,z){const j=this.length;return this.resize(j+1),this.emplace(j,i,l,h,g,_,x,T,E,D,z)}emplace(i,l,h,g,_,x,T,E,D,z,j){const H=10*i;return this.uint16[H+0]=l,this.uint16[H+1]=h,this.uint16[H+2]=g,this.uint16[H+3]=_,this.uint16[H+4]=x,this.uint16[H+5]=T,this.uint16[H+6]=E,this.uint16[H+7]=D,this.uint16[H+8]=z,this.uint16[H+9]=j,i}}qh.prototype.bytesPerElement=20,Wt("StructArrayLayout10ui20",qh);class Hc extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,T,E,D,z,j,H){const Y=this.length;return this.resize(Y+1),this.emplace(Y,i,l,h,g,_,x,T,E,D,z,j,H)}emplace(i,l,h,g,_,x,T,E,D,z,j,H,Y){const J=12*i;return this.int16[J+0]=l,this.int16[J+1]=h,this.int16[J+2]=g,this.int16[J+3]=_,this.uint16[J+4]=x,this.uint16[J+5]=T,this.uint16[J+6]=E,this.uint16[J+7]=D,this.int16[J+8]=z,this.int16[J+9]=j,this.int16[J+10]=H,this.int16[J+11]=Y,i}}Hc.prototype.bytesPerElement=24,Wt("StructArrayLayout4i4ui4i24",Hc);class Hh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.float32[_+0]=l,this.float32[_+1]=h,this.float32[_+2]=g,i}}Hh.prototype.bytesPerElement=12,Wt("StructArrayLayout3f12",Hh);class v extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}v.prototype.bytesPerElement=4,Wt("StructArrayLayout1ul4",v);class t extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,T,E,D){const z=this.length;return this.resize(z+1),this.emplace(z,i,l,h,g,_,x,T,E,D)}emplace(i,l,h,g,_,x,T,E,D,z){const j=10*i,H=5*i;return this.int16[j+0]=l,this.int16[j+1]=h,this.int16[j+2]=g,this.int16[j+3]=_,this.int16[j+4]=x,this.int16[j+5]=T,this.uint32[H+3]=E,this.uint16[j+8]=D,this.uint16[j+9]=z,i}}t.prototype.bytesPerElement=20,Wt("StructArrayLayout6i1ul2ui20",t);class o extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const T=this.length;return this.resize(T+1),this.emplace(T,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,T){const E=6*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=T,i}}o.prototype.bytesPerElement=12,Wt("StructArrayLayout2i2i2i12",o);class m extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,g,_)}emplace(i,l,h,g,_,x){const T=4*i,E=8*i;return this.float32[T+0]=l,this.float32[T+1]=h,this.float32[T+2]=g,this.int16[E+6]=_,this.int16[E+7]=x,i}}m.prototype.bytesPerElement=16,Wt("StructArrayLayout2f1f2i16",m);class p extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const T=this.length;return this.resize(T+1),this.emplace(T,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,T){const E=16*i,D=4*i,z=8*i;return this.uint8[E+0]=l,this.uint8[E+1]=h,this.float32[D+1]=g,this.float32[D+2]=_,this.int16[z+6]=x,this.int16[z+7]=T,i}}p.prototype.bytesPerElement=16,Wt("StructArrayLayout2ub2f2i16",p);class y extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.uint16[_+0]=l,this.uint16[_+1]=h,this.uint16[_+2]=g,i}}y.prototype.bytesPerElement=6,Wt("StructArrayLayout3ui6",y);class S extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,T,E,D,z,j,H,Y,J,ne,me,xe){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,i,l,h,g,_,x,T,E,D,z,j,H,Y,J,ne,me,xe)}emplace(i,l,h,g,_,x,T,E,D,z,j,H,Y,J,ne,me,xe,Ne){const Pe=24*i,K=12*i,de=48*i;return this.int16[Pe+0]=l,this.int16[Pe+1]=h,this.uint16[Pe+2]=g,this.uint16[Pe+3]=_,this.uint32[K+2]=x,this.uint32[K+3]=T,this.uint32[K+4]=E,this.uint16[Pe+10]=D,this.uint16[Pe+11]=z,this.uint16[Pe+12]=j,this.float32[K+7]=H,this.float32[K+8]=Y,this.uint8[de+36]=J,this.uint8[de+37]=ne,this.uint8[de+38]=me,this.uint32[K+10]=xe,this.int16[Pe+22]=Ne,i}}S.prototype.bytesPerElement=48,Wt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",S);class P extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,T,E,D,z,j,H,Y,J,ne,me,xe,Ne,Pe,K,de,Ae,it,It,dt,yt,Rt,Et){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,i,l,h,g,_,x,T,E,D,z,j,H,Y,J,ne,me,xe,Ne,Pe,K,de,Ae,it,It,dt,yt,Rt,Et)}emplace(i,l,h,g,_,x,T,E,D,z,j,H,Y,J,ne,me,xe,Ne,Pe,K,de,Ae,it,It,dt,yt,Rt,Et,Lt){const wt=32*i,Yt=16*i;return this.int16[wt+0]=l,this.int16[wt+1]=h,this.int16[wt+2]=g,this.int16[wt+3]=_,this.int16[wt+4]=x,this.int16[wt+5]=T,this.int16[wt+6]=E,this.int16[wt+7]=D,this.uint16[wt+8]=z,this.uint16[wt+9]=j,this.uint16[wt+10]=H,this.uint16[wt+11]=Y,this.uint16[wt+12]=J,this.uint16[wt+13]=ne,this.uint16[wt+14]=me,this.uint16[wt+15]=xe,this.uint16[wt+16]=Ne,this.uint16[wt+17]=Pe,this.uint16[wt+18]=K,this.uint16[wt+19]=de,this.uint16[wt+20]=Ae,this.uint16[wt+21]=it,this.uint16[wt+22]=It,this.uint32[Yt+12]=dt,this.float32[Yt+13]=yt,this.float32[Yt+14]=Rt,this.uint16[wt+30]=Et,this.uint16[wt+31]=Lt,i}}P.prototype.bytesPerElement=64,Wt("StructArrayLayout8i15ui1ul2f2ui64",P);class M extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}M.prototype.bytesPerElement=4,Wt("StructArrayLayout1f4",M);class L extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.uint16[6*i+0]=l,this.float32[_+1]=h,this.float32[_+2]=g,i}}L.prototype.bytesPerElement=12,Wt("StructArrayLayout1ui2f12",L);class V extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=4*i;return this.uint32[2*i+0]=l,this.uint16[_+2]=h,this.uint16[_+3]=g,i}}V.prototype.bytesPerElement=8,Wt("StructArrayLayout1ul2ui8",V);class U extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.uint16[g+0]=l,this.uint16[g+1]=h,i}}U.prototype.bytesPerElement=4,Wt("StructArrayLayout2ui4",U);class N extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}N.prototype.bytesPerElement=2,Wt("StructArrayLayout1ui2",N);class W extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,l,h,g)}emplace(i,l,h,g,_){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,i}}W.prototype.bytesPerElement=16,Wt("StructArrayLayout4f16",W);class Q extends oo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}Q.prototype.size=20;class ve extends t{get(i){return new Q(this,i)}}Wt("CollisionBoxArray",ve);class ge extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class ye extends S{get(i){return new ge(this,i)}}Wt("PlacedSymbolArray",ye);class we extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}we.prototype.size=64;class Ie extends P{get(i){return new we(this,i)}}Wt("SymbolInstanceArray",Ie);class Te extends M{getoffsetX(i){return this.float32[1*i+0]}}Wt("GlyphOffsetArray",Te);class De extends Es{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Wt("SymbolLineVertexArray",De);class Ve extends oo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ve.prototype.size=12;class ke extends L{get(i){return new Ve(this,i)}}Wt("TextAnchorOffsetArray",ke);class Ge extends oo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ge.prototype.size=8;class at extends V{get(i){return new Ge(this,i)}}Wt("FeatureIndexArray",at);class et extends As{}class nt extends As{}class ot extends As{}class $t extends qc{}class Ot extends lo{}class At extends du{}class Kt extends qh{}class Tn extends Hc{}class Zn extends Hh{}class Si extends v{}class ni extends o{}class Ci extends p{}class ai extends y{}class ii extends U{}const si=Ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:vr}=si;class Nn{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,l,h,g){const _=this.segments[this.segments.length-1];return i>Nn.MAX_VERTEX_ARRAY_LENGTH&&Je(`Max vertices per segment is ${Nn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Nn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+i>Nn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g?this.createNewSegment(l,h,g):_}createNewSegment(i,l,h){const g={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(g.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(i,l,h){return this.prepareSegment(0,i,l,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,h,g){return new Nn([{vertexOffset:i,primitiveOffset:l,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function or(u,i){return 256*(u=st(Math.floor(u),0,255))+st(Math.floor(i),0,255)}Nn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wt("SegmentVector",Nn);const yr=Ei([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ms,Ds,Rs,Ka={exports:{}},hu={exports:{}},fu={exports:{}},al=function(){if(Rs)return Ka.exports;Rs=1;var u=(Ms||(Ms=1,hu.exports=function(l,h){var g,_,x,T,E,D,z,j;for(_=l.length-(g=3&l.length),x=h,E=3432918353,D=461845907,j=0;j<_;)z=255&l.charCodeAt(j)|(255&l.charCodeAt(++j))<<8|(255&l.charCodeAt(++j))<<16|(255&l.charCodeAt(++j))<<24,++j,x=27492+(65535&(T=5*(65535&(x=(x^=z=(65535&(z=(z=(65535&z)*E+(((z>>>16)*E&65535)<<16)&4294967295)<<15|z>>>17))*D+(((z>>>16)*D&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(z=0,g){case 3:z^=(255&l.charCodeAt(j+2))<<16;case 2:z^=(255&l.charCodeAt(j+1))<<8;case 1:x^=z=(65535&(z=(z=(65535&(z^=255&l.charCodeAt(j)))*E+(((z>>>16)*E&65535)<<16)&4294967295)<<15|z>>>17))*D+(((z>>>16)*D&65535)<<16)&4294967295}return x^=l.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),hu.exports),i=(Ds||(Ds=1,fu.exports=function(l,h){for(var g,_=l.length,x=h^_,T=0;_>=4;)g=1540483477*(65535&(g=255&l.charCodeAt(T)|(255&l.charCodeAt(++T))<<8|(255&l.charCodeAt(++T))<<16|(255&l.charCodeAt(++T))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),_-=4,++T;switch(_){case 3:x^=(255&l.charCodeAt(T+2))<<16;case 2:x^=(255&l.charCodeAt(T+1))<<8;case 1:x=1540483477*(65535&(x^=255&l.charCodeAt(T)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),fu.exports);return Ka.exports=u,Ka.exports.murmur3=u,Ka.exports.murmur2=i,Ka.exports}(),Xr=b(al);class Ma{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,h,g){this.ids.push(Ls(i)),this.positions.push(l,h,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Ls(i);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=l?g=x:h=x+1}const _=[];for(;this.ids[h]===l;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(i,l){const h=new Float64Array(i.ids),g=new Uint32Array(i.positions);return uo(h,g,0,h.length-1),l&&l.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(i){const l=new Ma;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Ls(u){const i=+u;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Xr(String(u))}function uo(u,i,l,h){for(;l<h;){const g=u[l+h>>1];let _=l-1,x=h+1;for(;;){do _++;while(u[_]<g);do x--;while(u[x]>g);if(_>=x)break;Vi(u,_,x),Vi(i,3*_,3*x),Vi(i,3*_+1,3*x+1),Vi(i,3*_+2,3*x+2)}x-l<h-x?(uo(u,i,l,x),l=x+1):(uo(u,i,x+1,h),h=x)}}function Vi(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}Wt("FeaturePositionMap",Ma);class fi{constructor(i,l){this.gl=i.gl,this.location=l}}class Nr extends fi{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Xi extends fi{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class yp extends fi{constructor(i,l){super(i,l),this.current=zn.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const $v=new Float32Array(16);function Wh(u){return[or(255*u.r,255*u.g),or(255*u.b,255*u.a)]}class mu{constructor(i,l,h){this.value=i,this.uniformNames=l.map(g=>`u_${g}`),this.type=h}setUniform(i,l,h){i.set(h.constantOr(this.value))}getBinding(i,l,h){return this.type==="color"?new yp(i,l):new Nr(i,l)}}class sl{constructor(i,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setUniform(i,l,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&i.set(_)}getBinding(i,l,h){return h.substr(0,9)==="u_pattern"?new Xi(i,l):new Nr(i,l)}}class os{constructor(i,l,h,g){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,l,h,g,_){const x=this.paintVertexArray.length,T=this.expression.evaluate(new pi(0),l,{},g,[],_);this.paintVertexArray.resize(i),this._setPaintValue(x,i,T)}updatePaintArray(i,l,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(i,l,_)}_setPaintValue(i,l,h){if(this.type==="color"){const g=Wh(h);for(let _=i;_<l;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=i;g<l;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _r{constructor(i,l,h,g,_,x){this.expression=i,this.uniformNames=l.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=l.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,h,g,_){const x=this.expression.evaluate(new pi(this.zoom),l,{},g,[],_),T=this.expression.evaluate(new pi(this.zoom+1),l,{},g,[],_),E=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(E,i,x,T)}updatePaintArray(i,l,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(i,l,_,x)}_setPaintValue(i,l,h,g){if(this.type==="color"){const _=Wh(h),x=Wh(g);for(let T=i;T<l;T++)this.paintVertexArray.emplace(T,_[0],_[1],x[0],x[1])}else{for(let _=i;_<l;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=st(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,l,h){return new Nr(i,l)}}class ls{constructor(i,l,h,g,_,x){this.expression=i,this.type=l,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(i,l,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(i,l,h,g,_){this._setPaintValues(i,l,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(i,l,h,g){if(!g||!h)return;const{min:_,mid:x,max:T}=h,E=g[_],D=g[x],z=g[T];if(E&&D&&z)for(let j=i;j<l;j++)this.zoomInPaintVertexArray.emplace(j,D.tl[0],D.tl[1],D.br[0],D.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],D.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,D.tl[0],D.tl[1],D.br[0],D.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],D.pixelRatio,z.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,yr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,yr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zh{constructor(i,l,h){this.binders={},this._buffers=[];const g=[];for(const _ in i.paint._values){if(!h(_))continue;const x=i.paint.get(_);if(!(x instanceof Za&&Wo(x.property.specification)))continue;const T=Kh(_,i.type),E=x.value,D=x.property.specification.type,z=x.property.useIntegerZoom,j=x.property.specification["property-type"],H=j==="cross-faded"||j==="cross-faded-data-driven";if(E.kind==="constant")this.binders[_]=H?new sl(E.value,T):new mu(E.value,T,D),g.push(`/u_${_}`);else if(E.kind==="source"||H){const Y=Yh(_,D,"source");this.binders[_]=H?new ls(E,D,z,l,Y,i.id):new os(E,T,D,Y),g.push(`/a_${_}`)}else{const Y=Yh(_,D,"composite");this.binders[_]=new _r(E,T,D,z,l,Y),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof os||l instanceof _r?l.maxValue:0}populatePaintArrays(i,l,h,g,_){for(const x in this.binders){const T=this.binders[x];(T instanceof os||T instanceof _r||T instanceof ls)&&T.populatePaintArray(i,l,h,g,_)}}setConstantPatternPositions(i,l){for(const h in this.binders){const g=this.binders[h];g instanceof sl&&g.setConstantPatternPositions(i,l)}}updatePaintArrays(i,l,h,g,_){let x=!1;for(const T in i){const E=l.getPositions(T);for(const D of E){const z=h.feature(D.index);for(const j in this.binders){const H=this.binders[j];if((H instanceof os||H instanceof _r||H instanceof ls)&&H.expression.isStateDependent===!0){const Y=g.paint.get(j);H.expression=Y.value,H.updatePaintArray(D.start,D.end,z,i[T],_),x=!0}}}}return x}defines(){const i=[];for(const l in this.binders){const h=this.binders[l];(h instanceof mu||h instanceof sl)&&i.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof os||h instanceof _r)for(let g=0;g<h.paintVertexAttributes.length;g++)i.push(h.paintVertexAttributes[g].name);else if(h instanceof ls)for(let g=0;g<yr.members.length;g++)i.push(yr.members[g].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof mu||h instanceof sl||h instanceof _r)for(const g of h.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof mu||_ instanceof sl||_ instanceof _r){for(const x of _.uniformNames)if(l[x]){const T=_.getBinding(i,l[x],x);h.push({name:x,property:g,binding:T})}}}return h}setUniforms(i,l,h,g){for(const{name:_,property:x,binding:T}of l)this.binders[x].setUniform(T,g,h.get(x),_)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(i&&h instanceof ls){const g=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof os||h instanceof _r)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(const l in this.binders){const h=this.binders[l];(h instanceof os||h instanceof _r||h instanceof ls)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof os||l instanceof _r||l instanceof ls)&&l.destroy()}}}class zs{constructor(i,l,h=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new Zh(g,l,h);this.needsUpload=!1,this._featureMap=new Ma,this._bufferOffset=0}populatePaintArrays(i,l,h,g,_,x){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(i,l,g,_,x);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(i,this._featureMap,l,_,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Kh(u,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${i}-`,"").replace(/-/g,"_")]}function Yh(u,i,l){const h={color:{source:du,composite:W},number:{source:M,composite:du}},g=function(_){return{"line-pattern":{source:Kt,composite:Kt},"fill-pattern":{source:Kt,composite:Kt},"fill-extrusion-pattern":{source:Kt,composite:Kt}}[_]}(u);return g&&g[l]||h[i][l]}Wt("ConstantBinder",mu),Wt("CrossFadedConstantBinder",sl),Wt("SourceExpressionBinder",os),Wt("CrossFadedCompositeBinder",ls),Wt("CompositeExpressionBinder",_r),Wt("ProgramConfiguration",Zh,{omit:["_buffers"]}),Wt("ProgramConfigurationSet",zs);const pu=Math.pow(2,14)-1,tx=-pu-1;function gu(u){const i=Me/u.extent,l=u.loadGeometry();for(let h=0;h<l.length;h++){const g=l[h];for(let _=0;_<g.length;_++){const x=g[_],T=Math.round(x.x*i),E=Math.round(x.y*i);x.x=st(T,tx,pu),x.y=st(E,tx,pu),(T<x.x||T>x.x+1||E<x.y||E>x.y+1)&&Je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function vu(u,i){return{type:u.type,id:u.id,properties:u.properties,geometry:i?gu(u):[]}}const nx=-32768;function W2(u,i,l,h,g){u.emplaceBack(nx+8*i+h,nx+8*l+g)}class jv{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new nt,this.indexArray=new ai,this.segments=new Nn,this.programConfigurations=new zs(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){const g=this.layers[0],_=[];let x=null,T=!1,E=g.type==="heatmap";if(g.type==="circle"){const z=g;x=z.layout.get("circle-sort-key"),T=!x.isConstant(),E=E||z.paint.get("circle-pitch-alignment")==="map"}const D=E?l.subdivisionGranularity.circle:1;for(const{feature:z,id:j,index:H,sourceLayerIndex:Y}of i){const J=this.layers[0]._featureFilter.needGeometry,ne=vu(z,J);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),ne,h))continue;const me=T?x.evaluate(ne,{},h):void 0,xe={id:j,properties:z.properties,type:z.type,sourceLayerIndex:Y,index:H,geometry:J?ne.geometry:gu(z),patterns:{},sortKey:me};_.push(xe)}T&&_.sort((z,j)=>z.sortKey-j.sortKey);for(const z of _){const{geometry:j,index:H,sourceLayerIndex:Y}=z,J=i[H].feature;this.addFeature(z,j,H,h,D),l.featureIndex.insert(J,j,H,Y,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,vr),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,h,g,_=1){let x;switch(_){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const T=x.length;for(const E of l)for(const D of E){const z=D.x,j=D.y;if(z<0||z>=Me||j<0||j>=Me)continue;const H=this.segments.prepareSegment(T*T,this.layoutVertexArray,this.indexArray,i.sortKey),Y=H.vertexLength;for(let J=0;J<T;J++)for(let ne=0;ne<T;ne++)W2(this.layoutVertexArray,z,j,x[ne],x[J]);for(let J=0;J<T-1;J++)for(let ne=0;ne<T-1;ne++){const me=Y+J*T+ne,xe=Y+(J+1)*T+ne;this.indexArray.emplaceBack(me,xe+1,me+1),this.indexArray.emplaceBack(me,xe,xe+1)}H.vertexLength+=T*T,H.primitiveLength+=(T-1)*(T-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},g)}}function ix(u,i){for(let l=0;l<u.length;l++)if(Wc(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(Wc(u,i[l]))return!0;return!!Nv(u,i)}function Z2(u,i,l){return!!Wc(u,i)||!!Uv(i,u,l)}function rx(u,i){if(u.length===1)return sx(i,u[0]);for(let l=0;l<i.length;l++){const h=i[l];for(let g=0;g<h.length;g++)if(Wc(u,h[g]))return!0}for(let l=0;l<u.length;l++)if(sx(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(Nv(u,i[l]))return!0;return!1}function K2(u,i,l){if(u.length>1){if(Nv(u,i))return!0;for(let h=0;h<i.length;h++)if(Uv(i[h],u,l))return!0}for(let h=0;h<u.length;h++)if(Uv(u[h],i,l))return!0;return!1}function Nv(u,i){if(u.length===0||i.length===0)return!1;for(let l=0;l<u.length-1;l++){const h=u[l],g=u[l+1];for(let _=0;_<i.length-1;_++)if(Y2(h,g,i[_],i[_+1]))return!0}return!1}function Y2(u,i,l,h){return kt(u,l,h)!==kt(i,l,h)&&kt(u,i,l)!==kt(u,i,h)}function Uv(u,i,l){const h=l*l;if(i.length===1)return u.distSqr(i[0])<h;for(let g=1;g<i.length;g++)if(ax(u,i[g-1],i[g])<h)return!0;return!1}function ax(u,i,l){const h=i.distSqr(l);if(h===0)return u.distSqr(i);const g=((u.x-i.x)*(l.x-i.x)+(u.y-i.y)*(l.y-i.y))/h;return u.distSqr(g<0?i:g>1?l:l.sub(i)._mult(g)._add(i))}function sx(u,i){let l,h,g,_=!1;for(let x=0;x<u.length;x++){l=u[x];for(let T=0,E=l.length-1;T<l.length;E=T++)h=l[T],g=l[E],h.y>i.y!=g.y>i.y&&i.x<(g.x-h.x)*(i.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function Wc(u,i){let l=!1;for(let h=0,g=u.length-1;h<u.length;g=h++){const _=u[h],x=u[g];_.y>i.y!=x.y>i.y&&i.x<(x.x-_.x)*(i.y-_.y)/(x.y-_.y)+_.x&&(l=!l)}return l}function X2(u,i,l){const h=l[0],g=l[2];if(u.x<h.x&&i.x<h.x||u.x>g.x&&i.x>g.x||u.y<h.y&&i.y<h.y||u.y>g.y&&i.y>g.y)return!1;const _=kt(u,i,l[0]);return _!==kt(u,i,l[1])||_!==kt(u,i,l[2])||_!==kt(u,i,l[3])}function Xh(u,i,l){const h=i.paint.get(u).value;return h.kind==="constant"?h.value:l.programConfigurations.get(i.id).getMaxValue(u)}function _p(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function bp(u,i,l,h,g){if(!i[0]&&!i[1])return u;const _=R.convert(i)._mult(g);l==="viewport"&&_._rotate(-h);const x=[];for(let T=0;T<u.length;T++)x.push(u[T].sub(_));return x}let ox,lx;Wt("CircleBucket",jv,{omit:["layers"]});var J2={get paint(){return lx=lx||new jr({"circle-radius":new un(Oe.paint_circle["circle-radius"]),"circle-color":new un(Oe.paint_circle["circle-color"]),"circle-blur":new un(Oe.paint_circle["circle-blur"]),"circle-opacity":new un(Oe.paint_circle["circle-opacity"]),"circle-translate":new Xt(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new un(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new un(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new un(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return ox=ox||new jr({"circle-sort-key":new un(Oe.layout_circle["circle-sort-key"])})}};class Q2 extends gr{constructor(i){super(i,J2)}createBucket(i){return new jv(i)}queryRadius(i){const l=i;return Xh("circle-radius",this,l)+Xh("circle-stroke-width",this,l)+_p(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x,unwrappedTileID:T,getElevation:E}){const D=bp(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,x),z=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),j=this.paint.get("circle-pitch-alignment")==="map",H=j?D:function(J,ne,me,xe){return J.map(Ne=>ux(Ne,ne,me,xe))}(D,_,T,E),Y=j?z*x:z;for(const J of g)for(const ne of J){const me=j?ne:ux(ne,_,T,E);let xe=Y;const Ne=_.projectTileCoordinates(ne.x,ne.y,T,E).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xe*=Ne/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xe*=_.cameraToCenterDistance/Ne),Z2(H,me,xe))return!0}return!1}}function ux(u,i,l,h){const g=i.projectTileCoordinates(u.x,u.y,l,h).point;return new R((.5*g.x+.5)*i.width,(.5*-g.y+.5)*i.height)}class cx extends jv{}let dx;Wt("HeatmapBucket",cx,{omit:["layers"]});var eA={get paint(){return dx=dx||new jr({"heatmap-radius":new un(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new un(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cu(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(Oe.paint_heatmap["heatmap-opacity"])})}};function Gv(u,{width:i,height:l},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*l*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*l*h}`)}else g=new Uint8Array(i*l*h);return u.width=i,u.height=l,u.data=g,u}function hx(u,{width:i,height:l},h){if(i===u.width&&l===u.height)return;const g=Gv({},{width:i,height:l},h);qv(u,g,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,i),height:Math.min(u.height,l)},h),u.width=i,u.height=l,u.data=g.data}function qv(u,i,l,h,g,_){if(g.width===0||g.height===0)return i;if(g.width>u.width||g.height>u.height||l.x>u.width-g.width||l.y>u.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||h.x>i.width-g.width||h.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=u.data,T=i.data;if(x===T)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const D=((l.y+E)*u.width+l.x)*_,z=((h.y+E)*i.width+h.x)*_;for(let j=0;j<g.width*_;j++)T[z+j]=x[D+j]}return i}class Jh{constructor(i,l){Gv(this,i,1,l)}resize(i){hx(this,i,1)}clone(){return new Jh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,g,_){qv(i,l,h,g,_,1)}}class ca{constructor(i,l){Gv(this,i,4,l)}resize(i){hx(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ca({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,g,_){qv(i,l,h,g,_,4)}setPixel(i,l,h){const g=4*(i*this.width+l);this.data[g+0]=Math.round(255*h.r/h.a),this.data[g+1]=Math.round(255*h.g/h.a),this.data[g+2]=Math.round(255*h.b/h.a),this.data[g+3]=Math.round(255*h.a)}}function fx(u){const i={},l=u.resolution||256,h=u.clips?u.clips.length:1,g=u.image||new ca({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const _=(x,T,E)=>{i[u.evaluationKey]=E;const D=u.expression.evaluate(i);g.setPixel(x/4/l,T/4,D)};if(u.clips)for(let x=0,T=0;x<h;++x,T+=4*l)for(let E=0,D=0;E<l;E++,D+=4){const z=E/(l-1),{start:j,end:H}=u.clips[x];_(T,D,j*(1-z)+H*z)}else for(let x=0,T=0;x<l;x++,T+=4)_(0,T,x/(l-1));return g}Wt("AlphaImage",Jh),Wt("RGBAImage",ca);const Hv="big-fb";class tA extends gr{createBucket(i){return new cx(i)}constructor(i){super(i,eA),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Hv)&&this.heatmapFbos.delete(Hv)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let mx;var nA={get paint(){return mx=mx||new jr({"hillshade-illumination-direction":new Xt(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Xt(Oe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Xt(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(Oe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Xt(Oe.paint_hillshade["hillshade-method"])})}};class iA extends gr{constructor(i){super(i,nA),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const _=Math.max(i.length,l.length,h.length,g.length);i=i.concat(Array(_-i.length).fill(i.at(-1))),l=l.concat(Array(_-l.length).fill(l.at(-1))),h=h.concat(Array(_-h.length).fill(h.at(-1))),g=g.concat(Array(_-g.length).fill(g.at(-1)));const x=l.map(En);return{directionRadians:i.map(En),altitudeRadians:x,shadowColor:g,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let px;var rA={get paint(){return px=px||new jr({"color-relief-opacity":new Xt(Oe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new cu(Oe["paint_color-relief"]["color-relief-color"])})}};class Wv{constructor(i,l,h,g){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(l,g)}update(i,l,h){const{width:g,height:_}=i,x=!(this.size&&this.size[0]===g&&this.size[1]===_||h),{context:T}=this,{gl:E}=T;if(this.useMipmap=!!(l&&l.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!l||l.premultiply!==!1)),x)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||Pt(i)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,g,_,0,this.format,E.UNSIGNED_BYTE,i.data);else{const{x:D,y:z}=h||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||Pt(i)?E.texSubImage2D(E.TEXTURE_2D,0,D,z,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,D,z,g,_,E.RGBA,E.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D),T.pixelStoreUnpackFlipY.setDefault(),T.pixelStoreUnpack.setDefault(),T.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,h){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),h!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,h||i),this.filter=i),l!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,l),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class gx{constructor(i,l,h,g=1,_=1,x=1,T=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Je(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const E=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<E;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(E,D)]=this.data[this._idx(E-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,E)]=this.data[this._idx(D,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<E;D++)for(let z=0;z<E;z++){const j=this.get(D,z);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(i,l){const h=new Uint8Array(this.data.buffer),g=4*this._idx(i,l);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,h){return i*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}pack(i){return vx(i,this.getUnpackVector())}getPixels(){return new ca({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,_=l*this.dim+this.dim,x=h*this.dim,T=h*this.dim+this.dim;switch(l){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=T-1;break;case 1:T=x+1}const E=-l*this.dim,D=-h*this.dim;for(let z=x;z<T;z++)for(let j=g;j<_;j++)this.data[this._idx(j,z)]=i.data[this._idx(j+E,z+D)]}}function vx(u,i){const l=i[0],h=i[1],g=i[2],_=i[3],x=Math.min(l,h,g),T=Math.round((u+_)/x);return{r:Math.floor(T*x/l)%256,g:Math.floor(T*x/h)%256,b:Math.floor(T*x/g)%256}}Wt("DEMData",gx);class aA extends gr{constructor(i){super(i,rA)}_createColorRamp(i){const l={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof Ql&&h._styleExpression.expression instanceof Fr){this.colorRampExpression=h;const x=h._styleExpression.expression;l.elevationStops=x.labels,l.colorStops=[];for(const T of l.elevationStops)l.colorStops.push(x.evaluate({globals:{elevation:T}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[zn.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=i)return l;const g={elevationStops:[],colorStops:[]},_=(l.elevationStops.length-1)/(i-1);for(let x=0;x<l.elevationStops.length-.5;x+=_)g.elevationStops.push(l.elevationStops[Math.round(x)]),g.colorStops.push(l.colorStops[Math.round(x)]);return Je(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,l,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(l),_=new ca({width:g.colorStops.length,height:1}),x=new ca({width:g.colorStops.length,height:1});for(let T=0;T<g.elevationStops.length;T++){const E=vx(g.elevationStops[T],h);x.setPixel(0,T,new zn(E.r/255,E.g/255,E.b/255,1)),_.setPixel(0,T,g.colorStops[T])}return this.colorRampTextures={elevationTexture:new Wv(i,x,i.gl.RGBA),colorTexture:new Wv(i,_,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const sA=Ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:oA}=sA;function Zv(u,i,l){const h=l.patternDependencies;let g=!1;for(const _ of i){const x=_.paint.get(`${u}-pattern`);x.isConstant()||(g=!0);const T=x.constantOr(null);T&&(g=!0,h[T.to]=!0,h[T.from]=!0)}return g}function Kv(u,i,l,h,g){const _=g.patternDependencies;for(const x of i){const T=x.paint.get(`${u}-pattern`).value;if(T.kind!=="constant"){let E=T.evaluate({zoom:h-1},l,{},g.availableImages),D=T.evaluate({zoom:h},l,{},g.availableImages),z=T.evaluate({zoom:h+1},l,{},g.availableImages);E=E&&E.name?E.name:E,D=D&&D.name?D.name:D,z=z&&z.name?z.name:z,_[E]=!0,_[D]=!0,_[z]=!0,l.patterns[x.id]={min:E,mid:D,max:z}}}return l}function yx(u,i,l,h,g){let _;if(g===function(x,T,E,D){let z=0;for(let j=T,H=E-D;j<E;j+=D)z+=(x[H]-x[j])*(x[j+1]+x[H+1]),H=j;return z}(u,i,l,h)>0)for(let x=i;x<l;x+=h)_=wx(x/h|0,u[x],u[x+1],_);else for(let x=l-h;x>=i;x-=h)_=wx(x/h|0,u[x],u[x+1],_);return _&&Zc(_,_.next)&&(nf(_),_=_.next),_}function yu(u,i){if(!u)return u;i||(i=u);let l,h=u;do if(l=!1,h.steiner||!Zc(h,h.next)&&$i(h.prev,h,h.next)!==0)h=h.next;else{if(nf(h),h=i=h.prev,h===h.next)break;l=!0}while(l||h!==i);return i}function Qh(u,i,l,h,g,_,x){if(!u)return;!x&&_&&function(E,D,z,j){let H=E;do H.z===0&&(H.z=Yv(H.x,H.y,D,z,j)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==E);H.prevZ.nextZ=null,H.prevZ=null,function(Y){let J,ne=1;do{let me,xe=Y;Y=null;let Ne=null;for(J=0;xe;){J++;let Pe=xe,K=0;for(let Ae=0;Ae<ne&&(K++,Pe=Pe.nextZ,Pe);Ae++);let de=ne;for(;K>0||de>0&&Pe;)K!==0&&(de===0||!Pe||xe.z<=Pe.z)?(me=xe,xe=xe.nextZ,K--):(me=Pe,Pe=Pe.nextZ,de--),Ne?Ne.nextZ=me:Y=me,me.prevZ=Ne,Ne=me;xe=Pe}Ne.nextZ=null,ne*=2}while(J>1)}(H)}(u,h,g,_);let T=u;for(;u.prev!==u.next;){const E=u.prev,D=u.next;if(_?uA(u,h,g,_):lA(u))i.push(E.i,u.i,D.i),nf(u),u=D.next,T=D.next;else if((u=D)===T){x?x===1?Qh(u=cA(yu(u),i),i,l,h,g,_,2):x===2&&dA(u,i,l,h,g,_):Qh(yu(u),i,l,h,g,_,1);break}}}function lA(u){const i=u.prev,l=u,h=u.next;if($i(i,l,h)>=0)return!1;const g=i.x,_=l.x,x=h.x,T=i.y,E=l.y,D=h.y,z=Math.min(g,_,x),j=Math.min(T,E,D),H=Math.max(g,_,x),Y=Math.max(T,E,D);let J=h.next;for(;J!==i;){if(J.x>=z&&J.x<=H&&J.y>=j&&J.y<=Y&&ef(g,T,_,E,x,D,J.x,J.y)&&$i(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function uA(u,i,l,h){const g=u.prev,_=u,x=u.next;if($i(g,_,x)>=0)return!1;const T=g.x,E=_.x,D=x.x,z=g.y,j=_.y,H=x.y,Y=Math.min(T,E,D),J=Math.min(z,j,H),ne=Math.max(T,E,D),me=Math.max(z,j,H),xe=Yv(Y,J,i,l,h),Ne=Yv(ne,me,i,l,h);let Pe=u.prevZ,K=u.nextZ;for(;Pe&&Pe.z>=xe&&K&&K.z<=Ne;){if(Pe.x>=Y&&Pe.x<=ne&&Pe.y>=J&&Pe.y<=me&&Pe!==g&&Pe!==x&&ef(T,z,E,j,D,H,Pe.x,Pe.y)&&$i(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,K.x>=Y&&K.x<=ne&&K.y>=J&&K.y<=me&&K!==g&&K!==x&&ef(T,z,E,j,D,H,K.x,K.y)&&$i(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;Pe&&Pe.z>=xe;){if(Pe.x>=Y&&Pe.x<=ne&&Pe.y>=J&&Pe.y<=me&&Pe!==g&&Pe!==x&&ef(T,z,E,j,D,H,Pe.x,Pe.y)&&$i(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;K&&K.z<=Ne;){if(K.x>=Y&&K.x<=ne&&K.y>=J&&K.y<=me&&K!==g&&K!==x&&ef(T,z,E,j,D,H,K.x,K.y)&&$i(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function cA(u,i){let l=u;do{const h=l.prev,g=l.next.next;!Zc(h,g)&&bx(h,l,l.next,g)&&tf(h,g)&&tf(g,h)&&(i.push(h.i,l.i,g.i),nf(l),nf(l.next),l=u=g),l=l.next}while(l!==u);return yu(l)}function dA(u,i,l,h,g,_){let x=u;do{let T=x.next.next;for(;T!==x.prev;){if(x.i!==T.i&&gA(x,T)){let E=xx(x,T);return x=yu(x,x.next),E=yu(E,E.next),Qh(x,i,l,h,g,_,0),void Qh(E,i,l,h,g,_,0)}T=T.next}x=x.next}while(x!==u)}function hA(u,i){let l=u.x-i.x;return l===0&&(l=u.y-i.y,l===0)&&(l=(u.next.y-u.y)/(u.next.x-u.x)-(i.next.y-i.y)/(i.next.x-i.x)),l}function fA(u,i){const l=function(g,_){let x=_;const T=g.x,E=g.y;let D,z=-1/0;if(Zc(g,x))return x;do{if(Zc(g,x.next))return x.next;if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){const ne=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(ne<=T&&ne>z&&(z=ne,D=x.x<x.next.x?x:x.next,ne===T))return D}x=x.next}while(x!==_);if(!D)return null;const j=D,H=D.x,Y=D.y;let J=1/0;x=D;do{if(T>=x.x&&x.x>=H&&T!==x.x&&_x(E<Y?T:z,E,H,Y,E<Y?z:T,E,x.x,x.y)){const ne=Math.abs(E-x.y)/(T-x.x);tf(x,g)&&(ne<J||ne===J&&(x.x>D.x||x.x===D.x&&mA(D,x)))&&(D=x,J=ne)}x=x.next}while(x!==j);return D}(u,i);if(!l)return i;const h=xx(l,u);return yu(h,h.next),yu(l,l.next)}function mA(u,i){return $i(u.prev,u,i.prev)<0&&$i(i.next,u,u.next)<0}function Yv(u,i,l,h,g){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*g|0)|u<<8))|u<<4))|u<<2))|u<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function pA(u){let i=u,l=u;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==u);return l}function _x(u,i,l,h,g,_,x,T){return(g-x)*(i-T)>=(u-x)*(_-T)&&(u-x)*(h-T)>=(l-x)*(i-T)&&(l-x)*(_-T)>=(g-x)*(h-T)}function ef(u,i,l,h,g,_,x,T){return!(u===x&&i===T)&&_x(u,i,l,h,g,_,x,T)}function gA(u,i){return u.next.i!==i.i&&u.prev.i!==i.i&&!function(l,h){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==h.i&&g.next.i!==h.i&&bx(g,g.next,l,h))return!0;g=g.next}while(g!==l);return!1}(u,i)&&(tf(u,i)&&tf(i,u)&&function(l,h){let g=l,_=!1;const x=(l.x+h.x)/2,T=(l.y+h.y)/2;do g.y>T!=g.next.y>T&&g.next.y!==g.y&&x<(g.next.x-g.x)*(T-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==l);return _}(u,i)&&($i(u.prev,u,i.prev)||$i(u,i.prev,i))||Zc(u,i)&&$i(u.prev,u,u.next)>0&&$i(i.prev,i,i.next)>0)}function $i(u,i,l){return(i.y-u.y)*(l.x-i.x)-(i.x-u.x)*(l.y-i.y)}function Zc(u,i){return u.x===i.x&&u.y===i.y}function bx(u,i,l,h){const g=wp($i(u,i,l)),_=wp($i(u,i,h)),x=wp($i(l,h,u)),T=wp($i(l,h,i));return g!==_&&x!==T||!(g!==0||!xp(u,l,i))||!(_!==0||!xp(u,h,i))||!(x!==0||!xp(l,u,h))||!(T!==0||!xp(l,i,h))}function xp(u,i,l){return i.x<=Math.max(u.x,l.x)&&i.x>=Math.min(u.x,l.x)&&i.y<=Math.max(u.y,l.y)&&i.y>=Math.min(u.y,l.y)}function wp(u){return u>0?1:u<0?-1:0}function tf(u,i){return $i(u.prev,u,u.next)<0?$i(u,i,u.next)>=0&&$i(u,u.prev,i)>=0:$i(u,i,u.prev)<0||$i(u,u.next,i)<0}function xx(u,i){const l=Xv(u.i,u.x,u.y),h=Xv(i.i,i.x,i.y),g=u.next,_=i.prev;return u.next=i,i.prev=u,l.next=g,g.prev=l,h.next=l,l.prev=h,_.next=h,h.prev=_,h}function wx(u,i,l,h){const g=Xv(u,i,l);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function nf(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Xv(u,i,l){return{i:u,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Kc{constructor(i,l){if(l>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=l}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class Sp{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}Sp.noSubdivision=new Sp({fill:new Kc(0,0),line:new Kc(0,0),tile:new Kc(0,0),stencil:new Kc(0,0),circle:1}),Wt("SubdivisionGranularityExpression",Kc),Wt("SubdivisionGranularitySetting",Sp);const Yc=-32768,rf=32767;class vA{constructor(i,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=Me/i,this._canonical=l}_getKey(i,l){return(i+=32768)<<16|l+32768}_vertexToIndex(i,l){if(i<-32768||l<-32768||i>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(i),g=0|Math.round(l),_=this._getKey(h,g);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,x),this._vertexBuffer.push(h,g),x}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(g,_){const x=[];for(let T=0;T<_.length;T+=3){const E=_[T],D=_[T+1],z=_[T+2],j=g[2*E],H=g[2*E+1];(g[2*D]-j)*(g[2*z+1]-H)-(g[2*D+1]-H)*(g[2*z]-j)>0?(x.push(E),x.push(z),x.push(D)):(x.push(E),x.push(D),x.push(z))}return x}(this._vertexBuffer,i);const l=[],h=i.length;for(let g=0;g<h;g+=3){const _=[i[g+0],i[g+1],i[g+2]],x=[this._vertexBuffer[2*i[g+0]+0],this._vertexBuffer[2*i[g+0]+1],this._vertexBuffer[2*i[g+1]+0],this._vertexBuffer[2*i[g+1]+1],this._vertexBuffer[2*i[g+2]+0],this._vertexBuffer[2*i[g+2]+1]];let T=1/0,E=1/0,D=-1/0,z=-1/0;for(let ne=0;ne<3;ne++){const me=x[2*ne],xe=x[2*ne+1];T=Math.min(T,me),D=Math.max(D,me),E=Math.min(E,xe),z=Math.max(z,xe)}if(T===D||E===z)continue;const j=Math.floor(T/this._granularityCellSize),H=Math.ceil(D/this._granularityCellSize),Y=Math.floor(E/this._granularityCellSize),J=Math.ceil(z/this._granularityCellSize);if(j!==H||Y!==J)for(let ne=Y;ne<J;ne++){const me=this._scanlineGenerateVertexRingForCellRow(ne,x,_);yA(this._vertexBuffer,me,l)}else l.push(..._)}return l}_scanlineGenerateVertexRingForCellRow(i,l,h){const g=i*this._granularityCellSize,_=g+this._granularityCellSize,x=[];for(let T=0;T<3;T++){const E=l[2*T],D=l[2*T+1],z=l[2*(T+1)%6],j=l[(2*(T+1)+1)%6],H=l[2*(T+2)%6],Y=l[(2*(T+2)+1)%6],J=z-E,ne=j-D,me=J===0,xe=ne===0,Ne=(g-D)/ne,Pe=(_-D)/ne,K=Math.min(Ne,Pe),de=Math.max(Ne,Pe);if(!xe&&(K>=1||de<=0)||xe&&(D<g||D>_)){j>=g&&j<=_&&x.push(h[(T+1)%3]);continue}!xe&&K>0&&x.push(this._vertexToIndex(E+J*K,D+ne*K));const Ae=E+J*Math.max(K,0),it=E+J*Math.min(de,1);me||this._generateIntraEdgeVertices(x,E,D,z,j,Ae,it),!xe&&de<1&&x.push(this._vertexToIndex(E+J*de,D+ne*de)),(xe||j>=g&&j<=_)&&x.push(h[(T+1)%3]),!xe&&(j<=g||j>=_)&&this._generateInterEdgeVertices(x,E,D,z,j,H,Y,it,g,_)}return x}_generateIntraEdgeVertices(i,l,h,g,_,x,T){const E=g-l,D=_-h,z=D===0,j=z?Math.min(l,g):Math.min(x,T),H=z?Math.max(l,g):Math.max(x,T),Y=Math.floor(j/this._granularityCellSize)+1,J=Math.ceil(H/this._granularityCellSize)-1;if(z?l<g:x<T)for(let ne=Y;ne<=J;ne++){const me=ne*this._granularityCellSize;i.push(this._vertexToIndex(me,h+D*(me-l)/E))}else for(let ne=J;ne>=Y;ne--){const me=ne*this._granularityCellSize;i.push(this._vertexToIndex(me,h+D*(me-l)/E))}}_generateInterEdgeVertices(i,l,h,g,_,x,T,E,D,z){const j=_-h,H=x-g,Y=T-_,J=(D-_)/Y,ne=(z-_)/Y,me=Math.min(J,ne),xe=Math.max(J,ne),Ne=g+H*me;let Pe=Math.floor(Math.min(Ne,E)/this._granularityCellSize)+1,K=Math.ceil(Math.max(Ne,E)/this._granularityCellSize)-1,de=E<Ne;const Ae=Y===0;if(Ae&&(T===D||T===z))return;if(Ae||me>=1||xe<=0){const It=h-T,dt=x+(l-x)*Math.min((D-T)/It,(z-T)/It);Pe=Math.floor(Math.min(dt,E)/this._granularityCellSize)+1,K=Math.ceil(Math.max(dt,E)/this._granularityCellSize)-1,de=E<dt}const it=j>0?z:D;if(de)for(let It=Pe;It<=K;It++)i.push(this._vertexToIndex(It*this._granularityCellSize,it));else for(let It=K;It>=Pe;It--)i.push(this._vertexToIndex(It*this._granularityCellSize,it))}_generateOutline(i){const l=[];for(const h of i){const g=_u(h,this._granularity,!0),_=this._pointArrayToIndices(g),x=[];for(let T=1;T<_.length;T++)x.push(_[T-1]),x.push(_[T]);l.push(x)}return l}_handlePoles(i){let l=!1,h=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(l||h)&&this._fillPoles(i,l,h)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let l=0;l<i.length;l+=2){const h=i[l+1];h===Yc&&(i[l+1]=-32767),h===rf&&(i[l+1]=32766)}}_generatePoleQuad(i,l,h,g,_,x){g>_!=(x===Yc)?(i.push(l),i.push(h),i.push(this._vertexToIndex(g,x)),i.push(h),i.push(this._vertexToIndex(_,x)),i.push(this._vertexToIndex(g,x))):(i.push(h),i.push(l),i.push(this._vertexToIndex(g,x)),i.push(this._vertexToIndex(_,x)),i.push(h),i.push(this._vertexToIndex(g,x)))}_fillPoles(i,l,h){const g=this._vertexBuffer,_=Me,x=i.length;for(let T=2;T<x;T+=3){const E=i[T-2],D=i[T-1],z=i[T],j=g[2*E],H=g[2*E+1],Y=g[2*D],J=g[2*D+1],ne=g[2*z],me=g[2*z+1];l&&(H===0&&J===0&&this._generatePoleQuad(i,E,D,j,Y,Yc),J===0&&me===0&&this._generatePoleQuad(i,D,z,Y,ne,Yc),me===0&&H===0&&this._generatePoleQuad(i,z,E,ne,j,Yc)),h&&(H===_&&J===_&&this._generatePoleQuad(i,E,D,j,Y,rf),J===_&&me===_&&this._generatePoleQuad(i,D,z,Y,ne,rf),me===_&&H===_&&this._generatePoleQuad(i,z,E,ne,j,rf))}}_initializeVertices(i){for(let l=0;l<i.length;l+=2)this._vertexToIndex(i[l],i[l+1])}subdividePolygonInternal(i,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:g}=function(T){const E=[],D=[];for(const z of T)if(z.length!==0){z!==T[0]&&E.push(D.length/2);for(let j=0;j<z.length;j++)D.push(z[j].x),D.push(z[j].y)}return{flattened:D,holeIndices:E}}(i);let _;this._initializeVertices(h);try{const T=function(D,z,j=2){const H=z&&z.length,Y=H?z[0]*j:D.length;let J=yx(D,0,Y,j,!0);const ne=[];if(!J||J.next===J.prev)return ne;let me,xe,Ne;if(H&&(J=function(Pe,K,de,Ae){const it=[];for(let It=0,dt=K.length;It<dt;It++){const yt=yx(Pe,K[It]*Ae,It<dt-1?K[It+1]*Ae:Pe.length,Ae,!1);yt===yt.next&&(yt.steiner=!0),it.push(pA(yt))}it.sort(hA);for(let It=0;It<it.length;It++)de=fA(it[It],de);return de}(D,z,J,j)),D.length>80*j){me=1/0,xe=1/0;let Pe=-1/0,K=-1/0;for(let de=j;de<Y;de+=j){const Ae=D[de],it=D[de+1];Ae<me&&(me=Ae),it<xe&&(xe=it),Ae>Pe&&(Pe=Ae),it>K&&(K=it)}Ne=Math.max(Pe-me,K-xe),Ne=Ne!==0?32767/Ne:0}return Qh(J,ne,j,me,xe,Ne,0),ne}(h,g),E=this._convertIndices(h,T);_=this._subdivideTrianglesScanline(E)}catch(T){console.error(T)}let x=[];return l&&(x=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:x}}_convertIndices(i,l){const h=[];for(let g=0;g<l.length;g++)h.push(this._vertexToIndex(i[2*l[g]],i[2*l[g]+1]));return h}_pointArrayToIndices(i){const l=[];for(let h=0;h<i.length;h++){const g=i[h];l.push(this._vertexToIndex(g.x,g.y))}return l}}function Sx(u,i,l,h=!0){return new vA(l,i).subdividePolygonInternal(u,h)}function _u(u,i,l=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const h=u[0],g=u[u.length-1],_=l&&(h.x!==g.x||h.y!==g.y);if(i<2)return _?[...u,u[0]]:[...u];const x=Math.floor(Me/i),T=[];T.push(new R(u[0].x,u[0].y));const E=u.length,D=_?E:E-1;for(let z=0;z<D;z++){const j=u[z],H=z<E-1?u[z+1]:u[0],Y=j.x,J=j.y,ne=H.x,me=H.y,xe=Y!==ne,Ne=J!==me;if(!xe&&!Ne)continue;const Pe=ne-Y,K=me-J,de=Math.abs(Pe),Ae=Math.abs(K);let it=Y,It=J;for(;;){const yt=Pe>0?(Math.floor(it/x)+1)*x:(Math.ceil(it/x)-1)*x,Rt=K>0?(Math.floor(It/x)+1)*x:(Math.ceil(It/x)-1)*x,Et=Math.abs(it-yt),Lt=Math.abs(It-Rt),wt=Math.abs(it-ne),Yt=Math.abs(It-me),on=xe?Et/de:Number.POSITIVE_INFINITY,sn=Ne?Lt/Ae:Number.POSITIVE_INFINITY;if((wt<=Et||!xe)&&(Yt<=Lt||!Ne))break;if(on<sn&&xe||!Ne){it=yt,It+=K*on;const en=new R(it,Math.round(It));T[T.length-1].x===en.x&&T[T.length-1].y===en.y||T.push(en)}else{it+=Pe*sn,It=Rt;const en=new R(Math.round(it),It);T[T.length-1].x===en.x&&T[T.length-1].y===en.y||T.push(en)}}const dt=new R(ne,me);T[T.length-1].x===dt.x&&T[T.length-1].y===dt.y||T.push(dt)}return T}function yA(u,i,l){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,g=u[2*i[0]];for(let E=1;E<i.length;E++){const D=u[2*i[E]];D<g&&(g=D,h=E)}const _=i.length;let x=h,T=(x+1)%_;for(;;){const E=x-1>=0?x-1:_-1,D=(T+1)%_,z=u[2*i[E]],j=u[2*i[D]],H=u[2*i[x]],Y=u[2*i[x]+1],J=u[2*i[T]+1];let ne=!1;if(z<j)ne=!0;else if(z>j)ne=!1;else{const me=J-Y,xe=-(u[2*i[T]]-H),Ne=Y<J?1:-1;((z-H)*me+(u[2*i[E]+1]-Y)*xe)*Ne>((j-H)*me+(u[2*i[D]+1]-Y)*xe)*Ne&&(ne=!0)}if(ne){const me=i[E],xe=i[x],Ne=i[T];me!==xe&&me!==Ne&&xe!==Ne&&l.push(Ne,xe,me),x--,x<0&&(x=_-1)}else{const me=i[D],xe=i[x],Ne=i[T];me!==xe&&me!==Ne&&xe!==Ne&&l.push(Ne,xe,me),T++,T>=_&&(T=0)}if(E===D)break}}function Cx(u,i,l,h,g,_,x,T,E){const D=g.length/2,z=x&&T&&E;if(D<Nn.MAX_VERTEX_ARRAY_LENGTH){const j=i.prepareSegment(D,l,h),H=j.vertexLength;for(let ne=0;ne<_.length;ne+=3)h.emplaceBack(H+_[ne],H+_[ne+1],H+_[ne+2]);let Y,J;j.vertexLength+=D,j.primitiveLength+=_.length/3,z&&(J=x.prepareSegment(D,l,T),Y=J.vertexLength,J.vertexLength+=D);for(let ne=0;ne<g.length;ne+=2)u(g[ne],g[ne+1]);if(z)for(let ne=0;ne<E.length;ne++){const me=E[ne];for(let xe=1;xe<me.length;xe+=2)T.emplaceBack(Y+me[xe-1],Y+me[xe]);J.primitiveLength+=me.length/2}}else(function(j,H,Y,J,ne,me){const xe=[];for(let Ae=0;Ae<J.length/2;Ae++)xe.push(-1);const Ne={count:0};let Pe=0,K=j.getOrCreateLatestSegment(H,Y),de=K.vertexLength;for(let Ae=2;Ae<ne.length;Ae+=3){const it=ne[Ae-2],It=ne[Ae-1],dt=ne[Ae];let yt=xe[it]<Pe,Rt=xe[It]<Pe,Et=xe[dt]<Pe;K.vertexLength+((yt?1:0)+(Rt?1:0)+(Et?1:0))>Nn.MAX_VERTEX_ARRAY_LENGTH&&(K=j.createNewSegment(H,Y),Pe=Ne.count,yt=!0,Rt=!0,Et=!0,de=0);const Lt=af(xe,J,me,Ne,it,yt,K),wt=af(xe,J,me,Ne,It,Rt,K),Yt=af(xe,J,me,Ne,dt,Et,K);Y.emplaceBack(de+Lt-Pe,de+wt-Pe,de+Yt-Pe),K.primitiveLength++}})(i,l,h,g,_,u),z&&function(j,H,Y,J,ne,me){const xe=[];for(let Ae=0;Ae<J.length/2;Ae++)xe.push(-1);const Ne={count:0};let Pe=0,K=j.getOrCreateLatestSegment(H,Y),de=K.vertexLength;for(let Ae=0;Ae<ne.length;Ae++){const it=ne[Ae];for(let It=1;It<ne[Ae].length;It+=2){const dt=it[It-1],yt=it[It];let Rt=xe[dt]<Pe,Et=xe[yt]<Pe;K.vertexLength+((Rt?1:0)+(Et?1:0))>Nn.MAX_VERTEX_ARRAY_LENGTH&&(K=j.createNewSegment(H,Y),Pe=Ne.count,Rt=!0,Et=!0,de=0);const Lt=af(xe,J,me,Ne,dt,Rt,K),wt=af(xe,J,me,Ne,yt,Et,K);Y.emplaceBack(de+Lt-Pe,de+wt-Pe),K.primitiveLength++}}}(x,l,T,g,E,u),i.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function af(u,i,l,h,g,_,x){if(_){const T=h.count;return l(i[2*g],i[2*g+1]),u[g]=h.count,h.count++,x.vertexLength++,T}return u[g]}class Jv{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ot,this.indexArray=new ai,this.indexArray2=new ii,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new Nn,this.segments2=new Nn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.hasPattern=Zv("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:T,id:E,index:D,sourceLayerIndex:z}of i){const j=this.layers[0]._featureFilter.needGeometry,H=vu(T,j);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),H,h))continue;const Y=_?g.evaluate(H,{},h,l.availableImages):void 0,J={id:E,properties:T.properties,type:T.type,sourceLayerIndex:z,index:D,geometry:j?H.geometry:gu(T),patterns:{},sortKey:Y};x.push(J)}_&&x.sort((T,E)=>T.sortKey-E.sortKey);for(const T of x){const{geometry:E,index:D,sourceLayerIndex:z}=T;if(this.hasPattern){const j=Kv("fill",this.layers,T,this.zoom,l);this.patternFeatures.push(j)}else this.addFeature(T,E,D,h,{},l.subdivisionGranularity);l.featureIndex.insert(i[D].feature,E,D,z,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}addFeatures(i,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,oA),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,h,g,_,x){for(const T of xc(l,500)){const E=Sx(T,g,x.fill.getGranularityForZoomLevel(g.z)),D=this.layoutVertexArray;Cx((z,j)=>{D.emplaceBack(z,j)},this.segments,this.layoutVertexArray,this.indexArray,E.verticesFlattened,E.indicesTriangles,this.segments2,this.indexArray2,E.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}}let Tx,kx;Wt("FillBucket",Jv,{omit:["layers","patternFeatures"]});var _A={get paint(){return kx=kx||new jr({"fill-antialias":new Xt(Oe.paint_fill["fill-antialias"]),"fill-opacity":new un(Oe.paint_fill["fill-opacity"]),"fill-color":new un(Oe.paint_fill["fill-color"]),"fill-outline-color":new un(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Xt(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gc(Oe.paint_fill["fill-pattern"])})},get layout(){return Tx=Tx||new jr({"fill-sort-key":new un(Oe.layout_fill["fill-sort-key"])})}};class bA extends gr{constructor(i){super(i,_A)}recalculate(i,l){super.recalculate(i,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Jv(i)}queryRadius(){return _p(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:l,transform:h,pixelsToTileUnits:g}){return rx(bp(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,g),l)}isTileClipped(){return!0}}const xA=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),wA=Ei([{name:"a_centroid",components:2,type:"Int16"}],4),{members:SA}=xA;var Qv,Px,ey,Ix,ty,Ax,Ex,Cp={};function Mx(){if(Px)return Qv;Px=1;var u=k();function i(g,_,x,T,E){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=T,this._values=E,g.readFields(l,this,_)}function l(g,_,x){g==1?_.id=x.readVarint():g==2?function(T,E){for(var D=T.readVarint()+T.pos;T.pos<D;){var z=E._keys[T.readVarint()],j=E._values[T.readVarint()];E.properties[z]=j}}(x,_):g==3?_.type=x.readVarint():g==4&&(_._geometry=x.pos)}function h(g){for(var _,x,T=0,E=0,D=g.length,z=D-1;E<D;z=E++)T+=((x=g[z]).x-(_=g[E]).x)*(_.y+x.y);return T}return Qv=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var _,x=g.readVarint()+g.pos,T=1,E=0,D=0,z=0,j=[];g.pos<x;){if(E<=0){var H=g.readVarint();T=7&H,E=H>>3}if(E--,T===1||T===2)D+=g.readSVarint(),z+=g.readSVarint(),T===1&&(_&&j.push(_),_=[]),_.push(new u(D,z));else{if(T!==7)throw new Error("unknown command "+T);_&&_.push(_[0].clone())}}return _&&j.push(_),j},i.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var _=g.readVarint()+g.pos,x=1,T=0,E=0,D=0,z=1/0,j=-1/0,H=1/0,Y=-1/0;g.pos<_;){if(T<=0){var J=g.readVarint();x=7&J,T=J>>3}if(T--,x===1||x===2)(E+=g.readSVarint())<z&&(z=E),E>j&&(j=E),(D+=g.readSVarint())<H&&(H=D),D>Y&&(Y=D);else if(x!==7)throw new Error("unknown command "+x)}return[z,H,j,Y]},i.prototype.toGeoJSON=function(g,_,x){var T,E,D=this.extent*Math.pow(2,x),z=this.extent*g,j=this.extent*_,H=this.loadGeometry(),Y=i.types[this.type];function J(xe){for(var Ne=0;Ne<xe.length;Ne++){var Pe=xe[Ne];xe[Ne]=[360*(Pe.x+z)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+j)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var ne=[];for(T=0;T<H.length;T++)ne[T]=H[T][0];J(H=ne);break;case 2:for(T=0;T<H.length;T++)J(H[T]);break;case 3:for(H=function(xe){var Ne=xe.length;if(Ne<=1)return[xe];for(var Pe,K,de=[],Ae=0;Ae<Ne;Ae++){var it=h(xe[Ae]);it!==0&&(K===void 0&&(K=it<0),K===it<0?(Pe&&de.push(Pe),Pe=[xe[Ae]]):Pe.push(xe[Ae]))}return Pe&&de.push(Pe),de}(H),T=0;T<H.length;T++)for(E=0;E<H[T].length;E++)J(H[T][E])}H.length===1?H=H[0]:Y="Multi"+Y;var me={type:"Feature",geometry:{type:Y,coordinates:H},properties:this.properties};return"id"in this&&(me.id=this.id),me},Qv}function Dx(){if(Ix)return ey;Ix=1;var u=Mx();function i(h,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,g),this.length=this._features.length}function l(h,g,_){h===15?g.version=_.readVarint():h===1?g.name=_.readString():h===5?g.extent=_.readVarint():h===2?g._features.push(_.pos):h===3?g._keys.push(_.readString()):h===4&&g._values.push(function(x){for(var T=null,E=x.readVarint()+x.pos;x.pos<E;){var D=x.readVarint()>>3;T=D===1?x.readString():D===2?x.readFloat():D===3?x.readDouble():D===4?x.readVarint64():D===5?x.readVarint():D===6?x.readSVarint():D===7?x.readBoolean():null}return T}(_))}return ey=i,i.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var g=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,g,this.extent,this._keys,this._values)},ey}function Rx(){return Ex||(Ex=1,Cp.VectorTile=function(){if(Ax)return ty;Ax=1;var u=Dx();function i(l,h,g){if(l===3){var _=new u(g,g.readVarint()+g.pos);_.length&&(h[_.name]=_)}}return ty=function(l,h){this.layers=l.readFields(i,{},h)},ty}(),Cp.VectorTileFeature=Mx(),Cp.VectorTileLayer=Dx()),Cp}var sf=b(Rx());const CA=sf.VectorTileFeature.types,ny=Math.pow(2,13);function of(u,i,l,h,g,_,x,T){u.emplaceBack(i,l,2*Math.floor(h*ny)+x,g*ny*2,_*ny*2,Math.round(T))}class iy{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.centroidVertexArray=new et,this.indexArray=new ai,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new Nn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.features=[],this.hasPattern=Zv("fill-extrusion",this.layers,l);for(const{feature:g,id:_,index:x,sourceLayerIndex:T}of i){const E=this.layers[0]._featureFilter.needGeometry,D=vu(g,E);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),D,h))continue;const z={id:_,sourceLayerIndex:T,index:x,geometry:E?D.geometry:gu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Kv("fill-extrusion",this.layers,z,this.zoom,l)):this.addFeature(z,z.geometry,x,h,{},l.subdivisionGranularity),l.featureIndex.insert(g,z.geometry,x,T,this.index,!0)}}addFeatures(i,l,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,l,h,i.subdivisionGranularity)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,SA),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,wA.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,h,g,_,x){for(const T of xc(l,500)){const E={x:0,y:0,sampleCount:0},D=this.layoutVertexArray.length;this.processPolygon(E,g,i,T,x);const z=this.layoutVertexArray.length-D,j=Math.floor(E.x/E.sampleCount),H=Math.floor(E.y/E.sampleCount);for(let Y=0;Y<z;Y++)this.centroidVertexArray.emplaceBack(j,H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}processPolygon(i,l,h,g,_){if(g.length<1||Lx(g[0]))return;for(const j of g)j.length!==0&&TA(i,j);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},T=_.fill.getGranularityForZoomLevel(l.z),E=CA[h.type]==="Polygon";for(const j of g){if(j.length===0||Lx(j))continue;const H=_u(j,T,E);this._generateSideFaces(H,x)}if(!E)return;const D=Sx(g,l,T,!1),z=this.layoutVertexArray;Cx((j,H)=>{of(z,j,H,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles)}_generateSideFaces(i,l){let h=0;for(let g=1;g<i.length;g++){const _=i[g],x=i[g-1];if(kA(_,x))continue;l.segment.vertexLength+4>Nn.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const T=_.sub(x)._perp()._unit(),E=x.dist(_);h+E>32768&&(h=0),of(this.layoutVertexArray,_.x,_.y,T.x,T.y,0,0,h),of(this.layoutVertexArray,_.x,_.y,T.x,T.y,0,1,h),h+=E,of(this.layoutVertexArray,x.x,x.y,T.x,T.y,0,0,h),of(this.layoutVertexArray,x.x,x.y,T.x,T.y,0,1,h);const D=l.segment.vertexLength;this.indexArray.emplaceBack(D,D+2,D+1),this.indexArray.emplaceBack(D+1,D+2,D+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function TA(u,i){for(let l=0;l<i.length;l++){const h=i[l];l===i.length-1&&i[0].x===h.x&&i[0].y===h.y||(u.x+=h.x,u.y+=h.y,u.sampleCount++)}}function kA(u,i){return u.x===i.x&&(u.x<0||u.x>Me)||u.y===i.y&&(u.y<0||u.y>Me)}function Lx(u){return u.every(i=>i.x<0)||u.every(i=>i.x>Me)||u.every(i=>i.y<0)||u.every(i=>i.y>Me)}let zx;Wt("FillExtrusionBucket",iy,{omit:["layers","features"]});var PA={get paint(){return zx=zx||new jr({"fill-extrusion-opacity":new Xt(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new un(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gc(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new un(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new un(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xt(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class IA extends gr{constructor(i){super(i,PA)}createBucket(i){return new iy(i)}queryRadius(){return _p(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x,pixelPosMatrix:T}){const E=bp(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,x),D=this.paint.get("fill-extrusion-height").evaluate(l,h),z=this.paint.get("fill-extrusion-base").evaluate(l,h),j=function(Y,J){const ne=[];for(const me of Y){const xe=[me.x,me.y,0,1];Ke(xe,xe,J),ne.push(new R(xe[0]/xe[3],xe[1]/xe[3]))}return ne}(E,T),H=function(Y,J,ne,me){const xe=[],Ne=[],Pe=me[8]*J,K=me[9]*J,de=me[10]*J,Ae=me[11]*J,it=me[8]*ne,It=me[9]*ne,dt=me[10]*ne,yt=me[11]*ne;for(const Rt of Y){const Et=[],Lt=[];for(const wt of Rt){const Yt=wt.x,on=wt.y,sn=me[0]*Yt+me[4]*on+me[12],en=me[1]*Yt+me[5]*on+me[13],Fn=me[2]*Yt+me[6]*on+me[14],Mi=me[3]*Yt+me[7]*on+me[15],Ji=Fn+de,Mr=Mi+Ae,Ra=sn+it,da=en+It,br=Fn+dt,Ti=Mi+yt,ur=new R((sn+Pe)/Mr,(en+K)/Mr);ur.z=Ji/Mr,Et.push(ur);const xr=new R(Ra/Ti,da/Ti);xr.z=br/Ti,Lt.push(xr)}xe.push(Et),Ne.push(Lt)}return[xe,Ne]}(g,z,D,T);return function(Y,J,ne){let me=1/0;rx(ne,J)&&(me=Bx(ne,J[0]));for(let xe=0;xe<J.length;xe++){const Ne=J[xe],Pe=Y[xe];for(let K=0;K<Ne.length-1;K++){const de=Ne[K],Ae=[de,Ne[K+1],Pe[K+1],Pe[K],de];ix(ne,Ae)&&(me=Math.min(me,Bx(ne,Ae)))}}return me!==1/0&&me}(H[0],H[1],j)}}function lf(u,i){return u.x*i.x+u.y*i.y}function Bx(u,i){if(u.length===1){let l=0;const h=i[l++];let g;for(;!g||h.equals(g);)if(g=i[l++],!g)return 1/0;for(;l<i.length;l++){const _=i[l],x=u[0],T=g.sub(h),E=_.sub(h),D=x.sub(h),z=lf(T,T),j=lf(T,E),H=lf(E,E),Y=lf(D,T),J=lf(D,E),ne=z*H-j*j,me=(H*Y-j*J)/ne,xe=(z*J-j*Y)/ne,Ne=h.z*(1-me-xe)+g.z*me+_.z*xe;if(isFinite(Ne))return Ne}return 1/0}{let l=1/0;for(const h of i)l=Math.min(l,h.z);return l}}const AA=Ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:EA}=AA,MA=Ei([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:DA}=MA,RA=sf.VectorTileFeature.types,LA=Math.cos(Math.PI/180*37.5),Vx=Math.pow(2,14)/.5;class ry{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Ot,this.layoutVertexArray2=new At,this.indexArray=new ai,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new Nn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.hasPattern=Zv("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:T,id:E,index:D,sourceLayerIndex:z}of i){const j=this.layers[0]._featureFilter.needGeometry,H=vu(T,j);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),H,h))continue;const Y=_?g.evaluate(H,{},h):void 0,J={id:E,properties:T.properties,type:T.type,sourceLayerIndex:z,index:D,geometry:j?H.geometry:gu(T),patterns:{},sortKey:Y};x.push(J)}_&&x.sort((T,E)=>T.sortKey-E.sortKey);for(const T of x){const{geometry:E,index:D,sourceLayerIndex:z}=T;if(this.hasPattern){const j=Kv("line",this.layers,T,this.zoom,l);this.patternFeatures.push(j)}else this.addFeature(T,E,D,h,{},l.subdivisionGranularity);l.featureIndex.insert(i[D].feature,E,D,z,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}addFeatures(i,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,DA)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,EA),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,h,g,_,x){const T=this.layers[0].layout,E=T.get("line-join").evaluate(i,{}),D=T.get("line-cap"),z=T.get("line-miter-limit"),j=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const H of l)this.addLine(H,i,E,D,z,j,g,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}addLine(i,l,h,g,_,x,T,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=_u(i,T?E.line.getGranularityForZoomLevel(T.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<i.length-1;Pe++)this.totalDistance+=i[Pe].dist(i[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=RA[l.type]==="Polygon";let z=i.length;for(;z>=2&&i[z-1].equals(i[z-2]);)z--;let j=0;for(;j<z-1&&i[j].equals(i[j+1]);)j++;if(z<(D?3:2))return;h==="bevel"&&(_=1.05);const H=this.overscaling<=16?122880/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray);let J,ne,me,xe,Ne;this.e1=this.e2=-1,D&&(J=i[z-2],Ne=i[j].sub(J)._unit()._perp());for(let Pe=j;Pe<z;Pe++){if(me=Pe===z-1?D?i[j+1]:void 0:i[Pe+1],me&&i[Pe].equals(me))continue;Ne&&(xe=Ne),J&&(ne=J),J=i[Pe],Ne=me?me.sub(J)._unit()._perp():xe,xe=xe||Ne;let K=xe.add(Ne);K.x===0&&K.y===0||K._unit();const de=xe.x*Ne.x+xe.y*Ne.y,Ae=K.x*Ne.x+K.y*Ne.y,it=Ae!==0?1/Ae:1/0,It=2*Math.sqrt(2-2*Ae),dt=Ae<LA&&ne&&me,yt=xe.x*Ne.y-xe.y*Ne.x>0;if(dt&&Pe>j){const Lt=J.dist(ne);if(Lt>2*H){const wt=J.sub(J.sub(ne)._mult(H/Lt)._round());this.updateDistance(ne,wt),this.addCurrentVertex(wt,xe,0,0,Y),ne=wt}}const Rt=ne&&me;let Et=Rt?h:D?"butt":g;if(Rt&&Et==="round"&&(it<x?Et="miter":it<=2&&(Et="fakeround")),Et==="miter"&&it>_&&(Et="bevel"),Et==="bevel"&&(it>2&&(Et="flipbevel"),it<_&&(Et="miter")),ne&&this.updateDistance(ne,J),Et==="miter")K._mult(it),this.addCurrentVertex(J,K,0,0,Y);else if(Et==="flipbevel"){if(it>100)K=Ne.mult(-1);else{const Lt=it*xe.add(Ne).mag()/xe.sub(Ne).mag();K._perp()._mult(Lt*(yt?-1:1))}this.addCurrentVertex(J,K,0,0,Y),this.addCurrentVertex(J,K.mult(-1),0,0,Y)}else if(Et==="bevel"||Et==="fakeround"){const Lt=-Math.sqrt(it*it-1),wt=yt?Lt:0,Yt=yt?0:Lt;if(ne&&this.addCurrentVertex(J,xe,wt,Yt,Y),Et==="fakeround"){const on=Math.round(180*It/Math.PI/20);for(let sn=1;sn<on;sn++){let en=sn/on;if(en!==.5){const Mi=en-.5;en+=en*Mi*(en-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*Mi*Mi+(.848013+de*(.215638*de-1.06021)))}const Fn=Ne.sub(xe)._mult(en)._add(xe)._unit()._mult(yt?-1:1);this.addHalfVertex(J,Fn.x,Fn.y,!1,yt,0,Y)}}me&&this.addCurrentVertex(J,Ne,-wt,-Yt,Y)}else if(Et==="butt")this.addCurrentVertex(J,K,0,0,Y);else if(Et==="square"){const Lt=ne?1:-1;this.addCurrentVertex(J,K,Lt,Lt,Y)}else Et==="round"&&(ne&&(this.addCurrentVertex(J,xe,0,0,Y),this.addCurrentVertex(J,xe,1,1,Y,!0)),me&&(this.addCurrentVertex(J,Ne,-1,-1,Y,!0),this.addCurrentVertex(J,Ne,0,0,Y)));if(dt&&Pe<z-1){const Lt=J.dist(me);if(Lt>2*H){const wt=J.add(me.sub(J)._mult(H/Lt)._round());this.updateDistance(J,wt),this.addCurrentVertex(wt,Ne,0,0,Y),J=wt}}}}addCurrentVertex(i,l,h,g,_,x=!1){const T=l.y*g-l.x,E=-l.y-l.x*g;this.addHalfVertex(i,l.x+l.y*h,l.y-l.x*h,x,!1,h,_),this.addHalfVertex(i,T,E,x,!0,-g,_),this.distance>Vx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,h,g,_,x))}addHalfVertex({x:i,y:l},h,g,_,x,T,E){const D=.5*(this.lineClips?this.scaledDistance*(Vx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(_?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(T===0?0:T<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,z,this.e2),E.primitiveLength++),x?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}let Ox,Fx;Wt("LineBucket",ry,{omit:["layers","patternFeatures"]});var $x={get paint(){return Fx=Fx||new jr({"line-opacity":new un(Oe.paint_line["line-opacity"]),"line-color":new un(Oe.paint_line["line-color"]),"line-translate":new Xt(Oe.paint_line["line-translate"]),"line-translate-anchor":new Xt(Oe.paint_line["line-translate-anchor"]),"line-width":new un(Oe.paint_line["line-width"]),"line-gap-width":new un(Oe.paint_line["line-gap-width"]),"line-offset":new un(Oe.paint_line["line-offset"]),"line-blur":new un(Oe.paint_line["line-blur"]),"line-dasharray":new Uh(Oe.paint_line["line-dasharray"]),"line-pattern":new Gc(Oe.paint_line["line-pattern"]),"line-gradient":new cu(Oe.paint_line["line-gradient"])})},get layout(){return Ox=Ox||new jr({"line-cap":new Xt(Oe.layout_line["line-cap"]),"line-join":new un(Oe.layout_line["line-join"]),"line-miter-limit":new Xt(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Xt(Oe.layout_line["line-round-limit"]),"line-sort-key":new un(Oe.layout_line["line-sort-key"])})}};class zA extends un{possiblyEvaluate(i,l){return l=new pi(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,h,g){return l=St({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,h,g)}}let Tp;class BA extends gr{constructor(i){super(i,$x),this.gradientVersion=0,Tp||(Tp=new zA($x.paint.properties["line-width"].specification),Tp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Fo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=Tp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new ry(i)}queryRadius(i){const l=i,h=jx(Xh("line-width",this,l),Xh("line-gap-width",this,l)),g=Xh("line-offset",this,l);return h/2+Math.abs(g)+_p(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x}){const T=bp(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,x),E=x/2*jx(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),D=this.paint.get("line-offset").evaluate(l,h);return D&&(g=function(z,j){const H=[];for(let Y=0;Y<z.length;Y++){const J=z[Y],ne=[];for(let me=0;me<J.length;me++){const xe=J[me-1],Ne=J[me],Pe=J[me+1],K=me===0?new R(0,0):Ne.sub(xe)._unit()._perp(),de=me===J.length-1?new R(0,0):Pe.sub(Ne)._unit()._perp(),Ae=K._add(de)._unit(),it=Ae.x*de.x+Ae.y*de.y;it!==0&&Ae._mult(1/it),ne.push(Ae._mult(j)._add(Ne))}H.push(ne)}return H}(g,D*x)),function(z,j,H){for(let Y=0;Y<j.length;Y++){const J=j[Y];if(z.length>=3){for(let ne=0;ne<J.length;ne++)if(Wc(z,J[ne]))return!0}if(K2(z,J,H))return!0}return!1}(T,g,E)}isTileClipped(){return!0}}function jx(u,i){return i>0?i+2*u:u}const VA=Ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),OA=Ei([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const FA=Ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nx=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$A=Ei([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function jA(u,i,l){return u.sections.forEach(h=>{h.text=function(g,_,x){const T=_.layout.get("text-transform").evaluate(x,{});return T==="uppercase"?g=g.toLocaleUpperCase():T==="lowercase"&&(g=g.toLocaleLowerCase()),Is.applyArabicShaping&&(g=Is.applyArabicShaping(g)),g}(h.text,i,l)}),u}Ei([{name:"triangle",components:3,type:"Uint16"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ei([{type:"Float32",name:"offsetX"}]),Ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ei([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const uf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ux,ay,Gx,lr=24,sy={};function NA(){return Ux||(Ux=1,sy.read=function(u,i,l,h,g){var _,x,T=8*g-h-1,E=(1<<T)-1,D=E>>1,z=-7,j=l?g-1:0,H=l?-1:1,Y=u[i+j];for(j+=H,_=Y&(1<<-z)-1,Y>>=-z,z+=T;z>0;_=256*_+u[i+j],j+=H,z-=8);for(x=_&(1<<-z)-1,_>>=-z,z+=h;z>0;x=256*x+u[i+j],j+=H,z-=8);if(_===0)_=1-D;else{if(_===E)return x?NaN:1/0*(Y?-1:1);x+=Math.pow(2,h),_-=D}return(Y?-1:1)*x*Math.pow(2,_-h)},sy.write=function(u,i,l,h,g,_){var x,T,E,D=8*_-g-1,z=(1<<D)-1,j=z>>1,H=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=h?0:_-1,J=h?1:-1,ne=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(T=isNaN(i)?1:0,x=z):(x=Math.floor(Math.log(i)/Math.LN2),i*(E=Math.pow(2,-x))<1&&(x--,E*=2),(i+=x+j>=1?H/E:H*Math.pow(2,1-j))*E>=2&&(x++,E/=2),x+j>=z?(T=0,x=z):x+j>=1?(T=(i*E-1)*Math.pow(2,g),x+=j):(T=i*Math.pow(2,j-1)*Math.pow(2,g),x=0));g>=8;u[l+Y]=255&T,Y+=J,T/=256,g-=8);for(x=x<<g|T,D+=g;D>0;u[l+Y]=255&x,Y+=J,x/=256,D-=8);u[l+Y-J]|=128*ne}),sy}function qx(){if(Gx)return ay;Gx=1,ay=i;var u=NA();function i(K){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(K)?K:new Uint8Array(K||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var l=4294967296,h=1/l,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function _(K){return K.type===i.Bytes?K.readVarint()+K.pos:K.pos+1}function x(K,de,Ae){return Ae?4294967296*de+(K>>>0):4294967296*(de>>>0)+(K>>>0)}function T(K,de,Ae){var it=de<=16383?1:de<=2097151?2:de<=268435455?3:Math.floor(Math.log(de)/(7*Math.LN2));Ae.realloc(it);for(var It=Ae.pos-1;It>=K;It--)Ae.buf[It+it]=Ae.buf[It]}function E(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeVarint(K[Ae])}function D(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeSVarint(K[Ae])}function z(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeFloat(K[Ae])}function j(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeDouble(K[Ae])}function H(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeBoolean(K[Ae])}function Y(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeFixed32(K[Ae])}function J(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeSFixed32(K[Ae])}function ne(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeFixed64(K[Ae])}function me(K,de){for(var Ae=0;Ae<K.length;Ae++)de.writeSFixed64(K[Ae])}function xe(K,de){return(K[de]|K[de+1]<<8|K[de+2]<<16)+16777216*K[de+3]}function Ne(K,de,Ae){K[Ae]=de,K[Ae+1]=de>>>8,K[Ae+2]=de>>>16,K[Ae+3]=de>>>24}function Pe(K,de){return(K[de]|K[de+1]<<8|K[de+2]<<16)+(K[de+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(K,de,Ae){for(Ae=Ae||this.length;this.pos<Ae;){var it=this.readVarint(),It=it>>3,dt=this.pos;this.type=7&it,K(It,de,this),this.pos===dt&&this.skip(it)}return de},readMessage:function(K,de){return this.readFields(K,de,this.readVarint()+this.pos)},readFixed32:function(){var K=xe(this.buf,this.pos);return this.pos+=4,K},readSFixed32:function(){var K=Pe(this.buf,this.pos);return this.pos+=4,K},readFixed64:function(){var K=xe(this.buf,this.pos)+xe(this.buf,this.pos+4)*l;return this.pos+=8,K},readSFixed64:function(){var K=xe(this.buf,this.pos)+Pe(this.buf,this.pos+4)*l;return this.pos+=8,K},readFloat:function(){var K=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,K},readDouble:function(){var K=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,K},readVarint:function(K){var de,Ae,it=this.buf;return de=127&(Ae=it[this.pos++]),Ae<128?de:(de|=(127&(Ae=it[this.pos++]))<<7,Ae<128?de:(de|=(127&(Ae=it[this.pos++]))<<14,Ae<128?de:(de|=(127&(Ae=it[this.pos++]))<<21,Ae<128?de:function(It,dt,yt){var Rt,Et,Lt=yt.buf;if(Rt=(112&(Et=Lt[yt.pos++]))>>4,Et<128||(Rt|=(127&(Et=Lt[yt.pos++]))<<3,Et<128)||(Rt|=(127&(Et=Lt[yt.pos++]))<<10,Et<128)||(Rt|=(127&(Et=Lt[yt.pos++]))<<17,Et<128)||(Rt|=(127&(Et=Lt[yt.pos++]))<<24,Et<128)||(Rt|=(1&(Et=Lt[yt.pos++]))<<31,Et<128))return x(It,Rt,dt);throw new Error("Expected varint not more than 10 bytes")}(de|=(15&(Ae=it[this.pos]))<<28,K,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var K=this.readVarint();return K%2==1?(K+1)/-2:K/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var K=this.readVarint()+this.pos,de=this.pos;return this.pos=K,K-de>=12&&g?function(Ae,it,It){return g.decode(Ae.subarray(it,It))}(this.buf,de,K):function(Ae,it,It){for(var dt="",yt=it;yt<It;){var Rt,Et,Lt,wt=Ae[yt],Yt=null,on=wt>239?4:wt>223?3:wt>191?2:1;if(yt+on>It)break;on===1?wt<128&&(Yt=wt):on===2?(192&(Rt=Ae[yt+1]))==128&&(Yt=(31&wt)<<6|63&Rt)<=127&&(Yt=null):on===3?(Et=Ae[yt+2],(192&(Rt=Ae[yt+1]))==128&&(192&Et)==128&&((Yt=(15&wt)<<12|(63&Rt)<<6|63&Et)<=2047||Yt>=55296&&Yt<=57343)&&(Yt=null)):on===4&&(Et=Ae[yt+2],Lt=Ae[yt+3],(192&(Rt=Ae[yt+1]))==128&&(192&Et)==128&&(192&Lt)==128&&((Yt=(15&wt)<<18|(63&Rt)<<12|(63&Et)<<6|63&Lt)<=65535||Yt>=1114112)&&(Yt=null)),Yt===null?(Yt=65533,on=1):Yt>65535&&(Yt-=65536,dt+=String.fromCharCode(Yt>>>10&1023|55296),Yt=56320|1023&Yt),dt+=String.fromCharCode(Yt),yt+=on}return dt}(this.buf,de,K)},readBytes:function(){var K=this.readVarint()+this.pos,de=this.buf.subarray(this.pos,K);return this.pos=K,de},readPackedVarint:function(K,de){if(this.type!==i.Bytes)return K.push(this.readVarint(de));var Ae=_(this);for(K=K||[];this.pos<Ae;)K.push(this.readVarint(de));return K},readPackedSVarint:function(K){if(this.type!==i.Bytes)return K.push(this.readSVarint());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readSVarint());return K},readPackedBoolean:function(K){if(this.type!==i.Bytes)return K.push(this.readBoolean());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readBoolean());return K},readPackedFloat:function(K){if(this.type!==i.Bytes)return K.push(this.readFloat());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readFloat());return K},readPackedDouble:function(K){if(this.type!==i.Bytes)return K.push(this.readDouble());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readDouble());return K},readPackedFixed32:function(K){if(this.type!==i.Bytes)return K.push(this.readFixed32());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readFixed32());return K},readPackedSFixed32:function(K){if(this.type!==i.Bytes)return K.push(this.readSFixed32());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readSFixed32());return K},readPackedFixed64:function(K){if(this.type!==i.Bytes)return K.push(this.readFixed64());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readFixed64());return K},readPackedSFixed64:function(K){if(this.type!==i.Bytes)return K.push(this.readSFixed64());var de=_(this);for(K=K||[];this.pos<de;)K.push(this.readSFixed64());return K},skip:function(K){var de=7&K;if(de===i.Varint)for(;this.buf[this.pos++]>127;);else if(de===i.Bytes)this.pos=this.readVarint()+this.pos;else if(de===i.Fixed32)this.pos+=4;else{if(de!==i.Fixed64)throw new Error("Unimplemented type: "+de);this.pos+=8}},writeTag:function(K,de){this.writeVarint(K<<3|de)},realloc:function(K){for(var de=this.length||16;de<this.pos+K;)de*=2;if(de!==this.length){var Ae=new Uint8Array(de);Ae.set(this.buf),this.buf=Ae,this.length=de}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(K){this.realloc(4),Ne(this.buf,K,this.pos),this.pos+=4},writeSFixed32:function(K){this.realloc(4),Ne(this.buf,K,this.pos),this.pos+=4},writeFixed64:function(K){this.realloc(8),Ne(this.buf,-1&K,this.pos),Ne(this.buf,Math.floor(K*h),this.pos+4),this.pos+=8},writeSFixed64:function(K){this.realloc(8),Ne(this.buf,-1&K,this.pos),Ne(this.buf,Math.floor(K*h),this.pos+4),this.pos+=8},writeVarint:function(K){(K=+K||0)>268435455||K<0?function(de,Ae){var it,It;if(de>=0?(it=de%4294967296|0,It=de/4294967296|0):(It=~(-de/4294967296),4294967295^(it=~(-de%4294967296))?it=it+1|0:(it=0,It=It+1|0)),de>=18446744073709552e3||de<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ae.realloc(10),function(dt,yt,Rt){Rt.buf[Rt.pos++]=127&dt|128,dt>>>=7,Rt.buf[Rt.pos++]=127&dt|128,dt>>>=7,Rt.buf[Rt.pos++]=127&dt|128,dt>>>=7,Rt.buf[Rt.pos++]=127&dt|128,Rt.buf[Rt.pos]=127&(dt>>>=7)}(it,0,Ae),function(dt,yt){var Rt=(7&dt)<<4;yt.buf[yt.pos++]|=Rt|((dt>>>=3)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt)))))}(It,Ae)}(K,this):(this.realloc(4),this.buf[this.pos++]=127&K|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=K>>>7&127))))},writeSVarint:function(K){this.writeVarint(K<0?2*-K-1:2*K)},writeBoolean:function(K){this.writeVarint(!!K)},writeString:function(K){K=String(K),this.realloc(4*K.length),this.pos++;var de=this.pos;this.pos=function(it,It,dt){for(var yt,Rt,Et=0;Et<It.length;Et++){if((yt=It.charCodeAt(Et))>55295&&yt<57344){if(!Rt){yt>56319||Et+1===It.length?(it[dt++]=239,it[dt++]=191,it[dt++]=189):Rt=yt;continue}if(yt<56320){it[dt++]=239,it[dt++]=191,it[dt++]=189,Rt=yt;continue}yt=Rt-55296<<10|yt-56320|65536,Rt=null}else Rt&&(it[dt++]=239,it[dt++]=191,it[dt++]=189,Rt=null);yt<128?it[dt++]=yt:(yt<2048?it[dt++]=yt>>6|192:(yt<65536?it[dt++]=yt>>12|224:(it[dt++]=yt>>18|240,it[dt++]=yt>>12&63|128),it[dt++]=yt>>6&63|128),it[dt++]=63&yt|128)}return dt}(this.buf,K,this.pos);var Ae=this.pos-de;Ae>=128&&T(de,Ae,this),this.pos=de-1,this.writeVarint(Ae),this.pos+=Ae},writeFloat:function(K){this.realloc(4),u.write(this.buf,K,this.pos,!0,23,4),this.pos+=4},writeDouble:function(K){this.realloc(8),u.write(this.buf,K,this.pos,!0,52,8),this.pos+=8},writeBytes:function(K){var de=K.length;this.writeVarint(de),this.realloc(de);for(var Ae=0;Ae<de;Ae++)this.buf[this.pos++]=K[Ae]},writeRawMessage:function(K,de){this.pos++;var Ae=this.pos;K(de,this);var it=this.pos-Ae;it>=128&&T(Ae,it,this),this.pos=Ae-1,this.writeVarint(it),this.pos+=it},writeMessage:function(K,de,Ae){this.writeTag(K,i.Bytes),this.writeRawMessage(de,Ae)},writePackedVarint:function(K,de){de.length&&this.writeMessage(K,E,de)},writePackedSVarint:function(K,de){de.length&&this.writeMessage(K,D,de)},writePackedBoolean:function(K,de){de.length&&this.writeMessage(K,H,de)},writePackedFloat:function(K,de){de.length&&this.writeMessage(K,z,de)},writePackedDouble:function(K,de){de.length&&this.writeMessage(K,j,de)},writePackedFixed32:function(K,de){de.length&&this.writeMessage(K,Y,de)},writePackedSFixed32:function(K,de){de.length&&this.writeMessage(K,J,de)},writePackedFixed64:function(K,de){de.length&&this.writeMessage(K,ne,de)},writePackedSFixed64:function(K,de){de.length&&this.writeMessage(K,me,de)},writeBytesField:function(K,de){this.writeTag(K,i.Bytes),this.writeBytes(de)},writeFixed32Field:function(K,de){this.writeTag(K,i.Fixed32),this.writeFixed32(de)},writeSFixed32Field:function(K,de){this.writeTag(K,i.Fixed32),this.writeSFixed32(de)},writeFixed64Field:function(K,de){this.writeTag(K,i.Fixed64),this.writeFixed64(de)},writeSFixed64Field:function(K,de){this.writeTag(K,i.Fixed64),this.writeSFixed64(de)},writeVarintField:function(K,de){this.writeTag(K,i.Varint),this.writeVarint(de)},writeSVarintField:function(K,de){this.writeTag(K,i.Varint),this.writeSVarint(de)},writeStringField:function(K,de){this.writeTag(K,i.Bytes),this.writeString(de)},writeFloatField:function(K,de){this.writeTag(K,i.Fixed32),this.writeFloat(de)},writeDoubleField:function(K,de){this.writeTag(K,i.Fixed64),this.writeDouble(de)},writeBooleanField:function(K,de){this.writeVarintField(K,!!de)}},ay}var ol,oy=b(qx());function UA(u,i,l){u===1&&l.readMessage(GA,i)}function GA(u,i,l){if(u===3){const{id:h,bitmap:g,width:_,height:x,left:T,top:E,advance:D}=l.readMessage(qA,{});i.push({id:h,bitmap:new Jh({width:_+6,height:x+6},g),metrics:{width:_,height:x,left:T,top:E,advance:D}})}}function qA(u,i,l){u===1?i.id=l.readVarint():u===2?i.bitmap=l.readBytes():u===3?i.width=l.readVarint():u===4?i.height=l.readVarint():u===5?i.left=l.readSVarint():u===6?i.top=l.readSVarint():u===7&&(i.advance=l.readVarint())}function Hx(u){let i=0,l=0;for(const x of u)i+=x.w*x.h,l=Math.max(l,x.w);u.sort((x,T)=>T.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let g=0,_=0;for(const x of u)for(let T=h.length-1;T>=0;T--){const E=h[T];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===E.w&&x.h===E.h){const D=h.pop();T<h.length&&(h[T]=D)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:g,h:_,fill:i/(g*_)||0}}class ly{constructor(i,{pixelRatio:l,version:h,stretchX:g,stretchY:_,content:x,textFitWidth:T,textFitHeight:E}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=T,this.textFitHeight=E}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Wx{constructor(i,l){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(i,h,_),this.addImages(l,g,_);const{w:x,h:T}=Hx(_),E=new ca({width:x||1,height:T||1});for(const D in i){const z=i[D],j=h[D].paddedRect;ca.copy(z.data,E,{x:0,y:0},{x:j.x+1,y:j.y+1},z.data)}for(const D in l){const z=l[D],j=g[D].paddedRect,H=j.x+1,Y=j.y+1,J=z.data.width,ne=z.data.height;ca.copy(z.data,E,{x:0,y:0},{x:H,y:Y},z.data),ca.copy(z.data,E,{x:0,y:ne-1},{x:H,y:Y-1},{width:J,height:1}),ca.copy(z.data,E,{x:0,y:0},{x:H,y:Y+ne},{width:J,height:1}),ca.copy(z.data,E,{x:J-1,y:0},{x:H-1,y:Y},{width:1,height:ne}),ca.copy(z.data,E,{x:0,y:0},{x:H+J,y:Y},{width:1,height:ne})}this.image=E,this.iconPositions=h,this.patternPositions=g}addImages(i,l,h){for(const g in i){const _=i[g],x={x:0,y:0,w:_.data.width+2,h:_.data.height+2};h.push(x),l[g]=new ly(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),l)}patchUpdatedImage(i,l,h){if(!i||!l||i.version===l.version)return;i.version=l.version;const[g,_]=i.tl;h.update(l.data,void 0,{x:g,y:_})}}Wt("ImagePosition",ly),Wt("ImageAtlas",Wx),d.an=void 0,(ol=d.an||(d.an={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";class cf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,l,h){const g=new cf;return g.scale=i||1,g.fontStack=l,g.verticalAlign=h||"bottom",g}static forImage(i,l){const h=new cf;return h.imageName=i,h.verticalAlign=l||"bottom",h}}class Xc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const h=new Xc;for(let g=0;g<i.sections.length;g++){const _=i.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,l)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let l="";for(let h=0;h<i.length;h++){const g=i.charCodeAt(h+1)||null,_=i.charCodeAt(h-1)||null;l+=g&&$h(g)&&!uf[i[h+1]]||_&&$h(_)&&!uf[i[h-1]]||!uf[i[h]]?i[h]:uf[i[h]]}return l}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&Pp[this.text.charCodeAt(h)];h++)i++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&Pp[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const h=new Xc;return h.text=this.text.substring(i,l),h.sectionIndex=this.sectionIndex.slice(i,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}getMaxImageSize(i){let l=0,h=0;for(let g=0;g<this.length();g++){const _=this.getSection(g);if(_.imageName){const x=i[_.imageName];if(!x)continue;const T=x.displaySize;l=Math.max(l,T[0]),h=Math.max(h,T[1])}}return{maxImageWidth:l,maxImageHeight:h}}addTextSection(i,l){this.text+=i.text,this.sections.push(cf.forText(i.scale,i.fontStack||l,i.verticalAlign));const h=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(h)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Je("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(cf.forImage(l,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function kp(u,i,l,h,g,_,x,T,E,D,z,j,H,Y,J){const ne=Xc.fromFeature(u,g);let me;j===d.an.vertical&&ne.verticalizePunctuation();const{processBidirectionalText:xe,processStyledBidirectionalText:Ne}=Is;if(xe&&ne.sections.length===1){me=[];const de=xe(ne.toString(),uy(ne,D,_,i,h,Y));for(const Ae of de){const it=new Xc;it.text=Ae,it.sections=ne.sections;for(let It=0;It<Ae.length;It++)it.sectionIndex.push(0);me.push(it)}}else if(Ne){me=[];const de=Ne(ne.text,ne.sectionIndex,uy(ne,D,_,i,h,Y));for(const Ae of de){const it=new Xc;it.text=Ae[0],it.sectionIndex=Ae[1],it.sections=ne.sections,me.push(it)}}else me=function(de,Ae){const it=[],It=de.text;let dt=0;for(const yt of Ae)it.push(de.substring(dt,yt)),dt=yt;return dt<It.length&&it.push(de.substring(dt,It.length)),it}(ne,uy(ne,D,_,i,h,Y));const Pe=[],K={positionedLines:Pe,text:ne.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(de,Ae,it,It,dt,yt,Rt,Et,Lt,wt,Yt,on){let sn=0,en=0,Fn=0,Mi=0;const Ji=Et==="right"?1:Et==="left"?0:.5,Mr=lr/on;let Ra=0;for(const Ti of dt){Ti.trim();const ur=Ti.getMaxScale(),xr={positionedGlyphs:[],lineOffset:0};de.positionedLines[Ra]=xr;const wr=xr.positionedGlyphs;let Jr=0;if(!Ti.length()){en+=yt,++Ra;continue}const La=KA(It,Ti,Mr);for(let ha=0;ha<Ti.length();ha++){const Qi=Ti.getSection(ha),dr=Ti.getSectionIndex(ha),hr=Ti.getCharCode(ha),Hi=YA(Lt,Yt,hr);let mi;if(Qi.imageName){if(de.iconsInText=!0,Qi.scale=Qi.scale*Mr,mi=JA(Qi,Hi,ur,La,It),!mi)continue;Jr=Math.max(Jr,mi.imageOffset)}else if(mi=XA(Qi,hr,Hi,La,Ae,it),!mi)continue;const{rect:us,metrics:td,baselineOffset:cs}=mi;wr.push({glyph:hr,imageName:Qi.imageName,x:sn,y:en+cs+-17,vertical:Hi,scale:Qi.scale,fontStack:Qi.fontStack,sectionIndex:dr,metrics:td,rect:us}),Hi?(de.verticalizable=!0,sn+=(Qi.imageName?td.advance:lr)*Qi.scale+wt):sn+=td.advance*Qi.scale+wt}wr.length!==0&&(Fn=Math.max(sn-wt,Fn),QA(wr,0,wr.length-1,Ji)),sn=0,xr.lineOffset=Math.max(Jr,(ur-1)*lr);const cr=yt*ur+Jr;en+=cr,Mi=Math.max(cr,Mi),++Ra}const{horizontalAlign:da,verticalAlign:br}=cy(Rt);(function(Ti,ur,xr,wr,Jr,La,cr,ha,Qi){const dr=(ur-xr)*Jr;let hr=0;hr=La!==cr?-ha*wr- -17:-wr*Qi*cr+.5*cr;for(const Hi of Ti)for(const mi of Hi.positionedGlyphs)mi.x+=dr,mi.y+=hr})(de.positionedLines,Ji,da,br,Fn,Mi,yt,en,dt.length),de.top+=-br*en,de.bottom=de.top+en,de.left+=-da*Fn,de.right=de.left+Fn}(K,i,l,h,me,x,T,E,j,D,H,J),!function(de){for(const Ae of de)if(Ae.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&K}const Pp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},HA={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},WA={40:!0};function Zx(u,i,l,h,g,_){if(i.imageName){const x=h[i.imageName];return x?x.displaySize[0]*i.scale*lr/_+g:0}{const x=l[i.fontStack],T=x&&x[u];return T?T.metrics.advance*i.scale+g:0}}function Kx(u,i,l,h){const g=Math.pow(u-i,2);return h?u<i?g/2:2*g:g+Math.abs(l)*l}function ZA(u,i,l){let h=0;return u===10&&(h-=1e4),l&&(h+=150),u!==40&&u!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function Yx(u,i,l,h,g,_){let x=null,T=Kx(i,l,g,_);for(const E of h){const D=Kx(i-E.x,l,g,_)+E.badness;D<=T&&(x=E,T=D)}return{index:u,x:i,priorBreak:x,badness:T}}function Xx(u){return u?Xx(u.priorBreak).concat(u.index):[]}function uy(u,i,l,h,g,_){if(!u)return[];const x=[],T=function(j,H,Y,J,ne,me){let xe=0;for(let Ne=0;Ne<j.length();Ne++){const Pe=j.getSection(Ne);xe+=Zx(j.getCharCode(Ne),Pe,J,ne,H,me)}return xe/Math.max(1,Math.ceil(xe/Y))}(u,i,l,h,g,_),E=u.text.indexOf("")>=0;let D=0;for(let j=0;j<u.length();j++){const H=u.getSection(j),Y=u.getCharCode(j);if(Pp[Y]||(D+=Zx(Y,H,h,g,i,_)),j<u.length()-1){const J=!((z=Y)<11904)&&(!!Vn["CJK Compatibility Forms"](z)||!!Vn["CJK Compatibility"](z)||!!Vn["CJK Strokes"](z)||!!Vn["CJK Symbols and Punctuation"](z)||!!Vn["Enclosed CJK Letters and Months"](z)||!!Vn["Halfwidth and Fullwidth Forms"](z)||!!Vn["Ideographic Description Characters"](z)||!!Vn["Vertical Forms"](z)||Fh.test(String.fromCodePoint(z)));(HA[Y]||J||H.imageName||j!==u.length()-2&&WA[u.getCharCode(j+1)])&&x.push(Yx(j+1,D,T,x,ZA(Y,u.getCharCode(j+1),J&&E),!1))}}var z;return Xx(Yx(u.length(),D,T,x,0,!0))}function cy(u){let i=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function KA(u,i,l){const h=i.getMaxScale()*lr,{maxImageWidth:g,maxImageHeight:_}=i.getMaxImageSize(u),x=Math.max(h,_*l);return{verticalLineContentWidth:Math.max(h,g*l),horizontalLineContentHeight:x}}function Jx(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function YA(u,i,l){return!(u===d.an.horizontal||!i&&!jc(l)||i&&(Pp[l]||(h=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function XA(u,i,l,h,g,_){const x=_[u.fontStack],T=function(D,z,j,H){if(D&&D.rect)return D;const Y=z[j.fontStack],J=Y&&Y[H];return J?{rect:null,metrics:J.metrics}:null}(x&&x[i],g,u,i);if(T===null)return null;let E;if(l)E=h.verticalLineContentWidth-u.scale*lr;else{const D=Jx(u.verticalAlign);E=(h.horizontalLineContentHeight-u.scale*lr)*D}return{rect:T.rect,metrics:T.metrics,baselineOffset:E}}function JA(u,i,l,h,g){const _=g[u.imageName];if(!_)return null;const x=_.paddedRect,T=_.displaySize,E={width:T[0],height:T[1],left:1,top:-3,advance:i?T[1]:T[0]};let D;if(i)D=h.verticalLineContentWidth-T[1]*u.scale;else{const z=Jx(u.verticalAlign);D=(h.horizontalLineContentHeight-T[1]*u.scale)*z}return{rect:x,metrics:E,baselineOffset:D,imageOffset:(i?T[0]:T[1])*u.scale-lr*l}}function QA(u,i,l,h){if(h===0)return;const g=u[l],_=(u[l].x+g.metrics.advance*g.scale)*h;for(let x=i;x<=l;x++)u[x].x-=_}function eE(u,i,l){const{horizontalAlign:h,verticalAlign:g}=cy(l),_=i[0]-u.displaySize[0]*h,x=i[1]-u.displaySize[1]*g;return{image:u,top:x,bottom:x+u.displaySize[1],left:_,right:_+u.displaySize[0]}}function Qx(u){var i,l;let h=u.left,g=u.top,_=u.right-h,x=u.bottom-g;const T=(i=u.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",E=(l=u.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",D=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(E==="proportional"){if(T==="stretchOnly"&&_/x<D||T==="proportional"){const z=Math.ceil(x*D);h*=z/_,_=z}}else if(T==="proportional"&&E==="stretchOnly"&&D!==0&&_/x>D){const z=Math.ceil(_/D);g*=z/x,x=z}return{x1:h,y1:g,x2:h+_,y2:g+x}}function ew(u,i,l,h,g,_){const x=u.image;let T;if(x.content){const me=x.content,xe=x.pixelRatio||1;T=[me[0]/xe,me[1]/xe,x.displaySize[0]-me[2]/xe,x.displaySize[1]-me[3]/xe]}const E=i.left*_,D=i.right*_;let z,j,H,Y;l==="width"||l==="both"?(Y=g[0]+E-h[3],j=g[0]+D+h[1]):(Y=g[0]+(E+D-x.displaySize[0])/2,j=Y+x.displaySize[0]);const J=i.top*_,ne=i.bottom*_;return l==="height"||l==="both"?(z=g[1]+J-h[0],H=g[1]+ne+h[2]):(z=g[1]+(J+ne-x.displaySize[1])/2,H=z+x.displaySize[1]),{image:x,top:z,right:j,bottom:H,left:Y,collisionPadding:T}}const co=128,ll=32640;function tw(u,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new pi(u+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=l;let _=0;for(;_<h.length&&h[_]<=u;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<u+1;)x++;x=Math.min(h.length-1,x);const T=h[_],E=h[x];return l.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:T,maxZoom:E,minSize:l.evaluate(new pi(T)),maxSize:l.evaluate(new pi(E)),interpolationType:g}}}function dy(u,i,l){let h="never";const g=u.get(i);return g?h=g:u.get(l)&&(h="always"),h}const tE=sf.VectorTileFeature.types,nE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ip(u,i,l,h,g,_,x,T,E,D,z,j,H){const Y=T?Math.min(ll,Math.round(T[0])):0,J=T?Math.min(ll,Math.round(T[1])):0;u.emplaceBack(i,l,Math.round(32*h),Math.round(32*g),_,x,(Y<<1)+(E?1:0),J,16*D,16*z,256*j,256*H)}function hy(u,i,l){u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l)}function iE(u){for(const i of u.sections)if(jh(i.text))return!0;return!1}class fy{constructor(i){this.layoutVertexArray=new Tn,this.indexArray=new ai,this.programConfigurations=i,this.segments=new Nn,this.dynamicLayoutVertexArray=new Zn,this.opacityVertexArray=new Si,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,VA.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,OA.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,nE,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Wt("SymbolBuffers",fy);class my{constructor(i,l,h){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Nn,this.collisionVertexArray=new Ci}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,FA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Wt("CollisionBuffers",my);class Jc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tw(this.zoom,l["text-size"]),this.iconSizeData=tw(this.zoom,l["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=dy(h,"text-overlap","text-allow-overlap")!=="never"||dy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.an[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID}createArrays(){this.text=new fy(new zs(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new fy(new zs(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Te,this.lineVertexArray=new De,this.symbolInstances=new Ie,this.textAnchorOffsets=new ke}calculateGlyphDependencies(i,l,h,g,_){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,(h||g)&&_){const T=uf[i.charAt(x)];T&&(l[T.charCodeAt(0)]=!0)}}populate(i,l,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),T=_.get("text-field"),E=_.get("icon-image"),D=(T.value.kind!=="constant"||T.value.value instanceof Ir&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),z=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,j=_.get("symbol-sort-key");if(this.features=[],!D&&!z)return;const H=l.iconDependencies,Y=l.glyphDependencies,J=l.availableImages,ne=new pi(this.zoom,{globalState:this.globalState});for(const{feature:me,id:xe,index:Ne,sourceLayerIndex:Pe}of i){const K=g._featureFilter.needGeometry,de=vu(me,K);if(!g._featureFilter.filter(ne,de,h))continue;let Ae,it;if(K||(de.geometry=gu(me)),D){const dt=g.getValueAndResolveTokens("text-field",de,h,J),yt=Ir.factory(dt),Rt=this.hasRTLText=this.hasRTLText||iE(yt);(!Rt||Is.getRTLTextPluginStatus()==="unavailable"||Rt&&Is.isParsed())&&(Ae=jA(yt,g,de))}if(z){const dt=g.getValueAndResolveTokens("icon-image",de,h,J);it=dt instanceof Zr?dt:Zr.fromString(dt)}if(!Ae&&!it)continue;const It=this.sortFeaturesByKey?j.evaluate(de,{},h):void 0;if(this.features.push({id:xe,text:Ae,icon:it,index:Ne,sourceLayerIndex:Pe,geometry:de.geometry,properties:me.properties,type:tE[me.type],sortKey:It}),it&&(H[it.name]=!0),Ae){const dt=x.evaluate(de,{},h).join(","),yt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.an.vertical)>=0;for(const Rt of Ae.sections)if(Rt.image)H[Rt.image.name]=!0;else{const Et=Oh(Ae.toString()),Lt=Rt.fontStack||dt,wt=Y[Lt]=Y[Lt]||{};this.calculateGlyphDependencies(Rt.text,wt,yt,this.allowVerticalPlacement,Et)}}}_.get("symbol-placement")==="line"&&(this.features=function(me){const xe={},Ne={},Pe=[];let K=0;function de(dt){Pe.push(me[dt]),K++}function Ae(dt,yt,Rt){const Et=Ne[dt];return delete Ne[dt],Ne[yt]=Et,Pe[Et].geometry[0].pop(),Pe[Et].geometry[0]=Pe[Et].geometry[0].concat(Rt[0]),Et}function it(dt,yt,Rt){const Et=xe[yt];return delete xe[yt],xe[dt]=Et,Pe[Et].geometry[0].shift(),Pe[Et].geometry[0]=Rt[0].concat(Pe[Et].geometry[0]),Et}function It(dt,yt,Rt){const Et=Rt?yt[0][yt[0].length-1]:yt[0][0];return`${dt}:${Et.x}:${Et.y}`}for(let dt=0;dt<me.length;dt++){const yt=me[dt],Rt=yt.geometry,Et=yt.text?yt.text.toString():null;if(!Et){de(dt);continue}const Lt=It(Et,Rt),wt=It(Et,Rt,!0);if(Lt in Ne&&wt in xe&&Ne[Lt]!==xe[wt]){const Yt=it(Lt,wt,Rt),on=Ae(Lt,wt,Pe[Yt].geometry);delete xe[Lt],delete Ne[wt],Ne[It(Et,Pe[on].geometry,!0)]=on,Pe[Yt].geometry=null}else Lt in Ne?Ae(Lt,wt,Rt):wt in xe?it(Lt,wt,Rt):(de(dt),xe[Lt]=K-1,Ne[wt]=K-1)}return Pe.filter(dt=>dt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,xe)=>me.sortKey-xe.sortKey)}update(i,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const h=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(l[i.segment+1]),_=i.dist(l[i.segment]);const x={};for(let T=i.segment+1;T<l.length;T++)x[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:g},T<l.length-1&&(g+=l[T+1].dist(l[T]));for(let T=i.segment||0;T>=0;T--)x[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:_},T>0&&(_+=l[T-1].dist(l[T]));for(let T=0;T<l.length;T++){const E=x[T];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,l,h,g,_,x,T,E,D,z,j,H){const Y=i.indexArray,J=i.layoutVertexArray,ne=i.segments.prepareSegment(4*l.length,J,Y,this.canOverlap?x.sortKey:void 0),me=this.glyphOffsetArray.length,xe=ne.vertexLength,Ne=this.allowVerticalPlacement&&T===d.an.vertical?Math.PI/2:0,Pe=x.text&&x.text.sections;for(let K=0;K<l.length;K++){const{tl:de,tr:Ae,bl:it,br:It,tex:dt,pixelOffsetTL:yt,pixelOffsetBR:Rt,minFontScaleX:Et,minFontScaleY:Lt,glyphOffset:wt,isSDF:Yt,sectionIndex:on}=l[K],sn=ne.vertexLength,en=wt[1];Ip(J,E.x,E.y,de.x,en+de.y,dt.x,dt.y,h,Yt,yt.x,yt.y,Et,Lt),Ip(J,E.x,E.y,Ae.x,en+Ae.y,dt.x+dt.w,dt.y,h,Yt,Rt.x,yt.y,Et,Lt),Ip(J,E.x,E.y,it.x,en+it.y,dt.x,dt.y+dt.h,h,Yt,yt.x,Rt.y,Et,Lt),Ip(J,E.x,E.y,It.x,en+It.y,dt.x+dt.w,dt.y+dt.h,h,Yt,Rt.x,Rt.y,Et,Lt),hy(i.dynamicLayoutVertexArray,E,Ne),Y.emplaceBack(sn,sn+2,sn+1),Y.emplaceBack(sn+1,sn+2,sn+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),K!==l.length-1&&on===l[K+1].sectionIndex||i.programConfigurations.populatePaintArrays(J.length,x,x.index,{},H,Pe&&Pe[on])}i.placedSymbolArray.emplaceBack(E.x,E.y,me,this.glyphOffsetArray.length-me,xe,D,z,E.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],T,0,!1,0,j)}_addCollisionDebugVertex(i,l,h,g,_,x){return l.emplaceBack(0,0),i.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(i,l,h,g,_,x,T){const E=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),D=E.vertexLength,z=_.layoutVertexArray,j=_.collisionVertexArray,H=T.anchorX,Y=T.anchorY;this._addCollisionDebugVertex(z,j,x,H,Y,new R(i,l)),this._addCollisionDebugVertex(z,j,x,H,Y,new R(h,l)),this._addCollisionDebugVertex(z,j,x,H,Y,new R(h,g)),this._addCollisionDebugVertex(z,j,x,H,Y,new R(i,g)),E.vertexLength+=4;const J=_.indexArray;J.emplaceBack(D,D+1),J.emplaceBack(D+1,D+2),J.emplaceBack(D+2,D+3),J.emplaceBack(D+3,D),E.primitiveLength+=4}addDebugCollisionBoxes(i,l,h,g){for(let _=i;_<l;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new my(ni,Nx.members,ii),this.iconCollisionBox=new my(ni,Nx.members,ii);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,h,g,_,x,T,E,D){const z={};for(let j=l;j<h;j++){const H=i.get(j);z.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},z.textFeatureIndex=H.featureIndex;break}for(let j=g;j<_;j++){const H=i.get(j);z.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},z.verticalTextFeatureIndex=H.featureIndex;break}for(let j=x;j<T;j++){const H=i.get(j);z.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},z.iconFeatureIndex=H.featureIndex;break}for(let j=E;j<D;j++){const H=i.get(j);z.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},z.verticalIconFeatureIndex=H.featureIndex;break}return z}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const h=i.placedSymbolArray.get(l),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)i.indexArray.emplaceBack(_,_+2,_+1),i.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),h=Math.cos(i),g=[],_=[],x=[];for(let T=0;T<this.symbolInstances.length;++T){x.push(T);const E=this.symbolInstances.get(T);g.push(0|Math.round(l*E.anchorX+h*E.anchorY)),_.push(E.featureIndex)}return x.sort((T,E)=>g[T]-g[E]||_[E]-_[T]),x}addToSortKeyRanges(i,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let nw,iw;Wt("SymbolBucket",Jc,{omit:["layers","collisionBoxArray","features","compareText"]}),Jc.MAX_GLYPHS=65535,Jc.addDynamicAttributes=hy;var py={get paint(){return iw=iw||new jr({"icon-opacity":new un(Oe.paint_symbol["icon-opacity"]),"icon-color":new un(Oe.paint_symbol["icon-color"]),"icon-halo-color":new un(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new un(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new un(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new un(Oe.paint_symbol["text-opacity"]),"text-color":new un(Oe.paint_symbol["text-color"],{runtimeType:oa,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new un(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new un(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new un(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Xt(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return nw=nw||new jr({"symbol-placement":new Xt(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new un(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xt(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Xt(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Xt(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new un(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Xt(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xt(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new un(Oe.layout_symbol["icon-image"]),"icon-rotate":new un(Oe.layout_symbol["icon-rotate"]),"icon-padding":new un(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new un(Oe.layout_symbol["icon-offset"]),"icon-anchor":new un(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new un(Oe.layout_symbol["text-field"]),"text-font":new un(Oe.layout_symbol["text-font"]),"text-size":new un(Oe.layout_symbol["text-size"]),"text-max-width":new un(Oe.layout_symbol["text-max-width"]),"text-line-height":new Xt(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new un(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new un(Oe.layout_symbol["text-justify"]),"text-radial-offset":new un(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new un(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new un(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Xt(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new un(Oe.layout_symbol["text-rotate"]),"text-padding":new Xt(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Xt(Oe.layout_symbol["text-keep-upright"]),"text-transform":new un(Oe.layout_symbol["text-transform"]),"text-offset":new un(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Xt(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Xt(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(Oe.layout_symbol["text-optional"])})}};class rw{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ys,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Wt("FormatSectionOverride",rw,{omit:["defaultValue"]});class Ap extends gr{constructor(i){super(i,py)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,h,g){const _=this.layout.get(i).evaluate(l,{},h,g),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Ac(x.value)||!_?_:function(T,E){return E.replace(/{([^{}]+)}/g,(D,z)=>T&&z in T?String(T[z]):"")}(l.properties,_)}createBucket(i){return new Jc(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of py.paint.overridableProperties){if(!Ap.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),h=new rw(l),g=new Ic(h,l.property.specification);let _=null;_=l.value.kind==="constant"||l.value.kind==="source"?new Ql("source",g):new Mc("composite",g,l.value.zoomStops),this.paint._values[i]=new Za(l.property,_,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Ap.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const h=i.get("text-field"),g=py.paint.properties[l];let _=!1;const x=T=>{for(const E of T)if(g.overrides&&g.overrides.hasOverride(E))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Ir)x(h.value.value.sections);else if(h.value.kind==="source"){const T=D=>{_||(D instanceof Or&&hn(D.value)===Xs?x(D.value.sections):D instanceof Hl?x(D.sections):D.eachChild(T))},E=h.value;E._styleExpression&&T(E._styleExpression.expression)}return _}}let aw;var rE={get paint(){return aw=aw||new jr({"background-color":new Xt(Oe.paint_background["background-color"]),"background-pattern":new Uh(Oe.paint_background["background-pattern"]),"background-opacity":new Xt(Oe.paint_background["background-opacity"])})}};class aE extends gr{constructor(i){super(i,rE)}}let sw;var sE={get paint(){return sw=sw||new jr({"raster-opacity":new Xt(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xt(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Xt(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Xt(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(Oe.paint_raster["raster-fade-duration"])})}};class oE extends gr{constructor(i){super(i,sE)}}class lE extends gr{constructor(i){super(i,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class uE{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const cE={once:!0},gy=63710088e-1;class ul{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ul(Ye(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,h=this.lat*l,g=i.lat*l,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((i.lng-this.lng)*l);return gy*Math.acos(Math.min(_,1))}static convert(i){if(i instanceof ul)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new ul(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new ul(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ow=2*Math.PI*gy;function lw(u){return ow*Math.cos(u*Math.PI/180)}function uw(u){return(180+u)/360}function cw(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function dw(u,i){return u/lw(i)}function vy(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function hw(u,i){return u*lw(vy(i))}class df{constructor(i,l,h=0){this.x=+i,this.y=+l,this.z=+h}static fromLngLat(i,l=0){const h=ul.convert(i);return new df(uw(h.lng),cw(h.lat),dw(l,h.lat))}toLngLat(){return new ul(360*this.x-180,vy(this.y))}toAltitude(){return hw(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ow*(i=vy(this.y),1/Math.cos(i*Math.PI/180));var i}}function fw(u,i,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[u*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class yy{constructor(i,l,h){if(!function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(i,l,h))throw new Error(`x=${l}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=h,this.key=Qc(0,i,i,l,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,h){const g=(x=this.y,T=this.z,E=fw(256*(_=this.x),256*(x=Math.pow(2,T)-x-1),T),D=fw(256*(_+1),256*(x+1),T),E[0]+","+E[1]+","+D[0]+","+D[1]);var _,x,T,E,D;const z=function(j,H,Y){let J,ne="";for(let me=j;me>0;me--)J=1<<me-1,ne+=(H&J?1:0)+(Y&J?2:0);return ne}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new R((i.x*l-this.x)*Me,(i.y*l-this.y)*Me)}toString(){return`${this.z}/${this.x}/${this.y}`}}class mw{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Qc(i,l.z,l.z,l.x,l.y)}}class Da{constructor(i,l,h,g,_){if(this.terrainRttPosMatrix32f=null,i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=l,this.canonical=new yy(h,+g,+_),this.key=Qc(l,i,h,g,_)}clone(){return new Da(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new Da(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Da(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-i;return i>this.canonical.z?Qc(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):Qc(this.wrap*+l,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Da(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Da(l,this.wrap,l,h,g),new Da(l,this.wrap,l,h+1,g),new Da(l,this.wrap,l,h,g+1),new Da(l,this.wrap,l,h+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Da(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Da(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new df(i.x-this.wrap,i.y))}}function Qc(u,i,l,h,g){(u*=2)<0&&(u=-1*u-1);const _=1<<l;return(_*_*u+_*g+h).toString(36)+l.toString(36)+i.toString(36)}Wt("CanonicalTileID",yy),Wt("OverscaledTileID",Da,{omit:["terrainRttPosMatrix32f"]});class bu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const l=new bu;return l.extend(i(new R(this.minX,this.minY))),l.extend(i(new R(this.maxX,this.minY))),l.extend(i(new R(this.minX,this.maxY))),l.extend(i(new R(this.maxX,this.maxY))),l}static fromPoints(i){const l=new bu;for(const h of i)l.extend(h);return l}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class pw{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const h=i[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class gw{constructor(i,l,h,g,_){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=h,i._y=g,this.properties=i.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class vw{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new il(Me,16,0),this.grid3D=new il(Me,16,0),this.featureIndexArray=new at,this.promoteId=l}insert(i,l,h,g,_,x){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const E=x?this.grid3D:this.grid;for(let D=0;D<l.length;D++){const z=l[D],j=[1/0,1/0,-1/0,-1/0];for(let H=0;H<z.length;H++){const Y=z[H];j[0]=Math.min(j[0],Y.x),j[1]=Math.min(j[1],Y.y),j[2]=Math.max(j[2],Y.x),j[3]=Math.max(j[3],Y.y)}j[0]<Me&&j[1]<Me&&j[2]>=0&&j[3]>=0&&E.insert(T,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new sf.VectorTile(new oy(this.rawTileData)).layers,this.sourceLayerCoder=new pw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,l,h,g){this.loadVTLayers();const _=i.params,x=Me/i.tileSize/i.scale,T=ks(_.filter),E=i.queryGeometry,D=i.queryPadding*x,z=bu.fromPoints(E),j=this.grid.query(z.minX-D,z.minY-D,z.maxX+D,z.maxY+D),H=bu.fromPoints(i.cameraQueryGeometry).expandBy(D),Y=this.grid3D.query(H.minX,H.minY,H.maxX,H.maxY,(me,xe,Ne,Pe)=>function(K,de,Ae,it,It){for(const yt of K)if(de<=yt.x&&Ae<=yt.y&&it>=yt.x&&It>=yt.y)return!0;const dt=[new R(de,Ae),new R(de,It),new R(it,It),new R(it,Ae)];if(K.length>2){for(const yt of dt)if(Wc(K,yt))return!0}for(let yt=0;yt<K.length-1;yt++)if(X2(K[yt],K[yt+1],dt))return!0;return!1}(i.cameraQueryGeometry,me-D,xe-D,Ne+D,Pe+D));for(const me of Y)j.push(me);j.sort(dE);const J={};let ne;for(let me=0;me<j.length;me++){const xe=j[me];if(xe===ne)continue;ne=xe;const Ne=this.featureIndexArray.get(xe);let Pe=null;this.loadMatchingFeature(J,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,T,_.layers,_.availableImages,l,h,g,(K,de,Ae)=>(Pe||(Pe=gu(K)),de.queryIntersectsFeature({queryGeometry:E,feature:K,featureState:Ae,geometry:Pe,zoom:this.z,transform:i.transform,pixelsToTileUnits:x,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return J}loadMatchingFeature(i,l,h,g,_,x,T,E,D,z,j){const H=this.bucketLayerIDs[l];if(x&&!H.some(me=>x.has(me)))return;const Y=this.sourceLayerCoder.decode(h),J=this.vtLayers[Y].feature(g);if(_.needGeometry){const me=vu(J,!0);if(!_.filter(new pi(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!_.filter(new pi(this.tileID.overscaledZ),J))return;const ne=this.getId(J,Y);for(let me=0;me<H.length;me++){const xe=H[me];if(x&&!x.has(xe))continue;const Ne=E[xe];if(!Ne)continue;let Pe={};ne&&z&&(Pe=z.getState(Ne.sourceLayer||"_geojsonTileLayer",ne));const K=St({},D[xe]);K.paint=yw(K.paint,Ne.paint,J,Pe,T),K.layout=yw(K.layout,Ne.layout,J,Pe,T);const de=!j||j(J,Ne,Pe);if(!de)continue;const Ae=new gw(J,this.z,this.x,this.y,ne);Ae.layer=K;let it=i[xe];it===void 0&&(it=i[xe]=[]),it.push({featureIndex:g,feature:Ae,intersectionZ:de})}}lookupSymbolFeatures(i,l,h,g,_,x,T,E){const D={};this.loadVTLayers();const z=ks(_);for(const j of i)this.loadMatchingFeature(D,h,g,j,z,x,T,E,l);return D}hasLayer(i){for(const l of this.bucketLayerIDs)for(const h of l)if(i===h)return!0;return!1}getId(i,l){var h;let g=i.id;return this.promoteId&&(g=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((h=i.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(g=Number(i.properties.cluster_id))),g}}function yw(u,i,l,h,g){return le(u,(_,x)=>{const T=i instanceof Uc?i.get(x):null;return T&&T.evaluate?T.evaluate(l,h,g):T})}function dE(u,i){return i-u}function _w(u,i,l,h,g){const _=[];for(let x=0;x<u.length;x++){const T=u[x];let E;for(let D=0;D<T.length-1;D++){let z=T[D],j=T[D+1];z.x<i&&j.x<i||(z.x<i?z=new R(i,z.y+(i-z.x)/(j.x-z.x)*(j.y-z.y))._round():j.x<i&&(j=new R(i,z.y+(i-z.x)/(j.x-z.x)*(j.y-z.y))._round()),z.y<l&&j.y<l||(z.y<l?z=new R(z.x+(l-z.y)/(j.y-z.y)*(j.x-z.x),l)._round():j.y<l&&(j=new R(z.x+(l-z.y)/(j.y-z.y)*(j.x-z.x),l)._round()),z.x>=h&&j.x>=h||(z.x>=h?z=new R(h,z.y+(h-z.x)/(j.x-z.x)*(j.y-z.y))._round():j.x>=h&&(j=new R(h,z.y+(h-z.x)/(j.x-z.x)*(j.y-z.y))._round()),z.y>=g&&j.y>=g||(z.y>=g?z=new R(z.x+(g-z.y)/(j.y-z.y)*(j.x-z.x),g)._round():j.y>=g&&(j=new R(z.x+(g-z.y)/(j.y-z.y)*(j.x-z.x),g)._round()),E&&z.equals(E[E.length-1])||(E=[z],_.push(E)),E.push(j)))))}}return _}Wt("FeatureIndex",vw,{omit:["rawTileData","sourceLayerCoder"]});class cl extends R{constructor(i,l,h,g){super(i,l),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new cl(this.x,this.y,this.angle,this.segment)}}function bw(u,i,l,h,g){if(i.segment===void 0||l===0)return!0;let _=i,x=i.segment+1,T=0;for(;T>-l/2;){if(x--,x<0)return!1;T-=u[x].dist(_),_=u[x]}T+=u[x].dist(u[x+1]),x++;const E=[];let D=0;for(;T<l/2;){const z=u[x],j=u[x+1];if(!j)return!1;let H=u[x-1].angleTo(z)-z.angleTo(j);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:T,angleDelta:H}),D+=H;T-E[0].distance>h;)D-=E.shift().angleDelta;if(D>g)return!1;x++,T+=z.dist(j)}return!0}function xw(u){let i=0;for(let l=0;l<u.length-1;l++)i+=u[l].dist(u[l+1]);return i}function ww(u,i,l){return u?.6*i*l:0}function Sw(u,i){return Math.max(u?u.right-u.left:0,i?i.right-i.left:0)}function hE(u,i,l,h,g,_){const x=ww(l,g,_),T=Sw(l,h)*_;let E=0;const D=xw(u)/2;for(let z=0;z<u.length-1;z++){const j=u[z],H=u[z+1],Y=j.dist(H);if(E+Y>D){const J=(D-E)/Y,ne=ua.number(j.x,H.x,J),me=ua.number(j.y,H.y,J),xe=new cl(ne,me,H.angleTo(j),z);return xe._round(),!x||bw(u,xe,T,x,i)?xe:void 0}E+=Y}}function fE(u,i,l,h,g,_,x,T,E){const D=ww(h,_,x),z=Sw(h,g),j=z*x,H=u[0].x===0||u[0].x===E||u[0].y===0||u[0].y===E;return i-j<i/4&&(i=j+i/4),Cw(u,H?i/2*T%i:(z/2+2*_)*x*T%i,i,D,l,j,H,!1,E)}function Cw(u,i,l,h,g,_,x,T,E){const D=_/2,z=xw(u);let j=0,H=i-l,Y=[];for(let J=0;J<u.length-1;J++){const ne=u[J],me=u[J+1],xe=ne.dist(me),Ne=me.angleTo(ne);for(;H+l<j+xe;){H+=l;const Pe=(H-j)/xe,K=ua.number(ne.x,me.x,Pe),de=ua.number(ne.y,me.y,Pe);if(K>=0&&K<E&&de>=0&&de<E&&H-D>=0&&H+D<=z){const Ae=new cl(K,de,Ne,J);Ae._round(),h&&!bw(u,Ae,_,h,g)||Y.push(Ae)}}j+=xe}return T||Y.length||x||(Y=Cw(u,j/2,l,h,g,_,x,!0,E)),Y}function Tw(u,i,l,h){const g=[],_=u.image,x=_.pixelRatio,T=_.paddedRect.w-2,E=_.paddedRect.h-2;let D={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const z=_.stretchX||[[0,T]],j=_.stretchY||[[0,E]],H=(wt,Yt)=>wt+Yt[1]-Yt[0],Y=z.reduce(H,0),J=j.reduce(H,0),ne=T-Y,me=E-J;let xe=0,Ne=Y,Pe=0,K=J,de=0,Ae=ne,it=0,It=me;if(_.content&&h){const wt=_.content,Yt=wt[2]-wt[0],on=wt[3]-wt[1];(_.textFitWidth||_.textFitHeight)&&(D=Qx(u)),xe=Ep(z,0,wt[0]),Pe=Ep(j,0,wt[1]),Ne=Ep(z,wt[0],wt[2]),K=Ep(j,wt[1],wt[3]),de=wt[0]-xe,it=wt[1]-Pe,Ae=Yt-Ne,It=on-K}const dt=D.x1,yt=D.y1,Rt=D.x2-dt,Et=D.y2-yt,Lt=(wt,Yt,on,sn)=>{const en=Mp(wt.stretch-xe,Ne,Rt,dt),Fn=Dp(wt.fixed-de,Ae,wt.stretch,Y),Mi=Mp(Yt.stretch-Pe,K,Et,yt),Ji=Dp(Yt.fixed-it,It,Yt.stretch,J),Mr=Mp(on.stretch-xe,Ne,Rt,dt),Ra=Dp(on.fixed-de,Ae,on.stretch,Y),da=Mp(sn.stretch-Pe,K,Et,yt),br=Dp(sn.fixed-it,It,sn.stretch,J),Ti=new R(en,Mi),ur=new R(Mr,Mi),xr=new R(Mr,da),wr=new R(en,da),Jr=new R(Fn/x,Ji/x),La=new R(Ra/x,br/x),cr=i*Math.PI/180;if(cr){const dr=Math.sin(cr),hr=Math.cos(cr),Hi=[hr,-dr,dr,hr];Ti._matMult(Hi),ur._matMult(Hi),wr._matMult(Hi),xr._matMult(Hi)}const ha=wt.stretch+wt.fixed,Qi=Yt.stretch+Yt.fixed;return{tl:Ti,tr:ur,bl:wr,br:xr,tex:{x:_.paddedRect.x+1+ha,y:_.paddedRect.y+1+Qi,w:on.stretch+on.fixed-ha,h:sn.stretch+sn.fixed-Qi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jr,pixelOffsetBR:La,minFontScaleX:Ae/x/Rt,minFontScaleY:It/x/Et,isSDF:l}};if(h&&(_.stretchX||_.stretchY)){const wt=kw(z,ne,Y),Yt=kw(j,me,J);for(let on=0;on<wt.length-1;on++){const sn=wt[on],en=wt[on+1];for(let Fn=0;Fn<Yt.length-1;Fn++)g.push(Lt(sn,Yt[Fn],en,Yt[Fn+1]))}}else g.push(Lt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:E+1}));return g}function Ep(u,i,l){let h=0;for(const g of u)h+=Math.max(i,Math.min(l,g[1]))-Math.max(i,Math.min(l,g[0]));return h}function kw(u,i,l){const h=[{fixed:-1,stretch:0}];for(const[g,_]of u){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:i+1,stretch:l}),h}function Mp(u,i,l,h){return u/i*l+h}function Dp(u,i,l,h){return u-i*l/h}Wt("Anchor",cl);class Rp{constructor(i,l,h,g,_,x,T,E,D,z){var j;if(this.boxStartIndex=i.length,D){let H=x.top,Y=x.bottom;const J=x.collisionPadding;J&&(H-=J[1],Y+=J[3]);let ne=Y-H;ne>0&&(ne=Math.max(10,ne),this.circleDiameter=ne)}else{const H=!((j=x.image)===null||j===void 0)&&j.content&&(x.image.textFitWidth||x.image.textFitHeight)?Qx(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};H.y1=H.y1*T-E[0],H.y2=H.y2*T+E[2],H.x1=H.x1*T-E[3],H.x2=H.x2*T+E[1];const Y=x.collisionPadding;if(Y&&(H.x1-=Y[0]*T,H.y1-=Y[1]*T,H.x2+=Y[2]*T,H.y2+=Y[3]*T),z){const J=new R(H.x1,H.y1),ne=new R(H.x2,H.y1),me=new R(H.x1,H.y2),xe=new R(H.x2,H.y2),Ne=z*Math.PI/180;J._rotate(Ne),ne._rotate(Ne),me._rotate(Ne),xe._rotate(Ne),H.x1=Math.min(J.x,ne.x,me.x,xe.x),H.x2=Math.max(J.x,ne.x,me.x,xe.x),H.y1=Math.min(J.y,ne.y,me.y,xe.y),H.y2=Math.max(J.y,ne.y,me.y,xe.y)}i.emplaceBack(l.x,l.y,H.x1,H.y1,H.x2,H.y2,h,g,_)}this.boxEndIndex=i.length}}class mE{constructor(i=[],l=(h,g)=>h<g?-1:h>g?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:h}=this,g=l[i];for(;i>0;){const _=i-1>>1,x=l[_];if(h(g,x)>=0)break;l[i]=x,i=_}l[i]=g}_down(i){const{data:l,compare:h}=this,g=this.length>>1,_=l[i];for(;i<g;){let x=1+(i<<1);const T=x+1;if(T<this.length&&h(l[T],l[x])<0&&(x=T),h(l[x],_)>=0)break;l[i]=l[x],i=x}l[i]=_}}function pE(u,i=1,l=!1){const h=bu.fromPoints(u[0]),g=Math.min(h.width(),h.height());let _=g/2;const x=new mE([],gE),{minX:T,minY:E,maxX:D,maxY:z}=h;if(g===0)return new R(T,E);for(let Y=T;Y<D;Y+=g)for(let J=E;J<z;J+=g)x.push(new ed(Y+_,J+_,_,u));let j=function(Y){let J=0,ne=0,me=0;const xe=Y[0];for(let Ne=0,Pe=xe.length,K=Pe-1;Ne<Pe;K=Ne++){const de=xe[Ne],Ae=xe[K],it=de.x*Ae.y-Ae.x*de.y;ne+=(de.x+Ae.x)*it,me+=(de.y+Ae.y)*it,J+=3*it}return new ed(ne/J,me/J,0,Y)}(u),H=x.length;for(;x.length;){const Y=x.pop();(Y.d>j.d||!j.d)&&(j=Y,l&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,H)),Y.max-j.d<=i||(_=Y.h/2,x.push(new ed(Y.p.x-_,Y.p.y-_,_,u)),x.push(new ed(Y.p.x+_,Y.p.y-_,_,u)),x.push(new ed(Y.p.x-_,Y.p.y+_,_,u)),x.push(new ed(Y.p.x+_,Y.p.y+_,_,u)),H+=4)}return l&&(console.log(`num probes: ${H}`),console.log(`best distance: ${j.d}`)),j.p}function gE(u,i){return i.max-u.max}function ed(u,i,l,h){this.p=new R(u,i),this.h=l,this.d=function(g,_){let x=!1,T=1/0;for(let E=0;E<_.length;E++){const D=_[E];for(let z=0,j=D.length,H=j-1;z<j;H=z++){const Y=D[z],J=D[H];Y.y>g.y!=J.y>g.y&&g.x<(J.x-Y.x)*(g.y-Y.y)/(J.y-Y.y)+Y.x&&(x=!x),T=Math.min(T,ax(g,Y,J))}}return(x?1:-1)*Math.sqrt(T)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Er;d.aD=void 0,(Er=d.aD||(d.aD={}))[Er.center=1]="center",Er[Er.left=2]="left",Er[Er.right=3]="right",Er[Er.top=4]="top",Er[Er.bottom=5]="bottom",Er[Er["top-left"]=6]="top-left",Er[Er["top-right"]=7]="top-right",Er[Er["bottom-left"]=8]="bottom-left",Er[Er["bottom-right"]=9]="bottom-right";const _y=Number.POSITIVE_INFINITY;function Pw(u,i){return i[1]!==_y?function(l,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),l){case"top-right":case"top-left":case"top":x=g-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-g}switch(l){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(u,i[0],i[1]):function(l,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(l){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-h;break;case"top":_=h-7}switch(l){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(u,i[0])}function Iw(u,i,l){var h;const g=u.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},l);if(_){const T=_.values,E=[];for(let D=0;D<T.length;D+=2){const z=E[D]=T[D],j=T[D+1].map(H=>H*lr);z.startsWith("top")?j[1]-=7:z.startsWith("bottom")&&(j[1]+=7),E[D+1]=j}return new jn(E)}const x=g.get("text-variable-anchor");if(x){let T;T=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(i,{},l)*lr,_y]:g.get("text-offset").evaluate(i,{},l).map(D=>D*lr);const E=[];for(const D of x)E.push(D,Pw(D,T));return new jn(E)}return null}function by(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function vE(u,i,l,h,g,_,x,T,E,D,z,j){let H=_.textMaxSize.evaluate(i,{});H===void 0&&(H=x);const Y=u.layers[0].layout,J=Y.get("icon-offset").evaluate(i,{},z),ne=Ew(l.horizontal),me=x/24,xe=u.tilePixelRatio*me,Ne=u.tilePixelRatio*H/24,Pe=u.tilePixelRatio*T,K=u.tilePixelRatio*Y.get("symbol-spacing"),de=Y.get("text-padding")*u.tilePixelRatio,Ae=function(on,sn,en,Fn=1){const Mi=on.get("icon-padding").evaluate(sn,{},en),Ji=Mi&&Mi.values;return[Ji[0]*Fn,Ji[1]*Fn,Ji[2]*Fn,Ji[3]*Fn]}(Y,i,z,u.tilePixelRatio),it=Y.get("text-max-angle")/180*Math.PI,It=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",dt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",yt=Y.get("symbol-placement"),Rt=K/2,Et=Y.get("icon-text-fit");let Lt;h&&Et!=="none"&&(u.allowVerticalPlacement&&l.vertical&&(Lt=ew(h,l.vertical,Et,Y.get("icon-text-fit-padding"),J,me)),ne&&(h=ew(h,ne,Et,Y.get("icon-text-fit-padding"),J,me)));const wt=z?j.line.getGranularityForZoomLevel(z.z):1,Yt=(on,sn)=>{sn.x<0||sn.x>=Me||sn.y<0||sn.y>=Me||function(en,Fn,Mi,Ji,Mr,Ra,da,br,Ti,ur,xr,wr,Jr,La,cr,ha,Qi,dr,hr,Hi,mi,us,td,cs,bE){const nd=en.addToLineVertexArray(Fn,Mi);let xu,id,rd,ad,Lw=0,zw=0,Bw=0,Vw=0,Iy=-1,Ay=-1;const ho={};let Ow=Xr("");if(en.allowVerticalPlacement&&Ji.vertical){const Ur=br.layout.get("text-rotate").evaluate(mi,{},cs)+90;rd=new Rp(Ti,Fn,ur,xr,wr,Ji.vertical,Jr,La,cr,Ur),da&&(ad=new Rp(Ti,Fn,ur,xr,wr,da,Qi,dr,cr,Ur))}if(Mr){const Ur=br.layout.get("icon-rotate").evaluate(mi,{}),za=br.layout.get("icon-text-fit")!=="none",wu=Tw(Mr,Ur,td,za),hs=da?Tw(da,Ur,td,za):void 0;id=new Rp(Ti,Fn,ur,xr,wr,Mr,Qi,dr,!1,Ur),Lw=4*wu.length;const Su=en.iconSizeData;let Bs=null;Su.kind==="source"?(Bs=[co*br.layout.get("icon-size").evaluate(mi,{})],Bs[0]>ll&&Je(`${en.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Su.kind==="composite"&&(Bs=[co*us.compositeIconSizes[0].evaluate(mi,{},cs),co*us.compositeIconSizes[1].evaluate(mi,{},cs)],(Bs[0]>ll||Bs[1]>ll)&&Je(`${en.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),en.addSymbols(en.icon,wu,Bs,Hi,hr,mi,d.an.none,Fn,nd.lineStartIndex,nd.lineLength,-1,cs),Iy=en.icon.placedSymbolArray.length-1,hs&&(zw=4*hs.length,en.addSymbols(en.icon,hs,Bs,Hi,hr,mi,d.an.vertical,Fn,nd.lineStartIndex,nd.lineLength,-1,cs),Ay=en.icon.placedSymbolArray.length-1)}const Fw=Object.keys(Ji.horizontal);for(const Ur of Fw){const za=Ji.horizontal[Ur];if(!xu){Ow=Xr(za.text);const hs=br.layout.get("text-rotate").evaluate(mi,{},cs);xu=new Rp(Ti,Fn,ur,xr,wr,za,Jr,La,cr,hs)}const wu=za.positionedLines.length===1;if(Bw+=Aw(en,Fn,za,Ra,br,cr,mi,ha,nd,Ji.vertical?d.an.horizontal:d.an.horizontalOnly,wu?Fw:[Ur],ho,Iy,us,cs),wu)break}Ji.vertical&&(Vw+=Aw(en,Fn,Ji.vertical,Ra,br,cr,mi,ha,nd,d.an.vertical,["vertical"],ho,Ay,us,cs));const xE=xu?xu.boxStartIndex:en.collisionBoxArray.length,wE=xu?xu.boxEndIndex:en.collisionBoxArray.length,SE=rd?rd.boxStartIndex:en.collisionBoxArray.length,CE=rd?rd.boxEndIndex:en.collisionBoxArray.length,TE=id?id.boxStartIndex:en.collisionBoxArray.length,kE=id?id.boxEndIndex:en.collisionBoxArray.length,PE=ad?ad.boxStartIndex:en.collisionBoxArray.length,IE=ad?ad.boxEndIndex:en.collisionBoxArray.length;let ds=-1;const zp=(Ur,za)=>Ur&&Ur.circleDiameter?Math.max(Ur.circleDiameter,za):za;ds=zp(xu,ds),ds=zp(rd,ds),ds=zp(id,ds),ds=zp(ad,ds);const $w=ds>-1?1:0;$w&&(ds*=bE/lr),en.glyphOffsetArray.length>=Jc.MAX_GLYPHS&&Je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mi.sortKey!==void 0&&en.addToSortKeyRanges(en.symbolInstances.length,mi.sortKey);const AE=Iw(br,mi,cs),[EE,ME]=function(Ur,za){const wu=Ur.length,hs=za==null?void 0:za.values;if((hs==null?void 0:hs.length)>0)for(let Su=0;Su<hs.length;Su+=2){const Bs=hs[Su+1];Ur.emplaceBack(d.aD[hs[Su]],Bs[0],Bs[1])}return[wu,Ur.length]}(en.textAnchorOffsets,AE);en.symbolInstances.emplaceBack(Fn.x,Fn.y,ho.right>=0?ho.right:-1,ho.center>=0?ho.center:-1,ho.left>=0?ho.left:-1,ho.vertical||-1,Iy,Ay,Ow,xE,wE,SE,CE,TE,kE,PE,IE,ur,Bw,Vw,Lw,zw,$w,0,Jr,ds,EE,ME)}(u,sn,on,l,h,g,Lt,u.layers[0],u.collisionBoxArray,i.index,i.sourceLayerIndex,u.index,xe,[de,de,de,de],It,E,Pe,Ae,dt,J,i,_,D,z,x)};if(yt==="line")for(const on of _w(i.geometry,0,0,Me,Me)){const sn=_u(on,wt),en=fE(sn,K,it,l.vertical||ne,h,24,Ne,u.overscaling,Me);for(const Fn of en)ne&&yE(u,ne.text,Rt,Fn)||Yt(sn,Fn)}else if(yt==="line-center"){for(const on of i.geometry)if(on.length>1){const sn=_u(on,wt),en=hE(sn,it,l.vertical||ne,h,24,Ne);en&&Yt(sn,en)}}else if(i.type==="Polygon")for(const on of xc(i.geometry,0)){const sn=pE(on,16);Yt(_u(on[0],wt,!0),new cl(sn.x,sn.y,0))}else if(i.type==="LineString")for(const on of i.geometry){const sn=_u(on,wt);Yt(sn,new cl(sn[0].x,sn[0].y,0))}else if(i.type==="Point")for(const on of i.geometry)for(const sn of on)Yt([sn],new cl(sn.x,sn.y,0))}function Aw(u,i,l,h,g,_,x,T,E,D,z,j,H,Y,J){const ne=function(Ne,Pe,K,de,Ae,it,It,dt){const yt=de.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,Rt=[];for(const Et of Pe.positionedLines)for(const Lt of Et.positionedGlyphs){if(!Lt.rect)continue;const wt=Lt.rect||{};let Yt=4,on=!0,sn=1,en=0;const Fn=(Ae||dt)&&Lt.vertical,Mi=Lt.metrics.advance*Lt.scale/2;if(dt&&Pe.verticalizable&&(en=Et.lineOffset/2-(Lt.imageName?-(lr-Lt.metrics.width*Lt.scale)/2:(Lt.scale-1)*lr)),Lt.imageName){const dr=It[Lt.imageName];on=dr.sdf,sn=dr.pixelRatio,Yt=1/sn}const Ji=Ae?[Lt.x+Mi,Lt.y]:[0,0];let Mr=Ae?[0,0]:[Lt.x+Mi+K[0],Lt.y+K[1]-en],Ra=[0,0];Fn&&(Ra=Mr,Mr=[0,0]);const da=Lt.metrics.isDoubleResolution?2:1,br=(Lt.metrics.left-Yt)*Lt.scale-Mi+Mr[0],Ti=(-Lt.metrics.top-Yt)*Lt.scale+Mr[1],ur=br+wt.w/da*Lt.scale/sn,xr=Ti+wt.h/da*Lt.scale/sn,wr=new R(br,Ti),Jr=new R(ur,Ti),La=new R(br,xr),cr=new R(ur,xr);if(Fn){const dr=new R(-Mi,Mi- -17),hr=-Math.PI/2,Hi=12-Mi,mi=new R(22-Hi,-(Lt.imageName?Hi:0)),us=new R(...Ra);wr._rotateAround(hr,dr)._add(mi)._add(us),Jr._rotateAround(hr,dr)._add(mi)._add(us),La._rotateAround(hr,dr)._add(mi)._add(us),cr._rotateAround(hr,dr)._add(mi)._add(us)}if(yt){const dr=Math.sin(yt),hr=Math.cos(yt),Hi=[hr,-dr,dr,hr];wr._matMult(Hi),Jr._matMult(Hi),La._matMult(Hi),cr._matMult(Hi)}const ha=new R(0,0),Qi=new R(0,0);Rt.push({tl:wr,tr:Jr,bl:La,br:cr,tex:wt,writingMode:Pe.writingMode,glyphOffset:Ji,sectionIndex:Lt.sectionIndex,isSDF:on,pixelOffsetTL:ha,pixelOffsetBR:Qi,minFontScaleX:0,minFontScaleY:0})}return Rt}(0,l,T,g,_,x,h,u.allowVerticalPlacement),me=u.textSizeData;let xe=null;me.kind==="source"?(xe=[co*g.layout.get("text-size").evaluate(x,{})],xe[0]>ll&&Je(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):me.kind==="composite"&&(xe=[co*Y.compositeTextSizes[0].evaluate(x,{},J),co*Y.compositeTextSizes[1].evaluate(x,{},J)],(xe[0]>ll||xe[1]>ll)&&Je(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,ne,xe,T,_,x,D,i,E.lineStartIndex,E.lineLength,H,J);for(const Ne of z)j[Ne]=u.text.placedSymbolArray.length-1;return 4*ne.length}function Ew(u){for(const i in u)return u[i];return null}function yE(u,i,l,h){const g=u.compareText;if(i in g){const _=g[i];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<l)return!0}else g[i]=[];return g[i].push(h),!1}const Mw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class xy{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=Mw[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[T]=new Uint32Array(i,4,1);return new xy(T,x,_,i)}constructor(i,l=64,h=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const _=Mw.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,T=i*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-T%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+E,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+T+E),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+E,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=l,h}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return wy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:T}=this,E=[0,_.length-1,0],D=[];for(;E.length;){const z=E.pop()||0,j=E.pop()||0,H=E.pop()||0;if(j-H<=T){for(let me=H;me<=j;me++){const xe=x[2*me],Ne=x[2*me+1];xe>=i&&xe<=h&&Ne>=l&&Ne<=g&&D.push(_[me])}continue}const Y=H+j>>1,J=x[2*Y],ne=x[2*Y+1];J>=i&&J<=h&&ne>=l&&ne<=g&&D.push(_[Y]),(z===0?i<=J:l<=ne)&&(E.push(H),E.push(Y-1),E.push(1-z)),(z===0?h>=J:g>=ne)&&(E.push(Y+1),E.push(j),E.push(1-z))}return D}within(i,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,T=[0,g.length-1,0],E=[],D=h*h;for(;T.length;){const z=T.pop()||0,j=T.pop()||0,H=T.pop()||0;if(j-H<=x){for(let me=H;me<=j;me++)Rw(_[2*me],_[2*me+1],i,l)<=D&&E.push(g[me]);continue}const Y=H+j>>1,J=_[2*Y],ne=_[2*Y+1];Rw(J,ne,i,l)<=D&&E.push(g[Y]),(z===0?i-h<=J:l-h<=ne)&&(T.push(H),T.push(Y-1),T.push(1-z)),(z===0?i+h>=J:l+h>=ne)&&(T.push(Y+1),T.push(j),T.push(1-z))}return E}}function wy(u,i,l,h,g,_){if(g-h<=l)return;const x=h+g>>1;Dw(u,i,x,h,g,_),wy(u,i,l,h,x-1,1-_),wy(u,i,l,x+1,g,1-_)}function Dw(u,i,l,h,g,_){for(;g>h;){if(g-h>600){const D=g-h+1,z=l-h+1,j=Math.log(D),H=.5*Math.exp(2*j/3),Y=.5*Math.sqrt(j*H*(D-H)/D)*(z-D/2<0?-1:1);Dw(u,i,l,Math.max(h,Math.floor(l-z*H/D+Y)),Math.min(g,Math.floor(l+(D-z)*H/D+Y)),_)}const x=i[2*l+_];let T=h,E=g;for(hf(u,i,h,l),i[2*g+_]>x&&hf(u,i,h,g);T<E;){for(hf(u,i,T,E),T++,E--;i[2*T+_]<x;)T++;for(;i[2*E+_]>x;)E--}i[2*h+_]===x?hf(u,i,h,E):(E++,hf(u,i,E,g)),E<=l&&(h=E+1),l<=E&&(g=E-1)}}function hf(u,i,l,h){Sy(u,l,h),Sy(i,2*l,2*h),Sy(i,2*l+1,2*h+1)}function Sy(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}function Rw(u,i,l,h){const g=u-l,_=i-h;return g*g+_*_}var Cy;d.cw=void 0,(Cy=d.cw||(d.cw={})).create="create",Cy.load="load",Cy.fullLoad="fullLoad";let Lp=null,ff=[];const Ty=1e3/60,ky="loadTime",Py="fullLoadTime",_E={mark(u){performance.mark(u)},frame(u){const i=u;Lp!=null&&ff.push(i-Lp),Lp=i},clearMetrics(){Lp=null,ff=[],performance.clearMeasures(ky),performance.clearMeasures(Py);for(const u in d.cw)performance.clearMarks(d.cw[u])},getPerformanceMetrics(){performance.measure(ky,d.cw.create,d.cw.load),performance.measure(Py,d.cw.create,d.cw.fullLoad);const u=performance.getEntriesByName(ky)[0].duration,i=performance.getEntriesByName(Py)[0].duration,l=ff.length,h=1/(ff.reduce((_,x)=>_+x,0)/l/1e3),g=ff.filter(_=>_>Ty).reduce((_,x)=>_+(x-Ty)/Ty,0);return{loadTime:u,fullLoadTime:i,fps:h,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};d.$=Me,d.A=ae,d.B=function([u,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:u*Math.cos(i)*Math.sin(l),y:u*Math.sin(i)*Math.sin(l),z:u*Math.cos(l)}},d.C=ua,d.D=Xt,d.E=Ct,d.F=pi,d.G=Fc,d.H=function(u){if(Dt==null){const i=u.navigator?u.navigator.userAgent:null;Dt=!!u.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Dt},d.I=ly,d.J=class{constructor(u,i){this.target=u,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new uE(()=>this.process()),this.subscription=gn(this.target,"message",l=>this.receive(l),!1),this.globalScope=ct(self)?u:window}registerMessageHandler(u,i){this.messageHandlers[u]=i}sendAsync(u,i){return new Promise((l,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=i?gn(i.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[g];const E={id:g,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},cE):null;this.resolveRejects[g]={resolve:E=>{_==null||_.unsubscribe(),l(E)},reject:E=>{_==null||_.unsubscribe(),h(E)}};const x=[],T=Object.assign(Object.assign({},u),{id:g,sourceMapId:this.mapId,origin:location.origin,data:ou(u.data,x)});this.target.postMessage(T,{transfer:x})})}receive(u){const i=u.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(ct(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),i=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(u,i)}processTask(u,i){return a(this,void 0,void 0,function*(){if(i.type==="<response>"){const g=this.resolveRejects[u];return delete this.resolveRejects[u],g?void(i.error?g.reject(rl(i.error)):g.resolve(rl(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=rl(i.data),h=new AbortController;this.abortControllers[u]=h;try{const g=yield this.messageHandlers[i.type](i.sourceMapId,l,h);this.completeTask(u,null,g)}catch(g){this.completeTask(u,g)}})}completeTask(u,i,l){const h=[];delete this.abortControllers[u];const g={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?ou(i):null,data:ou(l,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.K=he,d.L=function(){var u=new ae(16);return ae!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},d.M=function(u,i,l){var h,g,_,x,T,E,D,z,j,H,Y,J,ne=l[0],me=l[1],xe=l[2];return i===u?(u[12]=i[0]*ne+i[4]*me+i[8]*xe+i[12],u[13]=i[1]*ne+i[5]*me+i[9]*xe+i[13],u[14]=i[2]*ne+i[6]*me+i[10]*xe+i[14],u[15]=i[3]*ne+i[7]*me+i[11]*xe+i[15]):(g=i[1],_=i[2],x=i[3],T=i[4],E=i[5],D=i[6],z=i[7],j=i[8],H=i[9],Y=i[10],J=i[11],u[0]=h=i[0],u[1]=g,u[2]=_,u[3]=x,u[4]=T,u[5]=E,u[6]=D,u[7]=z,u[8]=j,u[9]=H,u[10]=Y,u[11]=J,u[12]=h*ne+T*me+j*xe+i[12],u[13]=g*ne+E*me+H*xe+i[13],u[14]=_*ne+D*me+Y*xe+i[14],u[15]=x*ne+z*me+J*xe+i[15]),u},d.N=function(u,i,l){var h=l[0],g=l[1],_=l[2];return u[0]=i[0]*h,u[1]=i[1]*h,u[2]=i[2]*h,u[3]=i[3]*h,u[4]=i[4]*g,u[5]=i[5]*g,u[6]=i[6]*g,u[7]=i[7]*g,u[8]=i[8]*_,u[9]=i[9]*_,u[10]=i[10]*_,u[11]=i[11]*_,u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},d.O=function(u,i,l){var h=i[0],g=i[1],_=i[2],x=i[3],T=i[4],E=i[5],D=i[6],z=i[7],j=i[8],H=i[9],Y=i[10],J=i[11],ne=i[12],me=i[13],xe=i[14],Ne=i[15],Pe=l[0],K=l[1],de=l[2],Ae=l[3];return u[0]=Pe*h+K*T+de*j+Ae*ne,u[1]=Pe*g+K*E+de*H+Ae*me,u[2]=Pe*_+K*D+de*Y+Ae*xe,u[3]=Pe*x+K*z+de*J+Ae*Ne,u[4]=(Pe=l[4])*h+(K=l[5])*T+(de=l[6])*j+(Ae=l[7])*ne,u[5]=Pe*g+K*E+de*H+Ae*me,u[6]=Pe*_+K*D+de*Y+Ae*xe,u[7]=Pe*x+K*z+de*J+Ae*Ne,u[8]=(Pe=l[8])*h+(K=l[9])*T+(de=l[10])*j+(Ae=l[11])*ne,u[9]=Pe*g+K*E+de*H+Ae*me,u[10]=Pe*_+K*D+de*Y+Ae*xe,u[11]=Pe*x+K*z+de*J+Ae*Ne,u[12]=(Pe=l[12])*h+(K=l[13])*T+(de=l[14])*j+(Ae=l[15])*ne,u[13]=Pe*g+K*E+de*H+Ae*me,u[14]=Pe*_+K*D+de*Y+Ae*xe,u[15]=Pe*x+K*z+de*J+Ae*Ne,u},d.P=R,d.Q=function(u,i){const l={};for(let h=0;h<i.length;h++){const g=i[h];g in u&&(l[g]=u[g])}return l},d.R=ca,d.S=ul,d.T=Wv,d.U=cw,d.V=uw,d.W=q,d.X=X,d.Y=Ut,d.Z=Da,d._=a,d.a=se,d.a$=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u[3]=i[3]*l,u},d.a0=df,d.a1=bu,d.a2=25,d.a3=yy,d.a4=u=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(l=>{i.onloadstart=()=>{l(i)};for(const h of u){const g=window.document.createElement("source");rt(h)||(i.crossOrigin="Anonymous"),g.src=h,i.appendChild(g)}})},d.a5=Vt,d.a6=function(){return ie++},d.a7=ve,d.a8=Jc,d.a9=ks,d.aA=lr,d.aB=Qe,d.aC=function(u,i,l,h,g=!1){if(!l[0]&&!l[1])return[0,0];const _=g?h==="map"?-u.bearingInRadians:0:h==="viewport"?u.bearingInRadians:0;if(_){const x=Math.sin(_),T=Math.cos(_);l=[l[0]*T-l[1]*x,l[0]*x+l[1]*T]}return[g?l[0]:Qe(i,l[0],u.zoom),g?l[1]:Qe(i,l[1],u.zoom)]},d.aE=dy,d.aF=by,d.aG=cy,d.aH=xy,d.aI=Ei,d.aJ=Sp,d.aK=et,d.aL=Nn,d.aM=ai,d.aN=Ye,d.aO=Rn,d.aP=hw,d.aQ=be,d.aR=re,d.aS=function(u){var i=new ae(3);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i},d.aT=function(u,i,l){return u[0]=i[0]-l[0],u[1]=i[1]-l[1],u[2]=i[2]-l[2],u},d.aU=function(u,i){var l=i[0],h=i[1],g=i[2],_=l*l+h*h+g*g;return _>0&&(_=1/Math.sqrt(_)),u[0]=i[0]*_,u[1]=i[1]*_,u[2]=i[2]*_,u},d.aV=je,d.aW=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]},d.aX=function(u,i,l){return u[0]=i[0]*l[0],u[1]=i[1]*l[1],u[2]=i[2]*l[2],u[3]=i[3]*l[3],u},d.aY=pe,d.aZ=function(u,i,l){const h=i[0]*l[0]+i[1]*l[1]+i[2]*l[2];return h===0?null:(-(u[0]*l[0]+u[1]*l[1]+u[2]*l[2])-l[3])/h},d.a_=Fe,d.aa=vu,d.ab=gw,d.ac=function(u){const i={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,g,_)=>{const x=g||_;return i[h]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},d.ad=En,d.ae=function(u){return Math.pow(2,u)},d.af=ce,d.ag=st,d.ah=85.051129,d.ai=dw,d.aj=function(u){return Math.log(u)/Math.LN2},d.ak=function(u){var i=u[0],l=u[1];return i*i+l*l},d.al=function(u,i){const l=[];for(const h in u)h in i||l.push(h);return l},d.am=function(u,i){let l=0,h=0;if(u.kind==="constant")h=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=u,T=g?st(Fr.interpolationFactor(g,i,_,x),0,1):0;u.kind==="camera"?h=ua.number(u.minSize,u.maxSize,T):l=T}return{uSizeT:l,uSize:h}},d.ao=function(u,{uSize:i,uSizeT:l},{lowerSize:h,upperSize:g}){return u.kind==="source"?h/co:u.kind==="composite"?ua.number(h/co,g/co,l):i},d.ap=function(u,i){var l=i[0],h=i[1],g=i[2],_=i[3],x=i[4],T=i[5],E=i[6],D=i[7],z=i[8],j=i[9],H=i[10],Y=i[11],J=i[12],ne=i[13],me=i[14],xe=i[15],Ne=l*T-h*x,Pe=l*E-g*x,K=l*D-_*x,de=h*E-g*T,Ae=h*D-_*T,it=g*D-_*E,It=z*ne-j*J,dt=z*me-H*J,yt=z*xe-Y*J,Rt=j*me-H*ne,Et=j*xe-Y*ne,Lt=H*xe-Y*me,wt=Ne*Lt-Pe*Et+K*Rt+de*yt-Ae*dt+it*It;return wt?(u[0]=(T*Lt-E*Et+D*Rt)*(wt=1/wt),u[1]=(g*Et-h*Lt-_*Rt)*wt,u[2]=(ne*it-me*Ae+xe*de)*wt,u[3]=(H*Ae-j*it-Y*de)*wt,u[4]=(E*yt-x*Lt-D*dt)*wt,u[5]=(l*Lt-g*yt+_*dt)*wt,u[6]=(me*K-J*it-xe*Pe)*wt,u[7]=(z*it-H*K+Y*Pe)*wt,u[8]=(x*Et-T*yt+D*It)*wt,u[9]=(h*yt-l*Et-_*It)*wt,u[10]=(J*Ae-ne*K+xe*Ne)*wt,u[11]=(j*K-z*Ae-Y*Ne)*wt,u[12]=(T*dt-x*Rt-E*It)*wt,u[13]=(l*Rt-h*dt+g*It)*wt,u[14]=(ne*Pe-J*de-me*Ne)*wt,u[15]=(z*de-j*Pe+H*Ne)*wt,u):null},d.aq=ze,d.ar=function(u){return Math.hypot(u[0],u[1])},d.as=function(u){return u[0]=0,u[1]=0,u},d.at=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u},d.au=hy,d.av=Ke,d.aw=function(u,i,l,h){const g=i.y-u.y,_=i.x-u.x,x=h.y-l.y,T=h.x-l.x,E=x*_-T*g;if(E===0)return null;const D=(T*(u.y-l.y)-x*(u.x-l.x))/E;return new R(u.x+D*_,u.y+D*g)},d.ax=_w,d.ay=ix,d.az=function(u){let i=1/0,l=1/0,h=-1/0,g=-1/0;for(const _ of u)i=Math.min(i,_.x),l=Math.min(l,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return[i,l,h,g]},d.b=Pt,d.b$=$A,d.b0=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]+u[3]},d.b1=mw,d.b2=Qc,d.b3=function(u,i,l,h,g){var _,x=1/Math.tan(i/2);return u[0]=x/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=x,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,g!=null&&g!==1/0?(u[10]=(g+h)*(_=1/(h-g)),u[14]=2*g*h*_):(u[10]=-1,u[14]=-2*h),u},d.b4=function(u){var i=new ae(16);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],i[4]=u[4],i[5]=u[5],i[6]=u[6],i[7]=u[7],i[8]=u[8],i[9]=u[9],i[10]=u[10],i[11]=u[11],i[12]=u[12],i[13]=u[13],i[14]=u[14],i[15]=u[15],i},d.b5=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),_=i[0],x=i[1],T=i[2],E=i[3],D=i[4],z=i[5],j=i[6],H=i[7];return i!==u&&(u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=_*g+D*h,u[1]=x*g+z*h,u[2]=T*g+j*h,u[3]=E*g+H*h,u[4]=D*g-_*h,u[5]=z*g-x*h,u[6]=j*g-T*h,u[7]=H*g-E*h,u},d.b6=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),_=i[4],x=i[5],T=i[6],E=i[7],D=i[8],z=i[9],j=i[10],H=i[11];return i!==u&&(u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[4]=_*g+D*h,u[5]=x*g+z*h,u[6]=T*g+j*h,u[7]=E*g+H*h,u[8]=D*g-_*h,u[9]=z*g-x*h,u[10]=j*g-T*h,u[11]=H*g-E*h,u},d.b7=function(){const u=new Float32Array(16);return ce(u),u},d.b8=function(){const u=new Float64Array(16);return ce(u),u},d.b9=function(){return new Float64Array(16)},d.bA=function(u){return u[0]=0,u[1]=0,u[2]=0,u},d.bB=function(u,i,l,h){const g=Math.sqrt(u*u+i*i),_=Math.sqrt(l*l+h*h);u/=g,i/=g,l/=_,h/=_;const x=Math.acos(u*l+i*h);return-i*l+u*h>0?x:-x},d.bC=function(u,i){const l=Ft(u,2*Math.PI),h=Ft(i,2*Math.PI);return Math.min(Math.abs(l-h),Math.abs(l-h+2*Math.PI),Math.abs(l-h-2*Math.PI))},d.bD=function(){const u={},i=Oe.$version;for(const l in Oe.$root){const h=Oe.$root[l];if(h.required){let g=null;g=l==="version"?i:h.type==="array"?[]:{},g!=null&&(u[l]=g)}}return u},d.bE=Vh,d.bF=$e,d.bG=function u(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let h=0;h<i.length;h++)if(!u(i[h],l[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const h in i)if(!u(i[h],l[h]))return!1;return!0}return i===l},d.bH=function(u){u=u.slice();const i=Object.create(null);for(let l=0;l<u.length;l++)i[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=cn(u[l],i[u[l].ref]));return u},d.bI=function(u){if(u.type==="custom")return new lE(u);switch(u.type){case"background":return new aE(u);case"circle":return new Q2(u);case"color-relief":return new aA(u);case"fill":return new bA(u);case"fill-extrusion":return new IA(u);case"heatmap":return new tA(u);case"hillshade":return new iA(u);case"line":return new BA(u);case"raster":return new oE(u);case"symbol":return new Ap(u)}},d.bJ=Ze,d.bK=function(u,i){if(!u)return[{command:"setStyle",args:[i]}];let l=[];try{if(!Zt(u.version,i.version))return[{command:"setStyle",args:[i]}];Zt(u.center,i.center)||l.push({command:"setCenter",args:[i.center]}),Zt(u.state,i.state)||l.push({command:"setGlobalState",args:[i.state]}),Zt(u.centerAltitude,i.centerAltitude)||l.push({command:"setCenterAltitude",args:[i.centerAltitude]}),Zt(u.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),Zt(u.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),Zt(u.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),Zt(u.roll,i.roll)||l.push({command:"setRoll",args:[i.roll]}),Zt(u.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),Zt(u.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),Zt(u.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),Zt(u.light,i.light)||l.push({command:"setLight",args:[i.light]}),Zt(u.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),Zt(u.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),Zt(u.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const h={},g=[];(function(x,T,E,D){let z;for(z in T=T||{},x=x||{})Object.prototype.hasOwnProperty.call(x,z)&&(Object.prototype.hasOwnProperty.call(T,z)||ci(z,E,D));for(z in T)Object.prototype.hasOwnProperty.call(T,z)&&(Object.prototype.hasOwnProperty.call(x,z)?Zt(x[z],T[z])||(x[z].type==="geojson"&&T[z].type==="geojson"&&Hn(x,T,z)?rn(E,{command:"setGeoJSONSourceData",args:[z,T[z].data]}):Jn(z,T,E,D)):pn(z,T,E))})(u.sources,i.sources,g,h);const _=[];u.layers&&u.layers.forEach(x=>{"source"in x&&h[x.source]?l.push({command:"removeLayer",args:[x.id]}):_.push(x)}),l=l.concat(g),function(x,T,E){T=T||[];const D=(x=x||[]).map($n),z=T.map($n),j=x.reduce(rr,{}),H=T.reduce(rr,{}),Y=D.slice(),J=Object.create(null);let ne,me,xe,Ne,Pe;for(let K=0,de=0;K<D.length;K++)ne=D[K],Object.prototype.hasOwnProperty.call(H,ne)?de++:(rn(E,{command:"removeLayer",args:[ne]}),Y.splice(Y.indexOf(ne,de),1));for(let K=0,de=0;K<z.length;K++)ne=z[z.length-1-K],Y[Y.length-1-K]!==ne&&(Object.prototype.hasOwnProperty.call(j,ne)?(rn(E,{command:"removeLayer",args:[ne]}),Y.splice(Y.lastIndexOf(ne,Y.length-de),1)):de++,Ne=Y[Y.length-K],rn(E,{command:"addLayer",args:[H[ne],Ne]}),Y.splice(Y.length-K,0,ne),J[ne]=!0);for(let K=0;K<z.length;K++)if(ne=z[K],me=j[ne],xe=H[ne],!J[ne]&&!Zt(me,xe))if(Zt(me.source,xe.source)&&Zt(me["source-layer"],xe["source-layer"])&&Zt(me.type,xe.type)){for(Pe in fn(me.layout,xe.layout,E,ne,null,"setLayoutProperty"),fn(me.paint,xe.paint,E,ne,null,"setPaintProperty"),Zt(me.filter,xe.filter)||rn(E,{command:"setFilter",args:[ne,xe.filter]}),Zt(me.minzoom,xe.minzoom)&&Zt(me.maxzoom,xe.maxzoom)||rn(E,{command:"setLayerZoomRange",args:[ne,xe.minzoom,xe.maxzoom]}),me)Object.prototype.hasOwnProperty.call(me,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?fn(me[Pe],xe[Pe],E,ne,Pe.slice(6),"setPaintProperty"):Zt(me[Pe],xe[Pe])||rn(E,{command:"setLayerProperty",args:[ne,Pe,xe[Pe]]}));for(Pe in xe)Object.prototype.hasOwnProperty.call(xe,Pe)&&!Object.prototype.hasOwnProperty.call(me,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?fn(me[Pe],xe[Pe],E,ne,Pe.slice(6),"setPaintProperty"):Zt(me[Pe],xe[Pe])||rn(E,{command:"setLayerProperty",args:[ne,Pe,xe[Pe]]}))}else rn(E,{command:"removeLayer",args:[ne]}),Ne=Y[Y.lastIndexOf(ne)+1],rn(E,{command:"addLayer",args:[xe,Ne]})}(_,i.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[i]}]}return l},d.bL=function(u){const i=[],l=u.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},d.bM=le,d.bN=Le,d.bO=class extends fi{constructor(u,i){super(u,i),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},d.bP=yp,d.bQ=class extends fi{constructor(u,i){super(u,i),this.current=$v}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let i=1;i<16;i++)if(u[i]!==this.current[i]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},d.bR=Xi,d.bS=class extends fi{constructor(u,i){super(u,i),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},d.bT=class extends fi{constructor(u,i){super(u,i),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},d.bU=ue,d.bV=function(u,i){var l=Math.sin(i),h=Math.cos(i);return u[0]=h,u[1]=l,u[2]=0,u[3]=-l,u[4]=h,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},d.bW=function(u,i,l){var h=i[0],g=i[1],_=i[2];return u[0]=h*l[0]+g*l[3]+_*l[6],u[1]=h*l[1]+g*l[4]+_*l[7],u[2]=h*l[2]+g*l[5]+_*l[8],u},d.bX=function(u,i,l,h,g,_,x){var T=1/(i-l),E=1/(h-g),D=1/(_-x);return u[0]=-2*T,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*E,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*D,u[11]=0,u[12]=(i+l)*T,u[13]=(g+h)*E,u[14]=(x+_)*D,u[15]=1,u},d.bY=class extends fi{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(4*u.length);for(let l=0;l<u.length;l++)i[4*l]=u[l].r,i[4*l+1]=u[l].g,i[4*l+2]=u[l].b,i[4*l+3]=u[l].a;this.gl.uniform4fv(this.location,i)}}},d.bZ=class extends fi{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(u);this.gl.uniform1fv(this.location,i)}}},d.b_=class extends m{},d.ba=function(u,i,l){const h=new Float64Array(4);return mt(h,u,i-90,l),h},d.bb=function(u,i,l,h){var g,_,x,T,E,D=i[0],z=i[1],j=i[2],H=i[3],Y=l[0],J=l[1],ne=l[2],me=l[3];return(_=D*Y+z*J+j*ne+H*me)<0&&(_=-_,Y=-Y,J=-J,ne=-ne,me=-me),1-_>te?(g=Math.acos(_),x=Math.sin(g),T=Math.sin((1-h)*g)/x,E=Math.sin(h*g)/x):(T=1-h,E=h),u[0]=T*D+E*Y,u[1]=T*z+E*J,u[2]=T*j+E*ne,u[3]=T*H+E*me,u},d.bc=function(u){const i=new Float64Array(9);var l,h,g,_,x,T,E,D,z,j,H,Y,J,ne,me,xe,Ne,Pe;j=(g=(h=u)[0])*(E=g+g),H=(_=h[1])*E,J=(x=h[2])*E,ne=x*(D=_+_),xe=(T=h[3])*E,Ne=T*D,Pe=T*(z=x+x),(l=i)[0]=1-(Y=_*D)-(me=x*z),l[3]=H-Pe,l[6]=J+Ne,l[1]=H+Pe,l[4]=1-j-me,l[7]=ne-xe,l[2]=J-Ne,l[5]=ne+xe,l[8]=1-j-Y;const K=Rn(-Math.asin(st(i[2],-1,1)));let de,Ae;return Math.hypot(i[5],i[8])<.001?(de=0,Ae=-Rn(Math.atan2(i[3],i[4]))):(de=Rn(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Ae=Rn(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:de,pitch:K+90,bearing:Ae}},d.bd=function(u,i){return u.roll==i.roll&&u.pitch==i.pitch&&u.bearing==i.bearing},d.be=zn,d.bf=Nr,d.bg=Yc,d.bh=rf,d.bi=Kc,d.bj=Tt,d.bk=xt,d.bl=xn,d.bm=function(u,i,l,h,g){return Tt(h,g,st((u-i)/(l-i),0,1))},d.bn=Ft,d.bo=function(){return new Float64Array(3)},d.bp=function(u,i,l,h){return u[0]=i[0]+l[0]*h,u[1]=i[1]+l[1]*h,u[2]=i[2]+l[2]*h,u},d.bq=mt,d.br=function(u,i,l){var h=l[0],g=l[1],_=l[2],x=i[0],T=i[1],E=i[2],D=g*E-_*T,z=_*x-h*E,j=h*T-g*x,H=g*j-_*z,Y=_*D-h*j,J=h*z-g*D,ne=2*l[3];return z*=ne,j*=ne,Y*=2,J*=2,u[0]=x+(D*=ne)+(H*=2),u[1]=T+z+Y,u[2]=E+j+J,u},d.bs=function(u,i,l){const h=(g=[u[0],u[1],u[2],i[0],i[1],i[2],l[0],l[1],l[2]])[0]*((z=g[8])*(x=g[4])-(T=g[5])*(D=g[7]))+g[1]*(-z*(_=g[3])+T*(E=g[6]))+g[2]*(D*_-x*E);var g,_,x,T,E,D,z;if(h===0)return null;const j=je([],[i[0],i[1],i[2]],[l[0],l[1],l[2]]),H=je([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),Y=je([],[u[0],u[1],u[2]],[i[0],i[1],i[2]]),J=be([],j,-u[3]);return re(J,J,be([],H,-i[3])),re(J,J,be([],Y,-l[3])),be(J,J,1/h),J},d.bt=gy,d.bu=function(){return new Float64Array(4)},d.bv=function(u,i,l,h){var g=[],_=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],_[0]=g[0]*Math.cos(h)-g[1]*Math.sin(h),_[1]=g[0]*Math.sin(h)+g[1]*Math.cos(h),_[2]=g[2],u[0]=_[0]+l[0],u[1]=_[1]+l[1],u[2]=_[2]+l[2],u},d.bw=function(u,i,l,h){var g=[],_=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],_[0]=g[0],_[1]=g[1]*Math.cos(h)-g[2]*Math.sin(h),_[2]=g[1]*Math.sin(h)+g[2]*Math.cos(h),u[0]=_[0]+l[0],u[1]=_[1]+l[1],u[2]=_[2]+l[2],u},d.bx=function(u,i,l,h){var g=[],_=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],_[0]=g[2]*Math.sin(h)+g[0]*Math.cos(h),_[1]=g[1],_[2]=g[2]*Math.cos(h)-g[0]*Math.sin(h),u[0]=_[0]+l[0],u[1]=_[1]+l[1],u[2]=_[2]+l[2],u},d.by=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),_=i[0],x=i[1],T=i[2],E=i[3],D=i[8],z=i[9],j=i[10],H=i[11];return i!==u&&(u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=_*g-D*h,u[1]=x*g-z*h,u[2]=T*g-j*h,u[3]=E*g-H*h,u[8]=_*h+D*g,u[9]=x*h+z*g,u[10]=T*h+j*g,u[11]=E*h+H*g,u},d.bz=function(u,i){const l=Ft(u,360),h=Ft(i,360),g=h-l,_=h>l?g-360:g+360;return Math.abs(g)<Math.abs(_)?g:_},d.c=qe,d.c0=class extends y{},d.c1=Hv,d.c2=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},d.c3=fx,d.c4=function(u,i,l){var h=i[0],g=i[1],_=i[2],x=l[3]*h+l[7]*g+l[11]*_+l[15];return u[0]=(l[0]*h+l[4]*g+l[8]*_+l[12])/(x=x||1),u[1]=(l[1]*h+l[5]*g+l[9]*_+l[13])/x,u[2]=(l[2]*h+l[6]*g+l[10]*_+l[14])/x,u},d.c5=class extends Gh{},d.c6=class extends N{},d.c7=function(u,i){return u[0]===i[0]&&u[1]===i[1]&&u[2]===i[2]&&u[3]===i[3]&&u[4]===i[4]&&u[5]===i[5]&&u[6]===i[6]&&u[7]===i[7]&&u[8]===i[8]&&u[9]===i[9]&&u[10]===i[10]&&u[11]===i[11]&&u[12]===i[12]&&u[13]===i[13]&&u[14]===i[14]&&u[15]===i[15]},d.c8=function(u,i){var l=u[0],h=u[1],g=u[2],_=u[3],x=u[4],T=u[5],E=u[6],D=u[7],z=u[8],j=u[9],H=u[10],Y=u[11],J=u[12],ne=u[13],me=u[14],xe=u[15],Ne=i[0],Pe=i[1],K=i[2],de=i[3],Ae=i[4],it=i[5],It=i[6],dt=i[7],yt=i[8],Rt=i[9],Et=i[10],Lt=i[11],wt=i[12],Yt=i[13],on=i[14],sn=i[15];return Math.abs(l-Ne)<=te*Math.max(1,Math.abs(l),Math.abs(Ne))&&Math.abs(h-Pe)<=te*Math.max(1,Math.abs(h),Math.abs(Pe))&&Math.abs(g-K)<=te*Math.max(1,Math.abs(g),Math.abs(K))&&Math.abs(_-de)<=te*Math.max(1,Math.abs(_),Math.abs(de))&&Math.abs(x-Ae)<=te*Math.max(1,Math.abs(x),Math.abs(Ae))&&Math.abs(T-it)<=te*Math.max(1,Math.abs(T),Math.abs(it))&&Math.abs(E-It)<=te*Math.max(1,Math.abs(E),Math.abs(It))&&Math.abs(D-dt)<=te*Math.max(1,Math.abs(D),Math.abs(dt))&&Math.abs(z-yt)<=te*Math.max(1,Math.abs(z),Math.abs(yt))&&Math.abs(j-Rt)<=te*Math.max(1,Math.abs(j),Math.abs(Rt))&&Math.abs(H-Et)<=te*Math.max(1,Math.abs(H),Math.abs(Et))&&Math.abs(Y-Lt)<=te*Math.max(1,Math.abs(Y),Math.abs(Lt))&&Math.abs(J-wt)<=te*Math.max(1,Math.abs(J),Math.abs(wt))&&Math.abs(ne-Yt)<=te*Math.max(1,Math.abs(ne),Math.abs(Yt))&&Math.abs(me-on)<=te*Math.max(1,Math.abs(me),Math.abs(on))&&Math.abs(xe-sn)<=te*Math.max(1,Math.abs(xe),Math.abs(sn))},d.c9=function(u,i){return u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},d.cA=function(u){delete se.REGISTERED_PROTOCOLS[u]},d.cB=function(u,i){const l={};for(let g=0;g<u.length;g++){const _=i&&i[u[g].id]||Lc(u[g]);i&&(i[u[g].id]=_);let x=l[_];x||(x=l[_]=[]),x.push(u[g])}const h=[];for(const g in l)h.push(l[g]);return h},d.cC=Wt,d.cD=pw,d.cE=vw,d.cF=Wx,d.cG=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Me/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const i=u.bucket.layers[0],l=i.layout,h=i._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new pi(u.bucket.zoom+1),u.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new pi(u.bucket.zoom+1),u.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new pi(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:z}=u.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new pi(D),u.canonical),h["text-size"].possiblyEvaluate(new pi(z),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:z}=u.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new pi(D),u.canonical),h["icon-size"].possiblyEvaluate(new pi(z),u.canonical)]}const _=l.get("text-line-height")*lr,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",T=l.get("text-keep-upright"),E=l.get("text-size");for(const D of u.bucket.features){const z=l.get("text-font").evaluate(D,{},u.canonical).join(","),j=E.evaluate(D,{},u.canonical),H=g.layoutTextSize.evaluate(D,{},u.canonical),Y=g.layoutIconSize.evaluate(D,{},u.canonical),J={horizontal:{},vertical:void 0},ne=D.text;let me,xe=[0,0];if(ne){const K=ne.toString(),de=l.get("text-letter-spacing").evaluate(D,{},u.canonical)*lr,Ae=dp(K)?de:0,it=l.get("text-anchor").evaluate(D,{},u.canonical),It=Iw(i,D,u.canonical);if(!It){const Et=l.get("text-radial-offset").evaluate(D,{},u.canonical);xe=Et?Pw(it,[Et*lr,_y]):l.get("text-offset").evaluate(D,{},u.canonical).map(Lt=>Lt*lr)}let dt=x?"center":l.get("text-justify").evaluate(D,{},u.canonical);const yt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(D,{},u.canonical)*lr:1/0,Rt=()=>{u.bucket.allowVerticalPlacement&&Oh(K)&&(J.vertical=kp(ne,u.glyphMap,u.glyphPositions,u.imagePositions,z,yt,_,it,"left",Ae,xe,d.an.vertical,!0,H,j))};if(!x&&It){const Et=new Set;if(dt==="auto")for(let wt=0;wt<It.values.length;wt+=2)Et.add(by(It.values[wt]));else Et.add(dt);let Lt=!1;for(const wt of Et)if(!J.horizontal[wt])if(Lt)J.horizontal[wt]=J.horizontal[0];else{const Yt=kp(ne,u.glyphMap,u.glyphPositions,u.imagePositions,z,yt,_,"center",wt,Ae,xe,d.an.horizontal,!1,H,j);Yt&&(J.horizontal[wt]=Yt,Lt=Yt.positionedLines.length===1)}Rt()}else{dt==="auto"&&(dt=by(it));const Et=kp(ne,u.glyphMap,u.glyphPositions,u.imagePositions,z,yt,_,it,dt,Ae,xe,d.an.horizontal,!1,H,j);Et&&(J.horizontal[dt]=Et),Rt(),Oh(K)&&x&&T&&(J.vertical=kp(ne,u.glyphMap,u.glyphPositions,u.imagePositions,z,yt,_,it,dt,Ae,xe,d.an.vertical,!1,H,j))}}let Ne=!1;if(D.icon&&D.icon.name){const K=u.imageMap[D.icon.name];K&&(me=eE(u.imagePositions[D.icon.name],l.get("icon-offset").evaluate(D,{},u.canonical),l.get("icon-anchor").evaluate(D,{},u.canonical)),Ne=!!K.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Ne:u.bucket.sdfIcons!==Ne&&Je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(K.pixelRatio!==u.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Pe=Ew(J.horizontal)||J.vertical;u.bucket.iconsInText=!!Pe&&Pe.iconsInText,(Pe||me)&&vE(u.bucket,D,J,me,u.imageMap,g,H,Y,xe,Ne,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},d.cH=ry,d.cI=Jv,d.cJ=iy,d.cK=sf,d.cL=oy,d.cM=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},d.cN=function(u,i,l,h,g){return a(this,void 0,void 0,function*(){if(X())try{return yield Ut(u,i,l,h,g)}catch{}return function(_,x,T,E,D){const z=_.width,j=_.height;Jt&&ln||(Jt=new OffscreenCanvas(z,j),ln=Jt.getContext("2d",{willReadFrequently:!0})),Jt.width=z,Jt.height=j,ln.drawImage(_,0,0,z,j);const H=ln.getImageData(x,T,E,D);return ln.clearRect(0,0,z,j),H.data}(u,i,l,h,g)})},d.cO=gx,d.cP=b,d.cQ=k,d.cR=Rx,d.cS=qx,d.cT=Ec,d.cU=Is,d.ca=u=>u.type==="symbol",d.cb=u=>u.type==="circle",d.cc=u=>u.type==="heatmap",d.cd=u=>u.type==="line",d.ce=u=>u.type==="fill",d.cf=u=>u.type==="fill-extrusion",d.cg=u=>u.type==="hillshade",d.ch=u=>u.type==="color-relief",d.ci=u=>u.type==="raster",d.cj=u=>u.type==="background",d.ck=u=>u.type==="custom",d.cl=Re,d.cm=function(u,i,l){const h=Se(i.x-l.x,i.y-l.y),g=Se(u.x-l.x,u.y-l.y);var _,x;return Rn(Math.atan2(h[0]*g[1]-h[1]*g[0],(_=h)[0]*(x=g)[0]+_[1]*x[1]))},d.cn=vt,d.co=function(u,i){return Yi[i]&&(u instanceof MouseEvent||u instanceof WheelEvent)},d.cp=function(u,i){return Ni[i]&&"touches"in u},d.cq=function(u){return Ni[u]||Yi[u]},d.cr=function(u,i,l){var h=i[0],g=i[1];return u[0]=l[0]*h+l[4]*g+l[12],u[1]=l[1]*h+l[5]*g+l[13],u},d.cs=function(u,i){const{x:l,y:h}=df.fromLngLat(i);return!(u<0||u>25||h<0||h>=1||l<0||l>=1)},d.ct=function(u,i){return u[0]=i[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=i[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},d.cu=class extends Es{},d.cv=_E,d.cx=function(u){return u.message===Ui},d.cy=Ce,d.cz=function(u,i){se.REGISTERED_PROTOCOLS[u]=i},d.d=rt,d.e=St,d.f=u=>a(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.g=oe,d.h=u=>new Promise((i,l)=>{const h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=nn})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(u)],{type:"image/png"});h.src=u.byteLength?URL.createObjectURL(g):nn}),d.i=ct,d.j=(u,i)=>We(St(u,{type:"json"}),i),d.k=Xe,d.l=pt,d.m=We,d.n=(u,i)=>We(St(u,{type:"arrayBuffer"}),i),d.o=function(u){return new oy(u).readFields(UA,[])},d.p=Hx,d.q=Jh,d.r=jr,d.s=gn,d.t=Nh,d.u=Vn,d.v=Oe,d.w=Je,d.x=Lv,d.y=au,d.z=nl}),c("worker",["./shared"],function(d){class a{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,oe){for(const Ce of se){this._layerConfigs[Ce.id]=Ce;const $e=this._layers[Ce.id]=d.bI(Ce);$e._featureFilter=d.a9($e.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of oe)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const he=d.cB(Object.values(this._layerConfigs),this.keyCache);for(const Ce of he){const $e=Ce.map(Xe=>this._layers[Xe.id]),We=$e[0];if(We.visibility==="none")continue;const rt=We.source||"";let He=this.familiesBySource[rt];He||(He=this.familiesBySource[rt]={});const bt=We.sourceLayer||"_geojsonTileLayer";let pt=He[bt];pt||(pt=He[bt]=[]),pt.push($e)}}}class b{constructor(se){const oe={},he=[];for(const rt in se){const He=se[rt],bt=oe[rt]={};for(const pt in He){const Xe=He[+pt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Ct={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};he.push(Ct),bt[pt]={rect:Ct,metrics:Xe.metrics}}}const{w:Ce,h:$e}=d.p(he),We=new d.q({width:Ce||1,height:$e||1});for(const rt in se){const He=se[rt];for(const bt in He){const pt=He[+bt];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const Xe=oe[rt][bt].rect;d.q.copy(pt.bitmap,We,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},pt.bitmap)}}this.image=We,this.positions=oe}}d.cC("GlyphAtlas",b);class C{constructor(se){this.tileID=new d.Z(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[],this.globalState=se.globalState}parse(se,oe,he,Ce,$e){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new d.a7;const We=new d.cD(Object.keys(se.layers).sort()),rt=new d.cE(this.tileID,this.promoteId);rt.bucketLayerIDs=[];const He={},bt={featureIndex:rt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he,subdivisionGranularity:$e},pt=oe.familiesBySource[this.source];for(const fn in pt){const $n=se.layers[fn];if(!$n)continue;$n.version===1&&d.w(`Vector tile source "${this.source}" layer "${fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const rr=We.encode(fn),Vt=[];for(let pr=0;pr<$n.length;pr++){const _i=$n.feature(pr),Ss=rt.getId(_i,fn);Vt.push({feature:_i,id:Ss,index:pr,sourceLayerIndex:rr})}for(const pr of pt[fn]){const _i=pr[0];_i.source!==this.source&&d.w(`layer.source = ${_i.source} does not equal this.source = ${this.source}`),_i.minzoom&&this.zoom<Math.floor(_i.minzoom)||_i.maxzoom&&this.zoom>=_i.maxzoom||_i.visibility!=="none"&&(w(pr,this.zoom,he),(He[_i.id]=_i.createBucket({index:rt.bucketLayerIDs.length,layers:pr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:rr,sourceID:this.source,globalState:this.globalState})).populate(Vt,bt,this.tileID.canonical),rt.bucketLayerIDs.push(pr.map(Ss=>Ss.id)))}}const Xe=d.bM(bt.glyphDependencies,fn=>Object.keys(fn).map(Number));this.inFlightDependencies.forEach(fn=>fn==null?void 0:fn.abort()),this.inFlightDependencies=[];let Ct=Promise.resolve({});if(Object.keys(Xe).length){const fn=new AbortController;this.inFlightDependencies.push(fn),Ct=Ce.sendAsync({type:"GG",data:{stacks:Xe,source:this.source,tileID:this.tileID,type:"glyphs"}},fn)}const Oe=Object.keys(bt.iconDependencies);let Gt=Promise.resolve({});if(Oe.length){const fn=new AbortController;this.inFlightDependencies.push(fn),Gt=Ce.sendAsync({type:"GI",data:{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"}},fn)}const cn=Object.keys(bt.patternDependencies);let Zt=Promise.resolve({});if(cn.length){const fn=new AbortController;this.inFlightDependencies.push(fn),Zt=Ce.sendAsync({type:"GI",data:{icons:cn,source:this.source,tileID:this.tileID,type:"patterns"}},fn)}const[rn,pn,ci]=yield Promise.all([Ct,Gt,Zt]),Jn=new b(rn),Hn=new d.cF(pn,ci);for(const fn in He){const $n=He[fn];$n instanceof d.a8?(w($n.layers,this.zoom,he),d.cG({bucket:$n,glyphMap:rn,glyphPositions:Jn.positions,imageMap:pn,imagePositions:Hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:bt.subdivisionGranularity})):$n.hasPattern&&($n instanceof d.cH||$n instanceof d.cI||$n instanceof d.cJ)&&(w($n.layers,this.zoom,he),$n.addFeatures(bt,this.tileID.canonical,Hn.patternPositions))}return this.status="done",{buckets:Object.values(He).filter(fn=>!fn.isEmpty()),featureIndex:rt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jn.image,imageAtlas:Hn,glyphMap:this.returnDependencies?rn:null,iconMap:this.returnDependencies?pn:null,glyphPositions:this.returnDependencies?Jn.positions:null}})}}function w(qe,se,oe){const he=new d.F(se);for(const Ce of qe)Ce.recalculate(he,oe)}class k{constructor(se,oe,he){this.actor=se,this.layerIndex=oe,this.availableImages=he,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,oe){return d._(this,void 0,void 0,function*(){const he=yield d.n(se.request,oe);try{return{vectorTile:new d.cK.VectorTile(new d.cL(he.data)),rawData:he.data,cacheControl:he.cacheControl,expires:he.expires}}catch(Ce){const $e=new Uint8Array(he.data);let We=`Unable to parse the tile at ${se.request.url}, `;throw We+=$e[0]===31&&$e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.message}`,new Error(We)}})}loadTile(se){return d._(this,void 0,void 0,function*(){const oe=se.uid,he=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.cM(se.request),Ce=new C(se);this.loading[oe]=Ce;const $e=new AbortController;Ce.abort=$e;try{const We=yield this.loadVectorTile(se,$e);if(delete this.loading[oe],!We)return null;const rt=We.rawData,He={};We.expires&&(He.expires=We.expires),We.cacheControl&&(He.cacheControl=We.cacheControl);const bt={};if(he){const Xe=he.finish();Xe&&(bt.resourceTiming=JSON.parse(JSON.stringify(Xe)))}Ce.vectorTile=We.vectorTile;const pt=Ce.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[oe]=Ce,this.fetching[oe]={rawTileData:rt,cacheControl:He,resourceTiming:bt};try{const Xe=yield pt;return d.e({rawTileData:rt.slice(0)},Xe,He,bt)}finally{delete this.fetching[oe]}}catch(We){throw delete this.loading[oe],Ce.status="done",this.loaded[oe]=Ce,We}})}reloadTile(se){return d._(this,void 0,void 0,function*(){const oe=se.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const he=this.loaded[oe];if(he.showCollisionBoxes=se.showCollisionBoxes,he.globalState=se.globalState,he.status==="parsing"){const Ce=yield he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let $e;if(this.fetching[oe]){const{rawTileData:We,cacheControl:rt,resourceTiming:He}=this.fetching[oe];delete this.fetching[oe],$e=d.e({rawTileData:We.slice(0)},Ce,rt,He)}else $e=Ce;return $e}if(he.status==="done"&&he.vectorTile)return he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return d._(this,void 0,void 0,function*(){const oe=this.loading,he=se.uid;oe&&oe[he]&&oe[he].abort&&(oe[he].abort.abort(),delete oe[he])})}removeTile(se){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class A{constructor(){this.loaded={}}loadTile(se){return d._(this,void 0,void 0,function*(){const{uid:oe,encoding:he,rawImageData:Ce,redFactor:$e,greenFactor:We,blueFactor:rt,baseShift:He}=se,bt=Ce.width+2,pt=Ce.height+2,Xe=d.b(Ce)?new d.R({width:bt,height:pt},yield d.cN(Ce,-1,-1,bt,pt)):Ce,Ct=new d.cO(oe,Xe,he,$e,We,rt,He);return this.loaded=this.loaded||{},this.loaded[oe]=Ct,Ct})}removeTile(se){const oe=this.loaded,he=se.uid;oe&&oe[he]&&delete oe[he]}}var I,R,F=function(){if(R)return I;function qe(oe,he){if(oe.length!==0){se(oe[0],he);for(var Ce=1;Ce<oe.length;Ce++)se(oe[Ce],!he)}}function se(oe,he){for(var Ce=0,$e=0,We=0,rt=oe.length,He=rt-1;We<rt;He=We++){var bt=(oe[We][0]-oe[He][0])*(oe[He][1]+oe[We][1]),pt=Ce+bt;$e+=Math.abs(Ce)>=Math.abs(bt)?Ce-pt+bt:bt-pt+Ce,Ce=pt}Ce+$e>=0!=!!he&&oe.reverse()}return R=1,I=function oe(he,Ce){var $e,We=he&&he.type;if(We==="FeatureCollection")for($e=0;$e<he.features.length;$e++)oe(he.features[$e],Ce);else if(We==="GeometryCollection")for($e=0;$e<he.geometries.length;$e++)oe(he.geometries[$e],Ce);else if(We==="Feature")oe(he.geometry,Ce);else if(We==="Polygon")qe(he.coordinates,Ce);else if(We==="MultiPolygon")for($e=0;$e<he.coordinates.length;$e++)qe(he.coordinates[$e],Ce);return he}}(),B=d.cP(F);const $=d.cK.VectorTileFeature.prototype.toGeoJSON;class O{constructor(se){this._feature=se,this.extent=d.$,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const oe of this._feature.geometry)se.push([new d.P(oe[0],oe[1])]);return se}{const se=[];for(const oe of this._feature.geometry){const he=[];for(const Ce of oe)he.push(new d.P(Ce[0],Ce[1]));se.push(he)}return se}}toGeoJSON(se,oe,he){return $.call(this,se,oe,he)}}class q{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.$,this.length=se.length,this._features=se}feature(se){return new O(this._features[se])}}var X,te,ae,ue={exports:{}},ce=function(){if(ae)return ue.exports;ae=1;var qe=d.cS(),se=function(){if(te)return X;te=1;var pt=d.cQ(),Xe=d.cR().VectorTileFeature;function Ct(Gt,cn){this.options=cn||{},this.features=Gt,this.length=Gt.length}function Oe(Gt,cn){this.id=typeof Gt.id=="number"?Gt.id:void 0,this.type=Gt.type,this.rawGeometry=Gt.type===1?[Gt.geometry]:Gt.geometry,this.properties=Gt.tags,this.extent=cn||4096}return X=Ct,Ct.prototype.feature=function(Gt){return new Oe(this.features[Gt],this.options.extent)},Oe.prototype.loadGeometry=function(){var Gt=this.rawGeometry;this.geometry=[];for(var cn=0;cn<Gt.length;cn++){for(var Zt=Gt[cn],rn=[],pn=0;pn<Zt.length;pn++)rn.push(new pt(Zt[pn][0],Zt[pn][1]));this.geometry.push(rn)}return this.geometry},Oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Gt=this.geometry,cn=1/0,Zt=-1/0,rn=1/0,pn=-1/0,ci=0;ci<Gt.length;ci++)for(var Jn=Gt[ci],Hn=0;Hn<Jn.length;Hn++){var fn=Jn[Hn];cn=Math.min(cn,fn.x),Zt=Math.max(Zt,fn.x),rn=Math.min(rn,fn.y),pn=Math.max(pn,fn.y)}return[cn,rn,Zt,pn]},Oe.prototype.toGeoJSON=Xe.prototype.toGeoJSON,X}();function oe(pt){var Xe=new qe;return function(Ct,Oe){for(var Gt in Ct.layers)Oe.writeMessage(3,he,Ct.layers[Gt])}(pt,Xe),Xe.finish()}function he(pt,Xe){var Ct;Xe.writeVarintField(15,pt.version||1),Xe.writeStringField(1,pt.name||""),Xe.writeVarintField(5,pt.extent||4096);var Oe={keys:[],values:[],keycache:{},valuecache:{}};for(Ct=0;Ct<pt.length;Ct++)Oe.feature=pt.feature(Ct),Xe.writeMessage(2,Ce,Oe);var Gt=Oe.keys;for(Ct=0;Ct<Gt.length;Ct++)Xe.writeStringField(3,Gt[Ct]);var cn=Oe.values;for(Ct=0;Ct<cn.length;Ct++)Xe.writeMessage(4,bt,cn[Ct])}function Ce(pt,Xe){var Ct=pt.feature;Ct.id!==void 0&&Xe.writeVarintField(1,Ct.id),Xe.writeMessage(2,$e,pt),Xe.writeVarintField(3,Ct.type),Xe.writeMessage(4,He,Ct)}function $e(pt,Xe){var Ct=pt.feature,Oe=pt.keys,Gt=pt.values,cn=pt.keycache,Zt=pt.valuecache;for(var rn in Ct.properties){var pn=Ct.properties[rn],ci=cn[rn];if(pn!==null){ci===void 0&&(Oe.push(rn),cn[rn]=ci=Oe.length-1),Xe.writeVarint(ci);var Jn=typeof pn;Jn!=="string"&&Jn!=="boolean"&&Jn!=="number"&&(pn=JSON.stringify(pn));var Hn=Jn+":"+pn,fn=Zt[Hn];fn===void 0&&(Gt.push(pn),Zt[Hn]=fn=Gt.length-1),Xe.writeVarint(fn)}}}function We(pt,Xe){return(Xe<<3)+(7&pt)}function rt(pt){return pt<<1^pt>>31}function He(pt,Xe){for(var Ct=pt.loadGeometry(),Oe=pt.type,Gt=0,cn=0,Zt=Ct.length,rn=0;rn<Zt;rn++){var pn=Ct[rn],ci=1;Oe===1&&(ci=pn.length),Xe.writeVarint(We(1,ci));for(var Jn=Oe===3?pn.length-1:pn.length,Hn=0;Hn<Jn;Hn++){Hn===1&&Oe!==1&&Xe.writeVarint(We(2,Jn-1));var fn=pn[Hn].x-Gt,$n=pn[Hn].y-cn;Xe.writeVarint(rt(fn)),Xe.writeVarint(rt($n)),Gt+=fn,cn+=$n}Oe===3&&Xe.writeVarint(We(7,1))}}function bt(pt,Xe){var Ct=typeof pt;Ct==="string"?Xe.writeStringField(1,pt):Ct==="boolean"?Xe.writeBooleanField(7,pt):Ct==="number"&&(pt%1!=0?Xe.writeDoubleField(3,pt):pt<0?Xe.writeSVarintField(6,pt):Xe.writeVarintField(5,pt))}return ue.exports=oe,ue.exports.fromVectorTileJs=oe,ue.exports.fromGeojsonVt=function(pt,Xe){Xe=Xe||{};var Ct={};for(var Oe in pt)Ct[Oe]=new se(pt[Oe].features,Xe),Ct[Oe].name=Oe,Ct[Oe].version=Xe.version,Ct[Oe].extent=Xe.extent;return oe({layers:Ct})},ue.exports.GeoJSONWrapper=se,ue.exports}(),fe=d.cP(ce);const pe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:qe=>qe},_e=Math.fround||(re=new Float32Array(1),qe=>(re[0]=+qe,re[0]));var re;class be{constructor(se){this.options=Object.assign(Object.create(pe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:oe,minZoom:he,maxZoom:Ce}=this.options;oe&&console.time("total time");const $e=`prepare ${se.length} points`;oe&&console.time($e),this.points=se;const We=[];for(let He=0;He<se.length;He++){const bt=se[He];if(!bt.geometry)continue;const[pt,Xe]=bt.geometry.coordinates,Ct=_e(Fe(pt)),Oe=_e(Ke(Xe));We.push(Ct,Oe,1/0,He,-1,1),this.options.reduce&&We.push(0)}let rt=this.trees[Ce+1]=this._createTree(We);oe&&console.timeEnd($e);for(let He=Ce;He>=he;He--){const bt=+Date.now();rt=this.trees[He]=this._createTree(this._cluster(rt,He)),oe&&console.log("z%d: %d clusters in %dms",He,rt.numItems,+Date.now()-bt)}return oe&&console.timeEnd("total time"),this}getClusters(se,oe){let he=((se[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,se[1]));let $e=se[2]===180?180:((se[2]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)he=-180,$e=180;else if(he>$e){const Xe=this.getClusters([he,Ce,180,We],oe),Ct=this.getClusters([-180,Ce,$e,We],oe);return Xe.concat(Ct)}const rt=this.trees[this._limitZoom(oe)],He=rt.range(Fe(he),Ke(We),Fe($e),Ke(Ce)),bt=rt.data,pt=[];for(const Xe of He){const Ct=this.stride*Xe;pt.push(bt[Ct+5]>1?je(bt,Ct,this.clusterProps):this.points[bt[Ct+3]])}return pt}getChildren(se){const oe=this._getOriginId(se),he=this._getOriginZoom(se),Ce="No cluster with the specified id.",$e=this.trees[he];if(!$e)throw new Error(Ce);const We=$e.data;if(oe*this.stride>=We.length)throw new Error(Ce);const rt=this.options.radius/(this.options.extent*Math.pow(2,he-1)),He=$e.within(We[oe*this.stride],We[oe*this.stride+1],rt),bt=[];for(const pt of He){const Xe=pt*this.stride;We[Xe+4]===se&&bt.push(We[Xe+5]>1?je(We,Xe,this.clusterProps):this.points[We[Xe+3]])}if(bt.length===0)throw new Error(Ce);return bt}getLeaves(se,oe,he){const Ce=[];return this._appendLeaves(Ce,se,oe=oe||10,he=he||0,0),Ce}getTile(se,oe,he){const Ce=this.trees[this._limitZoom(se)],$e=Math.pow(2,se),{extent:We,radius:rt}=this.options,He=rt/We,bt=(he-He)/$e,pt=(he+1+He)/$e,Xe={features:[]};return this._addTileFeatures(Ce.range((oe-He)/$e,bt,(oe+1+He)/$e,pt),Ce.data,oe,he,$e,Xe),oe===0&&this._addTileFeatures(Ce.range(1-He/$e,bt,1,pt),Ce.data,$e,he,$e,Xe),oe===$e-1&&this._addTileFeatures(Ce.range(0,bt,He/$e,pt),Ce.data,-1,he,$e,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom(se){let oe=this._getOriginZoom(se)-1;for(;oe<=this.options.maxZoom;){const he=this.getChildren(se);if(oe++,he.length!==1)break;se=he[0].properties.cluster_id}return oe}_appendLeaves(se,oe,he,Ce,$e){const We=this.getChildren(oe);for(const rt of We){const He=rt.properties;if(He&&He.cluster?$e+He.point_count<=Ce?$e+=He.point_count:$e=this._appendLeaves(se,He.cluster_id,he,Ce,$e):$e<Ce?$e++:se.push(rt),se.length===he)break}return $e}_createTree(se){const oe=new d.aH(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<se.length;he+=this.stride)oe.add(se[he],se[he+1]);return oe.finish(),oe.data=se,oe}_addTileFeatures(se,oe,he,Ce,$e,We){for(const rt of se){const He=rt*this.stride,bt=oe[He+5]>1;let pt,Xe,Ct;if(bt)pt=Be(oe,He,this.clusterProps),Xe=oe[He],Ct=oe[He+1];else{const cn=this.points[oe[He+3]];pt=cn.properties;const[Zt,rn]=cn.geometry.coordinates;Xe=Fe(Zt),Ct=Ke(rn)}const Oe={type:1,geometry:[[Math.round(this.options.extent*(Xe*$e-he)),Math.round(this.options.extent*(Ct*$e-Ce))]],tags:pt};let Gt;Gt=bt||this.options.generateId?oe[He+3]:this.points[oe[He+3]].id,Gt!==void 0&&(Oe.id=Gt),We.features.push(Oe)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,oe){const{radius:he,extent:Ce,reduce:$e,minPoints:We}=this.options,rt=he/(Ce*Math.pow(2,oe)),He=se.data,bt=[],pt=this.stride;for(let Xe=0;Xe<He.length;Xe+=pt){if(He[Xe+2]<=oe)continue;He[Xe+2]=oe;const Ct=He[Xe],Oe=He[Xe+1],Gt=se.within(He[Xe],He[Xe+1],rt),cn=He[Xe+5];let Zt=cn;for(const rn of Gt){const pn=rn*pt;He[pn+2]>oe&&(Zt+=He[pn+5])}if(Zt>cn&&Zt>=We){let rn,pn=Ct*cn,ci=Oe*cn,Jn=-1;const Hn=(Xe/pt<<5)+(oe+1)+this.points.length;for(const fn of Gt){const $n=fn*pt;if(He[$n+2]<=oe)continue;He[$n+2]=oe;const rr=He[$n+5];pn+=He[$n]*rr,ci+=He[$n+1]*rr,He[$n+4]=Hn,$e&&(rn||(rn=this._map(He,Xe,!0),Jn=this.clusterProps.length,this.clusterProps.push(rn)),$e(rn,this._map(He,$n)))}He[Xe+4]=Hn,bt.push(pn/Zt,ci/Zt,1/0,Hn,-1,Zt),$e&&bt.push(Jn)}else{for(let rn=0;rn<pt;rn++)bt.push(He[Xe+rn]);if(Zt>1)for(const rn of Gt){const pn=rn*pt;if(!(He[pn+2]<=oe)){He[pn+2]=oe;for(let ci=0;ci<pt;ci++)bt.push(He[pn+ci])}}}}return bt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,oe,he){if(se[oe+5]>1){const We=this.clusterProps[se[oe+6]];return he?Object.assign({},We):We}const Ce=this.points[se[oe+3]].properties,$e=this.options.map(Ce);return he&&$e===Ce?Object.assign({},$e):$e}}function je(qe,se,oe){return{type:"Feature",id:qe[se+3],properties:Be(qe,se,oe),geometry:{type:"Point",coordinates:[(he=qe[se],360*(he-.5)),ft(qe[se+1])]}};var he}function Be(qe,se,oe){const he=qe[se+5],Ce=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,$e=qe[se+6],We=$e===-1?{}:Object.assign({},oe[$e]);return Object.assign(We,{cluster:!0,cluster_id:qe[se+3],point_count:he,point_count_abbreviated:Ce})}function Fe(qe){return qe/360+.5}function Ke(qe){const se=Math.sin(qe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function ft(qe){const se=(180-360*qe)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function mt(qe,se,oe,he){let Ce=he;const $e=se+(oe-se>>1);let We,rt=oe-se;const He=qe[se],bt=qe[se+1],pt=qe[oe],Xe=qe[oe+1];for(let Ct=se+3;Ct<oe;Ct+=3){const Oe=ze(qe[Ct],qe[Ct+1],He,bt,pt,Xe);if(Oe>Ce)We=Ct,Ce=Oe;else if(Oe===Ce){const Gt=Math.abs(Ct-$e);Gt<rt&&(We=Ct,rt=Gt)}}Ce>he&&(We-se>3&&mt(qe,se,We,he),qe[We+2]=Ce,oe-We>3&&mt(qe,We,oe,he))}function ze(qe,se,oe,he,Ce,$e){let We=Ce-oe,rt=$e-he;if(We!==0||rt!==0){const He=((qe-oe)*We+(se-he)*rt)/(We*We+rt*rt);He>1?(oe=Ce,he=$e):He>0&&(oe+=We*He,he+=rt*He)}return We=qe-oe,rt=se-he,We*We+rt*rt}function Se(qe,se,oe,he){const Ce={id:qe??null,type:se,geometry:oe,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Me(Ce,oe);else if(se==="Polygon")Me(Ce,oe[0]);else if(se==="MultiLineString")for(const $e of oe)Me(Ce,$e);else if(se==="MultiPolygon")for(const $e of oe)Me(Ce,$e[0]);return Ce}function Me(qe,se){for(let oe=0;oe<se.length;oe+=3)qe.minX=Math.min(qe.minX,se[oe]),qe.minY=Math.min(qe.minY,se[oe+1]),qe.maxX=Math.max(qe.maxX,se[oe]),qe.maxY=Math.max(qe.maxY,se[oe+1])}function Qe(qe,se,oe,he){if(!se.geometry)return;const Ce=se.geometry.coordinates;if(Ce&&Ce.length===0)return;const $e=se.geometry.type,We=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2);let rt=[],He=se.id;if(oe.promoteId?He=se.properties[oe.promoteId]:oe.generateId&&(He=he||0),$e==="Point")Ft(Ce,rt);else if($e==="MultiPoint")for(const bt of Ce)Ft(bt,rt);else if($e==="LineString")Tt(Ce,rt,We,!1);else if($e==="MultiLineString"){if(oe.lineMetrics){for(const bt of Ce)rt=[],Tt(bt,rt,We,!1),qe.push(Se(He,"LineString",rt,se.properties));return}xt(Ce,rt,We,!1)}else if($e==="Polygon")xt(Ce,rt,We,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(const bt of se.geometry.geometries)Qe(qe,{id:He,geometry:bt,properties:se.properties},oe,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of Ce){const pt=[];xt(bt,pt,We,!0),rt.push(pt)}}qe.push(Se(He,$e,rt,se.properties))}function Ft(qe,se){se.push(Re(qe[0]),vt(qe[1]),0)}function Tt(qe,se,oe,he){let Ce,$e,We=0;for(let He=0;He<qe.length;He++){const bt=Re(qe[He][0]),pt=vt(qe[He][1]);se.push(bt,pt,0),He>0&&(We+=he?(Ce*pt-bt*$e)/2:Math.sqrt(Math.pow(bt-Ce,2)+Math.pow(pt-$e,2))),Ce=bt,$e=pt}const rt=se.length-3;se[2]=1,mt(se,0,rt,oe),se[rt+2]=1,se.size=Math.abs(We),se.start=0,se.end=se.size}function xt(qe,se,oe,he){for(let Ce=0;Ce<qe.length;Ce++){const $e=[];Tt(qe[Ce],$e,oe,he),se.push($e)}}function Re(qe){return qe/360+.5}function vt(qe){const se=Math.sin(qe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function st(qe,se,oe,he,Ce,$e,We,rt){if(he/=se,$e>=(oe/=se)&&We<he)return qe;if(We<oe||$e>=he)return null;const He=[];for(const bt of qe){const pt=bt.geometry;let Xe=bt.type;const Ct=Ce===0?bt.minX:bt.minY,Oe=Ce===0?bt.maxX:bt.maxY;if(Ct>=oe&&Oe<he){He.push(bt);continue}if(Oe<oe||Ct>=he)continue;let Gt=[];if(Xe==="Point"||Xe==="MultiPoint")Ye(pt,Gt,oe,he,Ce);else if(Xe==="LineString")St(pt,Gt,oe,he,Ce,!1,rt.lineMetrics);else if(Xe==="MultiLineString")le(pt,Gt,oe,he,Ce,!1);else if(Xe==="Polygon")le(pt,Gt,oe,he,Ce,!0);else if(Xe==="MultiPolygon")for(const cn of pt){const Zt=[];le(cn,Zt,oe,he,Ce,!0),Zt.length&&Gt.push(Zt)}if(Gt.length){if(rt.lineMetrics&&Xe==="LineString"){for(const cn of Gt)He.push(Se(bt.id,Xe,cn,bt.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(Gt.length===1?(Xe="LineString",Gt=Gt[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=Gt.length===3?"Point":"MultiPoint"),He.push(Se(bt.id,Xe,Gt,bt.tags))}}return He.length?He:null}function Ye(qe,se,oe,he,Ce){for(let $e=0;$e<qe.length;$e+=3){const We=qe[$e+Ce];We>=oe&&We<=he&&Le(se,qe[$e],qe[$e+1],qe[$e+2])}}function St(qe,se,oe,he,Ce,$e,We){let rt=ie(qe);const He=Ce===0?Ze:ut;let bt,pt,Xe=qe.start;for(let Zt=0;Zt<qe.length-3;Zt+=3){const rn=qe[Zt],pn=qe[Zt+1],ci=qe[Zt+2],Jn=qe[Zt+3],Hn=qe[Zt+4],fn=Ce===0?rn:pn,$n=Ce===0?Jn:Hn;let rr=!1;We&&(bt=Math.sqrt(Math.pow(rn-Jn,2)+Math.pow(pn-Hn,2))),fn<oe?$n>oe&&(pt=He(rt,rn,pn,Jn,Hn,oe),We&&(rt.start=Xe+bt*pt)):fn>he?$n<he&&(pt=He(rt,rn,pn,Jn,Hn,he),We&&(rt.start=Xe+bt*pt)):Le(rt,rn,pn,ci),$n<oe&&fn>=oe&&(pt=He(rt,rn,pn,Jn,Hn,oe),rr=!0),$n>he&&fn<=he&&(pt=He(rt,rn,pn,Jn,Hn,he),rr=!0),!$e&&rr&&(We&&(rt.end=Xe+bt*pt),se.push(rt),rt=ie(qe)),We&&(Xe+=bt)}let Ct=qe.length-3;const Oe=qe[Ct],Gt=qe[Ct+1],cn=Ce===0?Oe:Gt;cn>=oe&&cn<=he&&Le(rt,Oe,Gt,qe[Ct+2]),Ct=rt.length-3,$e&&Ct>=3&&(rt[Ct]!==rt[0]||rt[Ct+1]!==rt[1])&&Le(rt,rt[0],rt[1],rt[2]),rt.length&&se.push(rt)}function ie(qe){const se=[];return se.size=qe.size,se.start=qe.start,se.end=qe.end,se}function le(qe,se,oe,he,Ce,$e){for(const We of qe)St(We,se,oe,he,Ce,$e,!1)}function Le(qe,se,oe,he){qe.push(se,oe,he)}function Ze(qe,se,oe,he,Ce,$e){const We=($e-se)/(he-se);return Le(qe,$e,oe+(Ce-oe)*We,1),We}function ut(qe,se,oe,he,Ce,$e){const We=($e-oe)/(Ce-oe);return Le(qe,se+(he-se)*We,$e,1),We}function Je(qe,se){const oe=[];for(let he=0;he<qe.length;he++){const Ce=qe[he],$e=Ce.type;let We;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")We=kt(Ce.geometry,se);else if($e==="MultiLineString"||$e==="Polygon"){We=[];for(const rt of Ce.geometry)We.push(kt(rt,se))}else if($e==="MultiPolygon"){We=[];for(const rt of Ce.geometry){const He=[];for(const bt of rt)He.push(kt(bt,se));We.push(He)}}oe.push(Se(Ce.id,$e,We,Ce.tags))}return oe}function kt(qe,se){const oe=[];oe.size=qe.size,qe.start!==void 0&&(oe.start=qe.start,oe.end=qe.end);for(let he=0;he<qe.length;he+=3)oe.push(qe[he]+se,qe[he+1],qe[he+2]);return oe}function ct(qe,se){if(qe.transformed)return qe;const oe=1<<qe.z,he=qe.x,Ce=qe.y;for(const $e of qe.features){const We=$e.geometry,rt=$e.type;if($e.geometry=[],rt===1)for(let He=0;He<We.length;He+=2)$e.geometry.push(Dt(We[He],We[He+1],se,oe,he,Ce));else for(let He=0;He<We.length;He++){const bt=[];for(let pt=0;pt<We[He].length;pt+=2)bt.push(Dt(We[He][pt],We[He][pt+1],se,oe,he,Ce));$e.geometry.push(bt)}}return qe.transformed=!0,qe}function Dt(qe,se,oe,he,Ce,$e){return[Math.round(oe*(qe*he-Ce)),Math.round(oe*(se*he-$e))]}function Pt(qe,se,oe,he,Ce){const $e=se===Ce.maxZoom?0:Ce.tolerance/((1<<se)*Ce.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:qe.length,source:null,x:oe,y:he,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const rt of qe)nn(We,rt,$e,Ce);return We}function nn(qe,se,oe,he){const Ce=se.geometry,$e=se.type,We=[];if(qe.minX=Math.min(qe.minX,se.minX),qe.minY=Math.min(qe.minY,se.minY),qe.maxX=Math.max(qe.maxX,se.maxX),qe.maxY=Math.max(qe.maxY,se.maxY),$e==="Point"||$e==="MultiPoint")for(let rt=0;rt<Ce.length;rt+=3)We.push(Ce[rt],Ce[rt+1]),qe.numPoints++,qe.numSimplified++;else if($e==="LineString")Ut(We,Ce,qe,oe,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(let rt=0;rt<Ce.length;rt++)Ut(We,Ce[rt],qe,oe,$e==="Polygon",rt===0);else if($e==="MultiPolygon")for(let rt=0;rt<Ce.length;rt++){const He=Ce[rt];for(let bt=0;bt<He.length;bt++)Ut(We,He[bt],qe,oe,!0,bt===0)}if(We.length){let rt=se.tags||null;if($e==="LineString"&&he.lineMetrics){rt={};for(const bt in se.tags)rt[bt]=se.tags[bt];rt.mapbox_clip_start=Ce.start/Ce.size,rt.mapbox_clip_end=Ce.end/Ce.size}const He={geometry:We,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:rt};se.id!==null&&(He.id=se.id),qe.features.push(He)}}function Ut(qe,se,oe,he,Ce,$e){const We=he*he;if(he>0&&se.size<(Ce?We:he))return void(oe.numPoints+=se.length/3);const rt=[];for(let He=0;He<se.length;He+=3)(he===0||se[He+2]>We)&&(oe.numSimplified++,rt.push(se[He],se[He+1])),oe.numPoints++;Ce&&function(He,bt){let pt=0;for(let Xe=0,Ct=He.length,Oe=Ct-2;Xe<Ct;Oe=Xe,Xe+=2)pt+=(He[Xe]-He[Oe])*(He[Xe+1]+He[Oe+1]);if(pt>0===bt)for(let Xe=0,Ct=He.length;Xe<Ct/2;Xe+=2){const Oe=He[Xe],Gt=He[Xe+1];He[Xe]=He[Ct-2-Xe],He[Xe+1]=He[Ct-1-Xe],He[Ct-2-Xe]=Oe,He[Ct-1-Xe]=Gt}}(rt,$e),qe.push(rt)}const Jt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ln{constructor(se,oe){const he=(oe=this.options=function($e,We){for(const rt in We)$e[rt]=We[rt];return $e}(Object.create(Jt),oe)).debug;if(he&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ce=function($e,We){const rt=[];if($e.type==="FeatureCollection")for(let He=0;He<$e.features.length;He++)Qe(rt,$e.features[He],We,He);else Qe(rt,$e.type==="Feature"?$e:{geometry:$e},We);return rt}(se,oe);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function($e,We){const rt=We.buffer/We.extent;let He=$e;const bt=st($e,1,-1-rt,rt,0,-1,2,We),pt=st($e,1,1-rt,2+rt,0,-1,2,We);return(bt||pt)&&(He=st($e,1,-rt,1+rt,0,-1,2,We)||[],bt&&(He=Je(bt,1).concat(He)),pt&&(He=He.concat(Je(pt,-1)))),He}(Ce,oe),Ce.length&&this.splitTile(Ce,0,0,0),he&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,oe,he,Ce,$e,We,rt){const He=[se,oe,he,Ce],bt=this.options,pt=bt.debug;for(;He.length;){Ce=He.pop(),he=He.pop(),oe=He.pop(),se=He.pop();const Xe=1<<oe,Ct=gn(oe,he,Ce);let Oe=this.tiles[Ct];if(!Oe&&(pt>1&&console.time("creation"),Oe=this.tiles[Ct]=Pt(se,oe,he,Ce,bt),this.tileCoords.push({z:oe,x:he,y:Ce}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,he,Ce,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));const rr=`z${oe}`;this.stats[rr]=(this.stats[rr]||0)+1,this.total++}if(Oe.source=se,$e==null){if(oe===bt.indexMaxZoom||Oe.numPoints<=bt.indexMaxPoints)continue}else{if(oe===bt.maxZoom||oe===$e)continue;if($e!=null){const rr=$e-oe;if(he!==We>>rr||Ce!==rt>>rr)continue}}if(Oe.source=null,se.length===0)continue;pt>1&&console.time("clipping");const Gt=.5*bt.buffer/bt.extent,cn=.5-Gt,Zt=.5+Gt,rn=1+Gt;let pn=null,ci=null,Jn=null,Hn=null,fn=st(se,Xe,he-Gt,he+Zt,0,Oe.minX,Oe.maxX,bt),$n=st(se,Xe,he+cn,he+rn,0,Oe.minX,Oe.maxX,bt);se=null,fn&&(pn=st(fn,Xe,Ce-Gt,Ce+Zt,1,Oe.minY,Oe.maxY,bt),ci=st(fn,Xe,Ce+cn,Ce+rn,1,Oe.minY,Oe.maxY,bt),fn=null),$n&&(Jn=st($n,Xe,Ce-Gt,Ce+Zt,1,Oe.minY,Oe.maxY,bt),Hn=st($n,Xe,Ce+cn,Ce+rn,1,Oe.minY,Oe.maxY,bt),$n=null),pt>1&&console.timeEnd("clipping"),He.push(pn||[],oe+1,2*he,2*Ce),He.push(ci||[],oe+1,2*he,2*Ce+1),He.push(Jn||[],oe+1,2*he+1,2*Ce),He.push(Hn||[],oe+1,2*he+1,2*Ce+1)}}getTile(se,oe,he){se=+se,oe=+oe,he=+he;const Ce=this.options,{extent:$e,debug:We}=Ce;if(se<0||se>24)return null;const rt=1<<se,He=gn(se,oe=oe+rt&rt-1,he);if(this.tiles[He])return ct(this.tiles[He],$e);We>1&&console.log("drilling down to z%d-%d-%d",se,oe,he);let bt,pt=se,Xe=oe,Ct=he;for(;!bt&&pt>0;)pt--,Xe>>=1,Ct>>=1,bt=this.tiles[gn(pt,Xe,Ct)];return bt&&bt.source?(We>1&&(console.log("found parent tile z%d-%d-%d",pt,Xe,Ct),console.time("drilling down")),this.splitTile(bt.source,pt,Xe,Ct,se,oe,he),We>1&&console.timeEnd("drilling down"),this.tiles[He]?ct(this.tiles[He],$e):null):null}}function gn(qe,se,oe){return 32*((1<<qe)*oe+se)+qe}function En(qe,se){return se?qe.properties[se]:qe.id}function Rn(qe,se){if(qe==null)return!0;if(qe.type==="Feature")return En(qe,se)!=null;if(qe.type==="FeatureCollection"){const oe=new Set;for(const he of qe.features){const Ce=En(he,se);if(Ce==null||oe.has(Ce))return!1;oe.add(Ce)}return!0}return!1}function Ni(qe,se){const oe=new Map;if(qe!=null)if(qe.type==="Feature")oe.set(En(qe,se),qe);else for(const he of qe.features)oe.set(En(he,se),he);return oe}class Yi extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,oe){return d._(this,void 0,void 0,function*(){const he=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ce=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!Ce)return null;const $e=new q(Ce.features);let We=fe($e);return We.byteOffset===0&&We.byteLength===We.buffer.byteLength||(We=new Uint8Array(We)),{vectorTile:$e,rawData:We.buffer}})}loadData(se){return d._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();const he=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.cM(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new be(function({superclusterOptions:We,clusterProperties:rt}){if(!rt||!We)return We;const He={},bt={},pt={accumulated:null,zoom:0},Xe={properties:null},Ct=Object.keys(rt);for(const Oe of Ct){const[Gt,cn]=rt[Oe],Zt=d.cT(cn),rn=d.cT(typeof Gt=="string"?[Gt,["accumulated"],["get",Oe]]:Gt);He[Oe]=Zt.value,bt[Oe]=rn.value}return We.map=Oe=>{Xe.properties=Oe;const Gt={};for(const cn of Ct)Gt[cn]=He[cn].evaluate(pt,Xe);return Gt},We.reduce=(Oe,Gt)=>{Xe.properties=Gt;for(const cn of Ct)pt.accumulated=Oe[cn],Oe[cn]=bt[cn].evaluate(pt,Xe)},We}(se)).load((yield this._pendingData).features):(Ce=yield this._pendingData,new ln(Ce,se.geojsonVtOptions)),this.loaded={};const $e={};if(he){const We=he.finish();We&&($e.resourceTiming={},$e.resourceTiming[se.source]=JSON.parse(JSON.stringify(We)))}return $e}catch($e){if(delete this._pendingRequest,d.cx($e))return{abandoned:!0};throw $e}var Ce})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const oe=this.loaded;return oe&&oe[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,oe){return d._(this,void 0,void 0,function*(){let he=yield this.loadGeoJSON(se,oe);if(delete this._pendingRequest,typeof he!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(B(he,!0),se.filter){const Ce=d.cT(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map(We=>`${We.key}: ${We.message}`).join(", "));he={type:"FeatureCollection",features:he.features.filter(We=>Ce.value.evaluate({zoom:0},We))}}return he})}loadGeoJSON(se,oe){return d._(this,void 0,void 0,function*(){const{promoteId:he}=se;if(se.request){const Ce=yield d.j(se.request,oe);return this._dataUpdateable=Rn(Ce.data,he)?Ni(Ce.data,he):void 0,Ce.data}if(typeof se.data=="string")try{const Ce=JSON.parse(se.data);return this._dataUpdateable=Rn(Ce,he)?Ni(Ce,he):void 0,Ce}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ce,$e,We){var rt,He,bt,pt;if($e.removeAll&&Ce.clear(),$e.remove)for(const Xe of $e.remove)Ce.delete(Xe);if($e.add)for(const Xe of $e.add){const Ct=En(Xe,We);Ct!=null&&Ce.set(Ct,Xe)}if($e.update)for(const Xe of $e.update){let Ct=Ce.get(Xe.id);if(Ct==null)continue;const Oe=!Xe.removeAllProperties&&(((rt=Xe.removeProperties)===null||rt===void 0?void 0:rt.length)>0||((He=Xe.addOrUpdateProperties)===null||He===void 0?void 0:He.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||Oe)&&(Ct=Object.assign({},Ct),Ce.set(Xe.id,Ct),Oe&&(Ct.properties=Object.assign({},Ct.properties))),Xe.newGeometry&&(Ct.geometry=Xe.newGeometry),Xe.removeAllProperties)Ct.properties={};else if(((bt=Xe.removeProperties)===null||bt===void 0?void 0:bt.length)>0)for(const Gt of Xe.removeProperties)Object.prototype.hasOwnProperty.call(Ct.properties,Gt)&&delete Ct.properties[Gt];if(((pt=Xe.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0)for(const{key:Gt,value:cn}of Xe.addOrUpdateProperties)Ct.properties[Gt]=cn}}(this._dataUpdateable,se.dataDiff,he),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class Ui{constructor(se){this.self=se,this.actor=new d.J(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(oe,he)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=he},this.self.addProtocol=d.cz,this.self.removeProtocol=d.cA,this.self.registerRTLTextPlugin=oe=>{d.cU.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,he)=>this._getDEMWorkerSource(oe,he.source).loadTile(he)),this.actor.registerMessageHandler("RDT",(oe,he)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,he.source).removeTile(he)})),this.actor.registerMessageHandler("GCEZ",(oe,he)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,he.type,he.source).getClusterExpansionZoom(he)})),this.actor.registerMessageHandler("GCC",(oe,he)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,he.type,he.source).getClusterChildren(he)})),this.actor.registerMessageHandler("GCL",(oe,he)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,he.type,he.source).getClusterLeaves(he)})),this.actor.registerMessageHandler("LD",(oe,he)=>this._getWorkerSource(oe,he.type,he.source).loadData(he)),this.actor.registerMessageHandler("GD",(oe,he)=>this._getWorkerSource(oe,he.type,he.source).getData()),this.actor.registerMessageHandler("LT",(oe,he)=>this._getWorkerSource(oe,he.type,he.source).loadTile(he)),this.actor.registerMessageHandler("RT",(oe,he)=>this._getWorkerSource(oe,he.type,he.source).reloadTile(he)),this.actor.registerMessageHandler("AT",(oe,he)=>this._getWorkerSource(oe,he.type,he.source).abortTile(he)),this.actor.registerMessageHandler("RMT",(oe,he)=>this._getWorkerSource(oe,he.type,he.source).removeTile(he)),this.actor.registerMessageHandler("RS",(oe,he)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][he.type]||!this.workerSources[oe][he.type][he.source])return;const Ce=this.workerSources[oe][he.type][he.source];delete this.workerSources[oe][he.type][he.source],Ce.removeSource!==void 0&&Ce.removeSource(he)})),this.actor.registerMessageHandler("RM",oe=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe]})),this.actor.registerMessageHandler("SR",(oe,he)=>d._(this,void 0,void 0,function*(){this.referrer=he})),this.actor.registerMessageHandler("SRPS",(oe,he)=>this._syncRTLPluginState(oe,he)),this.actor.registerMessageHandler("IS",(oe,he)=>d._(this,void 0,void 0,function*(){this.self.importScripts(he)})),this.actor.registerMessageHandler("SI",(oe,he)=>this._setImages(oe,he)),this.actor.registerMessageHandler("UL",(oe,he)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(he.layers,he.removedIds)})),this.actor.registerMessageHandler("SL",(oe,he)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(he)}))}_setImages(se,oe){return d._(this,void 0,void 0,function*(){this.availableImages[se]=oe;for(const he in this.workerSources[se]){const Ce=this.workerSources[se][he];for(const $e in Ce)Ce[$e].availableImages=oe}})}_syncRTLPluginState(se,oe){return d._(this,void 0,void 0,function*(){return yield d.cU.syncState(oe,this.self.importScripts)})}_getAvailableImages(se){let oe=this.availableImages[se];return oe||(oe=[]),oe}_getLayerIndex(se){let oe=this.layerIndexes[se];return oe||(oe=this.layerIndexes[se]=new a),oe}_getWorkerSource(se,oe,he){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][oe]||(this.workerSources[se][oe]={}),!this.workerSources[se][oe][he]){const Ce={sendAsync:($e,We)=>($e.targetMapId=se,this.actor.sendAsync($e,We))};switch(oe){case"vector":this.workerSources[se][oe][he]=new k(Ce,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][oe][he]=new Yi(Ce,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][oe][he]=new this.externalWorkerSourceTypes[oe](Ce,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][oe][he]}_getDEMWorkerSource(se,oe){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][oe]||(this.demWorkerSources[se][oe]=new A),this.demWorkerSources[se][oe]}}return d.i(self)&&(self.worker=new Ui(self)),Ui}),c("index",["exports","./shared"],function(d,a){var b="5.6.0";function C(){var v=new a.A(4);return a.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let w,k;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(v,t,o){const m=requestAnimationFrame(y=>{p(),t(y)}),{unsubscribe:p}=a.s(v.signal,"abort",()=>{p(),cancelAnimationFrame(m),o(a.c())},!1)},frameAsync(v){return new Promise((t,o)=>{this.frame(v,t,o)})},getImageData(v,t=0){return this.getImageCanvasContext(v).getImageData(-t,-t,v.width+2*t,v.height+2*t)},getImageCanvasContext(v){const t=window.document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return t.width=v.width,t.height=v.height,o.drawImage(v,0,0,v.width,v.height),o},resolveURL:v=>(w||(w=document.createElement("a")),w.href=v,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class I{static testProp(t){if(!I.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in I.docStyle)return t[o];return t[0]}static create(t,o,m){const p=window.document.createElement(t);return o!==void 0&&(p.className=o),m&&m.appendChild(p),p}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(t,o){t.style[I.transformProp]=o}static addEventListener(t,o,m,p={}){t.addEventListener(o,m,"passive"in p?p:p.capture)}static removeEventListener(t,o,m,p={}){t.removeEventListener(o,m,"passive"in p?p:p.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(t){const o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}static getPoint(t,o,m){const p=o.boundingClientRect;return new a.P((m.clientX-p.left)/o.x-t.clientLeft,(m.clientY-p.top)/o.y-t.clientTop)}static mousePos(t,o){const m=I.getScale(t);return I.getPoint(t,m,o)}static touchPos(t,o){const m=[],p=I.getScale(t);for(let y=0;y<o.length;y++)m.push(I.getPoint(t,p,o[y]));return m}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const o=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),m=o.querySelectorAll("script");for(const p of m)p.remove();return I.clean(o),o.innerHTML}static isPossiblyDangerous(t,o){const m=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!m.includes("javascript:")&&!m.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const o=t.children;for(const m of o)I.removeAttributes(m),I.clean(m)}static removeAttributes(t){for(const{name:o,value:m}of t.attributes)I.isPossiblyDangerous(o,m)&&t.removeAttribute(o)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!$&&B&&(O?q(v):F=v)}};let F,B,$=!1,O=!1;function q(v){const t=v.createTexture();v.bindTexture(v.TEXTURE_2D,t);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,B),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(t),$=!0}var X;typeof document<"u"&&(B=document.createElement("img"),B.onload=()=>{F&&q(F),F=null,O=!0},B.onerror=()=>{$=!0,F=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let t,o,m,p;v.resetRequestQueue=()=>{t=[],o=0,m=0,p={}},v.addThrottleControl=M=>{const L=m++;return p[L]=M,L},v.removeThrottleControl=M=>{delete p[M],S()},v.getImage=(M,L,V=!0)=>new Promise((U,N)=>{R.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),a.e(M,{type:"image"}),t.push({abortController:L,requestParameters:M,supportImageRefresh:V,state:"queued",onError:W=>{N(W)},onSuccess:W=>{U(W)}}),S()});const y=M=>a._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:L,supportImageRefresh:V,onError:U,onSuccess:N,abortController:W}=M,Q=V===!1&&!a.i(self)&&!a.g(L.url)&&(!L.headers||Object.keys(L.headers).reduce((ye,we)=>ye&&we==="accept",!0));o++;const ve=Q?P(L,W):a.m(L,W);try{const ye=yield ve;delete M.abortController,M.state="completed",ye.data instanceof HTMLImageElement||a.b(ye.data)?N(ye):ye.data&&N({data:yield(ge=ye.data,typeof createImageBitmap=="function"?a.f(ge):a.h(ge)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete M.abortController,U(ye)}finally{o--,S()}var ge}),S=()=>{const M=(()=>{for(const L of Object.keys(p))if(p[L]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=o;L<M&&t.length>0;L++){const V=t.shift();V.abortController.signal.aborted?L--:y(V)}},P=(M,L)=>new Promise((V,U)=>{const N=new Image,W=M.url,Q=M.credentials;Q&&Q==="include"?N.crossOrigin="use-credentials":(Q&&Q==="same-origin"||!a.d(W))&&(N.crossOrigin="anonymous"),L.signal.addEventListener("abort",()=>{N.src="",U(a.c())}),N.fetchPriority="high",N.onload=()=>{N.onerror=N.onload=null,V({data:N})},N.onerror=()=>{N.onerror=N.onload=null,L.signal.aborted||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},N.src=W})}(X||(X={})),X.resetRequestQueue();class te{constructor(t){this._transformRequestFn=t}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function ae(v){const t=[];if(typeof v=="string")t.push({id:"default",url:v});else if(v&&v.length>0){const o=[];for(const{id:m,url:p}of v){const y=`${m}${p}`;o.indexOf(y)===-1&&(o.push(y),t.push({id:m,url:p}))}}return t}function ue(v,t,o){try{const m=new URL(v);return m.pathname+=`${t}${o}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ce(v){const{userImage:t}=v;return!!(t&&t.render&&t.render())&&(v.data.replace(new Uint8Array(t.data.buffer)),!0)}class fe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,promiseResolve:m}of this.requestors)m(this._getImagesForIds(o));this.requestors=[]}}getImage(t){const o=this.images[t];if(o&&!o.data&&o.spriteData){const m=o.spriteData;o.data=new a.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),o.spriteData=null}return o}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let m=!0;const p=o.data||o.spriteData;return this._validateStretch(o.stretchX,p&&p.width)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchX" value`))),m=!1),this._validateStretch(o.stretchY,p&&p.height)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchY" value`))),m=!1),this._validateContent(o.content,o)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "content" value`))),m=!1),m}_validateStretch(t,o){if(!t)return!0;let m=0;for(const p of t){if(p[0]<m||p[1]<p[0]||o<p[1])return!1;m=p[1]}return!0}_validateContent(t,o){if(!t)return!0;if(t.length!==4)return!1;const m=o.spriteData,p=m&&m.width||o.data.width,y=m&&m.height||o.data.height;return!(t[0]<0||p<t[0]||t[1]<0||y<t[1]||t[2]<0||p<t[2]||t[3]<0||y<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,o,m=!0){const p=this.getImage(t);if(m&&(p.data.width!==o.data.width||p.data.height!==o.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=p.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((o,m)=>{let p=!0;if(!this.isLoaded())for(const y of t)this.images[y]||(p=!1);this.isLoaded()||p?o(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:o})})}_getImagesForIds(t){const o={};for(const m of t){let p=this.getImage(m);p||(this.fire(new a.l("styleimagemissing",{id:m})),p=this.getImage(m)),p?o[m]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:a.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],m=this.getImage(t);if(!m)return null;if(o&&o.position.version===m.version)return o.position;if(o)o.position.version=m.version;else{const p={w:m.data.width+2,h:m.data.height+2,x:0,y:0},y=new a.I(p,m);this.patterns[t]={bin:p,position:y}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const y in this.patterns)t.push(this.patterns[y].bin);const{w:o,h:m}=a.p(t),p=this.atlasImage;p.resize({width:o||1,height:m||1});for(const y in this.patterns){const{bin:S}=this.patterns[y],P=S.x+1,M=S.y+1,L=this.getImage(y).data,V=L.width,U=L.height;a.R.copy(L,p,{x:0,y:0},{x:P,y:M},{width:V,height:U}),a.R.copy(L,p,{x:0,y:U-1},{x:P,y:M-1},{width:V,height:1}),a.R.copy(L,p,{x:0,y:0},{x:P,y:M+U},{width:V,height:1}),a.R.copy(L,p,{x:V-1,y:0},{x:P-1,y:M},{width:1,height:U}),a.R.copy(L,p,{x:0,y:0},{x:P+V,y:M},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const m=this.getImage(o);m||a.w(`Image with ID: "${o}" was not found`),ce(m)&&this.updateImage(o,m)}}}const pe=1e20;function _e(v,t,o,m,p,y,S,P,M){for(let L=t;L<t+m;L++)re(v,o*y+L,y,p,S,P,M);for(let L=o;L<o+p;L++)re(v,L*y+t,1,m,S,P,M)}function re(v,t,o,m,p,y,S){y[0]=0,S[0]=-1e20,S[1]=pe,p[0]=v[t];for(let P=1,M=0,L=0;P<m;P++){p[P]=v[t+P*o];const V=P*P;do{const U=y[M];L=(p[P]-p[U]+V-U*U)/(P-U)/2}while(L<=S[M]&&--M>-1);M++,y[M]=P,S[M]=L,S[M+1]=pe}for(let P=0,M=0;P<m;P++){for(;S[M+1]<P;)M++;const L=y[M],V=P-L;v[t+P*o]=p[L]+V*V}}class be{constructor(t,o){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return a._(this,void 0,void 0,function*(){const o=[];for(const y in t)for(const S of t[y])o.push(this._getAndCacheGlyphsPromise(y,S));const m=yield Promise.all(o),p={};for(const{stack:y,id:S,glyph:P}of m)p[y]||(p[y]={}),p[y][S]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return p})}_getAndCacheGlyphsPromise(t,o){return a._(this,void 0,void 0,function*(){let m=this.entries[t];m||(m=this.entries[t]={glyphs:{},requests:{},ranges:{}});let p=m.glyphs[o];if(p!==void 0)return{stack:t,id:o,glyph:p};if(p=this._tinySDF(m,t,o),p)return m.glyphs[o]=p,{stack:t,id:o,glyph:p};const y=Math.floor(o/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[y])return{stack:t,id:o,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[y]){const P=be.loadGlyphRange(t,y,this.url,this.requestManager);m.requests[y]=P}const S=yield m.requests[y];for(const P in S)this._doesCharSupportLocalGlyph(+P)||(m.glyphs[+P]=S[+P]);return m.ranges[y]=!0,{stack:t,id:o,glyph:S[o]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))||a.u["CJK Unified Ideographs"](t)||a.u["Hangul Syllables"](t)||a.u.Hiragana(t)||a.u.Katakana(t)||a.u["CJK Symbols and Punctuation"](t)||a.u["Halfwidth and Fullwidth Forms"](t))}_tinySDF(t,o,m){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(m))return;let y=t.tinySDF;if(!y){let P="400";/bold/i.test(o)?P="900":/medium/i.test(o)?P="500":/light/i.test(o)&&(P="200"),y=t.tinySDF=new be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:P})}const S=y.draw(String.fromCharCode(m));return{id:m,bitmap:new a.q({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}be.loadGlyphRange=function(v,t,o,m){return a._(this,void 0,void 0,function*(){const p=256*t,y=p+255,S=m.transformRequest(o.replace("{fontstack}",v).replace("{range}",`${p}-${y}`),"Glyphs"),P=yield a.n(S,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${t}, ${p}-${y}`);const M={};for(const L of a.o(P.data))M[L.id]=L;return M})},be.TinySDF=class{constructor({fontSize:v=24,buffer:t=3,radius:o=8,cutoff:m=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:S="normal"}={}){this.buffer=t,this.cutoff=m,this.radius=o;const P=this.size=v+4*t,M=this._createCanvas(P),L=this.ctx=M.getContext("2d",{willReadFrequently:!0});L.font=`${S} ${y} ${v}px ${p}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(v){const t=document.createElement("canvas");return t.width=t.height=v,t}draw(v){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:m,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(v),S=Math.ceil(o),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-p))),M=Math.min(this.size-this.buffer,S+Math.ceil(m)),L=P+2*this.buffer,V=M+2*this.buffer,U=Math.max(L*V,0),N=new Uint8ClampedArray(U),W={data:N,width:L,height:V,glyphWidth:P,glyphHeight:M,glyphTop:S,glyphLeft:0,glyphAdvance:t};if(P===0||M===0)return W;const{ctx:Q,buffer:ve,gridInner:ge,gridOuter:ye}=this;Q.clearRect(ve,ve,P,M),Q.fillText(v,ve,ve+S);const we=Q.getImageData(ve,ve,P,M);ye.fill(pe,0,U),ge.fill(0,0,U);for(let Ie=0;Ie<M;Ie++)for(let Te=0;Te<P;Te++){const De=we.data[4*(Ie*P+Te)+3]/255;if(De===0)continue;const Ve=(Ie+ve)*L+Te+ve;if(De===1)ye[Ve]=0,ge[Ve]=pe;else{const ke=.5-De;ye[Ve]=ke>0?ke*ke:0,ge[Ve]=ke<0?ke*ke:0}}_e(ye,0,0,L,V,L,this.f,this.v,this.z),_e(ge,ve,ve,P,M,L,this.f,this.v,this.z);for(let Ie=0;Ie<U;Ie++){const Te=Math.sqrt(ye[Ie])-Math.sqrt(ge[Ie]);N[Ie]=Math.round(255-255*(Te/this.radius+this.cutoff))}return W}};class je{constructor(){this.specification=a.v.light.position}possiblyEvaluate(t,o){return a.B(t.expression.evaluate(o))}interpolate(t,o,m){return{x:a.C.number(t.x,o.x,m),y:a.C.number(t.y,o.y,m),z:a.C.number(t.z,o.z,m)}}}let Be;class Fe extends a.E{constructor(t){super(),Be=Be||new a.r({anchor:new a.D(a.v.light.anchor),position:new je,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(Be),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(a.x,t,o))for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m){return(!m||m.validate!==!1)&&a.y(this,t.call(a.z,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Ke=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class ft extends a.E{constructor(t){super(),this._transitionable=new a.t(Ke),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(t,o={}){if(!this._validate(a.G,t,o)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m={}){return(m==null?void 0:m.validate)!==!1&&a.y(this,t.call(a.z,a.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class mt{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const m=t.join(",")+String(o);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(t,o)),this.dashEntry[m]}getDashRanges(t,o,m){const p=[];let y=t.length%2==1?-t[t.length-1]*m:0,S=t[0]*m,P=!0;p.push({left:y,right:S,isDash:P,zeroLength:t[0]===0});let M=t[0];for(let L=1;L<t.length;L++){P=!P;const V=t[L];y=M*m,M+=V,S=M*m,p.push({left:y,right:S,isDash:P,zeroLength:V===0})}return p}addRoundDash(t,o,m){const p=o/2;for(let y=-m;y<=m;y++){const S=this.width*(this.nextRow+m+y);let P=0,M=t[P];for(let L=0;L<this.width;L++){L/M.right>1&&(M=t[++P]);const V=Math.abs(L-M.left),U=Math.abs(L-M.right),N=Math.min(V,U);let W;const Q=y/m*(p+1);if(M.isDash){const ve=p-Math.abs(Q);W=Math.sqrt(N*N+ve*ve)}else W=p-Math.sqrt(N*N+Q*Q);this.data[S+L]=Math.max(0,Math.min(255,W+128))}}}addRegularDash(t){for(let P=t.length-1;P>=0;--P){const M=t[P],L=t[P+1];M.zeroLength?t.splice(P,1):L&&L.isDash===M.isDash&&(L.left=M.left,t.splice(P,1))}const o=t[0],m=t[t.length-1];o.isDash===m.isDash&&(o.left=m.left-this.width,m.right=o.right+this.width);const p=this.width*this.nextRow;let y=0,S=t[y];for(let P=0;P<this.width;P++){P/S.right>1&&(S=t[++y]);const M=Math.abs(P-S.left),L=Math.abs(P-S.right),V=Math.min(M,L);this.data[p+P]=Math.max(0,Math.min(255,(S.isDash?V:-V)+128))}}addDash(t,o){const m=o?7:0,p=2*m+1;if(this.nextRow+p>this.height)return a.w("LineAtlas out of space"),null;let y=0;for(let P=0;P<t.length;P++)y+=t[P];if(y!==0){const P=this.width/y,M=this.getDashRanges(t,this.width,P);o?this.addRoundDash(M,P,m):this.addRegularDash(M)}const S={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:y};return this.nextRow+=p,this.dirty=!0,S}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const ze="maplibre_preloaded_worker_pool";class Se{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Se.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ze]}numActive(){return Object.keys(this.active).length}}const Me=Math.floor(A.hardwareConcurrency/2);let Qe,Ft;function Tt(){return Qe||(Qe=new Se),Qe}Se.workerCount=a.H(globalThis)?Math.max(Math.min(Me,3),1):1;class xt{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o;const m=this.workerPool.acquire(o);for(let p=0;p<m.length;p++){const y=new a.J(m[p],o);y.name=`Worker ${p}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o){const m=[];for(const p of this.actors)m.push(p.sendAsync({type:t,data:o}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,o){for(const m of this.actors)m.registerMessageHandler(t,o)}}function Re(){return Ft||(Ft=new xt(Tt(),a.K),Ft.registerMessageHandler("GR",(v,t,o)=>a.m(t,o))),Ft}function vt(v,t){const o=a.L();return a.M(o,o,[1,1,0]),a.N(o,o,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?a.O(o,o,v.calculatePosMatrix(t.toUnwrapped())):o}function st(v,t,o,m,p,y,S){var P;const M=function(N,W,Q){if(N)for(const ve of N){const ge=W[ve];if(ge&&ge.source===Q&&ge.type==="fill-extrusion")return!0}else for(const ve in W){const ge=W[ve];if(ge.source===Q&&ge.type==="fill-extrusion")return!0}return!1}((P=p==null?void 0:p.layers)!==null&&P!==void 0?P:null,t,v.id),L=y.maxPitchScaleFactor(),V=v.tilesIn(m,L,M);V.sort(Ye);const U=[];for(const N of V)U.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(t,o,v._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,p,y,L,vt(v.transform,N.tileID),S?(W,Q)=>S(N.tileID,W,Q):void 0)});return function(N,W){for(const Q in N)for(const ve of N[Q])St(ve,W);return N}(function(N){const W={},Q={};for(const ve of N){const ge=ve.queryResults,ye=ve.wrappedTileID,we=Q[ye]=Q[ye]||{};for(const Ie in ge){const Te=ge[Ie],De=we[Ie]=we[Ie]||{},Ve=W[Ie]=W[Ie]||[];for(const ke of Te)De[ke.featureIndex]||(De[ke.featureIndex]=!0,Ve.push(ke))}}return W}(U),v)}function Ye(v,t){const o=v.tileID,m=t.tileID;return o.overscaledZ-m.overscaledZ||o.canonical.y-m.canonical.y||o.wrap-m.wrap||o.canonical.x-m.canonical.x}function St(v,t){const o=v.feature,m=t.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=m}function ie(v,t,o){return a._(this,void 0,void 0,function*(){let m=v;if(v.url?m=(yield a.j(t.transformRequest(v.url,"Source"),o)).data:yield A.frameAsync(o),!m)return null;const p=a.Q(a.e(m,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(p.vectorLayerIds=m.vector_layers.map(y=>y.id)),p})}class le{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof a.S?new a.S(t.lng,t.lat):a.S.convert(t),this}setSouthWest(t){return this._sw=t instanceof a.S?new a.S(t.lng,t.lat):a.S.convert(t),this}extend(t){const o=this._sw,m=this._ne;let p,y;if(t instanceof a.S)p=t,y=t;else{if(!(t instanceof le))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(le.convert(t)):this.extend(a.S.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(a.S.convert(t)):this;if(p=t._sw,y=t._ne,!p||!y)return this}return o||m?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),m.lng=Math.max(y.lng,m.lng),m.lat=Math.max(y.lat,m.lat)):(this._sw=new a.S(p.lng,p.lat),this._ne=new a.S(y.lng,y.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:m}=a.S.convert(t);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&p}static convert(t){return t instanceof le?t:t&&new le(t)}static fromLngLat(t,o=0){const m=360*o/40075017,p=m/Math.cos(Math.PI/180*t.lat);return new le(new a.S(t.lng-p,t.lat-m),new a.S(t.lng+p,t.lat+m))}adjustAntiMeridian(){const t=new a.S(this._sw.lng,this._sw.lat),o=new a.S(this._ne.lng,this._ne.lat);return new le(t,t.lng>o.lng?new a.S(o.lng+360,o.lat):o)}}class Le{constructor(t,o,m){this.bounds=le.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=m||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),m=Math.floor(a.V(this.bounds.getWest())*o),p=Math.floor(a.U(this.bounds.getNorth())*o),y=Math.ceil(a.V(this.bounds.getEast())*o),S=Math.ceil(a.U(this.bounds.getSouth())*o);return t.x>=m&&t.x<y&&t.y>=p&&t.y<S}}class Ze extends a.E{constructor(t,o,m,p){if(super(),this.id=t,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(o,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(a.e(this,t),t.bounds&&(this.tileBounds=new Le(t.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new a.k(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(o,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};m.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((y,S)=>{t.reloadPromise={resolve:y,reject:S}})}else t.actor=this.dispatcher.getActor(),p="LT";t.abortController=new AbortController;try{const y=yield t.actor.sendAsync({type:p,data:m},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,y)}catch(y){if(delete t.abortController,t.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,o){if(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),t.reloadPromise){const m=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(m.resolve).catch(m.reject)}}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ut extends a.E{constructor(t,o,m,p){super(),this.id=t,this.dispatcher=m,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},o),a.e(this,a.Q(o,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(t=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(a.e(this,o),o.bounds&&(this.tileBounds=new Le(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(o){this._tileJSONRequest=null,this.fire(new a.k(o))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return a.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const m=yield X.getImage(this.map._requestManager.transformRequest(o,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&t.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const p=this.map.painter.context,y=p.gl,S=m.data;t.texture=this.map.painter.getTileTexture(S.width),t.texture?t.texture.update(S,{useMipmap:!0}):(t.texture=new a.T(p,S,y.RGBA,{useMipmap:!0}),t.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(m){if(delete t.abortController,t.aborted)t.state="unloaded";else if(m)throw t.state="errored",m}})}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class Je extends ut{constructor(t,o,m,p){super(t,o,m,p),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(o,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const p=yield X.getImage(m,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){const y=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const S=a.b(y)&&a.W()?y:yield this.readImageNow(y),P={type:this.type,uid:t.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const M=yield t.actor.sendAsync({type:"LDT",data:P});t.dem=M,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}})}readImageNow(t){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.X()){const o=t.width+2,m=t.height+2;try{return new a.R({width:o,height:m},yield a.Y(t,-1,-1,o,m))}catch{}}return A.getImageData(t,1)})}_getNeighboringTiles(t){const o=t.canonical,m=Math.pow(2,o.z),p=(o.x-1+m)%m,y=o.x===0?t.wrap-1:t.wrap,S=(o.x+1+m)%m,P=o.x+1===m?t.wrap+1:t.wrap,M={};return M[new a.Z(t.overscaledZ,y,o.z,p,o.y).key]={backfilled:!1},M[new a.Z(t.overscaledZ,P,o.z,S,o.y).key]={backfilled:!1},o.y>0&&(M[new a.Z(t.overscaledZ,y,o.z,p,o.y-1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,P,o.z,S,o.y-1).key]={backfilled:!1}),o.y+1<m&&(M[new a.Z(t.overscaledZ,y,o.z,p,o.y+1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,P,o.z,S,o.y+1).key]={backfilled:!1}),M}unloadTile(t){return a._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class kt extends a.E{constructor(t,o,m,p){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(p),this._data=o.data,this._options=a.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(o.clusterMaxZoom),minPoints:Math.max(2,o.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(t){return t*(a.$/this.tileSize)}_getClusterMaxZoom(t){const o=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${o}"`),o}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return a._(this,void 0,void 0,function*(){const t=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}getCoordinatesFromGeometry(t){return t.type==="GeometryCollection"?t.geometries.map(o=>o.coordinates).flat(1/0):t.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const t=new le,o=yield this.getData();let m;switch(o.type){case"FeatureCollection":m=o.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":m=this.getCoordinatesFromGeometry(o.geometry);break;default:m=this.getCoordinatesFromGeometry(o)}if(m.length==0)return t;for(let p=0;p<m.length-1;p+=2)t.extend([m[p],m[p+1]]);return t})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,o,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:o,offset:m}})}_updateWorkerData(t){return a._(this,void 0,void 0,function*(){const o=a.e({type:this.type},this.workerOptions);t?o.dataDiff=t:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const m=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let p=null;m.resourceTiming&&m.resourceTiming[this.id]&&(p=m.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&a.e(y,{resourceTiming:p}),this.fire(new a.l("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(m))}})}loaded(){return this._pendingLoads===0}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.actor?"RT":"LT";t.actor=this.actor;const m={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};t.abortController=new AbortController;const p=yield this.actor.sendAsync({type:o,data:m},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(p,this.map.painter,o==="RT")})}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ct extends a.E{constructor(t,o,m,p){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=m,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=o}load(t){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,t&&(this.coordinates=t),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new a.k(o))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const o=t.map(a.a0.fromLngLat);var m;return this.tileID=function(p){const y=a.a1.fromPoints(p),S=y.width(),P=y.height(),M=Math.max(S,P),L=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),V=Math.pow(2,L);return new a.a3(L,Math.floor((y.minX+y.maxX)/2*V),Math.floor((y.minY+y.maxY)/2*V))}(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.texture||(this.texture=new a.T(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:o,minY:m,maxX:p,maxY:y}=a.a1.fromPoints(t),S={};for(let P=0;P<=a.a2;P++){const M=Math.pow(2,P),L=Math.floor(o*M),V=Math.floor(m*M),U=Math.floor(p*M),N=Math.floor(y*M);S[P]={minTileX:L,minTileY:V,maxTileX:U,maxTileY:N}}return S}}class Dt extends ct{constructor(t,o,m,p){super(t,o,m,p),this.roundZoom=!0,this.type="video",this.options=o}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield a.a4(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new a.k(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new a.k(new a.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Pt extends ct{constructor(t,o,m,p){super(t,o,m,p),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(S=>typeof S!="number"))||this.fire(new a.k(new a.a5(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a5(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new a.k(new a.a5(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a5(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a5(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,m=o.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(o,this.canvas,m.RGBA,{premultiply:!0});let p=!1;for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const nn={},Ut=v=>{switch(v){case"geojson":return kt;case"image":return ct;case"raster":return ut;case"raster-dem":return Je;case"vector":return Ze;case"video":return Dt;case"canvas":return Pt}return nn[v]},Jt="RTLPluginLoaded";class ln extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Re()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return a._(this,arguments,void 0,function*(o,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Jt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let gn=null;function En(){return gn||(gn=new ln),gn}class Rn{constructor(t,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=a.a6(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const o=t+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,o,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(p,y){const S={};if(!y)return S;for(const P of p){const M=P.layerIds.map(L=>y.getLayer(L)).filter(Boolean);if(M.length!==0){P.layers=M,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(L=>M.filter(V=>V.id===L)[0]));for(const L of M)S[L.id]=P}}return S}(t.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof a.a8){if(this.hasSymbolBuckets=!0,!m)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof a.a8&&y.hasRTLText){this.hasRTLText=!0,En().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(y))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new a.a7}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const m in this.buckets){const p=this.buckets[m];p.uploadPending()&&p.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,m,p,y,S,P,M,L,V,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:y,scale:S,tileSize:this.tileSize,pixelPosMatrix:V,transform:M,params:P,queryPadding:this.queryPadding*L,getElevation:U},t,o,m):{}}querySourceFeatures(t,o){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const p=m.loadVTLayers(),y=o&&o.sourceLayer?o.sourceLayer:"",S=p._geojsonTileLayer||p[y];if(!S)return;const P=a.a9(o&&o.filter),{z:M,x:L,y:V}=this.tileID.canonical,U={z:M,x:L,y:V};for(let N=0;N<S.length;N++){const W=S.feature(N);if(P.needGeometry){const ge=a.aa(W,!0);if(!P.filter(new a.F(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!P.filter(new a.F(this.tileID.overscaledZ),W))continue;const Q=m.getId(W,y),ve=new a.ab(W,M,L,V,Q);ve.tile=U,t.push(ve)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const m=a.ac(t.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const m=Date.now();let p=!1;if(this.expirationTime>m)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const y=this.expirationTime-o;y?this.expirationTime=m+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!o.style.hasLayer(p))continue;const y=this.buckets[p],S=y.layers[0].sourceLayer||"_geojsonTileLayer",P=m[S],M=t[S];if(!P||!M||Object.keys(M).length===0)continue;y.update(M,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=o&&o.style&&o.style.getLayer(p);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=A.now()+t}setDependencies(t,o){const m={};for(const p of o)m[p]=!0;this.dependencies[t]=m}hasDependency(t,o){for(const m of t){const p=this.dependencies[m];if(p){for(const y of o)if(p[y])return!0}}return!1}}class Ni{constructor(t,o){this.max=t,this.onRemove=o,this.reset()}reset(){for(const t in this.data)for(const o of this.data[t])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(t,o,m){const p=t.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const y={value:o,timeout:void 0};if(m!==void 0&&(y.timeout=setTimeout(()=>{this.remove(t,y)},m)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const o=this.data[t].shift();return o.timeout&&clearTimeout(o.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),o.value}getByKey(t){const o=this.data[t];return o?o[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,o){if(!this.has(t))return this;const m=t.wrapped().key,p=o===void 0?0:this.data[m].indexOf(o),y=this.data[m][p];return this.data[m].splice(p,1),y.timeout&&clearTimeout(y.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(y.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(t){const o=[];for(const m in this.data)for(const p of this.data[m])t(p.value)||o.push(p);for(const m of o)this.remove(m.value.tileID,m)}}class Yi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,m){const p=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][p]=this.stateChanges[t][p]||{},a.e(this.stateChanges[t][p],m),this.deletedStates[t]===null){this.deletedStates[t]={};for(const y in this.state[t])y!==p&&(this.deletedStates[t][y]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][p]===null){this.deletedStates[t][p]={};for(const y in this.state[t][p])m[y]||(this.deletedStates[t][p][y]=null)}else for(const y in m)this.deletedStates[t]&&this.deletedStates[t][p]&&this.deletedStates[t][p][y]===null&&delete this.deletedStates[t][p][y]}removeFeatureState(t,o,m){if(this.deletedStates[t]===null)return;const p=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},m&&o!==void 0)this.deletedStates[t][p]!==null&&(this.deletedStates[t][p]=this.deletedStates[t][p]||{},this.deletedStates[t][p][m]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][p])for(m in this.deletedStates[t][p]={},this.stateChanges[t][p])this.deletedStates[t][p][m]=null;else this.deletedStates[t][p]=null;else this.deletedStates[t]=null}getState(t,o){const m=String(o),p=a.e({},(this.state[t]||{})[m],(this.stateChanges[t]||{})[m]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const y=this.deletedStates[t][o];if(y===null)return{};for(const S in y)delete p[S]}return p}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const m={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const S in this.stateChanges[p])this.state[p][S]||(this.state[p][S]={}),a.e(this.state[p][S],this.stateChanges[p][S]),y[S]=this.state[p][S];m[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(this.deletedStates[p]===null)for(const S in this.state[p])y[S]={},this.state[p][S]={};else for(const S in this.deletedStates[p]){if(this.deletedStates[p][S]===null)this.state[p][S]={};else for(const P of Object.keys(this.deletedStates[p][S]))delete this.state[p][S][P];y[S]=this.state[p][S]}m[p]=m[p]||{},a.e(m[p],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const p in t)t[p].setFeatureState(m,o)}}const Ui=89.25;function qe(v,t){const o=a.ag(t.lat,-85.051129,a.ah);return new a.P(a.V(t.lng)*v,a.U(o)*v)}function se(v,t){return new a.a0(t.x/v,t.y/v).toLngLat()}function oe(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-v.pitch)),Math.tan(a.ad(Ui-v.pitch)))}function he(v,t){const o=v.canonical,m=t/a.ae(o.z),p=o.x+Math.pow(2,o.z)*v.wrap,y=a.af(new Float64Array(16));return a.M(y,y,[p*m,o.y*m,0]),a.N(y,y,[m/a.$,m/a.$,1]),y}function Ce(v,t,o,m,p){const y=a.a0.fromLngLat(v,t),S=p*a.ai(1,v.lat),P=S*Math.cos(a.ad(o)),M=Math.sqrt(S*S-P*P),L=M*Math.sin(a.ad(-m)),V=M*Math.cos(a.ad(-m));return new a.a0(y.x+L,y.y+V,y.z+P)}function $e(v,t,o){const m=t.intersectsFrustum(v);if(!o||m===0)return m;const p=t.intersectsPlane(o);return p===0?0:m===2&&p===2?2:1}function We(v,t,o){let m=0;const p=(o-t)/10;for(let y=0;y<10;y++)m+=p*Math.pow(Math.cos(t+(y+.5)/10*(o-t)),v);return m}function rt(v,t){return function(o,m,p,y,S){const P=2*((v-1)/a.aj(Math.cos(a.ad(Ui-S))/Math.cos(a.ad(Ui)))-1),M=Math.acos(p/y),L=2*We(P-1,0,a.ad(S/2)),V=Math.min(a.ad(Ui),M+a.ad(S/2)),U=We(P-1,Math.min(V,M-a.ad(S/2)),V),N=Math.atan(m/p),W=Math.hypot(m,p);let Q=o;return Q+=a.aj(y/W/Math.max(.5,Math.cos(a.ad(S/2)))),Q+=P*a.aj(Math.cos(N))/2,Q-=a.aj(Math.max(1,U/L/t))/2,Q}}const He=rt(9.314,3);function bt(v,t){const o=(t.roundZoom?Math.round:Math.floor)(v.zoom+a.aj(v.tileSize/t.tileSize));return Math.max(0,o)}function pt(v,t){const o=v.getCameraFrustum(),m=v.getClippingPlane(),p=v.screenPointToMercatorCoordinate(v.getCameraPoint()),y=a.a0.fromLngLat(v.center,v.elevation);p.z=y.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const S=v.getCoveringTilesDetailsProvider(),P=S.allowVariableZoom(v,t),M=bt(v,t),L=t.minzoom||0,V=t.maxzoom!==void 0?t.maxzoom:v.maxZoom,U=Math.min(Math.max(0,M),V),N=Math.pow(2,U),W=[N*p.x,N*p.y,0],Q=[N*y.x,N*y.y,0],ve=Math.hypot(y.x-p.x,y.y-p.y),ge=Math.abs(y.z-p.z),ye=Math.hypot(ve,ge),we=De=>({zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Ie=[],Te=[];if(v.renderWorldCopies&&S.allowWorldCopies())for(let De=1;De<=3;De++)Ie.push(we(-De)),Ie.push(we(De));for(Ie.push(we(0));Ie.length>0;){const De=Ie.pop(),Ve=De.x,ke=De.y;let Ge=De.fullyVisible;const at={x:Ve,y:ke,z:De.zoom},et=S.getTileBoundingVolume(at,De.wrap,v.elevation,t);if(!Ge){const Ot=$e(o,et,m);if(Ot===0)continue;Ge=Ot===2}const nt=S.distanceToTile2d(p.x,p.y,at,et);let ot=M;P&&(ot=(t.calculateTileZoom||He)(v.zoom+a.aj(v.tileSize/t.tileSize),nt,ge,ye,v.fov)),ot=(t.roundZoom?Math.round:Math.floor)(ot),ot=Math.max(0,ot);const $t=Math.min(ot,V);if(De.wrap=S.getWrap(y,at,De.wrap),De.zoom>=$t){if(De.zoom<L)continue;const Ot=U-De.zoom,At=W[0]-.5-(Ve<<Ot),Kt=W[1]-.5-(ke<<Ot),Tn=t.reparseOverscaled?Math.max(De.zoom,ot):De.zoom;Te.push({tileID:new a.Z(De.zoom===V?Tn:De.zoom,De.wrap,De.zoom,Ve,ke),distanceSq:a.ak([Q[0]-.5-Ve,Q[1]-.5-ke]),tileDistanceToCamera:Math.sqrt(At*At+Kt*Kt)})}else for(let Ot=0;Ot<4;Ot++)Ie.push({zoom:De.zoom+1,x:(Ve<<1)+Ot%2,y:(ke<<1)+(Ot>>1),wrap:De.wrap,fullyVisible:Ge})}return Te.sort((De,Ve)=>De.distanceSq-Ve.distanceSq).map(De=>De.tileID)}const Xe=a.a1.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Ct extends a.E{constructor(t,o,m){super(),this.id=t,this.dispatcher=m,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,y,S,P)=>{const M=new(Ut(y.type))(p,y,S,P);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(t,o,m,this),this._tiles={},this._cache=new Ni(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Yi,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const o=this._tiles[t];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o,m){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,o,m)}catch(p){t.state="errored",p.status!==404?this._source.fire(new a.k(p,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new a.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const m=this._tiles[o];m.upload(t),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(Oe).map(t=>t.key)}getRenderableIds(t){const o=[];for(const m in this._tiles)this._isIdRenderable(m,t)&&o.push(this._tiles[m]);return t?o.sort((m,p)=>{const y=m.tileID,S=p.tileID,P=new a.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),M=new a.P(S.canonical.x,S.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-S.overscaledZ||M.y-P.y||M.x-P.x}).map(m=>m.tileID.key):o.map(m=>m.tileID).sort(Oe).map(m=>m.key)}hasRenderableParent(t){const o=this.findLoadedParent(t,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(t,o){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(o||!this._tiles[t].holdingForFade())}reload(t){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)t?this._reloadTile(o,"expired"):this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(t,o){return a._(this,void 0,void 0,function*(){const m=this._tiles[t];m&&(m.state!=="loading"&&(m.state=o),yield this._loadTile(m,t,o))})}_tileLoaded(t,o,m){t.timeAdded=A.now(),m==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const o=this.getRenderableIds();for(let p=0;p<o.length;p++){const y=o[p];if(t.neighboringTiles&&t.neighboringTiles[y]){const S=this.getTileByID(y);m(t,S),m(S,t)}}function m(p,y){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let S=y.tileID.canonical.x-p.tileID.canonical.x;const P=y.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),L=y.tileID.key;S===0&&P===0||Math.abs(P)>1||(Math.abs(S)>1&&(Math.abs(S+M)===1?S+=M:Math.abs(S-M)===1&&(S-=M)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,S,P),p.neighboringTiles&&p.neighboringTiles[L]&&(p.neighboringTiles[L].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,o,m,p){for(const y in this._tiles){let S=this._tiles[y];if(p[y]||!S.hasData()||S.tileID.overscaledZ<=o||S.tileID.overscaledZ>m)continue;let P=S.tileID;for(;S&&S.tileID.overscaledZ>o+1;){const L=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[L.key],S&&S.hasData()&&(P=L)}let M=P;for(;M.overscaledZ>o;)if(M=M.scaledTo(M.overscaledZ-1),t[M.key]||t[M.canonical.key]){p[P.key]=P;break}}}findLoadedParent(t,o){if(t.key in this._loadedParentTiles){const m=this._loadedParentTiles[t.key];return m&&m.tileID.overscaledZ>=o?m:null}for(let m=t.overscaledZ-1;m>=o;m--){const p=t.scaledTo(m),y=this._getLoadedTile(p);if(y)return y}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const o=this._tiles[t.key];return o&&o.hasData()?o:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,m=Math.ceil(t.height/this._source.tileSize)+1,p=Math.floor(o*m*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(y)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,o){const m={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+o),m[y.tileID.key]=y}this._tiles=m;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(t,o,m,p,y,S){const P={},M={},L=Object.keys(t),V=A.now();for(const U of L){const N=t[U],W=this._tiles[U];if(!W||W.fadeEndTime!==0&&W.fadeEndTime<=V)continue;const Q=this.findLoadedParent(N,o),ve=this.findLoadedSibling(N),ge=Q||ve||null;ge&&(this._addTile(ge.tileID),P[ge.tileID.key]=ge.tileID),M[U]=N}this._retainLoadedChildren(M,p,m,t);for(const U in P)t[U]||(this._coveredTiles[U]=!0,t[U]=P[U]);if(S){const U={},N={};for(const W of y)this._tiles[W.key].hasData()?U[W.key]=W:N[W.key]=W;for(const W in N){const Q=N[W].children(this._source.maxzoom);this._tiles[Q[0].key]&&this._tiles[Q[1].key]&&this._tiles[Q[2].key]&&this._tiles[Q[3].key]&&(U[Q[0].key]=t[Q[0].key]=Q[0],U[Q[1].key]=t[Q[1].key]=Q[1],U[Q[2].key]=t[Q[2].key]=Q[2],U[Q[3].key]=t[Q[3].key]=Q[3],delete N[W])}for(const W in N){const Q=N[W],ve=this.findLoadedParent(Q,this._source.minzoom),ge=this.findLoadedSibling(Q),ye=ve||ge||null;if(ye){U[ye.tileID.key]=t[ye.tileID.key]=ye.tileID;for(const we in U)U[we].isChildOf(ye.tileID)&&delete U[we]}}for(const W in this._tiles)U[W]||(this._coveredTiles[W]=!0)}}update(t,o){if(!this._sourceLoaded||this._paused)return;let m;this.transform=t,this.terrain=o,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new a.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(m=pt(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(V=>this._source.hasTile(V)))):m=[];const p=bt(t,this._source),y=Math.max(p-Ct.maxOverzooming,this._source.minzoom),S=Math.max(p+Ct.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const U of m)if(U.canonical.z>this._source.minzoom){const N=U.scaledTo(U.canonical.z-1);V[N.key]=N;const W=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));V[W.key]=W}m=m.concat(Object.values(V))}const P=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(m,p);Gt(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,S,p,m,o);for(const V in M)this._tiles[V].clearFadeHold();const L=a.al(this._tiles,M);for(const V of L){const U=this._tiles[V];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){var m;const p={},y={},S=Math.max(o-Ct.maxOverzooming,this._source.minzoom),P=Math.max(o+Ct.maxUnderzooming,this._source.minzoom),M={};for(const L of t){const V=this._addTile(L);p[L.key]=L,V.hasData()||o<this._source.maxzoom&&(M[L.key]=L)}this._retainLoadedChildren(M,o,P,p);for(const L of t){let V=this._tiles[L.key];if(V.hasData())continue;if(o+1>this._source.maxzoom){const N=L.children(this._source.maxzoom)[0],W=this.getTile(N);if(W&&W.hasData()){p[N.key]=N;continue}}else{const N=L.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let U=V.wasRequested();for(let N=L.overscaledZ-1;N>=S;--N){const W=L.scaledTo(N);if(y[W.key])break;if(y[W.key]=!0,V=this.getTile(W),!V&&U&&(V=this._addTile(W)),V){const Q=V.hasData();if((Q||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||U)&&(p[W.key]=W),U=V.wasRequested(),Q)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const o=[];let m,p=this._tiles[t].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){m=this._loadedParentTiles[p.key];break}o.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(m=this._getLoadedTile(y),m)break;p=y}for(const y of o)this._loadedParentTiles[y]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const o=this._tiles[t].tileID,m=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=m}}_addTile(t){let o=this._tiles[t.key];if(o)return o;o=this._cache.getAndRemove(t),o&&(this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,o)));const m=o;return o||(o=new Rn(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,t.key,o.state)),o.uses++,this._tiles[t.key]=o,m||this._source.fire(new a.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const m=o.getExpiryTimeout();m&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},m))}refreshTiles(t){for(const o in this._tiles)(this._isIdRenderable(o)||this._tiles[o].state=="errored")&&t.some(m=>m.equals(this._tiles[o].tileID.canonical))&&this._reloadTile(o,"expired")}_removeTile(t){const o=this._tiles[t];o&&(o.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(t){const o=t.sourceDataType;t.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&o==="content"&&(this.reload(t.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,o,m){const p=[],y=this.transform;if(!y)return p;const S=y.getCoveringTilesDetailsProvider().allowWorldCopies(),P=m?y.getCameraQueryGeometry(t):t,M=W=>y.screenPointToMercatorCoordinate(W,this.terrain),L=this.transformBbox(t,M,!S),V=this.transformBbox(P,M,!S),U=this.getIds(),N=a.a1.fromPoints(V);for(let W=0;W<U.length;W++){const Q=this._tiles[U[W]];if(Q.holdingForFade())continue;const ve=S?[Q.tileID]:[Q.tileID.unwrapTo(-1),Q.tileID.unwrapTo(0)],ge=Math.pow(2,y.zoom-Q.tileID.overscaledZ),ye=o*Q.queryPadding*a.$/Q.tileSize/ge;for(const we of ve){const Ie=N.map(Te=>we.getTilePoint(new a.a0(Te.x,Te.y)));if(Ie.expandBy(ye),Ie.intersects(Xe)){const Te=L.map(Ve=>we.getTilePoint(Ve)),De=V.map(Ve=>we.getTilePoint(Ve));p.push({tile:Q,tileID:S?we:we.unwrapTo(0),queryGeometry:Te,cameraQueryGeometry:De,scale:ge})}}}return p}transformBbox(t,o,m){let p=t.map(o);if(m){const y=a.a1.fromPoints(t);y.shrinkBy(.001*Math.min(y.width(),y.height()));const S=y.map(o);a.a1.fromPoints(p).covers(S)||(p=p.map(P=>P.x>.5?new a.a0(P.x-1,P.y,P.z):P))}return p}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map(m=>this._tiles[m].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(Gt(this._source.type)){const t=A.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=t)return!0}return!1}setFeatureState(t,o,m){this._state.updateState(t=t||"_geojsonTileLayer",o,m)}removeFeatureState(t,o,m){this._state.removeFeatureState(t=t||"_geojsonTileLayer",o,m)}getFeatureState(t,o){return this._state.getState(t=t||"_geojsonTileLayer",o)}setDependencies(t,o,m){const p=this._tiles[t];p&&p.setDependencies(o,m)}reloadTilesForDependencies(t,o){for(const m in this._tiles)this._tiles[m].hasDependency(t,o)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(t,o))}}function Oe(v,t){const o=Math.abs(2*v.wrap)-+(v.wrap<0),m=Math.abs(2*t.wrap)-+(t.wrap<0);return v.overscaledZ-t.overscaledZ||m-o||t.canonical.y-v.canonical.y||t.canonical.x-v.canonical.x}function Gt(v){return v==="raster"||v==="image"||v==="video"}Ct.maxOverzooming=10,Ct.maxUnderzooming=3;class cn{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=a.ag(t,0,1);let o=1,m=this._distances[o];const p=t*this.paddedLength+this.padding;for(;m<p&&o<this._distances.length;)m=this._distances[++o];const y=o-1,S=this._distances[y],P=m-S,M=P>0?(p-S)/P:0;return this.points[y].mult(1-M).add(this.points[o].mult(M))}}function Zt(v,t){let o=!0;return v==="always"||v!=="never"&&t!=="never"||(o=!1),o}class rn{constructor(t,o,m){const p=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(t/m),this.yCellCount=Math.ceil(o/m);for(let S=0;S<this.xCellCount*this.yCellCount;S++)p.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,m,p,y){this._forEachCell(o,m,p,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(m),this.bboxes.push(p),this.bboxes.push(y)}insertCircle(t,o,m,p){this._forEachCell(o-p,m-p,o+p,m+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(m),this.circles.push(p)}_insertBoxCell(t,o,m,p,y,S){this.boxCells[y].push(S)}_insertCircleCell(t,o,m,p,y,S){this.circleCells[y].push(S)}_query(t,o,m,p,y,S,P){if(m<0||t>this.width||p<0||o>this.height)return[];const M=[];if(t<=0&&o<=0&&this.width<=m&&this.height<=p){if(y)return[{key:null,x1:t,y1:o,x2:m,y2:p}];for(let L=0;L<this.boxKeys.length;L++)M.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const V=this.circles[3*L],U=this.circles[3*L+1],N=this.circles[3*L+2];M.push({key:this.circleKeys[L],x1:V-N,y1:U-N,x2:V+N,y2:U+N})}}else this._forEachCell(t,o,m,p,this._queryCell,M,{hitTest:y,overlapMode:S,seenUids:{box:{},circle:{}}},P);return M}query(t,o,m,p){return this._query(t,o,m,p,!1,null)}hitTest(t,o,m,p,y,S){return this._query(t,o,m,p,!0,y,S).length>0}hitTestCircle(t,o,m,p,y){const S=t-m,P=t+m,M=o-m,L=o+m;if(P<0||S>this.width||L<0||M>this.height)return!1;const V=[];return this._forEachCell(S,M,P,L,this._queryCellCircle,V,{hitTest:!0,overlapMode:p,circle:{x:t,y:o,radius:m},seenUids:{box:{},circle:{}}},y),V.length>0}_queryCell(t,o,m,p,y,S,P,M){const{seenUids:L,hitTest:V,overlapMode:U}=P,N=this.boxCells[y];if(N!==null){const Q=this.bboxes;for(const ve of N)if(!L.box[ve]){L.box[ve]=!0;const ge=4*ve,ye=this.boxKeys[ve];if(t<=Q[ge+2]&&o<=Q[ge+3]&&m>=Q[ge+0]&&p>=Q[ge+1]&&(!M||M(ye))&&(!V||!Zt(U,ye.overlapMode))&&(S.push({key:ye,x1:Q[ge],y1:Q[ge+1],x2:Q[ge+2],y2:Q[ge+3]}),V))return!0}}const W=this.circleCells[y];if(W!==null){const Q=this.circles;for(const ve of W)if(!L.circle[ve]){L.circle[ve]=!0;const ge=3*ve,ye=this.circleKeys[ve];if(this._circleAndRectCollide(Q[ge],Q[ge+1],Q[ge+2],t,o,m,p)&&(!M||M(ye))&&(!V||!Zt(U,ye.overlapMode))){const we=Q[ge],Ie=Q[ge+1],Te=Q[ge+2];if(S.push({key:ye,x1:we-Te,y1:Ie-Te,x2:we+Te,y2:Ie+Te}),V)return!0}}}return!1}_queryCellCircle(t,o,m,p,y,S,P,M){const{circle:L,seenUids:V,overlapMode:U}=P,N=this.boxCells[y];if(N!==null){const Q=this.bboxes;for(const ve of N)if(!V.box[ve]){V.box[ve]=!0;const ge=4*ve,ye=this.boxKeys[ve];if(this._circleAndRectCollide(L.x,L.y,L.radius,Q[ge+0],Q[ge+1],Q[ge+2],Q[ge+3])&&(!M||M(ye))&&!Zt(U,ye.overlapMode))return S.push(!0),!0}}const W=this.circleCells[y];if(W!==null){const Q=this.circles;for(const ve of W)if(!V.circle[ve]){V.circle[ve]=!0;const ge=3*ve,ye=this.circleKeys[ve];if(this._circlesCollide(Q[ge],Q[ge+1],Q[ge+2],L.x,L.y,L.radius)&&(!M||M(ye))&&!Zt(U,ye.overlapMode))return S.push(!0),!0}}}_forEachCell(t,o,m,p,y,S,P,M){const L=this._convertToXCellCoord(t),V=this._convertToYCellCoord(o),U=this._convertToXCellCoord(m),N=this._convertToYCellCoord(p);for(let W=L;W<=U;W++)for(let Q=V;Q<=N;Q++)if(y.call(this,t,o,m,p,this.xCellCount*Q+W,S,P,M))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,m,p,y,S){const P=p-t,M=y-o,L=m+S;return L*L>P*P+M*M}_circleAndRectCollide(t,o,m,p,y,S,P){const M=(S-p)/2,L=Math.abs(t-(p+M));if(L>M+m)return!1;const V=(P-y)/2,U=Math.abs(o-(y+V));if(U>V+m)return!1;if(L<=M||U<=V)return!0;const N=L-M,W=U-V;return N*N+W*W<=m*m}}function pn(v,t,o){const m=a.L();if(!v){const{vecSouth:U,vecEast:N}=Jn(t),W=C();W[0]=N[0],W[1]=N[1],W[2]=U[0],W[3]=U[1],p=W,(V=(S=(y=W)[0])*(L=y[3])-(M=y[2])*(P=y[1]))&&(p[0]=L*(V=1/V),p[1]=-P*V,p[2]=-M*V,p[3]=S*V),m[0]=W[0],m[1]=W[1],m[4]=W[2],m[5]=W[3]}var p,y,S,P,M,L,V;return a.N(m,m,[1/o,1/o,1]),m}function ci(v,t,o,m){if(v){const p=a.L();if(!t){const{vecSouth:y,vecEast:S}=Jn(o);p[0]=S[0],p[1]=S[1],p[4]=y[0],p[5]=y[1]}return a.N(p,p,[m,m,1]),p}return o.pixelsToClipSpaceMatrix}function Jn(v){const t=Math.cos(v.rollInRadians),o=Math.sin(v.rollInRadians),m=Math.cos(v.pitchInRadians),p=Math.cos(v.bearingInRadians),y=Math.sin(v.bearingInRadians),S=a.aq();S[0]=-p*m*o-y*t,S[1]=-y*m*o+p*t;const P=a.ar(S);P<1e-9?a.as(S):a.at(S,S,1/P);const M=a.aq();M[0]=p*m*t-y*o,M[1]=y*m*t+p*o;const L=a.ar(M);return L<1e-9?a.as(M):a.at(M,M,1/L),{vecEast:M,vecSouth:S}}function Hn(v,t,o,m){let p;m?(p=[v,t,m(v,t),1],a.av(p,p,o)):(p=[v,t,0,1],Xs(p,p,o));const y=p[3];return{point:new a.P(p[0]/y,p[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function fn(v,t){return .5+v/t*.5}function $n(v,t){return v.x>=-t[0]&&v.x<=t[0]&&v.y>=-t[1]&&v.y<=t[1]}function rr(v,t,o,m,p,y,S,P,M,L,V,U,N){const W=o?v.textSizeData:v.iconSizeData,Q=a.am(W,t.transform.zoom),ve=[256/t.width*2+1,256/t.height*2+1],ge=o?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ge.clear();const ye=v.lineVertexArray,we=o?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ie=t.transform.width/t.transform.height;let Te=!1;for(let De=0;De<we.length;De++){const Ve=we.get(De);if(Ve.hidden||Ve.writingMode===a.an.vertical&&!Te){ts(Ve.numGlyphs,ge);continue}Te=!1;const ke=new a.P(Ve.anchorX,Ve.anchorY),Ge={getElevation:N,pitchedLabelPlaneMatrix:m,lineVertexArray:ye,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:ke,unwrappedTileID:M,width:L,height:V,translation:U},at=In(Ve.anchorX,Ve.anchorY,Ge);if(!$n(at.point,ve)){ts(Ve.numGlyphs,ge);continue}const et=fn(t.transform.cameraToCenterDistance,at.signedDistanceFromCamera),nt=a.ao(W,Q,Ve),ot=y?nt*t.transform.getPitchedTextCorrection(Ve.anchorX,Ve.anchorY,M)/et:nt*et,$t=_i({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:p,symbol:Ve,fontSize:ot,flip:!1,keepUpright:S,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ie,rotateToLine:P});Te=$t.useVertical,($t.notEnoughRoom||Te||$t.needsFlipping&&_i({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:p,symbol:Ve,fontSize:ot,flip:!0,keepUpright:S,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ie,rotateToLine:P}).notEnoughRoom)&&ts(Ve.numGlyphs,ge)}o?v.text.dynamicLayoutVertexBuffer.updateData(ge):v.icon.dynamicLayoutVertexBuffer.updateData(ge)}function Vt(v,t,o,m,p,y,S,P){const M=y.glyphStartIndex+y.numGlyphs,L=y.lineStartIndex,V=y.lineStartIndex+y.lineLength,U=t.getoffsetX(y.glyphStartIndex),N=t.getoffsetX(M-1),W=Ua(v*U,o,m,p,y.segment,L,V,P,S);if(!W)return null;const Q=Ua(v*N,o,m,p,y.segment,L,V,P,S);return Q?P.projectionCache.anyProjectionOccluded?null:{first:W,last:Q}:null}function pr(v,t,o,m){return v===a.an.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*m?{useVertical:!0}:(v===a.an.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function _i(v){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:o,symbol:m,fontSize:p,flip:y,keepUpright:S,glyphOffsetArray:P,dynamicLayoutVertexArray:M,aspectRatio:L,rotateToLine:V}=v,U=p/24,N=m.lineOffsetX*U,W=m.lineOffsetY*U;let Q;if(m.numGlyphs>1){const ve=m.glyphStartIndex+m.numGlyphs,ge=m.lineStartIndex,ye=m.lineStartIndex+m.lineLength,we=Vt(U,P,N,W,y,m,V,t);if(!we)return{notEnoughRoom:!0};const Ie=Pn(we.first.point.x,we.first.point.y,t,o),Te=Pn(we.last.point.x,we.last.point.y,t,o);if(S&&!y){const De=pr(m.writingMode,Ie,Te,L);if(De)return De}Q=[we.first];for(let De=m.glyphStartIndex+1;De<ve-1;De++){const Ve=Ua(U*P.getoffsetX(De),N,W,y,m.segment,ge,ye,t,V);if(!Ve)return{notEnoughRoom:!0};Q.push(Ve)}Q.push(we.last)}else{if(S&&!y){const ge=jt(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,ye=m.lineStartIndex+m.segment+1,we=new a.P(t.lineVertexArray.getx(ye),t.lineVertexArray.gety(ye)),Ie=jt(we.x,we.y,t),Te=Ie.signedDistanceFromCamera>0?Ie.point:Ss(t.tileAnchorPoint,we,ge,1,t),De=Pn(ge.x,ge.y,t,o),Ve=Pn(Te.x,Te.y,t,o),ke=pr(m.writingMode,De,Ve,L);if(ke)return ke}const ve=Ua(U*P.getoffsetX(m.glyphStartIndex),N,W,y,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,t,V);if(!ve||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Q=[ve]}for(const ve of Q)a.au(M,ve.point,ve.angle);return{}}function Ss(v,t,o,m,p){const y=v.add(v.sub(t)._unit()),S=jt(y.x,y.y,p).point,P=o.sub(S);return o.add(P._mult(m/P.mag()))}function Ys(v,t,o){const m=t.projectionCache;if(m.projections[v])return m.projections[v];const p=new a.P(t.lineVertexArray.getx(v),t.lineVertexArray.gety(v)),y=jt(p.x,p.y,t);if(y.signedDistanceFromCamera>0)return m.projections[v]=y.point,m.anyProjectionOccluded=m.anyProjectionOccluded||y.isOccluded,y.point;const S=v-o.direction;return Ss(o.distanceFromAnchor===0?t.tileAnchorPoint:new a.P(t.lineVertexArray.getx(S),t.lineVertexArray.gety(S)),p,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,t)}function jt(v,t,o){const m=v+o.translation[0],p=t+o.translation[1];let y;return o.pitchWithMap?(y=Hn(m,p,o.pitchedLabelPlaneMatrix,o.getElevation),y.isOccluded=!1):(y=o.transform.projectTileCoordinates(m,p,o.unwrappedTileID,o.getElevation),y.point.x=(.5*y.point.x+.5)*o.width,y.point.y=(.5*-y.point.y+.5)*o.height),y}function Pn(v,t,o,m){if(o.pitchWithMap){const p=[v,t,0,1];return a.av(p,p,m),o.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],o.unwrappedTileID,o.getElevation).point}return{x:v/o.width*2-1,y:t/o.height*2-1}}function In(v,t,o){return o.transform.projectTileCoordinates(v,t,o.unwrappedTileID,o.getElevation)}function oa(v,t,o){return v._unit()._perp()._mult(t*o)}function cc(v,t,o,m,p,y,S,P,M){if(P.projectionCache.offsets[v])return P.projectionCache.offsets[v];const L=o.add(t);if(v+M.direction<m||v+M.direction>=p)return P.projectionCache.offsets[v]=L,L;const V=Ys(v+M.direction,P,M),U=oa(V.sub(o),S,M.direction),N=o.add(U),W=V.add(U);return P.projectionCache.offsets[v]=a.aw(y,L,N,W)||L,P.projectionCache.offsets[v]}function Ua(v,t,o,m,p,y,S,P,M){const L=m?v-t:v+t;let V=L>0?1:-1,U=0;m&&(V*=-1,U=Math.PI),V<0&&(U+=Math.PI);let N,W=V>0?y+p:y+p+1;P.projectionCache.cachedAnchorPoint?N=P.projectionCache.cachedAnchorPoint:(N=jt(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=N);let Q,ve,ge=N,ye=N,we=0,Ie=0;const Te=Math.abs(L),De=[];let Ve;for(;we+Ie<=Te;){if(W+=V,W<y||W>=S)return null;we+=Ie,ye=ge,ve=Q;const at={absOffsetX:Te,direction:V,distanceFromAnchor:we,previousVertex:ye};if(ge=Ys(W,P,at),o===0)De.push(ye),Ve=ge.sub(ye);else{let et;const nt=ge.sub(ye);et=nt.mag()===0?oa(Ys(W+V,P,at).sub(ge),o,V):oa(nt,o,V),ve||(ve=ye.add(et)),Q=cc(W,et,ge,y,S,ve,o,P,at),De.push(ve),Ve=Q.sub(ve)}Ie=Ve.mag()}const ke=Ve._mult((Te-we)/Ie)._add(ve||ye),Ge=U+Math.atan2(ge.y-ye.y,ge.x-ye.x);return De.push(ke),{point:ke,angle:M?Ge:0,path:De}}const An=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ts(v,t){for(let o=0;o<v;o++){const m=t.length;t.resize(m+4),t.float32.set(An,3*m)}}function Xs(v,t,o){const m=t[0],p=t[1];return v[0]=o[0]*m+o[4]*p+o[12],v[1]=o[1]*m+o[5]*p+o[13],v[3]=o[3]*m+o[7]*p+o[15],v}const Fi=100;class Ll{constructor(t,o=new rn(t.width+200,t.height+200,25),m=new rn(t.width+200,t.height+200,25)){this.transform=t,this.grid=o,this.ignoredGrid=m,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Fi,this.screenBottomBoundary=t.height+Fi,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,m,p,y,S,P,M,L,V,U,N){const W=this.projectAndGetPerspectiveRatio(t.anchorPointX+M[0],t.anchorPointY+M[1],y,V,N),Q=m*W.perspectiveRatio;let ve;if(S||P)ve=this._projectCollisionBox(t,Q,p,y,S,P,M,W,V,U,N);else{const Ve=W.x+(U?U.x*Q:0),ke=W.y+(U?U.y*Q:0);ve={allPointsOccluded:!1,box:[Ve+t.x1*Q,ke+t.y1*Q,Ve+t.x2*Q,ke+t.y2*Q]}}const[ge,ye,we,Ie]=ve.box,Te=S?ve.allPointsOccluded:W.isOccluded;let De=Te;return De||(De=W.perspectiveRatio<this.perspectiveRatioCutoff),De||(De=!this.isInsideGrid(ge,ye,we,Ie)),De||o!=="always"&&this.grid.hitTest(ge,ye,we,Ie,o,L)?{box:[ge,ye,we,Ie],placeable:!1,offscreen:!1,occluded:Te}:{box:[ge,ye,we,Ie],placeable:!0,offscreen:this.isOffscreen(ge,ye,we,Ie),occluded:Te}}placeCollisionCircles(t,o,m,p,y,S,P,M,L,V,U,N,W,Q){const ve=[],ge=new a.P(o.anchorX,o.anchorY),ye=this.getPerspectiveRatio(ge.x,ge.y,S,Q),we=(L?y*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,S)/ye:y*ye)/a.aA,Ie={getElevation:Q,pitchedLabelPlaneMatrix:P,lineVertexArray:m,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:W},Te=Vt(we,p,o.lineOffsetX*we,o.lineOffsetY*we,!1,o,!1,Ie);let De=!1,Ve=!1,ke=!0;if(Te){const Ge=.5*U*ye+N,at=new a.P(-100,-100),et=new a.P(this.screenRightBoundary,this.screenBottomBoundary),nt=new cn,ot=Te.first,$t=Te.last;let Ot=[];for(let Tn=ot.path.length-1;Tn>=1;Tn--)Ot.push(ot.path[Tn]);for(let Tn=1;Tn<$t.path.length;Tn++)Ot.push($t.path[Tn]);const At=2.5*Ge;if(L){const Tn=this.projectPathToScreenSpace(Ot,Ie);Ot=Tn.some(Zn=>Zn.signedDistanceFromCamera<=0)?[]:Tn.map(Zn=>Zn.point)}let Kt=[];if(Ot.length>0){const Tn=Ot[0].clone(),Zn=Ot[0].clone();for(let Si=1;Si<Ot.length;Si++)Tn.x=Math.min(Tn.x,Ot[Si].x),Tn.y=Math.min(Tn.y,Ot[Si].y),Zn.x=Math.max(Zn.x,Ot[Si].x),Zn.y=Math.max(Zn.y,Ot[Si].y);Kt=Tn.x>=at.x&&Zn.x<=et.x&&Tn.y>=at.y&&Zn.y<=et.y?[Ot]:Zn.x<at.x||Tn.x>et.x||Zn.y<at.y||Tn.y>et.y?[]:a.ax([Ot],at.x,at.y,et.x,et.y)}for(const Tn of Kt){nt.reset(Tn,.25*Ge);let Zn=0;Zn=nt.length<=.5*Ge?1:Math.ceil(nt.paddedLength/At)+1;for(let Si=0;Si<Zn;Si++){const ni=Si/Math.max(Zn-1,1),Ci=nt.lerp(ni),ai=Ci.x+Fi,ii=Ci.y+Fi;ve.push(ai,ii,Ge,0);const si=ai-Ge,vr=ii-Ge,Nn=ai+Ge,or=ii+Ge;if(ke=ke&&this.isOffscreen(si,vr,Nn,or),Ve=Ve||this.isInsideGrid(si,vr,Nn,or),t!=="always"&&this.grid.hitTestCircle(ai,ii,Ge,t,V)&&(De=!0,!M))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!M&&De||!Ve||ye<this.perspectiveRatioCutoff?[]:ve,offscreen:ke,collisionDetected:De}}projectPathToScreenSpace(t,o){const m=function(p,y){const S=a.L();return a.ap(S,y.pitchedLabelPlaneMatrix),p.map(P=>{const M=Hn(P.x,P.y,S,y.getElevation),L=y.transform.projectTileCoordinates(M.point.x,M.point.y,y.unwrappedTileID,y.getElevation);return L.point.x=(.5*L.point.x+.5)*y.width,L.point.y=(.5*-L.point.y+.5)*y.height,L})}(t,o);return function(p){let y=0,S=0,P=0,M=0;for(let L=0;L<p.length;L++)p[L].isOccluded?(P=L+1,M=0):(M++,M>S&&(S=M,y=P));return p.slice(y,y+S)}(m)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[],m=new a.a1;for(const U of t){const N=new a.P(U.x+Fi,U.y+Fi);m.extend(N),o.push(N)}const{minX:p,minY:y,maxX:S,maxY:P}=m,M=this.grid.query(p,y,S,P).concat(this.ignoredGrid.query(p,y,S,P)),L={},V={};for(const U of M){const N=U.key;if(L[N.bucketInstanceId]===void 0&&(L[N.bucketInstanceId]={}),L[N.bucketInstanceId][N.featureIndex])continue;const W=[new a.P(U.x1,U.y1),new a.P(U.x2,U.y1),new a.P(U.x2,U.y2),new a.P(U.x1,U.y2)];a.ay(o,W)&&(L[N.bucketInstanceId][N.featureIndex]=!0,V[N.bucketInstanceId]===void 0&&(V[N.bucketInstanceId]=[]),V[N.bucketInstanceId].push(N.featureIndex))}return V}insertCollisionBox(t,o,m,p,y,S){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:y,collisionGroupID:S,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,m,p,y,S){const P=m?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:y,collisionGroupID:S,overlapMode:o};for(let L=0;L<t.length;L+=4)P.insertCircle(M,t[L],t[L+1],t[L+2])}projectAndGetPerspectiveRatio(t,o,m,p,y){if(y){let S;p?(S=[t,o,p(t,o),1],a.av(S,S,y)):(S=[t,o,0,1],Xs(S,S,y));const P=S[3];return{x:(S[0]/P+1)/2*this.transform.width+Fi,y:(-S[1]/P+1)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}{const S=this.transform.projectTileCoordinates(t,o,m,p);return{x:(S.point.x+1)/2*this.transform.width+Fi,y:(1-S.point.y)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5,isOccluded:S.isOccluded,signedDistanceFromCamera:S.signedDistanceFromCamera}}}getPerspectiveRatio(t,o,m,p){const y=this.transform.projectTileCoordinates(t,o,m,p);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(t,o,m,p){return m<Fi||t>=this.screenRightBoundary||p<Fi||o>this.screenBottomBoundary}isInsideGrid(t,o,m,p){return m>=0&&t<this.gridRightBoundary&&p>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=a.af([]);return a.M(t,t,[-100,-100,0]),t}_projectCollisionBox(t,o,m,p,y,S,P,M,L,V,U){let N=1,W=0,Q=0,ve=1;const ge=t.anchorPointX+P[0],ye=t.anchorPointY+P[1];if(S&&!y){const Ot=this.projectAndGetPerspectiveRatio(ge+1,ye,p,L,U),At=Ot.x-M.x,Kt=Math.atan((Ot.y-M.y)/At)+(At<0?Math.PI:0),Tn=Math.sin(Kt),Zn=Math.cos(Kt);N=Zn,W=Tn,Q=-Tn,ve=Zn}else if(!S&&y){const Ot=Jn(this.transform);N=Ot.vecEast[0],W=Ot.vecEast[1],Q=Ot.vecSouth[0],ve=Ot.vecSouth[1]}let we=M.x,Ie=M.y,Te=o;y&&(we=ge,Ie=ye,Te=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Te*=this.transform.getPitchedTextCorrection(ge,ye,p),V||(Te*=a.ag(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(we+=N*V.x*Te+Q*V.y*Te,Ie+=W*V.x*Te+ve*V.y*Te);const De=t.x1*Te,Ve=t.x2*Te,ke=(De+Ve)/2,Ge=t.y1*Te,at=t.y2*Te,et=(Ge+at)/2,nt=[{offsetX:De,offsetY:Ge},{offsetX:ke,offsetY:Ge},{offsetX:Ve,offsetY:Ge},{offsetX:Ve,offsetY:et},{offsetX:Ve,offsetY:at},{offsetX:ke,offsetY:at},{offsetX:De,offsetY:at},{offsetX:De,offsetY:et}];let ot=[];for(const{offsetX:Ot,offsetY:At}of nt)ot.push(new a.P(we+N*Ot+Q*At,Ie+W*Ot+ve*At));let $t=!1;if(y){const Ot=ot.map(At=>this.projectAndGetPerspectiveRatio(At.x,At.y,p,L,U));$t=Ot.some(At=>!At.isOccluded),ot=Ot.map(At=>new a.P(At.x,At.y))}else $t=!0;return{box:a.az(ot),allPointsOccluded:!$t}}}class zl{constructor(t,o,m,p){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):p&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class ns{constructor(t,o,m,p,y){this.text=new zl(t?t.text:null,o,m,y),this.icon=new zl(t?t.icon:null,o,p,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bl{constructor(t,o,m){this.text=t,this.icon=o,this.skipFade=m}}class la{constructor(t,o,m,p,y){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=m,this.bucketIndex=p,this.tileID=y}}class bi{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:m=>m.collisionGroupID===o}}return this.collisionGroups[t]}}function Tm(v,t,o,m,p){const{horizontalAlign:y,verticalAlign:S}=a.aG(v);return new a.P(-(y-.5)*t+m[0]*p,-(S-.5)*o+m[1]*p)}class Vl{constructor(t,o,m,p,y){this.transform=t.clone(),this.terrain=o,this.collisionIndex=new Ll(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new bi(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const o=this.terrain;return o?(m,p)=>o.getElevation(t,m,p):null}getBucketParts(t,o,m,p){const y=m.getBucket(o),S=m.latestFeatureIndex;if(!y||!S||o.id!==y.layerIds[0])return;const P=m.collisionBoxArray,M=y.layers[0].layout,L=y.layers[0].paint,V=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/a.$,N=m.tileID.toUnwrapped(),W=M.get("text-rotation-alignment")==="map",Q=a.aB(m,1,this.transform.zoom),ve=a.aC(this.collisionIndex.transform,m,L.get("text-translate"),L.get("text-translate-anchor")),ge=a.aC(this.collisionIndex.transform,m,L.get("icon-translate"),L.get("icon-translate-anchor")),ye=pn(W,this.transform,Q);this.retainedQueryData[y.bucketInstanceId]=new la(y.bucketInstanceId,S,y.sourceLayerIndex,y.index,m.tileID);const we={bucket:y,layout:M,translationText:ve,translationIcon:ge,unwrappedTileID:N,pitchedLabelPlaneMatrix:ye,scale:V,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:a.am(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(p)for(const Ie of y.sortKeyRanges){const{sortKey:Te,symbolInstanceStart:De,symbolInstanceEnd:Ve}=Ie;t.push({sortKey:Te,symbolInstanceStart:De,symbolInstanceEnd:Ve,parameters:we})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:we})}attemptAnchorPlacement(t,o,m,p,y,S,P,M,L,V,U,N,W,Q,ve,ge,ye,we,Ie,Te){const De=a.aD[t.textAnchor],Ve=[t.textOffset0,t.textOffset1],ke=Tm(De,m,p,Ve,y),Ge=this.collisionIndex.placeCollisionBox(o,N,M,L,V,P,S,ge,U.predicate,Ie,ke,Te);if((!we||this.collisionIndex.placeCollisionBox(we,N,M,L,V,P,S,ye,U.predicate,Ie,ke,Te).placeable)&&Ge.placeable){let at;if(this.prevPlacement&&this.prevPlacement.variableOffsets[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID].text&&(at=this.prevPlacement.variableOffsets[W.crossTileID].anchor),W.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[W.crossTileID]={textOffset:Ve,width:m,height:p,anchor:De,textBoxScale:y,prevAnchor:at},this.markUsedJustification(Q,De,W,ve),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,ve,W),this.placedOrientations[W.crossTileID]=ve),{shift:ke,placedGlyphBoxes:Ge}}}placeLayerBucketPart(t,o,m){const{bucket:p,layout:y,translationText:S,translationIcon:P,unwrappedTileID:M,pitchedLabelPlaneMatrix:L,textPixelRatio:V,holdingForFade:U,collisionBoxArray:N,partiallyEvaluatedTextSize:W,collisionGroup:Q}=t.parameters,ve=y.get("text-optional"),ge=y.get("icon-optional"),ye=a.aE(y,"text-overlap","text-allow-overlap"),we=ye==="always",Ie=a.aE(y,"icon-overlap","icon-allow-overlap"),Te=Ie==="always",De=y.get("text-rotation-alignment")==="map",Ve=y.get("text-pitch-alignment")==="map",ke=y.get("icon-text-fit")!=="none",Ge=y.get("symbol-z-order")==="viewport-y",at=we&&(Te||!p.hasIconData()||ge),et=Te&&(we||!p.hasTextData()||ve);!p.collisionArrays&&N&&p.deserializeCollisionBoxes(N);const nt=this.retainedQueryData[p.bucketInstanceId].tileID,ot=this._getTerrainElevationFunc(nt),$t=this.transform.getFastPathSimpleProjectionMatrix(nt),Ot=(At,Kt,Tn)=>{var Zn,Si;if(o[At.crossTileID])return;if(U)return void(this.placements[At.crossTileID]=new Bl(!1,!1,!1));let ni=!1,Ci=!1,ai=!0,ii=null,si={box:null,placeable:!1,offscreen:null,occluded:!1},vr={placeable:!1},Nn=null,or=null,yr=null,Ms=0,Ds=0,Rs=0;Kt.textFeatureIndex?Ms=Kt.textFeatureIndex:At.useRuntimeCollisionCircles&&(Ms=At.featureIndex),Kt.verticalTextFeatureIndex&&(Ds=Kt.verticalTextFeatureIndex);const Ka=Kt.textBox;if(Ka){const Xr=Vi=>{let fi=a.an.horizontal;if(p.allowVerticalPlacement&&!Vi&&this.prevPlacement){const Nr=this.prevPlacement.placedOrientations[At.crossTileID];Nr&&(this.placedOrientations[At.crossTileID]=Nr,fi=Nr,this.markUsedOrientation(p,fi,At))}return fi},Ma=(Vi,fi)=>{if(p.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&Kt.verticalTextBox){for(const Nr of p.writingModes)if(Nr===a.an.vertical?(si=fi(),vr=si):si=Vi(),si&&si.placeable)break}else si=Vi()},Ls=At.textAnchorOffsetStartIndex,uo=At.textAnchorOffsetEndIndex;if(uo===Ls){const Vi=(fi,Nr)=>{const Xi=this.collisionIndex.placeCollisionBox(fi,ye,V,nt,M,Ve,De,S,Q.predicate,ot,void 0,$t);return Xi&&Xi.placeable&&(this.markUsedOrientation(p,Nr,At),this.placedOrientations[At.crossTileID]=Nr),Xi};Ma(()=>Vi(Ka,a.an.horizontal),()=>{const fi=Kt.verticalTextBox;return p.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&fi?Vi(fi,a.an.vertical):{box:null,offscreen:null}}),Xr(si&&si.placeable)}else{let Vi=a.aD[(Si=(Zn=this.prevPlacement)===null||Zn===void 0?void 0:Zn.variableOffsets[At.crossTileID])===null||Si===void 0?void 0:Si.anchor];const fi=(Xi,yp,$v)=>{const Wh=Xi.x2-Xi.x1,mu=Xi.y2-Xi.y1,sl=At.textBoxScale,os=ke&&Ie==="never"?yp:null;let _r=null,ls=ye==="never"?1:2,Zh="never";Vi&&ls++;for(let zs=0;zs<ls;zs++){for(let Kh=Ls;Kh<uo;Kh++){const Yh=p.textAnchorOffsets.get(Kh);if(Vi&&Yh.textAnchor!==Vi)continue;const pu=this.attemptAnchorPlacement(Yh,Xi,Wh,mu,sl,De,Ve,V,nt,M,Q,Zh,At,p,$v,S,P,os,ot);if(pu&&(_r=pu.placedGlyphBoxes,_r&&_r.placeable))return ni=!0,ii=pu.shift,_r}Vi?Vi=null:Zh=ye}return m&&!_r&&(_r={box:this.collisionIndex.placeCollisionBox(Ka,"always",V,nt,M,Ve,De,S,Q.predicate,ot,void 0,$t).box,offscreen:!1,placeable:!1,occluded:!1}),_r};Ma(()=>fi(Ka,Kt.iconBox,a.an.horizontal),()=>{const Xi=Kt.verticalTextBox;return p.allowVerticalPlacement&&(!si||!si.placeable)&&At.numVerticalGlyphVertices>0&&Xi?fi(Xi,Kt.verticalIconBox,a.an.vertical):{box:null,occluded:!0,offscreen:null}}),si&&(ni=si.placeable,ai=si.offscreen);const Nr=Xr(si&&si.placeable);if(!ni&&this.prevPlacement){const Xi=this.prevPlacement.variableOffsets[At.crossTileID];Xi&&(this.variableOffsets[At.crossTileID]=Xi,this.markUsedJustification(p,Xi.anchor,At,Nr))}}}if(Nn=si,ni=Nn&&Nn.placeable,ai=Nn&&Nn.offscreen,At.useRuntimeCollisionCircles){const Xr=p.text.placedSymbolArray.get(At.centerJustifiedTextSymbolIndex),Ma=a.ao(p.textSizeData,W,Xr),Ls=y.get("text-padding");or=this.collisionIndex.placeCollisionCircles(ye,Xr,p.lineVertexArray,p.glyphOffsetArray,Ma,M,L,m,Ve,Q.predicate,At.collisionCircleDiameter,Ls,S,ot),or.circles.length&&or.collisionDetected&&!m&&a.w("Collisions detected, but collision boxes are not shown"),ni=we||or.circles.length>0&&!or.collisionDetected,ai=ai&&or.offscreen}if(Kt.iconFeatureIndex&&(Rs=Kt.iconFeatureIndex),Kt.iconBox){const Xr=Ma=>this.collisionIndex.placeCollisionBox(Ma,Ie,V,nt,M,Ve,De,P,Q.predicate,ot,ke&&ii?ii:void 0,$t);vr&&vr.placeable&&Kt.verticalIconBox?(yr=Xr(Kt.verticalIconBox),Ci=yr.placeable):(yr=Xr(Kt.iconBox),Ci=yr.placeable),ai=ai&&yr.offscreen}const hu=ve||At.numHorizontalGlyphVertices===0&&At.numVerticalGlyphVertices===0,fu=ge||At.numIconVertices===0;hu||fu?fu?hu||(Ci=Ci&&ni):ni=Ci&&ni:Ci=ni=Ci&&ni;const al=Ci&&yr.placeable;if(ni&&Nn.placeable&&this.collisionIndex.insertCollisionBox(Nn.box,ye,y.get("text-ignore-placement"),p.bucketInstanceId,vr&&vr.placeable&&Ds?Ds:Ms,Q.ID),al&&this.collisionIndex.insertCollisionBox(yr.box,Ie,y.get("icon-ignore-placement"),p.bucketInstanceId,Rs,Q.ID),or&&ni&&this.collisionIndex.insertCollisionCircles(or.circles,ye,y.get("text-ignore-placement"),p.bucketInstanceId,Ms,Q.ID),m&&this.storeCollisionData(p.bucketInstanceId,Tn,Kt,Nn,yr,or),At.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[At.crossTileID]=new Bl((ni||at)&&!(Nn!=null&&Nn.occluded),(Ci||et)&&!(yr!=null&&yr.occluded),ai||p.justReloaded),o[At.crossTileID]=!0};if(Ge){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const At=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Kt=At.length-1;Kt>=0;--Kt){const Tn=At[Kt];Ot(p.symbolInstances.get(Tn),p.collisionArrays[Tn],Tn)}}else for(let At=t.symbolInstanceStart;At<t.symbolInstanceEnd;At++)Ot(p.symbolInstances.get(At),p.collisionArrays[At],At);p.justReloaded=!1}storeCollisionData(t,o,m,p,y,S){if(m.textBox||m.iconBox){let P,M;this.collisionBoxArrays.has(t)?P=this.collisionBoxArrays.get(t):(P=new Map,this.collisionBoxArrays.set(t,P)),P.has(o)?M=P.get(o):(M={text:null,icon:null},P.set(o,M)),m.textBox&&(M.text=p.box),m.iconBox&&(M.icon=y.box)}if(S){let P=this.collisionCircleArrays[t];P===void 0&&(P=this.collisionCircleArrays[t]=[]);for(let M=0;M<S.circles.length;M+=4)P.push(S.circles[M+0]-Fi),P.push(S.circles[M+1]-Fi),P.push(S.circles[M+2]),P.push(S.collisionDetected?1:0)}}markUsedJustification(t,o,m,p){let y;y=p===a.an.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[a.aF(o)];const S=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const P of S)P>=0&&(t.text.placedSymbolArray.get(P).crossTileID=y>=0&&P!==y?0:m.crossTileID)}markUsedOrientation(t,o,m){const p=o===a.an.horizontal||o===a.an.horizontalOnly?o:0,y=o===a.an.vertical?o:0,S=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const P of S)t.text.placedSymbolArray.get(P).placedOrientation=p;m.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let m=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const p=o?o.symbolFadeChange(t):1,y=o?o.opacities:{},S=o?o.variableOffsets:{},P=o?o.placedOrientations:{};for(const M in this.placements){const L=this.placements[M],V=y[M];V?(this.opacities[M]=new ns(V,p,L.text,L.icon),m=m||L.text!==V.text.placed||L.icon!==V.icon.placed):(this.opacities[M]=new ns(null,p,L.text,L.icon,L.skipFade),m=m||L.text||L.icon)}for(const M in y){const L=y[M];if(!this.opacities[M]){const V=new ns(L,p,!1,!1);V.isHidden()||(this.opacities[M]=V,m=m||L.text.placed||L.icon.placed)}}for(const M in S)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=S[M]);for(const M in P)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=P[M]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const m={};for(const p of o){const y=p.getBucket(t);y&&p.latestFeatureIndex&&t.id===y.layerIds[0]&&this.updateBucketOpacities(y,p.tileID,m,p.collisionBoxArray)}}updateBucketOpacities(t,o,m,p){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const y=t.layers[0],S=y.layout,P=new ns(null,0,!1,!1,!0),M=S.get("text-allow-overlap"),L=S.get("icon-allow-overlap"),V=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=S.get("text-rotation-alignment")==="map",N=S.get("text-pitch-alignment")==="map",W=S.get("icon-text-fit")!=="none",Q=new ns(null,0,M&&(L||!t.hasIconData()||S.get("icon-optional")),L&&(M||!t.hasTextData()||S.get("text-optional")),!0);!t.collisionArrays&&p&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(p);const ve=(ye,we,Ie)=>{for(let Te=0;Te<we/4;Te++)ye.opacityVertexArray.emplaceBack(Ie);ye.hasVisibleVertices=ye.hasVisibleVertices||Ie!==Ol},ge=this.collisionBoxArrays.get(t.bucketInstanceId);for(let ye=0;ye<t.symbolInstances.length;ye++){const we=t.symbolInstances.get(ye),{numHorizontalGlyphVertices:Ie,numVerticalGlyphVertices:Te,crossTileID:De}=we;let Ve=this.opacities[De];m[De]?Ve=P:Ve||(Ve=Q,this.opacities[De]=Ve),m[De]=!0;const ke=we.numIconVertices>0,Ge=this.placedOrientations[we.crossTileID],at=Ge===a.an.vertical,et=Ge===a.an.horizontal||Ge===a.an.horizontalOnly;if(Ie>0||Te>0){const ot=Em(Ve.text);ve(t.text,Ie,at?Ol:ot),ve(t.text,Te,et?Ol:ot);const $t=Ve.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(Kt=>{Kt>=0&&(t.text.placedSymbolArray.get(Kt).hidden=$t||at?1:0)}),we.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=$t||et?1:0);const Ot=this.variableOffsets[we.crossTileID];Ot&&this.markUsedJustification(t,Ot.anchor,we,Ge);const At=this.placedOrientations[we.crossTileID];At&&(this.markUsedJustification(t,"left",we,At),this.markUsedOrientation(t,At,we))}if(ke){const ot=Em(Ve.icon),$t=!(W&&we.verticalPlacedIconSymbolIndex&&at);we.placedIconSymbolIndex>=0&&(ve(t.icon,we.numIconVertices,$t?ot:Ol),t.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Ve.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(ve(t.icon,we.numVerticalIconVertices,$t?Ol:ot),t.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Ve.icon.isHidden())}const nt=ge&&ge.has(ye)?ge.get(ye):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const ot=t.collisionArrays[ye];if(ot){let $t=new a.P(0,0);if(ot.textBox||ot.verticalTextBox){let Ot=!0;if(V){const At=this.variableOffsets[De];At?($t=Tm(At.anchor,At.width,At.height,At.textOffset,At.textBoxScale),U&&$t._rotate(N?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ot=!1}if(ot.textBox||ot.verticalTextBox){let At;ot.textBox&&(At=at),ot.verticalTextBox&&(At=et),dc(t.textCollisionBox.collisionVertexArray,Ve.text.placed,!Ot||At,nt.text,$t.x,$t.y)}}if(ot.iconBox||ot.verticalIconBox){const Ot=!!(!et&&ot.verticalIconBox);let At;ot.iconBox&&(At=Ot),ot.verticalIconBox&&(At=!Ot),dc(t.iconCollisionBox.collisionVertexArray,Ve.icon.placed,At,nt.icon,W?$t.x:0,W?$t.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const m=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*m>t}setStale(){this.stale=!0}}function dc(v,t,o,m,p,y){m&&m.length!==0||(m=[0,0,0,0]);const S=m[0]-Fi,P=m[1]-Fi,M=m[2]-Fi,L=m[3]-Fi;v.emplaceBack(t?1:0,o?1:0,p||0,y||0,S,P),v.emplaceBack(t?1:0,o?1:0,p||0,y||0,M,P),v.emplaceBack(t?1:0,o?1:0,p||0,y||0,M,L),v.emplaceBack(t?1:0,o?1:0,p||0,y||0,S,L)}const Js=Math.pow(2,25),Cs=Math.pow(2,24),km=Math.pow(2,17),Pm=Math.pow(2,16),Im=Math.pow(2,9),Ro=Math.pow(2,8),Am=Math.pow(2,1);function Em(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const t=v.placed?1:0,o=Math.floor(127*v.opacity);return o*Js+t*Cs+o*km+t*Pm+o*Im+t*Ro+o*Am+t}const Ol=0;class mv{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,m,p,y){const S=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(S,p,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((P,M)=>P.sortKey-M.sortKey));this._currentPartIndex<S.length;)if(o.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,y())return!0;return!1}}class Mm{constructor(t,o,m,p,y,S,P,M){this.placement=new Vl(t,o,S,P,M),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(t,o,m){const p=A.now(),y=()=>!this._forceFullPlacement&&A.now()-p>2;for(;this._currentPlacementIndex>=0;){const S=o[t[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=P)&&(!S.maxzoom||S.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new mv(S)),this._inProgressLayer.continuePlacement(m[S.source],this.placement,this._showCollisionBoxes,S,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Lo=512/a.$/2;class nh{constructor(t,o,m){this.tileID=t,this.bucketInstanceId=m,this._symbolsByKey={};const p=new Map;for(let y=0;y<o.length;y++){const S=o.get(y),P=S.key,M=p.get(P);M?M.push(S):p.set(P,[S])}for(const[y,S]of p){const P={positions:S.map(M=>({x:Math.floor(M.anchorX*Lo),y:Math.floor(M.anchorY*Lo)})),crossTileIDs:S.map(M=>M.crossTileID)};if(P.positions.length>128){const M=new a.aH(P.positions.length,16,Uint16Array);for(const{x:L,y:V}of P.positions)M.add(L,V);M.finish(),delete P.positions,P.index=M}this._symbolsByKey[y]=P}}getScaledCoordinates(t,o){const{x:m,y:p,z:y}=this.tileID.canonical,{x:S,y:P,z:M}=o.canonical,L=Lo/Math.pow(2,M-y),V=(P*a.$+t.anchorY)*L,U=p*a.$*Lo;return{x:Math.floor((S*a.$+t.anchorX)*L-m*a.$*Lo),y:Math.floor(V-U)}}findMatches(t,o,m){const p=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let y=0;y<t.length;y++){const S=t.get(y);if(S.crossTileID)continue;const P=this._symbolsByKey[S.key];if(!P)continue;const M=this.getScaledCoordinates(S,o);if(P.index){const L=P.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(const V of L){const U=P.crossTileIDs[V];if(!m[U]){m[U]=!0,S.crossTileID=U;break}}}else if(P.positions)for(let L=0;L<P.positions.length;L++){const V=P.positions[L],U=P.crossTileIDs[L];if(Math.abs(V.x-M.x)<=p&&Math.abs(V.y-M.y)<=p&&!m[U]){m[U]=!0,S.crossTileID=U;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class ih{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Dm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const m in this.indexes){const p=this.indexes[m],y={};for(const S in p){const P=p[S];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+o),y[P.tileID.key]=P}this.indexes[m]=y}this.lng=t}addBucket(t,o,m){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let y=0;y<o.symbolInstances.length;y++)o.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const p=this.usedCrossTileIDs[t.overscaledZ];for(const y in this.indexes){const S=this.indexes[y];if(Number(y)>t.overscaledZ)for(const P in S){const M=S[P];M.tileID.isChildOf(t)&&M.findMatches(o.symbolInstances,t,p)}else{const P=S[t.scaledTo(Number(y)).key];P&&P.findMatches(o.symbolInstances,t,p)}}for(let y=0;y<o.symbolInstances.length;y++){const S=o.symbolInstances.get(y);S.crossTileID||(S.crossTileID=m.generate(),p[S.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new nh(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const m of o.getCrossTileIDsLists())for(const p of m)delete this.usedCrossTileIDs[t][p]}removeStaleBuckets(t){let o=!1;for(const m in this.indexes){const p=this.indexes[m];for(const y in p)t[p[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,p[y]),delete p[y],o=!0)}return o}}class hc{constructor(){this.layerIndexes={},this.crossTileIDs=new ih,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,m){let p=this.layerIndexes[t.id];p===void 0&&(p=this.layerIndexes[t.id]=new Dm);let y=!1;const S={};p.handleWrapJump(m);for(const P of o){const M=P.getBucket(t);M&&t.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(P.tileID,M,this.crossTileIDs)&&(y=!0),S[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(S)&&(y=!0),y}pruneUnusedLayers(t){const o={};t.forEach(m=>{o[m]=!0});for(const m in this.layerIndexes)o[m]||delete this.layerIndexes[m]}}var fc="void main() {fragColor=vec4(1.0);}";const Ga={prelude:Ln(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ln("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ln("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ln(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ln(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ln(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ln(fc,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ln(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ln(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ln("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ln("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ln(fc,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ln(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ln(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ln(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ln(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ln(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ln(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ln(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ln(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ln(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ln(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ln(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ln("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ln("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ln("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ln("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ln(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ln("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ln(v,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=t.match(/in ([\w]+) ([\w]+)/g),p=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=y?y.concat(p):p,P={};return{fragmentSource:v=v.replace(o,(M,L,V,U,N)=>(P[N]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${N}
in ${V} ${U} ${N};
#else
uniform ${V} ${U} u_${N};
#endif
`:`
#ifdef HAS_UNIFORM_u_${N}
    ${V} ${U} ${N} = u_${N};
#endif
`)),vertexSource:t=t.replace(o,(M,L,V,U,N)=>{const W=U==="float"?"vec2":"vec4",Q=N.match(/color/)?"color":W;return P[N]?L==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${V} ${W} a_${N};
out ${V} ${U} ${N};
#else
uniform ${V} ${U} u_${N};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = a_${N};
#else
    ${V} ${U} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = unpack_mix_${Q}(a_${N}, u_${N}_t);
#else
    ${V} ${U} ${N} = u_${N};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${V} ${W} a_${N};
#else
uniform ${V} ${U} u_${N};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${V} ${U} ${N} = a_${N};
#else
    ${V} ${U} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${V} ${U} ${N} = unpack_mix_${Q}(a_${N}, u_${N}_t);
#else
    ${V} ${U} ${N} = u_${N};
#endif
`}),staticAttributes:m,staticUniforms:S}}class is{constructor(t,o,m){this.vertexBuffer=t,this.indexBuffer=o,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var rs=a.aI([{name:"a_pos",type:"Int16",components:2}]);const Qs="#define PROJECTION_MERCATOR",rh="mercator";class ah{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return rh}get shaderDefine(){return Qs}get shaderPreludeCode(){return Ga.projectionMercator}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,o,m,p,y){if(this._cachedMesh)return this._cachedMesh;const S=new a.aK;S.emplaceBack(0,0),S.emplaceBack(a.$,0),S.emplaceBack(0,a.$),S.emplaceBack(a.$,a.$);const P=t.createVertexBuffer(S,rs.members),M=a.aL.simpleSegment(0,0,4,2),L=new a.aM;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3);const V=t.createIndexBuffer(L);return this._cachedMesh=new is(P,V,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class ba{constructor(t=0,o=0,m=0,p=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(m)||m<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=m,this.right=p}interpolate(t,o,m){return o.top!=null&&t.top!=null&&(this.top=a.C.number(t.top,o.top,m)),o.bottom!=null&&t.bottom!=null&&(this.bottom=a.C.number(t.bottom,o.bottom,m)),o.left!=null&&t.left!=null&&(this.left=a.C.number(t.left,o.left,m)),o.right!=null&&t.right!=null&&(this.right=a.C.number(t.right,o.right,m)),this}getCenter(t,o){const m=a.ag((this.left+t-this.right)/2,0,t),p=a.ag((this.top+o-this.bottom)/2,0,o);return new a.P(m,p)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new ba(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function as(v,t){if(!v.renderWorldCopies||v.lngRange)return;const o=t.lng-v.center.lng;t.lng+=o>180?-360:o<-180?360:0}function zn(v){return Math.max(0,Math.floor(v))}class Fl{constructor(t,o,m,p,y,S){this._callbacks=t,this._tileSize=512,this._renderWorldCopies=S===void 0||!!S,this._minZoom=o||0,this._maxZoom=m||22,this._minPitch=p??0,this._maxPitch=y??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=zn(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ba,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,o,m){this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=zn(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new ba(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!m&&t.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const o=a.aN(t,-180,180)*Math.PI/180;var m,p,y,S,P,M,L,V,U;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=C(),m=this._rotationMatrix,y=-this._bearingInRadians,S=(p=this._rotationMatrix)[0],P=p[1],M=p[2],L=p[3],V=Math.sin(y),U=Math.cos(y),m[0]=S*U+M*V,m[1]=P*U+L*V,m[2]=S*-V+M*U,m[3]=P*-V+L*U)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const o=a.ag(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const o=t/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aO(this._fovInRadians)}setFov(t){t=a.ag(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=a.ad(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const o=this.getConstrained(this._center,t).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=a.ae(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,o){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,m){this._unmodified=!1,this._edgeInsets.interpolate(t,o,m),this._constrain(),this._calcMatrices()}resize(t,o,m=!0){this._width=t,this._height=o,m&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new le([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.ah])}getConstrained(t,o){return this._callbacks.getConstrained(t,o)}getCameraQueryGeometry(t,o){if(o.length===1)return[o[0],t];{const{minX:m,minY:p,maxX:y,maxY:S}=a.a1.fromPoints(o).extend(t);return[new a.P(m,p),new a.P(y,p),new a.P(y,S),new a.P(m,S),new a.P(m,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:o,zoom:m}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(m),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=a.af(new Float64Array(16));a.N(t,t,[this._width/2,-this._height/2,1]),a.M(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=a.af(new Float64Array(16)),a.N(t,t,[1,-1,1]),a.M(t,t,[-1,-1,0]),a.N(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,o,m,p){const y=m!==void 0?m:this.bearing,S=p=p!==void 0?p:this.pitch,P=a.a0.fromLngLat(t,o),M=-Math.cos(a.ad(S)),L=Math.sin(a.ad(S)),V=L*Math.sin(a.ad(y)),U=-L*Math.cos(a.ad(y));let N=this.elevation;const W=o-N;let Q;M*W>=0||Math.abs(M)<.1?(Q=1e4,N=o+Q*M):Q=-W/M;let ve,ge,ye=a.aP(1,P.y),we=0;do{if(we+=1,we>10)break;ge=Q/ye,ve=new a.a0(P.x+V*ge,P.y+U*ge),ye=1/ve.meterInMercatorCoordinateUnits()}while(Math.abs(Q-ge*ye)>1e-12);return{center:ve.toLngLat(),elevation:N,zoom:a.aj(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const o=a.ai(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/o,p=a.a0.fromLngLat(this.center,this.elevation),y=Ce(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=t;const S=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),a.aP(y.z,p.y),this.bearing,this.pitch);this._elevation=S.elevation,this._center=S.center,this.setZoom(S.zoom)}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=a.ai(1,this.center.lat)*this.worldSize;return Ce(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const o=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/o,t.canonical.y/o,1/o/a.$,1/o/a.$]}}class mc{constructor(t,o){this.min=t,this.max=o,this.center=a.aQ([],a.aR([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],m=a.aS(this.min),p=a.aS(this.max);for(let y=0;y<o.length;y++)m[y]=o[y]?this.min[y]:this.center[y],p[y]=o[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new mc(m,p)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let o=!0;for(let m=0;m<t.planes.length;m++){const p=this.intersectsPlane(t.planes[m]);if(p===0)return 0;p===1&&(o=!1)}return o?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let o=t[3],m=t[3];for(let p=0;p<3;p++)t[p]>0?(o+=t[p]*this.min[p],m+=t[p]*this.max[p]):(m+=t[p]*this.min[p],o+=t[p]*this.max[p]);return o>=0?2:m<0?0:1}}class sh{distanceToTile2d(t,o,m,p){const y=p.distanceX([t,o]),S=p.distanceY([t,o]);return Math.hypot(y,S)}getWrap(t,o,m){return m}getTileBoundingVolume(t,o,m,p){var y,S;let P=m,M=m;if(p!=null&&p.terrain){const V=new a.Z(t.z,o,t.z,t.x,t.y),U=p.terrain.getMinMaxElevation(V);P=(y=U.minElevation)!==null&&y!==void 0?y:m,M=(S=U.maxElevation)!==null&&S!==void 0?S:m}const L=1<<t.z;return new mc([o+t.x/L,t.y/L,P],[o+(t.x+1)/L,(t.y+1)/L,M])}allowVariableZoom(t,o){const m=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,p=a.ag(78.5-m/2,0,60);return!!o.terrain||t.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class Ir{constructor(t,o,m){this.points=t,this.planes=o,this.aabb=m}static fromInvProjectionMatrix(t,o=1,m=0,p,y){const S=y?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],P=Math.pow(2,m),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(N=>function(W,Q,ve,ge){const ye=a.av([],W,Q),we=1/ye[3]/ve*ge;return a.aX(ye,ye,[we,we,1/ye[3],we])}(N,t,o,P));p&&function(N,W,Q,ve){const ge=ve?4:0,ye=ve?0:4;let we=0;const Ie=[],Te=[];for(let ke=0;ke<4;ke++){const Ge=a.aT([],N[ke+ye],N[ke+ge]),at=a.aY(Ge);a.aQ(Ge,Ge,1/at),Ie.push(at),Te.push(Ge)}for(let ke=0;ke<4;ke++){const Ge=a.aZ(N[ke+ge],Te[ke],Q);we=Ge!==null&&Ge>=0?Math.max(we,Ge):Math.max(we,Ie[ke])}const De=function(ke,Ge){const at=a.aT([],ke[Ge[0]],ke[Ge[1]]),et=a.aT([],ke[Ge[2]],ke[Ge[1]]),nt=[0,0,0,0];return a.aU(nt,a.aV([],at,et)),nt[3]=-a.aW(nt,ke[Ge[0]]),nt}(N,W),Ve=function(ke,Ge){const at=a.a_(ke),et=a.a$([],ke,1/at),nt=a.aT([],Ge,a.aQ([],et,a.aW(Ge,et))),ot=a.a_(nt);if(ot>0){const $t=Math.sqrt(1-et[3]*et[3]),Ot=a.aQ([],et,-et[3]),At=a.aR([],Ot,a.aQ([],nt,$t/ot));return a.b0(Ge,At)}return null}(Q,De);if(Ve!==null){const ke=Ve/a.aW(Te[0],De);we=Math.min(we,ke)}for(let ke=0;ke<4;ke++){const Ge=Math.min(we,Ie[ke]);N[ke+ye]=[N[ke+ge][0]+Te[ke][0]*Ge,N[ke+ge][1]+Te[ke][1]*Ge,N[ke+ge][2]+Te[ke][2]*Ge,1]}}(M,S[0],p,y);const L=S.map(N=>{const W=a.aT([],M[N[0]],M[N[1]]),Q=a.aT([],M[N[2]],M[N[1]]),ve=a.aU([],a.aV([],W,Q)),ge=-a.aW(ve,M[N[1]]);return ve.concat(ge)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],U=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const N of M)for(let W=0;W<3;W++)V[W]=Math.min(V[W],N[W]),U[W]=Math.max(U[W],N[W]);return new Ir(M,L,new mc(V,U))}}class Gi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,o){}constructor(t,o,m,p,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Fl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(S,P)=>this.getConstrained(S,P)},t,o,m,p,y),this._coveringTilesDetailsProvider=new sh}clone(){const t=new Gi;return t.apply(this),t}apply(t,o,m){this._helper.apply(t,o,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const o=[new a.b1(0,t)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),S=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),P=Math.floor(Math.min(m.x,p.x,y.x,S.x)),M=Math.floor(Math.max(m.x,p.x,y.x,S.x)),L=1;for(let V=P-L;V<=M+L;V++)V!==0&&o.push(new a.b1(V,t))}return o}getCameraFrustum(){return Ir.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const o=this.screenPointToLocation(this.centerPoint,t),m=t?t.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(t,o){const m=a.ai(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(o,m),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),S=a.a0.fromLngLat(t),P=new a.a0(S.x-(p.x-y.x),S.y-(p.y-y.y));this.setCenter(P==null?void 0:P.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,o){return o?this.coordinatePoint(a.a0.fromLngLat(t),o.getElevationForLngLatZoom(t,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a0.fromLngLat(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,o){const m=o||0,p=[t.x,t.y,0,1],y=[t.x,t.y,1,1];a.av(p,p,this._pixelMatrixInverse),a.av(y,y,this._pixelMatrixInverse);const S=p[3],P=y[3],M=p[1]/S,L=y[1]/P,V=p[2]/S,U=y[2]/P,N=V===U?0:(m-V)/(U-V);return new a.a0(a.C.number(p[0]/S,y[0]/P,N)/this.worldSize,a.C.number(M,L,N)/this.worldSize,m)}coordinatePoint(t,o=0,m=this._pixelMatrix){const p=[t.x*this.worldSize,t.y*this.worldSize,o,1];return a.av(p,p,m),new a.P(p[0]/p[3],p[1]/p[3])}getBounds(){const t=Math.max(0,this._helper._height/2-oe(this));return new le().extend(this.screenPointToLocation(new a.P(0,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(t,o){return o?o.pointCoordinate(t)!=null:t.y>this.height/2-oe(this)}calculatePosMatrix(t,o=!1,m){var p;const y=(p=t.key)!==null&&p!==void 0?p:a.b2(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),S=o?this._alignedPosMatrixCache:this._posMatrixCache;if(S.has(y)){const L=S.get(y);return m?L.f32:L.f64}const P=he(t,this.worldSize);a.O(P,o?this._alignedProjMatrix:this._viewProjMatrix,P);const M={f64:P,f32:new Float32Array(P)};return S.set(y,M),m?M.f32:M.f64}calculateFogMatrix(t){const o=t.key,m=this._fogMatrixCacheF32;if(m.has(o))return m.get(o);const p=he(t,this.worldSize);return a.O(p,this._fogMatrix,p),m.set(o,new Float32Array(p)),m.get(o)}getConstrained(t,o){o=a.ag(+o,this.minZoom,this.maxZoom);const m={center:new a.S(t.lng,t.lat),zoom:o};let p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);const y=this.tileSize*a.ae(m.zoom);let S=0,P=y,M=0,L=y,V=0,U=0;const{x:N,y:W}=this.size;if(this._helper._latRange){const Ie=this._helper._latRange;S=a.U(Ie[1])*y,P=a.U(Ie[0])*y,P-S<W&&(V=W/(P-S))}p&&(M=a.aN(a.V(p[0])*y,0,y),L=a.aN(a.V(p[1])*y,0,y),L<M&&(L+=y),L-M<N&&(U=N/(L-M)));const{x:Q,y:ve}=qe(y,t);let ge,ye;const we=Math.max(U||0,V||0);if(we){const Ie=new a.P(U?(L+M)/2:Q,V?(P+S)/2:ve);return m.center=se(y,Ie).wrap(),m.zoom+=a.aj(we),m}if(this._helper._latRange){const Ie=W/2;ve-Ie<S&&(ye=S+Ie),ve+Ie>P&&(ye=P-Ie)}if(p){const Ie=(M+L)/2;let Te=Q;this._helper._renderWorldCopies&&(Te=a.aN(Q,Ie-y/2,Ie+y/2));const De=N/2;Te-De<M&&(ge=M+De),Te+De>L&&(ge=L-De)}if(ge!==void 0||ye!==void 0){const Ie=new a.P(ge??Q,ye??ve);m.center=se(y,Ie).wrap()}return m}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}_calculateNearFarZIfNeeded(t,o,m){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=t-p*this._helper._pixelPerMeter/Math.cos(o),S=p<0?y:t,P=Math.PI/2+this.pitchInRadians,M=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+m.y/this.height),L=Math.sin(M)*S/Math.sin(a.ag(Math.PI-P-M,.01,Math.PI-.01)),V=oe(this),U=Math.atan(V/this._helper.cameraToCenterDistance),N=a.ad(.75),W=U>N?2*U*(.5+m.y/(2*V)):N,Q=Math.sin(W)*S/Math.sin(a.ag(Math.PI-P-W,.01,Math.PI-.01)),ve=Math.min(L,Q);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*ve+S),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,o=qe(this.worldSize,this.center),m=o.x,p=o.y;this._helper._pixelPerMeter=a.ai(1,this.center.lat)*this.worldSize;const y=a.ad(Math.min(this.pitch,Ui)),S=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y));let P;this._calculateNearFarZIfNeeded(S,y,t),P=new Float64Array(16),a.b3(P,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ap(this._invProjMatrix,P),P[8]=2*-t.x/this._helper._width,P[9]=2*t.y/this._helper._height,this._projectionMatrix=a.b4(P),a.N(P,P,[1,-1,1]),a.M(P,P,[0,0,-this._helper.cameraToCenterDistance]),a.b5(P,P,-this.rollInRadians),a.b6(P,P,this.pitchInRadians),a.b5(P,P,-this.bearingInRadians),a.M(P,P,[-m,-p,0]),this._mercatorMatrix=a.N([],P,[this.worldSize,this.worldSize,this.worldSize]),a.N(P,P,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P),a.M(P,P,[0,0,-this.elevation]),this._viewProjMatrix=P,this._invViewProjMatrix=a.ap([],P);const M=[0,0,-1,1];a.av(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),a.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,S,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-m,-p,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P);const L=this._helper._width%2/2,V=this._helper._height%2/2,U=Math.cos(this.bearingInRadians),N=Math.sin(-this.bearingInRadians),W=m-Math.round(m)+U*L+N*V,Q=p-Math.round(p)+U*V+N*L,ve=new Float64Array(P);if(a.M(ve,ve,[W>.5?W-1:W,Q>.5?Q-1:Q,0]),this._alignedProjMatrix=ve,P=a.ap(new Float64Array(16),this._pixelMatrix),!P)throw new Error("failed to invert matrix");this._pixelMatrixInverse=P,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new a.P(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.av(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=a.ai(1,this.center.lat)*this.worldSize;return Ce(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,o){const m=a.a0.fromLngLat(t),p=[m.x*this.worldSize,m.y*this.worldSize,o,1];return a.av(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(t){const{overscaledTileID:o,aligned:m,applyTerrainMatrix:p}=t,y=this._helper.getMercatorTileCoordinates(o),S=o?this.calculatePosMatrix(o,m,!0):null;let P;return P=o&&o.terrainRttPosMatrix32f&&p?o.terrainRttPosMatrix32f:S||a.b7(),{mainMatrix:P,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:P}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,o,m){return 1}transformLightDirection(t){return a.aS(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,o,m,p){const y=this.calculatePosMatrix(m);let S;p?(S=[t,o,p(t,o),1],a.av(S,S,y)):(S=[t,o,0,1],Xs(S,S,y));const P=S[3];return{point:new a.P(S[0]/P,S[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}populateCache(t){for(const o of t)this.calculatePosMatrix(o)}getMatrixForModel(t,o){const m=a.a0.fromLngLat(t,o),p=m.meterInMercatorCoordinateUnits(),y=a.b8();return a.M(y,y,[m.x,m.y,m.z]),a.b5(y,y,Math.PI),a.b6(y,y,Math.PI/2),a.N(y,y,[-p,p,p]),y}getProjectionDataForCustomLayer(t=!0){const o=new a.Z(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:t}),p=he(o,this.worldSize);a.O(p,this._viewProjMatrix,p),m.tileMercatorCoords=[0,0,1,1];const y=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],S=a.b9();return a.N(S,p,y),m.fallbackMatrix=S,m.mainMatrix=S,m}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Ar(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ar(v){if(v.useSlerp)if(v.k<1){const t=a.ba(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),o=a.ba(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),m=new Float64Array(4);a.bb(m,t,o,v.k);const p=a.bc(m);v.tr.setRoll(p.roll),v.tr.setPitch(p.pitch),v.tr.setBearing(p.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(a.C.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(a.C.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(a.C.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function xi(v,t,o,m,p){const y=p.padding,S=qe(p.worldSize,o.getNorthWest()),P=qe(p.worldSize,o.getNorthEast()),M=qe(p.worldSize,o.getSouthEast()),L=qe(p.worldSize,o.getSouthWest()),V=a.ad(-m),U=S.rotate(V),N=P.rotate(V),W=M.rotate(V),Q=L.rotate(V),ve=new a.P(Math.max(U.x,N.x,Q.x,W.x),Math.max(U.y,N.y,Q.y,W.y)),ge=new a.P(Math.min(U.x,N.x,Q.x,W.x),Math.min(U.y,N.y,Q.y,W.y)),ye=ve.sub(ge),we=(p.width-(y.left+y.right+t.left+t.right))/ye.x,Ie=(p.height-(y.top+y.bottom+t.top+t.bottom))/ye.y;if(Ie<0||we<0)return void Ar();const Te=Math.min(a.aj(p.scale*Math.min(we,Ie)),v.maxZoom),De=a.P.convert(v.offset),Ve=new a.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(a.ad(m)),ke=De.add(Ve).mult(p.scale/a.ae(Te));return{center:se(p.worldSize,S.add(M).div(2).sub(ke)),zoom:Te,bearing:m}}class pc{get useGlobeControls(){return!1}handlePanInertia(t,o){return{easingOffset:t,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(t,o){t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta),t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta)}handleMapControlsPan(t,o,m){t.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(m,t.around)}cameraForBoxAndBearing(t,o,m,p,y){return xi(t,o,m,p,y)}handleJumpToCenterZoom(t,o){t.zoom!==(o.zoom!==void 0?+o.zoom:t.zoom)&&t.setZoom(+o.zoom),o.center!==void 0&&t.setCenter(a.S.convert(o.center))}handleEaseTo(t,o){const m=t.zoom,p=t.padding,y={roll:t.roll,pitch:t.pitch,bearing:t.bearing},S={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},P=o.zoom!==void 0,M=!t.isPaddingEqual(o.padding);let L=!1;const V=P?+o.zoom:t.zoom;let U=t.centerPoint.add(o.offsetAsPoint);const N=t.screenPointToLocation(U),{center:W,zoom:Q}=t.getConstrained(a.S.convert(o.center||N),V??m);as(t,W);const ve=qe(t.worldSize,N),ge=qe(t.worldSize,W).sub(ve),ye=a.ae(Q-m);return L=Q!==m,{easeFunc:we=>{if(L&&t.setZoom(a.C.number(m,Q,we)),a.bd(y,S)||ar({startEulerAngles:y,endEulerAngles:S,tr:t,k:we,useSlerp:y.roll!=S.roll}),M&&(t.interpolatePadding(p,o.padding,we),U=t.centerPoint.add(o.offsetAsPoint)),o.around)t.setLocationAtPoint(o.around,o.aroundPoint);else{const Ie=a.ae(t.zoom-m),Te=Q>m?Math.min(2,ye):Math.max(.5,ye),De=Math.pow(Te,1-we),Ve=se(t.worldSize,ve.add(ge.mult(we*De)).mult(Ie));t.setLocationAtPoint(t.renderWorldCopies?Ve.wrap():Ve,U)}},isZooming:L,elevationCenter:W}}handleFlyTo(t,o){const m=o.zoom!==void 0,p=t.zoom,y=t.getConstrained(a.S.convert(o.center||o.locationAtOffset),m?+o.zoom:p),S=y.center,P=y.zoom;as(t,S);const M=qe(t.worldSize,o.locationAtOffset),L=qe(t.worldSize,S).sub(M),V=L.mag(),U=a.ae(P-p);let N;if(o.minZoom!==void 0){const W=Math.min(+o.minZoom,p,P),Q=t.getConstrained(S,W).zoom;N=a.ae(Q-p)}return{easeFunc:(W,Q,ve,ge)=>{t.setZoom(W===1?P:p+a.aj(Q));const ye=W===1?S:se(t.worldSize,M.add(L.mult(ve)).mult(Q));t.setLocationAtPoint(t.renderWorldCopies?ye.wrap():ye,ge)},scaleOfZoom:U,targetCenter:S,scaleOfMinZoom:N,pixelPathLength:V}}}class jn{constructor(t,o,m){this.blendFunction=t,this.blendColor=o,this.mask=m}}jn.Replace=[1,0],jn.disabled=new jn(jn.Replace,a.be.transparent,[!1,!1,!1,!1]),jn.unblended=new jn(jn.Replace,a.be.transparent,[!0,!0,!0,!0]),jn.alphaBlended=new jn([1,771],a.be.transparent,[!0,!0,!0,!0]);const Zr=2305;class xn{constructor(t,o,m){this.enable=t,this.mode=o,this.frontFace=m}}xn.disabled=new xn(!1,1029,Zr),xn.backCCW=new xn(!0,1029,Zr),xn.frontCCW=new xn(!0,1028,Zr);class Cn{constructor(t,o,m){this.func=t,this.mask=o,this.range=m}}Cn.ReadOnly=!1,Cn.ReadWrite=!0,Cn.disabled=new Cn(519,Cn.ReadOnly,[0,1]);const eo=7680;class hn{constructor(t,o,m,p,y,S){this.test=t,this.ref=o,this.mask=m,this.fail=p,this.depthFail=y,this.pass=S}}hn.disabled=new hn({func:519,mask:0},0,0,eo,eo,eo);const to=new WeakMap;function Or(v){var t;if(to.has(v))return to.get(v);{const o=(t=v.getParameter(v.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return to.set(v,o),o}}class zo{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const o=t.context,m=o.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const p=new a.aK;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const y=new a.aM;y.emplaceBack(0,1,2),this._fullscreenTriangle=new is(o.createVertexBuffer(p,rs.members),o.createIndexBuffer(y),a.aL.simpleSegment(0,0,p.length,y.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(m.TEXTURE1);const S=m.createTexture();m.bindTexture(m.TEXTURE_2D,S),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(S),Or(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,o){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,o=t.gl;t.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,o){const m=this._cachedRenderContext.context,p=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:a.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,p.TRIANGLES,Cn.disabled,hn.disabled,jn.unblended,xn.disabled,((y,S)=>({u_input:y,u_output_expected:S}))(t,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Or(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const y=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Or(t)){const o=t.clientWaitSync(this._readbackQueue.sync,0,0);if(o===t.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=zo._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let o=0;return o+=t[0]/256,o+=t[1]/65536,o+=t[2]/16777216,t[3]<127&&(o=-o),o/128}}const xa=a.$/128;function oh(v,t){const o=v.granularity!==void 0?Math.max(v.granularity,1):1,m=o+(v.generateBorders?2:0),p=o+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),y=m+1,S=p+1,P=v.generateBorders?-1:0,M=v.generateBorders||v.extendToNorthPole?-1:0,L=o+(v.generateBorders?1:0),V=o+(v.generateBorders||v.extendToSouthPole?1:0),U=y*S,N=m*p*6,W=y*S>65536;if(W&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Q=W||t==="32bit",ve=new Int16Array(2*U);let ge=0;for(let Ie=M;Ie<=V;Ie++)for(let Te=P;Te<=L;Te++){let De=Te/o*a.$;Te===-1&&(De=-64),Te===o+1&&(De=a.$+xa);let Ve=Ie/o*a.$;Ie===-1&&(Ve=v.extendToNorthPole?a.bg:-64),Ie===o+1&&(Ve=v.extendToSouthPole?a.bh:a.$+xa),ve[ge++]=De,ve[ge++]=Ve}const ye=Q?new Uint32Array(N):new Uint16Array(N);let we=0;for(let Ie=0;Ie<p;Ie++)for(let Te=0;Te<m;Te++){const De=Te+1+Ie*y,Ve=Te+(Ie+1)*y,ke=Te+1+(Ie+1)*y;ye[we++]=Te+Ie*y,ye[we++]=Ve,ye[we++]=De,ye[we++]=De,ye[we++]=Ve,ye[we++]=ke}return{vertices:ve.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:Q}}const qa=new a.aJ({fill:new a.bi(128,2),line:new a.bi(512,0),tile:new a.bi(128,32),stencil:new a.bi(128,1),circle:3});class Rm{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ga.projectionGlobe}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return qa}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new zo(t));const o=a.U(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(o,m),y=A.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=y);const S=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bk(S))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,o,m,p,y){const S=(y==="stencil"?qa.stencil:qa.tile).getGranularityForZoomLevel(o.z);return this._getMesh(t,{granularity:S,generateBorders:m,extendToNorthPole:o.y===0&&p,extendToSouthPole:o.y===(1<<o.z)-1&&p})}_getMesh(t,o){const m=this._getMeshKey(o);if(m in this._tileMeshCache)return this._tileMeshCache[m];const p=function(y,S){const P=oh(S,"16bit"),M=a.aK.deserialize({arrayBuffer:P.vertices,length:P.vertices.byteLength/2/2}),L=a.aM.deserialize({arrayBuffer:P.indices,length:P.indices.byteLength/2/3});return new is(y.createVertexBuffer(M,rs.members),y.createIndexBuffer(L),a.aL.simpleSegment(0,0,M.length,L.length))}(t,o);return this._tileMeshCache[m]=p,p}recalculate(t){}hasTransition(){const t=A.now();let o=!1;return o=o||(t-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const Lm=new a.r({type:new a.D(a.v.projection.type)});class $l extends a.E{constructor(t){super(),this._transitionable=new a.t(Lm),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new ah,this._verticalPerspectiveProjection=new Rm}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof a.bl){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,o,m,p,y){return this.currentProjection.getMeshFromTileID(t,o,m,p,y)}setProjection(t){this._transitionable.setValue("type",(t==null?void 0:t.type)||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function jl(v){const t=Bo(v.worldSize,v.center.lat);return 2*Math.PI*t}function Ia(v,t,o,m,p){const y=1/(1<<p),S=t/a.$*y+m*y,P=a.bn((v/a.$*y+o*y)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI,L=Math.cos(M),V=new Float64Array(3);return V[0]=Math.sin(P)*L,V[1]=Math.sin(M),V[2]=Math.cos(P)*L,V}function sr(v){return function(t,o){const m=Math.cos(o),p=new Float64Array(3);return p[0]=Math.sin(t)*m,p[1]=Math.sin(o),p[2]=Math.cos(t)*m,p}(v.lng*Math.PI/180,v.lat*Math.PI/180)}function Bo(v,t){return v/(2*Math.PI)/Math.cos(t*Math.PI/180)}function Nl(v){const t=Math.asin(v[1])/Math.PI*180,o=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(o>1e-6){const m=v[0]/o,p=Math.acos(v[2]/o),y=(m>0?p:-p)/Math.PI*180;return new a.S(a.aN(y,-180,180),t)}return new a.S(0,t)}function Vo(v){return Math.cos(v*Math.PI/180)}function qi(v,t){const o=Vo(v),m=Vo(t);return a.aj(m/o)}function Ul(v,t){const o=v.rotate(t.bearingInRadians),m=t.zoom+qi(t.center.lat,0),p=a.bj(1/Vo(t.center.lat),1/Vo(Math.min(Math.abs(t.center.lat),60)),a.bm(m,7,3,0,1)),y=360/jl({worldSize:t.worldSize,center:{lat:t.center.lat}});return new a.S(t.center.lng-o.x*y*p,a.ag(t.center.lat+o.y*y,-85.051129,a.ah))}function Oo(v){const t=.5*v,o=Math.sin(t),m=Math.cos(t);return Math.log(o+m)-Math.log(m-o)}function Fo(v,t,o,m){const p=v.lat+o*m;if(Math.abs(o)>1){const y=(Math.sign(v.lat+o)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,S=Math.abs(v.lat+o)*Math.PI/180,P=Oo(y+m*(S-y)),M=Oo(y),L=Oo(S);return new a.S(v.lng+t*((P-M)/(L-M)),p)}return new a.S(v.lng+t*m,p)}class pv{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,o,m,p){const y=`${t.z}_${t.x}_${t.y}_${p!=null&&p.terrain?"t":""}`,S=this._cache.get(y);if(S)return S;const P=this._cachePrevious.get(y);if(P)return this._cache.set(y,P),P;const M=this._boundingVolumeFactory(t,o,m,p);return this._cache.set(y,M),this._hadAnyChanges=!0,M}}class Ts{constructor(t,o,m,p){this.min=m,this.max=p,this.points=t,this.planes=o}static fromAabb(t,o){const m=[];for(let p=0;p<8;p++)m.push([1&~p?t[0]:o[0],(p>>1&1)==1?o[1]:t[1],(p>>2&1)==1?o[2]:t[2]]);return new Ts(m,[[-1,0,0,o[0]],[1,0,0,-t[0]],[0,-1,0,o[1]],[0,1,0,-t[1]],[0,0,-1,o[2]],[0,0,1,-t[2]]],t,o)}static fromCenterSizeAngles(t,o,m){const p=a.bq([],m[0],m[1],m[2]),y=a.br([],[o[0],0,0],p),S=a.br([],[0,o[1],0],p),P=a.br([],[0,0,o[2]],p),M=[...t],L=[...t];for(let U=0;U<8;U++)for(let N=0;N<3;N++){const W=t[N]+y[N]*(1&~U?-1:1)+S[N]*((U>>1&1)==1?1:-1)+P[N]*((U>>2&1)==1?1:-1);M[N]=Math.min(M[N],W),L[N]=Math.max(L[N],W)}const V=[];for(let U=0;U<8;U++){const N=[...t];a.aR(N,N,a.aQ([],y,1&~U?-1:1)),a.aR(N,N,a.aQ([],S,(U>>1&1)==1?1:-1)),a.aR(N,N,a.aQ([],P,(U>>2&1)==1?1:-1)),V.push(N)}return new Ts(V,[[...y,-a.aW(y,V[0])],[...S,-a.aW(S,V[0])],[...P,-a.aW(P,V[0])],[-y[0],-y[1],-y[2],-a.aW(y,V[7])],[-S[0],-S[1],-S[2],-a.aW(S,V[7])],[-P[0],-P[1],-P[2],-a.aW(P,V[7])]],M,L)}intersectsFrustum(t){let o=!0;const m=this.points.length,p=this.planes.length,y=t.planes.length,S=t.points.length;for(let P=0;P<y;P++){const M=t.planes[P];let L=0;for(let V=0;V<m;V++){const U=this.points[V];M[0]*U[0]+M[1]*U[1]+M[2]*U[2]+M[3]>=0&&L++}if(L===0)return 0;L<m&&(o=!1)}if(o)return 2;for(let P=0;P<p;P++){const M=this.planes[P];let L=0;for(let V=0;V<S;V++){const U=t.points[V];M[0]*U[0]+M[1]*U[1]+M[2]*U[2]+M[3]>=0&&L++}if(L===0)return 0}return 1}intersectsPlane(t){const o=this.points.length;let m=0;for(let p=0;p<o;p++){const y=this.points[p];t[0]*y[0]+t[1]*y[1]+t[2]*y[2]+t[3]>=0&&m++}return m===o?2:m===0?0:1}}function Gl(v,t,o){const m=v-t;return m<0?-m:Math.max(0,m-o)}function lh(v,t,o,m,p){const y=v-o;let S;return S=y<0?Math.min(-y,1+y-p):y>1?Math.min(Math.max(y-p,0),1-y):0,Math.max(S,Gl(t,m,p))}class gv{constructor(){this._boundingVolumeCache=new pv(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,o,m,p){const y=1<<m.z,S=1/y,P=m.x/y,M=m.y/y;let L=2;return L=Math.min(L,lh(t,o,P,M,S)),L=Math.min(L,lh(t,o,P+.5,-M-S,S)),L=Math.min(L,lh(t,o,P+.5,2-M-S,S)),L}getWrap(t,o,m){const p=1<<o.z,y=1/p,S=o.x/p,P=Gl(t.x,S,y),M=Gl(t.x,S-1,y),L=Gl(t.x,S+1,y),V=Math.min(P,M,L);return V===L?1:V===M?-1:0}allowVariableZoom(t,o){return bt(t,o)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,o,m,p){return this._boundingVolumeCache.getTileBoundingVolume(t,o,m,p)}_computeTileBoundingVolume(t,o,m,p){var y,S;let P=m,M=m;if(p!=null&&p.terrain){const L=new a.Z(t.z,o,t.z,t.x,t.y),V=p.terrain.getMinMaxElevation(L);P=(y=V.minElevation)!==null&&y!==void 0?y:m,M=(S=V.maxElevation)!==null&&S!==void 0?S:m}if(P/=a.bt,M/=a.bt,P+=1,M+=1,t.z<=0)return Ts.fromAabb([-M,-M,-M],[M,M,M]);if(t.z===1)return Ts.fromAabb([t.x===0?-M:0,t.y===0?0:-M,-M],[t.x===0?0:M,t.y===0?M:0,M]);{const L=[Ia(0,0,t.x,t.y,t.z),Ia(a.$,0,t.x,t.y,t.z),Ia(a.$,a.$,t.x,t.y,t.z),Ia(0,a.$,t.x,t.y,t.z)],V=[];for(const nt of L)V.push(a.aQ([],nt,M));if(M!==P)for(const nt of L)V.push(a.aQ([],nt,P));t.y===0&&V.push([0,1,0]),t.y===(1<<t.z)-1&&V.push([0,-1,0]);const U=[1,1,1],N=[-1,-1,-1];for(const nt of V)for(let ot=0;ot<3;ot++)U[ot]=Math.min(U[ot],nt[ot]),N[ot]=Math.max(N[ot],nt[ot]);const W=Ia(a.$/2,a.$/2,t.x,t.y,t.z),Q=a.aV([],[0,1,0],W);a.aU(Q,Q);const ve=a.aV([],W,Q);a.aU(ve,ve);const ge=a.aV([],L[2],L[1]);a.aU(ge,ge);const ye=a.aV([],L[0],L[3]);a.aU(ye,ye),V.push(a.aQ([],W,M)),t.y>=(1<<t.z)/2&&V.push(a.aQ([],Ia(a.$/2,0,t.x,t.y,t.z),M)),t.y<(1<<t.z)/2&&V.push(a.aQ([],Ia(a.$/2,a.$,t.x,t.y,t.z),M));const we=Fr(W,V),Ie=Fr(ve,V),Te=[-W[0],-W[1],-W[2],we.max],De=[W[0],W[1],W[2],-we.min],Ve=[-ve[0],-ve[1],-ve[2],Ie.max],ke=[ve[0],ve[1],ve[2],-Ie.min],Ge=[...ge,0],at=[...ye,0],et=[];return t.y===0?et.push(a.bs(at,Ge,Te),a.bs(at,Ge,De)):et.push(a.bs(Ve,Ge,Te),a.bs(Ve,Ge,De),a.bs(Ve,at,Te),a.bs(Ve,at,De)),t.y===(1<<t.z)-1?et.push(a.bs(at,Ge,Te),a.bs(at,Ge,De)):et.push(a.bs(ke,Ge,Te),a.bs(ke,Ge,De),a.bs(ke,at,Te),a.bs(ke,at,De)),new Ts(et,[Te,De,Ve,ke,Ge,at],U,N)}}}function Fr(v,t){let o=1/0,m=-1/0;for(const p of t){const y=a.aW(v,p);o=Math.min(o,y),m=Math.max(m,y)}return{min:o,max:m}}class $o{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o){this._helper.resize(t,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(){this._cachedClippingPlane=a.bu(),this._projectionMatrix=a.b8(),this._globeViewProjMatrix32f=a.b7(),this._globeViewProjMatrixNoCorrection=a.b8(),this._globeViewProjMatrixNoCorrectionInverted=a.b8(),this._globeProjMatrixInverted=a.b8(),this._cameraPosition=a.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Fl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,o)=>this.getConstrained(t,o)}),this._coveringTilesDetailsProvider=new gv}clone(){const t=new $o;return t.apply(this),t}apply(t,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=a.bo();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:o,applyGlobeMatrix:m}=t,p=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const o=this.pitchInRadians,m=this.cameraToCenterDistance/t,p=Math.sin(o)*m,y=Math.cos(o)*m+1,S=1/Math.sqrt(p*p+y*y)*1;let P=-p,M=y;const L=Math.sqrt(P*P+M*M);P/=L,M/=L;const V=[0,P,M];a.bv(V,V,[0,0,0],-this.bearingInRadians),a.bw(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),a.bx(V,V,[0,0,0],this.center.lng*Math.PI/180);const U=1/a.aY(V);return a.aQ(V,V,U),[...V,-S*U]}isLocationOccluded(t){return!this.isSurfacePointVisible(sr(t))}transformLightDirection(t){const o=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,p=Math.cos(m),y=[Math.sin(o)*p,Math.sin(m),Math.cos(o)*p],S=[y[2],0,-y[0]],P=[0,0,0];a.aV(P,S,y),a.aU(S,S),a.aU(P,P);const M=[0,0,0];return a.aU(M,[S[0]*t[0]+P[0]*t[1]+y[0]*t[2],S[1]*t[0]+P[1]*t[1]+y[1]*t[2],S[2]*t[0]+P[2]*t[1]+y[2]*t[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,o,m){const p=function(P,M,L){const V=1/(1<<L.z);return new a.a0(P/a.$*V+L.x*V,M/a.$*V+L.y*V)}(t,o,m.canonical),y=(S=p.y,[a.bn(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI]);var S;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(t,o,m,p){const y=m.canonical,S=Ia(t,o,y.x,y.y,y.z),P=1+(p?p(t,o):0)/a.bt,M=[S[0]*P,S[1]*P,S[2]*P,1];a.av(M,M,this._globeViewProjMatrixNoCorrection);const L=this._cachedClippingPlane,V=L[0]*S[0]+L[1]*S[1]+L[2]*S[2]+L[3]<0;return{point:new a.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=Bo(this.worldSize,this.center.lat),o=a.b9(),m=a.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),a.b3(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;o[8]=2*-p.x/this._helper._width,o[9]=2*p.y/this._helper._height,this._projectionMatrix=a.b4(o),this._globeProjMatrixInverted=a.b9(),a.ap(this._globeProjMatrixInverted,o),a.M(o,o,[0,0,-this.cameraToCenterDistance]),a.b5(o,o,this.rollInRadians),a.b6(o,o,-this.pitchInRadians),a.b5(o,o,this.bearingInRadians),a.M(o,o,[0,0,-t]);const y=a.bo();y[0]=t,y[1]=t,y[2]=t,a.b6(m,o,this.center.lat*Math.PI/180),a.by(m,m,-this.center.lng*Math.PI/180),a.N(m,m,y),this._globeViewProjMatrixNoCorrection=m,a.b6(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.by(o,o,-this.center.lng*Math.PI/180),a.N(o,o,y),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),a.ap(this._globeViewProjMatrixNoCorrectionInverted,m);const S=a.bo();this._cameraPosition=a.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/t,a.bv(this._cameraPosition,this._cameraPosition,S,-this.rollInRadians),a.bw(this._cameraPosition,this._cameraPosition,S,this.pitchInRadians),a.bv(this._cameraPosition,this._cameraPosition,S,-this.bearingInRadians),a.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bw(this._cameraPosition,this._cameraPosition,S,-this.center.lat*Math.PI/180),a.bx(this._cameraPosition,this._cameraPosition,S,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const P=a.b4(this._globeViewProjMatrixNoCorrectionInverted);a.N(P,P,[1,1,-1]),this._cachedFrustum=Ir.fromInvProjectionMatrix(P,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){a.w("calculateFogMatrix is not supported on globe projection.");const o=a.b9();return a.af(o),o}getVisibleUnwrappedCoordinates(t){return[new a.b1(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=sr(t);a.aQ(m,m,1+o/a.bt);const p=a.bu();return a.av(p,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(t){}getBounds(){const t=.5*this.width,o=.5*this.height,m=[new a.P(0,0),new a.P(t,0),new a.P(this.width,0),new a.P(this.width,o),new a.P(this.width,this.height),new a.P(t,this.height),new a.P(0,this.height),new a.P(0,o)],p=[];for(const U of m)p.push(this.unprojectScreenPoint(U));let y=0,S=0,P=0,M=0;const L=this.center;for(const U of p){const N=a.bz(L.lng,U.lng),W=a.bz(L.lat,U.lat);N<S&&(S=N),N>y&&(y=N),W<M&&(M=W),W>P&&(P=W)}const V=[L.lng+S,L.lat+M,L.lng+y,L.lat+P];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new le(V)}getConstrained(t,o){const m=a.ag(t.lat,-85.051129,a.ah),p=a.ag(+o,this.minZoom+qi(0,m),this.maxZoom);return{center:new a.S(t.lng,m),zoom:p}}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}setLocationAtPoint(t,o){const m=sr(this.unprojectScreenPoint(o)),p=sr(t),y=a.bo();a.bA(y);const S=a.bo();a.bx(S,m,y,-this.center.lng*Math.PI/180),a.bw(S,S,y,this.center.lat*Math.PI/180);const P=p[0]*p[0]+p[2]*p[2],M=S[0]*S[0];if(P<M)return;const L=Math.sqrt(P-M),V=-L,U=a.bB(p[0],p[2],S[0],L),N=a.bB(p[0],p[2],S[0],V),W=a.bo();a.bx(W,p,y,-U);const Q=a.bB(W[1],W[2],S[1],S[2]),ve=a.bo();a.bx(ve,p,y,-N);const ge=a.bB(ve[1],ve[2],S[1],S[2]),ye=.5*Math.PI,we=Q>=-ye&&Q<=ye,Ie=ge>=-ye&&ge<=ye;let Te,De;if(we&&Ie){const at=this.center.lng*Math.PI/180,et=this.center.lat*Math.PI/180;a.bC(U,at)+a.bC(Q,et)<a.bC(N,at)+a.bC(ge,et)?(Te=U,De=Q):(Te=N,De=ge)}else if(we)Te=U,De=Q;else{if(!Ie)return;Te=N,De=ge}const Ve=Te/Math.PI*180,ke=De/Math.PI*180,Ge=this.center.lat;this.setCenter(new a.S(Ve,a.ag(ke,-90,90))),this.setZoom(this.zoom+qi(Ge,this.center.lat))}locationToScreenPoint(t,o){const m=sr(t);if(o){const p=o.getElevationForLngLatZoom(t,this._helper._tileZoom);a.aQ(m,m,1+p/a.bt)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(t){const o=a.bu();return a.av(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new a.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m)return m}return a.a0.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(t,o){const m=this._cameraPosition,p=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(m,p)}getRayDirectionFromPixel(t){const o=a.bu();o[0]=t.x/this.width*2-1,o[1]=-1*(t.y/this.height*2-1),o[2]=1,o[3]=1,a.av(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const m=a.bo();m[0]=o[0]-this._cameraPosition[0],m[1]=o[1]-this._cameraPosition[1],m[2]=o[2]-this._cameraPosition[2];const p=a.bo();return a.aU(p,m),p}isSurfacePointVisible(t){const o=this._cachedClippingPlane;return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const o=a.bu();return a.av(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(t,o){const m=a.aW(t,o),p=a.bo(),y=a.bo();a.aQ(y,o,m),a.aT(p,t,y);const S=1-a.aW(p,p);if(S<0)return null;const P=a.aW(t,t)-1,M=-m+(m<0?1:-1)*Math.sqrt(S),L=P/M,V=M;return{tMin:Math.min(L,V),tMax:Math.max(L,V)}}unprojectScreenPoint(t){const o=this._cameraPosition,m=this.getRayDirectionFromPixel(t),p=this.rayPlanetIntersection(o,m);if(p){const V=a.bo();a.aR(V,o,[m[0]*p.tMin,m[1]*p.tMin,m[2]*p.tMin]);const U=a.bo();return a.aU(U,V),Nl(U)}const y=this._cachedClippingPlane,S=y[0]*m[0]+y[1]*m[1]+y[2]*m[2],P=-a.b0(y,o)/S,M=a.bo();if(P>0)a.aR(M,o,[m[0]*P,m[1]*P,m[2]*P]);else{const V=a.bo();a.aR(V,o,[2*m[0],2*m[1],2*m[2]]);const U=a.b0(this._cachedClippingPlane,V);a.aT(M,V,[this._cachedClippingPlane[0]*U,this._cachedClippingPlane[1]*U,this._cachedClippingPlane[2]*U])}const L=function(V){const U=a.bo();return U[0]=V[0]*-V[3],U[1]=V[1]*-V[3],U[2]=V[2]*-V[3],{center:U,radius:Math.sqrt(1-V[3]*V[3])}}(y);return Nl(function(V,U,N){const W=a.bo();a.aT(W,N,V);const Q=a.bo();return a.bp(Q,V,W,U/a.a_(W)),Q}(L.center,L.radius,M))}getMatrixForModel(t,o){const m=a.S.convert(t),p=1/a.bt,y=a.b8();return a.by(y,y,m.lng/180*Math.PI),a.b6(y,y,-m.lat/180*Math.PI),a.M(y,y,[0,0,1+o/a.bt]),a.b6(y,y,.5*Math.PI),a.N(y,y,[p,p,p]),y}getProjectionDataForCustomLayer(t=!0){const o=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:t});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(t){}}class ua{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,o){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Fl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,o)=>this.getConstrained(t,o)}),this._globeness=1,this._mercatorTransform=new Gi,this._verticalPerspectiveTransform=new $o}clone(){const t=new ua;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const o=this._mercatorTransform.getProjectionData(t),m=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:o.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return a.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,o,m){const p=this._mercatorTransform.getPitchedTextCorrection(t,o,m),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,o,m);return a.bj(p,y,this._globeness)}projectTileCoordinates(t,o,m,p){return this.currentTransform.projectTileCoordinates(t,o,m,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){return this.currentTransform.lngLatToCameraDepth(t,o)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}getConstrained(t,o){return this.currentTransform.getConstrained(t,o)}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}setLocationAtPoint(t,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,o){return this.currentTransform.locationToScreenPoint(t,o)}screenPointToMercatorCoordinate(t,o){return this.currentTransform.screenPointToMercatorCoordinate(t,o)}screenPointToLocation(t,o){return this.currentTransform.screenPointToLocation(t,o)}isPointOnMapSurface(t,o){return this.currentTransform.isPointOnMapSurface(t,o)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,o){return this.currentTransform.getMatrixForModel(t,o)}getProjectionDataForCustomLayer(t=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return o;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return m.fallbackMatrix=o.mainMatrix,m}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Kr{get useGlobeControls(){return!0}handlePanInertia(t,o){const m=Ul(t,o);return Math.abs(m.lng-o.center.lng)>180&&(m.lng=o.center.lng+179.5*Math.sign(m.lng-o.center.lng)),{easingCenter:m,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,o){const m=t.around,p=o.screenPointToLocation(m);t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta);const y=o.zoom;t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta);const S=o.zoom-y;if(S===0)return;const P=a.bz(o.center.lng,p.lng),M=P/(Math.abs(P/180)+1),L=a.bz(o.center.lat,p.lat),V=o.getRayDirectionFromPixel(m),U=o.cameraPosition,N=-1*a.aW(U,V),W=a.bo();a.aR(W,U,[V[0]*N,V[1]*N,V[2]*N]);const Q=a.aY(W)-1,ve=Math.exp(.5*-Math.max(Q-.3,0)),ge=Bo(o.worldSize,o.center.lat)/Math.min(o.width,o.height),ye=a.bm(ge,.9,.5,1,.25),we=(1-a.ae(-S))*Math.min(ve,ye),Ie=o.center.lat,Te=o.zoom,De=new a.S(o.center.lng+M*we,a.ag(o.center.lat+L*we,-85.051129,a.ah));o.setLocationAtPoint(p,m);const Ve=o.center,ke=a.bm(Math.abs(P),45,85,0,1),Ge=a.bm(ge,.75,.35,0,1),at=Math.pow(Math.max(ke,Ge),.25),et=a.bz(Ve.lng,De.lng),nt=a.bz(Ve.lat,De.lat);o.setCenter(new a.S(Ve.lng+et*at,Ve.lat+nt*at).wrap()),o.setZoom(Te+qi(Ie,o.center.lat))}handleMapControlsPan(t,o,m){if(!t.panDelta)return;const p=o.center.lat,y=o.zoom;o.setCenter(Ul(t.panDelta,o).wrap()),o.setZoom(y+qi(p,o.center.lat))}cameraForBoxAndBearing(t,o,m,p,y){const S=xi(t,o,m,p,y),P=o.left/y.width*2-1,M=(y.width-o.right)/y.width*2-1,L=o.top/y.height*-2+1,V=(y.height-o.bottom)/y.height*-2+1,U=a.bz(m.getWest(),m.getEast())<0,N=U?m.getEast():m.getWest(),W=U?m.getWest():m.getEast(),Q=Math.max(m.getNorth(),m.getSouth()),ve=Math.min(m.getNorth(),m.getSouth()),ge=N+.5*a.bz(N,W),ye=Q+.5*a.bz(Q,ve),we=y.clone();we.setCenter(S.center),we.setBearing(S.bearing),we.setPitch(0),we.setRoll(0),we.setZoom(S.zoom);const Ie=we.modelViewProjectionMatrix,Te=[sr(m.getNorthWest()),sr(m.getNorthEast()),sr(m.getSouthWest()),sr(m.getSouthEast()),sr(new a.S(W,ye)),sr(new a.S(N,ye)),sr(new a.S(ge,Q)),sr(new a.S(ge,ve))],De=sr(S.center);let Ve=Number.POSITIVE_INFINITY;for(const ke of Te)P<0&&(Ve=Kr.getLesserNonNegativeNonNull(Ve,Kr.solveVectorScale(ke,De,Ie,"x",P))),M>0&&(Ve=Kr.getLesserNonNegativeNonNull(Ve,Kr.solveVectorScale(ke,De,Ie,"x",M))),L>0&&(Ve=Kr.getLesserNonNegativeNonNull(Ve,Kr.solveVectorScale(ke,De,Ie,"y",L))),V<0&&(Ve=Kr.getLesserNonNegativeNonNull(Ve,Kr.solveVectorScale(ke,De,Ie,"y",V)));if(Number.isFinite(Ve)&&Ve!==0)return S.zoom=we.zoom+a.aj(Ve),S;Ar()}handleJumpToCenterZoom(t,o){const m=t.center.lat,p=t.getConstrained(o.center?a.S.convert(o.center):t.center,t.zoom).center;t.setCenter(p.wrap());const y=o.zoom!==void 0?+o.zoom:t.zoom+qi(m,p.lat);t.zoom!==y&&t.setZoom(y)}handleEaseTo(t,o){const m=t.zoom,p=t.center,y=t.padding,S={roll:t.roll,pitch:t.pitch,bearing:t.bearing},P={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},M=o.zoom!==void 0,L=!t.isPaddingEqual(o.padding);let V=!1;const U=o.center?a.S.convert(o.center):p,N=t.getConstrained(U,m).center;as(t,N);const W=t.clone();W.setCenter(N),W.setZoom(M?+o.zoom:m+qi(p.lat,U.lat)),W.setBearing(o.bearing);const Q=new a.P(a.ag(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),a.ag(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));W.setLocationAtPoint(N,Q);const ve=(o.offset&&o.offsetAsPoint.mag())>0?W.center:N,ge=M?+o.zoom:m+qi(p.lat,ve.lat),ye=m+qi(p.lat,0),we=ge+qi(ve.lat,0),Ie=a.bz(p.lng,ve.lng),Te=a.bz(p.lat,ve.lat),De=a.ae(we-ye);return V=ge!==m,{easeFunc:Ve=>{if(a.bd(S,P)||ar({startEulerAngles:S,endEulerAngles:P,tr:t,k:Ve,useSlerp:S.roll!=P.roll}),L&&t.interpolatePadding(y,o.padding,Ve),o.around)a.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(o.around,o.aroundPoint);else{const ke=we>ye?Math.min(2,De):Math.max(.5,De),Ge=Math.pow(ke,1-Ve),at=Fo(p,Ie,Te,Ve*Ge);t.setCenter(at.wrap())}if(V){const ke=a.C.number(ye,we,Ve)+qi(0,t.center.lat);t.setZoom(ke)}},isZooming:V,elevationCenter:ve}}handleFlyTo(t,o){const m=o.zoom!==void 0,p=t.center,y=t.zoom,S=t.padding,P=!t.isPaddingEqual(o.padding),M=t.getConstrained(a.S.convert(o.center||o.locationAtOffset),y).center,L=m?+o.zoom:t.zoom+qi(t.center.lat,M.lat),V=t.clone();V.setCenter(M),V.setZoom(L),V.setBearing(o.bearing);const U=new a.P(a.ag(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),a.ag(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));V.setLocationAtPoint(M,U);const N=V.center;as(t,N);const W=function(Te,De,Ve){const ke=sr(De),Ge=sr(Ve),at=a.aW(ke,Ge),et=Math.acos(at),nt=jl(Te);return et/(2*Math.PI)*nt}(t,p,N),Q=y+qi(p.lat,0),ve=L+qi(N.lat,0),ge=a.ae(ve-Q);let ye;if(typeof o.minZoom=="number"){const Te=+o.minZoom+qi(N.lat,0),De=Math.min(Te,Q,ve)+qi(0,N.lat),Ve=t.getConstrained(N,De).zoom+qi(N.lat,0);ye=a.ae(Ve-Q)}const we=a.bz(p.lng,N.lng),Ie=a.bz(p.lat,N.lat);return{easeFunc:(Te,De,Ve,ke)=>{const Ge=Fo(p,we,Ie,Ve);P&&t.interpolatePadding(S,o.padding,Te);const at=Te===1?N:Ge;t.setCenter(at.wrap());const et=Q+a.aj(De);t.setZoom(Te===1?L:et+qi(0,at.lat))},scaleOfZoom:ge,targetCenter:N,scaleOfMinZoom:ye,pixelPathLength:W}}static solveVectorScale(t,o,m,p,y){const S=p==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],P=[m[3],m[7],m[11],m[15]],M=t[0]*S[0]+t[1]*S[1]+t[2]*S[2],L=t[0]*P[0]+t[1]*P[1]+t[2]*P[2],V=o[0]*S[0]+o[1]*S[1]+o[2]*S[2],U=o[0]*P[0]+o[1]*P[1]+o[2]*P[2];return V+y*L===M+y*U||P[3]*(M-V)+S[3]*(U-L)+M*U==V*L?null:(V+S[3]-y*U-y*P[3])/(V-M-y*U+y*L)}static getLesserNonNegativeNonNull(t,o){return o!==null&&o>=0&&o<t?o:t}}class uh{constructor(t){this._globe=t,this._mercatorCameraHelper=new pc,this._verticalPerspectiveCameraHelper=new Kr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,o){return this.currentHelper.handlePanInertia(t,o)}handleMapControlsRollPitchBearingZoom(t,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,o)}handleMapControlsPan(t,o,m){this.currentHelper.handleMapControlsPan(t,o,m)}cameraForBoxAndBearing(t,o,m,p,y){return this.currentHelper.cameraForBoxAndBearing(t,o,m,p,y)}handleJumpToCenterZoom(t,o){this.currentHelper.handleJumpToCenterZoom(t,o)}handleEaseTo(t,o){return this.currentHelper.handleEaseTo(t,o)}handleFlyTo(t,o){return this.currentHelper.handleFlyTo(t,o)}}const ql=(v,t)=>a.y(v,t&&t.filter(o=>o.identifier!=="source.canvas")),jo=a.bD();class ch extends a.E{constructor(t,o={}){super(),this._rtlPluginLoaded=()=>{for(const m in this.sourceCaches){const p=this.sourceCaches[m].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[m].reload()}},this.map=t,this.dispatcher=new xt(Tt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(m,p)=>this.getGlyphs(m,p)),this.dispatcher.registerMessageHandler("GI",(m,p)=>this.getImages(m,p)),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new be(t._requestManager,o.localIdeographFontFamily),this.lineAtlas=new mt(256,512),this.crossTileSymbolIndex=new hc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bF()),En().on(Jt,this._rtlPluginLoaded),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const p=this.sourceCaches[m.sourceId];if(!p)return;const y=p.getSource();if(y&&y.vectorLayerIds)for(const S in this._layers){const P=this._layers[S];P.source===y.id&&this._validateLayer(P)}})}setGlobalStateProperty(t,o){var m,p,y;this._checkLoaded();const S=o===null?(y=(p=(m=this.stylesheet.state)===null||m===void 0?void 0:m[t])===null||p===void 0?void 0:p.default)!==null&&y!==void 0?y:null:o;if(a.bG(S,this._globalState[t]))return this;this._globalState[t]=S;const P=this._findGlobalStateAffectedSources([t]);for(const M in this.sourceCaches)P.has(M)&&(this._reloadSource(M),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const o=[];for(const p in t)!a.bG(this._globalState[p],t[p].default)&&(o.push(p),this._globalState[p]=t[p].default);const m=this._findGlobalStateAffectedSources(o);for(const p in this.sourceCaches)m.has(p)&&(this._reloadSource(p),this._changed=!0)}_findGlobalStateAffectedSources(t){if(t.length===0)return new Set;const o=new Set;for(const m in this._layers){const p=this._layers[m],y=p.getLayoutAffectingGlobalStateRefs();for(const S of t)y.has(S)&&o.add(p.source)}return o}loadURL(t,o={},m){this.fire(new a.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const p=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;a.j(p,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,o,m)}).catch(S=>{this._loadStyleRequest=null,S&&!y.signal.aborted&&this.fire(new a.k(S))})}loadJSON(t,o={},m){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(t,o,m)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(jo,{validate:!1})}_load(t,o,m){var p,y,S;const P=o.transformStyle?o.transformStyle(m,t):t;if(!o.validate||!ql(this,a.z(P))){this._loaded=!0,this.stylesheet=P;for(const M in P.sources)this.addSource(M,P.sources[M],{validate:!1});P.sprite?this._loadSprite(P.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(P.glyphs),this._createLayers(),this.light=new Fe(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new ft(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.setGlobalState((S=this.stylesheet.state)!==null&&S!==void 0?S:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const t=a.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of t){const m=a.bI(o);m.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=m}}_loadSprite(t,o=!1,m=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,S,P,M){return a._(this,void 0,void 0,function*(){const L=ae(y),V=P>1?"@2x":"",U={},N={};for(const{id:W,url:Q}of L){const ve=S.transformRequest(ue(Q,V,".json"),"SpriteJSON");U[W]=a.j(ve,M);const ge=S.transformRequest(ue(Q,V,".png"),"SpriteImage");N[W]=X.getImage(ge,M)}return yield Promise.all([...Object.values(U),...Object.values(N)]),function(W,Q){return a._(this,void 0,void 0,function*(){const ve={};for(const ge in W){ve[ge]={};const ye=A.getImageCanvasContext((yield Q[ge]).data),we=(yield W[ge]).data;for(const Ie in we){const{width:Te,height:De,x:Ve,y:ke,sdf:Ge,pixelRatio:at,stretchX:et,stretchY:nt,content:ot,textFitWidth:$t,textFitHeight:Ot}=we[Ie];ve[ge][Ie]={data:null,pixelRatio:at,sdf:Ge,stretchX:et,stretchY:nt,content:ot,textFitWidth:$t,textFitHeight:Ot,spriteData:{width:Te,height:De,x:Ve,y:ke,context:ye}}}}return ve})}(U,N)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const S in y){this._spritesImagesIds[S]=[];const P=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(M=>!(M in y)):[];for(const M of P)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in y[S]){const L=S==="default"?M:`${S}:${M}`;this._spritesImagesIds[S].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,y[S][M],!1):this.imageManager.addImage(L,y[S][M]),o&&(this._changedImages[L]=!0)}}}).catch(y=>{this._spriteRequest=null,p=y,this.fire(new a.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),m&&m(p)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(t){const o=this.sourceCaches[t.source];if(!o)return;const m=t.sourceLayer;if(!m)return;const p=o.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.k(new Error(`Source layer "${m}" does not exist on source "${p.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,o=!1){const m=this._serializedAllLayers();if(!t||t.length===0)return Object.values(o?a.bJ(m):m);const p=[];for(const y of t)if(m[y]){const S=o?a.bJ(m[y]):m[y];p.push(S)}return p}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const o=Object.keys(this._layers);for(const m of o){const p=this._layers[m];p.type!=="custom"&&(t[m]=p.serialize())}return t}hasTransitions(){var t,o,m;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(o){const p=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(p.length||y.length)&&this._updateWorkerLayers(p,y);for(const S in this._updatedSources){const P=this._updatedSources[S];if(P==="reload")this._reloadSource(S);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const m={};for(const p in this.sourceCaches){const y=this.sourceCaches[p];m[p]=y.used,y.used=!1}for(const p of this._order){const y=this._layers[p];y.recalculate(t,this._availableImages),!y.isHidden(t.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const p in m){const y=this.sourceCaches[p];!!m[p]!=!!y.used&&y.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,o&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,o={}){var m;this._checkLoaded();const p=this.serialize();if(t=o.transformStyle?o.transformStyle(p,t):t,((m=o.validate)===null||m===void 0||m)&&ql(this,a.z(t)))return!1;(t=a.bJ(t)).layers=a.bH(t.layers);const y=a.bK(p,t),S=this._getOperationsToPerform(y);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const P of S.operations)P();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const o=[],m=[];for(const p of t)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":o.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":o.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":o.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":o.push(()=>this.setGlobalState.apply(this,p.args));break;case"setTransition":o.push(()=>{});break;default:m.push(p.command)}return{operations:o,unimplemented:m}}addImage(t,o){if(this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,m={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(a.z.source,`sources.${t}`,o,null,m))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const p=this.sourceCaches[t]=new Ct(t,o,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:t})),p.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===t)return this.fire(new a.k(new Error(`Source "${t}" cannot be removed while layer "${m}" is using it.`)));const o=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],o.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const m=this.sourceCaches[t].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(o),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,o,m={}){this._checkLoaded();const p=t.id;if(this.getLayer(p))return void this.fire(new a.k(new Error(`Layer "${p}" already exists on this map.`)));let y;if(t.type==="custom"){if(ql(this,a.bL(t)))return;y=a.bI(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(p,t.source),t=a.bJ(t),t=a.e(t,{source:p})),this._validate(a.z.layer,`layers.${p}`,t,{arrayIndex:-1},m))return;y=a.bI(t),this._validateLayer(y),y.setEventedParent(this,{layer:{id:p}})}const S=o?this._order.indexOf(o):this._order.length;if(o&&S===-1)this.fire(new a.k(new Error(`Cannot add layer "${p}" before non-existing layer "${o}".`)));else{if(this._order.splice(S,0,p),this._layerOrderChanged=!0,this._layers[p]=y,this._removedLayers[p]&&y.source&&y.type!=="custom"){const P=this._removedLayers[p];delete this._removedLayers[p],P.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new a.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const m=this._order.indexOf(t);this._order.splice(m,1);const p=o?this._order.indexOf(o):this._order.length;o&&p===-1?this.fire(new a.k(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(p,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const m=this._order.indexOf(t);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,m){this._checkLoaded();const p=this.getLayer(t);p?p.minzoom===o&&p.maxzoom===m||(o!=null&&(p.minzoom=o),m!=null&&(p.maxzoom=m),this._updateLayer(p)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,m={}){this._checkLoaded();const p=this.getLayer(t);if(p){if(!a.bG(p.filter,o))return o==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(a.z.filter,`layers.${p.id}.filter`,o,null,m)||(p.setFilter(a.bJ(o)),this._updateLayer(p)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return a.bJ(this.getLayer(t).filter)}setLayoutProperty(t,o,m,p={}){this._checkLoaded();const y=this.getLayer(t);y?a.bG(y.getLayoutProperty(o),m)||(y.setLayoutProperty(o,m,p),this._updateLayer(y)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const m=this.getLayer(t);if(m)return m.getLayoutProperty(o);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,m,p={}){this._checkLoaded();const y=this.getLayer(t);y?a.bG(y.getPaintProperty(o),m)||(y.setPaintProperty(o,m,p)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const m=t.source,p=t.sourceLayer,y=this.sourceCaches[m];if(y===void 0)return void this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)));const S=y.getSource().type;S==="geojson"&&p?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||p?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(p,t.id,o)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const m=t.source,p=this.sourceCaches[m];if(p===void 0)return void this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)));const y=p.getSource().type,S=y==="vector"?t.sourceLayer:void 0;y!=="vector"||S?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(S,t.id,o):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,m=t.sourceLayer,p=this.sourceCaches[o];if(p!==void 0)return p.getSource().type!=="vector"||m?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(m,t.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=a.bM(this.sourceCaches,y=>y.serialize()),o=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,p=this.stylesheet;return a.bN({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:t,layers:o,terrain:m},y=>y!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=S=>this._layers[S].type==="fill-extrusion",m={},p=[];for(let S=this._order.length-1;S>=0;S--){const P=this._order[S];if(o(P)){m[P]=S;for(const M of t){const L=M[P];if(L)for(const V of L)p.push(V)}}}p.sort((S,P)=>P.intersectionZ-S.intersectionZ);const y=[];for(let S=this._order.length-1;S>=0;S--){const P=this._order[S];if(o(P))for(let M=p.length-1;M>=0;M--){const L=p[M].feature;if(m[L.layer.id]<S)break;y.push(L),p.pop()}else for(const M of t){const L=M[P];if(L)for(const V of L)y.push(V.feature)}}return y}queryRenderedFeatures(t,o,m){o&&o.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",o.filter,null,o);const p={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const L of o.layers){const V=this._layers[L];if(!V)return this.fire(new a.k(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];p[V.source]=!0}}const y=[];o.availableImages=this._availableImages;const S=this._serializedAllLayers(),P=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,M=Object.assign(Object.assign({},o),{layers:P});for(const L in this.sourceCaches)o.layers&&!p[L]||y.push(st(this.sourceCaches[L],this._layers,S,t,M,m,this.map.terrain?(V,U,N)=>this.map.terrain.getElevation(V,U,N):void 0));return this.placement&&y.push(function(L,V,U,N,W,Q,ve){const ge={},ye=Q.queryRenderedSymbols(N),we=[];for(const Ie of Object.keys(ye).map(Number))we.push(ve[Ie]);we.sort(Ye);for(const Ie of we){const Te=Ie.featureIndex.lookupSymbolFeatures(ye[Ie.bucketInstanceId],V,Ie.bucketIndex,Ie.sourceLayerIndex,W.filter,W.layers,W.availableImages,L);for(const De in Te){const Ve=ge[De]=ge[De]||[],ke=Te[De];ke.sort((Ge,at)=>{const et=Ie.featureSortOrder;if(et){const nt=et.indexOf(Ge.featureIndex);return et.indexOf(at.featureIndex)-nt}return at.featureIndex-Ge.featureIndex});for(const Ge of ke)Ve.push(Ge)}}return function(Ie,Te,De){for(const Ve in Ie)for(const ke of Ie[Ve])St(ke,De[Te[Ve].source]);return Ie}(ge,L,U)}(this._layers,S,this.sourceCaches,t,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(t,o){o&&o.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",o.filter,null,o);const m=this.sourceCaches[t];return m?function(p,y){const S=p.getRenderableIds().map(L=>p.getTileByID(L)),P=[],M={};for(let L=0;L<S.length;L++){const V=S[L],U=V.tileID.canonical.key;M[U]||(M[U]=!0,V.querySourceFeatures(P,y))}return P}(m,o):[]}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const m=this.light.getLight();let p=!1;for(const S in t)if(!a.bG(t[S],m[S])){p=!0;break}if(!p)return;const y={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(y)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,o={}){this._checkLoaded();const m=this.getSky();let p=!1;if(!t&&!m)return;if(t&&!m)p=!0;else if(!t&&m)p=!0;else for(const S in t)if(!a.bG(t[S],m[S])){p=!0;break}if(!p)return;const y={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,o),this.sky.updateTransitions(y)}_setProjectionInternal(t){const o=function(m){if(Array.isArray(m)){const p=new $l({type:m});return{projection:p,transform:new ua,cameraHelper:new uh(p)}}switch(m){case"mercator":return{projection:new ah,transform:new Gi,cameraHelper:new pc};case"globe":{const p=new $l({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new ua,cameraHelper:new uh(p)}}case"vertical-perspective":return{projection:new Rm,transform:new $o,cameraHelper:new Kr};default:return a.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new ah,transform:new Gi,cameraHelper:new pc}}}(t);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const m in this.sourceCaches)this.sourceCaches[m].reload()}_validate(t,o,m,p,y={}){return(!y||y.validate!==!1)&&ql(this,t.call(a.z,a.e({key:o,style:this.serialize(),value:m,styleSpec:a.v},p)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),En().off(Jt,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const m=this.sourceCaches[o];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const o in this.sourceCaches)this.sourceCaches[o].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,o,m,p,y=!1){let S=!1,P=!1;const M={};for(const L of this._order){const V=this._layers[L];if(V.type!=="symbol")continue;if(!M[V.source]){const N=this.sourceCaches[V.source];M[V.source]=N.getRenderableIds(!0).map(W=>N.getTileByID(W)).sort((W,Q)=>Q.tileID.overscaledZ-W.tileID.overscaledZ||(W.tileID.isLessThan(Q.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(V,M[V.source],t.center.lng);S=S||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),t.zoom))&&(this.pauseablePlacement=new Mm(t,this.map.terrain,this._order,y,o,m,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),P=!0),S&&this.pauseablePlacement.placement.setStale()),P||S)for(const L of this._order){const V=this._layers[L];V.type==="symbol"&&this.placement.updateLayerOpacities(V,M[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,o){return a._(this,void 0,void 0,function*(){const m=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,o.icons),m})}getGlyphs(t,o){return a._(this,void 0,void 0,function*(){const m=yield this.glyphManager.getGlyphs(o.stacks),p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,o={}){this._checkLoaded(),t&&this._validate(a.z.glyphs,"glyphs",t,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,o,m={},p){this._checkLoaded();const y=[{id:t,url:o}],S=[...ae(this.stylesheet.sprite),...y];this._validate(a.z.sprite,"sprite",S,null,m)||(this.stylesheet.sprite=S,this._loadSprite(y,!0,p))}removeSprite(t){this._checkLoaded();const o=ae(this.stylesheet.sprite);if(o.find(m=>m.id===t)){if(this._spritesImagesIds[t])for(const m of this._spritesImagesIds[t])this.imageManager.removeImage(m),this._changedImages[m]=!0;o.splice(o.findIndex(m=>m.id===t),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return ae(this.stylesheet.sprite)}setSprite(t,o={},m){this._checkLoaded(),t&&this._validate(a.z.sprite,"sprite",t,null,o)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,m):(this._unloadSprite(),m&&m(null)))}}var vv=a.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class yv{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,m,p,y,S,P,M,L){this.context=t;let V=this.boundPaintVertexBuffers.length!==p.length;for(let U=0;!V&&U<p.length;U++)this.boundPaintVertexBuffers[U]!==p[U]&&(V=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==m||V||this.boundIndexBuffer!==y||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==L?this.freshBind(o,m,p,y,S,P,M,L):(t.bindVertexArray.set(this.vao),P&&P.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),L&&L.bind())}freshBind(t,o,m,p,y,S,P,M){const L=t.numAttributes,V=this.context,U=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=p,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=M,o.enableAttributes(U,t);for(const N of m)N.enableAttributes(U,t);S&&S.enableAttributes(U,t),P&&P.enableAttributes(U,t),M&&M.enableAttributes(U,t),o.bind(),o.setVertexAttribPointers(U,t,y);for(const N of m)N.bind(),N.setVertexAttribPointers(U,t,y);S&&(S.bind(),S.setVertexAttribPointers(U,t,y)),p&&p.bind(),P&&(P.bind(),P.setVertexAttribPointers(U,t,y)),M&&(M.bind(),M.setVertexAttribPointers(U,t,y)),V.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const _v=(v,t,o,m,p)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:t,u_fog_color:o?o.properties.get("fog-color"):a.be.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:o?o.calculateFogBlendOpacity(m):0,u_horizon_color:o?o.properties.get("horizon-color"):a.be.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),bv={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function gc(v){const t=[];for(let o=0;o<v.length;o++){if(v[o]===null)continue;const m=v[o].split(" ");t.push(m.pop())}return t}class vc{constructor(t,o,m,p,y,S,P,M,L=[]){const V=t.gl;this.program=V.createProgram();const U=gc(o.staticAttributes),N=m?m.getBinderAttributes():[],W=U.concat(N),Q=Ga.prelude.staticUniforms?gc(Ga.prelude.staticUniforms):[],ve=P.staticUniforms?gc(P.staticUniforms):[],ge=o.staticUniforms?gc(o.staticUniforms):[],ye=m?m.getBinderUniforms():[],we=Q.concat(ve).concat(ge).concat(ye),Ie=[];for(const et of we)Ie.indexOf(et)<0&&Ie.push(et);const Te=m?m.defines():[];Or(V)&&Te.unshift("#version 300 es"),y&&Te.push("#define OVERDRAW_INSPECTOR;"),S&&Te.push("#define TERRAIN3D;"),M&&Te.push(M),L&&Te.push(...L);let De=Te.concat(Ga.prelude.fragmentSource,P.fragmentSource,o.fragmentSource).join(`
`),Ve=Te.concat(Ga.prelude.vertexSource,P.vertexSource,o.vertexSource).join(`
`);Or(V)||(De=function(et){return et.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(De),Ve=function(et){return et.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ve));const ke=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(ke,De),V.compileShader(ke),!V.getShaderParameter(ke,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(ke)}`);V.attachShader(this.program,ke);const Ge=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ge,Ve),V.compileShader(Ge),!V.getShaderParameter(Ge,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(Ge)}`);V.attachShader(this.program,Ge),this.attributes={};const at={};this.numAttributes=W.length;for(let et=0;et<this.numAttributes;et++)W[et]&&(V.bindAttribLocation(this.program,et,W[et]),this.attributes[W[et]]=et);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(Ge),V.deleteShader(ke);for(let et=0;et<Ie.length;et++){const nt=Ie[et];if(nt&&!at[nt]){const ot=V.getUniformLocation(this.program,nt);ot&&(at[nt]=ot)}}this.fixedUniforms=p(t,at),this.terrainUniforms=((et,nt)=>({u_depth:new a.bO(et,nt.u_depth),u_terrain:new a.bO(et,nt.u_terrain),u_terrain_dim:new a.bf(et,nt.u_terrain_dim),u_terrain_matrix:new a.bQ(et,nt.u_terrain_matrix),u_terrain_unpack:new a.bR(et,nt.u_terrain_unpack),u_terrain_exaggeration:new a.bf(et,nt.u_terrain_exaggeration)}))(t,at),this.projectionUniforms=((et,nt)=>({u_projection_matrix:new a.bQ(et,nt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bR(et,nt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bR(et,nt.u_projection_clipping_plane),u_projection_transition:new a.bf(et,nt.u_projection_transition),u_projection_fallback_matrix:new a.bQ(et,nt.u_projection_fallback_matrix)}))(t,at),this.binderUniforms=m?m.getUniforms(t,at):[]}draw(t,o,m,p,y,S,P,M,L,V,U,N,W,Q,ve,ge,ye,we,Ie){const Te=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(m),t.setStencilMode(p),t.setColorMode(y),t.setCullFace(S),M){t.activeTexture.set(Te.TEXTURE2),Te.bindTexture(Te.TEXTURE_2D,M.depthTexture),t.activeTexture.set(Te.TEXTURE3),Te.bindTexture(Te.TEXTURE_2D,M.texture);for(const Ve in this.terrainUniforms)this.terrainUniforms[Ve].set(M[Ve])}if(L)for(const Ve in L)this.projectionUniforms[bv[Ve]].set(L[Ve]);if(P)for(const Ve in this.fixedUniforms)this.fixedUniforms[Ve].set(P[Ve]);ge&&ge.setUniforms(t,this.binderUniforms,Q,{zoom:ve});let De=0;switch(o){case Te.LINES:De=2;break;case Te.TRIANGLES:De=3;break;case Te.LINE_STRIP:De=1}for(const Ve of W.get()){const ke=Ve.vaos||(Ve.vaos={});(ke[V]||(ke[V]=new yv)).bind(t,this,U,ge?ge.getPaintVertexBuffers():[],N,Ve.vertexOffset,ye,we,Ie),Te.drawElements(o,Ve.primitiveLength*De,Te.UNSIGNED_SHORT,Ve.primitiveOffset*De*2)}}}function yc(v,t,o){const m=1/a.aB(o,1,t.transform.tileZoom),p=Math.pow(2,o.tileID.overscaledZ),y=o.tileSize*Math.pow(2,t.transform.tileZoom)/p,S=y*(o.tileID.canonical.x+o.tileID.wrap*p),P=y*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[m,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[S>>16,P>>16],u_pixel_coord_lower:[65535&S,65535&P]}}const Hl=(v,t,o,m)=>{const p=v.style.light,y=p.properties.get("position"),S=[y.x,y.y,y.z],P=a.bU();p.properties.get("anchor")==="viewport"&&a.bV(P,v.transform.bearingInRadians),a.bW(S,S,P);const M=v.transform.transformLightDirection(S),L=p.properties.get("color");return{u_lightpos:S,u_lightpos_globe:M,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+t,u_opacity:o,u_fill_translate:m}},dh=(v,t,o,m,p,y,S)=>a.e(Hl(v,t,o,m),yc(y,v,S),{u_height_factor:-Math.pow(2,p.overscaledZ)/S.tileSize/8}),_c=(v,t,o,m)=>a.e(yc(t,v,o),{u_fill_translate:m}),Ha=(v,t)=>({u_world:v,u_fill_translate:t}),xv=(v,t,o,m,p)=>a.e(_c(v,t,o,p),{u_world:m}),hh=(v,t,o,m,p)=>{const y=v.transform;let S,P,M=0;if(o.paint.get("circle-pitch-alignment")==="map"){const L=a.aB(t,1,y.zoom);S=!0,P=[L,L],M=L/(a.$*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*p}else S=!1,P=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+S,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:P,u_globe_extrude_scale:M,u_translate:m}},Wl=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),Zl=v=>({u_viewport_size:[v.width,v.height]}),zm=(v,t=1)=>({u_color:v,u_overlay:0,u_overlay_scale:t}),Kl=(v,t,o,m)=>{const p=a.aB(v,1,t)/(a.$*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:a.aB(v,1,t),u_intensity:o,u_globe_extrude_scale:p}},Bm=(v,t,o,m)=>{const p=a.L();a.bX(p,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:p,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:o,u_color_ramp:m,u_opacity:t.paint.get("heatmap-opacity")}},No=(v,t,o)=>{const m=o.paint.get("hillshade-accent-color");let p;switch(o.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const y=o.getIlluminationProperties();for(let S=0;S<y.directionRadians.length;S++)o.paint.get("hillshade-illumination-anchor")==="viewport"&&(y.directionRadians[S]+=v.transform.bearingInRadians);return{u_image:0,u_latrange:Vm(0,t.tileID),u_exaggeration:o.paint.get("hillshade-exaggeration"),u_altitudes:y.altitudeRadians,u_azimuths:y.directionRadians,u_accent:m,u_method:p,u_highlights:y.highlightColor,u_shadows:y.shadowColor}},wv=(v,t)=>{const o=t.stride,m=a.L();return a.bX(m,0,a.$,-8192,0,0,1),a.M(m,m,[0,-8192,0]),{u_matrix:m,u_image:1,u_dimension:[o,o],u_zoom:v.overscaledZ,u_unpack:t.getUnpackVector()}};function Vm(v,t){const o=Math.pow(2,t.canonical.z),m=t.canonical.y;return[new a.a0(0,m/o).toLngLat().lat,new a.a0(0,(m+1)/o).toLngLat().lat]}const Sv=(v,t)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:v.paint.get("color-relief-opacity")}),bc=(v,t,o,m)=>{const p=v.transform;return{u_translation:ph(v,t,o),u_ratio:m/a.aB(t,1,p.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},fh=(v,t,o,m,p)=>a.e(bc(v,t,o,m),{u_image:0,u_image_height:p}),Om=(v,t,o,m,p)=>{const y=v.transform,S=mh(t,y);return{u_translation:ph(v,t,o),u_texsize:t.imageAtlasTexture.size,u_ratio:m/a.aB(t,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Fm=(v,t,o,m,p,y)=>{const S=v.lineAtlas,P=mh(t,v.transform),M=o.layout.get("line-cap")==="round",L=S.getDash(p.from,M),V=S.getDash(p.to,M),U=L.width*y.fromScale,N=V.width*y.toScale;return a.e(bc(v,t,o,m),{u_patternscale_a:[P/U,-L.height/2],u_patternscale_b:[P/N,-V.height/2],u_sdfgamma:S.width/(256*Math.min(U,N)*v.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:V.y,u_mix:y.t})};function mh(v,t){return 1/a.aB(v,1,t.tileZoom)}function ph(v,t,o){return a.aC(v.transform,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const no=(v,t,o,m,p)=>{return{u_tl_parent:v,u_scale_parent:t,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(S=m.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:$m(m.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var y,S};function $m(v){v*=Math.PI/180;const t=Math.sin(v),o=Math.cos(v);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const gh=(v,t,o,m,p,y,S,P,M,L,V,U,N)=>{const W=S.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:W.width/W.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_label_plane_matrix:P,u_coord_matrix:M,u_is_text:+V,u_pitch_with_map:+m,u_is_along_line:p,u_is_variable_anchor:y,u_texsize:U,u_texture:0,u_translation:L,u_pitched_scale:N}},Uo=(v,t,o,m,p,y,S,P,M,L,V,U,N,W)=>{const Q=S.transform;return a.e(gh(v,t,o,m,p,y,S,P,M,L,V,U,W),{u_gamma_scale:m?Math.cos(Q.pitch*Math.PI/180)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},Cv=(v,t,o,m,p,y,S,P,M,L,V,U,N)=>a.e(Uo(v,t,o,m,p,y,S,P,M,L,!0,V,0,N),{u_texsize_icon:U,u_texture_icon:1}),xc=(v,t)=>({u_opacity:v,u_color:t}),Tv=(v,t,o,m,p)=>a.e(function(y,S,P,M){const L=P.imageManager.getPattern(y.from.toString()),V=P.imageManager.getPattern(y.to.toString()),{width:U,height:N}=P.imageManager.getPixelSize(),W=Math.pow(2,M.tileID.overscaledZ),Q=M.tileSize*Math.pow(2,P.transform.tileZoom)/W,ve=Q*(M.tileID.canonical.x+M.tileID.wrap*W),ge=Q*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[U,N],u_mix:S.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/a.aB(M,1,P.transform.tileZoom),u_pixel_coord_upper:[ve>>16,ge>>16],u_pixel_coord_lower:[65535&ve,65535&ge]}}(o,p,t,m),{u_opacity:v}),jm=(v,t)=>{},Nm={fillExtrusion:(v,t)=>({u_lightpos:new a.bS(v,t.u_lightpos),u_lightpos_globe:new a.bS(v,t.u_lightpos_globe),u_lightintensity:new a.bf(v,t.u_lightintensity),u_lightcolor:new a.bS(v,t.u_lightcolor),u_vertical_gradient:new a.bf(v,t.u_vertical_gradient),u_opacity:new a.bf(v,t.u_opacity),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillExtrusionPattern:(v,t)=>({u_lightpos:new a.bS(v,t.u_lightpos),u_lightpos_globe:new a.bS(v,t.u_lightpos_globe),u_lightintensity:new a.bf(v,t.u_lightintensity),u_lightcolor:new a.bS(v,t.u_lightcolor),u_vertical_gradient:new a.bf(v,t.u_vertical_gradient),u_height_factor:new a.bf(v,t.u_height_factor),u_opacity:new a.bf(v,t.u_opacity),u_fill_translate:new a.bT(v,t.u_fill_translate),u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade)}),fill:(v,t)=>({u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillPattern:(v,t)=>({u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillOutline:(v,t)=>({u_world:new a.bT(v,t.u_world),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillOutlinePattern:(v,t)=>({u_world:new a.bT(v,t.u_world),u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade),u_fill_translate:new a.bT(v,t.u_fill_translate)}),circle:(v,t)=>({u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_scale_with_map:new a.bO(v,t.u_scale_with_map),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_extrude_scale:new a.bT(v,t.u_extrude_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_globe_extrude_scale:new a.bf(v,t.u_globe_extrude_scale),u_translate:new a.bT(v,t.u_translate)}),collisionBox:(v,t)=>({u_pixel_extrude_scale:new a.bT(v,t.u_pixel_extrude_scale)}),collisionCircle:(v,t)=>({u_viewport_size:new a.bT(v,t.u_viewport_size)}),debug:(v,t)=>({u_color:new a.bP(v,t.u_color),u_overlay:new a.bO(v,t.u_overlay),u_overlay_scale:new a.bf(v,t.u_overlay_scale)}),depth:jm,clippingMask:jm,heatmap:(v,t)=>({u_extrude_scale:new a.bf(v,t.u_extrude_scale),u_intensity:new a.bf(v,t.u_intensity),u_globe_extrude_scale:new a.bf(v,t.u_globe_extrude_scale)}),heatmapTexture:(v,t)=>({u_matrix:new a.bQ(v,t.u_matrix),u_world:new a.bT(v,t.u_world),u_image:new a.bO(v,t.u_image),u_color_ramp:new a.bO(v,t.u_color_ramp),u_opacity:new a.bf(v,t.u_opacity)}),hillshade:(v,t)=>({u_image:new a.bO(v,t.u_image),u_latrange:new a.bT(v,t.u_latrange),u_exaggeration:new a.bf(v,t.u_exaggeration),u_altitudes:new a.bZ(v,t.u_altitudes),u_azimuths:new a.bZ(v,t.u_azimuths),u_accent:new a.bP(v,t.u_accent),u_method:new a.bO(v,t.u_method),u_shadows:new a.bY(v,t.u_shadows),u_highlights:new a.bY(v,t.u_highlights)}),hillshadePrepare:(v,t)=>({u_matrix:new a.bQ(v,t.u_matrix),u_image:new a.bO(v,t.u_image),u_dimension:new a.bT(v,t.u_dimension),u_zoom:new a.bf(v,t.u_zoom),u_unpack:new a.bR(v,t.u_unpack)}),colorRelief:(v,t)=>({u_image:new a.bO(v,t.u_image),u_unpack:new a.bR(v,t.u_unpack),u_dimension:new a.bT(v,t.u_dimension),u_elevation_stops:new a.bO(v,t.u_elevation_stops),u_color_stops:new a.bO(v,t.u_color_stops),u_opacity:new a.bf(v,t.u_opacity)}),line:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels)}),lineGradient:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_image:new a.bO(v,t.u_image),u_image_height:new a.bf(v,t.u_image_height)}),linePattern:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_texsize:new a.bT(v,t.u_texsize),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_image:new a.bO(v,t.u_image),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade)}),lineSDF:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_patternscale_a:new a.bT(v,t.u_patternscale_a),u_patternscale_b:new a.bT(v,t.u_patternscale_b),u_sdfgamma:new a.bf(v,t.u_sdfgamma),u_image:new a.bO(v,t.u_image),u_tex_y_a:new a.bf(v,t.u_tex_y_a),u_tex_y_b:new a.bf(v,t.u_tex_y_b),u_mix:new a.bf(v,t.u_mix)}),raster:(v,t)=>({u_tl_parent:new a.bT(v,t.u_tl_parent),u_scale_parent:new a.bf(v,t.u_scale_parent),u_buffer_scale:new a.bf(v,t.u_buffer_scale),u_fade_t:new a.bf(v,t.u_fade_t),u_opacity:new a.bf(v,t.u_opacity),u_image0:new a.bO(v,t.u_image0),u_image1:new a.bO(v,t.u_image1),u_brightness_low:new a.bf(v,t.u_brightness_low),u_brightness_high:new a.bf(v,t.u_brightness_high),u_saturation_factor:new a.bf(v,t.u_saturation_factor),u_contrast_factor:new a.bf(v,t.u_contrast_factor),u_spin_weights:new a.bS(v,t.u_spin_weights),u_coords_top:new a.bR(v,t.u_coords_top),u_coords_bottom:new a.bR(v,t.u_coords_bottom)}),symbolIcon:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texture:new a.bO(v,t.u_texture),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),symbolSDF:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texture:new a.bO(v,t.u_texture),u_gamma_scale:new a.bf(v,t.u_gamma_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_is_halo:new a.bO(v,t.u_is_halo),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),symbolTextAndIcon:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texsize_icon:new a.bT(v,t.u_texsize_icon),u_texture:new a.bO(v,t.u_texture),u_texture_icon:new a.bO(v,t.u_texture_icon),u_gamma_scale:new a.bf(v,t.u_gamma_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_is_halo:new a.bO(v,t.u_is_halo),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),background:(v,t)=>({u_opacity:new a.bf(v,t.u_opacity),u_color:new a.bP(v,t.u_color)}),backgroundPattern:(v,t)=>({u_opacity:new a.bf(v,t.u_opacity),u_image:new a.bO(v,t.u_image),u_pattern_tl_a:new a.bT(v,t.u_pattern_tl_a),u_pattern_br_a:new a.bT(v,t.u_pattern_br_a),u_pattern_tl_b:new a.bT(v,t.u_pattern_tl_b),u_pattern_br_b:new a.bT(v,t.u_pattern_br_b),u_texsize:new a.bT(v,t.u_texsize),u_mix:new a.bf(v,t.u_mix),u_pattern_size_a:new a.bT(v,t.u_pattern_size_a),u_pattern_size_b:new a.bT(v,t.u_pattern_size_b),u_scale_a:new a.bf(v,t.u_scale_a),u_scale_b:new a.bf(v,t.u_scale_b),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bf(v,t.u_tile_units_to_pixels)}),terrain:(v,t)=>({u_texture:new a.bO(v,t.u_texture),u_ele_delta:new a.bf(v,t.u_ele_delta),u_fog_matrix:new a.bQ(v,t.u_fog_matrix),u_fog_color:new a.bP(v,t.u_fog_color),u_fog_ground_blend:new a.bf(v,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bf(v,t.u_fog_ground_blend_opacity),u_horizon_color:new a.bP(v,t.u_horizon_color),u_horizon_fog_blend:new a.bf(v,t.u_horizon_fog_blend),u_is_globe_mode:new a.bf(v,t.u_is_globe_mode)}),terrainDepth:(v,t)=>({u_ele_delta:new a.bf(v,t.u_ele_delta)}),terrainCoords:(v,t)=>({u_texture:new a.bO(v,t.u_texture),u_terrain_coords_id:new a.bf(v,t.u_terrain_coords_id),u_ele_delta:new a.bf(v,t.u_ele_delta)}),projectionErrorMeasurement:(v,t)=>({u_input:new a.bf(v,t.u_input),u_output_expected:new a.bf(v,t.u_output_expected)}),atmosphere:(v,t)=>({u_sun_pos:new a.bS(v,t.u_sun_pos),u_atmosphere_blend:new a.bf(v,t.u_atmosphere_blend),u_globe_position:new a.bS(v,t.u_globe_position),u_globe_radius:new a.bf(v,t.u_globe_radius),u_inv_proj_matrix:new a.bQ(v,t.u_inv_proj_matrix)}),sky:(v,t)=>({u_sky_color:new a.bP(v,t.u_sky_color),u_horizon_color:new a.bP(v,t.u_horizon_color),u_horizon:new a.bT(v,t.u_horizon),u_horizon_normal:new a.bT(v,t.u_horizon_normal),u_sky_horizon_blend:new a.bf(v,t.u_sky_horizon_blend),u_sky_blend:new a.bf(v,t.u_sky_blend)})};class Um{constructor(t,o,m){this.context=t;const p=t.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Gm={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vh{constructor(t,o,m,p){this.length=o.length,this.attributes=m,this.itemSize=o.bytesPerElement,this.dynamicDraw=p,this.context=t;const y=t.gl;this.buffer=y.createBuffer(),t.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let m=0;m<this.attributes.length;m++){const p=o.attributes[this.attributes[m].name];p!==void 0&&t.enableVertexAttribArray(p)}}setVertexAttribPointers(t,o,m){for(let p=0;p<this.attributes.length;p++){const y=this.attributes[p],S=o.attributes[y.name];S!==void 0&&t.vertexAttribPointer(S,y.components,t[Gm[y.type]],!1,this.itemSize,y.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Wn{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wc extends Wn{getDefault(){return a.be.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ss extends Wn{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class yh extends Wn{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class _h extends Wn{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class bh extends Wn{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class qm extends Wn{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class xh extends Wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class io extends Wn{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class wh extends Wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class kv extends Wn{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Pv extends Wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class Iv extends Wn{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Av extends Wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class Hm extends Wn{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ev extends Wn{getDefault(){return a.be.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Wm extends Wn{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Sc extends Wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class Cc extends Wn{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Tc extends Wn{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Sh extends Wn{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ro extends Wn{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Yl extends Wn{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Go extends Wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class wa extends Wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Zm extends Wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Km extends Wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ch extends Wn{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ao extends Wn{getDefault(){return null}set(t){var o;if(t===this.current&&!this.dirty)return;const m=this.gl;Or(m)?m.bindVertexArray(t):(o=m.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class kc extends Wn{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Pc extends Wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Xl extends Wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class qo extends Wn{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class Ym extends qo{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Ho extends qo{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Wo extends qo{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const Th="Framebuffer is not complete";class kh{constructor(t,o,m,p,y){this.context=t,this.width=o,this.height=m;const S=t.gl,P=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Ym(t,P),p)this.depthAttachment=y?new Wo(t,P):new Ho(t,P);else if(y)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error(Th)}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const m=this.depthAttachment.get();m&&t.deleteRenderbuffer(m)}t.deleteFramebuffer(this.framebuffer)}}class Bn{constructor(t){var o,m;if(this.gl=t,this.clearColor=new wc(this),this.clearDepth=new ss(this),this.clearStencil=new yh(this),this.colorMask=new _h(this),this.depthMask=new bh(this),this.stencilMask=new qm(this),this.stencilFunc=new xh(this),this.stencilOp=new io(this),this.stencilTest=new wh(this),this.depthRange=new kv(this),this.depthTest=new Pv(this),this.depthFunc=new Iv(this),this.blend=new Av(this),this.blendFunc=new Hm(this),this.blendColor=new Ev(this),this.blendEquation=new Wm(this),this.cullFace=new Sc(this),this.cullFaceSide=new Cc(this),this.frontFace=new Tc(this),this.program=new Sh(this),this.activeTexture=new ro(this),this.viewport=new Yl(this),this.bindFramebuffer=new Go(this),this.bindRenderbuffer=new wa(this),this.bindTexture=new Zm(this),this.bindVertexBuffer=new Km(this),this.bindElementBuffer=new Ch(this),this.bindVertexArray=new ao(this),this.pixelStoreUnpack=new kc(this),this.pixelStoreUnpackPremultiplyAlpha=new Pc(this),this.pixelStoreUnpackFlipY=new Xl(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Or(t)){this.HALF_FLOAT=t.HALF_FLOAT;const p=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=t.RGBA16F)!==null&&o!==void 0?o:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(m=t.RGB16F)!==null&&m!==void 0?m:p==null?void 0:p.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const p=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new Um(this,t,o)}createVertexBuffer(t,o,m){return new vh(this,t,o,m)}createRenderbuffer(t,o,m){const p=this.gl,y=p.createRenderbuffer();return this.bindRenderbuffer.set(y),p.renderbufferStorage(p.RENDERBUFFER,t,o,m),this.bindRenderbuffer.set(null),y}createFramebuffer(t,o,m,p){return new kh(this,t,o,m,p)}clear({color:t,depth:o,stencil:m}){const p=this.gl;let y=0;t&&(y|=p.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(y|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),m!==void 0&&(y|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),p.clear(y)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){a.bG(t.blendFunction,jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Or(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var o;return Or(this.gl)?this.gl.deleteVertexArray(t):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let so;function Xm(v,t,o,m,p){const y=v.context,S=v.transform,P=y.gl,M=v.useProgram("collisionBox"),L=[];let V=0,U=0;for(let ye=0;ye<m.length;ye++){const we=m[ye],Ie=t.getTile(we).getBucket(o);if(!Ie)continue;const Te=p?Ie.textCollisionBox:Ie.iconCollisionBox,De=Ie.collisionCircleArray;De.length>0&&(L.push({circleArray:De,circleOffset:U,coord:we}),V+=De.length/4,U=V),Te&&M.draw(y,P.LINES,Cn.disabled,hn.disabled,v.colorModeForRenderPass(),xn.disabled,Wl(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),S.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,null,v.transform.zoom,null,null,Te.collisionVertexBuffer)}if(!p||!L.length)return;const N=v.useProgram("collisionCircle"),W=new a.b_;W.resize(4*V),W._trim();let Q=0;for(const ye of L)for(let we=0;we<ye.circleArray.length/4;we++){const Ie=4*we,Te=ye.circleArray[Ie+0],De=ye.circleArray[Ie+1],Ve=ye.circleArray[Ie+2],ke=ye.circleArray[Ie+3];W.emplace(Q++,Te,De,Ve,ke,0),W.emplace(Q++,Te,De,Ve,ke,1),W.emplace(Q++,Te,De,Ve,ke,2),W.emplace(Q++,Te,De,Ve,ke,3)}(!so||so.length<2*V)&&(so=function(ye){const we=2*ye,Ie=new a.c0;Ie.resize(we),Ie._trim();for(let Te=0;Te<we;Te++){const De=6*Te;Ie.uint16[De+0]=4*Te+0,Ie.uint16[De+1]=4*Te+1,Ie.uint16[De+2]=4*Te+2,Ie.uint16[De+3]=4*Te+2,Ie.uint16[De+4]=4*Te+3,Ie.uint16[De+5]=4*Te+0}return Ie}(V));const ve=y.createIndexBuffer(so,!0),ge=y.createVertexBuffer(W,a.b$.members,!0);for(const ye of L){const we=Zl(v.transform);N.draw(y,P.TRIANGLES,Cn.disabled,hn.disabled,v.colorModeForRenderPass(),xn.disabled,we,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye.coord),null,o.id,ge,ve,a.aL.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,v.transform.zoom,null,null,null)}ge.destroy(),ve.destroy()}const Jm=a.af(new Float32Array(16));function Jl(v,t,o,m,p,y){const{horizontalAlign:S,verticalAlign:P}=a.aG(v);return new a.P((-(S-.5)*t/p+m[0])*y,(-(P-.5)*o/p+m[1])*y)}function Mv(v,t,o,m,p,y){const S=t.tileAnchorPoint.add(new a.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let P=m.mult(y);o||(P=P.rotate(-p));const M=S.add(P);return Hn(M.x,M.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(o){const P=jt(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(v),M=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return v.add(m.rotate(M))}return v.add(m)}function Dv(v,t,o,m,p,y,S,P,M,L,V,U){const N=v.text.placedSymbolArray,W=v.text.dynamicLayoutVertexArray,Q=v.icon.dynamicLayoutVertexArray,ve={};W.clear();for(let ge=0;ge<N.length;ge++){const ye=N.get(ge),we=ye.hidden||!ye.crossTileID||v.allowVerticalPlacement&&!ye.placedOrientation?null:m[ye.crossTileID];if(we){const Ie=new a.P(ye.anchorX,ye.anchorY),Te={getElevation:U,width:p.width,height:p.height,pitchedLabelPlaneMatrix:y,pitchWithMap:o,transform:p,tileAnchorPoint:Ie,translation:L,unwrappedTileID:V},De=o?In(Ie.x,Ie.y,Te):jt(Ie.x,Ie.y,Te),Ve=fn(p.cameraToCenterDistance,De.signedDistanceFromCamera);let ke=a.ao(v.textSizeData,P,ye)*Ve/a.aA;o&&(ke*=v.tilePixelRatio/S);const{width:Ge,height:at,anchor:et,textOffset:nt,textBoxScale:ot}=we,$t=Jl(et,Ge,at,nt,ot,ke),Ot=p.getPitchedTextCorrection(Ie.x+L[0],Ie.y+L[1],V),At=Mv(De.point,Te,t,$t,-p.bearingInRadians,Ot),Kt=v.allowVerticalPlacement&&ye.placedOrientation===a.an.vertical?Math.PI/2:0;for(let Tn=0;Tn<ye.numGlyphs;Tn++)a.au(W,At,Kt);M&&ye.associatedIconIndex>=0&&(ve[ye.associatedIconIndex]={shiftedAnchor:At,angle:Kt})}else ts(ye.numGlyphs,W)}if(M){Q.clear();const ge=v.icon.placedSymbolArray;for(let ye=0;ye<ge.length;ye++){const we=ge.get(ye);if(we.hidden)ts(we.numGlyphs,Q);else{const Ie=ve[ye];if(Ie)for(let Te=0;Te<we.numGlyphs;Te++)a.au(Q,Ie.shiftedAnchor,Ie.angle);else ts(we.numGlyphs,Q)}}v.icon.dynamicLayoutVertexBuffer.updateData(Q)}v.text.dynamicLayoutVertexBuffer.updateData(W)}function Qm(v,t,o){return o.iconsInText&&t?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function ep(v,t,o,m,p,y,S,P,M,L,V,U,N){const W=v.context,Q=W.gl,ve=v.transform,ge=P==="map",ye=M==="map",we=P!=="viewport"&&o.layout.get("symbol-placement")!=="point",Ie=ge&&!ye&&!we,Te=!o.layout.get("symbol-sort-key").isConstant();let De=!1;const Ve=v.getDepthModeForSublayer(0,Cn.ReadOnly),ke=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],at=ve.getCircleRadiusCorrection();for(const et of m){const nt=t.getTile(et),ot=nt.getBucket(o);if(!ot)continue;const $t=p?ot.text:ot.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;const Ot=$t.programConfigurations.get(o.id),At=p||ot.sdfIcons,Kt=p?ot.textSizeData:ot.iconSizeData,Tn=ye||ve.pitch!==0,Zn=v.useProgram(Qm(At,p,ot),Ot),Si=a.am(Kt,ve.zoom),ni=v.style.map.terrain&&v.style.map.terrain.getTerrainData(et);let Ci,ai,ii,si,vr=[0,0],Nn=null;if(p)ai=nt.glyphAtlasTexture,ii=Q.LINEAR,Ci=nt.glyphAtlasTexture.size,ot.iconsInText&&(vr=nt.imageAtlasTexture.size,Nn=nt.imageAtlasTexture,si=Tn||v.options.rotating||v.options.zooming||Kt.kind==="composite"||Kt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{const Vi=o.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;ai=nt.imageAtlasTexture,ii=At||v.options.rotating||v.options.zooming||Vi||Tn?Q.LINEAR:Q.NEAREST,Ci=nt.imageAtlasTexture.size}const or=a.aB(nt,1,v.transform.zoom),yr=pn(ge,v.transform,or),Ms=a.L();a.ap(Ms,yr);const Ds=ci(ye,ge,v.transform,or),Rs=a.aC(ve,nt,y,S),Ka=ve.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),hu=ke&&ot.hasTextData(),fu=o.layout.get("icon-text-fit")!=="none"&&hu&&ot.hasIconData();if(we){const Vi=v.style.map.terrain?(Nr,Xi)=>v.style.map.terrain.getElevation(et,Nr,Xi):null,fi=o.layout.get("text-rotation-alignment")==="map";rr(ot,v,p,yr,Ms,ye,L,fi,et.toUnwrapped(),ve.width,ve.height,Rs,Vi)}const al=p&&ke||fu,Xr=we||al?Jm:ye?yr:v.transform.clipSpaceToPixelsMatrix,Ma=At&&o.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ls;Ls=At?ot.iconsInText?Cv(Kt.kind,Si,Ie,ye,we,al,v,Xr,Ds,Rs,Ci,vr,at):Uo(Kt.kind,Si,Ie,ye,we,al,v,Xr,Ds,Rs,p,Ci,0,at):gh(Kt.kind,Si,Ie,ye,we,al,v,Xr,Ds,Rs,p,Ci,at);const uo={program:Zn,buffers:$t,uniformValues:Ls,projectionData:Ka,atlasTexture:ai,atlasTextureIcon:Nn,atlasInterpolation:ii,atlasInterpolationIcon:si,isSDF:At,hasHalo:Ma};if(Te&&ot.canOverlap){De=!0;const Vi=$t.segments.get();for(const fi of Vi)Ge.push({segments:new a.aL([fi]),sortKey:fi.sortKey,state:uo,terrainData:ni})}else Ge.push({segments:$t.segments,sortKey:0,state:uo,terrainData:ni})}De&&Ge.sort((et,nt)=>et.sortKey-nt.sortKey);for(const et of Ge){const nt=et.state;if(W.activeTexture.set(Q.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,Q.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(W.activeTexture.set(Q.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),nt.isSDF){const ot=nt.uniformValues;nt.hasHalo&&(ot.u_is_halo=1,Ic(nt.buffers,et.segments,o,v,nt.program,Ve,V,U,ot,nt.projectionData,et.terrainData)),ot.u_is_halo=0}Ic(nt.buffers,et.segments,o,v,nt.program,Ve,V,U,nt.uniformValues,nt.projectionData,et.terrainData)}}function Ic(v,t,o,m,p,y,S,P,M,L,V){const U=m.context;p.draw(U,U.gl.TRIANGLES,y,S,P,xn.backCCW,M,V,L,o.id,v.layoutVertexBuffer,v.indexBuffer,t,o.paint,m.transform.zoom,v.programConfigurations.get(o.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Ac(v,t,o,m,p){const y=v.context,S=y.gl,P=hn.disabled,M=new jn([S.ONE,S.ONE],a.be.transparent,[!0,!0,!0,!0]),L=t.getBucket(o);if(!L)return;const V=m.key;let U=o.heatmapFbos.get(V);U||(U=Ql(y,t.tileSize,t.tileSize),o.heatmapFbos.set(V,U)),y.bindFramebuffer.set(U.framebuffer),y.viewport.set([0,0,t.tileSize,t.tileSize]),y.clear({color:a.be.transparent});const N=L.programConfigurations.get(o.id),W=v.useProgram("heatmap",N,!p),Q=v.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ve=v.style.map.terrain.getTerrainData(m);W.draw(y,S.TRIANGLES,Cn.disabled,P,M,xn.disabled,Kl(t,v.transform.zoom,o.paint.get("heatmap-intensity"),1),ve,Q,o.id,L.layoutVertexBuffer,L.indexBuffer,L.segments,o.paint,v.transform.zoom,N)}function Ec(v,t,o,m,p){const y=v.context,S=y.gl,P=v.transform;y.setColorMode(v.colorModeForRenderPass());const M=Mc(y,t),L=o.key,V=t.heatmapFbos.get(L);if(!V)return;y.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,V.colorAttachment.get()),y.activeTexture.set(S.TEXTURE1),M.bind(S.LINEAR,S.CLAMP_TO_EDGE);const U=P.getProjectionData({overscaledTileID:o,applyTerrainMatrix:p,applyGlobeMatrix:!m});v.useProgram("heatmapTexture").draw(y,S.TRIANGLES,Cn.disabled,hn.disabled,v.colorModeForRenderPass(),xn.disabled,Bm(v,t,0,1),null,U,t.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,t.paint,P.zoom),V.destroy(),t.heatmapFbos.delete(L)}function Ql(v,t,o){var m,p;const y=v.gl,S=y.createTexture();y.bindTexture(y.TEXTURE_2D,S),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const P=(m=v.HALF_FLOAT)!==null&&m!==void 0?m:y.UNSIGNED_BYTE,M=(p=v.RGBA16F)!==null&&p!==void 0?p:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,t,o,0,y.RGBA,P,null);const L=v.createFramebuffer(t,o,!1,!1);return L.colorAttachment.set(S),L}function Mc(v,t){return t.colorRampTexture||(t.colorRampTexture=new a.T(v,t.colorRamp,v.gl.RGBA)),t.colorRampTexture}function Ph(v,t,o,m,p){if(!o||!m||!m.imageAtlas)return;const y=m.imageAtlas.patternPositions;let S=y[o.to.toString()],P=y[o.from.toString()];if(!S&&P&&(S=P),!P&&S&&(P=S),!S||!P){const M=p.getPaintProperty(t);S=y[M],P=y[M]}S&&P&&v.setConstantPatternPositions(S,P)}function eu(v,t,o,m,p,y,S,P){const M=v.context.gl,L="fill-pattern",V=o.paint.get(L),U=V&&V.constantOr(1),N=o.getCrossfadeParameters();let W,Q,ve,ge,ye;const we=v.transform,Ie=o.paint.get("fill-translate"),Te=o.paint.get("fill-translate-anchor");S?(Q=U&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=M.LINES):(Q=U?"fillPattern":"fill",W=M.TRIANGLES);const De=V.constantOr(null);for(const Ve of m){const ke=t.getTile(Ve);if(U&&!ke.patternsLoaded())continue;const Ge=ke.getBucket(o);if(!Ge)continue;const at=Ge.programConfigurations.get(o.id),et=v.useProgram(Q,at),nt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ve);U&&(v.context.activeTexture.set(M.TEXTURE0),ke.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),at.updatePaintBuffers(N)),Ph(at,L,De,ke,o);const ot=we.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),$t=a.aC(we,ke,Ie,Te);if(S){ge=Ge.indexBuffer2,ye=Ge.segments2;const At=[M.drawingBufferWidth,M.drawingBufferHeight];ve=Q==="fillOutlinePattern"&&U?xv(v,N,ke,At,$t):Ha(At,$t)}else ge=Ge.indexBuffer,ye=Ge.segments,ve=U?_c(v,N,ke,$t):{u_fill_translate:$t};const Ot=v.stencilModeForClipping(Ve);et.draw(v.context,W,p,Ot,y,xn.backCCW,ve,nt,ot,o.id,Ge.layoutVertexBuffer,ge,ye,o.paint,v.transform.zoom,at)}}function Zo(v,t,o,m,p,y,S,P){const M=v.context,L=M.gl,V="fill-extrusion-pattern",U=o.paint.get(V),N=U.constantOr(1),W=o.getCrossfadeParameters(),Q=o.paint.get("fill-extrusion-opacity"),ve=U.constantOr(null),ge=v.transform;for(const ye of m){const we=t.getTile(ye),Ie=we.getBucket(o);if(!Ie)continue;const Te=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye),De=Ie.programConfigurations.get(o.id),Ve=v.useProgram(N?"fillExtrusionPattern":"fillExtrusion",De);N&&(v.context.activeTexture.set(L.TEXTURE0),we.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),De.updatePaintBuffers(W));const ke=ge.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!P,applyTerrainMatrix:!0});Ph(De,V,ve,we,o);const Ge=a.aC(ge,we,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),at=o.paint.get("fill-extrusion-vertical-gradient"),et=N?dh(v,at,Q,Ge,ye,W,we):Hl(v,at,Q,Ge);Ve.draw(M,M.gl.TRIANGLES,p,y,S,xn.backCCW,et,Te,ke,o.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,o.paint,v.transform.zoom,De,v.style.map.terrain&&Ie.centroidVertexBuffer)}}function Ko(v,t,o,m,p,y,S,P,M){var L;const V=v.style.projection,U=v.context,N=v.transform,W=U.gl,Q=[`#define NUM_ILLUMINATION_SOURCES ${o.paint.get("hillshade-highlight-color").values.length}`],ve=v.useProgram("hillshade",null,!1,Q),ge=!v.options.moving;for(const ye of m){const we=t.getTile(ye),Ie=we.fbo;if(!Ie)continue;const Te=V.getMeshFromTileID(U,ye.canonical,P,!0,"raster"),De=(L=v.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(ye);U.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,Ie.colorAttachment.get());const Ve=N.getProjectionData({overscaledTileID:ye,aligned:ge,applyGlobeMatrix:!M,applyTerrainMatrix:!0});ve.draw(U,W.TRIANGLES,y,p[ye.overscaledZ],S,xn.backCCW,No(v,we,o),De,Ve,o.id,Te.vertexBuffer,Te.indexBuffer,Te.segments)}}function tu(v,t,o,m,p,y,S,P,M){var L;const V=v.style.projection,U=v.context,N=v.transform,W=U.gl,Q=v.useProgram("colorRelief"),ve=!v.options.moving;let ge=!0;for(const ye of m){const we=t.getTile(ye),Ie=we.dem;if(ge){const at=W.getParameter(W.MAX_TEXTURE_SIZE),{elevationTexture:et,colorTexture:nt}=o.getColorRampTextures(U,at,Ie.getUnpackVector());U.activeTexture.set(W.TEXTURE1),et.bind(W.NEAREST,W.CLAMP_TO_EDGE),U.activeTexture.set(W.TEXTURE4),nt.bind(W.LINEAR,W.CLAMP_TO_EDGE),ge=!1}if(!Ie||!Ie.data)continue;const Te=Ie.stride,De=Ie.getPixels();if(U.activeTexture.set(W.TEXTURE0),U.pixelStoreUnpackPremultiplyAlpha.set(!1),we.demTexture=we.demTexture||v.getTileTexture(Te),we.demTexture){const at=we.demTexture;at.update(De,{premultiply:!1}),at.bind(W.LINEAR,W.CLAMP_TO_EDGE)}else we.demTexture=new a.T(U,De,W.RGBA,{premultiply:!1}),we.demTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const Ve=V.getMeshFromTileID(U,ye.canonical,P,!0,"raster"),ke=(L=v.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(ye),Ge=N.getProjectionData({overscaledTileID:ye,aligned:ve,applyGlobeMatrix:!M,applyTerrainMatrix:!0});Q.draw(U,W.TRIANGLES,y,p[ye.overscaledZ],S,xn.backCCW,Sv(o,we.dem),ke,Ge,o.id,Ve.vertexBuffer,Ve.indexBuffer,Ve.segments)}}const Ih=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function ks(v,t,o,m,p,y,S,P,M=!1,L=!1){const V=m[m.length-1].overscaledZ,U=v.context,N=U.gl,W=v.useProgram("raster"),Q=v.transform,ve=v.style.projection,ge=v.colorModeForRenderPass(),ye=!v.options.moving;for(const we of m){const Ie=v.getDepthModeForSublayer(we.overscaledZ-V,o.paint.get("raster-opacity")===1?Cn.ReadWrite:Cn.ReadOnly,N.LESS),Te=t.getTile(we);Te.registerFadeDuration(o.paint.get("raster-fade-duration"));const De=t.findLoadedParent(we,0),Ve=t.findLoadedSibling(we),ke=Rv(Te,De||Ve||null,t,o,v.transform,v.style.map.terrain);let Ge,at;const et=o.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;U.activeTexture.set(N.TEXTURE0),Te.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),U.activeTexture.set(N.TEXTURE1),De?(De.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,De.tileID.overscaledZ-Te.tileID.overscaledZ),at=[Te.tileID.canonical.x*Ge%1,Te.tileID.canonical.y*Ge%1]):Te.texture.bind(et,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Te.texture.useMipmap&&U.extTextureFilterAnisotropic&&v.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax);const nt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),ot=Q.getProjectionData({overscaledTileID:we,aligned:ye,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),$t=no(at||[0,0],Ge||1,ke,o,P),Ot=ve.getMeshFromTileID(U,we.canonical,y,S,"raster");W.draw(U,N.TRIANGLES,Ie,p?p[we.overscaledZ]:hn.disabled,ge,M?xn.frontCCW:xn.backCCW,$t,nt,ot,o.id,Ot.vertexBuffer,Ot.indexBuffer,Ot.segments)}}function Rv(v,t,o,m,p,y){const S=m.paint.get("raster-fade-duration");if(!y&&S>0){const P=A.now(),M=(P-v.timeAdded)/S,L=t?(P-t.timeAdded)/S:-1,V=o.getSource(),U=bt(p,{tileSize:V.tileSize,roundZoom:V.roundZoom}),N=!t||Math.abs(t.tileID.overscaledZ-U)>Math.abs(v.tileID.overscaledZ-U),W=N&&v.refreshedUponExpiration?1:a.ag(N?M:1-L,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),t?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}const tp=new a.be(1,0,0,1),Dc=new a.be(0,1,0,1),Ah=new a.be(0,0,1,1),np=new a.be(1,0,1,1),ip=new a.be(0,1,1,1);function nu(v,t,o,m){Lc(v,0,t+o/2,v.transform.width,o,m)}function Rc(v,t,o,m){Lc(v,t-o/2,0,o,v.transform.height,m)}function Lc(v,t,o,m,p,y){const S=v.context,P=S.gl;P.enable(P.SCISSOR_TEST),P.scissor(t*v.pixelRatio,o*v.pixelRatio,m*v.pixelRatio,p*v.pixelRatio),S.clear({color:y}),P.disable(P.SCISSOR_TEST)}function rp(v,t,o){const m=v.context,p=m.gl,y=v.useProgram("debug"),S=Cn.disabled,P=hn.disabled,M=v.colorModeForRenderPass(),L="$debug",V=v.style.map.terrain&&v.style.map.terrain.getTerrainData(o);m.activeTexture.set(p.TEXTURE0);const U=t.getTileByID(o.key).latestRawTileData,N=Math.floor((U&&U.byteLength||0)/1024),W=t.getTile(o).tileSize,Q=512/Math.min(W,512)*(o.overscaledZ/v.transform.zoom)*.5;let ve=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ve+=` => ${o.overscaledZ}`),function(ye,we){ye.initDebugOverlayCanvas();const Ie=ye.debugOverlayCanvas,Te=ye.context.gl,De=ye.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,Ie.width,Ie.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(we,5,5),De.strokeText(we,5,5),ye.debugOverlayTexture.update(Ie),ye.debugOverlayTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE)}(v,`${ve} ${N}kB`);const ge=v.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(m,p.TRIANGLES,S,P,jn.alphaBlended,xn.disabled,zm(a.be.transparent,Q),null,ge,L,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),y.draw(m,p.LINE_STRIP,S,P,M,xn.disabled,zm(a.be.red),V,ge,L,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Ai(v,t,o,m){const{isRenderingGlobe:p}=m,y=v.context,S=y.gl,P=v.transform,M=v.colorModeForRenderPass(),L=v.getDepthModeFor3D(),V=v.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,v.width,v.height]);for(const U of o){const N=t.getTerrainMesh(U.tileID),W=v.renderToTexture.getTexture(U),Q=t.getTerrainData(U.tileID);y.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,W.texture);const ve=t.getMeshFrameDelta(P.zoom),ge=P.calculateFogMatrix(U.tileID.toUnwrapped()),ye=_v(ve,ge,v.style.sky,P.pitch,p),we=P.getProjectionData({overscaledTileID:U.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(y,S.TRIANGLES,L,hn.disabled,M,xn.backCCW,ye,Q,we,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}}function Ps(v,t){if(!t.mesh){const o=new a.aK;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const m=new a.aM;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),t.mesh=new is(v.createVertexBuffer(o,rs.members),v.createIndexBuffer(m),a.aL.simpleSegment(0,0,o.length,m.length))}return t.mesh}class Sa{constructor(t,o){this.context=new Bn(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ct.maxUnderzooming+Ct.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new hc}resize(t,o,m){if(this.width=Math.floor(t*m),this.height=Math.floor(o*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const t=this.context,o=new a.aK;o.emplaceBack(0,0),o.emplaceBack(a.$,0),o.emplaceBack(0,a.$),o.emplaceBack(a.$,a.$),this.tileExtentBuffer=t.createVertexBuffer(o,rs.members),this.tileExtentSegments=a.aL.simpleSegment(0,0,4,2);const m=new a.aK;m.emplaceBack(0,0),m.emplaceBack(a.$,0),m.emplaceBack(0,a.$),m.emplaceBack(a.$,a.$),this.debugBuffer=t.createVertexBuffer(m,rs.members),this.debugSegments=a.aL.simpleSegment(0,0,4,5);const p=new a.c5;p.emplaceBack(0,0,0,0),p.emplaceBack(a.$,0,a.$,0),p.emplaceBack(0,a.$,0,a.$),p.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=t.createVertexBuffer(p,vv.members),this.rasterBoundsSegments=a.aL.simpleSegment(0,0,4,2);const y=new a.aK;y.emplaceBack(0,0),y.emplaceBack(a.$,0),y.emplaceBack(0,a.$),y.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(y,rs.members),this.rasterBoundsSegmentsPosOnly=a.aL.simpleSegment(0,0,4,5);const S=new a.aK;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(S,rs.members),this.viewportSegments=a.aL.simpleSegment(0,0,4,2);const P=new a.c6;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(P);const M=new a.aM;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(M);const L=this.context.gl;this.stencilClearMode=new hn({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.tileExtentMesh=new is(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=a.L();a.bX(m,0,this.width,this.height,0,0,1),a.N(m,m,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const p={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(t,o.TRIANGLES,Cn.disabled,this.stencilClearMode,jn.disabled,xn.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o,m){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source,this.nextStencilID+o.length>256&&this.clearStencil();const p=this.context;p.setColorMode(jn.disabled),p.setDepthMode(Cn.disabled);const y={};for(const S of o)y[S.key]=this.nextStencilID++;this._renderTileMasks(y,o,m,!0),this._renderTileMasks(y,o,m,!1),this._tileClippingMaskIDs=y}_renderTileMasks(t,o,m,p){const y=this.context,S=y.gl,P=this.style.projection,M=this.transform,L=this.useProgram("clippingMask");for(const V of o){const U=t[V.key],N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),W=P.getMeshFromTileID(this.context,V.canonical,p,!0,"stencil"),Q=M.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!m,applyTerrainMatrix:!0});L.draw(y,S.TRIANGLES,Cn.disabled,new hn({func:S.ALWAYS,mask:0},U,255,S.KEEP,S.KEEP,S.REPLACE),jn.disabled,m?xn.disabled:xn.backCCW,null,N,Q,"$clipping",W.vertexBuffer,W.indexBuffer,W.segments)}}_renderTilesDepthBuffer(){const t=this.context,o=t.gl,m=this.style.projection,p=this.transform,y=this.useProgram("depth"),S=this.getDepthModeFor3D(),P=pt(p,{tileSize:p.tileSize});for(const M of P){const L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),V=m.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),U=p.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(t,o.TRIANGLES,S,hn.disabled,jn.disabled,xn.backCCW,null,L,U,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new hn({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new hn({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const o=this.context.gl,m=t.sort((S,P)=>P.overscaledZ-S.overscaledZ),p=m[m.length-1].overscaledZ,y=m[0].overscaledZ-p+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const S={};for(let P=0;P<y;P++)S[P+p]=new hn({func:o.GEQUAL,mask:255},P+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=y,[S,m]}return[{[p]:hn.disabled},m]}stencilConfigForOverlapTwoPass(t){const o=this.context.gl,m=t.sort((S,P)=>P.overscaledZ-S.overscaledZ),p=m[m.length-1].overscaledZ,y=m[0].overscaledZ-p+1;if(this.clearStencil(),y>1){const S={},P={};for(let M=0;M<y;M++)S[M+p]=new hn({func:o.GREATER,mask:255},y+1+M,255,o.KEEP,o.KEEP,o.REPLACE),P[M+p]=new hn({func:o.GREATER,mask:255},1+M,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*y+1,[S,P,m]}return this.nextStencilID=3,[{[p]:new hn({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[p]:new hn({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},m]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new jn([t.CONSTANT_COLOR,t.ONE],new a.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?jn.unblended:jn.alphaBlended}getDepthModeForSublayer(t,o,m){if(!this.opaquePassEnabledForLayer())return Cn.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Cn(m||this.context.gl.LEQUAL,o,[p,p])}getDepthModeFor3D(){return new Cn(this.context.gl.LEQUAL,Cn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){var m,p;this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const y=this.style._order,S=this.style.sourceCaches,P={},M={},L={},V={isRenderingToTexture:!1,isRenderingGlobe:((m=t.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const N in S){const W=S[N];W.used&&W.prepare(this.context),P[N]=W.getVisibleCoordinates(!1),M[N]=P[N].slice().reverse(),L[N]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<y.length;N++)if(this.style._layers[y[N]].is3D()){this.opaquePassCutoff=N;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const N of y){const W=this.style._layers[N];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const Q=M[W.source];(W.type==="custom"||Q.length)&&this.renderLayer(this,S[W.source],W,Q,V)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:N=>this.useProgram(N)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?a.be.black:a.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(N,W){const Q=N.context,ve=Q.gl,ge=((Ve,ke,Ge)=>{const at=Math.cos(ke.rollInRadians),et=Math.sin(ke.rollInRadians),nt=oe(ke),ot=ke.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ve.properties.get("sky-color"),u_horizon_color:Ve.properties.get("horizon-color"),u_horizon:[(ke.width/2-nt*et)*Ge,(ke.height/2+nt*at)*Ge],u_horizon_normal:[-et,at],u_sky_horizon_blend:Ve.properties.get("sky-horizon-blend")*ke.height/2*Ge,u_sky_blend:ot}})(W,N.style.map.transform,N.pixelRatio),ye=new Cn(ve.LEQUAL,Cn.ReadWrite,[0,1]),we=hn.disabled,Ie=N.colorModeForRenderPass(),Te=N.useProgram("sky"),De=Ps(Q,W);Te.draw(Q,ve.TRIANGLES,ye,we,Ie,xn.disabled,ge,null,void 0,"sky",De.vertexBuffer,De.indexBuffer,De.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const N=this.style._layers[y[this.currentLayer]],W=S[N.source],Q=P[N.source];this._renderTileClippingMasks(N,Q,!1),this.renderLayer(this,W,N,Q,V)}this.renderPass="translucent";let U=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const N=this.style._layers[y[this.currentLayer]],W=S[N.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(N,V))continue;this.opaquePassEnabledForLayer()||U||(U=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Q=(N.type==="symbol"?L:M)[N.source];this._renderTileClippingMasks(N,P[N.source],!!this.renderToTexture),this.renderLayer(this,W,N,Q,V)}if(V.isRenderingGlobe&&function(N,W,Q){const ve=N.context,ge=ve.gl,ye=N.useProgram("atmosphere"),we=new Cn(ge.LEQUAL,Cn.ReadOnly,[0,1]),Ie=N.transform,Te=function(ot,$t){const Ot=ot.properties.get("position"),At=[-Ot.x,-Ot.y,-Ot.z],Kt=a.af(new Float64Array(16));return ot.properties.get("anchor")==="map"&&(a.b5(Kt,Kt,$t.rollInRadians),a.b6(Kt,Kt,-$t.pitchInRadians),a.b5(Kt,Kt,$t.bearingInRadians),a.b6(Kt,Kt,$t.center.lat*Math.PI/180),a.by(Kt,Kt,-$t.center.lng*Math.PI/180)),a.c4(At,At,Kt),At}(Q,N.transform),De=Ie.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ve=W.properties.get("atmosphere-blend")*De.projectionTransition;if(Ve===0)return;const ke=Bo(Ie.worldSize,Ie.center.lat),Ge=Ie.inverseProjectionMatrix,at=new Float64Array(4);at[3]=1,a.av(at,at,Ie.modelViewProjectionMatrix),at[0]/=at[3],at[1]/=at[3],at[2]/=at[3],at[3]=1,a.av(at,at,Ge),at[0]/=at[3],at[1]/=at[3],at[2]/=at[3],at[3]=1;const et=((ot,$t,Ot,At,Kt)=>({u_sun_pos:ot,u_atmosphere_blend:$t,u_globe_position:Ot,u_globe_radius:At,u_inv_proj_matrix:Kt}))(Te,Ve,[at[0],at[1],at[2]],ke,Ge),nt=Ps(ve,W);ye.draw(ve,ge.TRIANGLES,we,hn.disabled,jn.alphaBlended,xn.disabled,et,null,null,"atmosphere",nt.vertexBuffer,nt.indexBuffer,nt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const N=function(W,Q){let ve=null;const ge=Object.values(W._layers).flatMap(Te=>Te.source&&!Te.isHidden(Q)?[W.sourceCaches[Te.source]]:[]),ye=ge.filter(Te=>Te.getSource().type==="vector"),we=ge.filter(Te=>Te.getSource().type!=="vector"),Ie=Te=>{(!ve||ve.getSource().maxzoom<Te.getSource().maxzoom)&&(ve=Te)};return ye.forEach(Te=>Ie(Te)),ve||we.forEach(Te=>Ie(Te)),ve}(this.style,this.transform.zoom);N&&function(W,Q,ve){for(let ge=0;ge<ve.length;ge++)rp(W,Q,ve[ge])}(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){const W=N.transform.padding;nu(N,N.transform.height-(W.top||0),3,tp),nu(N,W.bottom||0,3,Dc),Rc(N,W.left||0,3,Ah),Rc(N,N.transform.width-(W.right||0),3,np);const Q=N.transform.centerPoint;(function(ve,ge,ye,we){Lc(ve,ge-1,ye-10,2,20,we),Lc(ve,ge-10,ye-1,20,2,we)})(N,Q.x,N.transform.height-Q.y,ip)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=t?!a.c7(o,m):!a.c8(o,m)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(a.c9(o,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,S){const P=y.context,M=P.gl,L=y.transform,V=jn.unblended,U=new Cn(M.LEQUAL,Cn.ReadWrite,[0,1]),N=S.sourceCache.getRenderableTiles(),W=y.useProgram("terrainDepth");P.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),P.clear({color:a.be.transparent,depth:1});for(const Q of N){const ve=S.getTerrainMesh(Q.tileID),ge=S.getTerrainData(Q.tileID),ye=L.getProjectionData({overscaledTileID:Q.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),we={u_ele_delta:S.getMeshFrameDelta(L.zoom)};W.draw(P,M.TRIANGLES,U,hn.disabled,V,xn.backCCW,we,ge,ye,"terrain",ve.vertexBuffer,ve.indexBuffer,ve.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,S){const P=y.context,M=P.gl,L=y.transform,V=jn.unblended,U=new Cn(M.LEQUAL,Cn.ReadWrite,[0,1]),N=S.getCoordsTexture(),W=S.sourceCache.getRenderableTiles(),Q=y.useProgram("terrainCoords");P.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),P.clear({color:a.be.transparent,depth:1}),S.coordsIndex=[];for(const ve of W){const ge=S.getTerrainMesh(ve.tileID),ye=S.getTerrainData(ve.tileID);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,N.texture);const we={u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(L.zoom)},Ie=L.getProjectionData({overscaledTileID:ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Q.draw(P,M.TRIANGLES,U,hn.disabled,V,xn.backCCW,we,ye,Ie,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),S.coordsIndex.push(ve.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(t,o,m,p,y){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(p||[]).length)&&(this.id=m.id,a.ca(m)?function(S,P,M,L,V,U){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:N}=U,W=hn.disabled,Q=S.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ve,ge,ye,we,Ie,Te,De,Ve,ke){const Ge=ge.transform,at=ge.style.map.terrain,et=Ie==="map",nt=Te==="map";for(const ot of ve){const $t=we.getTile(ot),Ot=$t.getBucket(ye);if(!Ot||!Ot.text||!Ot.text.segments.get().length)continue;const At=a.am(Ot.textSizeData,Ge.zoom),Kt=a.aB($t,1,ge.transform.zoom),Tn=pn(et,ge.transform,Kt),Zn=ye.layout.get("icon-text-fit")!=="none"&&Ot.hasIconData();if(At){const Si=Math.pow(2,Ge.zoom-$t.tileID.overscaledZ),ni=at?(Ci,ai)=>at.getElevation(ot,Ci,ai):null;Dv(Ot,et,nt,ke,Ge,Tn,Si,At,Zn,a.aC(Ge,$t,De,Ve),ot.toUnwrapped(),ni)}}}(L,S,M,P,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),V),M.paint.get("icon-opacity").constantOr(1)!==0&&ep(S,P,M,L,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),W,Q,N),M.paint.get("text-opacity").constantOr(1)!==0&&ep(S,P,M,L,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),W,Q,N),P.map.showCollisionBoxes&&(Xm(S,P,M,L,!0),Xm(S,P,M,L,!1))}(t,o,m,p,this.style.placement.variableOffsets,y):a.cb(m)?function(S,P,M,L,V){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:U}=V,N=M.paint.get("circle-opacity"),W=M.paint.get("circle-stroke-width"),Q=M.paint.get("circle-stroke-opacity"),ve=!M.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&(W.constantOr(1)===0||Q.constantOr(1)===0))return;const ge=S.context,ye=ge.gl,we=S.transform,Ie=S.getDepthModeForSublayer(0,Cn.ReadOnly),Te=hn.disabled,De=S.colorModeForRenderPass(),Ve=[],ke=we.getCircleRadiusCorrection();for(let Ge=0;Ge<L.length;Ge++){const at=L[Ge],et=P.getTile(at),nt=et.getBucket(M);if(!nt)continue;const ot=M.paint.get("circle-translate"),$t=M.paint.get("circle-translate-anchor"),Ot=a.aC(we,et,ot,$t),At=nt.programConfigurations.get(M.id),Kt=S.useProgram("circle",At),Tn=nt.layoutVertexBuffer,Zn=nt.indexBuffer,Si=S.style.map.terrain&&S.style.map.terrain.getTerrainData(at),ni={programConfiguration:At,program:Kt,layoutVertexBuffer:Tn,indexBuffer:Zn,uniformValues:hh(S,et,M,Ot,ke),terrainData:Si,projectionData:we.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!U,applyTerrainMatrix:!0})};if(ve){const Ci=nt.segments.get();for(const ai of Ci)Ve.push({segments:new a.aL([ai]),sortKey:ai.sortKey,state:ni})}else Ve.push({segments:nt.segments,sortKey:0,state:ni})}ve&&Ve.sort((Ge,at)=>Ge.sortKey-at.sortKey);for(const Ge of Ve){const{programConfiguration:at,program:et,layoutVertexBuffer:nt,indexBuffer:ot,uniformValues:$t,terrainData:Ot,projectionData:At}=Ge.state;et.draw(ge,ye.TRIANGLES,Ie,Te,De,xn.backCCW,$t,Ot,At,M.id,nt,ot,Ge.segments,M.paint,S.transform.zoom,at)}}(t,o,m,p,y):a.cc(m)?function(S,P,M,L,V){if(M.paint.get("heatmap-opacity")===0)return;const U=S.context,{isRenderingToTexture:N,isRenderingGlobe:W}=V;if(S.style.map.terrain){for(const Q of L){const ve=P.getTile(Q);P.hasRenderableParent(Q)||(S.renderPass==="offscreen"?Ac(S,ve,M,Q,W):S.renderPass==="translucent"&&Ec(S,M,Q,N,W))}U.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?function(Q,ve,ge,ye){const we=Q.context,Ie=we.gl,Te=Q.transform,De=hn.disabled,Ve=new jn([Ie.ONE,Ie.ONE],a.be.transparent,[!0,!0,!0,!0]);(function(ke,Ge,at){const et=ke.gl;ke.activeTexture.set(et.TEXTURE1),ke.viewport.set([0,0,Ge.width/4,Ge.height/4]);let nt=at.heatmapFbos.get(a.c1);nt?(et.bindTexture(et.TEXTURE_2D,nt.colorAttachment.get()),ke.bindFramebuffer.set(nt.framebuffer)):(nt=Ql(ke,Ge.width/4,Ge.height/4),at.heatmapFbos.set(a.c1,nt))})(we,Q,ge),we.clear({color:a.be.transparent});for(let ke=0;ke<ye.length;ke++){const Ge=ye[ke];if(ve.hasRenderableParent(Ge))continue;const at=ve.getTile(Ge),et=at.getBucket(ge);if(!et)continue;const nt=et.programConfigurations.get(ge.id),ot=Q.useProgram("heatmap",nt),$t=Te.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ot=Te.getCircleRadiusCorrection();ot.draw(we,Ie.TRIANGLES,Cn.disabled,De,Ve,xn.backCCW,Kl(at,Te.zoom,ge.paint.get("heatmap-intensity"),Ot),null,$t,ge.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,ge.paint,Te.zoom,nt)}we.viewport.set([0,0,Q.width,Q.height])}(S,P,M,L):S.renderPass==="translucent"&&function(Q,ve){const ge=Q.context,ye=ge.gl;ge.setColorMode(Q.colorModeForRenderPass());const we=ve.heatmapFbos.get(a.c1);we&&(ge.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,we.colorAttachment.get()),ge.activeTexture.set(ye.TEXTURE1),Mc(ge,ve).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(ge,ye.TRIANGLES,Cn.disabled,hn.disabled,Q.colorModeForRenderPass(),xn.disabled,Bm(Q,ve,0,1),null,null,ve.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,ve.paint,Q.transform.zoom))}(S,M)}(t,o,m,p,y):a.cd(m)?function(S,P,M,L,V){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:U}=V,N=M.paint.get("line-opacity"),W=M.paint.get("line-width");if(N.constantOr(1)===0||W.constantOr(1)===0)return;const Q=S.getDepthModeForSublayer(0,Cn.ReadOnly),ve=S.colorModeForRenderPass(),ge=M.paint.get("line-dasharray"),ye=M.paint.get("line-pattern"),we=ye.constantOr(1),Ie=M.paint.get("line-gradient"),Te=M.getCrossfadeParameters(),De=we?"linePattern":ge?"lineSDF":Ie?"lineGradient":"line",Ve=S.context,ke=Ve.gl,Ge=S.transform;let at=!0;for(const et of L){const nt=P.getTile(et);if(we&&!nt.patternsLoaded())continue;const ot=nt.getBucket(M);if(!ot)continue;const $t=ot.programConfigurations.get(M.id),Ot=S.context.program.get(),At=S.useProgram(De,$t),Kt=at||At.program!==Ot,Tn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(et),Zn=ye.constantOr(null);if(Zn&&nt.imageAtlas){const ii=nt.imageAtlas,si=ii.patternPositions[Zn.to.toString()],vr=ii.patternPositions[Zn.from.toString()];si&&vr&&$t.setConstantPatternPositions(si,vr)}const Si=Ge.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),ni=Ge.getPixelScale(),Ci=we?Om(S,nt,M,ni,Te):ge?Fm(S,nt,M,ni,ge,Te):Ie?fh(S,nt,M,ni,ot.lineClipsArray.length):bc(S,nt,M,ni);if(we)Ve.activeTexture.set(ke.TEXTURE0),nt.imageAtlasTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),$t.updatePaintBuffers(Te);else if(ge&&(Kt||S.lineAtlas.dirty))Ve.activeTexture.set(ke.TEXTURE0),S.lineAtlas.bind(Ve);else if(Ie){const ii=ot.gradients[M.id];let si=ii.texture;if(M.gradientVersion!==ii.version){let vr=256;if(M.stepInterpolant){const Nn=P.getSource().maxzoom,or=et.canonical.z===Nn?Math.ceil(1<<S.transform.maxZoom-et.canonical.z):1;vr=a.ag(a.c2(ot.maxLineLength/a.$*1024*or),256,Ve.maxTextureSize)}ii.gradient=a.c3({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:ii.gradient||void 0,clips:ot.lineClipsArray}),ii.texture?ii.texture.update(ii.gradient):ii.texture=new a.T(Ve,ii.gradient,ke.RGBA),ii.version=M.gradientVersion,si=ii.texture}Ve.activeTexture.set(ke.TEXTURE0),si.bind(M.stepInterpolant?ke.NEAREST:ke.LINEAR,ke.CLAMP_TO_EDGE)}const ai=S.stencilModeForClipping(et);At.draw(Ve,ke.TRIANGLES,Q,ai,ve,xn.disabled,Ci,Tn,Si,M.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,M.paint,S.transform.zoom,$t,ot.layoutVertexBuffer2),at=!1}}(t,o,m,p,y):a.ce(m)?function(S,P,M,L,V){const U=M.paint.get("fill-color"),N=M.paint.get("fill-opacity");if(N.constantOr(1)===0)return;const{isRenderingToTexture:W}=V,Q=S.colorModeForRenderPass(),ve=M.paint.get("fill-pattern"),ge=S.opaquePassEnabledForLayer()&&!ve.constantOr(1)&&U.constantOr(a.be.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===ge){const ye=S.getDepthModeForSublayer(1,S.renderPass==="opaque"?Cn.ReadWrite:Cn.ReadOnly);eu(S,P,M,L,ye,Q,!1,W)}if(S.renderPass==="translucent"&&M.paint.get("fill-antialias")){const ye=S.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Cn.ReadOnly);eu(S,P,M,L,ye,Q,!0,W)}}(t,o,m,p,y):a.cf(m)?function(S,P,M,L,V){const U=M.paint.get("fill-extrusion-opacity");if(U===0)return;const{isRenderingToTexture:N}=V;if(S.renderPass==="translucent"){const W=new Cn(S.context.gl.LEQUAL,Cn.ReadWrite,S.depthRangeFor3D);if(U!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Zo(S,P,M,L,W,hn.disabled,jn.disabled,N),Zo(S,P,M,L,W,S.stencilModeFor3D(),S.colorModeForRenderPass(),N);else{const Q=S.colorModeForRenderPass();Zo(S,P,M,L,W,hn.disabled,Q,N)}}}(t,o,m,p,y):a.cg(m)?function(S,P,M,L,V){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const{isRenderingToTexture:U}=V,N=S.context,W=S.style.projection.useSubdivision,Q=S.getDepthModeForSublayer(0,Cn.ReadOnly),ve=S.colorModeForRenderPass();if(S.renderPass==="offscreen")(function(ge,ye,we,Ie,Te,De,Ve){const ke=ge.context,Ge=ke.gl;for(const at of we){const et=ye.getTile(at),nt=et.dem;if(!nt||!nt.data||!et.needsHillshadePrepare)continue;const ot=nt.dim,$t=nt.stride,Ot=nt.getPixels();if(ke.activeTexture.set(Ge.TEXTURE1),ke.pixelStoreUnpackPremultiplyAlpha.set(!1),et.demTexture=et.demTexture||ge.getTileTexture($t),et.demTexture){const Kt=et.demTexture;Kt.update(Ot,{premultiply:!1}),Kt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else et.demTexture=new a.T(ke,Ot,Ge.RGBA,{premultiply:!1}),et.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);ke.activeTexture.set(Ge.TEXTURE0);let At=et.fbo;if(!At){const Kt=new a.T(ke,{width:ot,height:ot,data:null},Ge.RGBA);Kt.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),At=et.fbo=ke.createFramebuffer(ot,ot,!0,!1),At.colorAttachment.set(Kt.texture)}ke.bindFramebuffer.set(At.framebuffer),ke.viewport.set([0,0,ot,ot]),ge.useProgram("hillshadePrepare").draw(ke,Ge.TRIANGLES,Te,De,Ve,xn.disabled,wv(et.tileID,nt),null,null,Ie.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),et.needsHillshadePrepare=!1}})(S,P,L,M,Q,hn.disabled,ve),N.viewport.set([0,0,S.width,S.height]);else if(S.renderPass==="translucent")if(W){const[ge,ye,we]=S.stencilConfigForOverlapTwoPass(L);Ko(S,P,M,we,ge,Q,ve,!1,U),Ko(S,P,M,we,ye,Q,ve,!0,U)}else{const[ge,ye]=S.getStencilConfigForOverlapAndUpdateStencilID(L);Ko(S,P,M,ye,ge,Q,ve,!1,U)}}(t,o,m,p,y):a.ch(m)?function(S,P,M,L,V){if(S.renderPass!=="translucent"||!L.length)return;const{isRenderingToTexture:U}=V,N=S.style.projection.useSubdivision,W=S.getDepthModeForSublayer(0,Cn.ReadOnly),Q=S.colorModeForRenderPass();if(N){const[ve,ge,ye]=S.stencilConfigForOverlapTwoPass(L);tu(S,P,M,ye,ve,W,Q,!1,U),tu(S,P,M,ye,ge,W,Q,!0,U)}else{const[ve,ge]=S.getStencilConfigForOverlapAndUpdateStencilID(L);tu(S,P,M,ge,ve,W,Q,!1,U)}}(t,o,m,p,y):a.ci(m)?function(S,P,M,L,V){if(S.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!L.length)return;const{isRenderingToTexture:U}=V,N=P.getSource(),W=S.style.projection.useSubdivision;if(N instanceof ct)ks(S,P,M,L,null,!1,!1,N.tileCoords,N.flippedWindingOrder,U);else if(W){const[Q,ve,ge]=S.stencilConfigForOverlapTwoPass(L);ks(S,P,M,ge,Q,!1,!0,Ih,!1,U),ks(S,P,M,ge,ve,!0,!0,Ih,!1,U)}else{const[Q,ve]=S.getStencilConfigForOverlapAndUpdateStencilID(L);ks(S,P,M,ve,Q,!1,!0,Ih,!1,U)}}(t,o,m,p,y):a.cj(m)?function(S,P,M,L,V){const U=M.paint.get("background-color"),N=M.paint.get("background-opacity");if(N===0)return;const{isRenderingToTexture:W}=V,Q=S.context,ve=Q.gl,ge=S.style.projection,ye=S.transform,we=ye.tileSize,Ie=M.paint.get("background-pattern");if(S.isPatternMissing(Ie))return;const Te=!Ie&&U.a===1&&N===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==Te)return;const De=hn.disabled,Ve=S.getDepthModeForSublayer(0,Te==="opaque"?Cn.ReadWrite:Cn.ReadOnly),ke=S.colorModeForRenderPass(),Ge=S.useProgram(Ie?"backgroundPattern":"background"),at=L||pt(ye,{tileSize:we,terrain:S.style.map.terrain});Ie&&(Q.activeTexture.set(ve.TEXTURE0),S.imageManager.bind(S.context));const et=M.getCrossfadeParameters();for(const nt of at){const ot=ye.getProjectionData({overscaledTileID:nt,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),$t=Ie?Tv(N,S,Ie,{tileID:nt,tileSize:we},et):xc(N,U),Ot=S.style.map.terrain&&S.style.map.terrain.getTerrainData(nt),At=ge.getMeshFromTileID(Q,nt.canonical,!1,!0,"raster");Ge.draw(Q,ve.TRIANGLES,Ve,De,ke,xn.backCCW,$t,Ot,ot,M.id,At.vertexBuffer,At.indexBuffer,At.segments)}}(t,0,m,p,y):a.ck(m)&&function(S,P,M,L){const{isRenderingGlobe:V}=L,U=S.context,N=M.implementation,W=S.style.projection,Q=S.transform,ve=Q.getProjectionDataForCustomLayer(V),ge={farZ:Q.farZ,nearZ:Q.nearZ,fov:Q.fov*Math.PI/180,modelViewProjectionMatrix:Q.modelViewProjectionMatrix,projectionMatrix:Q.projectionMatrix,shaderData:{variantName:W.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${W.shaderPreludeCode.vertexSource}`,define:W.shaderDefine},defaultProjectionData:ve},ye=N.renderingMode?N.renderingMode:"2d";if(S.renderPass==="offscreen"){const we=N.prerender;we&&(S.setCustomLayerDefaults(),U.setColorMode(S.colorModeForRenderPass()),we.call(N,U.gl,ge),U.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),U.setColorMode(S.colorModeForRenderPass()),U.setStencilMode(hn.disabled);const we=ye==="3d"?S.getDepthModeFor3D():S.getDepthModeForSublayer(0,Cn.ReadOnly);U.setDepthMode(we),N.render(U.gl,ge),U.setDirty(),S.setBaseState(),U.bindFramebuffer.set(null)}}(t,0,m,y))}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),m=this.imageManager.getPattern(t.to.toString());return!o||!m}useProgram(t,o,m=!1,p=[]){this.cache=this.cache||{};const y=!!this.style.map.terrain,S=this.style.projection,P=m?Ga.projectionMercator:S.shaderPreludeCode,M=m?Qs:S.shaderDefine,L=t+(o?o.cacheKey:"")+`/${m?rh:S.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[L]||(this.cache[L]=new vc(this.context,Ga[t],o,Nm[t],this._showOverdrawInspector,y,P,M,p)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:o}=this.context.gl;return this.width!==t||this.height!==o}}function zc(v,t){let o,m=!1,p=null,y=null;const S=()=>{p=null,m&&(v.apply(y,o),p=setTimeout(S,t),m=!1)};return(...P)=>(m=!0,y=this,o=P,p||S(),p)}class iu{constructor(t){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let m;return o.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(m=p)}),(m&&m[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:m,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const m=o.join("/");let p=m;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${m}`);let y=window.location.hash.replace(p,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let S=window.location.href.replace(/(#.+)?$/,y);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=zc(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const o=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,p=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,p),S=Math.round(o.lng*y)/y,P=Math.round(o.lat*y)/y,M=this._map.getBearing(),L=this._map.getPitch();let V="";if(V+=t?`/${S}/${P}/${m}`:`${m}/${P}/${S}`,(M||L)&&(V+="/"+Math.round(10*M)/10),L&&(V+=`/${Math.round(L)}`),this._hashName){const U=this._hashName;let N=!1;const W=window.location.hash.slice(1).split("&").map(Q=>{const ve=Q.split("=")[0];return ve===U?(N=!0,`${ve}=${V}`):Q}).filter(Q=>Q);return N||W.push(`${U}=${V}`),`#${W.join("&")}`}return`#${V}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new a.S(+t[2],+t[1])}catch{return!1}const o=+t[0],m=+(t[3]||0),p=+(t[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&m>=-180&&m<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const Yo={linearity:.3,easing:a.cl(0,0,.3,1)},Xo=a.e({deceleration:2500,maxSpeed:1400},Yo),Eh=a.e({deceleration:20,maxSpeed:1400},Yo),ru=a.e({deceleration:1e3,maxSpeed:360},Yo),Mh=a.e({deceleration:1e3,maxSpeed:90},Yo),ap=a.e({deceleration:1e3,maxSpeed:360},Yo);class sp{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=A.now();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)o.zoom+=y.zoomDelta||0,o.bearing+=y.bearingDelta||0,o.pitch+=y.pitchDelta||0,o.roll+=y.rollDelta||0,y.panDelta&&o.pan._add(y.panDelta),y.around&&(o.around=y.around),y.pinchAround&&(o.pinchAround=y.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(o.pan.mag()){const y=Qo(o.pan.mag(),m,a.e({},Xo,t||{})),S=o.pan.mult(y.amount/o.pan.mag()),P=this._map.cameraHelper.handlePanInertia(S,this._map.transform);p.center=P.easingCenter,p.offset=P.easingOffset,Jo(p,y)}if(o.zoom){const y=Qo(o.zoom,m,Eh);p.zoom=this._map.transform.zoom+y.amount,Jo(p,y)}if(o.bearing){const y=Qo(o.bearing,m,ru);p.bearing=this._map.transform.bearing+a.ag(y.amount,-179,179),Jo(p,y)}if(o.pitch){const y=Qo(o.pitch,m,Mh);p.pitch=this._map.transform.pitch+y.amount,Jo(p,y)}if(o.roll){const y=Qo(o.roll,m,ap);p.roll=this._map.transform.roll+a.ag(y.amount,-179,179),Jo(p,y)}if(p.zoom||p.bearing){const y=o.pinchAround===void 0?o.around:o.pinchAround;p.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),a.e(p,{noMoveStart:!0})}}function Jo(v,t){(!v.duration||v.duration<t.duration)&&(v.duration=t.duration,v.easing=t.easing)}function Qo(v,t,o){const{maxSpeed:m,linearity:p,deceleration:y}=o,S=a.ag(v*p/(t/1e3),-m,m),P=Math.abs(S)/(y*p);return{easing:o.easing,duration:1e3*P,amount:S*(P/2)}}class Yr extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m,p={}){m=m instanceof MouseEvent?m:new MouseEvent(t,m);const y=I.mousePos(o.getCanvas(),m),S=o.unproject(y);super(t,a.e({point:y,lngLat:S,originalEvent:m},p)),this._defaultPrevented=!1,this.target=o}}class Aa extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){const p=t==="touchend"?m.changedTouches:m.touches,y=I.touchPos(o.getCanvasContainer(),p),S=y.map(M=>o.unproject(M)),P=y.reduce((M,L,V,U)=>M.add(L.div(U.length)),new a.P(0,0));super(t,{points:y,point:P,lngLats:S,lngLat:o.unproject(P),originalEvent:m}),this._defaultPrevented=!1}}class Dh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){super(t,{originalEvent:m}),this._defaultPrevented=!1}}class op{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Dh(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Yr(t.type,this._map,t))}mouseup(t){this._map.fire(new Yr(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Yr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Yr(t.type,this._map,t))}mouseover(t){this._map.fire(new Yr(t.type,this._map,t))}mouseout(t){this._map.fire(new Yr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Aa(t.type,this._map,t))}touchmove(t){this._map.fire(new Aa(t.type,this._map,t))}touchend(t){this._map.fire(new Aa(t.type,this._map,t))}touchcancel(t){this._map.fire(new Aa(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lp{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Yr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Yr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class el{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(a.P.convert(t),this._map.terrain)}}class Rh{constructor(t,o){this._map=t,this._tr=new el(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(I.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const m=o;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=m,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const y=Math.min(p.x,m.x),S=Math.max(p.x,m.x),P=Math.min(p.y,m.y),M=Math.max(p.y,m.y);I.setTransform(this._box,`translate(${y}px,${P}px)`),this._box.style.width=S-y+"px",this._box.style.height=M-P+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const m=this._startPos,p=o;if(this.reset(),I.suppressClick(),m.x!==p.x||m.y!==p.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:t})),{cameraAnimation:y=>y.fitScreenCoordinates(m,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new a.l(t,{originalEvent:o}))}}function Bc(v,t){if(v.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${t.length}`);const o={};for(let m=0;m<v.length;m++)o[v[m].identifier]=t[m];return o}class up{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),m.length===this.numTouches&&(this.centroid=function(p){const y=new a.P(0,0);for(const S of p)y._add(S);return y.div(p.length)}(o),this.touches=Bc(m,o)))}touchmove(t,o,m){if(this.aborted||!this.centroid)return;const p=Bc(m,o);for(const y in this.touches){const S=p[y];(!S||S.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(t,o,m){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Vc{constructor(t){this.singleTap=new up(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,m){this.singleTap.touchstart(t,o,m)}touchmove(t,o,m){this.singleTap.touchmove(t,o,m)}touchend(t,o,m){const p=this.singleTap.touchend(t,o,m);if(p){const y=t.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(p)<30;if(y&&S||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Oc{constructor(t){this._tr=new el(t),this._zoomIn=new Vc({numTouches:1,numTaps:2}),this._zoomOut=new Vc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,m){this._zoomIn.touchstart(t,o,m),this._zoomOut.touchstart(t,o,m)}touchmove(t,o,m){this._zoomIn.touchmove(t,o,m),this._zoomOut.touchmove(t,o,m)}touchend(t,o,m){const p=this._zoomIn.touchend(t,o,m),y=this._zoomOut.touchend(t,o,m),S=this._tr;return p?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(p)},{originalEvent:t})}):y?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(y)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tl{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const o=this._moveFunction(...t);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(t,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,o){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const p=Array.isArray(o)?o[0]:o;return!this._moved&&p.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(m,p))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&I.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ca=0,Ea=2,cp={[Ca]:1,[Ea]:2};class $r{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const o=I.mouseButton(t);this._eventButton=o}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(o,m){const p=cp[m];return o.buttons===void 0||(o.buttons&p)!==p}(t,this._eventButton)}isValidEndEvent(t){return I.mouseButton(t)===this._eventButton}}class nl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class Lv{constructor(t=new $r({checkCorrectEvent:()=>!0}),o=new nl){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(t,o,m){return t instanceof MouseEvent?o(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?m(t):void 0}startMove(t){this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(t){this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}const Fc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=t=>{t.preventDefault()}};class zv{constructor(t,o){this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,o,m){return this._calculateTransform(t,o,m)}touchmove(t,o,m){if(this._active){if(!this._shouldBePrevented(m.length))return t.preventDefault(),this._calculateTransform(t,o,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,o,m){this._calculateTransform(t,o,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,m){m.length>0&&(this._active=!0);const p=Bc(m,o),y=new a.P(0,0),S=new a.P(0,0);let P=0;for(const L in p){const V=p[L],U=this._touches[L];U&&(y._add(V),S._add(V.sub(U)),P++,p[L]=V)}if(this._touches=p,this._shouldBePrevented(P)||!S.mag())return;const M=S.div(P);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(P),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,o,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,m){if(!this._firstTwoTouches)return;t.preventDefault();const[p,y]=this._firstTwoTouches,S=au(m,o,p),P=au(m,o,y);if(!S||!P)return;const M=this._aroundCenter?null:S.add(P).div(2);return this._move([S,P],M,t)}touchend(t,o,m){if(!this._firstTwoTouches)return;const[p,y]=this._firstTwoTouches,S=au(m,o,p),P=au(m,o,y);S&&P||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function au(v,t,o){for(let m=0;m<v.length;m++)if(v[m].identifier===o)return t[m]}function il(v,t){return Math.log(v/t)/Math.LN2}class Wa extends Lh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const m=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(il(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:il(this._distance,m),pinchAround:o}}}function Wt(v,t){return 180*v.angleWith(t)/Math.PI}class zh extends Lh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o,m){const p=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wt(this._vector,p),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,m=Wt(t,this._startVector);return Math.abs(m)<o}}function su(v){return Math.abs(v.y)>Math.abs(v.x)}class Bh extends Lh{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,m){super.touchstart(t,o,m),this._currentTouchCount=m.length}_start(t){this._lastPoints=t,su(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=t[0].sub(this._lastPoints[0]),y=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,y,m.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(p.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,m){if(this._valid!==void 0)return this._valid;const p=t.mag()>=2,y=o.mag()>=2;if(!p&&!y)return;if(!p||!y)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const S=t.y>0==o.y>0;return su(t)&&su(o)&&S}}const ou={panStep:100,bearingStep:15,pitchStep:10};class rl{constructor(t){this._tr=new el(t);const o=ou;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,m=0,p=0,y=0,S=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?m=-1:(t.preventDefault(),y=-1);break;case 39:t.shiftKey?m=1:(t.preventDefault(),y=1);break;case 38:t.shiftKey?p=1:(t.preventDefault(),S=-1);break;case 40:t.shiftKey?p=-1:(t.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(m=0,p=0),{cameraAnimation:P=>{const M=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Vh,zoom:o?Math.round(M.zoom)+o*(t.shiftKey?2:1):M.zoom,bearing:M.bearing+m*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-y*this._panStep,-S*this._panStep],center:M.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Vh(v){return v*(2-v)}const Vn=4.000244140625,Oh=1/450;class dp{constructor(t,o){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=t,this._tr=new el(t),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Oh}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const m=A.now(),p=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,o!==0&&o%Vn==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(p*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=I.mousePos(this._map.getCanvas(),t),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(a.S.convert(m.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const P=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=P),typeof this._targetZoom=="number"&&(this._targetZoom+=P)}if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Vn?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&M!==0&&(M=1/M);const L=typeof this._targetZoom!="number"?t.scale:a.ae(this._targetZoom);this._targetZoom=t.getConstrained(t.getCameraLngLat(),a.aj(L*M)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,m=this._startZoom,p=this._easing;let y,S=!1;if(this._type==="wheel"&&m&&p){const P=A.now()-this._lastWheelEventTime,M=Math.min((P+5)/200,1),L=p(M);y=a.C.number(m,o,L),M<1?this._frameId||(this._frameId=!0):S=!0}else y=o,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!S,zoomDelta:y-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=a.cn;if(this._prevEase){const m=this._prevEase,p=(A.now()-m.start)/m.duration,y=m.easing(p+.01)-m.easing(p),S=.27/Math.sqrt(y*y+1e-4)*.01,P=Math.sqrt(.0729-S*S);o=a.cl(S,P,.25,1)}return this._prevEase={start:A.now(),duration:t,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class $c{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bv{constructor(t){this._tr=new el(t),this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vv{constructor(){this._tap=new Vc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,o,m){if(!this._swipePoint)if(this._tapTime){const p=o[0],y=t.timeStamp-this._tapTime<500,S=this._tapPoint.dist(p)<30;y&&S?m.length>0&&(this._swipePoint=p,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(t,o,m)}touchmove(t,o,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const p=o[0],y=p.y-this._swipePoint.y;return this._swipePoint=p,t.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(t,o,m)}touchend(t,o,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const p=this._tap.touchend(t,o,m);p&&(this._tapTime=t.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fh{constructor(t,o,m){this._el=t,this._mousePan=o,this._touchPan=m}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class jc{constructor(t,o,m,p){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=o,this._mousePitch=m,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class $h{constructor(t,o,m,p){this._el=t,this._touchZoom=o,this._touchRotate=m,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class hp{constructor(t,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",t);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=o,this._container.appendChild(p);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=m,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,o){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:t,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const lu=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class Ov extends a.l{}function jh(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class Is{constructor(t,o){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,y)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=p.type==="renderFrame"?void 0:p,P={needsRenderFrame:!1},M={},L={};for(const{handlerName:N,handler:W,allowed:Q}of this._handlers){if(!W.isEnabled())continue;let ve;if(this._blockedByActive(L,Q,N))W.reset();else if(W[y||p.type]){if(a.co(p,y||p.type)){const ge=I.mousePos(this._map.getCanvas(),p);ve=W[y||p.type](p,ge)}else if(a.cp(p,y||p.type)){const ge=this._getMapTouches(p.touches),ye=I.touchPos(this._map.getCanvas(),ge);ve=W[y||p.type](p,ye,ge)}else a.cq(y||p.type)||(ve=W[y||p.type](p));this.mergeHandlerResult(P,M,ve,N,S),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()}(ve||W.isActive())&&(L[N]=W)}const V={};for(const N in this._previousActiveHandlers)L[N]||(V[N]=S);this._previousActiveHandlers=L,(Object.keys(V).length||jh(P))&&(this._changes.push([P,M,V]),this._triggerRenderFrame()),(Object.keys(L).length||jh(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:U}=P;U&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],U(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sp(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,y,S]of this._listeners)I.addEventListener(p,y,p===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[t,o,m]of this._listeners)I.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(t){const o=this._map,m=o.getCanvasContainer();this._add("mapEvent",new op(o,t));const p=o.boxZoom=new Rh(o,t);this._add("boxZoom",p),t.interactive&&t.boxZoom&&p.enable();const y=o.cooperativeGestures=new hp(o,t.cooperativeGestures);this._add("cooperativeGestures",y),t.cooperativeGestures&&y.enable();const S=new Oc(o),P=new Bv(o);o.doubleClickZoom=new $c(P,S),this._add("tapZoom",S),this._add("clickZoom",P),t.interactive&&t.doubleClickZoom&&o.doubleClickZoom.enable();const M=new Vv;this._add("tapDragZoom",M);const L=o.touchPitch=new Bh(o);this._add("touchPitch",L),t.interactive&&t.touchPitch&&o.touchPitch.enable(t.touchPitch);const V=()=>o.project(o.getCenter()),U=function({enable:Te,clickTolerance:De,aroundCenter:Ve=!0,minPixelCenterThreshold:ke=100,rotateDegreesPerPixelMoved:Ge=.8},at){const et=new $r({checkCorrectEvent:nt=>I.mouseButton(nt)===0&&nt.ctrlKey||I.mouseButton(nt)===2&&!nt.ctrlKey});return new tl({clickTolerance:De,move:(nt,ot)=>{const $t=at();if(Ve&&Math.abs($t.y-nt.y)>ke)return{bearingDelta:a.cm(new a.P(nt.x,ot.y),ot,$t)};let Ot=(ot.x-nt.x)*Ge;return Ve&&ot.y<$t.y&&(Ot=-Ot),{bearingDelta:Ot}},moveStateManager:et,enable:Te,assignEvents:Fc})}(t,V),N=function({enable:Te,clickTolerance:De,pitchDegreesPerPixelMoved:Ve=-.5}){const ke=new $r({checkCorrectEvent:Ge=>I.mouseButton(Ge)===0&&Ge.ctrlKey||I.mouseButton(Ge)===2});return new tl({clickTolerance:De,move:(Ge,at)=>({pitchDelta:(at.y-Ge.y)*Ve}),moveStateManager:ke,enable:Te,assignEvents:Fc})}(t),W=function({enable:Te,clickTolerance:De,rollDegreesPerPixelMoved:Ve=.3},ke){const Ge=new $r({checkCorrectEvent:at=>I.mouseButton(at)===2&&at.ctrlKey});return new tl({clickTolerance:De,move:(at,et)=>{const nt=ke();let ot=(et.x-at.x)*Ve;return et.y<nt.y&&(ot=-ot),{rollDelta:ot}},moveStateManager:Ge,enable:Te,assignEvents:Fc})}(t,V);o.dragRotate=new jc(t,U,N,W),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",N,["mouseRotate","mouseRoll"]),this._add("mouseRoll",W,["mousePitch"]),t.interactive&&t.dragRotate&&o.dragRotate.enable();const Q=function({enable:Te,clickTolerance:De}){const Ve=new $r({checkCorrectEvent:ke=>I.mouseButton(ke)===0&&!ke.ctrlKey});return new tl({clickTolerance:De,move:(ke,Ge)=>({around:Ge,panDelta:Ge.sub(ke)}),activateOnStart:!0,moveStateManager:Ve,enable:Te,assignEvents:Fc})}(t),ve=new zv(t,o);o.dragPan=new Fh(m,Q,ve),this._add("mousePan",Q),this._add("touchPan",ve,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&o.dragPan.enable(t.dragPan);const ge=new zh,ye=new Wa;o.touchZoomRotate=new $h(m,ye,ge,M),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&o.touchZoomRotate.enable(t.touchZoomRotate);const we=o.scrollZoom=new dp(o,()=>this._triggerRenderFrame());this._add("scrollZoom",we,["mousePan"]),t.interactive&&t.scrollZoom&&o.scrollZoom.enable(t.scrollZoom);const Ie=o.keyboard=new rl(o);this._add("keyboard",Ie),t.interactive&&t.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new lp(o))}_add(t,o,m){this._handlers.push({handlerName:t,handler:o,allowed:m}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!lu(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,m){for(const p in t)if(p!==m&&(!o||o.indexOf(p)<0))return!0;return!1}_getMapTouches(t){const o=[];for(const m of t)this._el.contains(m.target)&&o.push(m);return o}mergeHandlerResult(t,o,m,p,y){if(!m)return;a.e(t,m);const S={handlerName:p,originalEvent:m.originalEvent||y};m.zoomDelta!==void 0&&(o.zoom=S),m.panDelta!==void 0&&(o.drag=S),m.rollDelta!==void 0&&(o.roll=S),m.pitchDelta!==void 0&&(o.pitch=S),m.bearingDelta!==void 0&&(o.rotate=S)}_applyChanges(){const t={},o={},m={};for(const[p,y,S]of this._changes)p.panDelta&&(t.panDelta=(t.panDelta||new a.P(0,0))._add(p.panDelta)),p.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(t.rollDelta=(t.rollDelta||0)+p.rollDelta),p.around!==void 0&&(t.around=p.around),p.pinchAround!==void 0&&(t.pinchAround=p.pinchAround),p.noInertia&&(t.noInertia=p.noInertia),a.e(o,y),a.e(m,S);this._updateMapTransform(t,o,m),this._changes=[]}_updateMapTransform(t,o,m){const p=this._map,y=p._getTransformForUpdate(),S=p.terrain;if(!(jh(t)||S&&this._terrainMovement))return this._fireEvents(o,m,!0);p._stop(!0);let{panDelta:P,zoomDelta:M,bearingDelta:L,pitchDelta:V,rollDelta:U,around:N,pinchAround:W}=t;W!==void 0&&(N=W),N=N||p.transform.centerPoint,S&&!y.isPointOnMapSurface(N)&&(N=y.centerPoint);const Q={panDelta:P,zoomDelta:M,rollDelta:U,pitchDelta:V,bearingDelta:L,around:N};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(N)&&(N=y.centerPoint);const ve=N.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(P?N.sub(P):N);S?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Q,y),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(P))):this._map.cameraHelper.handleMapControlsPan(Q,y,ve):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Q,y,ve))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Q,y),this._map.cameraHelper.handleMapControlsPan(Q,y,ve)),p._applyUpdatedTransform(y),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,m,!0)}_fireEvents(t,o,m){const p=lu(this._eventsInProgress),y=lu(t),S={};for(const U in t){const{originalEvent:N}=t[U];this._eventsInProgress[U]||(S[`${U}start`]=N),this._eventsInProgress[U]=t[U]}!p&&y&&this._fireEvent("movestart",y.originalEvent);for(const U in S)this._fireEvent(U,S[U]);y&&this._fireEvent("move",y.originalEvent);for(const U in t){const{originalEvent:N}=t[U];this._fireEvent(U,N)}const P={};let M;for(const U in this._eventsInProgress){const{handlerName:N,originalEvent:W}=this._eventsInProgress[U];this._handlersById[N].isActive()||(delete this._eventsInProgress[U],M=o[N]||W,P[`${U}end`]=M)}for(const U in P)this._fireEvent(U,P[U]);const L=lu(this._eventsInProgress),V=(p||y)&&!L;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const U=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&U.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(U)}if(m&&V){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=W=>W!==0&&-this._bearingSnap<W&&W<this._bearingSnap;!U||!U.essential&&A.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:M})),N(this._map.getBearing())&&this._map.resetNorth()):(N(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new a.l(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Ov("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class pi extends a.E{constructor(t,o,m){super(),this._renderFrameCallback=()=>{const p=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=m.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(t,o){t.apply(this.transform),this.transform=t,this.cameraHelper=o}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,o){return this.jumpTo({elevation:t},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,o,m){return t=a.P.convert(t).mult(-1),this.panTo(this.transform.center,a.e({offset:t},o),m)}panTo(t,o,m){return this.easeTo(a.e({center:t},o),m)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,m){return this.easeTo(a.e({zoom:t},o),m)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,o){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)).fire(new a.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,m){return this.easeTo(a.e({bearing:t},o),m)}resetNorth(t,o){return this.rotateTo(0,a.e({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}getRoll(){return this.transform.roll}setRoll(t,o){return this.jumpTo({roll:t},o),this}cameraForBounds(t,o){t=le.convert(t).adjustAntiMeridian();const m=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),m,o)}_cameraForBoxAndBearing(t,o,m,p){const y={top:0,bottom:0,right:0,left:0};if(typeof(p=a.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const L=p.padding;p.padding={top:L,bottom:L,right:L,left:L}}const S=a.e(y,p.padding);p.padding=S;const P=this.transform,M=new le(t,o);return this.cameraHelper.cameraForBoxAndBearing(p,S,M,m,P)}fitBounds(t,o,m){return this._fitInternal(this.cameraForBounds(t,o),o,m)}fitScreenCoordinates(t,o,m,p,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(t)),this.transform.screenPointToLocation(a.P.convert(o)),m,p),p,y)}_fitInternal(t,o,m){return t?(delete(o=a.e(t,o)).padding,o.linear?this.easeTo(o,m):this.flyTo(o,m)):this}jumpTo(t,o){this.stop();const m=this._getTransformForUpdate();let p=!1,y=!1,S=!1;const P=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,t);const M=m.zoom!==P;return"elevation"in t&&m.elevation!==+t.elevation&&m.setElevation(+t.elevation),"bearing"in t&&m.bearing!==+t.bearing&&(p=!0,m.setBearing(+t.bearing)),"pitch"in t&&m.pitch!==+t.pitch&&(y=!0,m.setPitch(+t.pitch)),"roll"in t&&m.roll!==+t.roll&&(S=!0,m.setRoll(+t.roll)),t.padding==null||m.isPaddingEqual(t.padding)||m.setPadding(t.padding),this._applyUpdatedTransform(m),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)),M&&this.fire(new a.l("zoomstart",o)).fire(new a.l("zoom",o)).fire(new a.l("zoomend",o)),p&&this.fire(new a.l("rotatestart",o)).fire(new a.l("rotate",o)).fire(new a.l("rotateend",o)),y&&this.fire(new a.l("pitchstart",o)).fire(new a.l("pitch",o)).fire(new a.l("pitchend",o)),S&&this.fire(new a.l("rollstart",o)).fire(new a.l("roll",o)).fire(new a.l("rollend",o)),this.fire(new a.l("moveend",o))}calculateCameraOptionsFromTo(t,o,m,p=0){const y=a.a0.fromLngLat(t,o),S=a.a0.fromLngLat(m,p),P=S.x-y.x,M=S.y-y.y,L=S.z-y.z,V=Math.hypot(P,M,L);if(V===0)throw new Error("Can't calculate camera options with same From and To");const U=Math.hypot(P,M),N=a.aj(this.transform.cameraToCenterDistance/V/this.transform.tileSize),W=180*Math.atan2(P,-M)/Math.PI;let Q=180*Math.acos(U/V)/Math.PI;return Q=L<0?90-Q:90+Q,{center:S.toLngLat(),elevation:p,zoom:N,pitch:Q,bearing:W}}calculateCameraOptionsFromCameraLngLatAltRotation(t,o,m,p,y){const S=this.transform.calculateCenterFromCameraLngLatAlt(t,o,m,p);return{center:S.center,elevation:S.elevation,zoom:S.zoom,bearing:m,pitch:p,roll:y}}easeTo(t,o){this._stop(!1,t.easeId),((t=a.e({offset:[0,0],duration:500,easing:a.cn},t)).animate===!1||!t.essential&&A.prefersReducedMotion)&&(t.duration=0);const m=this._getTransformForUpdate(),p=this.getBearing(),y=m.pitch,S=m.roll,P="bearing"in t?this._normalizeBearing(t.bearing,p):p,M="pitch"in t?+t.pitch:y,L="roll"in t?this._normalizeBearing(t.roll,S):S,V="padding"in t?t.padding:m.padding,U=a.P.convert(t.offset);let N,W;t.around&&(N=a.S.convert(t.around),W=m.locationToScreenPoint(N));const Q={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ve=this.cameraHelper.handleEaseTo(m,{bearing:P,pitch:M,roll:L,padding:V,around:N,aroundPoint:W,offsetAsPoint:U,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||p!==P,this._pitching=this._pitching||M!==y,this._rolling=this._rolling||L!==S,this._padding=!m.isPaddingEqual(V),this._zooming=this._zooming||ve.isZooming,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,Q),this.terrain&&this._prepareElevation(ve.elevationCenter),this._ease(ge=>{ve.easeFunc(ge),this.terrain&&!t.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(m),this._fireMoveEvents(o)},ge=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o,ge)},t),this}_prepareEase(t,o,m={}){this._moving=!0,o||m.moving||this.fire(new a.l("movestart",t)),this._zooming&&!m.zooming&&this.fire(new a.l("zoomstart",t)),this._rotating&&!m.rotating&&this.fire(new a.l("rotatestart",t)),this._pitching&&!m.pitching&&this.fire(new a.l("pitchstart",t)),this._rolling&&!m.rolling&&this.fire(new a.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&o!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(m-(o-(m*t+this._elevationStart))/(1-t)),this._elevationTarget=o}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const o=t.getCameraLngLat(),m=t.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(o,t.zoom):0;if(m<p){const y=this.calculateCameraOptionsFromTo(o,p,t.center,t.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(t){const o=[];if(o.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&o.push(p=>this.transformCameraUpdate(p)),!o.length)return;const m=t.clone();for(const p of o){const y=m.clone(),{center:S,zoom:P,roll:M,pitch:L,bearing:V,elevation:U}=p(y);S&&y.setCenter(S),U!==void 0&&y.setElevation(U),P!==void 0&&y.setZoom(P),M!==void 0&&y.setRoll(M),L!==void 0&&y.setPitch(L),V!==void 0&&y.setBearing(V),m.apply(y)}this.transform.apply(m)}_fireMoveEvents(t){this.fire(new a.l("move",t)),this._zooming&&this.fire(new a.l("zoom",t)),this._rotating&&this.fire(new a.l("rotate",t)),this._pitching&&this.fire(new a.l("pitch",t)),this._rolling&&this.fire(new a.l("roll",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const m=this._zooming,p=this._rotating,y=this._pitching,S=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new a.l("zoomend",t)),p&&this.fire(new a.l("rotateend",t)),y&&this.fire(new a.l("pitchend",t)),S&&this.fire(new a.l("rollend",t)),this.fire(new a.l("moveend",t))}flyTo(t,o){if(!t.essential&&A.prefersReducedMotion){const ot=a.Q(t,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(ot,o)}this.stop(),t=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cn},t);const m=this._getTransformForUpdate(),p=m.bearing,y=m.pitch,S=m.roll,P=m.padding,M="bearing"in t?this._normalizeBearing(t.bearing,p):p,L="pitch"in t?+t.pitch:y,V="roll"in t?this._normalizeBearing(t.roll,S):S,U="padding"in t?t.padding:m.padding,N=a.P.convert(t.offset);let W=m.centerPoint.add(N);const Q=m.screenPointToLocation(W),ve=this.cameraHelper.handleFlyTo(m,{bearing:M,pitch:L,roll:V,padding:U,locationAtOffset:Q,offsetAsPoint:N,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let ge=t.curve;const ye=Math.max(m.width,m.height),we=ye/ve.scaleOfZoom,Ie=ve.pixelPathLength;typeof ve.scaleOfMinZoom=="number"&&(ge=Math.sqrt(ye/ve.scaleOfMinZoom/Ie*2));const Te=ge*ge;function De(ot){const $t=(we*we-ye*ye+(ot?-1:1)*Te*Te*Ie*Ie)/(2*(ot?we:ye)*Te*Ie);return Math.log(Math.sqrt($t*$t+1)-$t)}function Ve(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function ke(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const Ge=De(!1);let at=function(ot){return ke(Ge)/ke(Ge+ge*ot)},et=function(ot){return ye*((ke(Ge)*(Ve($t=Ge+ge*ot)/ke($t))-Ve(Ge))/Te)/Ie;var $t},nt=(De(!0)-Ge)/ge;if(Math.abs(Ie)<2e-6||!isFinite(nt)){if(Math.abs(ye-we)<1e-6)return this.easeTo(t,o);const ot=we<ye?-1:1;nt=Math.abs(Math.log(we/ye))/ge,et=()=>0,at=$t=>Math.exp(ot*ge*$t)}return t.duration="duration"in t?+t.duration:1e3*nt/("screenSpeed"in t?+t.screenSpeed/ge:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=p!==M,this._pitching=L!==y,this._rolling=V!==S,this._padding=!m.isPaddingEqual(U),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(ve.targetCenter),this._ease(ot=>{const $t=ot*nt,Ot=1/at($t),At=et($t);this._rotating&&m.setBearing(a.C.number(p,M,ot)),this._pitching&&m.setPitch(a.C.number(y,L,ot)),this._rolling&&m.setRoll(a.C.number(S,V,ot)),this._padding&&(m.interpolatePadding(P,U,ot),W=m.centerPoint.add(N)),ve.easeFunc(ot,Ot,At,W),this.terrain&&!t.freezeElevation&&this._updateElevation(ot),this._applyUpdatedTransform(m),this._fireMoveEvents(o)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,o)}return t||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(t,o,m){m.animate===!1||m.duration===0?(t(1),o()):(this._easeStart=A.now(),this._easeOptions=m,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,o){t=a.aN(t,-180,180);const m=Math.abs(t-o);return Math.abs(t-360-o)<m&&(t-=360),Math.abs(t+360-o)<m&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(t),this.transform.tileZoom):null}}const uu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Nc{constructor(t=uu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const m=this._map._getUIString(`AttributionControl.${o}`);t.title=m,t.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const o=this._map.style.sourceCaches;for(const p in o){const y=o[p];if(y.used||y.usedForTerrain){const S=y.getSource();S.attribution&&t.indexOf(S.attribution)<0&&t.push(S.attribution)}}t=t.filter(p=>String(p).trim()),t.sort((p,y)=>p.length-y.length),t=t.filter((p,y)=>{for(let S=y+1;S<t.length;S++)if(t[S].indexOf(p)>=0)return!1;return!0});const m=t.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,t.length?(this._innerContainer.innerHTML=I.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Nh{constructor(t={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const m=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const o=I.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class fp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,m=o?this._queue.concat(o):this._queue;for(const p of m)if(p.id===t)return void(p.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const m of o)if(!m.cancelled&&(m.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mp=a.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Fv extends a.E{constructor(t){super(),this._lastTilesetChange=A.now(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,o){this.sourceCache.update(t,o),this._renderableTilesKeys=[];const m={};for(const p of pt(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))m[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),a.bX(p.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[p.key]=new Rn(p,this.tileSize),this._lastTilesetChange=A.now());for(const p in this._tiles)m[p]||delete this._tiles[p]}freeRtt(t){for(const o in this._tiles){const m=this._tiles[o];(!t||m.tileID.equals(t)||m.tileID.isChildOf(t)||t.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,o){return o?this._getTerrainCoordsForTileRanges(t,o):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const o={};for(const m of this._renderableTilesKeys){const p=this._tiles[m].tileID,y=t.clone(),S=a.b9();if(p.canonical.equals(t.canonical))a.bX(S,0,a.$,a.$,0,0,1);else if(p.canonical.isChildOf(t.canonical)){const P=p.canonical.z-t.canonical.z,M=p.canonical.x-(p.canonical.x>>P<<P),L=p.canonical.y-(p.canonical.y>>P<<P),V=a.$>>P;a.bX(S,0,V,V,0,0,1),a.M(S,S,[-M*V,-L*V,0])}else{if(!t.canonical.isChildOf(p.canonical))continue;{const P=t.canonical.z-p.canonical.z,M=t.canonical.x-(t.canonical.x>>P<<P),L=t.canonical.y-(t.canonical.y>>P<<P),V=a.$>>P;a.bX(S,0,a.$,a.$,0,0,1),a.M(S,S,[M*V,L*V,0]),a.N(S,S,[1/2**P,1/2**P,0])}}y.terrainRttPosMatrix32f=new Float32Array(S),o[m]=y}return o}_getTerrainCoordsForTileRanges(t,o){const m={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID;if(!this._isWithinTileRanges(y,o))continue;const S=t.clone(),P=a.b9();if(y.canonical.z===t.canonical.z){const M=t.canonical.x-y.canonical.x,L=t.canonical.y-y.canonical.y;a.bX(P,0,a.$,a.$,0,0,1),a.M(P,P,[M*a.$,L*a.$,0])}else if(y.canonical.z>t.canonical.z){const M=y.canonical.z-t.canonical.z,L=y.canonical.x-(y.canonical.x>>M<<M),V=y.canonical.y-(y.canonical.y>>M<<M),U=t.canonical.x-(y.canonical.x>>M),N=t.canonical.y-(y.canonical.y>>M),W=a.$>>M;a.bX(P,0,W,W,0,0,1),a.M(P,P,[-L*W+U*a.$,-V*W+N*a.$,0])}else{const M=t.canonical.z-y.canonical.z,L=t.canonical.x-(t.canonical.x>>M<<M),V=t.canonical.y-(t.canonical.y>>M<<M),U=(t.canonical.x>>M)-y.canonical.x,N=(t.canonical.y>>M)-y.canonical.y,W=a.$<<M;a.bX(P,0,W,W,0,0,1),a.M(P,P,[L*a.$+U*W,V*a.$+N*W,0])}S.terrainRttPosMatrix32f=new Float32Array(P),m[p]=S}return m}getSourceTile(t,o){const m=this.sourceCache._source;let p=t.overscaledZ-this.deltaZoom;if(p>m.maxzoom&&(p=m.maxzoom),p<m.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(p).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!y||!y.dem)&&o)for(;p>=m.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(t.scaledTo(p--).key);return y}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,o){return o[t.canonical.z]&&t.canonical.x>=o[t.canonical.z].minTileX&&t.canonical.x<=o[t.canonical.z].maxTileX&&t.canonical.y>=o[t.canonical.z].minTileY&&t.canonical.y<=o[t.canonical.z].maxTileY}}class Za{constructor(t,o,m){this._meshCache={},this.painter=t,this.sourceCache=new Fv(o),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,o,m,p=a.$){var y;if(!(o>=0&&o<p&&m>=0&&m<p))return 0;const S=this.getTerrainData(t),P=(y=S.tile)===null||y===void 0?void 0:y.dem;if(!P)return 0;const M=a.cr([],[o/p*a.$,m/p*a.$],S.u_terrain_matrix),L=[M[0]*P.dim,M[1]*P.dim],V=Math.floor(L[0]),U=Math.floor(L[1]),N=L[0]-V,W=L[1]-U;return P.get(V,U)*(1-N)*(1-W)+P.get(V+1,U)*N*(1-W)+P.get(V,U+1)*(1-N)*W+P.get(V+1,U+1)*N*W}getElevationForLngLatZoom(t,o){if(!a.cs(o,t.wrap()))return 0;const{tileID:m,mercatorX:p,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(t,o);return this.getElevation(m,p%a.$,y%a.$,a.$)}getElevation(t,o,m,p=a.$){return this.getDEMElevation(t,o,m,p)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const p=this.painter.context,y=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(p,y,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(p,new a.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.af([])}const o=this.sourceCache.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const p=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new a.T(p,o.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),o.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const m=o&&o+o.tileID.key+t.key;if(m&&!this._demMatrixCache[m]){const p=this.sourceCache.sourceCache._source.maxzoom;let y=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=p?y=t.canonical.z-p:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=t.canonical.x-(t.canonical.x>>y<<y),P=t.canonical.y-(t.canonical.y>>y<<y),M=a.ct(new Float64Array(16),[1/(a.$<<y),1/(a.$<<y),0]);a.M(M,M,[S*a.$,P*a.$,0]),this._demMatrixCache[t.key]={matrix:M,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(t){const o=this.painter,m=o.width/devicePixelRatio,p=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(o.context,{width:m,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(o.context,{width:m,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(m,p,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,m,p))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,S=0;y<this._coordsTextureSize;y++)for(let P=0;P<this._coordsTextureSize;P++,S+=4)o[S+0]=255&P,o[S+1]=255&y,o[S+2]=P>>8<<4|y>>8,o[S+3]=0;const m=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),p=new a.T(t,m,t.gl.RGBA,{premultiply:!1});return p.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),m=this.painter.context,p=m.gl,y=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(y,P-S-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null);const M=o[0]+(o[2]>>4<<8),L=o[1]+((15&o[2])<<8),V=this.coordsIndex[255-o[3]],U=V&&this.sourceCache.getTileByID(V);if(!U)return null;const N=this._coordsTextureSize,W=(1<<U.tileID.canonical.z)*N;return new a.a0((U.tileID.canonical.x*N+M)/W+U.tileID.wrap,(U.tileID.canonical.y*N+L)/W,this.getElevation(U.tileID,M,L,N))}depthAtPoint(t){const o=new Uint8Array(4),m=this.painter.context,p=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(t){var o;const m=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,p=m&&t.canonical.y===0,y=m&&t.canonical.y===(1<<t.canonical.z)-1,S=`m_${p?"n":""}_${y?"s":""}`;if(this._meshCache[S])return this._meshCache[S];const P=this.painter.context,M=new a.cu,L=new a.aM,V=this.meshSize,U=a.$/V,N=V*V;for(let ke=0;ke<=V;ke++)for(let Ge=0;Ge<=V;Ge++)M.emplaceBack(Ge*U,ke*U,0);for(let ke=0;ke<N;ke+=V+1)for(let Ge=0;Ge<V;Ge++)L.emplaceBack(Ge+ke,V+Ge+ke+1,V+Ge+ke+2),L.emplaceBack(Ge+ke,V+Ge+ke+2,Ge+ke+1);const W=M.length,Q=W+(V+1),ve=(V+1)*V,ge=p?a.bg:0,ye=p?0:1,we=y?a.bh:a.$,Ie=y?0:1;for(let ke=0;ke<=V;ke++)M.emplaceBack(ke*U,ge,ye);for(let ke=0;ke<=V;ke++)M.emplaceBack(ke*U,we,Ie);for(let ke=0;ke<V;ke++)L.emplaceBack(ve+ke,Q+ke,Q+ke+1),L.emplaceBack(ve+ke,Q+ke+1,ve+ke+1),L.emplaceBack(0+ke,W+ke+1,W+ke),L.emplaceBack(0+ke,0+ke+1,W+ke+1);const Te=M.length,De=Te+2*(V+1);for(const ke of[0,1])for(let Ge=0;Ge<=V;Ge++)for(const at of[0,1])M.emplaceBack(ke*a.$,Ge*U,at);for(let ke=0;ke<2*V;ke+=2)L.emplaceBack(Te+ke,Te+ke+1,Te+ke+3),L.emplaceBack(Te+ke,Te+ke+3,Te+ke+2),L.emplaceBack(De+ke,De+ke+3,De+ke+1),L.emplaceBack(De+ke,De+ke+2,De+ke+3);const Ve=new is(P.createVertexBuffer(M,mp.members),P.createIndexBuffer(L),a.aL.simpleSegment(0,0,M.length,L.length));return this._meshCache[S]=Ve,Ve}getMeshFrameDelta(t){return 2*Math.PI*a.bt/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,o){var m;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(t,o);return(m=this.getMinMaxElevation(p).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,m={minElevation:null,maxElevation:null};return o&&o.dem&&(m.minElevation=o.dem.min*this.exaggeration,m.maxElevation=o.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(t,o){const m=a.a0.fromLngLat(t.wrap()),p=(1<<o)*a.$,y=m.x*p,S=m.y*p,P=Math.floor(y/a.$),M=Math.floor(S/a.$);return{tileID:new a.Z(o,0,o,P,M),mercatorX:y,mercatorY:S}}}class Uc{constructor(t,o,m){this._context=t,this._size=o,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(m.texture),{id:t,fbo:o,texture:m,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>t.id!==o),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}const Xt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class un{constructor(t,o){this.painter=t,this.terrain=o,this.pool=new Uc(t.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(m=>!t._layers[m].isHidden(o)),this._coordsAscending={};for(const m in t.sourceCaches){this._coordsAscending[m]={};const p=t.sourceCaches[m].getVisibleCoordinates(),y=t.sourceCaches[m].getSource(),S=y instanceof ct?y.terrainTileRanges:null;for(const P of p){const M=this.terrain.sourceCache.getTerrainCoords(P,S);for(const L in M)this._coordsAscending[m][L]||(this._coordsAscending[m][L]=[]),this._coordsAscending[m][L].push(M[L])}}this._coordsAscendingStr={};for(const m of t._order){const p=t._layers[m],y=p.source;if(Xt[p.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(const S in this._coordsAscending[y])this._coordsAscendingStr[y][S]=this._coordsAscending[y][S].map(P=>P.key).sort().join()}}for(const m of this._renderableTiles)for(const p in this._coordsAscendingStr){const y=this._coordsAscendingStr[p][m.tileID.key];y&&y!==m.rttCoords[p]&&(m.rtt=[])}}renderLayer(t,o){if(t.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),p=t.type,y=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Xt[p]&&(this._prevType&&Xt[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(t.id),!S))return!0;if(Xt[this._prevType]||Xt[p]&&S){this._prevType=p;const P=this._stacks.length-1,M=this._stacks[P]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(Ai(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[P]){const U=this.pool.getObjectForId(L.rtt[P].id);if(U.stamp===L.rtt[P].stamp){this.pool.useObject(U);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),L.rtt[P]={id:V.id,stamp:V.stamp},y.context.bindFramebuffer.set(V.fbo.framebuffer),y.context.clear({color:a.be.transparent,stencil:0}),y.currentStencilSource=void 0;for(let U=0;U<M.length;U++){const N=y.style._layers[M[U]],W=N.source?this._coordsAscending[N.source][L.tileID.key]:[L.tileID];y.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),y._renderTileClippingMasks(N,W,!0),y.renderLayer(y,y.style.sourceCaches[N.source],N,W,m),N.source&&(L.rttCoords[N.source]=this._coordsAscendingStr[N.source][L.tileID.key])}}return Ai(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),Xt[p]}return!1}}const Gc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Uh=b,cu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:uu,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},jr={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class pp{constructor(t,o,m=!1){this.mousedown=y=>{this.startMove(y,I.mousePos(this.element,y)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,I.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHanlder.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const p=new Lv;this._rotatePitchHanlder=new tl({clickTolerance:3,move:(y,S)=>{const P=o.getBoundingClientRect(),M=new a.P((P.bottom-P.top)/2,(P.right-P.left)/2);return{bearingDelta:a.cm(new a.P(y.x,S.y),S,M),pitchDelta:m?-.5*(S.y-y.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=t,I.addEventListener(o,"mousedown",this.mousedown),I.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(o,"touchcancel",this.reset)}startMove(t,o){this._rotatePitchHanlder.dragStart(t,o),I.disableDrag()}move(t,o){const m=this.map,{bearingDelta:p,pitchDelta:y}=this._rotatePitchHanlder.dragMove(t,o)||{};p&&m.setBearing(m.getBearing()+p),y&&m.setPitch(m.getPitch()+y)}off(){const t=this.element;I.removeEventListener(t,"mousedown",this.mousedown),I.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let gr;function gp(v,t,o,m=!1){if(m||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return v==null?void 0:v.wrap();const p=new a.S(v.lng,v.lat);if(v=new a.S(v.lng,v.lat),t){const y=new a.S(v.lng-360,v.lat),S=new a.S(v.lng+360,v.lat),P=o.locationToScreenPoint(v).distSqr(t);o.locationToScreenPoint(y).distSqr(t)<P?v=y:o.locationToScreenPoint(S).distSqr(t)<P&&(v=S)}for(;Math.abs(v.lng-o.center.lng)>180;){const y=o.locationToScreenPoint(v);if(y.x>=0&&y.y>=0&&y.x<=o.width&&y.y<=o.height)break;v.lng>o.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(v))?v:p}const oo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wi(v,t,o){const m=v.classList;for(const p in oo)m.remove(`maplibregl-${o}-anchor-${p}`);m.add(`maplibregl-${o}-anchor-${t}`)}class Ei extends a.E{constructor(t){if(super(),this._onKeyPress=o=>{const m=o.code,p=o.charCode||o.keyCode;m!=="Space"&&m!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=o=>{const m=o.originalEvent.target,p=this._element;this._popup&&(m===p||p.contains(m))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=gp(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${oo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${p}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=a.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");const o=I.createNS("http://www.w3.org/2000/svg","svg"),m=41,p=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${m}px`),o.setAttributeNS(null,"width",`${p}px`),o.setAttributeNS(null,"viewBox",`0 0 ${p} ${m}`);const y=I.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const S=I.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const P=I.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of M){const we=I.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",ye.rx),we.setAttributeNS(null,"ry",ye.ry),P.appendChild(we)}const L=I.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const V=I.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(V);const U=I.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");const N=I.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild(N);const W=I.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(6.0, 7.0)"),W.setAttributeNS(null,"fill","#FFFFFF");const Q=I.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ve=I.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#000000"),ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962");const ge=I.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),Q.appendChild(ve),Q.appendChild(ge),S.appendChild(P),S.appendChild(L),S.appendChild(U),S.appendChild(W),S.appendChild(Q),o.appendChild(S),o.setAttributeNS(null,"height",m*this._scale+"px"),o.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(o),this._offset=a.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),wi(this._element,this._anchor,"marker"),t&&t.className)for(const o of t.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=a.S.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const p=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var o,m;const p=(o=this._map)===null||o===void 0?void 0:o.terrain,y=this._map.transform.isLocationOccluded(this._lngLat);if(!p||y){const W=y?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==W&&(this._element.style.opacity=W))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const S=this._map,P=S.terrain.depthAtPoint(this._pos),M=S.terrain.getElevationForLngLatZoom(this._lngLat,S.transform.tileZoom);if(S.transform.lngLatToCameraDepth(this._lngLat,M)-P<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/S.transform.pixelsPerMeter,V=Math.sin(S.getPitch()*Math.PI/180)*L,U=S.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),N=S.transform.lngLatToCameraDepth(this._lngLat,M+V)-U>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=a.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,o){return(this._opacity===void 0||t===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const vp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let As=0,Es=!1;const Gh={maxWidth:100,unit:"metric"};function qc(v,t,o){const m=o&&o.maxWidth||100,p=v._container.clientHeight/2,y=v._container.clientWidth/2,S=v.unproject([y-m/2,p]),P=v.unproject([y+m/2,p]),M=Math.round(v.project(P).x-v.project(S).x),L=Math.min(m,M,v._container.clientWidth),V=S.distanceTo(P);if(o&&o.unit==="imperial"){const U=3.2808*V;U>5280?lo(t,L,U/5280,v._getUIString("ScaleControl.Miles")):lo(t,L,U,v._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?lo(t,L,V/1852,v._getUIString("ScaleControl.NauticalMiles")):V>=1e3?lo(t,L,V/1e3,v._getUIString("ScaleControl.Kilometers")):lo(t,L,V,v._getUIString("ScaleControl.Meters"))}function lo(v,t,o,m){const p=function(y){const S=Math.pow(10,`${Math.floor(y)}`.length-1);let P=y/S;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(M){const L=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*L)/L}(P),S*P}(o);v.style.width=t*(p/o)+"px",v.innerHTML=`${p}&nbsp;${m}`}const du={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},qh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hc(v){if(v){if(typeof v=="number"){const t=Math.round(Math.abs(v)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,v),"top-left":new a.P(t,t),"top-right":new a.P(-t,t),bottom:new a.P(0,-v),"bottom-left":new a.P(t,-t),"bottom-right":new a.P(-t,-t),left:new a.P(v,0),right:new a.P(-v,0)}}if(v instanceof a.P||Array.isArray(v)){const t=a.P.convert(v);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:a.P.convert(v.center||[0,0]),top:a.P.convert(v.top||[0,0]),"top-left":a.P.convert(v["top-left"]||[0,0]),"top-right":a.P.convert(v["top-right"]||[0,0]),bottom:a.P.convert(v.bottom||[0,0]),"bottom-left":a.P.convert(v["bottom-left"]||[0,0]),"bottom-right":a.P.convert(v["bottom-right"]||[0,0]),left:a.P.convert(v.left||[0,0]),right:a.P.convert(v.right||[0,0])}}return Hc(new a.P(0,0))}const Hh=b;d.AJAXError=a.cy,d.Event=a.l,d.Evented=a.E,d.LngLat=a.S,d.MercatorCoordinate=a.a0,d.Point=a.P,d.addProtocol=a.cz,d.config=a.a,d.removeProtocol=a.cA,d.AttributionControl=Nc,d.BoxZoomHandler=Rh,d.CanvasSource=Pt,d.CooperativeGesturesHandler=hp,d.DoubleClickZoomHandler=$c,d.DragPanHandler=Fh,d.DragRotateHandler=jc,d.EdgeInsets=ba,d.FullscreenControl=class extends a.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var t;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=o==null?void 0:o.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=kt,d.GeolocateControl=class extends a.E{constructor(v){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const o=new a.S(t.coords.longitude,t.coords.latitude),m=t.coords.accuracy,p=this._map.getBearing(),y=a.e({bearing:p},this.options.fitBoundsOptions),S=le.fromLngLat(o,m);this._map.fitBounds(S,y,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const o=new a.S(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Es)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ei({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ei({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},vp,v)}onAdd(v){return this._map=v,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(t=!1){if(gr!==void 0&&!t)return gr;if(window.navigator.permissions===void 0)return gr=!!window.navigator.geolocation,gr;try{gr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{gr=!!window.navigator.geolocation}return gr})}().then(t=>this._finishSetupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,As=0,Es=!1}_isOutOfMapMaxBounds(v){const t=this._map.getMaxBounds(),o=v.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),t=v.getSouthEast(),o=v.getNorthEast(),m=t.distanceTo(o),p=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":As--,Es=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),As++,As>1?(v={maximumAge:6e5,timeout:0},Es=!0):(v=this.options.positionOptions,Es=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const t=(v=this._map.getProjection())===null||v===void 0?void 0:v.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((v=this._map.getProjection())===null||v===void 0?void 0:v.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=I.create("button","maplibregl-ctrl-globe",this._container),I.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},d.Hash=iu,d.ImageSource=ct,d.KeyboardHandler=rl,d.LngLatBounds=le,d.LogoControl=Nh,d.Map=class extends pi{constructor(v){var t,o;a.cv.mark(a.cw.create);const m=Object.assign(Object.assign(Object.assign({},cu),v),{canvasContextAttributes:Object.assign(Object.assign({},cu.canvasContextAttributes),v.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new Gi,y=new pc;if(m.minZoom!==void 0&&p.setMinZoom(m.minZoom),m.maxZoom!==void 0&&p.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&p.setMinPitch(m.minPitch),m.maxPitch!==void 0&&p.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&p.setRenderWorldCopies(m.renderWorldCopies),super(p,y,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new fp,this._controls=[],this._mapId=a.a6(),this._contextLost=P=>{P.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:P}))},this._contextRestored=P=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:P}))},this._onMapScroll=P=>{if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Gc),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this.transformCameraUpdate=m.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new te(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let P=!1;const M=zc(L=>{this._trackResize&&!this._removed&&(this.resize(L),this.redraw())},50);this._resizeObserver=new ResizeObserver(L=>{P?M(L):P=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Is(this,m),this._hash=m.hash&&new iu(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,a.e({},m.fitBoundsOptions,{duration:0}))));const S=typeof m.style=="string"||((o=(t=m.style)===null||t===void 0?void 0:t.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,S),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Nc(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new Nh,m.logoPosition),this.on("style.load",()=>{if(S||this._resizeTransform(),this.transform.unmodified){const P=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(P)}}),this.on("data",P=>{this._update(P.dataType==="style"),this.fire(new a.l(`${P.dataType}data`,P))}),this.on("dataloading",P=>{this.fire(new a.l(`${P.dataType}dataloading`,P))}),this.on("dataabort",P=>{this.fire(new a.l("sourcedataabort",P))})}_getMapId(){return this._mapId}setGlobalStateProperty(v,t){return this.style.setGlobalStateProperty(v,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(v,t){if(t===void 0&&(t=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=v.onAdd(this);this._controls.push(v);const m=this._controlPositions[t];return t.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(v);return t>-1&&this._controls.splice(t,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,t,o,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,t,o,m)}resize(v,t=!0){const[o,m]=this._containerDimensions(),p=this._getClampedPixelRatio(o,m);if(this._resizeCanvas(o,m,p),this.painter.resize(o,m,p),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const P=this._getClampedPixelRatio(o,m);this._resizeCanvas(o,m,P),this.painter.resize(o,m,P)}this._resizeTransform(t);const y=!this._moving;return y&&(this.stop(),this.fire(new a.l("movestart",v)).fire(new a.l("move",v))),this.fire(new a.l("resize",v)),y&&this.fire(new a.l("moveend",v)),this}_resizeTransform(v=!0){var t;const[o,m]=this._containerDimensions();this.transform.resize(o,m,v),(t=this._requestedCameraState)===null||t===void 0||t.resize(o,m,v)}_getClampedPixelRatio(v,t){const{0:o,1:m}=this._maxCanvasSize,p=this.getPixelRatio(),y=v*p,S=t*p;return Math.min(y>o?o/y:1,S>m?m/S:1)*p}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(le.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.setMinZoom(v),this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.setMaxZoom(v),this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}project(v){return this.transform.locationToScreenPoint(a.S.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(a.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,t,o){if(v==="mouseenter"||v==="mouseover"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:y=>{const S=t.filter(M=>this.getLayer(M)),P=S.length!==0?this.queryRenderedFeatures(y.point,{layers:S}):[];P.length?m||(m=!0,o.call(this,new Yr(v,this,y.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(v==="mouseleave"||v==="mouseout"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:S=>{const P=t.filter(M=>this.getLayer(M));(P.length!==0?this.queryRenderedFeatures(S.point,{layers:P}):[]).length?m=!0:m&&(m=!1,o.call(this,new Yr(v,this,S.originalEvent)))},mouseout:S=>{m&&(m=!1,o.call(this,new Yr(v,this,S.originalEvent)))}}}}{const m=p=>{const y=t.filter(P=>this.getLayer(P)),S=y.length!==0?this.queryRenderedFeatures(p.point,{layers:y}):[];S.length&&(p.features=S,o.call(this,p),delete p.features)};return{layers:t,listener:o,delegates:{[v]:m}}}}_saveDelegatedListener(v,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(t)}_removeDelegatedListener(v,t,o){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const m=this._delegatedListeners[v];for(let p=0;p<m.length;p++){const y=m[p];if(y.listener===o&&y.layers.length===t.length&&y.layers.every(S=>t.includes(S))){for(const S in y.delegates)this.off(S,y.delegates[S]);return void m.splice(p,1)}}}on(v,t,o){if(o===void 0)return super.on(v,t);const m=typeof t=="string"?[t]:t,p=this._createDelegatedListener(v,m,o);this._saveDelegatedListener(v,p);for(const y in p.delegates)this.on(y,p.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(v,m,o)}}}once(v,t,o){if(o===void 0)return super.once(v,t);const m=typeof t=="string"?[t]:t,p=this._createDelegatedListener(v,m,o);for(const y in p.delegates){const S=p.delegates[y];p.delegates[y]=(...P)=>{this._removeDelegatedListener(v,m,o),S(...P)}}this._saveDelegatedListener(v,p);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(v,t,o){return o===void 0?super.off(v,t):(this._removeDelegatedListener(v,typeof t=="string"?[t]:t,o),this)}queryRenderedFeatures(v,t){if(!this.style)return[];let o;const m=v instanceof a.P||Array.isArray(v),p=m?v:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(m?{}:v)||{},p instanceof a.P||typeof p[0]=="number")o=[a.P.convert(p)];else{const y=a.P.convert(p[0]),S=a.P.convert(p[1]);o=[y,new a.P(S.x,y.y),S,new a.P(y.x,S.y),y]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(v,t){return this.style.querySourceFeatures(v,t)}setStyle(v,t){return(t=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(v,t))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const t=this._locale[v];if(t==null)throw new Error(`Missing UI string '${v}'`);return t}_updateStyle(v,t){var o,m;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,t));const p=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new ch(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,t,p):this.style.loadJSON(v,t,p),this):((m=(o=this.style)===null||o===void 0?void 0:o.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ch(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,t){if(typeof v=="string"){const o=this._requestManager.transformRequest(v,"Style");a.j(o,new AbortController).then(m=>{this._updateDiff(m.data,t)}).catch(m=>{m&&this.fire(new a.k(m))})}else typeof v=="object"&&this._updateDiff(v,t)}_updateDiff(v,t){try{this.style.setState(v,t)&&this._update(!0)}catch(o){a.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(v,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(v,t){return this._lazyInitEmptyStyle(),this.style.addSource(v,t),this._update(!0)}isSourceLoaded(v){const t=this.style&&this.style.sourceCaches[v];if(t!==void 0)return t.loaded();this.fire(new a.k(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const t=this.style.sourceCaches[v.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&t.reload();for(const o in this.style._layers){const m=this.style._layers[o];m.type==="hillshade"&&m.source===v.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===v.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Za(this.painter,t,v),this.painter.renderToTexture=new un(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var m;o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=o.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:v})),this}getTerrain(){var v,t;return(t=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const t in v){const o=v[t]._tiles;for(const m in o){const p=o[m];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,t,o){if(o){const m=this.getSource(o);if(!m)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);m.calculateTileZoom=rt(Math.max(1,v),Math.max(1,t))}else for(const m in this.style.sourceCaches)this.style.sourceCaches[m].getSource().calculateTileZoom=rt(Math.max(1,v),Math.max(1,t));return this._update(!0),this}refreshTiles(v,t){const o=this.style.sourceCaches[v];if(!o)throw new Error(`There is no source cache with ID "${v}", cannot refresh tile`);t===void 0?o.reload(!0):o.refreshTiles(t.map(m=>new a.a3(m.z,m.x,m.y)))}addImage(v,t,o={}){const{pixelRatio:m=1,sdf:p=!1,stretchX:y,stretchY:S,content:P,textFitWidth:M,textFitHeight:L}=o;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||a.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:V,height:U,data:N}=t,W=t;return this.style.addImage(v,{data:new a.R({width:V,height:U},new Uint8Array(N)),pixelRatio:m,stretchX:y,stretchY:S,content:P,textFitWidth:M,textFitHeight:L,sdf:p,version:0,userImage:W}),W.onAdd&&W.onAdd(this,v),this}}{const{width:V,height:U,data:N}=A.getImageData(t);this.style.addImage(v,{data:new a.R({width:V,height:U},N),pixelRatio:m,stretchX:y,stretchY:S,content:P,textFitWidth:M,textFitHeight:L,sdf:p,version:0})}}updateImage(v,t){const o=this.style.getImage(v);if(!o)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=t instanceof HTMLImageElement||a.b(t)?A.getImageData(t):t,{width:p,height:y,data:S}=m;if(p===void 0||y===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==o.data.width||y!==o.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(t instanceof HTMLImageElement||a.b(t));return o.data.replace(S,P),this.style.updateImage(v,o),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return X.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,t){return this._lazyInitEmptyStyle(),this.style.addLayer(v,t),this._update(!0)}moveLayer(v,t){return this.style.moveLayer(v,t),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,t,o){return this.style.setLayerZoomRange(v,t,o),this._update(!0)}setFilter(v,t,o={}){return this.style.setFilter(v,t,o),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,t,o,m={}){return this.style.setPaintProperty(v,t,o,m),this._update(!0)}getPaintProperty(v,t){return this.style.getPaintProperty(v,t)}setLayoutProperty(v,t,o,m={}){return this.style.setLayoutProperty(v,t,o,m),this._update(!0)}getLayoutProperty(v,t){return this.style.getLayoutProperty(v,t)}setGlyphs(v,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,t,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,t,o,m=>{m||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,t,o=>{o||this._update(!0)}),this}setLight(v,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,t){return this.style.setFeatureState(v,t),this._update()}removeFeatureState(v,t){return this.style.removeFeatureState(v,t),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,t=0;return this._container&&(v=this._container.clientWidth||400,t=this._container.clientHeight||300),[v,t]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const t=this._canvasContainer=I.create("div","maplibregl-canvas-container",v);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),m=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],m);const p=this._controlContainer=I.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{y[S]=I.create("div",`maplibregl-ctrl-${S} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,t,o){this._canvas.width=Math.floor(o*v),this._canvas.height=Math.floor(o*t),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{t={requestedAttributes:v},m&&(t.statusMessage=m.statusMessage,t.type=m.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!o){const m="Failed to initialize WebGL";throw t?(t.message=m,new Error(JSON.stringify(t))):new Error(m)}this.painter=new Sa(o,this.transform),R.testSupport(o)}migrateProjection(v,t){super.migrateProjection(v,t),this.painter.transform=v,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var t,o,m,p,y;const S=this._idleTriggered?this._fadeDuration:0,P=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,N=A.now();this.style.zoomHistory.update(U,N);const W=new a.F(U,{now:N,fadeDuration:S,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),Q=W.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(M=!0,this._crossFadingFactor=Q),this.style.update(W)}const L=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==P;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||L)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,L),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cv.mark(a.cw.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,a.cv.mark(a.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cv.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frame(this._frameRequest,v=>{a.cv.frame(v),this._frameRequest=null;try{this._render(v)}catch(t){if(!a.cx(t)&&!function(o){return o.message===Th}(t))throw t}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Uh}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},d.MapMouseEvent=Yr,d.MapTouchEvent=Aa,d.MapWheelEvent=Dh,d.Marker=Ei,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const t=this._map.getZoom(),o=t===this._map.getMaxZoom(),m=t===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,o)=>{const m=this._map._getUIString(`NavigationControl.${o}`);t.title=m,t.setAttribute("aria-label",m)},this.options=a.e({},jr,v),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new pp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,t){const o=I.create("button",v,this._container);return o.type="button",o.addEventListener("click",t),o}},d.Popup=class extends a.E{constructor(v){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=gp(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const o=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const p=Hc(this.options.offset);if(!m){const S=this._container.offsetWidth,P=this._container.offsetHeight;let M;M=o.y+p.bottom.y<P?["top"]:o.y>this._map.transform.height-P?["bottom"]:[],o.x<S/2?M.push("left"):o.x>this._map.transform.width-S/2&&M.push("right"),m=M.length===0?"bottom":M.join("-")}let y=o.add(p[m]);this.options.subpixelPositioning||(y=y.round()),I.setTransform(this._container,`${oo[m]} translate(${y.x}px,${y.y}px)`),wi(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(du),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=a.S.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const t=document.createDocumentFragment(),o=document.createElement("body");let m;for(o.innerHTML=v;m=o.firstChild,m;)t.appendChild(m);return this.setDOMContent(t)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(qh);v&&v.focus()}},d.RasterDEMTileSource=Je,d.RasterTileSource=ut,d.ScaleControl=class{constructor(v){this._onMove=()=>{qc(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,qc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Gh),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=dp,d.Style=ch,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Bh,d.TwoFingersTouchRotateHandler=zh,d.TwoFingersTouchZoomHandler=Wa,d.TwoFingersTouchZoomRotateHandler=$h,d.VectorTileSource=Ze,d.VideoSource=Dt,d.addSourceType=(v,t)=>a._(void 0,void 0,void 0,function*(){if(Ut(v))throw new Error(`A source type called "${v}" already exists.`);((o,m)=>{nn[o]=m})(v,t)}),d.clearPrewarmedResources=function(){const v=Qe;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(ze),Qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.createTileMesh=oh,d.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return En().getRTLTextPluginStatus()},d.getVersion=function(){return Hh},d.getWorkerCount=function(){return Se.workerCount},d.getWorkerUrl=function(){return a.a.WORKER_URL},d.importScriptInWorkers=function(v){return Re().broadcast("IS",v)},d.prewarm=function(){Tt().acquire(ze)},d.setMaxParallelImageRequests=function(v){a.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,t){return En().setRTLTextPlugin(v,t)},d.setWorkerCount=function(v){Se.workerCount=v},d.setWorkerUrl=function(v){a.a.WORKER_URL=v}});var f=r;return f})}(ag)),ag.exports}var BN=zN();const bC=k2(BN),VN={class:"page-container"},ON={class:"coords-row"},FN={class:"km-row"},$N={key:0,class:"error"},jN={key:1,class:"success"},NN={__name:"NewRidePage",setup(e){const n=tt(""),r=tt(""),s=tt(""),c=tt(""),f=tt(!1),d=tt(null);let a=null;zi(()=>{const C=new bC.Map({container:d.value,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[10.4515,51.1657],zoom:6});C.on("click",function(w){n.value=w.lngLat.lat,r.value=w.lngLat.lng,a?a.setLngLat([w.lngLat.lng,w.lngLat.lat]):a=new bC.Marker().setLngLat([w.lngLat.lng,w.lngLat.lat]).addTo(C)})});const b=async()=>{c.value="",f.value=!1;const{data:{user:C}}=await qn.auth.getUser();if(!C){c.value="Nicht eingeloggt.";return}if(!n.value||!r.value){c.value="Bitte whle einen Startpunkt auf der Karte.";return}if(!s.value||parseInt(s.value,10)<=1){c.value="Bitte gib mindestens 2 Kilometer ein.";return}const w=`SRID=4326;POINT(${r.value} ${n.value})`,{error:k}=await qn.from("rides").insert([{user_id:C.id,km:parseInt(s.value,10),StartPoint:w}]);k?c.value=k.message:(f.value=!0,n.value="",r.value="",s.value="",a&&(a.remove(),a=null))};return(C,w)=>(vn(),ui("div",VN,[w[7]||(w[7]=Z("h1",null,"Neue Fahrt eintragen",-1)),Z("div",{ref_key:"mapContainer",ref:d,class:"ride-map"},null,512),Z("form",{onSubmit:wl(b,["prevent"])},[Z("div",ON,[Z("label",null,[w[3]||(w[3]=wn(" Startpunkt (Latitude): ")),ei(Z("input",{type:"number","onUpdate:modelValue":w[0]||(w[0]=k=>n.value=k),step:"any",readonly:"",class:"coord-input"},null,512),[[Cl,n.value]])]),Z("label",null,[w[4]||(w[4]=wn(" Startpunkt (Longitude): ")),ei(Z("input",{type:"number","onUpdate:modelValue":w[1]||(w[1]=k=>r.value=k),step:"any",readonly:"",class:"coord-input"},null,512),[[Cl,r.value]])])]),Z("div",FN,[Z("label",null,[w[5]||(w[5]=wn(" Kilometer: ")),ei(Z("input",{type:"number","onUpdate:modelValue":w[2]||(w[2]=k=>s.value=k),min:"0",step:"1",required:"",class:"coord-input"},null,512),[[Cl,s.value]])])]),w[6]||(w[6]=Z("button",{type:"submit"},"Speichern",-1))],32),c.value?(vn(),ui("p",$N,Qn(c.value),1)):Hr("",!0),f.value?(vn(),ui("p",jN,"Fahrt gespeichert!")):Hr("",!0)]))}},UN={class:"page-container"},GN={key:0},qN={class:"team-name"},HN={key:1},WN={key:2},ZN={key:3},KN={key:4},YN={key:0,class:"error"},XN={class:"members-table"},JN={__name:"MyTeamPage",setup(e){const n=lc(),r=tt(!0),s=tt(null),c=tt([]),f=tt("");async function d(){r.value=!0;const{data:{user:C}}=await qn.auth.getUser();if(!C){r.value=!1;return}const{data:w}=await qn.from("members").select("team_id").eq("user_id",C.id).single();if(!(w!=null&&w.team_id)){r.value=!1;return}const{data:k}=await qn.from("teams").select("id, name").eq("id",w.team_id).single();s.value=k;const{data:A,error:I}=await qn.functions.invoke("Get-team-Members",{body:{teamId:k.id}});I?(c.value=[],f.value=`Fehler beim Laden der Mitglieder: ${I.message||I}`):(c.value=A.members,f.value=""),r.value=!1}function a(){n.push("/teams")}function b(){n.push("/invite-member")}return zi(d),(C,w)=>(vn(),ui("div",UN,[s.value?(vn(),ui("h1",GN,[w[0]||(w[0]=Z("strong",null,"Dein Team:",-1)),w[1]||(w[1]=wn()),Z("span",qN,Qn(s.value.name),1)])):(vn(),ui("h1",HN,"Mein Team")),r.value?(vn(),ui("div",WN,"Lade Teamdaten...")):s.value?(vn(),ui("div",KN,[w[4]||(w[4]=Z("h3",null,"Mitglieder",-1)),f.value?(vn(),ui("p",YN,Qn(f.value),1)):Hr("",!0),Z("table",XN,[w[3]||(w[3]=Z("thead",null,[Z("tr",null,[Z("th",null,"Username"),Z("th",null,"User-ID")])],-1)),Z("tbody",null,[(vn(!0),ui(qt,null,Gb(c.value,k=>{var A;return vn(),ui("tr",{key:k.user_id},[Z("td",null,Qn(((A=k.profiles)==null?void 0:A.username)||"-"),1),Z("td",null,Qn(k.user_id),1)])}),128))])]),Z("button",{class:"invite-btn",onClick:b},"Mitglied einladen")])):(vn(),ui("div",ZN,[w[2]||(w[2]=Z("p",null,"Du bist in keinem Team.",-1)),Z("button",{onClick:a},"Zu den Teams")]))]))}},QN=[{path:"/",component:cN},{path:"/login",component:hN},{path:"/register",component:AN},{path:"/teams",component:wN},{path:"/create-team",component:TN},{path:"/profile",component:RN},{path:"/rides/new",component:NN},{path:"/my-team",component:JN},{path:"/join-team/:teamId",component:()=>Yu(()=>import("./JoinTeamPage-Bs2oNBXX.js"),[])},{path:"/invite-member",component:()=>Yu(()=>import("./InviteMemberPage-BRrpml1R.js"),[])}],Du=J$({history:P$("/fahrrad_kilometer_tracker/"),routes:QN});Du.beforeEach(async(e,n,r)=>{if(e.path==="/"){const{data:{session:s}}=await qn.auth.getSession();r(s?"/teams":"/login")}else r()});async function e6(){qn.auth.onAuthStateChange((r,s)=>{(r==="SIGNED_IN"||r==="TOKEN_REFRESHED")&&Du.currentRoute.value.path==="/login"&&Du.replace("/teams"),r==="SIGNED_OUT"&&Du.replace("/login")});const{data:{session:e}}=await qn.auth.getSession();!e&&Du.currentRoute.value.path!=="/login"&&Du.replace("/login");const n=Ek({components:O5,directives:Y5,theme:{defaultTheme:"customTheme",themes:{customTheme:{dark:!1,colors:{primary:"#42b883",secondary:"#2d323c",accent:"#646cff",error:"#e74c3c",success:"#27ae60",background:"#23272f",surface:"#2d323c"}}}}});ZD(oN).use(Du).use(n).mount("#app")}e6();export{Z as a,G as b,ui as c,mn as d,Hr as e,lc as f,vn as g,wn as h,ei as i,wl as j,zi as o,tt as r,qn as s,Qn as t,t6 as u,Cl as v,an as w};
