import{_ as k,r as a,o as y,c as u,a as t,e as c,h as b,i as M,v as E,j as w,t as B,s as d,f as x,g as m}from"./index-CpLVLoDn.js";const I={class:"invite-member-page"},T={key:0,class:"success"},V={key:1,class:"error"},N=["value"],$={__name:"InviteMemberPage",setup(h){const p=x(),i=a(""),l=a(!1),s=a(""),v=a(""),o=a(null);async function f(){const{data:{user:n}}=await d.auth.getUser();if(!n)return;const{data:e}=await d.from("members").select("team_id").eq("user_id",n.id).single();e!=null&&e.team_id&&(o.value=e.team_id,v.value=`${window.location.origin}/#/join-team/${e.team_id}`)}async function g(){if(l.value=!1,s.value="",!i.value||!o.value){s.value="Bitte gib eine gültige E-Mail-Adresse ein.";return}const{error:n}=await d.functions.invoke("E-Mail_Team_invite",{body:{to:i.value,teamId:o.value}});n?s.value=`Fehler beim Versenden der Einladung: ${n.message||n}`:(l.value=!0,i.value="")}function _(){p.push("/my-team")}return y(f),(n,e)=>(m(),u("div",I,[e[4]||(e[4]=t("h1",null,"Mitglied einladen",-1)),e[5]||(e[5]=t("p",null,"Du kannst ein Teammitglied per E-Mail einladen oder den Beitrittslink teilen.",-1)),t("form",{onSubmit:w(g,["prevent"])},[t("label",null,[e[2]||(e[2]=b(" E-Mail-Adresse: ")),M(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),required:""},null,512),[[E,i.value]])]),e[3]||(e[3]=t("button",{type:"submit"},"Einladung senden",-1))],32),l.value?(m(),u("p",T,"Einladung verschickt!")):c("",!0),s.value?(m(),u("p",V,B(s.value),1)):c("",!0),e[6]||(e[6]=t("h3",null,"Beitrittslink",-1)),t("input",{type:"text",value:v.value,readonly:"",onFocus:e[1]||(e[1]=r=>r.target.select()),style:{width:"100%"}},null,40,N),t("button",{onClick:_,style:{"margin-top":"1rem"}},"Zurück zum Team")]))}},q=k($,[["__scopeId","data-v-3d87c273"]]);export{q as default};
