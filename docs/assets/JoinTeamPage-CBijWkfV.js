import{r as n,o as g,u as p,s as u,c as a,a as d,b as _,w as c,d as b,e as k,t as y,f as T,g as r,h as f}from"./index-BVcvALwB.js";const w={class:"page-container"},h={key:0},B={key:1},x={key:2},D={key:0,class:"error"},C={__name:"JoinTeamPage",setup(N){const v=p();T();const t=n(!0),l=n(!1),s=n("");return g(async()=>{t.value=!0;const i=v.params.teamId,{data:{user:e}}=await u.auth.getUser();if(!e){s.value="Du musst eingeloggt sein, um einem Team beizutreten.",t.value=!1;return}const{data:o}=await u.from("members").select("team_id").eq("user_id",e.id).eq("team_id",i).single();if(o){s.value="Du bist bereits Mitglied in diesem Team.",t.value=!1;return}const{error:m}=await u.from("members").insert([{user_id:e.id,team_id:i}]);if(m){s.value="Beitritt fehlgeschlagen: "+m.message,t.value=!1;return}l.value=!0,t.value=!1}),(i,e)=>{const o=b("router-link");return r(),a("div",w,[e[3]||(e[3]=d("h1",null,"Team beitreten",-1)),t.value?(r(),a("div",h,"Beitritt wird geprÃ¼ft...")):l.value?(r(),a("div",B,[e[1]||(e[1]=d("p",null,"Du bist dem Team erfolgreich beigetreten!",-1)),_(o,{to:"/my-team"},{default:c(()=>e[0]||(e[0]=[f("Zum Team")])),_:1,__:[0]})])):(r(),a("div",x,[s.value?(r(),a("p",D,y(s.value),1)):k("",!0),_(o,{to:"/"},{default:c(()=>e[2]||(e[2]=[f("Zur Startseite")])),_:1,__:[2]})]))])}}};export{C as default};
