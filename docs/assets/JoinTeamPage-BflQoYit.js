import{_ as g,r as n,o as p,u as b,s as u,c as s,a as d,b as _,w as c,d as k,e as y,t as T,f as w,g as r,h as f}from"./index-DHrDbRHJ.js";const h={class:"join-team-page"},x={key:0},B={key:1},D={key:2},N={key:0,class:"error"},V={__name:"JoinTeamPage",setup(C){const v=b();w();const t=n(!0),l=n(!1),a=n("");return p(async()=>{t.value=!0;const i=v.params.teamId,{data:{user:e}}=await u.auth.getUser();if(!e){a.value="Du musst eingeloggt sein, um einem Team beizutreten.",t.value=!1;return}const{data:o}=await u.from("members").select("team_id").eq("user_id",e.id).eq("team_id",i).single();if(o){a.value="Du bist bereits Mitglied in diesem Team.",t.value=!1;return}const{error:m}=await u.from("members").insert([{user_id:e.id,team_id:i}]);if(m){a.value="Beitritt fehlgeschlagen: "+m.message,t.value=!1;return}l.value=!0,t.value=!1}),(i,e)=>{const o=k("router-link");return r(),s("div",h,[e[3]||(e[3]=d("h1",null,"Team beitreten",-1)),t.value?(r(),s("div",x,"Beitritt wird geprÃ¼ft...")):l.value?(r(),s("div",B,[e[1]||(e[1]=d("p",null,"Du bist dem Team erfolgreich beigetreten!",-1)),_(o,{to:"/my-team"},{default:c(()=>e[0]||(e[0]=[f("Zum Team")])),_:1,__:[0]})])):(r(),s("div",D,[a.value?(r(),s("p",N,T(a.value),1)):y("",!0),_(o,{to:"/"},{default:c(()=>e[2]||(e[2]=[f("Zur Startseite")])),_:1,__:[2]})]))])}}},M=g(V,[["__scopeId","data-v-0a59aa26"]]);export{M as default};
