import{r as s,o as y,c as r,a as t,e as c,h as b,i as E,v as M,j as _,t as w,s as d,f as B,g as m}from"./index-7282usbG.js";const T={class:"page-container"},x={key:0,class:"success"},V={key:1,class:"error"},I=["value"],h={__name:"InviteMemberPage",setup(N){const p=B(),i=s(""),l=s(!1),a=s(""),v=s(""),o=s(null);async function f(){const{data:{user:n}}=await d.auth.getUser();if(!n)return;const{data:e}=await d.from("members").select("team_id").eq("user_id",n.id).single();e!=null&&e.team_id&&(o.value=e.team_id,v.value=`${window.location.origin}/#/join-team/${e.team_id}`)}async function g(){if(l.value=!1,a.value="",!i.value||!o.value){a.value="Bitte gib eine gültige E-Mail-Adresse ein.";return}const{error:n}=await d.functions.invoke("E-Mail_Team_invite",{body:{to:i.value,teamId:o.value}});n?a.value=`Fehler beim Versenden der Einladung: ${n.message||n}`:(l.value=!0,i.value="")}function k(){p.push("/my-team")}return y(f),(n,e)=>(m(),r("div",T,[e[4]||(e[4]=t("h1",null,"Mitglied einladen",-1)),e[5]||(e[5]=t("p",null,"Du kannst ein Teammitglied per E-Mail einladen oder den Beitrittslink teilen.",-1)),t("form",{onSubmit:_(g,["prevent"])},[t("label",null,[e[2]||(e[2]=b(" E-Mail-Adresse: ")),E(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=u=>i.value=u),required:""},null,512),[[M,i.value]])]),e[3]||(e[3]=t("button",{type:"submit"},"Einladung senden",-1))],32),l.value?(m(),r("p",x,"Einladung verschickt!")):c("",!0),a.value?(m(),r("p",V,w(a.value),1)):c("",!0),e[6]||(e[6]=t("h3",null,"Beitrittslink",-1)),t("input",{type:"text",value:v.value,readonly:"",onFocus:e[1]||(e[1]=u=>u.target.select()),style:{width:"100%"}},null,40,I),t("button",{onClick:k,style:{"margin-top":"1rem"}},"Zurück zum Team")]))}};export{h as default};
