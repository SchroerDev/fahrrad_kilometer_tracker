import{r,o as $,c as m,w as t,s as c,a as n,b as j,d as v,e as a,f as o,i as b,h as q,j as A,t as F}from"./index-D-t-_VYl.js";const z={__name:"InviteMemberPage",setup(S){const y=j(),i=r(""),u=r(!1),s=r(""),f=r(""),d=r(null);async function x(){const{data:{user:l}}=await c.auth.getUser();if(!l)return;const{data:e}=await c.from("members").select("team_id").eq("user_id",l.id).single();e!=null&&e.team_id&&(d.value=e.team_id,f.value=`${window.location.origin}/#/join-team/${e.team_id}`)}async function w(){if(u.value=!1,s.value="",!i.value||!d.value){s.value="Bitte gib eine gültige E-Mail-Adresse ein.";return}const{error:l}=await c.functions.invoke("E-Mail_Team_invite",{body:{to:i.value,teamId:d.value}});l?s.value=`Fehler beim Versenden der Einladung: ${l.message||l}`:(u.value=!0,i.value="")}function E(){y.push("/my-team")}return $(x),(l,e)=>{const M=n("v-card-title"),V=n("v-card-subtitle"),p=n("v-text-field"),g=n("v-btn"),B=n("v-form"),k=n("v-alert"),T=n("v-card-text"),C=n("v-card"),I=n("v-container"),N=n("v-main");return v(),m(N,null,{default:t(()=>[a(I,{fluid:""},{default:t(()=>[a(C,{class:"pa-4",elevation:"4"},{default:t(()=>[a(M,{class:"text-h5"},{default:t(()=>e[2]||(e[2]=[o("Mitglied einladen")])),_:1,__:[2]}),a(V,null,{default:t(()=>e[3]||(e[3]=[o("Du kannst ein Teammitglied per E-Mail einladen oder den Beitrittslink teilen.")])),_:1,__:[3]}),a(T,null,{default:t(()=>[a(B,{onSubmit:A(w,["prevent"])},{default:t(()=>[a(p,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=_=>i.value=_),label:"E-Mail-Adresse",type:"email",required:"","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),a(g,{type:"submit",color:"primary",block:""},{default:t(()=>e[4]||(e[4]=[o("Einladung senden")])),_:1,__:[4]})]),_:1}),u.value?(v(),m(k,{key:0,type:"success",dense:"",class:"mt-4"},{default:t(()=>e[5]||(e[5]=[o("Einladung verschickt!")])),_:1,__:[5]})):b("",!0),s.value?(v(),m(k,{key:1,type:"error",dense:"",class:"mt-4"},{default:t(()=>[o(F(s.value),1)]),_:1})):b("",!0),e[7]||(e[7]=q("h3",{class:"text-h6 mt-6"},"Beitrittslink",-1)),a(p,{value:f.value,readonly:"",onFocus:e[1]||(e[1]=_=>_.target.select()),"prepend-inner-icon":"mdi-link"},null,8,["value"]),a(g,{onClick:E,class:"mt-4",color:"grey"},{default:t(()=>e[6]||(e[6]=[o("Zurück zum Team")])),_:1,__:[6]})]),_:1,__:[7]})]),_:1})]),_:1})]),_:1})}}};export{z as default};
