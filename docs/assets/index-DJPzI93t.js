(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=r(c);fetch(c.href,f)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pb(e){const n=Object.create(null);for(const r of e.split(","))n[r]=1;return r=>r in n}const pi={},kd=[],js=()=>{},ME=()=>!1,Ig=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ib=e=>e.startsWith("onUpdate:"),Cr=Object.assign,Ab=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},DE=Object.prototype.hasOwnProperty,li=(e,n)=>DE.call(e,n),_n=Array.isArray,Td=e=>Ag(e)==="[object Map]",xC=e=>Ag(e)==="[object Set]",Tn=e=>typeof e=="function",Oi=e=>typeof e=="string",Il=e=>typeof e=="symbol",Pi=e=>e!==null&&typeof e=="object",wC=e=>(Pi(e)||Tn(e))&&Tn(e.then)&&Tn(e.catch),SC=Object.prototype.toString,Ag=e=>SC.call(e),RE=e=>Ag(e).slice(8,-1),CC=e=>Ag(e)==="[object Object]",Eb=e=>Oi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Sf=Pb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Eg=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},LE=/-(\w)/g,ga=Eg(e=>e.replace(LE,(n,r)=>r?r.toUpperCase():"")),zE=/\B([A-Z])/g,Yu=Eg(e=>e.replace(zE,"-$1").toLowerCase()),Ws=Eg(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ay=Eg(e=>e?`on${Ws(e)}`:""),Sl=(e,n)=>!Object.is(e,n),Jp=(e,...n)=>{for(let r=0;r<e.length;r++)e[r](...n)},c_=(e,n,r,s=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:s,value:r})},d_=e=>{const n=parseFloat(e);return isNaN(n)?e:n},VE=e=>{const n=Oi(e)?Number(e):NaN;return isNaN(n)?e:n};let $w;const Mg=()=>$w||($w=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bt(e){if(_n(e)){const n={};for(let r=0;r<e.length;r++){const s=e[r],c=Oi(s)?$E(s):Bt(s);if(c)for(const f in c)n[f]=c[f]}return n}else if(Oi(e)||Pi(e))return e}const BE=/;(?![^(]*\))/g,OE=/:([^]+)/,FE=/\/\*[^]*?\*\//g;function $E(e){const n={};return e.replace(FE,"").split(BE).forEach(r=>{if(r){const s=r.split(OE);s.length>1&&(n[s[0].trim()]=s[1].trim())}}),n}function gt(e){let n="";if(Oi(e))n=e;else if(_n(e))for(let r=0;r<e.length;r++){const s=gt(e[r]);s&&(n+=s+" ")}else if(Pi(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}function jE(e){if(!e)return null;let{class:n,style:r}=e;return n&&!Oi(n)&&(e.class=gt(n)),r&&(e.style=Bt(r)),e}const NE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",UE=Pb(NE);function kC(e){return!!e||e===""}const TC=e=>!!(e&&e.__v_isRef===!0),ei=e=>Oi(e)?e:e==null?"":_n(e)||Pi(e)&&(e.toString===SC||!Tn(e.toString))?TC(e)?ei(e.value):JSON.stringify(e,PC,2):String(e),PC=(e,n)=>TC(n)?PC(e,n.value):Td(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[s,c],f)=>(r[Ey(s,f)+" =>"]=c,r),{})}:xC(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>Ey(r))}:Il(n)?Ey(n):Pi(n)&&!_n(n)&&!CC(n)?String(n):n,Ey=(e,n="")=>{var r;return Il(e)?`Symbol(${(r=e.description)!=null?r:n})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jr;class IC{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jr,!n&&Jr&&(this.index=(Jr.scopes||(Jr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=Jr;try{return Jr=this,n()}finally{Jr=r}}}on(){++this._on===1&&(this.prevScope=Jr,Jr=this)}off(){this._on>0&&--this._on===0&&(Jr=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(this.effects.length=0,r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function Md(e){return new IC(e)}function AC(){return Jr}function hr(e,n=!1){Jr&&Jr.cleanups.push(e)}let Ti;const My=new WeakSet;class EC{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jr&&Jr.active&&Jr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,My.has(this)&&(My.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||DC(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jw(this),RC(this);const n=Ti,r=ps;Ti=this,ps=!0;try{return this.fn()}finally{LC(this),Ti=n,ps=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Rb(n);this.deps=this.depsTail=void 0,jw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?My.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){h_(this)&&this.run()}get dirty(){return h_(this)}}let MC=0,Cf,kf;function DC(e,n=!1){if(e.flags|=8,n){e.next=kf,kf=e;return}e.next=Cf,Cf=e}function Mb(){MC++}function Db(){if(--MC>0)return;if(kf){let n=kf;for(kf=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let e;for(;Cf;){let n=Cf;for(Cf=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(s){e||(e=s)}n=r}}if(e)throw e}function RC(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function LC(e){let n,r=e.depsTail,s=r;for(;s;){const c=s.prevDep;s.version===-1?(s===r&&(r=c),Rb(s),GE(s)):n=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=c}e.deps=n,e.depsTail=r}function h_(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(zC(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function zC(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Vf)||(e.globalVersion=Vf,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!h_(e))))return;e.flags|=2;const n=e.dep,r=Ti,s=ps;Ti=e,ps=!0;try{RC(e);const c=e.fn(e._value);(n.version===0||Sl(c,e._value))&&(e.flags|=128,e._value=c,n.version++)}catch(c){throw n.version++,c}finally{Ti=r,ps=s,LC(e),e.flags&=-3}}function Rb(e,n=!1){const{dep:r,prevSub:s,nextSub:c}=e;if(s&&(s.nextSub=c,e.prevSub=void 0),c&&(c.prevSub=s,e.nextSub=void 0),r.subs===e&&(r.subs=s,!s&&r.computed)){r.computed.flags&=-5;for(let f=r.computed.deps;f;f=f.nextDep)Rb(f,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function GE(e){const{prevDep:n,nextDep:r}=e;n&&(n.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=n,e.nextDep=void 0)}let ps=!0;const VC=[];function xo(){VC.push(ps),ps=!1}function wo(){const e=VC.pop();ps=e===void 0?!0:e}function jw(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const r=Ti;Ti=void 0;try{n()}finally{Ti=r}}}let Vf=0;class HE{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Lb{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!Ti||!ps||Ti===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Ti)r=this.activeLink=new HE(Ti,this),Ti.deps?(r.prevDep=Ti.depsTail,Ti.depsTail.nextDep=r,Ti.depsTail=r):Ti.deps=Ti.depsTail=r,BC(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const s=r.nextDep;s.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=s),r.prevDep=Ti.depsTail,r.nextDep=void 0,Ti.depsTail.nextDep=r,Ti.depsTail=r,Ti.deps===r&&(Ti.deps=s)}return r}trigger(n){this.version++,Vf++,this.notify(n)}notify(n){Mb();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Db()}}}function BC(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let s=n.deps;s;s=s.nextDep)BC(s)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const sg=new WeakMap,Bu=Symbol(""),f_=Symbol(""),Bf=Symbol("");function Qr(e,n,r){if(ps&&Ti){let s=sg.get(e);s||sg.set(e,s=new Map);let c=s.get(r);c||(s.set(r,c=new Lb),c.map=s,c.key=r),c.track()}}function _o(e,n,r,s,c,f){const d=sg.get(e);if(!d){Vf++;return}const a=b=>{b&&b.trigger()};if(Mb(),n==="clear")d.forEach(a);else{const b=_n(e),C=b&&Eb(r);if(b&&r==="length"){const w=Number(s);d.forEach((T,A)=>{(A==="length"||A===Bf||!Il(A)&&A>=w)&&a(T)})}else switch((r!==void 0||d.has(void 0))&&a(d.get(r)),C&&a(d.get(Bf)),n){case"add":b?C&&a(d.get("length")):(a(d.get(Bu)),Td(e)&&a(d.get(f_)));break;case"delete":b||(a(d.get(Bu)),Td(e)&&a(d.get(f_)));break;case"set":Td(e)&&a(d.get(Bu));break}}Db()}function qE(e,n){const r=sg.get(e);return r&&r.get(n)}function ad(e){const n=fn(e);return n===e?n:(Qr(n,"iterate",Bf),Xa(e)?n:n.map(Ur))}function Dg(e){return Qr(e=fn(e),"iterate",Bf),e}const WE={__proto__:null,[Symbol.iterator](){return Dy(this,Symbol.iterator,Ur)},concat(...e){return ad(this).concat(...e.map(n=>_n(n)?ad(n):n))},entries(){return Dy(this,"entries",e=>(e[1]=Ur(e[1]),e))},every(e,n){return fo(this,"every",e,n,void 0,arguments)},filter(e,n){return fo(this,"filter",e,n,r=>r.map(Ur),arguments)},find(e,n){return fo(this,"find",e,n,Ur,arguments)},findIndex(e,n){return fo(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return fo(this,"findLast",e,n,Ur,arguments)},findLastIndex(e,n){return fo(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return fo(this,"forEach",e,n,void 0,arguments)},includes(...e){return Ry(this,"includes",e)},indexOf(...e){return Ry(this,"indexOf",e)},join(e){return ad(this).join(e)},lastIndexOf(...e){return Ry(this,"lastIndexOf",e)},map(e,n){return fo(this,"map",e,n,void 0,arguments)},pop(){return ff(this,"pop")},push(...e){return ff(this,"push",e)},reduce(e,...n){return Nw(this,"reduce",e,n)},reduceRight(e,...n){return Nw(this,"reduceRight",e,n)},shift(){return ff(this,"shift")},some(e,n){return fo(this,"some",e,n,void 0,arguments)},splice(...e){return ff(this,"splice",e)},toReversed(){return ad(this).toReversed()},toSorted(e){return ad(this).toSorted(e)},toSpliced(...e){return ad(this).toSpliced(...e)},unshift(...e){return ff(this,"unshift",e)},values(){return Dy(this,"values",Ur)}};function Dy(e,n,r){const s=Dg(e),c=s[n]();return s!==e&&!Xa(e)&&(c._next=c.next,c.next=()=>{const f=c._next();return f.value&&(f.value=r(f.value)),f}),c}const ZE=Array.prototype;function fo(e,n,r,s,c,f){const d=Dg(e),a=d!==e&&!Xa(e),b=d[n];if(b!==ZE[n]){const T=b.apply(e,f);return a?Ur(T):T}let C=r;d!==e&&(a?C=function(T,A){return r.call(this,Ur(T),A,e)}:r.length>2&&(C=function(T,A){return r.call(this,T,A,e)}));const w=b.call(d,C,s);return a&&c?c(w):w}function Nw(e,n,r,s){const c=Dg(e);let f=r;return c!==e&&(Xa(e)?r.length>3&&(f=function(d,a,b){return r.call(this,d,a,b,e)}):f=function(d,a,b){return r.call(this,d,Ur(a),b,e)}),c[n](f,...s)}function Ry(e,n,r){const s=fn(e);Qr(s,"iterate",Bf);const c=s[n](...r);return(c===-1||c===!1)&&Bb(r[0])?(r[0]=fn(r[0]),s[n](...r)):c}function ff(e,n,r=[]){xo(),Mb();const s=fn(e)[n].apply(e,r);return Db(),wo(),s}const KE=Pb("__proto__,__v_isRef,__isVue"),OC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Il));function YE(e){Il(e)||(e=String(e));const n=fn(this);return Qr(n,"has",e),n.hasOwnProperty(e)}class FC{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,s){if(r==="__v_skip")return n.__v_skip;const c=this._isReadonly,f=this._isShallow;if(r==="__v_isReactive")return!c;if(r==="__v_isReadonly")return c;if(r==="__v_isShallow")return f;if(r==="__v_raw")return s===(c?f?sM:UC:f?NC:jC).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(s)?n:void 0;const d=_n(n);if(!c){let b;if(d&&(b=WE[r]))return b;if(r==="hasOwnProperty")return YE}const a=Reflect.get(n,r,er(n)?n:s);return(Il(r)?OC.has(r):KE(r))||(c||Qr(n,"get",r),f)?a:er(a)?d&&Eb(r)?a:a.value:Pi(a)?c?Ud(a):wr(a):a}}class $C extends FC{constructor(n=!1){super(!1,n)}set(n,r,s,c){let f=n[r];if(!this._isShallow){const b=Cl(f);if(!Xa(s)&&!Cl(s)&&(f=fn(f),s=fn(s)),!_n(n)&&er(f)&&!er(s))return b?!1:(f.value=s,!0)}const d=_n(n)&&Eb(r)?Number(r)<n.length:li(n,r),a=Reflect.set(n,r,s,er(n)?n:c);return n===fn(c)&&(d?Sl(s,f)&&_o(n,"set",r,s):_o(n,"add",r,s)),a}deleteProperty(n,r){const s=li(n,r);n[r];const c=Reflect.deleteProperty(n,r);return c&&s&&_o(n,"delete",r,void 0),c}has(n,r){const s=Reflect.has(n,r);return(!Il(r)||!OC.has(r))&&Qr(n,"has",r),s}ownKeys(n){return Qr(n,"iterate",_n(n)?"length":Bu),Reflect.ownKeys(n)}}class XE extends FC{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const JE=new $C,QE=new XE,eM=new $C(!0);const m_=e=>e,Vp=e=>Reflect.getPrototypeOf(e);function tM(e,n,r){return function(...s){const c=this.__v_raw,f=fn(c),d=Td(f),a=e==="entries"||e===Symbol.iterator&&d,b=e==="keys"&&d,C=c[e](...s),w=r?m_:n?og:Ur;return!n&&Qr(f,"iterate",b?f_:Bu),{next(){const{value:T,done:A}=C.next();return A?{value:T,done:A}:{value:a?[w(T[0]),w(T[1])]:w(T),done:A}},[Symbol.iterator](){return this}}}}function Bp(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function nM(e,n){const r={get(c){const f=this.__v_raw,d=fn(f),a=fn(c);e||(Sl(c,a)&&Qr(d,"get",c),Qr(d,"get",a));const{has:b}=Vp(d),C=n?m_:e?og:Ur;if(b.call(d,c))return C(f.get(c));if(b.call(d,a))return C(f.get(a));f!==d&&f.get(c)},get size(){const c=this.__v_raw;return!e&&Qr(fn(c),"iterate",Bu),Reflect.get(c,"size",c)},has(c){const f=this.__v_raw,d=fn(f),a=fn(c);return e||(Sl(c,a)&&Qr(d,"has",c),Qr(d,"has",a)),c===a?f.has(c):f.has(c)||f.has(a)},forEach(c,f){const d=this,a=d.__v_raw,b=fn(a),C=n?m_:e?og:Ur;return!e&&Qr(b,"iterate",Bu),a.forEach((w,T)=>c.call(f,C(w),C(T),d))}};return Cr(r,e?{add:Bp("add"),set:Bp("set"),delete:Bp("delete"),clear:Bp("clear")}:{add(c){!n&&!Xa(c)&&!Cl(c)&&(c=fn(c));const f=fn(this);return Vp(f).has.call(f,c)||(f.add(c),_o(f,"add",c,c)),this},set(c,f){!n&&!Xa(f)&&!Cl(f)&&(f=fn(f));const d=fn(this),{has:a,get:b}=Vp(d);let C=a.call(d,c);C||(c=fn(c),C=a.call(d,c));const w=b.call(d,c);return d.set(c,f),C?Sl(f,w)&&_o(d,"set",c,f):_o(d,"add",c,f),this},delete(c){const f=fn(this),{has:d,get:a}=Vp(f);let b=d.call(f,c);b||(c=fn(c),b=d.call(f,c)),a&&a.call(f,c);const C=f.delete(c);return b&&_o(f,"delete",c,void 0),C},clear(){const c=fn(this),f=c.size!==0,d=c.clear();return f&&_o(c,"clear",void 0,void 0),d}}),["keys","values","entries",Symbol.iterator].forEach(c=>{r[c]=tM(c,e,n)}),r}function zb(e,n){const r=nM(e,n);return(s,c,f)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?s:Reflect.get(li(r,c)&&c in s?r:s,c,f)}const iM={get:zb(!1,!1)},rM={get:zb(!1,!0)},aM={get:zb(!0,!1)};const jC=new WeakMap,NC=new WeakMap,UC=new WeakMap,sM=new WeakMap;function oM(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lM(e){return e.__v_skip||!Object.isExtensible(e)?0:oM(RE(e))}function wr(e){return Cl(e)?e:Vb(e,!1,JE,iM,jC)}function GC(e){return Vb(e,!1,eM,rM,NC)}function Ud(e){return Vb(e,!0,QE,aM,UC)}function Vb(e,n,r,s,c){if(!Pi(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const f=lM(e);if(f===0)return e;const d=c.get(e);if(d)return d;const a=new Proxy(e,f===2?s:r);return c.set(e,a),a}function Pd(e){return Cl(e)?Pd(e.__v_raw):!!(e&&e.__v_isReactive)}function Cl(e){return!!(e&&e.__v_isReadonly)}function Xa(e){return!!(e&&e.__v_isShallow)}function Bb(e){return e?!!e.__v_raw:!1}function fn(e){const n=e&&e.__v_raw;return n?fn(n):e}function HC(e){return!li(e,"__v_skip")&&Object.isExtensible(e)&&c_(e,"__v_skip",!0),e}const Ur=e=>Pi(e)?wr(e):e,og=e=>Pi(e)?Ud(e):e;function er(e){return e?e.__v_isRef===!0:!1}function et(e){return qC(e,!1)}function Dt(e){return qC(e,!0)}function qC(e,n){return er(e)?e:new uM(e,n)}class uM{constructor(n,r){this.dep=new Lb,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:fn(n),this._value=r?n:Ur(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,s=this.__v_isShallow||Xa(n)||Cl(n);n=s?n:fn(n),Sl(n,r)&&(this._rawValue=n,this._value=s?n:Ur(n),this.dep.trigger())}}function Sr(e){return er(e)?e.value:e}function Us(e){return Tn(e)?e():Sr(e)}const cM={get:(e,n,r)=>n==="__v_raw"?e:Sr(Reflect.get(e,n,r)),set:(e,n,r,s)=>{const c=e[n];return er(c)&&!er(r)?(c.value=r,!0):Reflect.set(e,n,r,s)}};function WC(e){return Pd(e)?e:new Proxy(e,cM)}function Gd(e){const n=_n(e)?new Array(e.length):{};for(const r in e)n[r]=ZC(e,r);return n}class dM{constructor(n,r,s){this._object=n,this._key=r,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return qE(fn(this._object),this._key)}}class hM{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Me(e,n,r){return er(e)?e:Tn(e)?new hM(e):Pi(e)&&arguments.length>1?ZC(e,n,r):et(e)}function ZC(e,n,r){const s=e[n];return er(s)?s:new dM(e,n,r)}class fM{constructor(n,r,s){this.fn=n,this.setter=r,this._value=void 0,this.dep=new Lb(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Vf-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ti!==this)return DC(this,!0),!0}get value(){const n=this.dep.track();return zC(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function mM(e,n,r=!1){let s,c;return Tn(e)?s=e:(s=e.get,c=e.set),new fM(s,c,r)}const Op={},lg=new WeakMap;let Au;function pM(e,n=!1,r=Au){if(r){let s=lg.get(r);s||lg.set(r,s=[]),s.push(e)}}function gM(e,n,r=pi){const{immediate:s,deep:c,once:f,scheduler:d,augmentJob:a,call:b}=r,C=Y=>c?Y:Xa(Y)||c===!1||c===0?bo(Y,1):bo(Y);let w,T,A,P,R=!1,O=!1;if(er(e)?(T=()=>e.value,R=Xa(e)):Pd(e)?(T=()=>C(e),R=!0):_n(e)?(O=!0,R=e.some(Y=>Pd(Y)||Xa(Y)),T=()=>e.map(Y=>{if(er(Y))return Y.value;if(Pd(Y))return C(Y);if(Tn(Y))return b?b(Y,2):Y()})):Tn(e)?n?T=b?()=>b(e,2):e:T=()=>{if(A){xo();try{A()}finally{wo()}}const Y=Au;Au=w;try{return b?b(e,3,[P]):e(P)}finally{Au=Y}}:T=js,n&&c){const Y=T,te=c===!0?1/0:c;T=()=>bo(Y(),te)}const z=AC(),$=()=>{w.stop(),z&&z.active&&Ab(z.effects,w)};if(f&&n){const Y=n;n=(...te)=>{Y(...te),$()}}let F=O?new Array(e.length).fill(Op):Op;const H=Y=>{if(!(!(w.flags&1)||!w.dirty&&!Y))if(n){const te=w.run();if(c||R||(O?te.some((Q,ce)=>Sl(Q,F[ce])):Sl(te,F))){A&&A();const Q=Au;Au=w;try{const ce=[te,F===Op?void 0:O&&F[0]===Op?[]:F,P];F=te,b?b(n,3,ce):n(...ce)}finally{Au=Q}}}else w.run()};return a&&a(H),w=new EC(T),w.scheduler=d?()=>d(H,!1):H,P=Y=>pM(Y,!1,w),A=w.onStop=()=>{const Y=lg.get(w);if(Y){if(b)b(Y,4);else for(const te of Y)te();lg.delete(w)}},n?s?H(!0):F=w.run():d?d(H.bind(null,!0),!0):w.run(),$.pause=w.pause.bind(w),$.resume=w.resume.bind(w),$.stop=$,$}function bo(e,n=1/0,r){if(n<=0||!Pi(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),n--,er(e))bo(e.value,n,r);else if(_n(e))for(let s=0;s<e.length;s++)bo(e[s],n,r);else if(xC(e)||Td(e))e.forEach(s=>{bo(s,n,r)});else if(CC(e)){for(const s in e)bo(e[s],n,r);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&bo(e[s],n,r)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function om(e,n,r,s){try{return s?e(...s):e()}catch(c){Rg(c,n,r)}}function gs(e,n,r,s){if(Tn(e)){const c=om(e,n,r,s);return c&&wC(c)&&c.catch(f=>{Rg(f,n,r)}),c}if(_n(e)){const c=[];for(let f=0;f<e.length;f++)c.push(gs(e[f],n,r,s));return c}}function Rg(e,n,r,s=!0){const c=n?n.vnode:null,{errorHandler:f,throwUnhandledErrorInProduction:d}=n&&n.appContext.config||pi;if(n){let a=n.parent;const b=n.proxy,C=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const w=a.ec;if(w){for(let T=0;T<w.length;T++)if(w[T](e,b,C)===!1)return}a=a.parent}if(f){xo(),om(f,null,10,[e,b,C]),wo();return}}vM(e,r,c,s,d)}function vM(e,n,r,s=!0,c=!1){if(c)throw e;console.error(e)}const pa=[];let Fs=-1;const Id=[];let pl=null,_d=0;const KC=Promise.resolve();let ug=null;function Dn(e){const n=ug||KC;return e?n.then(this?e.bind(this):e):n}function yM(e){let n=Fs+1,r=pa.length;for(;n<r;){const s=n+r>>>1,c=pa[s],f=Of(c);f<e||f===e&&c.flags&2?n=s+1:r=s}return n}function Ob(e){if(!(e.flags&1)){const n=Of(e),r=pa[pa.length-1];!r||!(e.flags&2)&&n>=Of(r)?pa.push(e):pa.splice(yM(n),0,e),e.flags|=1,YC()}}function YC(){ug||(ug=KC.then(JC))}function _M(e){_n(e)?Id.push(...e):pl&&e.id===-1?pl.splice(_d+1,0,e):e.flags&1||(Id.push(e),e.flags|=1),YC()}function Uw(e,n,r=Fs+1){for(;r<pa.length;r++){const s=pa[r];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;pa.splice(r,1),r--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function XC(e){if(Id.length){const n=[...new Set(Id)].sort((r,s)=>Of(r)-Of(s));if(Id.length=0,pl){pl.push(...n);return}for(pl=n,_d=0;_d<pl.length;_d++){const r=pl[_d];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}pl=null,_d=0}}const Of=e=>e.id==null?e.flags&2?-1:1/0:e.id;function JC(e){try{for(Fs=0;Fs<pa.length;Fs++){const n=pa[Fs];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),om(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Fs<pa.length;Fs++){const n=pa[Fs];n&&(n.flags&=-2)}Fs=-1,pa.length=0,XC(),ug=null,(pa.length||Id.length)&&JC()}}let ka=null,QC=null;function cg(e){const n=ka;return ka=e,QC=e&&e.type.__scopeId||null,n}function kt(e,n=ka,r){if(!n||e._n)return e;const s=(...c)=>{s._d&&i1(-1);const f=cg(n);let d;try{d=e(...c)}finally{cg(f),s._d&&i1(1)}return d};return s._n=!0,s._c=!0,s._d=!0,s}function Di(e,n){if(ka===null)return e;const r=Og(ka),s=e.dirs||(e.dirs=[]);for(let c=0;c<n.length;c++){let[f,d,a,b=pi]=n[c];f&&(Tn(f)&&(f={mounted:f,updated:f}),f.deep&&bo(d),s.push({dir:f,instance:r,value:d,oldValue:void 0,arg:a,modifiers:b}))}return e}function Su(e,n,r,s){const c=e.dirs,f=n&&n.dirs;for(let d=0;d<c.length;d++){const a=c[d];f&&(a.oldValue=f[d].value);let b=a.dir[s];b&&(xo(),gs(b,r,8,[e.el,a,e,n]),wo())}}const ek=Symbol("_vte"),tk=e=>e.__isTeleport,Tf=e=>e&&(e.disabled||e.disabled===""),Gw=e=>e&&(e.defer||e.defer===""),Hw=e=>typeof SVGElement<"u"&&e instanceof SVGElement,qw=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,p_=(e,n)=>{const r=e&&e.to;return Oi(r)?n?n(r):null:r},nk={name:"Teleport",__isTeleport:!0,process(e,n,r,s,c,f,d,a,b,C){const{mc:w,pc:T,pbc:A,o:{insert:P,querySelector:R,createText:O,createComment:z}}=C,$=Tf(n.props);let{shapeFlag:F,children:H,dynamicChildren:Y}=n;if(e==null){const te=n.el=O(""),Q=n.anchor=O("");P(te,r,s),P(Q,r,s);const ce=(he,pe)=>{F&16&&(c&&c.isCE&&(c.ce._teleportTarget=he),w(H,he,pe,c,f,d,a,b))},oe=()=>{const he=n.target=p_(n.props,R),pe=ik(he,n,O,P);he&&(d!=="svg"&&Hw(he)?d="svg":d!=="mathml"&&qw(he)&&(d="mathml"),$||(ce(he,pe),Qp(n,!1)))};$&&(ce(r,Q),Qp(n,!0)),Gw(n.props)?(n.el.__isMounted=!1,ma(()=>{oe(),delete n.el.__isMounted},f)):oe()}else{if(Gw(n.props)&&e.el.__isMounted===!1){ma(()=>{nk.process(e,n,r,s,c,f,d,a,b,C)},f);return}n.el=e.el,n.targetStart=e.targetStart;const te=n.anchor=e.anchor,Q=n.target=e.target,ce=n.targetAnchor=e.targetAnchor,oe=Tf(e.props),he=oe?r:Q,pe=oe?te:ce;if(d==="svg"||Hw(Q)?d="svg":(d==="mathml"||qw(Q))&&(d="mathml"),Y?(A(e.dynamicChildren,Y,he,c,f,d,a),qb(e,n,!0)):b||T(e,n,he,pe,c,f,d,a,!1),$)oe?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):Fp(n,r,te,C,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const _e=n.target=p_(n.props,R);_e&&Fp(n,_e,null,C,0)}else oe&&Fp(n,Q,ce,C,1);Qp(n,$)}},remove(e,n,r,{um:s,o:{remove:c}},f){const{shapeFlag:d,children:a,anchor:b,targetStart:C,targetAnchor:w,target:T,props:A}=e;if(T&&(c(C),c(w)),f&&c(b),d&16){const P=f||!Tf(A);for(let R=0;R<a.length;R++){const O=a[R];s(O,n,r,P,!!O.dynamicChildren)}}},move:Fp,hydrate:bM};function Fp(e,n,r,{o:{insert:s},m:c},f=2){f===0&&s(e.targetAnchor,n,r);const{el:d,anchor:a,shapeFlag:b,children:C,props:w}=e,T=f===2;if(T&&s(d,n,r),(!T||Tf(w))&&b&16)for(let A=0;A<C.length;A++)c(C[A],n,r,2);T&&s(a,n,r)}function bM(e,n,r,s,c,f,{o:{nextSibling:d,parentNode:a,querySelector:b,insert:C,createText:w}},T){const A=n.target=p_(n.props,b);if(A){const P=Tf(n.props),R=A._lpa||A.firstChild;if(n.shapeFlag&16)if(P)n.anchor=T(d(e),n,a(e),r,s,c,f),n.targetStart=R,n.targetAnchor=R&&d(R);else{n.anchor=d(e);let O=R;for(;O;){if(O&&O.nodeType===8){if(O.data==="teleport start anchor")n.targetStart=O;else if(O.data==="teleport anchor"){n.targetAnchor=O,A._lpa=n.targetAnchor&&d(n.targetAnchor);break}}O=d(O)}n.targetAnchor||ik(A,n,w,C),T(R&&d(R),n,A,r,s,c,f)}Qp(n,P)}return n.anchor&&d(n.anchor)}const xM=nk;function Qp(e,n){const r=e.ctx;if(r&&r.ut){let s,c;for(n?(s=e.el,c=e.anchor):(s=e.targetStart,c=e.targetAnchor);s&&s!==c;)s.nodeType===1&&s.setAttribute("data-v-owner",r.uid),s=s.nextSibling;r.ut()}}function ik(e,n,r,s){const c=n.targetStart=r(""),f=n.targetAnchor=r("");return c[ek]=f,e&&(s(c,e),s(f,e)),f}const gl=Symbol("_leaveCb"),$p=Symbol("_enterCb");function rk(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zi(()=>{e.isMounted=!0}),Vr(()=>{e.isUnmounting=!0}),e}const Ya=[Function,Array],ak={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ya,onEnter:Ya,onAfterEnter:Ya,onEnterCancelled:Ya,onBeforeLeave:Ya,onLeave:Ya,onAfterLeave:Ya,onLeaveCancelled:Ya,onBeforeAppear:Ya,onAppear:Ya,onAfterAppear:Ya,onAppearCancelled:Ya},sk=e=>{const n=e.subTree;return n.component?sk(n.component):n},wM={name:"BaseTransition",props:ak,setup(e,{slots:n}){const r=Bg(),s=rk();return()=>{const c=n.default&&Fb(n.default(),!0);if(!c||!c.length)return;const f=ok(c),d=fn(e),{mode:a}=d;if(s.isLeaving)return Ly(f);const b=Ww(f);if(!b)return Ly(f);let C=Ff(b,d,s,r,T=>C=T);b.type!==ea&&ju(b,C);let w=r.subTree&&Ww(r.subTree);if(w&&w.type!==ea&&!Du(b,w)&&sk(r).type!==ea){let T=Ff(w,d,s,r);if(ju(w,T),a==="out-in"&&b.type!==ea)return s.isLeaving=!0,T.afterLeave=()=>{s.isLeaving=!1,r.job.flags&8||r.update(),delete T.afterLeave,w=void 0},Ly(f);a==="in-out"&&b.type!==ea?T.delayLeave=(A,P,R)=>{const O=lk(s,w);O[String(w.key)]=w,A[gl]=()=>{P(),A[gl]=void 0,delete C.delayedLeave,w=void 0},C.delayedLeave=()=>{R(),delete C.delayedLeave,w=void 0}}:w=void 0}else w&&(w=void 0);return f}}};function ok(e){let n=e[0];if(e.length>1){for(const r of e)if(r.type!==ea){n=r;break}}return n}const SM=wM;function lk(e,n){const{leavingVNodes:r}=e;let s=r.get(n.type);return s||(s=Object.create(null),r.set(n.type,s)),s}function Ff(e,n,r,s,c){const{appear:f,mode:d,persisted:a=!1,onBeforeEnter:b,onEnter:C,onAfterEnter:w,onEnterCancelled:T,onBeforeLeave:A,onLeave:P,onAfterLeave:R,onLeaveCancelled:O,onBeforeAppear:z,onAppear:$,onAfterAppear:F,onAppearCancelled:H}=n,Y=String(e.key),te=lk(r,e),Q=(he,pe)=>{he&&gs(he,s,9,pe)},ce=(he,pe)=>{const _e=pe[1];Q(he,pe),_n(he)?he.every(ae=>ae.length<=1)&&_e():he.length<=1&&_e()},oe={mode:d,persisted:a,beforeEnter(he){let pe=b;if(!r.isMounted)if(f)pe=z||b;else return;he[gl]&&he[gl](!0);const _e=te[Y];_e&&Du(e,_e)&&_e.el[gl]&&_e.el[gl](),Q(pe,[he])},enter(he){let pe=C,_e=w,ae=T;if(!r.isMounted)if(f)pe=$||C,_e=F||w,ae=H||T;else return;let be=!1;const je=he[$p]=Ve=>{be||(be=!0,Ve?Q(ae,[he]):Q(_e,[he]),oe.delayedLeave&&oe.delayedLeave(),he[$p]=void 0)};pe?ce(pe,[he,je]):je()},leave(he,pe){const _e=String(e.key);if(he[$p]&&he[$p](!0),r.isUnmounting)return pe();Q(A,[he]);let ae=!1;const be=he[gl]=je=>{ae||(ae=!0,pe(),je?Q(O,[he]):Q(R,[he]),he[gl]=void 0,te[_e]===e&&delete te[_e])};te[_e]=e,P?ce(P,[he,be]):be()},clone(he){const pe=Ff(he,n,r,s,c);return c&&c(pe),pe}};return oe}function Ly(e){if(Lg(e))return e=So(e),e.children=null,e}function Ww(e){if(!Lg(e))return tk(e.type)&&e.children?ok(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:n,children:r}=e;if(r){if(n&16)return r[0];if(n&32&&Tn(r.default))return r.default()}}function ju(e,n){e.shapeFlag&6&&e.component?(e.transition=n,ju(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Fb(e,n=!1,r){let s=[],c=0;for(let f=0;f<e.length;f++){let d=e[f];const a=r==null?d.key:String(r)+String(d.key!=null?d.key:f);d.type===Wt?(d.patchFlag&128&&c++,s=s.concat(Fb(d.children,n,a))):(n||d.type!==ea)&&s.push(a!=null?So(d,{key:a}):d)}if(c>1)for(let f=0;f<s.length;f++)s[f].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function $b(e,n){return Tn(e)?Cr({name:e.name},n,{setup:e}):e}function va(){const e=Bg();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function uk(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Pf(e,n,r,s,c=!1){if(_n(e)){e.forEach((R,O)=>Pf(R,n&&(_n(n)?n[O]:n),r,s,c));return}if(If(s)&&!c){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Pf(e,n,r,s.component.subTree);return}const f=s.shapeFlag&4?Og(s.component):s.el,d=c?null:f,{i:a,r:b}=e,C=n&&n.r,w=a.refs===pi?a.refs={}:a.refs,T=a.setupState,A=fn(T),P=T===pi?()=>!1:R=>li(A,R);if(C!=null&&C!==b&&(Oi(C)?(w[C]=null,P(C)&&(T[C]=null)):er(C)&&(C.value=null)),Tn(b))om(b,a,12,[d,w]);else{const R=Oi(b),O=er(b);if(R||O){const z=()=>{if(e.f){const $=R?P(b)?T[b]:w[b]:b.value;c?_n($)&&Ab($,f):_n($)?$.includes(f)||$.push(f):R?(w[b]=[f],P(b)&&(T[b]=w[b])):(b.value=[f],e.k&&(w[e.k]=b.value))}else R?(w[b]=d,P(b)&&(T[b]=d)):O&&(b.value=d,e.k&&(w[e.k]=d))};d?(z.id=-1,ma(z,r)):z()}}}Mg().requestIdleCallback;Mg().cancelIdleCallback;const If=e=>!!e.type.__asyncLoader,Lg=e=>e.type.__isKeepAlive;function ck(e,n){dk(e,"a",n)}function jb(e,n){dk(e,"da",n)}function dk(e,n,r=Gr){const s=e.__wdc||(e.__wdc=()=>{let c=r;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(zg(n,s,r),r){let c=r.parent;for(;c&&c.parent;)Lg(c.parent.vnode)&&CM(s,n,r,c),c=c.parent}}function CM(e,n,r,s){const c=zg(n,e,s,!0);lm(()=>{Ab(s[n],c)},r)}function zg(e,n,r=Gr,s=!1){if(r){const c=r[e]||(r[e]=[]),f=n.__weh||(n.__weh=(...d)=>{xo();const a=cm(r),b=gs(n,r,e,d);return a(),wo(),b});return s?c.unshift(f):c.push(f),f}}const Po=e=>(n,r=Gr)=>{(!Nf||e==="sp")&&zg(e,(...s)=>n(...s),r)},Hd=Po("bm"),zi=Po("m"),hk=Po("bu"),Nb=Po("u"),Vr=Po("bum"),lm=Po("um"),kM=Po("sp"),TM=Po("rtg"),PM=Po("rtc");function IM(e,n=Gr){zg("ec",e,n)}const fk="components";function Rt(e,n){return mk(fk,e,!0,n)||e}const AM=Symbol.for("v-ndc");function EM(e){return Oi(e)&&mk(fk,e,!1)||e}function mk(e,n,r=!0,s=!1){const c=ka||Gr;if(c){const f=c.type;{const a=mD(f,!1);if(a&&(a===n||a===ga(n)||a===Ws(ga(n))))return f}const d=Zw(c[e]||f[e],n)||Zw(c.appContext[e],n);return!d&&s?f:d}}function Zw(e,n){return e&&(e[n]||e[ga(n)]||e[Ws(ga(n))])}function Ub(e,n,r,s){let c;const f=r,d=_n(e);if(d||Oi(e)){const a=d&&Pd(e);let b=!1,C=!1;a&&(b=!Xa(e),C=Cl(e),e=Dg(e)),c=new Array(e.length);for(let w=0,T=e.length;w<T;w++)c[w]=n(b?C?og(Ur(e[w])):Ur(e[w]):e[w],w,void 0,f)}else if(typeof e=="number"){c=new Array(e);for(let a=0;a<e;a++)c[a]=n(a+1,a,void 0,f)}else if(Pi(e))if(e[Symbol.iterator])c=Array.from(e,(a,b)=>n(a,b,void 0,f));else{const a=Object.keys(e);c=new Array(a.length);for(let b=0,C=a.length;b<C;b++){const w=a[b];c[b]=n(e[w],w,b,f)}}else c=[];return c}const g_=e=>e?Rk(e)?Og(e):g_(e.parent):null,Af=Cr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>g_(e.parent),$root:e=>g_(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>gk(e),$forceUpdate:e=>e.f||(e.f=()=>{Ob(e.update)}),$nextTick:e=>e.n||(e.n=Dn.bind(e.proxy)),$watch:e=>XM.bind(e)}),zy=(e,n)=>e!==pi&&!e.__isScriptSetup&&li(e,n),MM={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:s,data:c,props:f,accessCache:d,type:a,appContext:b}=e;let C;if(n[0]!=="$"){const P=d[n];if(P!==void 0)switch(P){case 1:return s[n];case 2:return c[n];case 4:return r[n];case 3:return f[n]}else{if(zy(s,n))return d[n]=1,s[n];if(c!==pi&&li(c,n))return d[n]=2,c[n];if((C=e.propsOptions[0])&&li(C,n))return d[n]=3,f[n];if(r!==pi&&li(r,n))return d[n]=4,r[n];v_&&(d[n]=0)}}const w=Af[n];let T,A;if(w)return n==="$attrs"&&Qr(e.attrs,"get",""),w(e);if((T=a.__cssModules)&&(T=T[n]))return T;if(r!==pi&&li(r,n))return d[n]=4,r[n];if(A=b.config.globalProperties,li(A,n))return A[n]},set({_:e},n,r){const{data:s,setupState:c,ctx:f}=e;return zy(c,n)?(c[n]=r,!0):s!==pi&&li(s,n)?(s[n]=r,!0):li(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(f[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:s,appContext:c,propsOptions:f}},d){let a;return!!r[d]||e!==pi&&li(e,d)||zy(n,d)||(a=f[0])&&li(a,d)||li(s,d)||li(Af,d)||li(c.config.globalProperties,d)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:li(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};function Kw(e){return _n(e)?e.reduce((n,r)=>(n[r]=null,n),{}):e}let v_=!0;function DM(e){const n=gk(e),r=e.proxy,s=e.ctx;v_=!1,n.beforeCreate&&Yw(n.beforeCreate,e,"bc");const{data:c,computed:f,methods:d,watch:a,provide:b,inject:C,created:w,beforeMount:T,mounted:A,beforeUpdate:P,updated:R,activated:O,deactivated:z,beforeDestroy:$,beforeUnmount:F,destroyed:H,unmounted:Y,render:te,renderTracked:Q,renderTriggered:ce,errorCaptured:oe,serverPrefetch:he,expose:pe,inheritAttrs:_e,components:ae,directives:be,filters:je}=n;if(C&&RM(C,s,null),d)for(const Ke in d){const mt=d[Ke];Tn(mt)&&(s[Ke]=mt.bind(r))}if(c){const Ke=c.call(r,r);Pi(Ke)&&(e.data=wr(Ke))}if(v_=!0,f)for(const Ke in f){const mt=f[Ke],ft=Tn(mt)?mt.bind(r,r):Tn(mt.get)?mt.get.bind(r,r):js,ze=!Tn(mt)&&Tn(mt.set)?mt.set.bind(r):js,Se=ne({get:ft,set:ze});Object.defineProperty(s,Ke,{enumerable:!0,configurable:!0,get:()=>Se.value,set:Ie=>Se.value=Ie})}if(a)for(const Ke in a)pk(a[Ke],s,r,Ke);if(b){const Ke=Tn(b)?b.call(r):b;Reflect.ownKeys(Ke).forEach(mt=>{ri(mt,Ke[mt])})}w&&Yw(w,e,"c");function Fe(Ke,mt){_n(mt)?mt.forEach(ft=>Ke(ft.bind(r))):mt&&Ke(mt.bind(r))}if(Fe(Hd,T),Fe(zi,A),Fe(hk,P),Fe(Nb,R),Fe(ck,O),Fe(jb,z),Fe(IM,oe),Fe(PM,Q),Fe(TM,ce),Fe(Vr,F),Fe(lm,Y),Fe(kM,he),_n(pe))if(pe.length){const Ke=e.exposed||(e.exposed={});pe.forEach(mt=>{Object.defineProperty(Ke,mt,{get:()=>r[mt],set:ft=>r[mt]=ft})})}else e.exposed||(e.exposed={});te&&e.render===js&&(e.render=te),_e!=null&&(e.inheritAttrs=_e),ae&&(e.components=ae),be&&(e.directives=be),he&&uk(e)}function RM(e,n,r=js){_n(e)&&(e=y_(e));for(const s in e){const c=e[s];let f;Pi(c)?"default"in c?f=bn(c.from||s,c.default,!0):f=bn(c.from||s):f=bn(c),er(f)?Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get:()=>f.value,set:d=>f.value=d}):n[s]=f}}function Yw(e,n,r){gs(_n(e)?e.map(s=>s.bind(n.proxy)):e.bind(n.proxy),n,r)}function pk(e,n,r,s){let c=s.includes(".")?Pk(r,s):()=>r[s];if(Oi(e)){const f=n[e];Tn(f)&&Ot(c,f)}else if(Tn(e))Ot(c,e.bind(r));else if(Pi(e))if(_n(e))e.forEach(f=>pk(f,n,r,s));else{const f=Tn(e.handler)?e.handler.bind(r):n[e.handler];Tn(f)&&Ot(c,f,e)}}function gk(e){const n=e.type,{mixins:r,extends:s}=n,{mixins:c,optionsCache:f,config:{optionMergeStrategies:d}}=e.appContext,a=f.get(n);let b;return a?b=a:!c.length&&!r&&!s?b=n:(b={},c.length&&c.forEach(C=>dg(b,C,d,!0)),dg(b,n,d)),Pi(n)&&f.set(n,b),b}function dg(e,n,r,s=!1){const{mixins:c,extends:f}=n;f&&dg(e,f,r,!0),c&&c.forEach(d=>dg(e,d,r,!0));for(const d in n)if(!(s&&d==="expose")){const a=LM[d]||r&&r[d];e[d]=a?a(e[d],n[d]):n[d]}return e}const LM={data:Xw,props:Jw,emits:Jw,methods:bf,computed:bf,beforeCreate:ha,created:ha,beforeMount:ha,mounted:ha,beforeUpdate:ha,updated:ha,beforeDestroy:ha,beforeUnmount:ha,destroyed:ha,unmounted:ha,activated:ha,deactivated:ha,errorCaptured:ha,serverPrefetch:ha,components:bf,directives:bf,watch:VM,provide:Xw,inject:zM};function Xw(e,n){return n?e?function(){return Cr(Tn(e)?e.call(this,this):e,Tn(n)?n.call(this,this):n)}:n:e}function zM(e,n){return bf(y_(e),y_(n))}function y_(e){if(_n(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function ha(e,n){return e?[...new Set([].concat(e,n))]:n}function bf(e,n){return e?Cr(Object.create(null),e,n):n}function Jw(e,n){return e?_n(e)&&_n(n)?[...new Set([...e,...n])]:Cr(Object.create(null),Kw(e),Kw(n??{})):n}function VM(e,n){if(!e)return n;if(!n)return e;const r=Cr(Object.create(null),e);for(const s in n)r[s]=ha(e[s],n[s]);return r}function vk(){return{app:null,config:{isNativeTag:ME,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BM=0;function OM(e,n){return function(s,c=null){Tn(s)||(s=Cr({},s)),c!=null&&!Pi(c)&&(c=null);const f=vk(),d=new WeakSet,a=[];let b=!1;const C=f.app={_uid:BM++,_component:s,_props:c,_container:null,_context:f,_instance:null,version:gD,get config(){return f.config},set config(w){},use(w,...T){return d.has(w)||(w&&Tn(w.install)?(d.add(w),w.install(C,...T)):Tn(w)&&(d.add(w),w(C,...T))),C},mixin(w){return f.mixins.includes(w)||f.mixins.push(w),C},component(w,T){return T?(f.components[w]=T,C):f.components[w]},directive(w,T){return T?(f.directives[w]=T,C):f.directives[w]},mount(w,T,A){if(!b){const P=C._ceVNode||U(s,c);return P.appContext=f,A===!0?A="svg":A===!1&&(A=void 0),e(P,w,A),b=!0,C._container=w,w.__vue_app__=C,Og(P.component)}},onUnmount(w){a.push(w)},unmount(){b&&(gs(a,C._instance,16),e(null,C._container),delete C._container.__vue_app__)},provide(w,T){return f.provides[w]=T,C},runWithContext(w){const T=Ad;Ad=C;try{return w()}finally{Ad=T}}};return C}}let Ad=null;function ri(e,n){if(Gr){let r=Gr.provides;const s=Gr.parent&&Gr.parent.provides;s===r&&(r=Gr.provides=Object.create(s)),r[e]=n}}function bn(e,n,r=!1){const s=Gr||ka;if(s||Ad){let c=Ad?Ad._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(c&&e in c)return c[e];if(arguments.length>1)return r&&Tn(n)?n.call(s&&s.proxy):n}}const yk={},_k=()=>Object.create(yk),bk=e=>Object.getPrototypeOf(e)===yk;function FM(e,n,r,s=!1){const c={},f=_k();e.propsDefaults=Object.create(null),xk(e,n,c,f);for(const d in e.propsOptions[0])d in c||(c[d]=void 0);r?e.props=s?c:GC(c):e.type.props?e.props=c:e.props=f,e.attrs=f}function $M(e,n,r,s){const{props:c,attrs:f,vnode:{patchFlag:d}}=e,a=fn(c),[b]=e.propsOptions;let C=!1;if((s||d>0)&&!(d&16)){if(d&8){const w=e.vnode.dynamicProps;for(let T=0;T<w.length;T++){let A=w[T];if(Vg(e.emitsOptions,A))continue;const P=n[A];if(b)if(li(f,A))P!==f[A]&&(f[A]=P,C=!0);else{const R=ga(A);c[R]=__(b,a,R,P,e,!1)}else P!==f[A]&&(f[A]=P,C=!0)}}}else{xk(e,n,c,f)&&(C=!0);let w;for(const T in a)(!n||!li(n,T)&&((w=Yu(T))===T||!li(n,w)))&&(b?r&&(r[T]!==void 0||r[w]!==void 0)&&(c[T]=__(b,a,T,void 0,e,!0)):delete c[T]);if(f!==a)for(const T in f)(!n||!li(n,T))&&(delete f[T],C=!0)}C&&_o(e.attrs,"set","")}function xk(e,n,r,s){const[c,f]=e.propsOptions;let d=!1,a;if(n)for(let b in n){if(Sf(b))continue;const C=n[b];let w;c&&li(c,w=ga(b))?!f||!f.includes(w)?r[w]=C:(a||(a={}))[w]=C:Vg(e.emitsOptions,b)||(!(b in s)||C!==s[b])&&(s[b]=C,d=!0)}if(f){const b=fn(r),C=a||pi;for(let w=0;w<f.length;w++){const T=f[w];r[T]=__(c,b,T,C[T],e,!li(C,T))}}return d}function __(e,n,r,s,c,f){const d=e[r];if(d!=null){const a=li(d,"default");if(a&&s===void 0){const b=d.default;if(d.type!==Function&&!d.skipFactory&&Tn(b)){const{propsDefaults:C}=c;if(r in C)s=C[r];else{const w=cm(c);s=C[r]=b.call(null,n),w()}}else s=b;c.ce&&c.ce._setProp(r,s)}d[0]&&(f&&!a?s=!1:d[1]&&(s===""||s===Yu(r))&&(s=!0))}return s}const jM=new WeakMap;function wk(e,n,r=!1){const s=r?jM:n.propsCache,c=s.get(e);if(c)return c;const f=e.props,d={},a=[];let b=!1;if(!Tn(e)){const w=T=>{b=!0;const[A,P]=wk(T,n,!0);Cr(d,A),P&&a.push(...P)};!r&&n.mixins.length&&n.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!f&&!b)return Pi(e)&&s.set(e,kd),kd;if(_n(f))for(let w=0;w<f.length;w++){const T=ga(f[w]);Qw(T)&&(d[T]=pi)}else if(f)for(const w in f){const T=ga(w);if(Qw(T)){const A=f[w],P=d[T]=_n(A)||Tn(A)?{type:A}:Cr({},A),R=P.type;let O=!1,z=!0;if(_n(R))for(let $=0;$<R.length;++$){const F=R[$],H=Tn(F)&&F.name;if(H==="Boolean"){O=!0;break}else H==="String"&&(z=!1)}else O=Tn(R)&&R.name==="Boolean";P[0]=O,P[1]=z,(O||li(P,"default"))&&a.push(T)}}const C=[d,a];return Pi(e)&&s.set(e,C),C}function Qw(e){return e[0]!=="$"&&!Sf(e)}const Gb=e=>e[0]==="_"||e==="$stable",Hb=e=>_n(e)?e.map($s):[$s(e)],NM=(e,n,r)=>{if(n._n)return n;const s=kt((...c)=>Hb(n(...c)),r);return s._c=!1,s},Sk=(e,n,r)=>{const s=e._ctx;for(const c in e){if(Gb(c))continue;const f=e[c];if(Tn(f))n[c]=NM(c,f,s);else if(f!=null){const d=Hb(f);n[c]=()=>d}}},Ck=(e,n)=>{const r=Hb(n);e.slots.default=()=>r},kk=(e,n,r)=>{for(const s in n)(r||!Gb(s))&&(e[s]=n[s])},UM=(e,n,r)=>{const s=e.slots=_k();if(e.vnode.shapeFlag&32){const c=n.__;c&&c_(s,"__",c,!0);const f=n._;f?(kk(s,n,r),r&&c_(s,"_",f,!0)):Sk(n,s)}else n&&Ck(e,n)},GM=(e,n,r)=>{const{vnode:s,slots:c}=e;let f=!0,d=pi;if(s.shapeFlag&32){const a=n._;a?r&&a===1?f=!1:kk(c,n,r):(f=!n.$stable,Sk(n,c)),d=n}else n&&(Ck(e,n),d={default:1});if(f)for(const a in c)!Gb(a)&&d[a]==null&&delete c[a]},ma=rD;function HM(e){return qM(e)}function qM(e,n){const r=Mg();r.__VUE__=!0;const{insert:s,remove:c,patchProp:f,createElement:d,createText:a,createComment:b,setText:C,setElementText:w,parentNode:T,nextSibling:A,setScopeId:P=js,insertStaticContent:R}=e,O=(re,ue,Le,Ze=null,ut=null,Je=null,Pt=void 0,ct=null,Lt=!!ue.dynamicChildren)=>{if(re===ue)return;re&&!Du(re,ue)&&(Ze=Re(re),Ie(re,ut,Je,!0),re=null),ue.patchFlag===-2&&(Lt=!1,ue.dynamicChildren=null);const{type:It,ref:sn,shapeFlag:Ht}=ue;switch(It){case um:z(re,ue,Le,Ze);break;case ea:$(re,ue,Le,Ze);break;case By:re==null&&F(ue,Le,Ze,Pt);break;case Wt:ae(re,ue,Le,Ze,ut,Je,Pt,ct,Lt);break;default:Ht&1?te(re,ue,Le,Ze,ut,Je,Pt,ct,Lt):Ht&6?be(re,ue,Le,Ze,ut,Je,Pt,ct,Lt):(Ht&64||Ht&128)&&It.process(re,ue,Le,Ze,ut,Je,Pt,ct,Lt,Ye)}sn!=null&&ut?Pf(sn,re&&re.ref,Je,ue||re,!ue):sn==null&&re&&re.ref!=null&&Pf(re.ref,null,Je,re,!0)},z=(re,ue,Le,Ze)=>{if(re==null)s(ue.el=a(ue.children),Le,Ze);else{const ut=ue.el=re.el;ue.children!==re.children&&C(ut,ue.children)}},$=(re,ue,Le,Ze)=>{re==null?s(ue.el=b(ue.children||""),Le,Ze):ue.el=re.el},F=(re,ue,Le,Ze)=>{[re.el,re.anchor]=R(re.children,ue,Le,Ze,re.el,re.anchor)},H=({el:re,anchor:ue},Le,Ze)=>{let ut;for(;re&&re!==ue;)ut=A(re),s(re,Le,Ze),re=ut;s(ue,Le,Ze)},Y=({el:re,anchor:ue})=>{let Le;for(;re&&re!==ue;)Le=A(re),c(re),re=Le;c(ue)},te=(re,ue,Le,Ze,ut,Je,Pt,ct,Lt)=>{ue.type==="svg"?Pt="svg":ue.type==="math"&&(Pt="mathml"),re==null?Q(ue,Le,Ze,ut,Je,Pt,ct,Lt):he(re,ue,ut,Je,Pt,ct,Lt)},Q=(re,ue,Le,Ze,ut,Je,Pt,ct)=>{let Lt,It;const{props:sn,shapeFlag:Ht,transition:en,dirs:cn}=re;if(Lt=re.el=d(re.type,Je,sn&&sn.is,sn),Ht&8?w(Lt,re.children):Ht&16&&oe(re.children,Lt,null,Ze,ut,Vy(re,Je),Pt,ct),cn&&Su(re,null,Ze,"created"),ce(Lt,re,re.scopeId,Pt,Ze),sn){for(const En in sn)En!=="value"&&!Sf(En)&&f(Lt,En,null,sn[En],Je,Ze);"value"in sn&&f(Lt,"value",null,sn.value,Je),(It=sn.onVnodeBeforeMount)&&Bs(It,Ze,re)}cn&&Su(re,null,Ze,"beforeMount");const vn=WM(ut,en);vn&&en.beforeEnter(Lt),s(Lt,ue,Le),((It=sn&&sn.onVnodeMounted)||vn||cn)&&ma(()=>{It&&Bs(It,Ze,re),vn&&en.enter(Lt),cn&&Su(re,null,Ze,"mounted")},ut)},ce=(re,ue,Le,Ze,ut)=>{if(Le&&P(re,Le),Ze)for(let Je=0;Je<Ze.length;Je++)P(re,Ze[Je]);if(ut){let Je=ut.subTree;if(ue===Je||Ak(Je.type)&&(Je.ssContent===ue||Je.ssFallback===ue)){const Pt=ut.vnode;ce(re,Pt,Pt.scopeId,Pt.slotScopeIds,ut.parent)}}},oe=(re,ue,Le,Ze,ut,Je,Pt,ct,Lt=0)=>{for(let It=Lt;It<re.length;It++){const sn=re[It]=ct?vl(re[It]):$s(re[It]);O(null,sn,ue,Le,Ze,ut,Je,Pt,ct)}},he=(re,ue,Le,Ze,ut,Je,Pt)=>{const ct=ue.el=re.el;let{patchFlag:Lt,dynamicChildren:It,dirs:sn}=ue;Lt|=re.patchFlag&16;const Ht=re.props||pi,en=ue.props||pi;let cn;if(Le&&Cu(Le,!1),(cn=en.onVnodeBeforeUpdate)&&Bs(cn,Le,ue,re),sn&&Su(ue,re,Le,"beforeUpdate"),Le&&Cu(Le,!0),(Ht.innerHTML&&en.innerHTML==null||Ht.textContent&&en.textContent==null)&&w(ct,""),It?pe(re.dynamicChildren,It,ct,Le,Ze,Vy(ue,ut),Je):Pt||mt(re,ue,ct,null,Le,Ze,Vy(ue,ut),Je,!1),Lt>0){if(Lt&16)_e(ct,Ht,en,Le,ut);else if(Lt&2&&Ht.class!==en.class&&f(ct,"class",null,en.class,ut),Lt&4&&f(ct,"style",Ht.style,en.style,ut),Lt&8){const vn=ue.dynamicProps;for(let En=0;En<vn.length;En++){const Rn=vn[En],Ni=Ht[Rn],Yi=en[Rn];(Yi!==Ni||Rn==="value")&&f(ct,Rn,Ni,Yi,ut,Le)}}Lt&1&&re.children!==ue.children&&w(ct,ue.children)}else!Pt&&It==null&&_e(ct,Ht,en,Le,ut);((cn=en.onVnodeUpdated)||sn)&&ma(()=>{cn&&Bs(cn,Le,ue,re),sn&&Su(ue,re,Le,"updated")},Ze)},pe=(re,ue,Le,Ze,ut,Je,Pt)=>{for(let ct=0;ct<ue.length;ct++){const Lt=re[ct],It=ue[ct],sn=Lt.el&&(Lt.type===Wt||!Du(Lt,It)||Lt.shapeFlag&198)?T(Lt.el):Le;O(Lt,It,sn,null,Ze,ut,Je,Pt,!0)}},_e=(re,ue,Le,Ze,ut)=>{if(ue!==Le){if(ue!==pi)for(const Je in ue)!Sf(Je)&&!(Je in Le)&&f(re,Je,ue[Je],null,ut,Ze);for(const Je in Le){if(Sf(Je))continue;const Pt=Le[Je],ct=ue[Je];Pt!==ct&&Je!=="value"&&f(re,Je,ct,Pt,ut,Ze)}"value"in Le&&f(re,"value",ue.value,Le.value,ut)}},ae=(re,ue,Le,Ze,ut,Je,Pt,ct,Lt)=>{const It=ue.el=re?re.el:a(""),sn=ue.anchor=re?re.anchor:a("");let{patchFlag:Ht,dynamicChildren:en,slotScopeIds:cn}=ue;cn&&(ct=ct?ct.concat(cn):cn),re==null?(s(It,Le,Ze),s(sn,Le,Ze),oe(ue.children||[],Le,sn,ut,Je,Pt,ct,Lt)):Ht>0&&Ht&64&&en&&re.dynamicChildren?(pe(re.dynamicChildren,en,Le,ut,Je,Pt,ct),(ue.key!=null||ut&&ue===ut.subTree)&&qb(re,ue,!0)):mt(re,ue,Le,sn,ut,Je,Pt,ct,Lt)},be=(re,ue,Le,Ze,ut,Je,Pt,ct,Lt)=>{ue.slotScopeIds=ct,re==null?ue.shapeFlag&512?ut.ctx.activate(ue,Le,Ze,Pt,Lt):je(ue,Le,Ze,ut,Je,Pt,Lt):Ve(re,ue,Lt)},je=(re,ue,Le,Ze,ut,Je,Pt)=>{const ct=re.component=uD(re,Ze,ut);if(Lg(re)&&(ct.ctx.renderer=Ye),cD(ct,!1,Pt),ct.asyncDep){if(ut&&ut.registerDep(ct,Fe,Pt),!re.el){const Lt=ct.subTree=U(ea);$(null,Lt,ue,Le)}}else Fe(ct,re,ue,Le,ut,Je,Pt)},Ve=(re,ue,Le)=>{const Ze=ue.component=re.component;if(nD(re,ue,Le))if(Ze.asyncDep&&!Ze.asyncResolved){Ke(Ze,ue,Le);return}else Ze.next=ue,Ze.update();else ue.el=re.el,Ze.vnode=ue},Fe=(re,ue,Le,Ze,ut,Je,Pt)=>{const ct=()=>{if(re.isMounted){let{next:Ht,bu:en,u:cn,parent:vn,vnode:En}=re;{const He=Tk(re);if(He){Ht&&(Ht.el=En.el,Ke(re,Ht,Pt)),He.asyncDep.then(()=>{re.isUnmounted||ct()});return}}let Rn=Ht,Ni;Cu(re,!1),Ht?(Ht.el=En.el,Ke(re,Ht,Pt)):Ht=En,en&&Jp(en),(Ni=Ht.props&&Ht.props.onVnodeBeforeUpdate)&&Bs(Ni,vn,Ht,En),Cu(re,!0);const Yi=t1(re),Ui=re.subTree;re.subTree=Yi,O(Ui,Yi,T(Ui.el),Re(Ui),re,ut,Je),Ht.el=Yi.el,Rn===null&&iD(re,Yi.el),cn&&ma(cn,ut),(Ni=Ht.props&&Ht.props.onVnodeUpdated)&&ma(()=>Bs(Ni,vn,Ht,En),ut)}else{let Ht;const{el:en,props:cn}=ue,{bm:vn,m:En,parent:Rn,root:Ni,type:Yi}=re,Ui=If(ue);Cu(re,!1),vn&&Jp(vn),!Ui&&(Ht=cn&&cn.onVnodeBeforeMount)&&Bs(Ht,Rn,ue),Cu(re,!0);{Ni.ce&&Ni.ce._def.shadowRoot!==!1&&Ni.ce._injectChildStyle(Yi);const He=re.subTree=t1(re);O(null,He,Le,Ze,re,ut,Je),ue.el=He.el}if(En&&ma(En,ut),!Ui&&(Ht=cn&&cn.onVnodeMounted)){const He=ue;ma(()=>Bs(Ht,Rn,He),ut)}(ue.shapeFlag&256||Rn&&If(Rn.vnode)&&Rn.vnode.shapeFlag&256)&&re.a&&ma(re.a,ut),re.isMounted=!0,ue=Le=Ze=null}};re.scope.on();const Lt=re.effect=new EC(ct);re.scope.off();const It=re.update=Lt.run.bind(Lt),sn=re.job=Lt.runIfDirty.bind(Lt);sn.i=re,sn.id=re.uid,Lt.scheduler=()=>Ob(sn),Cu(re,!0),It()},Ke=(re,ue,Le)=>{ue.component=re;const Ze=re.vnode.props;re.vnode=ue,re.next=null,$M(re,ue.props,Ze,Le),GM(re,ue.children,Le),xo(),Uw(re),wo()},mt=(re,ue,Le,Ze,ut,Je,Pt,ct,Lt=!1)=>{const It=re&&re.children,sn=re?re.shapeFlag:0,Ht=ue.children,{patchFlag:en,shapeFlag:cn}=ue;if(en>0){if(en&128){ze(It,Ht,Le,Ze,ut,Je,Pt,ct,Lt);return}else if(en&256){ft(It,Ht,Le,Ze,ut,Je,Pt,ct,Lt);return}}cn&8?(sn&16&&xt(It,ut,Je),Ht!==It&&w(Le,Ht)):sn&16?cn&16?ze(It,Ht,Le,Ze,ut,Je,Pt,ct,Lt):xt(It,ut,Je,!0):(sn&8&&w(Le,""),cn&16&&oe(Ht,Le,Ze,ut,Je,Pt,ct,Lt))},ft=(re,ue,Le,Ze,ut,Je,Pt,ct,Lt)=>{re=re||kd,ue=ue||kd;const It=re.length,sn=ue.length,Ht=Math.min(It,sn);let en;for(en=0;en<Ht;en++){const cn=ue[en]=Lt?vl(ue[en]):$s(ue[en]);O(re[en],cn,Le,null,ut,Je,Pt,ct,Lt)}It>sn?xt(re,ut,Je,!0,!1,Ht):oe(ue,Le,Ze,ut,Je,Pt,ct,Lt,Ht)},ze=(re,ue,Le,Ze,ut,Je,Pt,ct,Lt)=>{let It=0;const sn=ue.length;let Ht=re.length-1,en=sn-1;for(;It<=Ht&&It<=en;){const cn=re[It],vn=ue[It]=Lt?vl(ue[It]):$s(ue[It]);if(Du(cn,vn))O(cn,vn,Le,null,ut,Je,Pt,ct,Lt);else break;It++}for(;It<=Ht&&It<=en;){const cn=re[Ht],vn=ue[en]=Lt?vl(ue[en]):$s(ue[en]);if(Du(cn,vn))O(cn,vn,Le,null,ut,Je,Pt,ct,Lt);else break;Ht--,en--}if(It>Ht){if(It<=en){const cn=en+1,vn=cn<sn?ue[cn].el:Ze;for(;It<=en;)O(null,ue[It]=Lt?vl(ue[It]):$s(ue[It]),Le,vn,ut,Je,Pt,ct,Lt),It++}}else if(It>en)for(;It<=Ht;)Ie(re[It],ut,Je,!0),It++;else{const cn=It,vn=It,En=new Map;for(It=vn;It<=en;It++){const fe=ue[It]=Lt?vl(ue[It]):$s(ue[It]);fe.key!=null&&En.set(fe.key,It)}let Rn,Ni=0;const Yi=en-vn+1;let Ui=!1,He=0;const se=new Array(Yi);for(It=0;It<Yi;It++)se[It]=0;for(It=cn;It<=Ht;It++){const fe=re[It];if(Ni>=Yi){Ie(fe,ut,Je,!0);continue}let Ce;if(fe.key!=null)Ce=En.get(fe.key);else for(Rn=vn;Rn<=en;Rn++)if(se[Rn-vn]===0&&Du(fe,ue[Rn])){Ce=Rn;break}Ce===void 0?Ie(fe,ut,Je,!0):(se[Ce-vn]=It+1,Ce>=He?He=Ce:Ui=!0,O(fe,ue[Ce],Le,null,ut,Je,Pt,ct,Lt),Ni++)}const le=Ui?ZM(se):kd;for(Rn=le.length-1,It=Yi-1;It>=0;It--){const fe=vn+It,Ce=ue[fe],$e=fe+1<sn?ue[fe+1].el:Ze;se[It]===0?O(null,Ce,Le,$e,ut,Je,Pt,ct,Lt):Ui&&(Rn<0||It!==le[Rn]?Se(Ce,Le,$e,2):Rn--)}}},Se=(re,ue,Le,Ze,ut=null)=>{const{el:Je,type:Pt,transition:ct,children:Lt,shapeFlag:It}=re;if(It&6){Se(re.component.subTree,ue,Le,Ze);return}if(It&128){re.suspense.move(ue,Le,Ze);return}if(It&64){Pt.move(re,ue,Le,Ye);return}if(Pt===Wt){s(Je,ue,Le);for(let Ht=0;Ht<Lt.length;Ht++)Se(Lt[Ht],ue,Le,Ze);s(re.anchor,ue,Le);return}if(Pt===By){H(re,ue,Le);return}if(Ze!==2&&It&1&&ct)if(Ze===0)ct.beforeEnter(Je),s(Je,ue,Le),ma(()=>ct.enter(Je),ut);else{const{leave:Ht,delayLeave:en,afterLeave:cn}=ct,vn=()=>{re.ctx.isUnmounted?c(Je):s(Je,ue,Le)},En=()=>{Ht(Je,()=>{vn(),cn&&cn()})};en?en(Je,vn,En):En()}else s(Je,ue,Le)},Ie=(re,ue,Le,Ze=!1,ut=!1)=>{const{type:Je,props:Pt,ref:ct,children:Lt,dynamicChildren:It,shapeFlag:sn,patchFlag:Ht,dirs:en,cacheIndex:cn}=re;if(Ht===-2&&(ut=!1),ct!=null&&(xo(),Pf(ct,null,Le,re,!0),wo()),cn!=null&&(ue.renderCache[cn]=void 0),sn&256){ue.ctx.deactivate(re);return}const vn=sn&1&&en,En=!If(re);let Rn;if(En&&(Rn=Pt&&Pt.onVnodeBeforeUnmount)&&Bs(Rn,ue,re),sn&6)Tt(re.component,Le,Ze);else{if(sn&128){re.suspense.unmount(Le,Ze);return}vn&&Su(re,null,ue,"beforeUnmount"),sn&64?re.type.remove(re,ue,Le,Ye,Ze):It&&!It.hasOnce&&(Je!==Wt||Ht>0&&Ht&64)?xt(It,ue,Le,!1,!0):(Je===Wt&&Ht&384||!ut&&sn&16)&&xt(Lt,ue,Le),Ze&&Qe(re)}(En&&(Rn=Pt&&Pt.onVnodeUnmounted)||vn)&&ma(()=>{Rn&&Bs(Rn,ue,re),vn&&Su(re,null,ue,"unmounted")},Le)},Qe=re=>{const{type:ue,el:Le,anchor:Ze,transition:ut}=re;if(ue===Wt){jt(Le,Ze);return}if(ue===By){Y(re);return}const Je=()=>{c(Le),ut&&!ut.persisted&&ut.afterLeave&&ut.afterLeave()};if(re.shapeFlag&1&&ut&&!ut.persisted){const{leave:Pt,delayLeave:ct}=ut,Lt=()=>Pt(Le,Je);ct?ct(re.el,Je,Lt):Lt()}else Je()},jt=(re,ue)=>{let Le;for(;re!==ue;)Le=A(re),c(re),re=Le;c(ue)},Tt=(re,ue,Le)=>{const{bum:Ze,scope:ut,job:Je,subTree:Pt,um:ct,m:Lt,a:It,parent:sn,slots:{__:Ht}}=re;e1(Lt),e1(It),Ze&&Jp(Ze),sn&&_n(Ht)&&Ht.forEach(en=>{sn.renderCache[en]=void 0}),ut.stop(),Je&&(Je.flags|=8,Ie(Pt,re,ue,Le)),ct&&ma(ct,ue),ma(()=>{re.isUnmounted=!0},ue),ue&&ue.pendingBranch&&!ue.isUnmounted&&re.asyncDep&&!re.asyncResolved&&re.suspenseId===ue.pendingId&&(ue.deps--,ue.deps===0&&ue.resolve())},xt=(re,ue,Le,Ze=!1,ut=!1,Je=0)=>{for(let Pt=Je;Pt<re.length;Pt++)Ie(re[Pt],ue,Le,Ze,ut)},Re=re=>{if(re.shapeFlag&6)return Re(re.component.subTree);if(re.shapeFlag&128)return re.suspense.next();const ue=A(re.anchor||re.el),Le=ue&&ue[ek];return Le?A(Le):ue};let vt=!1;const st=(re,ue,Le)=>{re==null?ue._vnode&&Ie(ue._vnode,null,null,!0):O(ue._vnode||null,re,ue,null,null,null,Le),ue._vnode=re,vt||(vt=!0,Uw(),XC(),vt=!1)},Ye={p:O,um:Ie,m:Se,r:Qe,mt:je,mc:oe,pc:mt,pbc:pe,n:Re,o:e};return{render:st,hydrate:void 0,createApp:OM(st)}}function Vy({type:e,props:n},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function Cu({effect:e,job:n},r){r?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function WM(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function qb(e,n,r=!1){const s=e.children,c=n.children;if(_n(s)&&_n(c))for(let f=0;f<s.length;f++){const d=s[f];let a=c[f];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=c[f]=vl(c[f]),a.el=d.el),!r&&a.patchFlag!==-2&&qb(d,a)),a.type===um&&(a.el=d.el),a.type===ea&&!a.el&&(a.el=d.el)}}function ZM(e){const n=e.slice(),r=[0];let s,c,f,d,a;const b=e.length;for(s=0;s<b;s++){const C=e[s];if(C!==0){if(c=r[r.length-1],e[c]<C){n[s]=c,r.push(s);continue}for(f=0,d=r.length-1;f<d;)a=f+d>>1,e[r[a]]<C?f=a+1:d=a;C<e[r[f]]&&(f>0&&(n[s]=r[f-1]),r[f]=s)}}for(f=r.length,d=r[f-1];f-- >0;)r[f]=d,d=n[d];return r}function Tk(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Tk(n)}function e1(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const KM=Symbol.for("v-scx"),YM=()=>bn(KM);function Ri(e,n){return Wb(e,null,n)}function Ot(e,n,r){return Wb(e,n,r)}function Wb(e,n,r=pi){const{immediate:s,deep:c,flush:f,once:d}=r,a=Cr({},r),b=n&&s||!n&&f!=="post";let C;if(Nf){if(f==="sync"){const P=YM();C=P.__watcherHandles||(P.__watcherHandles=[])}else if(!b){const P=()=>{};return P.stop=js,P.resume=js,P.pause=js,P}}const w=Gr;a.call=(P,R,O)=>gs(P,w,R,O);let T=!1;f==="post"?a.scheduler=P=>{ma(P,w&&w.suspense)}:f!=="sync"&&(T=!0,a.scheduler=(P,R)=>{R?P():Ob(P)}),a.augmentJob=P=>{n&&(P.flags|=4),T&&(P.flags|=2,w&&(P.id=w.uid,P.i=w))};const A=gM(e,n,a);return Nf&&(C?C.push(A):b&&A()),A}function XM(e,n,r){const s=this.proxy,c=Oi(e)?e.includes(".")?Pk(s,e):()=>s[e]:e.bind(s,s);let f;Tn(n)?f=n:(f=n.handler,r=n);const d=cm(this),a=Wb(c,f.bind(s),r);return d(),a}function Pk(e,n){const r=n.split(".");return()=>{let s=e;for(let c=0;c<r.length&&s;c++)s=s[r[c]];return s}}const JM=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${ga(n)}Modifiers`]||e[`${Yu(n)}Modifiers`];function QM(e,n,...r){if(e.isUnmounted)return;const s=e.vnode.props||pi;let c=r;const f=n.startsWith("update:"),d=f&&JM(s,n.slice(7));d&&(d.trim&&(c=r.map(w=>Oi(w)?w.trim():w)),d.number&&(c=r.map(d_)));let a,b=s[a=Ay(n)]||s[a=Ay(ga(n))];!b&&f&&(b=s[a=Ay(Yu(n))]),b&&gs(b,e,6,c);const C=s[a+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,gs(C,e,6,c)}}function Ik(e,n,r=!1){const s=n.emitsCache,c=s.get(e);if(c!==void 0)return c;const f=e.emits;let d={},a=!1;if(!Tn(e)){const b=C=>{const w=Ik(C,n,!0);w&&(a=!0,Cr(d,w))};!r&&n.mixins.length&&n.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}return!f&&!a?(Pi(e)&&s.set(e,null),null):(_n(f)?f.forEach(b=>d[b]=null):Cr(d,f),Pi(e)&&s.set(e,d),d)}function Vg(e,n){return!e||!Ig(n)?!1:(n=n.slice(2).replace(/Once$/,""),li(e,n[0].toLowerCase()+n.slice(1))||li(e,Yu(n))||li(e,n))}function t1(e){const{type:n,vnode:r,proxy:s,withProxy:c,propsOptions:[f],slots:d,attrs:a,emit:b,render:C,renderCache:w,props:T,data:A,setupState:P,ctx:R,inheritAttrs:O}=e,z=cg(e);let $,F;try{if(r.shapeFlag&4){const Y=c||s,te=Y;$=$s(C.call(te,Y,w,T,P,A,R)),F=a}else{const Y=n;$=$s(Y.length>1?Y(T,{attrs:a,slots:d,emit:b}):Y(T,null)),F=n.props?a:eD(a)}}catch(Y){Ef.length=0,Rg(Y,e,1),$=U(ea)}let H=$;if(F&&O!==!1){const Y=Object.keys(F),{shapeFlag:te}=H;Y.length&&te&7&&(f&&Y.some(Ib)&&(F=tD(F,f)),H=So(H,F,!1,!0))}return r.dirs&&(H=So(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(r.dirs):r.dirs),r.transition&&ju(H,r.transition),$=H,cg(z),$}const eD=e=>{let n;for(const r in e)(r==="class"||r==="style"||Ig(r))&&((n||(n={}))[r]=e[r]);return n},tD=(e,n)=>{const r={};for(const s in e)(!Ib(s)||!(s.slice(9)in n))&&(r[s]=e[s]);return r};function nD(e,n,r){const{props:s,children:c,component:f}=e,{props:d,children:a,patchFlag:b}=n,C=f.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&b>=0){if(b&1024)return!0;if(b&16)return s?n1(s,d,C):!!d;if(b&8){const w=n.dynamicProps;for(let T=0;T<w.length;T++){const A=w[T];if(d[A]!==s[A]&&!Vg(C,A))return!0}}}else return(c||a)&&(!a||!a.$stable)?!0:s===d?!1:s?d?n1(s,d,C):!0:!!d;return!1}function n1(e,n,r){const s=Object.keys(n);if(s.length!==Object.keys(e).length)return!0;for(let c=0;c<s.length;c++){const f=s[c];if(n[f]!==e[f]&&!Vg(r,f))return!0}return!1}function iD({vnode:e,parent:n},r){for(;n;){const s=n.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=n.vnode).el=r,n=n.parent;else break}}const Ak=e=>e.__isSuspense;function rD(e,n){n&&n.pendingBranch?_n(e)?n.effects.push(...e):n.effects.push(e):_M(e)}const Wt=Symbol.for("v-fgt"),um=Symbol.for("v-txt"),ea=Symbol.for("v-cmt"),By=Symbol.for("v-stc"),Ef=[];let Ba=null;function yn(e=!1){Ef.push(Ba=e?null:[])}function aD(){Ef.pop(),Ba=Ef[Ef.length-1]||null}let $f=1;function i1(e,n=!1){$f+=e,e<0&&Ba&&n&&(Ba.hasOnce=!0)}function Ek(e){return e.dynamicChildren=$f>0?Ba||kd:null,aD(),$f>0&&Ba&&Ba.push(e),e}function za(e,n,r,s,c,f){return Ek(X(e,n,r,s,c,f,!0))}function Gn(e,n,r,s,c){return Ek(U(e,n,r,s,c,!0))}function jf(e){return e?e.__v_isVNode===!0:!1}function Du(e,n){return e.type===n.type&&e.key===n.key}const Mk=({key:e})=>e??null,eg=({ref:e,ref_key:n,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Oi(e)||er(e)||Tn(e)?{i:ka,r:e,k:n,f:!!r}:e:null);function X(e,n=null,r=null,s=0,c=null,f=e===Wt?0:1,d=!1,a=!1){const b={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&Mk(n),ref:n&&eg(n),scopeId:QC,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:s,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:ka};return a?(Zb(b,r),f&128&&e.normalize(b)):r&&(b.shapeFlag|=Oi(r)?8:16),$f>0&&!d&&Ba&&(b.patchFlag>0||f&6)&&b.patchFlag!==32&&Ba.push(b),b}const U=sD;function sD(e,n=null,r=null,s=0,c=null,f=!1){if((!e||e===AM)&&(e=ea),jf(e)){const a=So(e,n,!0);return r&&Zb(a,r),$f>0&&!f&&Ba&&(a.shapeFlag&6?Ba[Ba.indexOf(e)]=a:Ba.push(a)),a.patchFlag=-2,a}if(pD(e)&&(e=e.__vccOpts),n){n=Dk(n);let{class:a,style:b}=n;a&&!Oi(a)&&(n.class=gt(a)),Pi(b)&&(Bb(b)&&!_n(b)&&(b=Cr({},b)),n.style=Bt(b))}const d=Oi(e)?1:Ak(e)?128:tk(e)?64:Pi(e)?4:Tn(e)?2:0;return X(e,n,r,s,c,d,f,!0)}function Dk(e){return e?Bb(e)||bk(e)?Cr({},e):e:null}function So(e,n,r=!1,s=!1){const{props:c,ref:f,patchFlag:d,children:a,transition:b}=e,C=n?lt(c||{},n):c,w={__v_isVNode:!0,__v_skip:!0,type:e.type,props:C,key:C&&Mk(C),ref:n&&n.ref?r&&f?_n(f)?f.concat(eg(n)):[f,eg(n)]:eg(n):f,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Wt?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:b,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&So(e.ssContent),ssFallback:e.ssFallback&&So(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return b&&s&&ju(w,b.clone(w)),w}function nn(e=" ",n=0){return U(um,null,e,n)}function Hr(e="",n=!1){return n?(yn(),Gn(ea,null,e)):U(ea,null,e)}function $s(e){return e==null||typeof e=="boolean"?U(ea):_n(e)?U(Wt,null,e.slice()):jf(e)?vl(e):U(um,null,String(e))}function vl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:So(e)}function Zb(e,n){let r=0;const{shapeFlag:s}=e;if(n==null)n=null;else if(_n(n))r=16;else if(typeof n=="object")if(s&65){const c=n.default;c&&(c._c&&(c._d=!1),Zb(e,c()),c._c&&(c._d=!0));return}else{r=32;const c=n._;!c&&!bk(n)?n._ctx=ka:c===3&&ka&&(ka.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else Tn(n)?(n={default:n,_ctx:ka},r=32):(n=String(n),s&64?(r=16,n=[nn(n)]):r=8);e.children=n,e.shapeFlag|=r}function lt(...e){const n={};for(let r=0;r<e.length;r++){const s=e[r];for(const c in s)if(c==="class")n.class!==s.class&&(n.class=gt([n.class,s.class]));else if(c==="style")n.style=Bt([n.style,s.style]);else if(Ig(c)){const f=n[c],d=s[c];d&&f!==d&&!(_n(f)&&f.includes(d))&&(n[c]=f?[].concat(f,d):d)}else c!==""&&(n[c]=s[c])}return n}function Bs(e,n,r,s=null){gs(e,n,7,[r,s])}const oD=vk();let lD=0;function uD(e,n,r){const s=e.type,c=(n?n.appContext:e.appContext)||oD,f={uid:lD++,vnode:e,type:s,parent:n,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new IC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(c.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wk(s,c),emitsOptions:Ik(s,c),emit:null,emitted:null,propsDefaults:pi,inheritAttrs:s.inheritAttrs,ctx:pi,data:pi,props:pi,attrs:pi,slots:pi,refs:pi,setupState:pi,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=n?n.root:f,f.emit=QM.bind(null,f),e.ce&&e.ce(f),f}let Gr=null;const Bg=()=>Gr||ka;let hg,b_;{const e=Mg(),n=(r,s)=>{let c;return(c=e[r])||(c=e[r]=[]),c.push(s),f=>{c.length>1?c.forEach(d=>d(f)):c[0](f)}};hg=n("__VUE_INSTANCE_SETTERS__",r=>Gr=r),b_=n("__VUE_SSR_SETTERS__",r=>Nf=r)}const cm=e=>{const n=Gr;return hg(e),e.scope.on(),()=>{e.scope.off(),hg(n)}},r1=()=>{Gr&&Gr.scope.off(),hg(null)};function Rk(e){return e.vnode.shapeFlag&4}let Nf=!1;function cD(e,n=!1,r=!1){n&&b_(n);const{props:s,children:c}=e.vnode,f=Rk(e);FM(e,s,f,n),UM(e,c,r||n);const d=f?dD(e,n):void 0;return n&&b_(!1),d}function dD(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,MM);const{setup:s}=r;if(s){xo();const c=e.setupContext=s.length>1?fD(e):null,f=cm(e),d=om(s,e,0,[e.props,c]),a=wC(d);if(wo(),f(),(a||e.sp)&&!If(e)&&uk(e),a){if(d.then(r1,r1),n)return d.then(b=>{a1(e,b)}).catch(b=>{Rg(b,e,0)});e.asyncDep=d}else a1(e,d)}else Lk(e)}function a1(e,n,r){Tn(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Pi(n)&&(e.setupState=WC(n)),Lk(e)}function Lk(e,n,r){const s=e.type;e.render||(e.render=s.render||js);{const c=cm(e);xo();try{DM(e)}finally{wo(),c()}}}const hD={get(e,n){return Qr(e,"get",""),e[n]}};function fD(e){const n=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,hD),slots:e.slots,emit:e.emit,expose:n}}function Og(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(WC(HC(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in Af)return Af[r](e)},has(n,r){return r in n||r in Af}})):e.proxy}function mD(e,n=!0){return Tn(e)?e.displayName||e.name:e.name||n&&e.__name}function pD(e){return Tn(e)&&"__vccOpts"in e}const ne=(e,n)=>mM(e,n,Nf);function bs(e,n,r){const s=arguments.length;return s===2?Pi(n)&&!_n(n)?jf(n)?U(e,null,[n]):U(e,n):U(e,null,n):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&jf(r)&&(r=[r]),U(e,n,r))}const gD="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let x_;const s1=typeof window<"u"&&window.trustedTypes;if(s1)try{x_=s1.createPolicy("vue",{createHTML:e=>e})}catch{}const zk=x_?e=>x_.createHTML(e):e=>e,vD="http://www.w3.org/2000/svg",yD="http://www.w3.org/1998/Math/MathML",vo=typeof document<"u"?document:null,o1=vo&&vo.createElement("template"),_D={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,s)=>{const c=n==="svg"?vo.createElementNS(vD,e):n==="mathml"?vo.createElementNS(yD,e):r?vo.createElement(e,{is:r}):vo.createElement(e);return e==="select"&&s&&s.multiple!=null&&c.setAttribute("multiple",s.multiple),c},createText:e=>vo.createTextNode(e),createComment:e=>vo.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vo.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,s,c,f){const d=r?r.previousSibling:n.lastChild;if(c&&(c===f||c.nextSibling))for(;n.insertBefore(c.cloneNode(!0),r),!(c===f||!(c=c.nextSibling)););else{o1.innerHTML=zk(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=o1.content;if(s==="svg"||s==="mathml"){const b=a.firstChild;for(;b.firstChild;)a.appendChild(b.firstChild);a.removeChild(b)}n.insertBefore(a,r)}return[d?d.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},dl="transition",mf="animation",Dd=Symbol("_vtc"),Vk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Bk=Cr({},ak,Vk),bD=e=>(e.displayName="Transition",e.props=Bk,e),kl=bD((e,{slots:n})=>bs(SM,Ok(e),n)),ku=(e,n=[])=>{_n(e)?e.forEach(r=>r(...n)):e&&e(...n)},l1=e=>e?_n(e)?e.some(n=>n.length>1):e.length>1:!1;function Ok(e){const n={};for(const ae in e)ae in Vk||(n[ae]=e[ae]);if(e.css===!1)return n;const{name:r="v",type:s,duration:c,enterFromClass:f=`${r}-enter-from`,enterActiveClass:d=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:b=f,appearActiveClass:C=d,appearToClass:w=a,leaveFromClass:T=`${r}-leave-from`,leaveActiveClass:A=`${r}-leave-active`,leaveToClass:P=`${r}-leave-to`}=e,R=xD(c),O=R&&R[0],z=R&&R[1],{onBeforeEnter:$,onEnter:F,onEnterCancelled:H,onLeave:Y,onLeaveCancelled:te,onBeforeAppear:Q=$,onAppear:ce=F,onAppearCancelled:oe=H}=n,he=(ae,be,je,Ve)=>{ae._enterCancelled=Ve,fl(ae,be?w:a),fl(ae,be?C:d),je&&je()},pe=(ae,be)=>{ae._isLeaving=!1,fl(ae,T),fl(ae,P),fl(ae,A),be&&be()},_e=ae=>(be,je)=>{const Ve=ae?ce:F,Fe=()=>he(be,ae,je);ku(Ve,[be,Fe]),u1(()=>{fl(be,ae?b:f),Os(be,ae?w:a),l1(Ve)||c1(be,s,O,Fe)})};return Cr(n,{onBeforeEnter(ae){ku($,[ae]),Os(ae,f),Os(ae,d)},onBeforeAppear(ae){ku(Q,[ae]),Os(ae,b),Os(ae,C)},onEnter:_e(!1),onAppear:_e(!0),onLeave(ae,be){ae._isLeaving=!0;const je=()=>pe(ae,be);Os(ae,T),ae._enterCancelled?(Os(ae,A),w_()):(w_(),Os(ae,A)),u1(()=>{ae._isLeaving&&(fl(ae,T),Os(ae,P),l1(Y)||c1(ae,s,z,je))}),ku(Y,[ae,je])},onEnterCancelled(ae){he(ae,!1,void 0,!0),ku(H,[ae])},onAppearCancelled(ae){he(ae,!0,void 0,!0),ku(oe,[ae])},onLeaveCancelled(ae){pe(ae),ku(te,[ae])}})}function xD(e){if(e==null)return null;if(Pi(e))return[Oy(e.enter),Oy(e.leave)];{const n=Oy(e);return[n,n]}}function Oy(e){return VE(e)}function Os(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Dd]||(e[Dd]=new Set)).add(n)}function fl(e,n){n.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const r=e[Dd];r&&(r.delete(n),r.size||(e[Dd]=void 0))}function u1(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let wD=0;function c1(e,n,r,s){const c=e._endId=++wD,f=()=>{c===e._endId&&s()};if(r!=null)return setTimeout(f,r);const{type:d,timeout:a,propCount:b}=Fk(e,n);if(!d)return s();const C=d+"end";let w=0;const T=()=>{e.removeEventListener(C,A),f()},A=P=>{P.target===e&&++w>=b&&T()};setTimeout(()=>{w<b&&T()},a+1),e.addEventListener(C,A)}function Fk(e,n){const r=window.getComputedStyle(e),s=R=>(r[R]||"").split(", "),c=s(`${dl}Delay`),f=s(`${dl}Duration`),d=d1(c,f),a=s(`${mf}Delay`),b=s(`${mf}Duration`),C=d1(a,b);let w=null,T=0,A=0;n===dl?d>0&&(w=dl,T=d,A=f.length):n===mf?C>0&&(w=mf,T=C,A=b.length):(T=Math.max(d,C),w=T>0?d>C?dl:mf:null,A=w?w===dl?f.length:b.length:0);const P=w===dl&&/\b(transform|all)(,|$)/.test(s(`${dl}Property`).toString());return{type:w,timeout:T,propCount:A,hasTransform:P}}function d1(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,s)=>h1(r)+h1(e[s])))}function h1(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function w_(){return document.body.offsetHeight}function SD(e,n,r){const s=e[Dd];s&&(n=(n?[n,...s]:[...s]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}const fg=Symbol("_vod"),$k=Symbol("_vsh"),xs={beforeMount(e,{value:n},{transition:r}){e[fg]=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):pf(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:s}){!n!=!r&&(s?n?(s.beforeEnter(e),pf(e,!0),s.enter(e)):s.leave(e,()=>{pf(e,!1)}):pf(e,n))},beforeUnmount(e,{value:n}){pf(e,n)}};function pf(e,n){e.style.display=n?e[fg]:"none",e[$k]=!n}const CD=Symbol(""),kD=/(^|;)\s*display\s*:/;function TD(e,n,r){const s=e.style,c=Oi(r);let f=!1;if(r&&!c){if(n)if(Oi(n))for(const d of n.split(";")){const a=d.slice(0,d.indexOf(":")).trim();r[a]==null&&tg(s,a,"")}else for(const d in n)r[d]==null&&tg(s,d,"");for(const d in r)d==="display"&&(f=!0),tg(s,d,r[d])}else if(c){if(n!==r){const d=s[CD];d&&(r+=";"+d),s.cssText=r,f=kD.test(r)}}else n&&e.removeAttribute("style");fg in e&&(e[fg]=f?s.display:"",e[$k]&&(s.display="none"))}const f1=/\s*!important$/;function tg(e,n,r){if(_n(r))r.forEach(s=>tg(e,n,s));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const s=PD(e,n);f1.test(r)?e.setProperty(Yu(s),r.replace(f1,""),"important"):e[s]=r}}const m1=["Webkit","Moz","ms"],Fy={};function PD(e,n){const r=Fy[n];if(r)return r;let s=ga(n);if(s!=="filter"&&s in e)return Fy[n]=s;s=Ws(s);for(let c=0;c<m1.length;c++){const f=m1[c]+s;if(f in e)return Fy[n]=f}return n}const p1="http://www.w3.org/1999/xlink";function g1(e,n,r,s,c,f=UE(n)){s&&n.startsWith("xlink:")?r==null?e.removeAttributeNS(p1,n.slice(6,n.length)):e.setAttributeNS(p1,n,r):r==null||f&&!kC(r)?e.removeAttribute(n):e.setAttribute(n,f?"":Il(r)?String(r):r)}function v1(e,n,r,s,c){if(n==="innerHTML"||n==="textContent"){r!=null&&(e[n]=n==="innerHTML"?zk(r):r);return}const f=e.tagName;if(n==="value"&&f!=="PROGRESS"&&!f.includes("-")){const a=f==="OPTION"?e.getAttribute("value")||"":e.value,b=r==null?e.type==="checkbox"?"on":"":String(r);(a!==b||!("_value"in e))&&(e.value=b),r==null&&e.removeAttribute(n),e._value=r;return}let d=!1;if(r===""||r==null){const a=typeof e[n];a==="boolean"?r=kC(r):r==null&&a==="string"?(r="",d=!0):a==="number"&&(r=0,d=!0)}try{e[n]=r}catch{}d&&e.removeAttribute(c||n)}function bd(e,n,r,s){e.addEventListener(n,r,s)}function ID(e,n,r,s){e.removeEventListener(n,r,s)}const y1=Symbol("_vei");function AD(e,n,r,s,c=null){const f=e[y1]||(e[y1]={}),d=f[n];if(s&&d)d.value=s;else{const[a,b]=ED(n);if(s){const C=f[n]=RD(s,c);bd(e,a,C,b)}else d&&(ID(e,a,d,b),f[n]=void 0)}}const _1=/(?:Once|Passive|Capture)$/;function ED(e){let n;if(_1.test(e)){n={};let s;for(;s=e.match(_1);)e=e.slice(0,e.length-s[0].length),n[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yu(e.slice(2)),n]}let $y=0;const MD=Promise.resolve(),DD=()=>$y||(MD.then(()=>$y=0),$y=Date.now());function RD(e,n){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;gs(LD(s,r.value),n,5,[s])};return r.value=e,r.attached=DD(),r}function LD(e,n){if(_n(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(s=>c=>!c._stopped&&s&&s(c))}else return n}const b1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zD=(e,n,r,s,c,f)=>{const d=c==="svg";n==="class"?SD(e,s,d):n==="style"?TD(e,r,s):Ig(n)?Ib(n)||AD(e,n,r,s,f):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):VD(e,n,s,d))?(v1(e,n,s),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&g1(e,n,s,d,f,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!Oi(s))?v1(e,ga(n),s,f,n):(n==="true-value"?e._trueValue=s:n==="false-value"&&(e._falseValue=s),g1(e,n,s,d))};function VD(e,n,r,s){if(s)return!!(n==="innerHTML"||n==="textContent"||n in e&&b1(n)&&Tn(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const c=e.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return b1(n)&&Oi(r)?!1:n in e}const jk=new WeakMap,Nk=new WeakMap,mg=Symbol("_moveCb"),x1=Symbol("_enterCb"),BD=e=>(delete e.props.mode,e),OD=BD({name:"TransitionGroup",props:Cr({},Bk,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=Bg(),s=rk();let c,f;return Nb(()=>{if(!c.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!ND(c[0].el,r.vnode.el,d)){c=[];return}c.forEach(FD),c.forEach($D);const a=c.filter(jD);w_(),a.forEach(b=>{const C=b.el,w=C.style;Os(C,d),w.transform=w.webkitTransform=w.transitionDuration="";const T=C[mg]=A=>{A&&A.target!==C||(!A||/transform$/.test(A.propertyName))&&(C.removeEventListener("transitionend",T),C[mg]=null,fl(C,d))};C.addEventListener("transitionend",T)}),c=[]}),()=>{const d=fn(e),a=Ok(d);let b=d.tag||Wt;if(c=[],f)for(let C=0;C<f.length;C++){const w=f[C];w.el&&w.el instanceof Element&&(c.push(w),ju(w,Ff(w,a,s,r)),jk.set(w,w.el.getBoundingClientRect()))}f=n.default?Fb(n.default()):[];for(let C=0;C<f.length;C++){const w=f[C];w.key!=null&&ju(w,Ff(w,a,s,r))}return U(b,null,f)}}}),Kb=OD;function FD(e){const n=e.el;n[mg]&&n[mg](),n[x1]&&n[x1]()}function $D(e){Nk.set(e,e.el.getBoundingClientRect())}function jD(e){const n=jk.get(e),r=Nk.get(e),s=n.left-r.left,c=n.top-r.top;if(s||c){const f=e.el.style;return f.transform=f.webkitTransform=`translate(${s}px,${c}px)`,f.transitionDuration="0s",e}}function ND(e,n,r){const s=e.cloneNode(),c=e[Dd];c&&c.forEach(a=>{a.split(/\s+/).forEach(b=>b&&s.classList.remove(b))}),r.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const f=n.nodeType===1?n:n.parentNode;f.appendChild(s);const{hasTransform:d}=Fk(s);return f.removeChild(s),d}const w1=e=>{const n=e.props["onUpdate:modelValue"]||!1;return _n(n)?r=>Jp(n,r):n};function UD(e){e.target.composing=!0}function S1(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const jy=Symbol("_assign"),GD={created(e,{modifiers:{lazy:n,trim:r,number:s}},c){e[jy]=w1(c);const f=s||c.props&&c.props.type==="number";bd(e,n?"change":"input",d=>{if(d.target.composing)return;let a=e.value;r&&(a=a.trim()),f&&(a=d_(a)),e[jy](a)}),r&&bd(e,"change",()=>{e.value=e.value.trim()}),n||(bd(e,"compositionstart",UD),bd(e,"compositionend",S1),bd(e,"change",S1))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:r,modifiers:{lazy:s,trim:c,number:f}},d){if(e[jy]=w1(d),e.composing)return;const a=(f||e.type==="number")&&!/^0\d/.test(e.value)?d_(e.value):e.value,b=n??"";a!==b&&(document.activeElement===e&&e.type!=="range"&&(s&&n===r||c&&e.value.trim()===b)||(e.value=b))}},HD=["ctrl","shift","alt","meta"],qD={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>HD.some(r=>e[`${r}Key`]&&!n.includes(r))},wl=(e,n)=>{const r=e._withMods||(e._withMods={}),s=n.join(".");return r[s]||(r[s]=(c,...f)=>{for(let d=0;d<n.length;d++){const a=qD[n[d]];if(a&&a(c,n))return}return e(c,...f)})},WD=Cr({patchProp:zD},_D);let C1;function Uk(){return C1||(C1=HM(WD))}const Gk=(...e)=>{Uk().render(...e)},ZD=(...e)=>{const n=Uk().createApp(...e),{mount:r}=n;return n.mount=s=>{const c=YD(s);if(!c)return;const f=n._component;!Tn(f)&&!f.render&&!f.template&&(f.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const d=r(c,!1,KD(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),d},n};function KD(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function YD(e){return Oi(e)?document.querySelector(e):e}function ia(e,n){let r;function s(){r=Md(),r.run(()=>n.length?n(()=>{r==null||r.stop(),s()}):n())}Ot(e,c=>{c&&!r?s():c||(r==null||r.stop(),r=void 0)},{immediate:!0}),hr(()=>{r==null||r.stop()})}const Yn=typeof window<"u",Yb=Yn&&"IntersectionObserver"in window,XD=Yn&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),k1=Yn&&"EyeDropper"in window,JD=Yn&&"matchMedia"in window&&typeof window.matchMedia=="function";function T1(e,n,r){QD(e,n),n.set(e,r)}function QD(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function P1(e,n,r){return e.set(Hk(e,n),r),r}function mo(e,n){return e.get(Hk(e,n))}function Hk(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function qk(e,n,r){const s=n.length-1;if(s<0)return e===void 0?r:e;for(let c=0;c<s;c++){if(e==null)return r;e=e[n[c]]}return e==null||e[n[s]]===void 0?r:e[n[s]]}function Rr(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date&&e.getTime()!==n.getTime()||e!==Object(e)||n!==Object(n))return!1;const r=Object.keys(e);return r.length!==Object.keys(n).length?!1:r.every(s=>Rr(e[s],n[s]))}function Nu(e,n,r){return e==null||!n||typeof n!="string"?r:e[n]!==void 0?e[n]:(n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),qk(e,n.split("."),r))}function Wi(e,n,r){if(n===!0)return e===void 0?r:e;if(n==null||typeof n=="boolean")return r;if(e!==Object(e)){if(typeof n!="function")return r;const c=n(e,r);return typeof c>"u"?r:c}if(typeof n=="string")return Nu(e,n,r);if(Array.isArray(n))return qk(e,n,r);if(typeof n!="function")return r;const s=n(e,r);return typeof s>"u"?r:s}function Oa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(r,s)=>n+s)}function Gt(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const r=Number(e);return isNaN(r)?String(e):isFinite(r)?`${r}${n}`:void 0}function Uf(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function I1(e){let n;return e!==null&&typeof e=="object"&&((n=Object.getPrototypeOf(e))===Object.prototype||n===null)}function Xb(e){if(e&&"$el"in e){const n=e.$el;return(n==null?void 0:n.nodeType)===Node.TEXT_NODE?n.nextElementSibling:n}return e}const S_=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),C_=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function Wk(e){return Object.keys(e)}function Lu(e,n){return n.every(r=>e.hasOwnProperty(r))}function Io(e,n){const r={};for(const s of n)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}function k_(e,n,r){const s=Object.create(null),c=Object.create(null);for(const f in e)n.some(d=>d instanceof RegExp?d.test(f):d===f)?s[f]=e[f]:c[f]=e[f];return[s,c]}function di(e,n){const r={...e};return n.forEach(s=>delete r[s]),r}const Zk=/^on[^a-z]/,Jb=e=>Zk.test(e),eR=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],tR=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function nR(e){return e.isComposing&&tR.includes(e.key)}function Al(e){const[n,r]=k_(e,[Zk]),s=di(n,eR),[c,f]=k_(r,["class","style","id",/^data-/]);return Object.assign(c,n),Object.assign(f,s),[c,f]}function Mi(e){return e==null?[]:Array.isArray(e)?e:[e]}function Kk(e,n){let r=0;const s=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];clearTimeout(r),r=setTimeout(()=>e(...f),Sr(n))};return s.clear=()=>{clearTimeout(r)},s.immediate=e,s}function ci(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(n,Math.min(r,e))}function A1(e){const n=e.toString().trim();return n.includes(".")?n.length-n.indexOf(".")-1:0}function E1(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+r.repeat(Math.max(0,n-e.length))}function M1(e,n){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,n-e.length))+e}function iR(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=[];let s=0;for(;s<e.length;)r.push(e.substr(s,n)),s+=n;return r}function D1(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<n)return`${e} B`;const r=n===1024?["Ki","Mi","Gi"]:["k","M","G"];let s=-1;for(;Math.abs(e)>=n&&s<r.length-1;)e/=n,++s;return`${e.toFixed(1)} ${r[s]}B`}function ta(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s={};for(const c in e)s[c]=e[c];for(const c in n){const f=e[c],d=n[c];if(I1(f)&&I1(d)){s[c]=ta(f,d,r);continue}if(r&&Array.isArray(f)&&Array.isArray(d)){s[c]=r(f,d);continue}s[c]=d}return s}function Yk(e){return e.map(n=>n.type===Wt?Yk(n.children):n).flat()}function Ou(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Ou.cache.has(e))return Ou.cache.get(e);const n=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Ou.cache.set(e,n),n}Ou.cache=new Map;function Sd(e,n){if(!n||typeof n!="object")return[];if(Array.isArray(n))return n.map(r=>Sd(e,r)).flat(1);if(n.suspense)return Sd(e,n.ssContent);if(Array.isArray(n.children))return n.children.map(r=>Sd(e,r)).flat(1);if(n.component){if(Object.getOwnPropertySymbols(n.component.provides).includes(e))return[n.component];if(n.component.subTree)return Sd(e,n.component.subTree).flat(1)}return[]}var sd=new WeakMap,Tu=new WeakMap;class Xk{constructor(n){T1(this,sd,[]),T1(this,Tu,0),this.size=n}get isFull(){return mo(sd,this).length===this.size}push(n){mo(sd,this)[mo(Tu,this)]=n,P1(Tu,this,(mo(Tu,this)+1)%this.size)}values(){return mo(sd,this).slice(mo(Tu,this)).concat(mo(sd,this).slice(0,mo(Tu,this)))}clear(){mo(sd,this).length=0,P1(Tu,this,0)}}function rR(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function Qb(e){const n=wr({});Ri(()=>{const s=e();for(const c in s)n[c]=s[c]},{flush:"sync"});const r={};for(const s in n)r[s]=Me(()=>n[s]);return r}function pg(e,n){return e.includes(n)}function Jk(e){return e[2].toLowerCase()+e.slice(3)}const Lr=()=>[Function,Array];function R1(e,n){return n="on"+Ws(n),!!(e[n]||e[`${n}Once`]||e[`${n}Capture`]||e[`${n}OnceCapture`]||e[`${n}CaptureOnce`])}function Fg(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(Array.isArray(e))for(const c of e)c(...r);else typeof e=="function"&&e(...r)}function Gf(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(s=>`${s}${n?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(r)]}function Qk(e,n,r){let s,c=e.indexOf(document.activeElement);const f=n==="next"?1:-1;do c+=f,s=e[c];while((!s||s.offsetParent==null||!((r==null?void 0:r(s))??!0))&&c<e.length&&c>=0);return s}function Fu(e,n){var s,c,f,d;const r=Gf(e);if(n==null)(e===document.activeElement||!e.contains(document.activeElement))&&((s=r[0])==null||s.focus());else if(n==="first")(c=r[0])==null||c.focus();else if(n==="last")(f=r.at(-1))==null||f.focus();else if(typeof n=="number")(d=r[n])==null||d.focus();else{const a=Qk(r,n);a?a.focus():Fu(e,n==="next"?"first":"last")}}function jp(e){return e==null||typeof e=="string"&&e.trim()===""}function eT(){}function Rd(e,n){if(!(Yn&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${n})`)))return null;try{return!!e&&e.matches(n)}catch{return null}}function $g(e){return e.some(n=>jf(n)?n.type===ea?!1:n.type!==Wt||$g(n.children):!0)?e:null}function Ny(e,n,r){return(e==null?void 0:e(n))??(r==null?void 0:r(n))}function aR(e,n){if(!Yn||e===0)return n(),()=>{};const r=window.setTimeout(n,e);return()=>window.clearTimeout(r)}function sR(e,n){const r=e.clientX,s=e.clientY,c=n.getBoundingClientRect(),f=c.left,d=c.top,a=c.right,b=c.bottom;return r>=f&&r<=a&&s>=d&&s<=b}function gg(){const e=Dt(),n=r=>{e.value=r};return Object.defineProperty(n,"value",{enumerable:!0,get:()=>e.value,set:r=>e.value=r}),Object.defineProperty(n,"el",{enumerable:!0,get:()=>Xb(e.value)}),n}function Ld(e){const n=e.key.length===1,r=!e.ctrlKey&&!e.metaKey&&!e.altKey;return n&&r}function T_(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function P_(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function oR(e,n,r){const s=new RegExp(`[\\d\\-${P_(r)}]`),c=e.split("").filter(d=>s.test(d)).filter((d,a,b)=>a===0&&/[-]/.test(d)||d===r&&a===b.indexOf(d)||/\d/.test(d)).join("");if(n===0)return c.split(r)[0];const f=new RegExp(`${P_(r)}\\d`);if(n!==null&&f.test(c)){const d=c.split(r);return[d[0],d[1].substring(0,n)].join(r)}return c}function lR(e){const n={};for(const r in e)n[ga(r)]=e[r];return n}function uR(e){const n=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(r=>{let[s,c]=r;return n.includes(s)?!!c:c!==void 0}))}const tT=["top","bottom"],cR=["start","end","left","right"];function I_(e,n){let[r,s]=e.split(" ");return s||(s=pg(tT,r)?"start":pg(cR,r)?"top":"center"),{side:A_(r,n),align:A_(s,n)}}function A_(e,n){return e==="start"?n?"right":"left":e==="end"?n?"left":"right":e}function Uy(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function Gy(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function L1(e){return{side:e.align,align:e.side}}function z1(e){return pg(tT,e.side)?"y":"x"}class Ns{constructor(n){let{x:r,y:s,width:c,height:f}=n;this.x=r,this.y=s,this.width=c,this.height=f}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function V1(e,n){return{x:{before:Math.max(0,n.left-e.left),after:Math.max(0,e.right-n.right)},y:{before:Math.max(0,n.top-e.top),after:Math.max(0,e.bottom-n.bottom)}}}function nT(e){return Array.isArray(e)?new Ns({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function dR(e){if(e===document.documentElement)return visualViewport?new Ns({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Ns({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const n=e.getBoundingClientRect();return new Ns({x:n.x,y:n.y,width:e.clientWidth,height:e.clientHeight})}}function e0(e){const n=e.getBoundingClientRect(),r=getComputedStyle(e),s=r.transform;if(s){let c,f,d,a,b;if(s.startsWith("matrix3d("))c=s.slice(9,-1).split(/, /),f=Number(c[0]),d=Number(c[5]),a=Number(c[12]),b=Number(c[13]);else if(s.startsWith("matrix("))c=s.slice(7,-1).split(/, /),f=Number(c[0]),d=Number(c[3]),a=Number(c[4]),b=Number(c[5]);else return new Ns(n);const C=r.transformOrigin,w=n.x-a-(1-f)*parseFloat(C),T=n.y-b-(1-d)*parseFloat(C.slice(C.indexOf(" ")+1)),A=f?n.width/f:e.offsetWidth+1,P=d?n.height/d:e.offsetHeight+1;return new Ns({x:w,y:T,width:A,height:P})}else return new Ns(n)}function zu(e,n,r){if(typeof e.animate>"u")return{finished:Promise.resolve()};let s;try{s=e.animate(n,r)}catch{return{finished:Promise.resolve()}}return typeof s.finished>"u"&&(s.finished=new Promise(c=>{s.onfinish=()=>{c(s)}})),s}const ng=new WeakMap;function hR(e,n){Object.keys(n).forEach(r=>{if(Jb(r)){const s=Jk(r),c=ng.get(e);if(n[r]==null)c==null||c.forEach(f=>{const[d,a]=f;d===s&&(e.removeEventListener(s,a),c.delete(f))});else if(!c||![...c].some(f=>f[0]===s&&f[1]===n[r])){e.addEventListener(s,n[r]);const f=c||new Set;f.add([s,n[r]]),ng.has(e)||ng.set(e,f)}}else n[r]==null?e.removeAttribute(r):e.setAttribute(r,n[r])})}function fR(e,n){Object.keys(n).forEach(r=>{if(Jb(r)){const s=Jk(r),c=ng.get(e);c==null||c.forEach(f=>{const[d,a]=f;d===s&&(e.removeEventListener(s,a),c.delete(f))})}else e.removeAttribute(r)})}const od=2.4,B1=.2126729,O1=.7151522,F1=.072175,mR=.55,pR=.58,gR=.57,vR=.62,Np=.03,$1=1.45,yR=5e-4,_R=1.25,bR=1.25,j1=.078,N1=12.82051282051282,Up=.06,U1=.001;function G1(e,n){const r=(e.r/255)**od,s=(e.g/255)**od,c=(e.b/255)**od,f=(n.r/255)**od,d=(n.g/255)**od,a=(n.b/255)**od;let b=r*B1+s*O1+c*F1,C=f*B1+d*O1+a*F1;if(b<=Np&&(b+=(Np-b)**$1),C<=Np&&(C+=(Np-C)**$1),Math.abs(C-b)<yR)return 0;let w;if(C>b){const T=(C**mR-b**pR)*_R;w=T<U1?0:T<j1?T-T*N1*Up:T-Up}else{const T=(C**vR-b**gR)*bR;w=T>-U1?0:T>-j1?T-T*N1*Up:T+Up}return w*100}function iT(e,n){n=Array.isArray(n)?n.slice(0,-1).map(r=>`'${r}'`).join(", ")+` or '${n.at(-1)}'`:`'${n}'`}const vg=.20689655172413793,xR=e=>e>vg**3?Math.cbrt(e):e/(3*vg**2)+4/29,wR=e=>e>vg?e**3:3*vg**2*(e-4/29);function rT(e){const n=xR,r=n(e[1]);return[116*r-16,500*(n(e[0]/.95047)-r),200*(r-n(e[2]/1.08883))]}function aT(e){const n=wR,r=(e[0]+16)/116;return[n(r+e[1]/500)*.95047,n(r),n(r-e[2]/200)*1.08883]}const SR=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],CR=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,kR=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],TR=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function sT(e){const n=Array(3),r=CR,s=SR;for(let c=0;c<3;++c)n[c]=Math.round(ci(r(s[c][0]*e[0]+s[c][1]*e[1]+s[c][2]*e[2]))*255);return{r:n[0],g:n[1],b:n[2]}}function t0(e){let{r:n,g:r,b:s}=e;const c=[0,0,0],f=TR,d=kR;n=f(n/255),r=f(r/255),s=f(s/255);for(let a=0;a<3;++a)c[a]=d[a][0]*n+d[a][1]*r+d[a][2]*s;return c}function E_(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function PR(e){return E_(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const H1=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,IR={rgb:(e,n,r,s)=>({r:e,g:n,b:r,a:s}),rgba:(e,n,r,s)=>({r:e,g:n,b:r,a:s}),hsl:(e,n,r,s)=>q1({h:e,s:n,l:r,a:s}),hsla:(e,n,r,s)=>q1({h:e,s:n,l:r,a:s}),hsv:(e,n,r,s)=>Gs({h:e,s:n,v:r,a:s}),hsva:(e,n,r,s)=>Gs({h:e,s:n,v:r,a:s})};function Fa(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&H1.test(e)){const{groups:n}=e.match(H1),{fn:r,values:s}=n,c=s.split(/,\s*|\s*\/\s*|\s+/).map((f,d)=>f.endsWith("%")||d>0&&d<3&&["hsl","hsla","hsv","hsva"].includes(r)?parseFloat(f)/100:parseFloat(f));return IR[r](...c)}else if(typeof e=="string"){let n=e.startsWith("#")?e.slice(1):e;return[3,4].includes(n.length)?n=n.split("").map(r=>r+r).join(""):[6,8].includes(n.length),cT(n)}else if(typeof e=="object"){if(Lu(e,["r","g","b"]))return e;if(Lu(e,["h","s","l"]))return Gs(n0(e));if(Lu(e,["h","s","v"]))return Gs(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Gs(e){const{h:n,s:r,v:s,a:c}=e,f=a=>{const b=(a+n/60)%6;return s-s*r*Math.max(Math.min(b,4-b,1),0)},d=[f(5),f(3),f(1)].map(a=>Math.round(a*255));return{r:d[0],g:d[1],b:d[2],a:c}}function q1(e){return Gs(n0(e))}function dm(e){if(!e)return{h:0,s:1,v:1,a:1};const n=e.r/255,r=e.g/255,s=e.b/255,c=Math.max(n,r,s),f=Math.min(n,r,s);let d=0;c!==f&&(c===n?d=60*(0+(r-s)/(c-f)):c===r?d=60*(2+(s-n)/(c-f)):c===s&&(d=60*(4+(n-r)/(c-f)))),d<0&&(d=d+360);const a=c===0?0:(c-f)/c,b=[d,a,c];return{h:b[0],s:b[1],v:b[2],a:e.a}}function M_(e){const{h:n,s:r,v:s,a:c}=e,f=s-s*r/2,d=f===1||f===0?0:(s-f)/Math.min(f,1-f);return{h:n,s:d,l:f,a:c}}function n0(e){const{h:n,s:r,l:s,a:c}=e,f=s+r*Math.min(s,1-s),d=f===0?0:2-2*s/f;return{h:n,s:d,v:f,a:c}}function oT(e){let{r:n,g:r,b:s,a:c}=e;return c===void 0?`rgb(${n}, ${r}, ${s})`:`rgba(${n}, ${r}, ${s}, ${c})`}function lT(e){return oT(Gs(e))}function Gp(e){const n=Math.round(e).toString(16);return("00".substr(0,2-n.length)+n).toUpperCase()}function uT(e){let{r:n,g:r,b:s,a:c}=e;return`#${[Gp(n),Gp(r),Gp(s),c!==void 0?Gp(Math.round(c*255)):""].join("")}`}function cT(e){e=ER(e);let[n,r,s,c]=iR(e,2).map(f=>parseInt(f,16));return c=c===void 0?c:c/255,{r:n,g:r,b:s,a:c}}function AR(e){const n=cT(e);return dm(n)}function dT(e){return uT(Gs(e))}function ER(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(n=>n+n).join("")),e.length!==6&&(e=E1(E1(e,6),8,"F")),e}function MR(e,n){const r=rT(t0(e));return r[0]=r[0]+n*10,sT(aT(r))}function DR(e,n){const r=rT(t0(e));return r[0]=r[0]-n*10,sT(aT(r))}function D_(e){const n=Fa(e);return t0(n)[1]}function RR(e,n){const r=D_(e),s=D_(n),c=Math.max(r,s),f=Math.min(r,s);return(c+.05)/(f+.05)}function hT(e){const n=Math.abs(G1(Fa(0),Fa(e)));return Math.abs(G1(Fa(16777215),Fa(e)))>Math.min(n,50)?"#fff":"#000"}function Ue(e,n){return r=>Object.keys(e).reduce((s,c)=>{const d=typeof e[c]=="object"&&e[c]!=null&&!Array.isArray(e[c])?e[c]:{type:e[c]};return r&&c in r?s[c]={...d,default:r[c]}:s[c]=d,n&&!s[c].source&&(s[c].source=n),s},{})}const Zt=Ue({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function ji(e,n){const r=Bg();if(!r)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return r}function Zs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const n=ji(e).type;return Ou((n==null?void 0:n.aliasName)||(n==null?void 0:n.name))}function LR(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ji("injectSelf");const{provides:r}=n;if(r&&e in r)return r[e]}const zd=Symbol.for("vuetify:defaults");function zR(e){return et(e)}function i0(){const e=bn(zd);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function Li(e,n){const r=i0(),s=et(e),c=ne(()=>{if(Sr(n==null?void 0:n.disabled))return r.value;const d=Sr(n==null?void 0:n.scoped),a=Sr(n==null?void 0:n.reset),b=Sr(n==null?void 0:n.root);if(s.value==null&&!(d||a||b))return r.value;let C=ta(s.value,{prev:r.value});if(d)return C;if(a||b){const w=Number(a||1/0);for(let T=0;T<=w&&!(!C||!("prev"in C));T++)C=C.prev;return C&&typeof b=="string"&&b in C&&(C=ta(ta(C,{prev:C}),C[b])),C}return C.prev?ta(C.prev,C):C});return ri(zd,c),c}function VR(e,n){return e.props&&(typeof e.props[n]<"u"||typeof e.props[Ou(n)]<"u")}function BR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i0();const s=ji("useDefaults");if(n=n??s.type.name??s.type.__name,!n)throw new Error("[Vuetify] Could not determine component name");const c=ne(()=>{var b;return(b=r.value)==null?void 0:b[e._as??n]}),f=new Proxy(e,{get(b,C){var P,R,O,z;const w=Reflect.get(b,C);if(C==="class"||C==="style")return[(P=c.value)==null?void 0:P[C],w].filter($=>$!=null);if(VR(s.vnode,C))return w;const T=(R=c.value)==null?void 0:R[C];if(T!==void 0)return T;const A=(z=(O=r.value)==null?void 0:O.global)==null?void 0:z[C];return A!==void 0?A:w}}),d=Dt();Ri(()=>{if(c.value){const b=Object.entries(c.value).filter(C=>{let[w]=C;return w.startsWith(w[0].toUpperCase())});d.value=b.length?Object.fromEntries(b):void 0}else d.value=void 0});function a(){const b=LR(zd,s);ri(zd,ne(()=>d.value?ta((b==null?void 0:b.value)??{},d.value):b==null?void 0:b.value))}return{props:f,provideSubDefaults:a}}function ja(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=Ue(e.props??{},e.name)();const n=Object.keys(e.props).filter(r=>r!=="class"&&r!=="style");e.filterProps=function(s){return Io(s,n)},e.props._as=String,e.setup=function(s,c){const f=i0();if(!f.value)return e._setup(s,c);const{props:d,provideSubDefaults:a}=BR(s,s._as??e.name,f),b=e._setup(d,c);return a(),b}}return e}function ht(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n=>(e?ja:$b)(n)}function OR(e,n){return n.props=e,n}function Ao(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",r=arguments.length>2?arguments[2]:void 0;return ht()({name:r??Ws(ga(e.replace(/__/g,"-"))),props:{tag:{type:String,default:n},...Zt()},setup(s,c){let{slots:f}=c;return()=>{var d;return bs(s.tag,{class:[e,s.class],style:s.style},(d=f.default)==null?void 0:d.call(f))}}})}function fT(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const n=e.getRootNode();return n!==document&&n.getRootNode({composed:!0})!==document?null:n}const Hf="cubic-bezier(0.4, 0, 0.2, 1)",FR="cubic-bezier(0.0, 0, 0.2, 1)",$R="cubic-bezier(0.4, 0, 1, 1)";function W1(e,n,r){return Object.keys(e).filter(s=>Jb(s)&&s.endsWith(n)).reduce((s,c)=>(s[c.slice(0,-n.length)]=f=>e[c](f,r(f)),s),{})}function r0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(n?jR(e):a0(e))return e;e=e.parentElement}return document.scrollingElement}function yg(e,n){const r=[];if(n&&e&&!n.contains(e))return r;for(;e&&(a0(e)&&r.push(e),e!==n);)e=e.parentElement;return r}function a0(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return n.overflowY==="scroll"||n.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function jR(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return["scroll","auto"].includes(n.overflowY)}function NR(e){let{depth:n,isLast:r,isLastGroup:s,leafLinks:c,separateRoots:f,parentIndentLines:d,variant:a}=e;if(!d||!n)return{leaf:void 0,node:void 0,children:d};if(a==="simple")return{leaf:[...d,"line"],node:[...d,"line"],children:[...d,"line"]};const b=r&&(!s||f||n>1);return{leaf:[...d,b?"last-leaf":"leaf",...c?["leaf-link"]:[]],node:[...d,b?"last-leaf":"leaf"],children:[...d,b?"none":"line"]}}function UR(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function _t(e){const n=ji("useRender");n.render=e}function tn(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T=>T,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:T=>T;const f=ji("useProxiedModel"),d=et(e[n]!==void 0?e[n]:r),a=Ou(n),C=ne(a!==n?()=>{var T,A,P,R;return e[n],!!(((T=f.vnode.props)!=null&&T.hasOwnProperty(n)||(A=f.vnode.props)!=null&&A.hasOwnProperty(a))&&((P=f.vnode.props)!=null&&P.hasOwnProperty(`onUpdate:${n}`)||(R=f.vnode.props)!=null&&R.hasOwnProperty(`onUpdate:${a}`)))}:()=>{var T,A;return e[n],!!((T=f.vnode.props)!=null&&T.hasOwnProperty(n)&&((A=f.vnode.props)!=null&&A.hasOwnProperty(`onUpdate:${n}`)))});ia(()=>!C.value,()=>{Ot(()=>e[n],T=>{d.value=T})});const w=ne({get(){const T=e[n];return s(C.value?T:d.value)},set(T){const A=c(T),P=fn(C.value?e[n]:d.value);P===A||s(P)===T||(d.value=A,f==null||f.emit(`update:${n}`,A))}});return Object.defineProperty(w,"externalValue",{get:()=>C.value?e[n]:d.value}),w}const GR={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"}},Z1="$vuetify.",K1=(e,n)=>e.replace(/\{(\d+)\}/g,(r,s)=>String(n[Number(s)])),mT=(e,n,r)=>function(s){for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];if(!s.startsWith(Z1))return K1(s,f);const a=s.replace(Z1,""),b=e.value&&r.value[e.value],C=n.value&&r.value[n.value];let w=Nu(b,a,null);return w||(`${s}${e.value}`,w=Nu(C,a,null)),w||(w=s),typeof w!="string"&&(w=s),K1(w,f)};function s0(e,n){return(r,s)=>new Intl.NumberFormat([e.value,n.value],s).format(r)}function pT(e,n){return s0(e,n)(.1).includes(",")?",":"."}function Hy(e,n,r){const s=tn(e,n,e[n]??r.value);return s.value=e[n]??r.value,Ot(r,c=>{e[n]==null&&(s.value=r.value)}),s}function gT(e){return n=>{const r=Hy(n,"locale",e.current),s=Hy(n,"fallback",e.fallback),c=Hy(n,"messages",e.messages);return{name:"vuetify",current:r,fallback:s,messages:c,decimalSeparator:Me(()=>pT(r,s)),t:mT(r,s,c),n:s0(r,s),provide:gT({current:r,fallback:s,messages:c})}}}function HR(e){const n=Dt((e==null?void 0:e.locale)??"en"),r=Dt((e==null?void 0:e.fallback)??"en"),s=et({en:GR,...e==null?void 0:e.messages});return{name:"vuetify",current:n,fallback:r,messages:s,decimalSeparator:Me(()=>(e==null?void 0:e.decimalSeparator)??pT(n,r)),t:mT(n,r,s),n:s0(n,r),provide:gT({current:n,fallback:r,messages:s})}}const Vd=Symbol.for("vuetify:locale");function qR(e){return e.name!=null}function WR(e){const n=e!=null&&e.adapter&&qR(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:HR(e),r=YR(n,e);return{...n,...r}}function gi(){const e=bn(Vd);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function ZR(e){const n=bn(Vd);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");const r=n.provide(e),s=XR(r,n.rtl,e),c={...r,...s};return ri(Vd,c),c}function KR(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function YR(e,n){const r=et((n==null?void 0:n.rtl)??KR()),s=ne(()=>r.value[e.current.value]??!1);return{isRtl:s,rtl:r,rtlClasses:Me(()=>`v-locale--is-${s.value?"rtl":"ltr"}`)}}function XR(e,n,r){const s=ne(()=>r.rtl??n.value[e.current.value]??!1);return{isRtl:s,rtl:n,rtlClasses:Me(()=>`v-locale--is-${s.value?"rtl":"ltr"}`)}}function tr(){const e=bn(Vd);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function hm(e){const n=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(n):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(n):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(n):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(n):return{firstDay:6,firstWeekSize:1};case n==="MV":return{firstDay:5,firstWeekSize:1};case n==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function JR(e,n,r){var w;const s=[];let c=[];const f=vT(e),d=yT(e),a=r??((w=hm(n))==null?void 0:w.firstDay)??0,b=(f.getDay()-a+7)%7,C=(d.getDay()-a+7)%7;for(let T=0;T<b;T++){const A=new Date(f);A.setDate(A.getDate()-(b-T)),c.push(A)}for(let T=1;T<=d.getDate();T++){const A=new Date(e.getFullYear(),e.getMonth(),T);c.push(A),c.length===7&&(s.push(c),c=[])}for(let T=1;T<7-C;T++){const A=new Date(d);A.setDate(A.getDate()+T),c.push(A)}return c.length>0&&s.push(c),s}function R_(e,n,r){var f;const s=r??((f=hm(n))==null?void 0:f.firstDay)??0,c=new Date(e);for(;c.getDay()!==s;)c.setDate(c.getDate()-1);return c}function QR(e,n){var c;const r=new Date(e),s=((((c=hm(n))==null?void 0:c.firstDay)??0)+6)%7;for(;r.getDay()!==s;)r.setDate(r.getDate()+1);return r}function vT(e){return new Date(e.getFullYear(),e.getMonth(),1)}function yT(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function eL(e){const n=e.split("-").map(Number);return new Date(n[0],n[1]-1,n[2])}const tL=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function _T(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let n;if(tL.test(e))return eL(e);if(n=Date.parse(e),!isNaN(n))return new Date(n)}return null}const Y1=new Date(2e3,0,2);function nL(e,n,r){var c;const s=n??((c=hm(e))==null?void 0:c.firstDay)??0;return Oa(7).map(f=>{const d=new Date(Y1);return d.setDate(Y1.getDate()+s+f),new Intl.DateTimeFormat(e,{weekday:r??"narrow"}).format(d)})}function iL(e,n,r,s){const c=_T(e)??new Date,f=s==null?void 0:s[n];if(typeof f=="function")return f(c,n,r);let d={};switch(n){case"fullDate":d={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":d={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const a=c.getDate(),b=new Intl.DateTimeFormat(r,{month:"long"}).format(c);return`${a} ${b}`;case"normalDateWithWeekday":d={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":d={month:"short",day:"numeric"};break;case"year":d={year:"numeric"};break;case"month":d={month:"long"};break;case"monthShort":d={month:"short"};break;case"monthAndYear":d={month:"long",year:"numeric"};break;case"monthAndDate":d={month:"long",day:"numeric"};break;case"weekday":d={weekday:"long"};break;case"weekdayShort":d={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(r).format(c.getDate());case"hours12h":d={hour:"numeric",hour12:!0};break;case"hours24h":d={hour:"numeric",hour12:!1};break;case"minutes":d={minute:"numeric"};break;case"seconds":d={second:"numeric"};break;case"fullTime":d={hour:"numeric",minute:"numeric"};break;case"fullTime12h":d={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":d={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":d={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");case"keyboardDateTime12h":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");case"keyboardDateTime24h":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");default:d=f??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(r,d).format(c)}function rL(e,n){const r=e.toJsDate(n),s=r.getFullYear(),c=M1(String(r.getMonth()+1),2,"0"),f=M1(String(r.getDate()),2,"0");return`${s}-${c}-${f}`}function aL(e){const[n,r,s]=e.split("-").map(Number);return new Date(n,r-1,s)}function sL(e,n){const r=new Date(e);return r.setMinutes(r.getMinutes()+n),r}function oL(e,n){const r=new Date(e);return r.setHours(r.getHours()+n),r}function ig(e,n){const r=new Date(e);return r.setDate(r.getDate()+n),r}function lL(e,n){const r=new Date(e);return r.setDate(r.getDate()+n*7),r}function uL(e,n){const r=new Date(e);return r.setDate(1),r.setMonth(r.getMonth()+n),r}function L_(e){return e.getFullYear()}function cL(e){return e.getMonth()}function dL(e,n,r,s){const c=hm(n),f=r??(c==null?void 0:c.firstDay)??0,d=s??(c==null?void 0:c.firstWeekSize)??1;function a(P){const R=new Date(P,0,1);return 7-z_(R,R_(R,n,f),"days")}let b=L_(e);const C=ig(R_(e,n,f),6);b<L_(C)&&a(b+1)>=d&&b++;const w=new Date(b,0,1),T=a(b),A=T>=d?ig(w,T-7):ig(w,T);return 1+z_(bT(e),bg(A),"weeks")}function hL(e){return e.getDate()}function fL(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function mL(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function pL(e){return e.getHours()}function gL(e){return e.getMinutes()}function vL(e){return new Date(e.getFullYear(),0,1)}function yL(e){return new Date(e.getFullYear(),11,31)}function _L(e,n){return _g(e,n[0])&&wL(e,n[1])}function bL(e){const n=new Date(e);return n instanceof Date&&!isNaN(n.getTime())}function _g(e,n){return e.getTime()>n.getTime()}function xL(e,n){return _g(bg(e),bg(n))}function wL(e,n){return e.getTime()<n.getTime()}function X1(e,n){return e.getTime()===n.getTime()}function SL(e,n){return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function CL(e,n){return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function kL(e,n){return e.getFullYear()===n.getFullYear()}function z_(e,n,r){const s=new Date(e),c=new Date(n);switch(r){case"years":return s.getFullYear()-c.getFullYear();case"quarters":return Math.floor((s.getMonth()-c.getMonth()+(s.getFullYear()-c.getFullYear())*12)/4);case"months":return s.getMonth()-c.getMonth()+(s.getFullYear()-c.getFullYear())*12;case"weeks":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60*24));case"hours":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60));case"minutes":return Math.floor((s.getTime()-c.getTime())/(1e3*60));case"seconds":return Math.floor((s.getTime()-c.getTime())/1e3);default:return s.getTime()-c.getTime()}}function TL(e,n){const r=new Date(e);return r.setHours(n),r}function PL(e,n){const r=new Date(e);return r.setMinutes(n),r}function IL(e,n){const r=new Date(e);return r.setMonth(n),r}function AL(e,n){const r=new Date(e);return r.setDate(n),r}function EL(e,n){const r=new Date(e);return r.setFullYear(n),r}function bg(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function bT(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class ML{constructor(n){this.locale=n.locale,this.formats=n.formats}date(n){return _T(n)}toJsDate(n){return n}toISO(n){return rL(this,n)}parseISO(n){return aL(n)}addMinutes(n,r){return sL(n,r)}addHours(n,r){return oL(n,r)}addDays(n,r){return ig(n,r)}addWeeks(n,r){return lL(n,r)}addMonths(n,r){return uL(n,r)}getWeekArray(n,r){const s=r!==void 0?Number(r):void 0;return JR(n,this.locale,s)}startOfWeek(n,r){const s=r!==void 0?Number(r):void 0;return R_(n,this.locale,s)}endOfWeek(n){return QR(n,this.locale)}startOfMonth(n){return vT(n)}endOfMonth(n){return yT(n)}format(n,r){return iL(n,r,this.locale,this.formats)}isEqual(n,r){return X1(n,r)}isValid(n){return bL(n)}isWithinRange(n,r){return _L(n,r)}isAfter(n,r){return _g(n,r)}isAfterDay(n,r){return xL(n,r)}isBefore(n,r){return!_g(n,r)&&!X1(n,r)}isSameDay(n,r){return SL(n,r)}isSameMonth(n,r){return CL(n,r)}isSameYear(n,r){return kL(n,r)}setMinutes(n,r){return PL(n,r)}setHours(n,r){return TL(n,r)}setMonth(n,r){return IL(n,r)}setDate(n,r){return AL(n,r)}setYear(n,r){return EL(n,r)}getDiff(n,r,s){return z_(n,r,s)}getWeekdays(n,r){const s=n!==void 0?Number(n):void 0;return nL(this.locale,s,r)}getYear(n){return L_(n)}getMonth(n){return cL(n)}getWeek(n,r,s){const c=r!==void 0?Number(r):void 0;return dL(n,this.locale,c,s)}getDate(n){return hL(n)}getNextMonth(n){return fL(n)}getPreviousMonth(n){return mL(n)}getHours(n){return pL(n)}getMinutes(n){return gL(n)}startOfDay(n){return bg(n)}endOfDay(n){return bT(n)}startOfYear(n){return vL(n)}endOfYear(n){return yL(n)}}const xT=Symbol.for("vuetify:date-options"),J1=Symbol.for("vuetify:date-adapter");function DL(e,n){const r=ta({adapter:ML,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:r,instance:wT(r,n)}}function RL(e,n,r){const s=e.getDiff(e.endOfDay(r??n),e.startOfDay(n),"days"),c=[n];for(let f=1;f<s;f++){const d=e.addDays(n,f);c.push(d)}return r&&c.push(e.endOfDay(r)),c}function wT(e,n){const r=wr(typeof e.adapter=="function"?new e.adapter({locale:e.locale[n.current.value]??n.current.value,formats:e.formats}):e.adapter);return Ot(n.current,s=>{r.locale=e.locale[s]??s??r.locale}),r}function fm(){const e=bn(xT);if(!e)throw new Error("[Vuetify] Could not find injected date options");const n=gi();return wT(e,n)}const jg=["sm","md","lg","xl","xxl"],V_=Symbol.for("vuetify:display"),Q1={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},LL=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q1;return ta(Q1,e)};function eS(e){return Yn&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function tS(e){return Yn&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function nS(e){const n=Yn&&!e?window.navigator.userAgent:"ssr";function r(R){return!!n.match(R)}const s=r(/android/i),c=r(/iphone|ipad|ipod/i),f=r(/cordova/i),d=r(/electron/i),a=r(/chrome/i),b=r(/edge/i),C=r(/firefox/i),w=r(/opera/i),T=r(/win/i),A=r(/mac/i),P=r(/linux/i);return{android:s,ios:c,cordova:f,electron:d,chrome:a,edge:b,firefox:C,opera:w,win:T,mac:A,linux:P,touch:XD,ssr:n==="ssr"}}function zL(e,n){const{thresholds:r,mobileBreakpoint:s}=LL(e),c=Dt(tS(n)),f=Dt(nS(n)),d=wr({}),a=Dt(eS(n));function b(){c.value=tS(),a.value=eS()}function C(){b(),f.value=nS()}return Ri(()=>{const w=a.value<r.sm,T=a.value<r.md&&!w,A=a.value<r.lg&&!(T||w),P=a.value<r.xl&&!(A||T||w),R=a.value<r.xxl&&!(P||A||T||w),O=a.value>=r.xxl,z=w?"xs":T?"sm":A?"md":P?"lg":R?"xl":"xxl",$=typeof s=="number"?s:r[s],F=a.value<$;d.xs=w,d.sm=T,d.md=A,d.lg=P,d.xl=R,d.xxl=O,d.smAndUp=!w,d.mdAndUp=!(w||T),d.lgAndUp=!(w||T||A),d.xlAndUp=!(w||T||A||P),d.smAndDown=!(A||P||R||O),d.mdAndDown=!(P||R||O),d.lgAndDown=!(R||O),d.xlAndDown=!O,d.name=z,d.height=c.value,d.width=a.value,d.mobile=F,d.mobileBreakpoint=s,d.platform=f.value,d.thresholds=r}),Yn&&(window.addEventListener("resize",b,{passive:!0}),hr(()=>{window.removeEventListener("resize",b)},!0)),{...Gd(d),update:C,ssr:!!n}}const Xu=Ue({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Qa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=bn(V_);if(!r)throw new Error("Could not find Vuetify display injection");const s=ne(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?r.width.value<e.mobileBreakpoint:e.mobileBreakpoint?r.width.value<r.thresholds.value[e.mobileBreakpoint]:e.mobile===null?r.mobile.value:!1),c=Me(()=>n?{[`${n}--mobile`]:s.value}:{});return{...r,displayClasses:c,mobile:s}}const ST=Symbol.for("vuetify:goto");function CT(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5}}}function VL(e){return o0(e)??(document.scrollingElement||document.body)}function o0(e){return typeof e=="string"?document.querySelector(e):Xb(e)}function qy(e,n,r){if(typeof e=="number")return n&&r?-e:e;let s=o0(e),c=0;for(;s;)c+=n?s.offsetLeft:s.offsetTop,s=s.offsetParent;return c}function BL(e,n){return{rtl:n.isRtl,options:ta(CT(),e)}}async function iS(e,n,r,s){const c=r?"scrollLeft":"scrollTop",f=ta((s==null?void 0:s.options)??CT(),n),d=s==null?void 0:s.rtl.value,a=(typeof e=="number"?e:o0(e))??0,b=f.container==="parent"&&a instanceof HTMLElement?a.parentElement:VL(f.container),C=typeof f.easing=="function"?f.easing:f.patterns[f.easing];if(!C)throw new TypeError(`Easing function "${f.easing}" not found.`);let w;if(typeof a=="number")w=qy(a,r,d);else if(w=qy(a,r,d)-qy(b,r,d),f.layout){const R=window.getComputedStyle(a).getPropertyValue("--v-layout-top");R&&(w-=parseInt(R,10))}w+=f.offset,w=FL(b,w,!!d,!!r);const T=b[c]??0;if(w===T)return Promise.resolve(w);const A=performance.now();return new Promise(P=>requestAnimationFrame(function R(O){const $=(O-A)/f.duration,F=Math.floor(T+(w-T)*C(ci($,0,1)));if(b[c]=F,$>=1&&Math.abs(F-b[c])<10)return P(w);if($>2)return P(b[c]);requestAnimationFrame(R)}))}function OL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=bn(ST),{isRtl:r}=tr();if(!n)throw new Error("[Vuetify] Could not find injected goto instance");const s={...n,rtl:Me(()=>n.rtl.value||r.value)};async function c(f,d){return iS(f,ta(e,d),!1,s)}return c.horizontal=async(f,d)=>iS(f,ta(e,d),!0,s),c}function FL(e,n,r,s){const{scrollWidth:c,scrollHeight:f}=e,[d,a]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let b,C;return s?r?(b=-(c-d),C=0):(b=0,C=c-d):(b=0,C=f+-a),ci(n,b,C)}const $L={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace"},jL={component:e=>bs(u0,{...e,class:"mdi"})},an=[String,Function,Object,Array],B_=Symbol.for("vuetify:icons"),Ng=Ue({icon:{type:an},tag:{type:[String,Object,Function],required:!0}},"icon"),O_=ht()({name:"VComponentIcon",props:Ng(),setup(e,n){let{slots:r}=n;return()=>{const s=e.icon;return U(e.tag,null,{default:()=>{var c;return[e.icon?U(s,null,null):(c=r.default)==null?void 0:c.call(r)]}})}}}),l0=ja({name:"VSvgIcon",inheritAttrs:!1,props:Ng(),setup(e,n){let{attrs:r}=n;return()=>U(e.tag,lt(r,{style:null}),{default:()=>[X("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(s=>Array.isArray(s)?X("path",{d:s[0],"fill-opacity":s[1]},null):X("path",{d:s},null)):X("path",{d:e.icon},null)])]})}}),NL=ja({name:"VLigatureIcon",props:Ng(),setup(e){return()=>U(e.tag,null,{default:()=>[e.icon]})}}),u0=ja({name:"VClassIcon",props:Ng(),setup(e){return()=>U(e.tag,{class:gt(e.icon)},null)}});function UL(){return{svg:{component:l0},class:{component:u0}}}function GL(e){const n=UL(),r=(e==null?void 0:e.defaultSet)??"mdi";return r==="mdi"&&!n.mdi&&(n.mdi=jL),ta({defaultSet:r,sets:n,aliases:{...$L,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const HL=e=>{const n=bn(B_);if(!n)throw new Error("Missing Vuetify Icons provide!");return{iconData:ne(()=>{var b;const s=Us(e);if(!s)return{component:O_};let c=s;if(typeof c=="string"&&(c=c.trim(),c.startsWith("$")&&(c=(b=n.aliases)==null?void 0:b[c.slice(1)])),Array.isArray(c))return{component:l0,icon:c};if(typeof c!="string")return{component:O_,icon:c};const f=Object.keys(n.sets).find(C=>typeof c=="string"&&c.startsWith(`${C}:`)),d=f?c.slice(f.length+1):c;return{component:n.sets[f??n.defaultSet].component,icon:d}})}},qf=Symbol.for("vuetify:theme"),Un=Ue({theme:String},"theme");function rS(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function qL(){var s,c;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rS();const n=rS();if(!e)return{...n,isDisabled:!0};const r={};for(const[f,d]of Object.entries(e.themes??{})){const a=d.dark||f==="dark"?(s=n.themes)==null?void 0:s.dark:(c=n.themes)==null?void 0:c.light;r[f]=ta(a,d)}return ta(n,{...e,themes:r})}function Pu(e,n,r,s){e.push(`${YL(n,s)} {
`,...r.map(c=>`  ${c};
`),`}
`)}function aS(e,n){const r=e.dark?2:1,s=e.dark?1:2,c=[];for(const[f,d]of Object.entries(e.colors)){const a=Fa(d);c.push(`--${n}theme-${f}: ${a.r},${a.g},${a.b}`),f.startsWith("on-")||c.push(`--${n}theme-${f}-overlay-multiplier: ${D_(d)>.18?r:s}`)}for(const[f,d]of Object.entries(e.variables)){const a=typeof d=="string"&&d.startsWith("#")?Fa(d):void 0,b=a?`${a.r}, ${a.g}, ${a.b}`:void 0;c.push(`--${n}${f}: ${b??d}`)}return c}function WL(e,n,r){const s={};if(r)for(const c of["lighten","darken"]){const f=c==="lighten"?MR:DR;for(const d of Oa(r[c],1))s[`${e}-${c}-${d}`]=uT(f(Fa(n),d))}return s}function ZL(e,n){if(!n)return{};let r={};for(const s of n.colors){const c=e[s];c&&(r={...r,...WL(s,c,n)})}return r}function KL(e){const n={};for(const r of Object.keys(e)){if(r.startsWith("on-")||e[`on-${r}`])continue;const s=`on-${r}`,c=Fa(e[r]);n[s]=hT(c)}return n}function YL(e,n){if(!n)return e;const r=`:where(${n})`;return e===":root"?r:`${r} ${e}`}function XL(e,n,r){const s=JL(e,n);s&&(s.innerHTML=r)}function JL(e,n){if(!Yn)return null;let r=document.getElementById(e);return r||(r=document.createElement("style"),r.id=e,r.type="text/css",n&&r.setAttribute("nonce",n),document.head.appendChild(r)),r}function QL(e){const n=qL(e),r=Dt(n.defaultTheme),s=et(n.themes),c=Dt("light"),f=ne({get(){return r.value==="system"?c.value:r.value},set(z){r.value=z}}),d=ne(()=>{const z={};for(const[$,F]of Object.entries(s.value)){const H={...F.colors,...ZL(F.colors,n.variations)};z[$]={...F,colors:{...H,...KL(H)}}}return z}),a=Me(()=>d.value[f.value]),b=ne(()=>{var H;const z=[],$=n.unimportant?"":" !important",F=n.scoped?n.prefix:"";(H=a.value)!=null&&H.dark&&Pu(z,":root",["color-scheme: dark"],n.scope),Pu(z,":root",aS(a.value,n.prefix),n.scope);for(const[Y,te]of Object.entries(d.value))Pu(z,`.${n.prefix}theme--${Y}`,[`color-scheme: ${te.dark?"dark":"normal"}`,...aS(te,n.prefix)],n.scope);if(n.utilities){const Y=[],te=[],Q=new Set(Object.values(d.value).flatMap(ce=>Object.keys(ce.colors)));for(const ce of Q)ce.startsWith("on-")?Pu(te,`.${ce}`,[`color: rgb(var(--${n.prefix}theme-${ce}))${$}`],n.scope):(Pu(Y,`.${F}bg-${ce}`,[`--${n.prefix}theme-overlay-multiplier: var(--${n.prefix}theme-${ce}-overlay-multiplier)`,`background-color: rgb(var(--${n.prefix}theme-${ce}))${$}`,`color: rgb(var(--${n.prefix}theme-on-${ce}))${$}`],n.scope),Pu(te,`.${F}text-${ce}`,[`color: rgb(var(--${n.prefix}theme-${ce}))${$}`],n.scope),Pu(te,`.${F}border-${ce}`,[`--${n.prefix}border-color: var(--${n.prefix}theme-${ce})`],n.scope));z.push(...Y,...te)}return z.map((Y,te)=>te===0?Y:`    ${Y}`).join("")}),C=Me(()=>n.isDisabled?void 0:`${n.prefix}theme--${f.value}`),w=Me(()=>Object.keys(d.value));if(JD){let $=function(){c.value=z.matches?"dark":"light"};const z=window.matchMedia("(prefers-color-scheme: dark)");$(),z.addEventListener("change",$,{passive:!0}),AC()&&hr(()=>{z.removeEventListener("change",$)})}function T(z){if(n.isDisabled)return;const $=z._context.provides.usehead;if($){let F=function(){return{style:[{textContent:b.value,id:n.stylesheetId,nonce:n.cspNonce||!1}]}};if($.push){const H=$.push(F);Yn&&Ot(b,()=>{H.patch(F)})}else Yn?($.addHeadObjs(Me(F)),Ri(()=>$.updateDOM())):$.addHeadObjs(F())}else{let F=function(){XL(n.stylesheetId,n.cspNonce,b.value)};Yn?Ot(b,F,{immediate:!0}):F()}}function A(z){w.value.includes(z)&&(f.value=z)}function P(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.value;const $=z.indexOf(f.value),F=$===-1?0:($+1)%z.length;A(z[F])}function R(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];P(z)}const O=new Proxy(f,{get(z,$){return Reflect.get(z,$)},set(z,$,F){return $==="value"&&iT(`theme.global.name.value = ${F}`,`theme.change('${F}')`),Reflect.set(z,$,F)}});return{install:T,change:A,cycle:P,toggle:R,isDisabled:n.isDisabled,name:f,themes:s,current:a,computedThemes:d,prefix:n.prefix,themeClasses:C,styles:b,global:{name:O,current:a}}}function Jn(e){ji("provideTheme");const n=bn(qf,null);if(!n)throw new Error("Could not find Vuetify theme injection");const r=Me(()=>e.theme??n.name.value),s=Me(()=>n.themes.value[r.value]),c=Me(()=>n.isDisabled?void 0:`${n.prefix}theme--${r.value}`),f={...n,name:r,current:s,themeClasses:c};return ri(qf,f),f}function c0(){ji("useTheme");const e=bn(qf,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function vs(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const r=gg(),s=et();if(Yn){const c=new ResizeObserver(f=>{e==null||e(f,c),f.length&&(n==="content"?s.value=f[0].contentRect:s.value=f[0].target.getBoundingClientRect())});Vr(()=>{c.disconnect()}),Ot(()=>r.el,(f,d)=>{d&&(c.unobserve(d),s.value=void 0),f&&c.observe(f)},{flush:"post"})}return{resizeRef:r,contentRect:Ud(s)}}const Wf=Symbol.for("vuetify:layout"),kT=Symbol.for("vuetify:layout-item"),sS=1e3,TT=Ue({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Ju=Ue({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function PT(){const e=bn(Wf);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Qu(e){const n=bn(Wf);if(!n)throw new Error("[Vuetify] Could not find injected layout");const r=e.id??`layout-item-${va()}`,s=ji("useLayoutItem");ri(kT,{id:r});const c=Dt(!1);jb(()=>c.value=!0),ck(()=>c.value=!1);const{layoutItemStyles:f,layoutItemScrimStyles:d}=n.register(s,{...e,active:ne(()=>c.value?!1:e.active.value),id:r});return Vr(()=>n.unregister(r)),{layoutItemStyles:f,layoutRect:n.layoutRect,layoutItemScrimStyles:d}}const ez=(e,n,r,s)=>{let c={top:0,left:0,right:0,bottom:0};const f=[{id:"",layer:{...c}}];for(const d of e){const a=n.get(d),b=r.get(d),C=s.get(d);if(!a||!b||!C)continue;const w={...c,[a.value]:parseInt(c[a.value],10)+(C.value?parseInt(b.value,10):0)};f.push({id:d,layer:w}),c=w}return f};function IT(e){const n=bn(Wf,null),r=ne(()=>n?n.rootZIndex.value-100:sS),s=et([]),c=wr(new Map),f=wr(new Map),d=wr(new Map),a=wr(new Map),b=wr(new Map),{resizeRef:C,contentRect:w}=vs(),T=ne(()=>{const Q=new Map,ce=e.overlaps??[];for(const oe of ce.filter(he=>he.includes(":"))){const[he,pe]=oe.split(":");if(!s.value.includes(he)||!s.value.includes(pe))continue;const _e=c.get(he),ae=c.get(pe),be=f.get(he),je=f.get(pe);!_e||!ae||!be||!je||(Q.set(pe,{position:_e.value,amount:parseInt(be.value,10)}),Q.set(he,{position:ae.value,amount:-parseInt(je.value,10)}))}return Q}),A=ne(()=>{const Q=[...new Set([...d.values()].map(oe=>oe.value))].sort((oe,he)=>oe-he),ce=[];for(const oe of Q){const he=s.value.filter(pe=>{var _e;return((_e=d.get(pe))==null?void 0:_e.value)===oe});ce.push(...he)}return ez(ce,c,f,a)}),P=ne(()=>!Array.from(b.values()).some(Q=>Q.value)),R=ne(()=>A.value[A.value.length-1].layer),O=Me(()=>({"--v-layout-left":Gt(R.value.left),"--v-layout-right":Gt(R.value.right),"--v-layout-top":Gt(R.value.top),"--v-layout-bottom":Gt(R.value.bottom),...P.value?void 0:{transition:"none"}})),z=ne(()=>A.value.slice(1).map((Q,ce)=>{let{id:oe}=Q;const{layer:he}=A.value[ce],pe=f.get(oe),_e=c.get(oe);return{id:oe,...he,size:Number(pe.value),position:_e.value}})),$=Q=>z.value.find(ce=>ce.id===Q),F=ji("createLayout"),H=Dt(!1);zi(()=>{H.value=!0}),ri(Wf,{register:(Q,ce)=>{let{id:oe,order:he,position:pe,layoutSize:_e,elementSize:ae,active:be,disableTransitions:je,absolute:Ve}=ce;d.set(oe,he),c.set(oe,pe),f.set(oe,_e),a.set(oe,be),je&&b.set(oe,je);const Ke=Sd(kT,F==null?void 0:F.vnode).indexOf(Q);Ke>-1?s.value.splice(Ke,0,oe):s.value.push(oe);const mt=ne(()=>z.value.findIndex(Ie=>Ie.id===oe)),ft=ne(()=>r.value+A.value.length*2-mt.value*2),ze=ne(()=>{const Ie=pe.value==="left"||pe.value==="right",Qe=pe.value==="right",jt=pe.value==="bottom",Tt=ae.value??_e.value,xt=Tt===0?"%":"px",Re={[pe.value]:0,zIndex:ft.value,transform:`translate${Ie?"X":"Y"}(${(be.value?0:-(Tt===0?100:Tt))*(Qe||jt?-1:1)}${xt})`,position:Ve.value||r.value!==sS?"absolute":"fixed",...P.value?void 0:{transition:"none"}};if(!H.value)return Re;const vt=z.value[mt.value];if(!vt)throw new Error(`[Vuetify] Could not find layout item "${oe}"`);const st=T.value.get(oe);return st&&(vt[st.position]+=st.amount),{...Re,height:Ie?`calc(100% - ${vt.top}px - ${vt.bottom}px)`:ae.value?`${ae.value}px`:void 0,left:Qe?void 0:`${vt.left}px`,right:Qe?`${vt.right}px`:void 0,top:pe.value!=="bottom"?`${vt.top}px`:void 0,bottom:pe.value!=="top"?`${vt.bottom}px`:void 0,width:Ie?ae.value?`${ae.value}px`:void 0:`calc(100% - ${vt.left}px - ${vt.right}px)`}}),Se=ne(()=>({zIndex:ft.value-1}));return{layoutItemStyles:ze,layoutItemScrimStyles:Se,zIndex:ft}},unregister:Q=>{d.delete(Q),c.delete(Q),f.delete(Q),a.delete(Q),b.delete(Q),s.value=s.value.filter(ce=>ce!==Q)},mainRect:R,mainStyles:O,getLayoutItem:$,items:z,layoutRect:w,rootZIndex:r});const Y=Me(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),te=Me(()=>({zIndex:n?r.value:void 0,position:n?"relative":void 0,overflow:n?"hidden":void 0}));return{layoutClasses:Y,layoutStyles:te,getLayoutItem:$,items:z,layoutRect:w,layoutRef:C}}function AT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:n,...r}=e,s=ta(n,r),{aliases:c={},components:f={},directives:d={}}=s,a=Md();return a.run(()=>{const b=zR(s.defaults),C=zL(s.display,s.ssr),w=QL(s.theme),T=GL(s.icons),A=WR(s.locale),P=DL(s.date,A),R=BL(s.goTo,A);function O($){for(const H in d)$.directive(H,d[H]);for(const H in f)$.component(H,f[H]);for(const H in c)$.component(H,ja({...c[H],name:H,aliasName:c[H].name}));const F=Md();if(F.run(()=>{w.install($)}),$.onUnmount(()=>F.stop()),$.provide(zd,b),$.provide(V_,C),$.provide(qf,w),$.provide(B_,T),$.provide(Vd,A),$.provide(xT,P.options),$.provide(J1,P.instance),$.provide(ST,R),Yn&&s.ssr)if($.$nuxt)$.$nuxt.hook("app:suspense:resolve",()=>{C.update()});else{const{mount:H}=$;$.mount=function(){const Y=H(...arguments);return Dn(()=>C.update()),$.mount=H,Y}}$.mixin({computed:{$vuetify(){return wr({defaults:ld.call(this,zd),display:ld.call(this,V_),theme:ld.call(this,qf),icons:ld.call(this,B_),locale:ld.call(this,Vd),date:ld.call(this,J1)})}}})}function z(){a.stop()}return{install:O,unmount:z,defaults:b,display:C,theme:w,icons:T,locale:A,date:P,goTo:R}})}const tz="3.9.0";AT.version=tz;function ld(e){var s,c;const n=this.$,r=((s=n.parent)==null?void 0:s.provides)??((c=n.vnode.appContext)==null?void 0:c.provides);if(r&&e in r)return r[e]}const nz=Ue({...Zt(),...TT({fullHeight:!0}),...Un()},"VApp"),iz=ht()({name:"VApp",props:nz(),setup(e,n){let{slots:r}=n;const s=Jn(e),{layoutClasses:c,getLayoutItem:f,items:d,layoutRef:a}=IT(e),{rtlClasses:b}=tr();return _t(()=>{var C;return X("div",{ref:a,class:gt(["v-application",s.themeClasses.value,c.value,b.value,e.class]),style:Bt([e.style])},[X("div",{class:"v-application__wrap"},[(C=r.default)==null?void 0:C.call(r)])])}),{getLayoutItem:f,items:d,theme:s}}}),xn=Ue({tag:{type:[String,Object,Function],default:"div"}},"tag"),ET=Ue({text:String,...Zt(),...xn()},"VToolbarTitle"),d0=ht()({name:"VToolbarTitle",props:ET(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=!!(r.default||r.text||e.text);return U(e.tag,{class:gt(["v-toolbar-title",e.class]),style:Bt(e.style)},{default:()=>{var c;return[s&&X("div",{class:"v-toolbar-title__placeholder"},[r.text?r.text():e.text,(c=r.default)==null?void 0:c.call(r)])]}})}),{}}}),rz=Ue({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Na(e,n,r){return ht()({name:e,props:rz({mode:r,origin:n}),setup(s,c){let{slots:f}=c;const d={onBeforeEnter(a){s.origin&&(a.style.transformOrigin=s.origin)},onLeave(a){if(s.leaveAbsolute){const{offsetTop:b,offsetLeft:C,offsetWidth:w,offsetHeight:T}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${b}px`,a.style.left=`${C}px`,a.style.width=`${w}px`,a.style.height=`${T}px`}s.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(s.leaveAbsolute&&(a!=null&&a._transitionInitialStyles)){const{position:b,top:C,left:w,width:T,height:A}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=b||"",a.style.top=C||"",a.style.left=w||"",a.style.width=T||"",a.style.height=A||""}}};return()=>{const a=s.group?Kb:kl;return bs(a,{name:s.disabled?"":e,css:!s.disabled,...s.group?void 0:{mode:s.mode},...s.disabled?{}:d},f.default)}}})}function MT(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return ht()({name:e,props:{mode:{type:String,default:r},disabled:Boolean,group:Boolean},setup(s,c){let{slots:f}=c;const d=s.group?Kb:kl;return()=>bs(d,{name:s.disabled?"":e,css:!s.disabled,...s.disabled?{}:n},f.default)}})}function DT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",s=ga(`offset-${r}`);return{onBeforeEnter(d){d._parent=d.parentNode,d._initialStyle={transition:d.style.transition,overflow:d.style.overflow,[r]:d.style[r]}},onEnter(d){const a=d._initialStyle;if(!a)return;d.style.setProperty("transition","none","important"),d.style.overflow="hidden";const b=`${d[s]}px`;d.style[r]="0",d.offsetHeight,d.style.transition=a.transition,e&&d._parent&&d._parent.classList.add(e),requestAnimationFrame(()=>{d.style[r]=b})},onAfterEnter:f,onEnterCancelled:f,onLeave(d){d._initialStyle={transition:"",overflow:d.style.overflow,[r]:d.style[r]},d.style.overflow="hidden",d.style[r]=`${d[s]}px`,d.offsetHeight,requestAnimationFrame(()=>d.style[r]="0")},onAfterLeave:c,onLeaveCancelled:c};function c(d){e&&d._parent&&d._parent.classList.remove(e),f(d)}function f(d){if(!d._initialStyle)return;const a=d._initialStyle[r];d.style.overflow=d._initialStyle.overflow,a!=null&&(d.style[r]=a),delete d._initialStyle}}const az=Ue({target:[Object,Array]},"v-dialog-transition"),Wy=new WeakMap,Ug=ht()({name:"VDialogTransition",props:az(),setup(e,n){let{slots:r}=n;const s={onBeforeEnter(c){c.style.pointerEvents="none",c.style.visibility="hidden"},async onEnter(c,f){var P;await new Promise(R=>requestAnimationFrame(R)),await new Promise(R=>requestAnimationFrame(R)),c.style.visibility="";const d=lS(e.target,c),{x:a,y:b,sx:C,sy:w,speed:T}=d;Wy.set(c,d);const A=zu(c,[{transform:`translate(${a}px, ${b}px) scale(${C}, ${w})`,opacity:0},{}],{duration:225*T,easing:FR});(P=oS(c))==null||P.forEach(R=>{zu(R,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*T,easing:Hf})}),A.finished.then(()=>f())},onAfterEnter(c){c.style.removeProperty("pointer-events")},onBeforeLeave(c){c.style.pointerEvents="none"},async onLeave(c,f){var P;await new Promise(R=>requestAnimationFrame(R));let d;!Wy.has(c)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?d=lS(e.target,c):d=Wy.get(c);const{x:a,y:b,sx:C,sy:w,speed:T}=d;zu(c,[{},{transform:`translate(${a}px, ${b}px) scale(${C}, ${w})`,opacity:0}],{duration:125*T,easing:$R}).finished.then(()=>f()),(P=oS(c))==null||P.forEach(R=>{zu(R,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*T,easing:Hf})})},onAfterLeave(c){c.style.removeProperty("pointer-events")}};return()=>e.target?U(kl,lt({name:"dialog-transition"},s,{css:!1}),r):U(kl,{name:"dialog-transition"},r)}});function oS(e){var r;const n=(r=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:r.children;return n&&[...n]}function lS(e,n){const r=nT(e),s=e0(n),[c,f]=getComputedStyle(n).transformOrigin.split(" ").map($=>parseFloat($)),[d,a]=getComputedStyle(n).getPropertyValue("--v-overlay-anchor-origin").split(" ");let b=r.left+r.width/2;d==="left"||a==="left"?b-=r.width/2:(d==="right"||a==="right")&&(b+=r.width/2);let C=r.top+r.height/2;d==="top"||a==="top"?C-=r.height/2:(d==="bottom"||a==="bottom")&&(C+=r.height/2);const w=r.width/s.width,T=r.height/s.height,A=Math.max(1,w,T),P=w/A||0,R=T/A||0,O=s.width*s.height/(window.innerWidth*window.innerHeight),z=O>.12?Math.min(1.5,(O-.12)*10+1):1;return{x:b-(c+s.left),y:C-(f+s.top),sx:P,sy:R,speed:z}}const sz=Na("fab-transition","center center","out-in"),oz=Na("dialog-bottom-transition"),lz=Na("dialog-top-transition"),Zf=Na("fade-transition"),h0=Na("scale-transition"),uz=Na("scroll-x-transition"),cz=Na("scroll-x-reverse-transition"),dz=Na("scroll-y-transition"),hz=Na("scroll-y-reverse-transition"),fz=Na("slide-x-transition"),mz=Na("slide-x-reverse-transition"),f0=Na("slide-y-transition"),pz=Na("slide-y-reverse-transition"),Gg=MT("expand-transition",DT()),m0=MT("expand-x-transition",DT("",!0)),gz=Ue({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Sn=ht(!1)({name:"VDefaultsProvider",props:gz(),setup(e,n){let{slots:r}=n;const{defaults:s,disabled:c,reset:f,root:d,scoped:a}=Gd(e);return Li(s,{reset:f,root:d,scoped:a,disabled:c}),()=>{var b;return(b=r.default)==null?void 0:b.call(r)}}}),Zi=Ue({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Ki(e){return{dimensionStyles:ne(()=>{const r={},s=Gt(e.height),c=Gt(e.maxHeight),f=Gt(e.maxWidth),d=Gt(e.minHeight),a=Gt(e.minWidth),b=Gt(e.width);return s!=null&&(r.height=s),c!=null&&(r.maxHeight=c),f!=null&&(r.maxWidth=f),d!=null&&(r.minHeight=d),a!=null&&(r.minWidth=a),b!=null&&(r.width=b),r})}}function vz(e){return{aspectStyles:ne(()=>{const n=Number(e.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const RT=Ue({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Zt(),...Zi()},"VResponsive"),F_=ht()({name:"VResponsive",props:RT(),setup(e,n){let{slots:r}=n;const{aspectStyles:s}=vz(e),{dimensionStyles:c}=Ki(e);return _t(()=>{var f;return X("div",{class:gt(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Bt([c.value,e.style])},[X("div",{class:"v-responsive__sizer",style:Bt(s.value)},null),(f=r.additional)==null?void 0:f.call(r),r.default&&X("div",{class:gt(["v-responsive__content",e.contentClass])},[r.default()])])}),{}}});function p0(e){return Qb(()=>{const n=Us(e),r=[],s={};if(n.background)if(E_(n.background)){if(s.backgroundColor=n.background,!n.text&&PR(n.background)){const c=Fa(n.background);if(c.a==null||c.a===1){const f=hT(c);s.color=f,s.caretColor=f}}}else r.push(`bg-${n.background}`);return n.text&&(E_(n.text)?(s.color=n.text,s.caretColor=n.text):r.push(`text-${n.text}`)),{colorClasses:r,colorStyles:s}})}function zr(e){const{colorClasses:n,colorStyles:r}=p0(()=>({text:Us(e)}));return{textColorClasses:n,textColorStyles:r}}function ti(e){const{colorClasses:n,colorStyles:r}=p0(()=>({background:Us(e)}));return{backgroundColorClasses:n,backgroundColorStyles:r}}const vi=Ue({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Vi(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{roundedClasses:ne(()=>{const s=er(e)?e.value:e.rounded,c=er(e)?e.value:e.tile,f=[];if(s===!0||s==="")f.push(`${n}--rounded`);else if(typeof s=="string"||s===0)for(const d of String(s).split(" "))f.push(`rounded-${d}`);else(c||s===!1)&&f.push("rounded-0");return f})}}const ws=Ue({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),na=(e,n)=>{let{slots:r}=n;const{transition:s,disabled:c,group:f,...d}=e,{component:a=f?Kb:kl,...b}=Uf(s)?s:{};let C;return Uf(s)?C=lt(b,uR({disabled:c,group:f}),d):C=lt({name:c||!s?"":s},d),bs(a,C,r)};function yz(e,n){if(!Yb)return;const r=n.modifiers||{},s=n.value,{handler:c,options:f}=typeof s=="object"?s:{handler:s,options:{}},d=new IntersectionObserver(function(){var T;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=arguments.length>1?arguments[1]:void 0;const C=(T=e._observe)==null?void 0:T[n.instance.$.uid];if(!C)return;const w=a.some(A=>A.isIntersecting);c&&(!r.quiet||C.init)&&(!r.once||w||C.init)&&c(w,a,b),w&&r.once?LT(e,n):C.init=!0},f);e._observe=Object(e._observe),e._observe[n.instance.$.uid]={init:!1,observer:d},d.observe(e)}function LT(e,n){var s;const r=(s=e._observe)==null?void 0:s[n.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[n.instance.$.uid])}const Co={mounted:yz,unmounted:LT},zT=Ue({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...RT(),...Zt(),...vi(),...ws()},"VImg"),ko=ht()({name:"VImg",directives:{vIntersect:Co},props:zT(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{roundedClasses:d}=Vi(e),a=ji("VImg"),b=Dt(""),C=et(),w=Dt(e.eager?"loading":"idle"),T=Dt(),A=Dt(),P=ne(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),R=ne(()=>P.value.aspect||T.value/A.value||0);Ot(()=>e.src,()=>{O(w.value!=="idle")}),Ot(R,(ae,be)=>{!ae&&be&&C.value&&Y(C.value)}),Hd(()=>O());function O(ae){if(!(e.eager&&ae)&&!(Yb&&!ae&&!e.eager)){if(w.value="loading",P.value.lazySrc){const be=new Image;be.src=P.value.lazySrc,Y(be,null)}P.value.src&&Dn(()=>{var be;r("loadstart",((be=C.value)==null?void 0:be.currentSrc)||P.value.src),setTimeout(()=>{var je;if(!a.isUnmounted)if((je=C.value)!=null&&je.complete){if(C.value.naturalWidth||$(),w.value==="error")return;R.value||Y(C.value,null),w.value==="loading"&&z()}else R.value||Y(C.value),F()})})}}function z(){var ae;a.isUnmounted||(F(),Y(C.value),w.value="loaded",r("load",((ae=C.value)==null?void 0:ae.currentSrc)||P.value.src))}function $(){var ae;a.isUnmounted||(w.value="error",r("error",((ae=C.value)==null?void 0:ae.currentSrc)||P.value.src))}function F(){const ae=C.value;ae&&(b.value=ae.currentSrc||ae.src)}let H=-1;Vr(()=>{clearTimeout(H)});function Y(ae){let be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const je=()=>{if(clearTimeout(H),a.isUnmounted)return;const{naturalHeight:Ve,naturalWidth:Fe}=ae;Ve||Fe?(T.value=Fe,A.value=Ve):!ae.complete&&w.value==="loading"&&be!=null?H=window.setTimeout(je,be):(ae.currentSrc.endsWith(".svg")||ae.currentSrc.startsWith("data:image/svg+xml"))&&(T.value=1,A.value=1)};je()}const te=Me(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),Q=()=>{var je;if(!P.value.src||w.value==="idle")return null;const ae=X("img",{class:gt(["v-img__img",te.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:P.value.src,srcset:P.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:C,onLoad:z,onError:$},null),be=(je=s.sources)==null?void 0:je.call(s);return U(na,{transition:e.transition,appear:!0},{default:()=>[Di(be?X("picture",{class:"v-img__picture"},[be,ae]):ae,[[xs,w.value==="loaded"]])]})},ce=()=>U(na,{transition:e.transition},{default:()=>[P.value.lazySrc&&w.value!=="loaded"&&X("img",{class:gt(["v-img__img","v-img__img--preload",te.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:P.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),oe=()=>s.placeholder?U(na,{transition:e.transition,appear:!0},{default:()=>[(w.value==="loading"||w.value==="error"&&!s.error)&&X("div",{class:"v-img__placeholder"},[s.placeholder()])]}):null,he=()=>s.error?U(na,{transition:e.transition,appear:!0},{default:()=>[w.value==="error"&&X("div",{class:"v-img__error"},[s.error()])]}):null,pe=()=>e.gradient?X("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,_e=Dt(!1);{const ae=Ot(R,be=>{be&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{_e.value=!0})}),ae())})}return _t(()=>{const ae=F_.filterProps(e);return Di(U(F_,lt({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!_e.value},c.value,d.value,e.class],style:[{width:Gt(e.width==="auto"?T.value:e.width)},f.value,e.style]},ae,{aspectRatio:R.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>X(Wt,null,[U(Q,null,null),U(ce,null,null),U(pe,null,null),U(oe,null,null),U(he,null,null)]),default:s.default}),[[Co,{handler:O,options:e.options},null,{once:!0}]])}),{currentSrc:b,image:C,state:w,naturalWidth:T,naturalHeight:A}}}),ya=Ue({border:[Boolean,Number,String]},"border");function Ta(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{borderClasses:ne(()=>{const s=e.border;return s===!0||s===""?`${n}--border`:typeof s=="string"||s===0?String(s).split(" ").map(c=>`border-${c}`):[]})}}const nr=Ue({elevation:{type:[Number,String],validator(e){const n=parseInt(e);return!isNaN(n)&&n>=0&&n<=24}}},"elevation");function kr(e){return{elevationClasses:Me(()=>{const r=er(e)?e.value:e.elevation;return r==null?[]:[`elevation-${r}`]})}}const _z=[null,"prominent","default","comfortable","compact"],VT=Ue({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>_z.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ya(),...Zt(),...nr(),...vi(),...xn({tag:"header"}),...Un()},"VToolbar"),$_=ht()({name:"VToolbar",props:VT(),setup(e,n){var P;let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color),{borderClasses:f}=Ta(e),{elevationClasses:d}=kr(e),{roundedClasses:a}=Vi(e),{themeClasses:b}=Jn(e),{rtlClasses:C}=tr(),w=Dt(e.extended===null?!!((P=r.extension)!=null&&P.call(r)):e.extended),T=ne(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),A=ne(()=>w.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Li({VBtn:{variant:"text"}}),_t(()=>{var $;const R=!!(e.title||r.title),O=!!(r.image||e.image),z=($=r.extension)==null?void 0:$.call(r);return w.value=e.extended===null?!!z:e.extended,U(e.tag,{class:gt(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},s.value,f.value,d.value,a.value,b.value,C.value,e.class]),style:Bt([c.value,e.style])},{default:()=>[O&&X("div",{key:"image",class:"v-toolbar__image"},[r.image?U(Sn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):U(ko,{key:"image-img",cover:!0,src:e.image},null)]),U(Sn,{defaults:{VTabs:{height:Gt(T.value)}}},{default:()=>{var F,H,Y;return[X("div",{class:"v-toolbar__content",style:{height:Gt(T.value)}},[r.prepend&&X("div",{class:"v-toolbar__prepend"},[(F=r.prepend)==null?void 0:F.call(r)]),R&&U(d0,{key:"title",text:e.title},{text:r.title}),(H=r.default)==null?void 0:H.call(r),r.append&&X("div",{class:"v-toolbar__append"},[(Y=r.append)==null?void 0:Y.call(r)])])]}}),U(Sn,{defaults:{VTabs:{height:Gt(A.value)}}},{default:()=>[U(Gg,null,{default:()=>[w.value&&X("div",{class:"v-toolbar__extension",style:{height:Gt(A.value)}},[z])]})]})]})}),{contentHeight:T,extensionHeight:A}}}),bz=Ue({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function xz(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:r}=n;let s=0,c=0;const f=et(null),d=Dt(0),a=Dt(0),b=Dt(0),C=Dt(!1),w=Dt(!1),T=ne(()=>Number(e.scrollThreshold)),A=ne(()=>ci((T.value-d.value)/T.value||0)),P=()=>{const R=f.value;if(!R||r&&!r.value)return;s=d.value,d.value="window"in R?R.pageYOffset:R.scrollTop;const O=R instanceof Window?document.documentElement.scrollHeight:R.scrollHeight;if(c!==O){c=O;return}w.value=d.value<s,b.value=Math.abs(d.value-T.value)};return Ot(w,()=>{a.value=a.value||d.value}),Ot(C,()=>{a.value=0}),zi(()=>{Ot(()=>e.scrollTarget,R=>{var z;const O=R?document.querySelector(R):window;O&&O!==f.value&&((z=f.value)==null||z.removeEventListener("scroll",P),f.value=O,f.value.addEventListener("scroll",P,{passive:!0}))},{immediate:!0})}),Vr(()=>{var R;(R=f.value)==null||R.removeEventListener("scroll",P)}),r&&Ot(r,P,{immediate:!0}),{scrollThreshold:T,currentScroll:d,currentThreshold:b,isScrollActive:C,scrollRatio:A,isScrollingUp:w,savedScroll:a}}function ec(){const e=Dt(!1);return zi(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Me(()=>e.value?void 0:{transition:"none !important"}),isBooted:Ud(e)}}const wz=Ue({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...VT(),...Ju(),...bz(),height:{type:[Number,String],default:64}},"VAppBar"),Sz=ht()({name:"VAppBar",props:wz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=et(),c=tn(e,"modelValue"),f=ne(()=>{var H;const F=new Set(((H=e.scrollBehavior)==null?void 0:H.split(" "))??[]);return{hide:F.has("hide"),fullyHide:F.has("fully-hide"),inverted:F.has("inverted"),collapse:F.has("collapse"),elevate:F.has("elevate"),fadeImage:F.has("fade-image")}}),d=ne(()=>{const F=f.value;return F.hide||F.fullyHide||F.inverted||F.collapse||F.elevate||F.fadeImage||!c.value}),{currentScroll:a,scrollThreshold:b,isScrollingUp:C,scrollRatio:w}=xz(e,{canScroll:d}),T=Me(()=>f.value.hide||f.value.fullyHide),A=ne(()=>e.collapse||f.value.collapse&&(f.value.inverted?w.value>0:w.value===0)),P=ne(()=>e.flat||f.value.fullyHide&&!c.value||f.value.elevate&&(f.value.inverted?a.value>0:a.value===0)),R=ne(()=>f.value.fadeImage?f.value.inverted?1-w.value:w.value:void 0),O=ne(()=>{var Y,te;if(f.value.hide&&f.value.inverted)return 0;const F=((Y=s.value)==null?void 0:Y.contentHeight)??0,H=((te=s.value)==null?void 0:te.extensionHeight)??0;return T.value?a.value<b.value||f.value.fullyHide?F+H:F:F+H});ia(()=>!!e.scrollBehavior,()=>{Ri(()=>{T.value?f.value.inverted?c.value=a.value>b.value:c.value=C.value||a.value<b.value:c.value=!0})});const{ssrBootStyles:z}=ec(),{layoutItemStyles:$}=Qu({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Me(()=>e.location),layoutSize:O,elementSize:Dt(void 0),active:c,absolute:Me(()=>e.absolute)});return _t(()=>{const F=$_.filterProps(e);return U($_,lt({ref:s,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...$.value,"--v-toolbar-image-opacity":R.value,height:void 0,...z.value},e.style]},F,{collapse:A.value,flat:P.value}),r)}),{}}}),Cz=[null,"default","comfortable","compact"],fr=Ue({density:{type:String,default:"default",validator:e=>Cz.includes(e)}},"density");function aa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{densityClasses:Me(()=>`${n}--density-${e.density}`)}}const kz=["elevated","flat","tonal","outlined","text","plain"];function El(e,n){return X(Wt,null,[e&&X("span",{key:"overlay",class:gt(`${n}__overlay`)},null),X("span",{key:"underlay",class:gt(`${n}__underlay`)},null)])}const es=Ue({color:String,variant:{type:String,default:"elevated",validator:e=>kz.includes(e)}},"variant");function tc(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=Me(()=>{const{variant:f}=Us(e);return`${n}--variant-${f}`}),{colorClasses:s,colorStyles:c}=p0(()=>{const{variant:f,color:d}=Us(e);return{[["elevated","flat"].includes(f)?"background":"text"]:d}});return{colorClasses:s,colorStyles:c,variantClasses:r}}const BT=Ue({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...ya(),...Zt(),...fr(),...nr(),...vi(),...xn(),...Un(),...es()},"VBtnGroup"),j_=ht()({name:"VBtnGroup",props:BT(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{densityClasses:c}=aa(e),{borderClasses:f}=Ta(e),{elevationClasses:d}=kr(e),{roundedClasses:a}=Vi(e);Li({VBtn:{height:Me(()=>e.direction==="horizontal"?"auto":null),baseColor:Me(()=>e.baseColor),color:Me(()=>e.color),density:Me(()=>e.density),flat:!0,variant:Me(()=>e.variant)}}),_t(()=>U(e.tag,{class:gt(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},s.value,f.value,c.value,d.value,a.value,e.class]),style:Bt(e.style)},r))}}),nc=Ue({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),ic=Ue({value:null,disabled:Boolean,selectedClass:String},"group-item");function rc(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=ji("useGroupItem");if(!s)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const c=va();ri(Symbol.for(`${n.description}:id`),c);const f=bn(n,null);if(!f){if(!r)return f;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${n.description}`)}const d=Me(()=>e.value),a=ne(()=>!!(f.disabled.value||e.disabled));f.register({id:c,value:d,disabled:a},s),Vr(()=>{f.unregister(c)});const b=ne(()=>f.isSelected(c)),C=ne(()=>f.items.value[0].id===c),w=ne(()=>f.items.value[f.items.value.length-1].id===c),T=ne(()=>b.value&&[f.selectedClass.value,e.selectedClass]);return Ot(b,A=>{s.emit("group:selected",{value:A})},{flush:"sync"}),{id:c,isSelected:b,isFirst:C,isLast:w,toggle:()=>f.select(c,!b.value),select:A=>f.select(c,A),selectedClass:T,value:d,disabled:a,group:f}}function Ml(e,n){let r=!1;const s=wr([]),c=tn(e,"modelValue",[],A=>A==null?[]:OT(s,Mi(A)),A=>{const P=Pz(s,A);return e.multiple?P:P[0]}),f=ji("useGroup");function d(A,P){const R=A,O=Symbol.for(`${n.description}:id`),$=Sd(O,f==null?void 0:f.vnode).indexOf(P);Sr(R.value)==null&&(R.value=$,R.useIndexAsValue=!0),$>-1?s.splice($,0,R):s.push(R)}function a(A){if(r)return;b();const P=s.findIndex(R=>R.id===A);s.splice(P,1)}function b(){const A=s.find(P=>!P.disabled);A&&e.mandatory==="force"&&!c.value.length&&(c.value=[A.id])}zi(()=>{b()}),Vr(()=>{r=!0}),Nb(()=>{for(let A=0;A<s.length;A++)s[A].useIndexAsValue&&(s[A].value=A)});function C(A,P){const R=s.find(O=>O.id===A);if(!(P&&(R!=null&&R.disabled)))if(e.multiple){const O=c.value.slice(),z=O.findIndex(F=>F===A),$=~z;if(P=P??!$,$&&e.mandatory&&O.length<=1||!$&&e.max!=null&&O.length+1>e.max)return;z<0&&P?O.push(A):z>=0&&!P&&O.splice(z,1),c.value=O}else{const O=c.value.includes(A);if(e.mandatory&&O||!O&&!P)return;c.value=P??!O?[A]:[]}}function w(A){if(e.multiple,c.value.length){const P=c.value[0],R=s.findIndex($=>$.id===P);let O=(R+A)%s.length,z=s[O];for(;z.disabled&&O!==R;)O=(O+A)%s.length,z=s[O];if(z.disabled)return;c.value=[s[O].id]}else{const P=s.find(R=>!R.disabled);P&&(c.value=[P.id])}}const T={register:d,unregister:a,selected:c,select:C,disabled:Me(()=>e.disabled),prev:()=>w(s.length-1),next:()=>w(1),isSelected:A=>c.value.includes(A),selectedClass:Me(()=>e.selectedClass),items:Me(()=>s),getItemIndex:A=>Tz(s,A)};return ri(n,T),T}function Tz(e,n){const r=OT(e,[n]);return r.length?e.findIndex(s=>s.id===r[0]):-1}function OT(e,n){const r=[];return n.forEach(s=>{const c=e.find(d=>Rr(s,d.value)),f=e[s];(c==null?void 0:c.value)!=null?r.push(c.id):f!=null&&r.push(f.id)}),r}function Pz(e,n){const r=[];return n.forEach(s=>{const c=e.findIndex(f=>f.id===s);if(~c){const f=e[c];r.push(f.value!=null?f.value:c)}}),r}const g0=Symbol.for("vuetify:v-btn-toggle"),Iz=Ue({...BT(),...nc()},"VBtnToggle"),Az=ht()({name:"VBtnToggle",props:Iz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{isSelected:s,next:c,prev:f,select:d,selected:a}=Ml(e,g0);return _t(()=>{const b=j_.filterProps(e);return U(j_,lt({class:["v-btn-toggle",e.class]},b,{style:e.style}),{default:()=>{var C;return[(C=r.default)==null?void 0:C.call(r,{isSelected:s,next:c,prev:f,select:d,selected:a})]}})}),{next:c,prev:f,select:d}}}),Ez=["x-small","small","default","large","x-large"],Ks=Ue({size:{type:[String,Number],default:"default"}},"size");function qd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return Qb(()=>{const r=e.size;let s,c;return pg(Ez,r)?s=`${n}--size-${r}`:r&&(c={width:Gt(r),height:Gt(r)}),{sizeClasses:s,sizeStyles:c}})}const Mz=Ue({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:an,opacity:[String,Number],...Zt(),...Ks(),...xn({tag:"i"}),...Un()},"VIcon"),Xn=ht()({name:"VIcon",props:Mz(),setup(e,n){let{attrs:r,slots:s}=n;const c=Dt(),{themeClasses:f}=c0(),{iconData:d}=HL(()=>c.value||e.icon),{sizeClasses:a}=qd(e),{textColorClasses:b,textColorStyles:C}=zr(()=>e.color);return _t(()=>{var A,P;const w=(A=s.default)==null?void 0:A.call(s);w&&(c.value=(P=Yk(w).filter(R=>R.type===um&&R.children&&typeof R.children=="string")[0])==null?void 0:P.children);const T=!!(r.onClick||r.onClickOnce);return U(d.value.component,{tag:e.tag,icon:d.value.icon,class:gt(["v-icon","notranslate",f.value,a.value,b.value,{"v-icon--clickable":T,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Bt([{"--v-icon-opacity":e.opacity},a.value?void 0:{fontSize:Gt(e.size),height:Gt(e.size),width:Gt(e.size)},C.value,e.style]),role:T?"button":void 0,"aria-hidden":!T,tabindex:T?e.disabled?-1:0:void 0},{default:()=>[w]})}),{}}});function mm(e,n){const r=et(),s=Dt(!1);if(Yb){const c=new IntersectionObserver(f=>{s.value=!!f.find(d=>d.isIntersecting)},n);hr(()=>{c.disconnect()}),Ot(r,(f,d)=>{d&&(c.unobserve(d),s.value=!1),f&&c.observe(f)},{flush:"post"})}return{intersectionRef:r,isIntersecting:s}}const Dz=Ue({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Zt(),...Ks(),...xn({tag:"div"}),...Un()},"VProgressCircular"),Uu=ht()({name:"VProgressCircular",props:Dz(),setup(e,n){let{slots:r}=n;const s=20,c=2*Math.PI*s,f=et(),{themeClasses:d}=Jn(e),{sizeClasses:a,sizeStyles:b}=qd(e),{textColorClasses:C,textColorStyles:w}=zr(()=>e.color),{textColorClasses:T,textColorStyles:A}=zr(()=>e.bgColor),{intersectionRef:P,isIntersecting:R}=mm(),{resizeRef:O,contentRect:z}=vs(),$=Me(()=>ci(parseFloat(e.modelValue),0,100)),F=Me(()=>Number(e.width)),H=Me(()=>b.value?Number(e.size):z.value?z.value.width:Math.max(F.value,32)),Y=Me(()=>s/(1-F.value/H.value)*2),te=Me(()=>F.value/H.value*Y.value),Q=Me(()=>Gt((100-$.value)/100*c));return Ri(()=>{P.value=f.value,O.value=f.value}),_t(()=>U(e.tag,{ref:f,class:gt(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":R.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},d.value,a.value,C.value,e.class]),style:Bt([b.value,w.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:$.value},{default:()=>[X("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${Y.value} ${Y.value}`},[X("circle",{class:gt(["v-progress-circular__underlay",T.value]),style:Bt(A.value),fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":te.value,"stroke-dasharray":c,"stroke-dashoffset":0},null),X("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":te.value,"stroke-dasharray":c,"stroke-dashoffset":Q.value},null)]),r.default&&X("div",{class:"v-progress-circular__content"},[r.default({value:$.value})])]})),{}}}),uS={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Eo=Ue({location:String},"location");function ac(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2?arguments[2]:void 0;const{isRtl:s}=tr();return{locationStyles:ne(()=>{if(!e.location)return{};const{side:f,align:d}=I_(e.location.split(" ").length>1?e.location:`${e.location} center`,s.value);function a(C){return r?r(C):0}const b={};return f!=="center"&&(n?b[uS[f]]=`calc(100% - ${a(f)}px)`:b[f]=0),d!=="center"?n?b[uS[d]]=`calc(100% - ${a(d)}px)`:b[d]=0:(f==="center"?b.top=b.left="50%":b[{top:"left",bottom:"left",left:"top",right:"top"}[f]]="50%",b.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[f]),b})}}const Rz=Ue({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Zt(),...Eo({location:"top"}),...vi(),...xn(),...Un()},"VProgressLinear"),Hg=ht()({name:"VProgressLinear",props:Rz(),emits:{"update:modelValue":e=>!0},setup(e,n){var _e;let{slots:r}=n;const s=tn(e,"modelValue"),{isRtl:c,rtlClasses:f}=tr(),{themeClasses:d}=Jn(e),{locationStyles:a}=ac(e),{textColorClasses:b,textColorStyles:C}=zr(()=>e.color),{backgroundColorClasses:w,backgroundColorStyles:T}=ti(()=>e.bgColor||e.color),{backgroundColorClasses:A,backgroundColorStyles:P}=ti(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:R,backgroundColorStyles:O}=ti(()=>e.color),{roundedClasses:z}=Vi(e),{intersectionRef:$,isIntersecting:F}=mm(),H=ne(()=>parseFloat(e.max)),Y=ne(()=>parseFloat(e.height)),te=ne(()=>ci(parseFloat(e.bufferValue)/H.value*100,0,100)),Q=ne(()=>ci(parseFloat(s.value)/H.value*100,0,100)),ce=ne(()=>c.value!==e.reverse),oe=ne(()=>e.indeterminate?"fade-transition":"slide-x-transition"),he=Yn&&((_e=window.matchMedia)==null?void 0:_e.call(window,"(forced-colors: active)").matches);function pe(ae){if(!$.value)return;const{left:be,right:je,width:Ve}=$.value.getBoundingClientRect(),Fe=ce.value?Ve-ae.clientX+(je-Ve):ae.clientX-be;s.value=Math.round(Fe/Ve*H.value)}return _t(()=>U(e.tag,{ref:$,class:gt(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&F.value,"v-progress-linear--reverse":ce.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},z.value,d.value,f.value,e.class]),style:Bt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Gt(Y.value):0,"--v-progress-linear-height":Gt(Y.value),...e.absolute?a.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(s.value),H.value),onClick:e.clickable&&pe},{default:()=>[e.stream&&X("div",{key:"stream",class:gt(["v-progress-linear__stream",b.value]),style:{...C.value,[ce.value?"left":"right"]:Gt(-Y.value),borderTop:`${Gt(Y.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${Gt(Y.value/4)})`,width:Gt(100-te.value,"%"),"--v-progress-linear-stream-to":Gt(Y.value*(ce.value?1:-1))}},null),X("div",{class:gt(["v-progress-linear__background",he?void 0:w.value]),style:Bt([T.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),X("div",{class:gt(["v-progress-linear__buffer",he?void 0:A.value]),style:Bt([P.value,{opacity:parseFloat(e.bufferOpacity),width:Gt(te.value,"%")}])},null),U(kl,{name:oe.value},{default:()=>[e.indeterminate?X("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(ae=>X("div",{key:ae,class:gt(["v-progress-linear__indeterminate",ae,he?void 0:R.value]),style:Bt(O.value)},null))]):X("div",{class:gt(["v-progress-linear__determinate",he?void 0:R.value]),style:Bt([O.value,{width:Gt(Q.value,"%")}])},null)]}),r.default&&X("div",{class:"v-progress-linear__content"},[r.default({value:Q.value,buffer:te.value})])]})),{}}}),qg=Ue({loading:[Boolean,String]},"loader");function pm(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{loaderClasses:Me(()=>({[`${n}--loading`]:e.loading}))}}function gm(e,n){var s;let{slots:r}=n;return X("div",{class:gt(`${e.name}__loader`)},[((s=r.default)==null?void 0:s.call(r,{color:e.color,isActive:e.active}))||U(Hg,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const Lz=["static","relative","fixed","absolute","sticky"],Wd=Ue({position:{type:String,validator:e=>Lz.includes(e)}},"position");function Zd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{positionClasses:Me(()=>e.position?`${n}--${e.position}`:void 0)}}function zz(){const e=ji("useRoute");return ne(()=>{var n;return(n=e==null?void 0:e.proxy)==null?void 0:n.$route})}function FT(){var e,n;return(n=(e=ji("useRouter"))==null?void 0:e.proxy)==null?void 0:n.$router}function vm(e,n){var w,T;const r=EM("RouterLink"),s=Me(()=>!!(e.href||e.to)),c=ne(()=>(s==null?void 0:s.value)||R1(n,"click")||R1(e,"click"));if(typeof r=="string"||!("useLink"in r)){const A=Me(()=>e.href);return{isLink:s,isClickable:c,href:A,linkProps:wr({href:A})}}const f=r.useLink({to:Me(()=>e.to||""),replace:Me(()=>e.replace)}),d=ne(()=>e.to?f:void 0),a=zz(),b=ne(()=>{var A,P,R;return d.value?e.exact?a.value?((R=d.value.isExactActive)==null?void 0:R.value)&&Rr(d.value.route.value.query,a.value.query):((P=d.value.isExactActive)==null?void 0:P.value)??!1:((A=d.value.isActive)==null?void 0:A.value)??!1:!1}),C=ne(()=>{var A;return e.to?(A=d.value)==null?void 0:A.route.value.href:e.href});return{isLink:s,isClickable:c,isActive:b,route:(w=d.value)==null?void 0:w.route,navigate:(T=d.value)==null?void 0:T.navigate,href:C,linkProps:wr({href:C,"aria-current":Me(()=>b.value?"page":void 0)})}}const ym=Ue({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Zy=!1;function Vz(e,n){let r=!1,s,c;Yn&&(e!=null&&e.beforeEach)&&(Dn(()=>{window.addEventListener("popstate",f),s=e.beforeEach((d,a,b)=>{Zy?r?n(b):b():setTimeout(()=>r?n(b):b()),Zy=!0}),c=e==null?void 0:e.afterEach(()=>{Zy=!1})}),hr(()=>{window.removeEventListener("popstate",f),s==null||s(),c==null||c()}));function f(d){var a;(a=d.state)!=null&&a.replaced||(r=!0,setTimeout(()=>r=!1))}}function Bz(e,n){Ot(()=>{var r;return(r=e.isActive)==null?void 0:r.value},r=>{e.isLink.value&&r!=null&&n&&Dn(()=>{n(r)})},{immediate:!0})}const N_=Symbol("rippleStop"),Oz=80;function cS(e,n){e.style.transform=n,e.style.webkitTransform=n}function U_(e){return e.constructor.name==="TouchEvent"}function $T(e){return e.constructor.name==="KeyboardEvent"}const Fz=function(e,n){var T;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=0,c=0;if(!$T(e)){const A=n.getBoundingClientRect(),P=U_(e)?e.touches[e.touches.length-1]:e;s=P.clientX-A.left,c=P.clientY-A.top}let f=0,d=.3;(T=n._ripple)!=null&&T.circle?(d=.15,f=n.clientWidth/2,f=r.center?f:f+Math.sqrt((s-f)**2+(c-f)**2)/4):f=Math.sqrt(n.clientWidth**2+n.clientHeight**2)/2;const a=`${(n.clientWidth-f*2)/2}px`,b=`${(n.clientHeight-f*2)/2}px`,C=r.center?a:`${s-f}px`,w=r.center?b:`${c-f}px`;return{radius:f,scale:d,x:C,y:w,centerX:a,centerY:b}},xg={show(e,n){var P;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((P=n==null?void 0:n._ripple)!=null&&P.enabled))return;const s=document.createElement("span"),c=document.createElement("span");s.appendChild(c),s.className="v-ripple__container",r.class&&(s.className+=` ${r.class}`);const{radius:f,scale:d,x:a,y:b,centerX:C,centerY:w}=Fz(e,n,r),T=`${f*2}px`;c.className="v-ripple__animation",c.style.width=T,c.style.height=T,n.appendChild(s);const A=window.getComputedStyle(n);A&&A.position==="static"&&(n.style.position="relative",n.dataset.previousPosition="static"),c.classList.add("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--visible"),cS(c,`translate(${a}, ${b}) scale3d(${d},${d},${d})`),c.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{c.classList.remove("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--in"),cS(c,`translate(${C}, ${w}) scale3d(1,1,1)`)})})},hide(e){var f;if(!((f=e==null?void 0:e._ripple)!=null&&f.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const r=n[n.length-1];if(r.dataset.isHiding)return;r.dataset.isHiding="true";const s=performance.now()-Number(r.dataset.activated),c=Math.max(250-s,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),setTimeout(()=>{var a;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((a=r.parentNode)==null?void 0:a.parentNode)===e&&e.removeChild(r.parentNode)},300)},c)}};function jT(e){return typeof e>"u"||!!e}function Kf(e){const n={},r=e.currentTarget;if(!(!(r!=null&&r._ripple)||r._ripple.touched||e[N_])){if(e[N_]=!0,U_(e))r._ripple.touched=!0,r._ripple.isTouch=!0;else if(r._ripple.isTouch)return;if(n.center=r._ripple.centered||$T(e),r._ripple.class&&(n.class=r._ripple.class),U_(e)){if(r._ripple.showTimerCommit)return;r._ripple.showTimerCommit=()=>{xg.show(e,r,n)},r._ripple.showTimer=window.setTimeout(()=>{var s;(s=r==null?void 0:r._ripple)!=null&&s.showTimerCommit&&(r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null)},Oz)}else xg.show(e,r,n)}}function dS(e){e[N_]=!0}function Va(e){const n=e.currentTarget;if(n!=null&&n._ripple){if(window.clearTimeout(n._ripple.showTimer),e.type==="touchend"&&n._ripple.showTimerCommit){n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null,n._ripple.showTimer=window.setTimeout(()=>{Va(e)});return}window.setTimeout(()=>{n._ripple&&(n._ripple.touched=!1)}),xg.hide(n)}}function NT(e){const n=e.currentTarget;n!=null&&n._ripple&&(n._ripple.showTimerCommit&&(n._ripple.showTimerCommit=null),window.clearTimeout(n._ripple.showTimer))}let Yf=!1;function hS(e,n){!Yf&&n.includes(e.keyCode)&&(Yf=!0,Kf(e))}function UT(e){Yf=!1,Va(e)}function GT(e){Yf&&(Yf=!1,Va(e))}function HT(e,n,r){const{value:s,modifiers:c}=n,f=jT(s);f||xg.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=f,e._ripple.centered=c.center,e._ripple.circle=c.circle;const d=Uf(s)?s:{};d.class&&(e._ripple.class=d.class);const a=d.keys??[S_.enter,S_.space];if(e._ripple.keyDownHandler=b=>hS(b,a),f&&!r){if(c.stop){e.addEventListener("touchstart",dS,{passive:!0}),e.addEventListener("mousedown",dS);return}e.addEventListener("touchstart",Kf,{passive:!0}),e.addEventListener("touchend",Va,{passive:!0}),e.addEventListener("touchmove",NT,{passive:!0}),e.addEventListener("touchcancel",Va),e.addEventListener("mousedown",Kf),e.addEventListener("mouseup",Va),e.addEventListener("mouseleave",Va),e.addEventListener("keydown",b=>hS(b,a)),e.addEventListener("keyup",UT),e.addEventListener("blur",GT),e.addEventListener("dragstart",Va,{passive:!0})}else!f&&r&&qT(e)}function qT(e){var n;e.removeEventListener("mousedown",Kf),e.removeEventListener("touchstart",Kf),e.removeEventListener("touchend",Va),e.removeEventListener("touchmove",NT),e.removeEventListener("touchcancel",Va),e.removeEventListener("mouseup",Va),e.removeEventListener("mouseleave",Va),(n=e._ripple)!=null&&n.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",UT),e.removeEventListener("dragstart",Va),e.removeEventListener("blur",GT)}function $z(e,n){HT(e,n,!1)}function jz(e){qT(e),delete e._ripple}function Nz(e,n){if(n.value===n.oldValue)return;const r=jT(n.oldValue);HT(e,n,r)}const ra={mounted:$z,unmounted:jz,updated:Nz},Wg=Ue({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:g0},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:an,appendIcon:an,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...ya(),...Zt(),...fr(),...Zi(),...nr(),...ic(),...qg(),...Eo(),...Wd(),...vi(),...ym(),...Ks(),...xn({tag:"button"}),...Un(),...es({variant:"elevated"})},"VBtn"),Mn=ht()({name:"VBtn",props:Wg(),emits:{"group:selected":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Jn(e),{borderClasses:f}=Ta(e),{densityClasses:d}=aa(e),{dimensionStyles:a}=Ki(e),{elevationClasses:b}=kr(e),{loaderClasses:C}=pm(e),{locationStyles:w}=ac(e),{positionClasses:T}=Zd(e),{roundedClasses:A}=Vi(e),{sizeClasses:P,sizeStyles:R}=qd(e),O=rc(e,e.symbol,!1),z=vm(e,r),$=ne(()=>{var _e;return e.active!==void 0?e.active:z.isLink.value?(_e=z.isActive)==null?void 0:_e.value:O==null?void 0:O.isSelected.value}),F=Me(()=>$.value?e.activeColor??e.color:e.color),H=ne(()=>{var ae,be;return{color:(O==null?void 0:O.isSelected.value)&&(!z.isLink.value||((ae=z.isActive)==null?void 0:ae.value))||!O||((be=z.isActive)==null?void 0:be.value)?F.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:Y,colorStyles:te,variantClasses:Q}=tc(H),ce=ne(()=>(O==null?void 0:O.disabled.value)||e.disabled),oe=Me(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),he=ne(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function pe(_e){var ae;ce.value||z.isLink.value&&(_e.metaKey||_e.ctrlKey||_e.shiftKey||_e.button!==0||r.target==="_blank")||((ae=z.navigate)==null||ae.call(z,_e),O==null||O.toggle())}return Bz(z,O==null?void 0:O.select),_t(()=>{const _e=z.isLink.value?"a":e.tag,ae=!!(e.prependIcon||s.prepend),be=!!(e.appendIcon||s.append),je=!!(e.icon&&e.icon!==!0);return Di(U(_e,lt({type:_e==="a"?void 0:"button",class:["v-btn",O==null?void 0:O.selectedClass.value,{"v-btn--active":$.value,"v-btn--block":e.block,"v-btn--disabled":ce.value,"v-btn--elevated":oe.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},c.value,f.value,Y.value,d.value,b.value,C.value,T.value,A.value,P.value,Q.value,e.class],style:[te.value,a.value,w.value,R.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:ce.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:pe,value:he.value},z.linkProps),{default:()=>{var Ve;return[El(!0,"v-btn"),!e.icon&&ae&&X("span",{key:"prepend",class:"v-btn__prepend"},[s.prepend?U(Sn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},s.prepend):U(Xn,{key:"prepend-icon",icon:e.prependIcon},null)]),X("span",{class:"v-btn__content","data-no-activator":""},[!s.default&&je?U(Xn,{key:"content-icon",icon:e.icon},null):U(Sn,{key:"content-defaults",disabled:!je,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var Fe;return[((Fe=s.default)==null?void 0:Fe.call(s))??ei(e.text)]}})]),!e.icon&&be&&X("span",{key:"append",class:"v-btn__append"},[s.append?U(Sn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},s.append):U(Xn,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&X("span",{key:"loader",class:"v-btn__loader"},[((Ve=s.loader)==null?void 0:Ve.call(s))??U(Uu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[ra,!ce.value&&e.ripple,"",{center:!!e.icon}]])}),{group:O}}}),Uz=Ue({...Wg({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Gz=ht()({name:"VAppBarNavIcon",props:Uz(),setup(e,n){let{slots:r}=n;return _t(()=>U(Mn,lt(e,{class:["v-app-bar-nav-icon"]}),r)),{}}}),Hz=ht()({name:"VAppBarTitle",props:ET(),setup(e,n){let{slots:r}=n;return _t(()=>U(d0,lt(e,{class:"v-app-bar-title"}),r)),{}}}),WT=Ao("v-alert-title"),qz=Ue({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Wz(e,n){return{iconSize:ne(()=>{const s=new Map(e.iconSizes),c=e.iconSize??n()??"default";return s.has(c)?s.get(c):c})}}const Zz=["success","info","warning","error"],Kz=Ue({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:an,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Zz.includes(e)},...Zt(),...fr(),...Zi(),...nr(),...qz(),...Eo(),...Wd(),...vi(),...xn(),...Un(),...es({variant:"flat"})},"VAlert"),Yz=ht()({name:"VAlert",props:Kz(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=tn(e,"modelValue"),f=Me(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:d}=Wz(e,()=>e.prominent?44:28),{themeClasses:a}=Jn(e),{colorClasses:b,colorStyles:C,variantClasses:w}=tc(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:T}=aa(e),{dimensionStyles:A}=Ki(e),{elevationClasses:P}=kr(e),{locationStyles:R}=ac(e),{positionClasses:O}=Zd(e),{roundedClasses:z}=Vi(e),{textColorClasses:$,textColorStyles:F}=zr(()=>e.borderColor),{t:H}=gi(),Y=Me(()=>({"aria-label":H(e.closeLabel),onClick(te){c.value=!1,r("click:close",te)}}));return()=>{const te=!!(s.prepend||f.value),Q=!!(s.title||e.title),ce=!!(s.close||e.closable),oe={density:e.density,icon:f.value,size:d.value};return c.value&&U(e.tag,{class:gt(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},a.value,b.value,T.value,P.value,O.value,z.value,w.value,e.class]),style:Bt([C.value,A.value,R.value,e.style]),role:"alert"},{default:()=>{var he,pe;return[El(!1,"v-alert"),e.border&&X("div",{key:"border",class:gt(["v-alert__border",$.value]),style:Bt(F.value)},null),te&&X("div",{key:"prepend",class:"v-alert__prepend"},[s.prepend?U(Sn,{key:"prepend-defaults",disabled:!f.value,defaults:{VIcon:{...oe}}},s.prepend):U(Xn,lt({key:"prepend-icon"},oe),null)]),X("div",{class:"v-alert__content"},[Q&&U(WT,{key:"title"},{default:()=>{var _e;return[((_e=s.title)==null?void 0:_e.call(s))??e.title]}}),((he=s.text)==null?void 0:he.call(s))??e.text,(pe=s.default)==null?void 0:pe.call(s)]),s.append&&X("div",{key:"append",class:"v-alert__append"},[s.append()]),ce&&X("div",{key:"close",class:"v-alert__close"},[s.close?U(Sn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var _e;return[(_e=s.close)==null?void 0:_e.call(s,{props:Y.value})]}}):U(Mn,lt({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},Y.value),null)])]}})}}}),Xz=Ue({start:Boolean,end:Boolean,icon:an,image:String,text:String,...ya(),...Zt(),...fr(),...vi(),...Ks(),...xn(),...Un(),...es({variant:"flat"})},"VAvatar"),Ja=ht()({name:"VAvatar",props:Xz(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{borderClasses:c}=Ta(e),{colorClasses:f,colorStyles:d,variantClasses:a}=tc(e),{densityClasses:b}=aa(e),{roundedClasses:C}=Vi(e),{sizeClasses:w,sizeStyles:T}=qd(e);return _t(()=>U(e.tag,{class:gt(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},s.value,c.value,f.value,b.value,C.value,w.value,a.value,e.class]),style:Bt([d.value,T.value,e.style])},{default:()=>[r.default?U(Sn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[r.default()]}):e.image?U(ko,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?U(Xn,{key:"icon",icon:e.icon},null):e.text,El(!1,"v-avatar")]})),{}}}),Jz=Ue({text:String,onClick:Lr(),...Zt(),...Un()},"VLabel"),Kd=ht()({name:"VLabel",props:Jz(),setup(e,n){let{slots:r}=n;return _t(()=>{var s;return X("label",{class:gt(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Bt(e.style),onClick:e.onClick},[e.text,(s=r.default)==null?void 0:s.call(r)])}),{}}}),ZT=Symbol.for("vuetify:selection-control-group"),v0=Ue({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:an,trueIcon:an,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Rr},...Zt(),...fr(),...Un()},"SelectionControlGroup"),Qz=Ue({...v0({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),KT=ht()({name:"VSelectionControlGroup",props:Qz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),c=va(),f=Me(()=>e.id||`v-selection-control-group-${c}`),d=Me(()=>e.name||f.value),a=new Set;return ri(ZT,{modelValue:s,forceUpdate:()=>{a.forEach(b=>b())},onForceUpdate:b=>{a.add(b),hr(()=>{a.delete(b)})}}),Li({[e.defaultsTarget]:{color:Me(()=>e.color),disabled:Me(()=>e.disabled),density:Me(()=>e.density),error:Me(()=>e.error),inline:Me(()=>e.inline),modelValue:s,multiple:Me(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),name:d,falseIcon:Me(()=>e.falseIcon),trueIcon:Me(()=>e.trueIcon),readonly:Me(()=>e.readonly),ripple:Me(()=>e.ripple),type:Me(()=>e.type),valueComparator:Me(()=>e.valueComparator)}}),_t(()=>{var b;return X("div",{class:gt(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Bt(e.style),role:e.type==="radio"?"radiogroup":void 0},[(b=r.default)==null?void 0:b.call(r)])}),{}}}),Zg=Ue({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Zt(),...v0()},"VSelectionControl");function eV(e){const n=bn(ZT,void 0),{densityClasses:r}=aa(e),s=tn(e,"modelValue"),c=ne(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),f=ne(()=>e.falseValue!==void 0?e.falseValue:!1),d=ne(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),a=ne({get(){const P=n?n.modelValue.value:s.value;return d.value?Mi(P).some(R=>e.valueComparator(R,c.value)):e.valueComparator(P,c.value)},set(P){if(e.readonly)return;const R=P?c.value:f.value;let O=R;d.value&&(O=P?[...Mi(s.value),R]:Mi(s.value).filter(z=>!e.valueComparator(z,c.value))),n?n.modelValue.value=O:s.value=O}}),{textColorClasses:b,textColorStyles:C}=zr(()=>{if(!(e.error||e.disabled))return a.value?e.color:e.baseColor}),{backgroundColorClasses:w,backgroundColorStyles:T}=ti(()=>a.value&&!e.error&&!e.disabled?e.color:e.baseColor),A=ne(()=>a.value?e.trueIcon:e.falseIcon);return{group:n,densityClasses:r,trueValue:c,falseValue:f,model:a,textColorClasses:b,textColorStyles:C,backgroundColorClasses:w,backgroundColorStyles:T,icon:A}}const Tl=ht()({name:"VSelectionControl",directives:{vRipple:ra},inheritAttrs:!1,props:Zg(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{group:c,densityClasses:f,icon:d,model:a,textColorClasses:b,textColorStyles:C,backgroundColorClasses:w,backgroundColorStyles:T,trueValue:A}=eV(e),P=va(),R=Dt(!1),O=Dt(!1),z=et(),$=Me(()=>e.id||`input-${P}`),F=Me(()=>!e.disabled&&!e.readonly);c==null||c.onForceUpdate(()=>{z.value&&(z.value.checked=a.value)});function H(ce){F.value&&(R.value=!0,Rd(ce.target,":focus-visible")!==!1&&(O.value=!0))}function Y(){R.value=!1,O.value=!1}function te(ce){ce.stopPropagation()}function Q(ce){if(!F.value){z.value&&(z.value.checked=a.value);return}e.readonly&&c&&Dn(()=>c.forceUpdate()),a.value=ce.target.checked}return _t(()=>{var _e,ae;const ce=s.label?s.label({label:e.label,props:{for:$.value}}):e.label,[oe,he]=Al(r),pe=X("input",lt({ref:z,checked:a.value,disabled:!!e.disabled,id:$.value,onBlur:Y,onFocus:H,onInput:Q,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:A.value,name:e.name,"aria-checked":e.type==="checkbox"?a.value:void 0},he),null);return X("div",lt({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":R.value,"v-selection-control--focus-visible":O.value,"v-selection-control--inline":e.inline},f.value,e.class]},oe,{style:e.style}),[X("div",{class:gt(["v-selection-control__wrapper",b.value]),style:Bt(C.value)},[(_e=s.default)==null?void 0:_e.call(s,{backgroundColorClasses:w,backgroundColorStyles:T}),Di(X("div",{class:gt(["v-selection-control__input"])},[((ae=s.input)==null?void 0:ae.call(s,{model:a,textColorClasses:b,textColorStyles:C,backgroundColorClasses:w,backgroundColorStyles:T,inputNode:pe,icon:d.value,props:{onFocus:H,onBlur:Y,id:$.value}}))??X(Wt,null,[d.value&&U(Xn,{key:"icon",icon:d.value},null),pe])]),[[ra,e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),ce&&U(Kd,{for:$.value,onClick:te},{default:()=>[ce]})])}),{isFocused:R,input:z}}}),YT=Ue({indeterminate:Boolean,indeterminateIcon:{type:an,default:"$checkboxIndeterminate"},...Zg({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Hs=ht()({name:"VCheckboxBtn",props:YT(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"indeterminate"),c=tn(e,"modelValue");function f(b){s.value&&(s.value=!1)}const d=Me(()=>s.value?e.indeterminateIcon:e.falseIcon),a=Me(()=>s.value?e.indeterminateIcon:e.trueIcon);return _t(()=>{const b=di(Tl.filterProps(e),["modelValue"]);return U(Tl,lt(b,{modelValue:c.value,"onUpdate:modelValue":[C=>c.value=C,f],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:d.value,trueIcon:a.value,"aria-checked":s.value?"mixed":void 0}),r)}),{}}});function XT(e){const{t:n}=gi();function r(s){let{name:c,color:f,...d}=s;const a={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[c],b=e[`onClick:${c}`];function C(T){T.key!=="Enter"&&T.key!==" "||(T.preventDefault(),T.stopPropagation(),Fg(b,new PointerEvent("click",T)))}const w=b&&a?n(`$vuetify.input.${a}`,e.label??""):void 0;return U(Xn,lt({icon:e[`${c}Icon`],"aria-label":w,onClick:b,onKeydown:C,color:f},d),null)}return{InputIcon:r}}const tV=Ue({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Zt(),...ws({transition:{component:f0,leaveAbsolute:!0,group:!0}})},"VMessages"),JT=ht()({name:"VMessages",props:tV(),setup(e,n){let{slots:r}=n;const s=ne(()=>Mi(e.messages)),{textColorClasses:c,textColorStyles:f}=zr(()=>e.color);return _t(()=>U(na,{transition:e.transition,tag:"div",class:gt(["v-messages",c.value,e.class]),style:Bt([f.value,e.style])},{default:()=>[e.active&&s.value.map((d,a)=>X("div",{class:"v-messages__message",key:`${a}-${s.value}`},[r.message?r.message({message:d}):d]))]})),{}}}),_m=Ue({focused:Boolean,"onUpdate:focused":Lr()},"focus");function Mo(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=tn(e,"focused"),s=Me(()=>({[`${n}--focused`]:r.value}));function c(){r.value=!0}function f(){r.value=!1}return{focusClasses:s,isFocused:r,focus:c,blur:f}}const QT=Symbol.for("vuetify:form"),nV=Ue({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function iV(e){const n=tn(e,"modelValue"),r=Me(()=>e.disabled),s=Me(()=>e.readonly),c=Dt(!1),f=et([]),d=et([]);async function a(){const w=[];let T=!0;d.value=[],c.value=!0;for(const A of f.value){const P=await A.validate();if(P.length>0&&(T=!1,w.push({id:A.id,errorMessages:P})),!T&&e.fastFail)break}return d.value=w,c.value=!1,{valid:T,errors:d.value}}function b(){f.value.forEach(w=>w.reset())}function C(){f.value.forEach(w=>w.resetValidation())}return Ot(f,()=>{let w=0,T=0;const A=[];for(const P of f.value)P.isValid===!1?(T++,A.push({id:P.id,errorMessages:P.errorMessages})):P.isValid===!0&&w++;d.value=A,n.value=T>0?!1:w===f.value.length?!0:null},{deep:!0,flush:"post"}),ri(QT,{register:w=>{let{id:T,vm:A,validate:P,reset:R,resetValidation:O}=w;f.value.some(z=>z.id===T),f.value.push({id:T,validate:P,reset:R,resetValidation:O,vm:HC(A),isValid:null,errorMessages:[]})},unregister:w=>{f.value=f.value.filter(T=>T.id!==w)},update:(w,T,A)=>{const P=f.value.find(R=>R.id===w);P&&(P.isValid=T,P.errorMessages=A)},isDisabled:r,isReadonly:s,isValidating:c,isValid:n,items:f,validateOn:Me(()=>e.validateOn)}),{errors:d,isDisabled:r,isReadonly:s,isValidating:c,isValid:n,items:f,validate:a,reset:b,resetValidation:C}}function bm(e){const n=bn(QT,null);return{...n,isReadonly:ne(()=>!!((e==null?void 0:e.readonly)??(n==null?void 0:n.isReadonly.value))),isDisabled:ne(()=>!!((e==null?void 0:e.disabled)??(n==null?void 0:n.isDisabled.value)))}}const rV=Symbol.for("vuetify:rules");function aV(e){const n=bn(rV,null);return n?n(e):Me(e)}const eP=Ue({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,..._m()},"validation");function tP(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:va();const s=tn(e,"modelValue"),c=ne(()=>e.validationValue===void 0?s.value:e.validationValue),f=bm(e),d=aV(()=>e.rules),a=et([]),b=Dt(!0),C=ne(()=>!!(Mi(s.value===""?null:s.value).length||Mi(c.value===""?null:c.value).length)),w=ne(()=>{var Y;return(Y=e.errorMessages)!=null&&Y.length?Mi(e.errorMessages).concat(a.value).slice(0,Math.max(0,Number(e.maxErrors))):a.value}),T=ne(()=>{var Q;let Y=(e.validateOn??((Q=f.validateOn)==null?void 0:Q.value))||"input";Y==="lazy"&&(Y="input lazy"),Y==="eager"&&(Y="input eager");const te=new Set((Y==null?void 0:Y.split(" "))??[]);return{input:te.has("input"),blur:te.has("blur")||te.has("input")||te.has("invalid-input"),invalidInput:te.has("invalid-input"),lazy:te.has("lazy"),eager:te.has("eager")}}),A=ne(()=>{var Y;return e.error||(Y=e.errorMessages)!=null&&Y.length?!1:e.rules.length?b.value?a.value.length||T.value.lazy?null:!0:!a.value.length:!0}),P=Dt(!1),R=ne(()=>({[`${n}--error`]:A.value===!1,[`${n}--dirty`]:C.value,[`${n}--disabled`]:f.isDisabled.value,[`${n}--readonly`]:f.isReadonly.value})),O=ji("validation"),z=ne(()=>e.name??Sr(r));Hd(()=>{var Y;(Y=f.register)==null||Y.call(f,{id:z.value,vm:O,validate:H,reset:$,resetValidation:F})}),Vr(()=>{var Y;(Y=f.unregister)==null||Y.call(f,z.value)}),zi(async()=>{var Y;T.value.lazy||await H(!T.value.eager),(Y=f.update)==null||Y.call(f,z.value,A.value,w.value)}),ia(()=>T.value.input||T.value.invalidInput&&A.value===!1,()=>{Ot(c,()=>{if(c.value!=null)H();else if(e.focused){const Y=Ot(()=>e.focused,te=>{te||H(),Y()})}})}),ia(()=>T.value.blur,()=>{Ot(()=>e.focused,Y=>{Y||H()})}),Ot([A,w],()=>{var Y;(Y=f.update)==null||Y.call(f,z.value,A.value,w.value)});async function $(){s.value=null,await Dn(),await F()}async function F(){b.value=!0,T.value.lazy?a.value=[]:await H(!T.value.eager)}async function H(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const te=[];P.value=!0;for(const Q of d.value){if(te.length>=Number(e.maxErrors??1))break;const oe=await(typeof Q=="function"?Q:()=>Q)(c.value);if(oe!==!0){if(oe!==!1&&typeof oe!="string"){console.warn(`${oe} is not a valid value. Rule functions must return boolean true or a string.`);continue}te.push(oe||"")}}return a.value=te,P.value=!1,b.value=Y,a.value}return{errorMessages:w,isDirty:C,isDisabled:f.isDisabled,isReadonly:f.isReadonly,isPristine:b,isValid:A,isValidating:P,reset:$,resetValidation:F,validate:H,validationClasses:R}}const Do=Ue({id:String,appendIcon:an,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:an,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Lr(),"onClick:append":Lr(),...Zt(),...fr(),...Io(Zi(),["maxWidth","minWidth","width"]),...Un(),...eP()},"VInput"),qr=ht()({name:"VInput",props:{...Do()},emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s,emit:c}=n;const{densityClasses:f}=aa(e),{dimensionStyles:d}=Ki(e),{themeClasses:a}=Jn(e),{rtlClasses:b}=tr(),{InputIcon:C}=XT(e),w=va(),T=ne(()=>e.id||`input-${w}`),A=ne(()=>`${T.value}-messages`),{errorMessages:P,isDirty:R,isDisabled:O,isReadonly:z,isPristine:$,isValid:F,isValidating:H,reset:Y,resetValidation:te,validate:Q,validationClasses:ce}=tP(e,"v-input",T),oe=ne(()=>({id:T,messagesId:A,isDirty:R,isDisabled:O,isReadonly:z,isPristine:$,isValid:F,isValidating:H,reset:Y,resetValidation:te,validate:Q})),he=Me(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),pe=Me(()=>{if(e.iconColor)return e.iconColor===!0?he.value:e.iconColor}),_e=ne(()=>{var ae;return(ae=e.errorMessages)!=null&&ae.length||!$.value&&P.value.length?P.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return _t(()=>{var Fe,Ke,mt,ft;const ae=!!(s.prepend||e.prependIcon),be=!!(s.append||e.appendIcon),je=_e.value.length>0,Ve=!e.hideDetails||e.hideDetails==="auto"&&(je||!!s.details);return X("div",{class:gt(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},f.value,a.value,b.value,ce.value,e.class]),style:Bt([d.value,e.style])},[ae&&X("div",{key:"prepend",class:"v-input__prepend"},[(Fe=s.prepend)==null?void 0:Fe.call(s,oe.value),e.prependIcon&&U(C,{key:"prepend-icon",name:"prepend",color:pe.value},null)]),s.default&&X("div",{class:"v-input__control"},[(Ke=s.default)==null?void 0:Ke.call(s,oe.value)]),be&&X("div",{key:"append",class:"v-input__append"},[e.appendIcon&&U(C,{key:"append-icon",name:"append",color:pe.value},null),(mt=s.append)==null?void 0:mt.call(s,oe.value)]),Ve&&X("div",{id:A.value,class:"v-input__details",role:"alert","aria-live":"polite"},[U(JT,{active:je,messages:_e.value},{message:s.message}),(ft=s.details)==null?void 0:ft.call(s,oe.value)])])}),{reset:Y,resetValidation:te,validate:Q,isValid:F,errorMessages:P}}}),Ky=Symbol("Forwarded refs");function Yy(e,n){let r=e;for(;r;){const s=Reflect.getOwnPropertyDescriptor(r,n);if(s)return s;r=Object.getPrototypeOf(r)}}function Tr(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e[Ky]=r,new Proxy(e,{get(c,f){if(Reflect.has(c,f))return Reflect.get(c,f);if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const d of r)if(d.value&&Reflect.has(d.value,f)){const a=Reflect.get(d.value,f);return typeof a=="function"?a.bind(d.value):a}}},has(c,f){if(Reflect.has(c,f))return!0;if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const d of r)if(d.value&&Reflect.has(d.value,f))return!0;return!1},set(c,f,d){if(Reflect.has(c,f))return Reflect.set(c,f,d);if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const a of r)if(a.value&&Reflect.has(a.value,f))return Reflect.set(a.value,f,d);return!1},getOwnPropertyDescriptor(c,f){var a;const d=Reflect.getOwnPropertyDescriptor(c,f);if(d)return d;if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const b of r){if(!b.value)continue;const C=Yy(b.value,f)??("_"in b.value?Yy((a=b.value._)==null?void 0:a.setupState,f):void 0);if(C)return C}for(const b of r){const C=b.value&&b.value[Ky];if(!C)continue;const w=C.slice();for(;w.length;){const T=w.shift(),A=Yy(T.value,f);if(A)return A;const P=T.value&&T.value[Ky];P&&w.push(...P)}}}}})}const sV=Ue({...Do(),...di(YT(),["inline"])},"VCheckbox"),oV=ht()({name:"VCheckbox",inheritAttrs:!1,props:sV(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=tn(e,"modelValue"),{isFocused:f,focus:d,blur:a}=Mo(e),b=et(),C=va();return _t(()=>{const[w,T]=Al(r),A=qr.filterProps(e),P=Hs.filterProps(e);return U(qr,lt({ref:b,class:["v-checkbox",e.class]},w,A,{modelValue:c.value,"onUpdate:modelValue":R=>c.value=R,id:e.id||`checkbox-${C}`,focused:f.value,style:e.style}),{...s,default:R=>{let{id:O,messagesId:z,isDisabled:$,isReadonly:F,isValid:H}=R;return U(Hs,lt(P,{id:O.value,"aria-describedby":z.value,disabled:$.value,readonly:F.value},T,{error:H.value===!1,modelValue:c.value,"onUpdate:modelValue":Y=>c.value=Y,onFocus:d,onBlur:a}),s)}})}),Tr({},b)}});function lV(e){let{selectedElement:n,containerElement:r,isRtl:s,isHorizontal:c}=e;const f=Xf(c,r),d=nP(c,s,r),a=Xf(c,n),b=iP(c,n),C=a*.4;return d>b?b-C:d+f<b+a?b-f+a+C:d}function uV(e){let{selectedElement:n,containerElement:r,isHorizontal:s}=e;const c=Xf(s,r),f=iP(s,n),d=Xf(s,n);return f-c/2+d/2}function fS(e,n){const r=e?"scrollWidth":"scrollHeight";return(n==null?void 0:n[r])||0}function cV(e,n){const r=e?"clientWidth":"clientHeight";return(n==null?void 0:n[r])||0}function nP(e,n,r){if(!r)return 0;const{scrollLeft:s,offsetWidth:c,scrollWidth:f}=r;return e?n?f-c+s:s:r.scrollTop}function Xf(e,n){const r=e?"offsetWidth":"offsetHeight";return(n==null?void 0:n[r])||0}function iP(e,n){const r=e?"offsetLeft":"offsetTop";return(n==null?void 0:n[r])||0}const rP=Symbol.for("vuetify:v-slide-group"),y0=Ue({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:rP},nextIcon:{type:an,default:"$next"},prevIcon:{type:an,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Zt(),...Xu({mobile:null}),...xn(),...nc({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Jf=ht()({name:"VSlideGroup",props:y0(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{isRtl:s}=tr(),{displayClasses:c,mobile:f}=Qa(e),d=Ml(e,e.symbol),a=Dt(!1),b=Dt(0),C=Dt(0),w=Dt(0),T=ne(()=>e.direction==="horizontal"),{resizeRef:A,contentRect:P}=vs(),{resizeRef:R,contentRect:O}=vs(),z=OL(),$=ne(()=>({container:A.el,duration:200,easing:"easeOutQuart"})),F=ne(()=>d.selected.value.length?d.items.value.findIndex(Se=>Se.id===d.selected.value[0]):-1),H=ne(()=>d.selected.value.length?d.items.value.findIndex(Se=>Se.id===d.selected.value[d.selected.value.length-1]):-1);if(Yn){let Se=-1;Ot(()=>[d.selected.value,P.value,O.value,T.value],()=>{cancelAnimationFrame(Se),Se=requestAnimationFrame(()=>{if(P.value&&O.value){const Ie=T.value?"width":"height";C.value=P.value[Ie],w.value=O.value[Ie],a.value=C.value+1<w.value}if(F.value>=0&&R.el){const Ie=R.el.children[H.value];te(Ie,e.centerActive)}})})}const Y=Dt(!1);function te(Se,Ie){let Qe=0;Ie?Qe=uV({containerElement:A.el,isHorizontal:T.value,selectedElement:Se}):Qe=lV({containerElement:A.el,isHorizontal:T.value,isRtl:s.value,selectedElement:Se}),Q(Qe)}function Q(Se){if(!Yn||!A.el)return;const Ie=Xf(T.value,A.el),Qe=nP(T.value,s.value,A.el);if(!(fS(T.value,A.el)<=Ie||Math.abs(Se-Qe)<16)){if(T.value&&s.value&&A.el){const{scrollWidth:Tt,offsetWidth:xt}=A.el;Se=Tt-xt-Se}T.value?z.horizontal(Se,$.value):z(Se,$.value)}}function ce(Se){const{scrollTop:Ie,scrollLeft:Qe}=Se.target;b.value=T.value?Qe:Ie}function oe(Se){if(Y.value=!0,!(!a.value||!R.el)){for(const Ie of Se.composedPath())for(const Qe of R.el.children)if(Qe===Ie){te(Qe);return}}}function he(Se){Y.value=!1}let pe=!1;function _e(Se){var Ie;!pe&&!Y.value&&!(Se.relatedTarget&&((Ie=R.el)!=null&&Ie.contains(Se.relatedTarget)))&&Ve(),pe=!1}function ae(){pe=!0}function be(Se){if(!R.el)return;function Ie(Qe){Se.preventDefault(),Ve(Qe)}T.value?Se.key==="ArrowRight"?Ie(s.value?"prev":"next"):Se.key==="ArrowLeft"&&Ie(s.value?"next":"prev"):Se.key==="ArrowDown"?Ie("next"):Se.key==="ArrowUp"&&Ie("prev"),Se.key==="Home"?Ie("first"):Se.key==="End"&&Ie("last")}function je(Se,Ie){if(!Se)return;let Qe=Se;do Qe=Qe==null?void 0:Qe[Ie==="next"?"nextElementSibling":"previousElementSibling"];while(Qe!=null&&Qe.hasAttribute("disabled"));return Qe}function Ve(Se){if(!R.el)return;let Ie;if(!Se)Ie=Gf(R.el)[0];else if(Se==="next"){if(Ie=je(R.el.querySelector(":focus"),Se),!Ie)return Ve("first")}else if(Se==="prev"){if(Ie=je(R.el.querySelector(":focus"),Se),!Ie)return Ve("last")}else Se==="first"?(Ie=R.el.firstElementChild,Ie!=null&&Ie.hasAttribute("disabled")&&(Ie=je(Ie,"next"))):Se==="last"&&(Ie=R.el.lastElementChild,Ie!=null&&Ie.hasAttribute("disabled")&&(Ie=je(Ie,"prev")));Ie&&Ie.focus({preventScroll:!0})}function Fe(Se){const Ie=T.value&&s.value?-1:1,Qe=(Se==="prev"?-Ie:Ie)*C.value;let jt=b.value+Qe;if(T.value&&s.value&&A.el){const{scrollWidth:Tt,offsetWidth:xt}=A.el;jt+=Tt-xt}Q(jt)}const Ke=ne(()=>({next:d.next,prev:d.prev,select:d.select,isSelected:d.isSelected})),mt=ne(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!f.value;case!0:return a.value||Math.abs(b.value)>0;case"mobile":return f.value||a.value||Math.abs(b.value)>0;default:return!f.value&&(a.value||Math.abs(b.value)>0)}}),ft=ne(()=>Math.abs(b.value)>1),ze=ne(()=>{if(!A.value)return!1;const Se=fS(T.value,A.el),Ie=cV(T.value,A.el);return Se-Ie-Math.abs(b.value)>1});return _t(()=>U(e.tag,{class:gt(["v-slide-group",{"v-slide-group--vertical":!T.value,"v-slide-group--has-affixes":mt.value,"v-slide-group--is-overflowing":a.value},c.value,e.class]),style:Bt(e.style),tabindex:Y.value||d.selected.value.length?-1:0,onFocus:_e},{default:()=>{var Se,Ie,Qe;return[mt.value&&X("div",{key:"prev",class:gt(["v-slide-group__prev",{"v-slide-group__prev--disabled":!ft.value}]),onMousedown:ae,onClick:()=>ft.value&&Fe("prev")},[((Se=r.prev)==null?void 0:Se.call(r,Ke.value))??U(Zf,null,{default:()=>[U(Xn,{icon:s.value?e.nextIcon:e.prevIcon},null)]})]),X("div",{key:"container",ref:A,class:gt(["v-slide-group__container",e.contentClass]),onScroll:ce},[X("div",{ref:R,class:"v-slide-group__content",onFocusin:oe,onFocusout:he,onKeydown:be},[(Ie=r.default)==null?void 0:Ie.call(r,Ke.value)])]),mt.value&&X("div",{key:"next",class:gt(["v-slide-group__next",{"v-slide-group__next--disabled":!ze.value}]),onMousedown:ae,onClick:()=>ze.value&&Fe("next")},[((Qe=r.next)==null?void 0:Qe.call(r,Ke.value))??U(Zf,null,{default:()=>[U(Xn,{icon:s.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:d.selected,scrollTo:Fe,scrollOffset:b,focus:Ve,hasPrev:ft,hasNext:ze}}}),aP=Symbol.for("vuetify:v-chip-group"),dV=Ue({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Rr},...y0(),...Zt(),...nc({selectedClass:"v-chip--selected"}),...xn(),...Un(),...es({variant:"tonal"})},"VChipGroup"),hV=ht()({name:"VChipGroup",props:dV(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{isSelected:c,select:f,next:d,prev:a,selected:b}=Ml(e,aP);return Li({VChip:{baseColor:Me(()=>e.baseColor),color:Me(()=>e.color),disabled:Me(()=>e.disabled),filter:Me(()=>e.filter),variant:Me(()=>e.variant)}}),_t(()=>{const C=Jf.filterProps(e);return U(Jf,lt(C,{class:["v-chip-group",{"v-chip-group--column":e.column},s.value,e.class],style:e.style}),{default:()=>{var w;return[(w=r.default)==null?void 0:w.call(r,{isSelected:c,select:f,next:d,prev:a,selected:b.value})]}})}),{}}}),fV=Ue({activeClass:String,appendAvatar:String,appendIcon:an,baseColor:String,closable:Boolean,closeIcon:{type:an,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:an,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:an,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Lr(),onClickOnce:Lr(),...ya(),...Zt(),...fr(),...nr(),...ic(),...vi(),...ym(),...Ks(),...xn({tag:"span"}),...Un(),...es({variant:"tonal"})},"VChip"),Yd=ht()({name:"VChip",directives:{vRipple:ra},props:fV(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{t:f}=gi(),{borderClasses:d}=Ta(e),{densityClasses:a}=aa(e),{elevationClasses:b}=kr(e),{roundedClasses:C}=Vi(e),{sizeClasses:w}=qd(e),{themeClasses:T}=Jn(e),A=tn(e,"modelValue"),P=rc(e,aP,!1),R=vm(e,r),O=Me(()=>e.link!==!1&&R.isLink.value),z=ne(()=>!e.disabled&&e.link!==!1&&(!!P||e.link||R.isClickable.value)),$=Me(()=>({"aria-label":f(e.closeLabel),disabled:e.disabled,onClick(ce){ce.preventDefault(),ce.stopPropagation(),A.value=!1,s("click:close",ce)}})),{colorClasses:F,colorStyles:H,variantClasses:Y}=tc(()=>({color:!P||P.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function te(ce){var oe;s("click",ce),z.value&&((oe=R.navigate)==null||oe.call(R,ce),P==null||P.toggle())}function Q(ce){(ce.key==="Enter"||ce.key===" ")&&(ce.preventDefault(),te(ce))}return()=>{var je;const ce=R.isLink.value?"a":e.tag,oe=!!(e.appendIcon||e.appendAvatar),he=!!(oe||c.append),pe=!!(c.close||e.closable),_e=!!(c.filter||e.filter)&&P,ae=!!(e.prependIcon||e.prependAvatar),be=!!(ae||c.prepend);return A.value&&Di(U(ce,lt({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":z.value,"v-chip--filter":_e,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&((je=R.isActive)==null?void 0:je.value)},T.value,d.value,F.value,a.value,b.value,C.value,w.value,Y.value,P==null?void 0:P.selectedClass.value,e.class],style:[H.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:z.value?0:void 0,onClick:te,onKeydown:z.value&&!O.value&&Q},R.linkProps),{default:()=>{var Ve;return[El(z.value,"v-chip"),_e&&U(m0,{key:"filter"},{default:()=>[Di(X("div",{class:"v-chip__filter"},[c.filter?U(Sn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},c.filter):U(Xn,{key:"filter-icon",icon:e.filterIcon},null)]),[[xs,P.isSelected.value]])]}),be&&X("div",{key:"prepend",class:"v-chip__prepend"},[c.prepend?U(Sn,{key:"prepend-defaults",disabled:!ae,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},c.prepend):X(Wt,null,[e.prependIcon&&U(Xn,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&U(Ja,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),X("div",{class:"v-chip__content","data-no-activator":""},[((Ve=c.default)==null?void 0:Ve.call(c,{isSelected:P==null?void 0:P.isSelected.value,selectedClass:P==null?void 0:P.selectedClass.value,select:P==null?void 0:P.select,toggle:P==null?void 0:P.toggle,value:P==null?void 0:P.value.value,disabled:e.disabled}))??ei(e.text)]),he&&X("div",{key:"append",class:"v-chip__append"},[c.append?U(Sn,{key:"append-defaults",disabled:!oe,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},c.append):X(Wt,null,[e.appendIcon&&U(Xn,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&U(Ja,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),pe&&X("button",lt({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},$.value),[c.close?U(Sn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},c.close):U(Xn,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[ra,z.value&&e.ripple,null]])}}}),mV=Ue({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Zt(),...Un()},"VDivider"),$a=ht()({name:"VDivider",props:mV(),setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Jn(e),{textColorClasses:f,textColorStyles:d}=zr(()=>e.color),a=ne(()=>{const b={};return e.length&&(b[e.vertical?"height":"width"]=Gt(e.length)),e.thickness&&(b[e.vertical?"borderRightWidth":"borderTopWidth"]=Gt(e.thickness)),b});return _t(()=>{const b=X("hr",{class:gt([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},c.value,f.value,e.class]),style:Bt([a.value,d.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!r.role||r.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${r.role||"separator"}`},null);return s.default?X("div",{class:gt(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[b,X("div",{class:"v-divider__content"},[s.default()]),b]):b}),{}}}),G_=Symbol.for("vuetify:list");function sP(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const n=bn(G_,{filterable:!1,hasPrepend:Dt(!1),updateHasPrepend:()=>null}),r={filterable:n.filterable||e,hasPrepend:Dt(!1),updateHasPrepend:s=>{s&&(r.hasPrepend.value=s)}};return ri(G_,r),n}function oP(){return bn(G_,null)}const _0=e=>{const n={activate:r=>{let{id:s,value:c,activated:f}=r;return s=fn(s),e&&!c&&f.size===1&&f.has(s)||(c?f.add(s):f.delete(s)),f},in:(r,s,c)=>{let f=new Set;if(r!=null)for(const d of Mi(r))f=n.activate({id:d,value:!0,activated:new Set(f),children:s,parents:c});return f},out:r=>Array.from(r)};return n},lP=e=>{const n=_0(e);return{activate:s=>{let{activated:c,id:f,...d}=s;f=fn(f);const a=c.has(f)?new Set([f]):new Set;return n.activate({...d,id:f,activated:a})},in:(s,c,f)=>{let d=new Set;if(s!=null){const a=Mi(s);a.length&&(d=n.in(a.slice(0,1),c,f))}return d},out:(s,c,f)=>n.out(s,c,f)}},pV=e=>{const n=_0(e);return{activate:s=>{let{id:c,activated:f,children:d,...a}=s;return c=fn(c),d.has(c)?f:n.activate({id:c,activated:f,children:d,...a})},in:n.in,out:n.out}},gV=e=>{const n=lP(e);return{activate:s=>{let{id:c,activated:f,children:d,...a}=s;return c=fn(c),d.has(c)?f:n.activate({id:c,activated:f,children:d,...a})},in:n.in,out:n.out}},vV={open:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(r){const f=new Set;f.add(n);let d=c.get(n);for(;d!=null;)f.add(d),d=c.get(d);return f}else return s.delete(n),s},select:()=>null},uP={open:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(r){let f=c.get(n);for(s.add(n);f!=null&&f!==n;)s.add(f),f=c.get(f);return s}else s.delete(n);return s},select:()=>null},yV={open:uP.open,select:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(!r)return s;const f=[];let d=c.get(n);for(;d!=null;)f.push(d),d=c.get(d);return new Set(f)}},b0=e=>{const n={select:r=>{let{id:s,value:c,selected:f}=r;if(s=fn(s),e&&!c){const d=Array.from(f.entries()).reduce((a,b)=>{let[C,w]=b;return w==="on"&&a.push(C),a},[]);if(d.length===1&&d[0]===s)return f}return f.set(s,c?"on":"off"),f},in:(r,s,c,f)=>{const d=new Map;for(const a of r||[])n.select({id:a,value:!0,selected:d,children:s,parents:c,disabled:f});return d},out:r=>{const s=[];for(const[c,f]of r.entries())f==="on"&&s.push(c);return s}};return n},cP=e=>{const n=b0(e);return{select:s=>{let{selected:c,id:f,...d}=s;f=fn(f);const a=c.has(f)?new Map([[f,c.get(f)]]):new Map;return n.select({...d,id:f,selected:a})},in:(s,c,f,d)=>s!=null&&s.length?n.in(s.slice(0,1),c,f,d):new Map,out:(s,c,f)=>n.out(s,c,f)}},_V=e=>{const n=b0(e);return{select:s=>{let{id:c,selected:f,children:d,...a}=s;return c=fn(c),d.has(c)?f:n.select({id:c,selected:f,children:d,...a})},in:n.in,out:n.out}},bV=e=>{const n=cP(e);return{select:s=>{let{id:c,selected:f,children:d,...a}=s;return c=fn(c),d.has(c)?f:n.select({id:c,selected:f,children:d,...a})},in:n.in,out:n.out}},dP=e=>{const n={select:r=>{let{id:s,value:c,selected:f,children:d,parents:a,disabled:b}=r;s=fn(s);const C=new Map(f),w=[s];for(;w.length;){const A=w.shift();b.has(A)||f.set(fn(A),c?"on":"off"),d.has(A)&&w.push(...d.get(A))}let T=fn(a.get(s));for(;T;){let A=!0,P=!0;for(const R of d.get(T)){const O=fn(R);if(!b.has(O)&&(f.get(O)!=="on"&&(A=!1),f.has(O)&&f.get(O)!=="off"&&(P=!1),!A&&!P))break}f.set(T,A?"on":P?"off":"indeterminate"),T=fn(a.get(T))}return e&&!c&&Array.from(f.entries()).reduce((P,R)=>{let[O,z]=R;return z==="on"&&P.push(O),P},[]).length===0?C:f},in:(r,s,c,f)=>{let d=new Map;for(const a of r||[])d=n.select({id:a,value:!0,selected:d,children:s,parents:c,disabled:f});return d},out:(r,s)=>{const c=[];for(const[f,d]of r.entries())d==="on"&&!s.has(f)&&c.push(f);return c}};return n},xV=e=>{const n=dP(e);return{select:n.select,in:n.in,out:(s,c,f)=>{const d=[];for(const[a,b]of s.entries())if(b==="on"){if(f.has(a)){const C=f.get(a);if(s.get(C)==="on")continue}d.push(a)}return d}}},Qf=Symbol.for("vuetify:nested"),hP={id:Dt(),root:{register:()=>null,unregister:()=>null,children:et(new Map),parents:et(new Map),disabled:et(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:et(!1),selectable:et(!1),opened:et(new Set),activated:et(new Set),selected:et(new Map),selectedValues:et([]),getPath:()=>[]}},wV=Ue({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),SV=e=>{let n=!1;const r=Dt(new Map),s=Dt(new Map),c=Dt(new Set),f=tn(e,"opened",e.opened,O=>new Set(Array.isArray(O)?O.map(z=>fn(z)):O),O=>[...O.values()]),d=ne(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return pV(e.mandatory);case"single-leaf":return gV(e.mandatory);case"independent":return _0(e.mandatory);case"single-independent":default:return lP(e.mandatory)}}),a=ne(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return bV(e.mandatory);case"leaf":return _V(e.mandatory);case"independent":return b0(e.mandatory);case"single-independent":return cP(e.mandatory);case"trunk":return xV(e.mandatory);case"classic":default:return dP(e.mandatory)}}),b=ne(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return yV;case"single":return vV;case"multiple":default:return uP}}),C=tn(e,"activated",e.activated,O=>d.value.in(O,r.value,s.value),O=>d.value.out(O,r.value,s.value)),w=tn(e,"selected",e.selected,O=>a.value.in(O,r.value,s.value,c.value),O=>a.value.out(O,r.value,s.value));Vr(()=>{n=!0});function T(O){const z=[];let $=fn(O);for(;$!=null;)z.unshift($),$=s.value.get($);return z}const A=ji("nested"),P=new Set,R={id:Dt(),root:{opened:f,activatable:Me(()=>e.activatable),selectable:Me(()=>e.selectable),activated:C,selected:w,selectedValues:ne(()=>{const O=[];for(const[z,$]of w.value.entries())$==="on"&&O.push(z);return O}),register:(O,z,$,F)=>{if(P.has(O)){T(O).map(String).join(" -> "),T(z).concat(O).map(String).join(" -> ");return}else P.add(O);z&&O!==z&&s.value.set(O,z),$&&c.value.add(O),F&&r.value.set(O,[]),z!=null&&r.value.set(z,[...r.value.get(z)||[],O])},unregister:O=>{if(n)return;P.delete(O),r.value.delete(O),c.value.delete(O);const z=s.value.get(O);if(z){const $=r.value.get(z)??[];r.value.set(z,$.filter(F=>F!==O))}s.value.delete(O)},open:(O,z,$)=>{A.emit("click:open",{id:O,value:z,path:T(O),event:$});const F=b.value.open({id:O,value:z,opened:new Set(f.value),children:r.value,parents:s.value,event:$});F&&(f.value=F)},openOnSelect:(O,z,$)=>{const F=b.value.select({id:O,value:z,selected:new Map(w.value),opened:new Set(f.value),children:r.value,parents:s.value,event:$});F&&(f.value=F)},select:(O,z,$)=>{A.emit("click:select",{id:O,value:z,path:T(O),event:$});const F=a.value.select({id:O,value:z,selected:new Map(w.value),children:r.value,parents:s.value,disabled:c.value,event:$});F&&(w.value=F),R.root.openOnSelect(O,z,$)},activate:(O,z,$)=>{if(!e.activatable)return R.root.select(O,!0,$);A.emit("click:activate",{id:O,value:z,path:T(O),event:$});const F=d.value.activate({id:O,value:z,activated:new Set(C.value),children:r.value,parents:s.value,event:$});if(F.size!==C.value.size)C.value=F;else{for(const H of F)if(!C.value.has(H)){C.value=F;return}for(const H of C.value)if(!F.has(H)){C.value=F;return}}},children:r,parents:s,disabled:c,getPath:T}};return ri(Qf,R),R.root},fP=(e,n,r)=>{const s=bn(Qf,hP),c=Symbol("nested item"),f=ne(()=>fn(Us(e))??c),d={...s,id:f,open:(a,b)=>s.root.open(f.value,a,b),openOnSelect:(a,b)=>s.root.openOnSelect(f.value,a,b),isOpen:ne(()=>s.root.opened.value.has(f.value)),parent:ne(()=>s.root.parents.value.get(f.value)),activate:(a,b)=>s.root.activate(f.value,a,b),isActivated:ne(()=>s.root.activated.value.has(f.value)),select:(a,b)=>s.root.select(f.value,a,b),isSelected:ne(()=>s.root.selected.value.get(f.value)==="on"),isIndeterminate:ne(()=>s.root.selected.value.get(f.value)==="indeterminate"),isLeaf:ne(()=>!s.root.children.value.get(f.value)),isGroupActivator:s.isGroupActivator};return Hd(()=>{s.isGroupActivator||s.root.register(f.value,s.id.value,Us(n),r)}),Vr(()=>{s.isGroupActivator||s.root.unregister(f.value)}),r&&ri(Qf,d),d},CV=()=>{const e=bn(Qf,hP);ri(Qf,{...e,isGroupActivator:!0})},kV=ja({name:"VListGroupActivator",setup(e,n){let{slots:r}=n;return CV(),()=>{var s;return(s=r.default)==null?void 0:s.call(r)}}}),mP=Ue({activeColor:String,baseColor:String,color:String,collapseIcon:{type:an,default:"$collapse"},disabled:Boolean,expandIcon:{type:an,default:"$expand"},rawId:[String,Number],prependIcon:an,appendIcon:an,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Zt(),...xn()},"VListGroup"),em=ht()({name:"VListGroup",props:mP(),setup(e,n){let{slots:r}=n;const{isOpen:s,open:c,id:f}=fP(()=>e.value,()=>e.disabled,!0),d=ne(()=>`v-list-group--id-${String(e.rawId??f.value)}`),a=oP(),{isBooted:b}=ec();function C(P){var R;["INPUT","TEXTAREA"].includes((R=P.target)==null?void 0:R.tagName)||c(!s.value,P)}const w=ne(()=>({onClick:C,class:"v-list-group__header",id:d.value})),T=ne(()=>s.value?e.collapseIcon:e.expandIcon),A=ne(()=>({VListItem:{active:s.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&T.value,appendIcon:e.appendIcon||!e.subgroup&&T.value,title:e.title,value:e.value}}));return _t(()=>U(e.tag,{class:gt(["v-list-group",{"v-list-group--prepend":a==null?void 0:a.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":s.value},e.class]),style:Bt(e.style)},{default:()=>[r.activator&&U(Sn,{defaults:A.value},{default:()=>[U(kV,null,{default:()=>[r.activator({props:w.value,isOpen:s.value})]})]}),U(na,{transition:{component:Gg},disabled:!b.value},{default:()=>{var P;return[Di(X("div",{class:"v-list-group__items",role:"group","aria-labelledby":d.value},[(P=r.default)==null?void 0:P.call(r)]),[[xs,s.value]])]}})]})),{isOpen:s}}}),TV=Ue({opacity:[Number,String],...Zt(),...xn()},"VListItemSubtitle"),pP=ht()({name:"VListItemSubtitle",props:TV(),setup(e,n){let{slots:r}=n;return _t(()=>U(e.tag,{class:gt(["v-list-item-subtitle",e.class]),style:Bt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},r)),{}}}),gP=Ao("v-list-item-title"),vP=Ue({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:an,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:an,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Lr(),onClickOnce:Lr(),...ya(),...Zt(),...fr(),...Zi(),...nr(),...vi(),...ym(),...xn(),...Un(),...es({variant:"text"})},"VListItem"),ys=ht()({name:"VListItem",directives:{vRipple:ra},props:vP(),emits:{click:e=>!0},setup(e,n){let{attrs:r,slots:s,emit:c}=n;const f=vm(e,r),d=ne(()=>e.value===void 0?f.href.value:e.value),{activate:a,isActivated:b,select:C,isOpen:w,isSelected:T,isIndeterminate:A,isGroupActivator:P,root:R,parent:O,openOnSelect:z,id:$}=fP(d,()=>e.disabled,!1),F=oP(),H=ne(()=>{var Tt;return e.active!==!1&&(e.active||((Tt=f.isActive)==null?void 0:Tt.value)||(R.activatable.value?b.value:T.value))}),Y=Me(()=>e.link!==!1&&f.isLink.value),te=ne(()=>!!F&&(R.selectable.value||R.activatable.value||e.value!=null)),Q=ne(()=>!e.disabled&&e.link!==!1&&(e.link||f.isClickable.value||te.value)),ce=Me(()=>e.rounded||e.nav),oe=Me(()=>e.color??e.activeColor),he=Me(()=>({color:H.value?oe.value??e.baseColor:e.baseColor,variant:e.variant}));Ot(()=>{var Tt;return(Tt=f.isActive)==null?void 0:Tt.value},Tt=>{Tt&&pe()}),Hd(()=>{var Tt;(Tt=f.isActive)!=null&&Tt.value&&pe()});function pe(){O.value!=null&&R.open(O.value,!0),z(!0)}const{themeClasses:_e}=Jn(e),{borderClasses:ae}=Ta(e),{colorClasses:be,colorStyles:je,variantClasses:Ve}=tc(he),{densityClasses:Fe}=aa(e),{dimensionStyles:Ke}=Ki(e),{elevationClasses:mt}=kr(e),{roundedClasses:ft}=Vi(ce),ze=Me(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),Se=Me(()=>e.ripple!==void 0&&e.ripple&&(F!=null&&F.filterable)?{keys:[S_.enter]}:e.ripple),Ie=ne(()=>({isActive:H.value,select:C,isOpen:w.value,isSelected:T.value,isIndeterminate:A.value}));function Qe(Tt){var xt,Re;c("click",Tt),!["INPUT","TEXTAREA"].includes((xt=Tt.target)==null?void 0:xt.tagName)&&Q.value&&((Re=f.navigate)==null||Re.call(f,Tt),!P&&(R.activatable.value?a(!b.value,Tt):(R.selectable.value||e.value!=null)&&C(!T.value,Tt)))}function jt(Tt){const xt=Tt.target;["INPUT","TEXTAREA"].includes(xt.tagName)||(Tt.key==="Enter"||Tt.key===" "&&!(F!=null&&F.filterable))&&(Tt.preventDefault(),Tt.stopPropagation(),Tt.target.dispatchEvent(new MouseEvent("click",Tt)))}return _t(()=>{const Tt=Y.value?"a":e.tag,xt=s.title||e.title!=null,Re=s.subtitle||e.subtitle!=null,vt=!!(e.appendAvatar||e.appendIcon),st=!!(vt||s.append),Ye=!!(e.prependAvatar||e.prependIcon),St=!!(Ye||s.prepend);return F==null||F.updateHasPrepend(St),e.activeColor&&iT("active-color",["color","base-color"]),Di(U(Tt,lt({class:["v-list-item",{"v-list-item--active":H.value,"v-list-item--disabled":e.disabled,"v-list-item--link":Q.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!St&&(F==null?void 0:F.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&H.value},_e.value,ae.value,be.value,Fe.value,mt.value,ze.value,ft.value,Ve.value,e.class],style:[je.value,Ke.value,e.style],tabindex:Q.value?F?-2:0:void 0,"aria-selected":te.value?R.activatable.value?b.value:R.selectable.value?T.value:H.value:void 0,onClick:Qe,onKeydown:Q.value&&!Y.value&&jt},f.linkProps),{default:()=>{var re;return[El(Q.value||H.value,"v-list-item"),St&&X("div",{key:"prepend",class:"v-list-item__prepend"},[s.prepend?U(Sn,{key:"prepend-defaults",disabled:!Ye,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var ue;return[(ue=s.prepend)==null?void 0:ue.call(s,Ie.value)]}}):X(Wt,null,[e.prependAvatar&&U(Ja,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&U(Xn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),X("div",{class:"v-list-item__spacer"},null)]),X("div",{class:"v-list-item__content","data-no-activator":""},[xt&&U(gP,{key:"title"},{default:()=>{var ue;return[((ue=s.title)==null?void 0:ue.call(s,{title:e.title}))??ei(e.title)]}}),Re&&U(pP,{key:"subtitle"},{default:()=>{var ue;return[((ue=s.subtitle)==null?void 0:ue.call(s,{subtitle:e.subtitle}))??ei(e.subtitle)]}}),(re=s.default)==null?void 0:re.call(s,Ie.value)]),st&&X("div",{key:"append",class:"v-list-item__append"},[s.append?U(Sn,{key:"append-defaults",disabled:!vt,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var ue;return[(ue=s.append)==null?void 0:ue.call(s,Ie.value)]}}):X(Wt,null,[e.appendIcon&&U(Xn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&U(Ja,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),X("div",{class:"v-list-item__spacer"},null)])]}}),[[ra,Q.value&&Se.value]])}),{activate:a,isActivated:b,isGroupActivator:P,isSelected:T,list:F,select:C,root:R,id:$,link:f}}}),PV=Ue({color:String,inset:Boolean,sticky:Boolean,title:String,...Zt(),...xn()},"VListSubheader"),Xd=ht()({name:"VListSubheader",props:PV(),setup(e,n){let{slots:r}=n;const{textColorClasses:s,textColorStyles:c}=zr(()=>e.color);return _t(()=>{const f=!!(r.default||e.title);return U(e.tag,{class:gt(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},s.value,e.class]),style:Bt([{textColorStyles:c},e.style])},{default:()=>{var d;return[f&&X("div",{class:"v-list-subheader__text"},[((d=r.default)==null?void 0:d.call(r))??e.title])]}})}),{}}}),IV=Ue({items:Array,returnObject:Boolean},"VListChildren"),yP=ht()({name:"VListChildren",props:IV(),setup(e,n){let{slots:r}=n;return sP(),()=>{var s,c;return((s=r.default)==null?void 0:s.call(r))??((c=e.items)==null?void 0:c.map(f=>{var A,P;let{children:d,props:a,type:b,raw:C}=f;if(b==="divider")return((A=r.divider)==null?void 0:A.call(r,{props:a}))??U($a,a,null);if(b==="subheader")return((P=r.subheader)==null?void 0:P.call(r,{props:a}))??U(Xd,a,null);const w={subtitle:r.subtitle?R=>{var O;return(O=r.subtitle)==null?void 0:O.call(r,{...R,item:C})}:void 0,prepend:r.prepend?R=>{var O;return(O=r.prepend)==null?void 0:O.call(r,{...R,item:C})}:void 0,append:r.append?R=>{var O;return(O=r.append)==null?void 0:O.call(r,{...R,item:C})}:void 0,title:r.title?R=>{var O;return(O=r.title)==null?void 0:O.call(r,{...R,item:C})}:void 0},T=em.filterProps(a);return d?U(em,lt(T,{value:e.returnObject?C:a==null?void 0:a.value,rawId:a==null?void 0:a.value}),{activator:R=>{let{props:O}=R;const z={...a,...O,value:e.returnObject?C:a.value};return r.header?r.header({props:z}):U(ys,z,w)},default:()=>U(yP,{items:d,returnObject:e.returnObject},r)}):r.item?r.item({props:a}):U(ys,lt(a,{value:e.returnObject?C:a.value}),w)}))}}}),_P=Ue({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items");function bl(e,n){const r=Wi(n,e.itemTitle,n),s=Wi(n,e.itemValue,r),c=Wi(n,e.itemChildren),f=Wi(n,e.itemType,"item"),d=e.itemProps===!0?typeof n=="object"&&n!=null&&!Array.isArray(n)?"children"in n?di(n,["children"]):n:void 0:Wi(n,e.itemProps),a={title:r,value:s,...d};return{type:f,title:String(a.title??""),value:a.value,props:a,children:f==="item"&&Array.isArray(c)?bP(e,c):void 0,raw:n}}function bP(e,n){const r=Io(e,["itemTitle","itemValue","itemChildren","itemProps","itemType","returnObject","valueComparator"]),s=[];for(const c of n)s.push(bl(r,c));return s}function x0(e){const n=ne(()=>bP(e,e.items)),r=ne(()=>n.value.some(a=>a.value===null)),s=Dt(new Map),c=Dt([]);Ri(()=>{const a=n.value,b=new Map,C=[];for(let w=0;w<a.length;w++){const T=a[w];if(T_(T.value)||T.value===null){let A=b.get(T.value);A||(A=[],b.set(T.value,A)),A.push(T)}else C.push(T)}s.value=b,c.value=C});function f(a){const b=s.value,C=n.value,w=c.value,T=r.value,A=e.returnObject,P=!!e.valueComparator,R=e.valueComparator||Rr,O=Io(e,["itemTitle","itemValue","itemChildren","itemProps","itemType","returnObject","valueComparator"]),z=[];e:for(const $ of a){if(!T&&$===null)continue;if(A&&typeof $=="string"){z.push(bl(O,$));continue}const F=b.get($);if(P||!F){for(const H of P?C:w)if(R($,H.value)){z.push(H);continue e}z.push(bl(O,$));continue}z.push(...F)}return z}function d(a){return e.returnObject?a.map(b=>{let{raw:C}=b;return C}):a.map(b=>{let{value:C}=b;return C})}return{items:n,transformIn:f,transformOut:d}}function AV(e,n){const r=Wi(n,e.itemType,"item"),s=T_(n)?n:Wi(n,e.itemTitle),c=T_(n)?n:Wi(n,e.itemValue,void 0),f=Wi(n,e.itemChildren),d=e.itemProps===!0?di(n,["children"]):Wi(n,e.itemProps),a={title:s,value:c,...d};return{type:r,title:a.title,value:a.value,props:a,children:r==="item"&&f?xP(e,f):void 0,raw:n}}function xP(e,n){const r=[];for(const s of n)r.push(AV(e,s));return r}function wP(e){return{items:ne(()=>xP(e,e.items))}}const SP=Ue({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:an,collapseIcon:an,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Lr(),"onClick:select":Lr(),"onUpdate:opened":Lr(),...wV({selectStrategy:"single-leaf",openStrategy:"list"}),...ya(),...Zt(),...fr(),...Zi(),...nr(),..._P(),...vi(),...xn(),...Un(),...es({variant:"text"})},"VList"),Bd=ht()({name:"VList",props:SP(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:r}=n;const{items:s}=wP(e),{themeClasses:c}=Jn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{borderClasses:a}=Ta(e),{densityClasses:b}=aa(e),{dimensionStyles:C}=Ki(e),{elevationClasses:w}=kr(e),{roundedClasses:T}=Vi(e),{children:A,open:P,parents:R,select:O,getPath:z}=SV(e),$=Me(()=>e.lines?`v-list--${e.lines}-line`:void 0),F=Me(()=>e.activeColor),H=Me(()=>e.baseColor),Y=Me(()=>e.color);sP({filterable:e.filterable}),Li({VListGroup:{activeColor:F,baseColor:H,color:Y,expandIcon:Me(()=>e.expandIcon),collapseIcon:Me(()=>e.collapseIcon)},VListItem:{activeClass:Me(()=>e.activeClass),activeColor:F,baseColor:H,color:Y,density:Me(()=>e.density),disabled:Me(()=>e.disabled),lines:Me(()=>e.lines),nav:Me(()=>e.nav),slim:Me(()=>e.slim),variant:Me(()=>e.variant)}});const te=Dt(!1),Q=et();function ce(be){te.value=!0}function oe(be){te.value=!1}function he(be){var je;!te.value&&!(be.relatedTarget&&((je=Q.value)!=null&&je.contains(be.relatedTarget)))&&ae()}function pe(be){const je=be.target;if(!(!Q.value||["INPUT","TEXTAREA"].includes(je.tagName))){if(be.key==="ArrowDown")ae("next");else if(be.key==="ArrowUp")ae("prev");else if(be.key==="Home")ae("first");else if(be.key==="End")ae("last");else return;be.preventDefault()}}function _e(be){te.value=!0}function ae(be){if(Q.value)return Fu(Q.value,be)}return _t(()=>U(e.tag,{ref:Q,class:gt(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},c.value,f.value,a.value,b.value,w.value,$.value,T.value,e.class]),style:Bt([d.value,C.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:ce,onFocusout:oe,onFocus:he,onKeydown:pe,onMousedown:_e},{default:()=>[U(yP,{items:s.value,returnObject:e.returnObject},r)]})),{open:P,select:O,focus:ae,children:A,parents:R,getPath:z}}}),EV=Ao("v-list-img"),MV=Ue({start:Boolean,end:Boolean,...Zt(),...xn()},"VListItemAction"),CP=ht()({name:"VListItemAction",props:MV(),setup(e,n){let{slots:r}=n;return _t(()=>U(e.tag,{class:gt(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Bt(e.style)},r)),{}}}),DV=Ue({start:Boolean,end:Boolean,...Zt(),...xn()},"VListItemMedia"),RV=ht()({name:"VListItemMedia",props:DV(),setup(e,n){let{slots:r}=n;return _t(()=>U(e.tag,{class:gt(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Bt(e.style)},r)),{}}});function Xy(e,n){return{x:e.x+n.x,y:e.y+n.y}}function LV(e,n){return{x:e.x-n.x,y:e.y-n.y}}function mS(e,n){if(e.side==="top"||e.side==="bottom"){const{side:r,align:s}=e,c=s==="left"?0:s==="center"?n.width/2:s==="right"?n.width:s,f=r==="top"?0:r==="bottom"?n.height:r;return Xy({x:c,y:f},n)}else if(e.side==="left"||e.side==="right"){const{side:r,align:s}=e,c=r==="left"?0:r==="right"?n.width:r,f=s==="top"?0:s==="center"?n.height/2:s==="bottom"?n.height:s;return Xy({x:c,y:f},n)}return Xy({x:n.width/2,y:n.height/2},n)}const kP={static:BV,connected:FV},zV=Ue({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in kP},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function VV(e,n){const r=et({}),s=et();Yn&&ia(()=>!!(n.isActive.value&&e.locationStrategy),a=>{var b,C;Ot(()=>e.locationStrategy,a),hr(()=>{window.removeEventListener("resize",c),visualViewport==null||visualViewport.removeEventListener("resize",f),visualViewport==null||visualViewport.removeEventListener("scroll",d),s.value=void 0}),window.addEventListener("resize",c,{passive:!0}),visualViewport==null||visualViewport.addEventListener("resize",f,{passive:!0}),visualViewport==null||visualViewport.addEventListener("scroll",d,{passive:!0}),typeof e.locationStrategy=="function"?s.value=(b=e.locationStrategy(n,e,r))==null?void 0:b.updateLocation:s.value=(C=kP[e.locationStrategy](n,e,r))==null?void 0:C.updateLocation});function c(a){var b;(b=s.value)==null||b.call(s,a)}function f(a){var b;(b=s.value)==null||b.call(s,a)}function d(a){var b;(b=s.value)==null||b.call(s,a)}return{contentStyles:r,updateLocation:s}}function BV(){}function OV(e,n){const r=e0(e);return n?r.x+=parseFloat(e.style.right||0):r.x-=parseFloat(e.style.left||0),r.y-=parseFloat(e.style.top||0),r}function FV(e,n,r){(Array.isArray(e.target.value)||UR(e.target.value))&&Object.assign(r.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:c,preferredOrigin:f}=Qb(()=>{const $=I_(n.location,e.isRtl.value),F=n.origin==="overlap"?$:n.origin==="auto"?Uy($):I_(n.origin,e.isRtl.value);return $.side===F.side&&$.align===Gy(F).align?{preferredAnchor:L1($),preferredOrigin:L1(F)}:{preferredAnchor:$,preferredOrigin:F}}),[d,a,b,C]=["minWidth","minHeight","maxWidth","maxHeight"].map($=>ne(()=>{const F=parseFloat(n[$]);return isNaN(F)?1/0:F})),w=ne(()=>{if(Array.isArray(n.offset))return n.offset;if(typeof n.offset=="string"){const $=n.offset.split(" ").map(parseFloat);return $.length<2&&$.push(0),$}return typeof n.offset=="number"?[n.offset,0]:[0,0]});let T=!1,A=-1;const P=new Xk(4),R=new ResizeObserver(()=>{if(!T)return;if(requestAnimationFrame(F=>{F!==A&&P.clear(),requestAnimationFrame(H=>{A=H})}),P.isFull){const F=P.values();if(Rr(F.at(-1),F.at(-3))&&!Rr(F.at(-1),F.at(-2)))return}const $=z();$&&P.push($.flipped)});Ot([e.target,e.contentEl],($,F)=>{let[H,Y]=$,[te,Q]=F;te&&!Array.isArray(te)&&R.unobserve(te),H&&!Array.isArray(H)&&R.observe(H),Q&&R.unobserve(Q),Y&&R.observe(Y)},{immediate:!0}),hr(()=>{R.disconnect()});let O=new Ns({x:0,y:0,width:0,height:0});function z(){if(T=!1,requestAnimationFrame(()=>T=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(O=nT(e.target.value));const $=OV(e.contentEl.value,e.isRtl.value),F=yg(e.contentEl.value),H=12;F.length||(F.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||($.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),$.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const Y=F.reduce((be,je)=>{const Ve=dR(je);return be?new Ns({x:Math.max(be.left,Ve.left),y:Math.max(be.top,Ve.top),width:Math.min(be.right,Ve.right)-Math.max(be.left,Ve.left),height:Math.min(be.bottom,Ve.bottom)-Math.max(be.top,Ve.top)}):Ve},void 0);Y.x+=H,Y.y+=H,Y.width-=H*2,Y.height-=H*2;let te={anchor:c.value,origin:f.value};function Q(be){const je=new Ns($),Ve=mS(be.anchor,O),Fe=mS(be.origin,je);let{x:Ke,y:mt}=LV(Ve,Fe);switch(be.anchor.side){case"top":mt-=w.value[0];break;case"bottom":mt+=w.value[0];break;case"left":Ke-=w.value[0];break;case"right":Ke+=w.value[0];break}switch(be.anchor.align){case"top":mt-=w.value[1];break;case"bottom":mt+=w.value[1];break;case"left":Ke-=w.value[1];break;case"right":Ke+=w.value[1];break}return je.x+=Ke,je.y+=mt,je.width=Math.min(je.width,b.value),je.height=Math.min(je.height,C.value),{overflows:V1(je,Y),x:Ke,y:mt}}let ce=0,oe=0;const he={x:0,y:0},pe={x:!1,y:!1};let _e=-1;for(;!(_e++>10);){const{x:be,y:je,overflows:Ve}=Q(te);ce+=be,oe+=je,$.x+=be,$.y+=je;{const Fe=z1(te.anchor),Ke=Ve.x.before||Ve.x.after,mt=Ve.y.before||Ve.y.after;let ft=!1;if(["x","y"].forEach(ze=>{if(ze==="x"&&Ke&&!pe.x||ze==="y"&&mt&&!pe.y){const Se={anchor:{...te.anchor},origin:{...te.origin}},Ie=ze==="x"?Fe==="y"?Gy:Uy:Fe==="y"?Uy:Gy;Se.anchor=Ie(Se.anchor),Se.origin=Ie(Se.origin);const{overflows:Qe}=Q(Se);(Qe[ze].before<=Ve[ze].before&&Qe[ze].after<=Ve[ze].after||Qe[ze].before+Qe[ze].after<(Ve[ze].before+Ve[ze].after)/2)&&(te=Se,ft=pe[ze]=!0)}}),ft)continue}Ve.x.before&&(ce+=Ve.x.before,$.x+=Ve.x.before),Ve.x.after&&(ce-=Ve.x.after,$.x-=Ve.x.after),Ve.y.before&&(oe+=Ve.y.before,$.y+=Ve.y.before),Ve.y.after&&(oe-=Ve.y.after,$.y-=Ve.y.after);{const Fe=V1($,Y);he.x=Y.width-Fe.x.before-Fe.x.after,he.y=Y.height-Fe.y.before-Fe.y.after,ce+=Fe.x.before,$.x+=Fe.x.before,oe+=Fe.y.before,$.y+=Fe.y.before}break}const ae=z1(te.anchor);return Object.assign(r.value,{"--v-overlay-anchor-origin":`${te.anchor.side} ${te.anchor.align}`,transformOrigin:`${te.origin.side} ${te.origin.align}`,top:Gt(Jy(oe)),left:e.isRtl.value?void 0:Gt(Jy(ce)),right:e.isRtl.value?Gt(Jy(-ce)):void 0,minWidth:Gt(ae==="y"?Math.min(d.value,O.width):d.value),maxWidth:Gt(pS(ci(he.x,d.value===1/0?0:d.value,b.value))),maxHeight:Gt(pS(ci(he.y,a.value===1/0?0:a.value,C.value)))}),{available:he,contentBox:$,flipped:pe}}return Ot(()=>[c.value,f.value,n.offset,n.minWidth,n.minHeight,n.maxWidth,n.maxHeight],()=>z()),Dn(()=>{const $=z();if(!$)return;const{available:F,contentBox:H}=$;H.height>F.y&&requestAnimationFrame(()=>{z(),requestAnimationFrame(()=>{z()})})}),{updateLocation:z}}function Jy(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function pS(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let H_=!0;const wg=[];function $V(e){!H_||wg.length?(wg.push(e),q_()):(H_=!1,e(),q_())}let gS=-1;function q_(){cancelAnimationFrame(gS),gS=requestAnimationFrame(()=>{const e=wg.shift();e&&e(),wg.length?q_():H_=!0})}const rg={none:null,close:UV,block:GV,reposition:HV},jV=Ue({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in rg}},"VOverlay-scroll-strategies");function NV(e,n){if(!Yn)return;let r;Ri(async()=>{r==null||r.stop(),n.isActive.value&&e.scrollStrategy&&(r=Md(),await new Promise(s=>setTimeout(s)),r.active&&r.run(()=>{var s;typeof e.scrollStrategy=="function"?e.scrollStrategy(n,e,r):(s=rg[e.scrollStrategy])==null||s.call(rg,n,e,r)}))}),hr(()=>{r==null||r.stop()})}function UV(e){function n(r){e.isActive.value=!1}TP(e.targetEl.value??e.contentEl.value,n)}function GV(e,n){var d;const r=(d=e.root.value)==null?void 0:d.offsetParent,s=[...new Set([...yg(e.targetEl.value,n.contained?r:void 0),...yg(e.contentEl.value,n.contained?r:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),c=window.innerWidth-document.documentElement.offsetWidth,f=(a=>a0(a)&&a)(r||document.documentElement);f&&e.root.value.classList.add("v-overlay--scroll-blocked"),s.forEach((a,b)=>{a.style.setProperty("--v-body-scroll-x",Gt(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",Gt(-a.scrollTop)),a!==document.documentElement&&a.style.setProperty("--v-scrollbar-offset",Gt(c)),a.classList.add("v-overlay-scroll-blocked")}),hr(()=>{s.forEach((a,b)=>{const C=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),w=parseFloat(a.style.getPropertyValue("--v-body-scroll-y")),T=a.style.scrollBehavior;a.style.scrollBehavior="auto",a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-C,a.scrollTop=-w,a.style.scrollBehavior=T}),f&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function HV(e,n,r){let s=!1,c=-1,f=-1;function d(a){$V(()=>{var w,T;const b=performance.now();(T=(w=e.updateLocation).value)==null||T.call(w,a),s=(performance.now()-b)/(1e3/60)>2})}f=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{r.run(()=>{TP(e.targetEl.value??e.contentEl.value,a=>{s?(cancelAnimationFrame(c),c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{d(a)})})):d(a)})})}),hr(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(f),cancelAnimationFrame(c)})}function TP(e,n){const r=[document,...yg(e)];r.forEach(s=>{s.addEventListener("scroll",n,{passive:!0})}),hr(()=>{r.forEach(s=>{s.removeEventListener("scroll",n)})})}const W_=Symbol.for("vuetify:v-menu"),w0=Ue({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function S0(e,n){let r=()=>{};function s(d){r==null||r();const a=Number(d?e.openDelay:e.closeDelay);return new Promise(b=>{r=aR(a,()=>{n==null||n(d),b(d)})})}function c(){return s(!0)}function f(){return s(!1)}return{clearDelay:r,runOpenDelay:c,runCloseDelay:f}}const qV=Ue({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...w0()},"VOverlay-activator");function WV(e,n){let{isActive:r,isTop:s,contentEl:c}=n;const f=ji("useActivator"),d=et();let a=!1,b=!1,C=!0;const w=ne(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),T=ne(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!w.value),{runOpenDelay:A,runCloseDelay:P}=S0(e,oe=>{oe===(e.openOnHover&&a||w.value&&b)&&!(e.openOnHover&&r.value&&!s.value)&&(r.value!==oe&&(C=!0),r.value=oe)}),R=et(),O={onClick:oe=>{oe.stopPropagation(),d.value=oe.currentTarget||oe.target,r.value||(R.value=[oe.clientX,oe.clientY]),r.value=!r.value},onMouseenter:oe=>{var he;(he=oe.sourceCapabilities)!=null&&he.firesTouchEvents||(a=!0,d.value=oe.currentTarget||oe.target,A())},onMouseleave:oe=>{a=!1,P()},onFocus:oe=>{Rd(oe.target,":focus-visible")!==!1&&(b=!0,oe.stopPropagation(),d.value=oe.currentTarget||oe.target,A())},onBlur:oe=>{b=!1,oe.stopPropagation(),P()}},z=ne(()=>{const oe={};return T.value&&(oe.onClick=O.onClick),e.openOnHover&&(oe.onMouseenter=O.onMouseenter,oe.onMouseleave=O.onMouseleave),w.value&&(oe.onFocus=O.onFocus,oe.onBlur=O.onBlur),oe}),$=ne(()=>{const oe={};if(e.openOnHover&&(oe.onMouseenter=()=>{a=!0,A()},oe.onMouseleave=()=>{a=!1,P()}),w.value&&(oe.onFocusin=()=>{b=!0,A()},oe.onFocusout=()=>{b=!1,P()}),e.closeOnContentClick){const he=bn(W_,null);oe.onClick=()=>{r.value=!1,he==null||he.closeParents()}}return oe}),F=ne(()=>{const oe={};return e.openOnHover&&(oe.onMouseenter=()=>{C&&(a=!0,C=!1,A())},oe.onMouseleave=()=>{a=!1,P()}),oe});Ot(s,oe=>{var he;oe&&(e.openOnHover&&!a&&(!w.value||!b)||w.value&&!b&&(!e.openOnHover||!a))&&!((he=c.value)!=null&&he.contains(document.activeElement))&&(r.value=!1)}),Ot(r,oe=>{oe||setTimeout(()=>{R.value=void 0})},{flush:"post"});const H=gg();Ri(()=>{H.value&&Dn(()=>{d.value=H.el})});const Y=gg(),te=ne(()=>e.target==="cursor"&&R.value?R.value:Y.value?Y.el:PP(e.target,f)||d.value),Q=ne(()=>Array.isArray(te.value)?void 0:te.value);let ce;return Ot(()=>!!e.activator,oe=>{oe&&Yn?(ce=Md(),ce.run(()=>{ZV(e,f,{activatorEl:d,activatorEvents:z})})):ce&&ce.stop()},{flush:"post",immediate:!0}),hr(()=>{ce==null||ce.stop()}),{activatorEl:d,activatorRef:H,target:te,targetEl:Q,targetRef:Y,activatorEvents:z,contentEvents:$,scrimEvents:F}}function ZV(e,n,r){let{activatorEl:s,activatorEvents:c}=r;Ot(()=>e.activator,(b,C)=>{if(C&&b!==C){const w=a(C);w&&d(w)}b&&Dn(()=>f())},{immediate:!0}),Ot(()=>e.activatorProps,()=>{f()}),hr(()=>{d()});function f(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&hR(b,lt(c.value,C))}function d(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&fR(b,lt(c.value,C))}function a(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const C=PP(b,n);return s.value=(C==null?void 0:C.nodeType)===Node.ELEMENT_NODE?C:void 0,s.value}}function PP(e,n){var s,c;if(!e)return;let r;if(e==="parent"){let f=(c=(s=n==null?void 0:n.proxy)==null?void 0:s.$el)==null?void 0:c.parentNode;for(;f!=null&&f.hasAttribute("data-no-activator");)f=f.parentNode;r=f}else typeof e=="string"?r=document.querySelector(e):"$el"in e?r=e.$el:r=e;return r}function IP(){if(!Yn)return Dt(!1);const{ssr:e}=Qa();if(e){const n=Dt(!1);return zi(()=>{n.value=!0}),n}else return Dt(!0)}const C0=Ue({eager:Boolean},"lazy");function k0(e,n){const r=Dt(!1),s=Me(()=>r.value||e.eager||n.value);Ot(n,()=>r.value=!0);function c(){e.eager||(r.value=!1)}return{isBooted:r,hasContent:s,onAfterLeave:c}}function sc(){const n=ji("useScopeId").vnode.scopeId;return{scopeId:n?{[n]:""}:void 0}}const vS=Symbol.for("vuetify:stack"),gf=wr([]);function KV(e,n,r){const s=ji("useStack"),c=!r,f=bn(vS,void 0),d=wr({activeChildren:new Set});ri(vS,d);const a=Dt(Number(Us(n)));ia(e,()=>{var T;const w=(T=gf.at(-1))==null?void 0:T[1];a.value=w?w+10:Number(Us(n)),c&&gf.push([s.uid,a.value]),f==null||f.activeChildren.add(s.uid),hr(()=>{if(c){const A=fn(gf).findIndex(P=>P[0]===s.uid);gf.splice(A,1)}f==null||f.activeChildren.delete(s.uid)})});const b=Dt(!0);c&&Ri(()=>{var T;const w=((T=gf.at(-1))==null?void 0:T[0])===s.uid;setTimeout(()=>b.value=w)});const C=Me(()=>!d.activeChildren.size);return{globalTop:Ud(b),localTop:C,stackStyles:Me(()=>({zIndex:a.value}))}}function YV(e){return{teleportTarget:ne(()=>{const r=e();if(r===!0||!Yn)return;const s=r===!1?document.body:typeof r=="string"?document.querySelector(r):r;if(s==null)return;let c=[...s.children].find(f=>f.matches(".v-overlay-container"));return c||(c=document.createElement("div"),c.className="v-overlay-container",s.appendChild(c)),c})}}function XV(){return!0}function AP(e,n,r){if(!e||EP(e,r)===!1)return!1;const s=fT(n);if(typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&s.host===e.target)return!1;const c=(typeof r.value=="object"&&r.value.include||(()=>[]))();return c.push(n),!c.some(f=>f==null?void 0:f.contains(e.target))}function EP(e,n){return(typeof n.value=="object"&&n.value.closeConditional||XV)(e)}function JV(e,n,r){const s=typeof r.value=="function"?r.value:r.value.handler;e.shadowTarget=e.target,n._clickOutside.lastMousedownWasOutside&&AP(e,n,r)&&setTimeout(()=>{EP(e,r)&&s&&s(e)},0)}function yS(e,n){const r=fT(e);n(document),typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&n(r)}const Z_={mounted(e,n){const r=c=>JV(c,e,n),s=c=>{e._clickOutside.lastMousedownWasOutside=AP(c,e,n)};yS(e,c=>{c.addEventListener("click",r,!0),c.addEventListener("mousedown",s,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[n.instance.$.uid]={onClick:r,onMousedown:s}},beforeUnmount(e,n){e._clickOutside&&(yS(e,r=>{var f;if(!r||!((f=e._clickOutside)!=null&&f[n.instance.$.uid]))return;const{onClick:s,onMousedown:c}=e._clickOutside[n.instance.$.uid];r.removeEventListener("click",s,!0),r.removeEventListener("mousedown",c,!0)}),delete e._clickOutside[n.instance.$.uid])}};function QV(e){const{modelValue:n,color:r,...s}=e;return U(kl,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&X("div",lt({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},s),null)]})}const xm=Ue({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...qV(),...Zt(),...Zi(),...C0(),...zV(),...jV(),...Un(),...ws()},"VOverlay"),qs=ht()({name:"VOverlay",directives:{vClickOutside:Z_},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...xm()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{slots:r,attrs:s,emit:c}=n;const f=ji("VOverlay"),d=et(),a=et(),b=et(),C=tn(e,"modelValue"),w=ne({get:()=>C.value,set:Re=>{Re&&e.disabled||(C.value=Re)}}),{themeClasses:T}=Jn(e),{rtlClasses:A,isRtl:P}=tr(),{hasContent:R,onAfterLeave:O}=k0(e,w),z=ti(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:$,localTop:F,stackStyles:H}=KV(w,()=>e.zIndex,e._disableGlobalStack),{activatorEl:Y,activatorRef:te,target:Q,targetEl:ce,targetRef:oe,activatorEvents:he,contentEvents:pe,scrimEvents:_e}=WV(e,{isActive:w,isTop:F,contentEl:b}),{teleportTarget:ae}=YV(()=>{var st,Ye,St;const Re=e.attach||e.contained;if(Re)return Re;const vt=((st=Y==null?void 0:Y.value)==null?void 0:st.getRootNode())||((St=(Ye=f.proxy)==null?void 0:Ye.$el)==null?void 0:St.getRootNode());return vt instanceof ShadowRoot?vt:!1}),{dimensionStyles:be}=Ki(e),je=IP(),{scopeId:Ve}=sc();Ot(()=>e.disabled,Re=>{Re&&(w.value=!1)});const{contentStyles:Fe,updateLocation:Ke}=VV(e,{isRtl:P,contentEl:b,target:Q,isActive:w});NV(e,{root:d,contentEl:b,targetEl:ce,isActive:w,updateLocation:Ke});function mt(Re){c("click:outside",Re),e.persistent?jt():w.value=!1}function ft(Re){return w.value&&$.value&&(!e.scrim||Re.target===a.value||Re instanceof MouseEvent&&Re.shadowTarget===a.value)}Yn&&Ot(w,Re=>{Re?window.addEventListener("keydown",ze):window.removeEventListener("keydown",ze)},{immediate:!0}),Vr(()=>{Yn&&window.removeEventListener("keydown",ze)});function ze(Re){var vt,st,Ye;Re.key==="Escape"&&$.value&&((vt=b.value)!=null&&vt.contains(document.activeElement)||c("keydown",Re),e.persistent?jt():(w.value=!1,(st=b.value)!=null&&st.contains(document.activeElement)&&((Ye=Y.value)==null||Ye.focus())))}function Se(Re){Re.key==="Escape"&&!$.value||c("keydown",Re)}const Ie=FT();ia(()=>e.closeOnBack,()=>{Vz(Ie,Re=>{$.value&&w.value?(Re(!1),e.persistent?jt():w.value=!1):Re()})});const Qe=et();Ot(()=>w.value&&(e.absolute||e.contained)&&ae.value==null,Re=>{if(Re){const vt=r0(d.value);vt&&vt!==document.scrollingElement&&(Qe.value=vt.scrollTop)}});function jt(){e.noClickAnimation||b.value&&zu(b.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Hf})}function Tt(){c("afterEnter")}function xt(){O(),c("afterLeave")}return _t(()=>{var Re;return X(Wt,null,[(Re=r.activator)==null?void 0:Re.call(r,{isActive:w.value,targetRef:oe,props:lt({ref:te},he.value,e.activatorProps)}),je.value&&R.value&&U(xM,{disabled:!ae.value,to:ae.value},{default:()=>[X("div",lt({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":w.value,"v-overlay--contained":e.contained},T.value,A.value,e.class],style:[H.value,{"--v-overlay-opacity":e.opacity,top:Gt(Qe.value)},e.style],ref:d,onKeydown:Se},Ve,s),[U(QV,lt({color:z,modelValue:w.value&&!!e.scrim,ref:a},_e.value),null),U(na,{appear:!0,persisted:!0,transition:e.transition,target:Q.value,onAfterEnter:Tt,onAfterLeave:xt},{default:()=>{var vt;return[Di(X("div",lt({ref:b,class:["v-overlay__content",e.contentClass],style:[be.value,Fe.value]},pe.value,e.contentProps),[(vt=r.default)==null?void 0:vt.call(r,{isActive:w})]),[[xs,w.value],[Z_,{handler:mt,closeConditional:ft,include:()=>[Y.value]}]])]}})])]})])}),{activatorEl:Y,scrimEl:a,target:Q,animateClick:jt,contentEl:b,globalTop:$,localTop:F,updateLocation:Ke}}}),MP=Ue({id:String,submenu:Boolean,disableInitialFocus:Boolean,...di(xm({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Ug}}),["absolute"])},"VMenu"),Od=ht()({name:"VMenu",props:MP(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),{scopeId:c}=sc(),{isRtl:f}=tr(),d=va(),a=Me(()=>e.id||`v-menu-${d}`),b=et(),C=bn(W_,null),w=Dt(new Set);ri(W_,{register(){w.value.add(d)},unregister(){w.value.delete(d)},closeParents(z){setTimeout(()=>{var $;!w.value.size&&!e.persistent&&(z==null||($=b.value)!=null&&$.contentEl&&!sR(z,b.value.contentEl))&&(s.value=!1,C==null||C.closeParents())},40)}}),Vr(()=>{C==null||C.unregister(),document.removeEventListener("focusin",T)}),jb(()=>s.value=!1);async function T(z){var H,Y,te;const $=z.relatedTarget,F=z.target;await Dn(),s.value&&$!==F&&((H=b.value)!=null&&H.contentEl)&&((Y=b.value)!=null&&Y.globalTop)&&![document,b.value.contentEl].includes(F)&&!b.value.contentEl.contains(F)&&((te=Gf(b.value.contentEl)[0])==null||te.focus())}Ot(s,z=>{z?(C==null||C.register(),Yn&&!e.disableInitialFocus&&document.addEventListener("focusin",T,{once:!0})):(C==null||C.unregister(),Yn&&document.removeEventListener("focusin",T))},{immediate:!0});function A(z){C==null||C.closeParents(z)}function P(z){var $,F,H,Y,te;if(!e.disabled)if(z.key==="Tab"||z.key==="Enter"&&!e.closeOnContentClick){if(z.key==="Enter"&&(z.target instanceof HTMLTextAreaElement||z.target instanceof HTMLInputElement&&z.target.closest("form")))return;z.key==="Enter"&&z.preventDefault(),Qk(Gf(($=b.value)==null?void 0:$.contentEl,!1),z.shiftKey?"prev":"next",ce=>ce.tabIndex>=0)||(s.value=!1,(H=(F=b.value)==null?void 0:F.activatorEl)==null||H.focus())}else e.submenu&&z.key===(f.value?"ArrowRight":"ArrowLeft")&&(s.value=!1,(te=(Y=b.value)==null?void 0:Y.activatorEl)==null||te.focus())}function R(z){var F;if(e.disabled)return;const $=(F=b.value)==null?void 0:F.contentEl;$&&s.value?z.key==="ArrowDown"?(z.preventDefault(),z.stopImmediatePropagation(),Fu($,"next")):z.key==="ArrowUp"?(z.preventDefault(),z.stopImmediatePropagation(),Fu($,"prev")):e.submenu&&(z.key===(f.value?"ArrowRight":"ArrowLeft")?s.value=!1:z.key===(f.value?"ArrowLeft":"ArrowRight")&&(z.preventDefault(),Fu($,"first"))):(e.submenu?z.key===(f.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(z.key))&&(s.value=!0,z.preventDefault(),setTimeout(()=>setTimeout(()=>R(z))))}const O=ne(()=>lt({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-controls":a.value,onKeydown:R},e.activatorProps));return _t(()=>{const z=qs.filterProps(e);return U(qs,lt({ref:b,id:a.value,class:["v-menu",e.class],style:e.style},z,{modelValue:s.value,"onUpdate:modelValue":$=>s.value=$,absolute:!0,activatorProps:O.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":A,onKeydown:P},c),{activator:r.activator,default:function(){for(var $=arguments.length,F=new Array($),H=0;H<$;H++)F[H]=arguments[H];return U(Sn,{root:"VMenu"},{default:()=>{var Y;return[(Y=r.default)==null?void 0:Y.call(r,...F)]}})}})}),Tr({id:a,ΨopenChildren:w},b)}}),eB=Ue({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Zt(),...ws({transition:{component:f0}})},"VCounter"),Kg=ht()({name:"VCounter",functional:!0,props:eB(),setup(e,n){let{slots:r}=n;const s=Me(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return _t(()=>U(na,{transition:e.transition},{default:()=>[Di(X("div",{class:gt(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Bt(e.style)},[r.default?r.default({counter:s.value,max:e.max,value:e.value}):s.value]),[[xs,e.active]])]})),{}}}),tB=Ue({floating:Boolean,...Zt()},"VFieldLabel"),xf=ht()({name:"VFieldLabel",props:tB(),setup(e,n){let{slots:r}=n;return _t(()=>U(Kd,{class:gt(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Bt(e.style),"aria-hidden":e.floating||void 0},r)),{}}}),nB=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],wm=Ue({appendInnerIcon:an,bgColor:String,clearable:Boolean,clearIcon:{type:an,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:an,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>nB.includes(e)},"onClick:clear":Lr(),"onClick:appendInner":Lr(),"onClick:prependInner":Lr(),...Zt(),...qg(),...vi(),...Un()},"VField"),Pl=ht()({name:"VField",inheritAttrs:!1,props:{id:String,..._m(),...wm()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{themeClasses:f}=Jn(e),{loaderClasses:d}=pm(e),{focusClasses:a,isFocused:b,focus:C,blur:w}=Mo(e),{InputIcon:T}=XT(e),{roundedClasses:A}=Vi(e),{rtlClasses:P}=tr(),R=Me(()=>e.dirty||e.active),O=Me(()=>!!(e.label||c.label)),z=Me(()=>!e.singleLine&&O.value),$=va(),F=ne(()=>e.id||`input-${$}`),H=Me(()=>`${F.value}-messages`),Y=et(),te=et(),Q=et(),ce=ne(()=>["plain","underlined"].includes(e.variant)),oe=ne(()=>e.error||e.disabled?void 0:R.value&&b.value?e.color:e.baseColor),he=ne(()=>{if(!(!e.iconColor||e.glow&&!b.value))return e.iconColor===!0?oe.value:e.iconColor}),{backgroundColorClasses:pe,backgroundColorStyles:_e}=ti(()=>e.bgColor),{textColorClasses:ae,textColorStyles:be}=zr(oe);Ot(R,Fe=>{if(z.value){const Ke=Y.value.$el,mt=te.value.$el;requestAnimationFrame(()=>{const ft=e0(Ke),ze=mt.getBoundingClientRect(),Se=ze.x-ft.x,Ie=ze.y-ft.y-(ft.height/2-ze.height/2),Qe=ze.width/.75,jt=Math.abs(Qe-ft.width)>1?{maxWidth:Gt(Qe)}:void 0,Tt=getComputedStyle(Ke),xt=getComputedStyle(mt),Re=parseFloat(Tt.transitionDuration)*1e3||150,vt=parseFloat(xt.getPropertyValue("--v-field-label-scale")),st=xt.getPropertyValue("color");Ke.style.visibility="visible",mt.style.visibility="hidden",zu(Ke,{transform:`translate(${Se}px, ${Ie}px) scale(${vt})`,color:st,...jt},{duration:Re,easing:Hf,direction:Fe?"normal":"reverse"}).finished.then(()=>{Ke.style.removeProperty("visibility"),mt.style.removeProperty("visibility")})})}},{flush:"post"});const je=ne(()=>({isActive:R,isFocused:b,controlRef:Q,blur:w,focus:C}));function Ve(Fe){Fe.target!==document.activeElement&&Fe.preventDefault()}return _t(()=>{var Se,Ie,Qe;const Fe=e.variant==="outlined",Ke=!!(c["prepend-inner"]||e.prependInnerIcon),mt=!!(e.clearable||c.clear)&&!e.disabled,ft=!!(c["append-inner"]||e.appendInnerIcon||mt),ze=()=>c.label?c.label({...je.value,label:e.label,props:{for:F.value}}):e.label;return X("div",lt({class:["v-field",{"v-field--active":R.value,"v-field--appended":ft,"v-field--center-affix":e.centerAffix??!ce.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Ke,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!ze(),[`v-field--variant-${e.variant}`]:!0},f.value,pe.value,a.value,d.value,A.value,P.value,e.class],style:[_e.value,e.style],onClick:Ve},r),[X("div",{class:"v-field__overlay"},null),U(gm,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:c.loader}),Ke&&X("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&U(T,{key:"prepend-icon",name:"prependInner",color:he.value},null),(Se=c["prepend-inner"])==null?void 0:Se.call(c,je.value)]),X("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&z.value&&U(xf,{key:"floating-label",ref:te,class:gt([ae.value]),floating:!0,for:F.value,style:Bt(be.value)},{default:()=>[ze()]}),O.value&&U(xf,{key:"label",ref:Y,for:F.value},{default:()=>[ze()]}),((Ie=c.default)==null?void 0:Ie.call(c,{...je.value,props:{id:F.value,class:"v-field__input","aria-describedby":H.value},focus:C,blur:w}))??X("div",{id:F.value,class:"v-field__input","aria-describedby":H.value},null)]),mt&&U(m0,{key:"clear"},{default:()=>[Di(X("div",{class:"v-field__clearable",onMousedown:jt=>{jt.preventDefault(),jt.stopPropagation()}},[U(Sn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[c.clear?c.clear({...je.value,props:{onFocus:C,onBlur:w,onClick:e["onClick:clear"],tabindex:-1}}):U(T,{name:"clear",onFocus:C,onBlur:w,tabindex:-1},null)]})]),[[xs,e.dirty]])]}),ft&&X("div",{key:"append",class:"v-field__append-inner"},[(Qe=c["append-inner"])==null?void 0:Qe.call(c,je.value),e.appendInnerIcon&&U(T,{key:"append-icon",name:"appendInner",color:he.value},null)]),X("div",{class:gt(["v-field__outline",ae.value]),style:Bt(be.value)},[Fe&&X(Wt,null,[X("div",{class:"v-field__outline__start"},null),z.value&&X("div",{class:"v-field__outline__notch"},[U(xf,{ref:te,floating:!0,for:F.value},{default:()=>[ze()]})]),X("div",{class:"v-field__outline__end"},null)]),ce.value&&z.value&&U(xf,{ref:te,floating:!0,for:F.value},{default:()=>[ze()]})])])}),{controlRef:Q,fieldIconColor:he}}});function DP(e){function n(r,s){var c,f;!e.autofocus||!r||(f=(c=s[0].target)==null?void 0:c.focus)==null||f.call(c)}return{onIntersect:n}}const iB=["color","file","time","date","datetime-local","week","month"],Sm=Ue({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Do(),...wm()},"VTextField"),To=ht()({name:"VTextField",directives:{vIntersect:Co},inheritAttrs:!1,props:Sm(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const f=tn(e,"modelValue"),{isFocused:d,focus:a,blur:b}=Mo(e),{onIntersect:C}=DP(e),w=ne(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:(f.value??"").toString().length),T=ne(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),A=ne(()=>["plain","underlined"].includes(e.variant)),P=et(),R=et(),O=et(),z=ne(()=>iB.includes(e.type)||e.persistentPlaceholder||d.value||e.active);function $(){d.value||a(),Dn(()=>{O.value!==document.activeElement&&Dn(()=>{var Q;return(Q=O.value)==null?void 0:Q.focus()})})}function F(Q){s("mousedown:control",Q),Q.target!==O.value&&($(),Q.preventDefault())}function H(Q){s("click:control",Q)}function Y(Q,ce){Q.stopPropagation(),$(),Dn(()=>{f.value=null,ce(),Fg(e["onClick:clear"],Q)})}function te(Q){var oe;const ce=Q.target;if(f.value=ce.value,(oe=e.modelModifiers)!=null&&oe.trim&&["text","search","password","tel","url"].includes(e.type)){const he=[ce.selectionStart,ce.selectionEnd];Dn(()=>{ce.selectionStart=he[0],ce.selectionEnd=he[1]})}}return _t(()=>{const Q=!!(c.counter||e.counter!==!1&&e.counter!=null),ce=!!(Q||c.details),[oe,he]=Al(r),{modelValue:pe,..._e}=qr.filterProps(e),ae=Pl.filterProps(e);return U(qr,lt({ref:P,modelValue:f.value,"onUpdate:modelValue":be=>f.value=be,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":A.value},e.class],style:e.style},oe,_e,{centerAffix:!A.value,focused:d.value}),{...c,default:be=>{let{id:je,isDisabled:Ve,isDirty:Fe,isReadonly:Ke,isValid:mt,reset:ft}=be;return U(Pl,lt({ref:R,onMousedown:F,onClick:H,"onClick:clear":ze=>Y(ze,ft),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},ae,{id:je.value,active:z.value||Fe.value,dirty:Fe.value||e.dirty,disabled:Ve.value,focused:d.value,error:mt.value===!1}),{...c,default:ze=>{let{props:{class:Se,...Ie}}=ze;const Qe=Di(X("input",lt({ref:O,value:f.value,onInput:te,autofocus:e.autofocus,readonly:Ke.value,disabled:Ve.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:$,onBlur:b},Ie,he),null),[[Co,{handler:C},null,{once:!0}]]);return X(Wt,null,[e.prefix&&X("span",{class:"v-text-field__prefix"},[X("span",{class:"v-text-field__prefix__text"},[e.prefix])]),c.default?X("div",{class:gt(Se),"data-no-activator":""},[c.default(),Qe]):So(Qe,{class:Se}),e.suffix&&X("span",{class:"v-text-field__suffix"},[X("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:ce?be=>{var je;return X(Wt,null,[(je=c.details)==null?void 0:je.call(c,be),Q&&X(Wt,null,[X("span",null,null),U(Kg,{active:e.persistentCounter||d.value,value:w.value,max:T.value,disabled:e.disabled},c.counter)])])}:void 0})}),Tr({},P,R,O)}}),rB=Ue({renderless:Boolean,...Zt()},"VVirtualScrollItem"),RP=ht()({name:"VVirtualScrollItem",inheritAttrs:!1,props:rB(),emits:{"update:height":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{resizeRef:f,contentRect:d}=vs(void 0,"border");Ot(()=>{var a;return(a=d.value)==null?void 0:a.height},a=>{a!=null&&s("update:height",a)}),_t(()=>{var a,b;return e.renderless?X(Wt,null,[(a=c.default)==null?void 0:a.call(c,{itemRef:f})]):X("div",lt({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},r),[(b=c.default)==null?void 0:b.call(c)])})}}),aB=-1,sB=1,Qy=100,LP=Ue({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function zP(e,n){const r=Qa(),s=Dt(0);Ri(()=>{s.value=parseFloat(e.itemHeight||0)});const c=Dt(0),f=Dt(Math.ceil((parseInt(e.height)||r.height.value)/(s.value||16))||1),d=Dt(0),a=Dt(0),b=et(),C=et();let w=0;const{resizeRef:T,contentRect:A}=vs();Ri(()=>{T.value=b.value});const P=ne(()=>{var ze;return b.value===document.documentElement?r.height.value:((ze=A.value)==null?void 0:ze.height)||parseInt(e.height)||0}),R=ne(()=>!!(b.value&&C.value&&P.value&&s.value));let O=Array.from({length:n.value.length}),z=Array.from({length:n.value.length});const $=Dt(0);let F=-1;function H(ze){return O[ze]||s.value}const Y=Kk(()=>{const ze=performance.now();z[0]=0;const Se=n.value.length;for(let Ie=1;Ie<=Se-1;Ie++)z[Ie]=(z[Ie-1]||0)+H(Ie-1);$.value=Math.max($.value,performance.now()-ze)},$),te=Ot(R,ze=>{ze&&(te(),w=C.value.offsetTop,Y.immediate(),Fe(),~F&&Dn(()=>{Yn&&window.requestAnimationFrame(()=>{mt(F),F=-1})}))});hr(()=>{Y.clear()});function Q(ze,Se){const Ie=O[ze],Qe=s.value;s.value=Qe?Math.min(s.value,Se):Se,(Ie!==Se||Qe!==s.value)&&(O[ze]=Se,Y())}function ce(ze){ze=ci(ze,0,n.value.length-1);const Se=Math.floor(ze),Ie=ze%1,Qe=Se+1,jt=z[Se]||0,Tt=z[Qe]||jt;return jt+(Tt-jt)*Ie}function oe(ze){return oB(z,ze)}let he=0,pe=0,_e=0;Ot(P,(ze,Se)=>{Se&&(Fe(),ze<Se&&requestAnimationFrame(()=>{pe=0,Fe()}))});let ae=-1;function be(){if(!b.value||!C.value)return;const ze=b.value.scrollTop,Se=performance.now();Se-_e>500?(pe=Math.sign(ze-he),w=C.value.offsetTop):pe=ze-he,he=ze,_e=Se,window.clearTimeout(ae),ae=window.setTimeout(je,500),Fe()}function je(){!b.value||!C.value||(pe=0,_e=0,window.clearTimeout(ae),Fe())}let Ve=-1;function Fe(){cancelAnimationFrame(Ve),Ve=requestAnimationFrame(Ke)}function Ke(){if(!b.value||!P.value||!s.value)return;const ze=he-w,Se=Math.sign(pe),Ie=Math.max(0,ze-Qy),Qe=ci(oe(Ie),0,n.value.length),jt=ze+P.value+Qy,Tt=ci(oe(jt)+1,Qe+1,n.value.length);if((Se!==aB||Qe<c.value)&&(Se!==sB||Tt>f.value)){const xt=ce(c.value)-ce(Qe),Re=ce(Tt)-ce(f.value);Math.max(xt,Re)>Qy?(c.value=Qe,f.value=Tt):(Qe<=0&&(c.value=Qe),Tt>=n.value.length&&(f.value=Tt))}d.value=ce(c.value),a.value=ce(n.value.length)-ce(f.value)}function mt(ze){const Se=ce(ze);!b.value||ze&&!Se?F=ze:b.value.scrollTop=Se}const ft=ne(()=>n.value.slice(c.value,f.value).map((ze,Se)=>{const Ie=Se+c.value;return{raw:ze,index:Ie,key:Wi(ze,e.itemKey,Ie)}}));return Ot(n,()=>{O=Array.from({length:n.value.length}),z=Array.from({length:n.value.length}),Y.immediate(),Fe()},{deep:1}),{calculateVisibleItems:Fe,containerRef:b,markerRef:C,computedItems:ft,paddingTop:d,paddingBottom:a,scrollToIndex:mt,handleScroll:be,handleScrollend:je,handleItemResize:Q}}function oB(e,n){let r=e.length-1,s=0,c=0,f=null,d=-1;if(e[r]<n)return r;for(;s<=r;)if(c=s+r>>1,f=e[c],f>n)r=c-1;else if(f<n)d=c,s=c+1;else return f===n?c:s;return d}const lB=Ue({items:{type:Array,default:()=>[]},renderless:Boolean,...LP(),...Zt(),...Zi()},"VVirtualScroll"),Yg=ht()({name:"VVirtualScroll",props:lB(),setup(e,n){let{slots:r}=n;const s=ji("VVirtualScroll"),{dimensionStyles:c}=Ki(e),{calculateVisibleItems:f,containerRef:d,markerRef:a,handleScroll:b,handleScrollend:C,handleItemResize:w,scrollToIndex:T,paddingTop:A,paddingBottom:P,computedItems:R}=zP(e,Me(()=>e.items));return ia(()=>e.renderless,()=>{function O(){var F,H;const $=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";d.value===document.documentElement?(document[$]("scroll",b,{passive:!0}),document[$]("scrollend",C)):((F=d.value)==null||F[$]("scroll",b,{passive:!0}),(H=d.value)==null||H[$]("scrollend",C))}zi(()=>{d.value=r0(s.vnode.el,!0),O(!0)}),hr(O)}),_t(()=>{const O=R.value.map(z=>U(RP,{key:z.key,renderless:e.renderless,"onUpdate:height":$=>w(z.index,$)},{default:$=>{var F;return(F=r.default)==null?void 0:F.call(r,{item:z.raw,index:z.index,...$})}}));return e.renderless?X(Wt,null,[X("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:Gt(A.value)}},null),O,X("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Gt(P.value)}},null)]):X("div",{ref:d,class:gt(["v-virtual-scroll",e.class]),onScrollPassive:b,onScrollend:C,style:Bt([c.value,e.style])},[X("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:Gt(A.value),paddingBottom:Gt(P.value)}},[O])])}),{calculateVisibleItems:f,scrollToIndex:T}}});function T0(e,n){const r=Dt(!1);let s;function c(a){cancelAnimationFrame(s),r.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{r.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(r.value){const b=Ot(r,()=>{b(),a()})}else a()})}async function d(a){var w,T;if(a.key==="Tab"&&((w=n.value)==null||w.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const b=(T=e.value)==null?void 0:T.$el;if(!b)return;(a.key==="Home"||a.key==="End")&&b.scrollTo({top:a.key==="Home"?0:b.scrollHeight,behavior:"smooth"}),await f();const C=b.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const A=b.getBoundingClientRect().top;for(const P of C)if(P.getBoundingClientRect().top>=A){P.focus();break}}else{const A=b.getBoundingClientRect().bottom;for(const P of[...C].reverse())if(P.getBoundingClientRect().bottom<=A){P.focus();break}}}return{onScrollPassive:c,onKeydown:d}}const P0=Ue({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:an,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,..._P({itemChildren:!1})},"Select"),uB=Ue({...P0(),...di(Sm({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:{component:Ug}})},"VSelect"),I0=ht()({name:"VSelect",props:uB(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=gi(),c=et(),f=et(),d=et(),{items:a,transformIn:b,transformOut:C}=x0(e),w=tn(e,"modelValue",[],ze=>b(ze===null?[null]:Mi(ze)),ze=>{const Se=C(ze);return e.multiple?Se:Se[0]??null}),T=ne(()=>typeof e.counterValue=="function"?e.counterValue(w.value):typeof e.counterValue=="number"?e.counterValue:w.value.length),A=bm(e),P=ne(()=>w.value.map(ze=>ze.value)),R=Dt(!1);let O="",z=-1,$;const F=ne(()=>e.hideSelected?a.value.filter(ze=>!w.value.some(Se=>(e.valueComparator||Rr)(Se,ze))):a.value),H=ne(()=>e.hideNoData&&!F.value.length||A.isReadonly.value||A.isDisabled.value),Y=tn(e,"menu"),te=ne({get:()=>Y.value,set:ze=>{var Se;Y.value&&!ze&&((Se=f.value)!=null&&Se.ΨopenChildren.size)||ze&&H.value||(Y.value=ze)}}),Q=Me(()=>te.value?e.closeText:e.openText),ce=ne(()=>{var ze;return{...e.menuProps,activatorProps:{...((ze=e.menuProps)==null?void 0:ze.activatorProps)||{},"aria-haspopup":"listbox"}}}),oe=et(),he=T0(oe,c);function pe(ze){e.openOnClear&&(te.value=!0)}function _e(){H.value||(te.value=!te.value)}function ae(ze){Ld(ze)&&be(ze)}function be(ze){var st,Ye,St;if(!ze.key||A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ze.key)&&ze.preventDefault(),["Enter","ArrowDown"," "].includes(ze.key)&&(te.value=!0),["Escape","Tab"].includes(ze.key)&&(te.value=!1),ze.key==="Home"?(st=oe.value)==null||st.focus("first"):ze.key==="End"&&((Ye=oe.value)==null||Ye.focus("last"));const Se=1e3;if(!Ld(ze))return;const Ie=performance.now();Ie-$>Se&&(O="",z=-1),O+=ze.key.toLowerCase(),$=Ie;const Qe=F.value;function jt(){let re=Tt();return re||O.at(-1)===O.at(-2)&&(O=O.slice(0,-1),re=Tt(),re)||(z=-1,re=Tt(),re)?re:(O=ze.key.toLowerCase(),Tt())}function Tt(){for(let re=z+1;re<Qe.length;re++){const ue=Qe[re];if(ue.title.toLowerCase().startsWith(O))return[ue,re]}}const xt=jt();if(!xt)return;const[Re,vt]=xt;z=vt,(St=oe.value)==null||St.focus(vt),e.multiple||(w.value=[Re])}function je(ze){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!ze.props.disabled)if(e.multiple){const Ie=w.value.findIndex(jt=>(e.valueComparator||Rr)(jt.value,ze.value)),Qe=Se??!~Ie;if(~Ie){const jt=Qe?[...w.value,ze]:[...w.value];jt.splice(Ie,1),w.value=jt}else Qe&&(w.value=[...w.value,ze])}else{const Ie=Se!==!1;w.value=Ie?[ze]:[],Dn(()=>{te.value=!1})}}function Ve(ze){var Se;(Se=oe.value)!=null&&Se.$el.contains(ze.relatedTarget)||(te.value=!1)}function Fe(){var ze;e.eager&&((ze=d.value)==null||ze.calculateVisibleItems())}function Ke(){var ze;R.value&&((ze=c.value)==null||ze.focus())}function mt(ze){R.value=!0}function ft(ze){if(ze==null)w.value=[];else if(Rd(c.value,":autofill")||Rd(c.value,":-webkit-autofill")){const Se=a.value.find(Ie=>Ie.title===ze);Se&&je(Se)}else c.value&&(c.value.value="")}return Ot(te,()=>{if(!e.hideSelected&&te.value&&w.value.length){const ze=F.value.findIndex(Se=>w.value.some(Ie=>(e.valueComparator||Rr)(Ie.value,Se.value)));Yn&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var Se;ze>=0&&((Se=d.value)==null||Se.scrollToIndex(ze))})}}),Ot(()=>e.items,(ze,Se)=>{te.value||R.value&&!Se.length&&ze.length&&(te.value=!0)}),_t(()=>{const ze=!!(e.chips||r.chip),Se=!!(!e.hideNoData||F.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),Ie=w.value.length>0,Qe=To.filterProps(e),jt=Ie||!R.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return U(To,lt({ref:c},Qe,{modelValue:w.value.map(Tt=>Tt.props.value).join(", "),"onUpdate:modelValue":ft,focused:R.value,"onUpdate:focused":Tt=>R.value=Tt,validationValue:w.externalValue,counterValue:T.value,dirty:Ie,class:["v-select",{"v-select--active-menu":te.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":w.value.length,"v-select--selection-slot":!!r.selection},e.class],style:e.style,inputmode:"none",placeholder:jt,"onClick:clear":pe,"onMousedown:control":_e,onBlur:Ve,onKeydown:be,"aria-label":s(Q.value),title:s(Q.value)}),{...r,default:()=>X(Wt,null,[U(Od,lt({ref:f,modelValue:te.value,"onUpdate:modelValue":Tt=>te.value=Tt,activator:"parent",contentClass:"v-select__content",disabled:H.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Fe,onAfterLeave:Ke},ce.value),{default:()=>[Se&&U(Bd,lt({ref:oe,selected:P.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Tt=>Tt.preventDefault(),onKeydown:ae,onFocusin:mt,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},he,e.listProps),{default:()=>{var Tt,xt,Re;return[(Tt=r["prepend-item"])==null?void 0:Tt.call(r),!F.value.length&&!e.hideNoData&&(((xt=r["no-data"])==null?void 0:xt.call(r))??U(ys,{key:"no-data",title:s(e.noDataText)},null)),U(Yg,{ref:d,renderless:!0,items:F.value,itemKey:"value"},{default:vt=>{var Le,Ze,ut;let{item:st,index:Ye,itemRef:St}=vt;const re=lR(st.props),ue=lt(st.props,{ref:St,key:st.value,onClick:()=>je(st,null)});return st.type==="divider"?((Le=r.divider)==null?void 0:Le.call(r,{props:st.raw,index:Ye}))??U($a,lt(st.props,{key:`divider-${Ye}`}),null):st.type==="subheader"?((Ze=r.subheader)==null?void 0:Ze.call(r,{props:st.raw,index:Ye}))??U(Xd,lt(st.props,{key:`subheader-${Ye}`}),null):((ut=r.item)==null?void 0:ut.call(r,{item:st,index:Ye,props:ue}))??U(ys,lt(ue,{role:"option"}),{prepend:Je=>{let{isSelected:Pt}=Je;return X(Wt,null,[e.multiple&&!e.hideSelected?U(Hs,{key:st.value,modelValue:Pt,ripple:!1,tabindex:"-1"},null):void 0,re.prependAvatar&&U(Ja,{image:re.prependAvatar},null),re.prependIcon&&U(Xn,{icon:re.prependIcon},null)])}})}}),(Re=r["append-item"])==null?void 0:Re.call(r)]}})]}),w.value.map((Tt,xt)=>{function Re(St){St.stopPropagation(),St.preventDefault(),je(Tt,!1)}const vt={"onClick:close":Re,onKeydown(St){St.key!=="Enter"&&St.key!==" "||(St.preventDefault(),St.stopPropagation(),Re(St))},onMousedown(St){St.preventDefault(),St.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},st=ze?!!r.chip:!!r.selection,Ye=st?$g(ze?r.chip({item:Tt,index:xt,props:vt}):r.selection({item:Tt,index:xt})):void 0;if(!(st&&!Ye))return X("div",{key:Tt.value,class:"v-select__selection"},[ze?r.chip?U(Sn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Tt.title}}},{default:()=>[Ye]}):U(Yd,lt({key:"chip",closable:e.closableChips,size:"small",text:Tt.title,disabled:Tt.props.disabled},vt),null):Ye??X("span",{class:"v-select__selection-text"},[Tt.title,e.multiple&&xt<w.value.length-1&&X("span",{class:"v-select__selection-comma"},[nn(",")])])])})]),"append-inner":function(){var vt,st;for(var Tt=arguments.length,xt=new Array(Tt),Re=0;Re<Tt;Re++)xt[Re]=arguments[Re];return X(Wt,null,[(vt=r["append-inner"])==null?void 0:vt.call(r,...xt),e.menuIcon?U(Xn,{class:"v-select__menu-icon",color:(st=c.value)==null?void 0:st.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Tr({isFocused:R,menu:te,select:je},c)}}),cB=(e,n,r)=>{if(e==null||n==null)return-1;if(!n.length)return 0;e=e.toString().toLocaleLowerCase(),n=n.toString().toLocaleLowerCase();const s=[];let c=e.indexOf(n);for(;~c;)s.push([c,c+n.length]),c=e.indexOf(n,c+n.length);return s.length?s:-1};function e_(e,n){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+n.length]]:Array.isArray(e[0])?e:[e]}const Jd=Ue({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function dB(e,n,r){var a;const s=[],c=(r==null?void 0:r.default)??cB,f=r!=null&&r.filterKeys?Mi(r.filterKeys):!1,d=Object.keys((r==null?void 0:r.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return s;e:for(let b=0;b<e.length;b++){const[C,w=C]=Mi(e[b]),T={},A={};let P=-1;if((n||d>0)&&!(r!=null&&r.noFilter)){if(typeof C=="object"){if(C.type==="divider"||C.type==="subheader")continue;const z=f||Object.keys(w);for(const $ of z){const F=Wi(w,$),H=(a=r==null?void 0:r.customKeyFilter)==null?void 0:a[$];if(P=H?H(F,n,C):c(F,n,C),P!==-1&&P!==!1)H?T[$]=e_(P,n):A[$]=e_(P,n);else if((r==null?void 0:r.filterMode)==="every")continue e}}else P=c(C,n,C),P!==-1&&P!==!1&&(A.title=e_(P,n));const R=Object.keys(A).length,O=Object.keys(T).length;if(!R&&!O||(r==null?void 0:r.filterMode)==="union"&&O!==d&&!R||(r==null?void 0:r.filterMode)==="intersection"&&(O!==d||!R))continue}s.push({index:b,matches:{...A,...T}})}return s}function Qd(e,n,r,s){const c=Dt([]),f=Dt(new Map),d=ne(()=>s!=null&&s.transform?Sr(n).map(b=>[b,s.transform(b)]):Sr(n));Ri(()=>{const b=typeof r=="function"?r():Sr(r),C=typeof b!="string"&&typeof b!="number"?"":String(b),w=dB(d.value,C,{customKeyFilter:{...e.customKeyFilter,...Sr(s==null?void 0:s.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),T=Sr(n),A=[],P=new Map;w.forEach(R=>{let{index:O,matches:z}=R;const $=T[O];A.push($),P.set($.value,z)}),c.value=A,f.value=P});function a(b){return f.value.get(b.value)}return{filteredItems:c,filteredMatches:f,getMatches:a}}function VP(e,n,r){return r==null||!r.length?n:r.map((s,c)=>{const f=c===0?0:r[c-1][1],d=[X("span",{class:gt(`${e}__unmask`)},[n.slice(f,s[0])]),X("span",{class:gt(`${e}__mask`)},[n.slice(s[0],s[1])])];return c===r.length-1&&d.push(X("span",{class:gt(`${e}__unmask`)},[n.slice(s[1])])),X(Wt,null,[d])})}const hB=Ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Jd({filterKeys:["title"]}),...P0(),...di(Sm({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:!1})},"VAutocomplete"),fB=ht()({name:"VAutocomplete",props:hB(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=gi(),c=et(),f=Dt(!1),d=Dt(!0),a=Dt(!1),b=et(),C=et(),w=Dt(-1),{items:T,transformIn:A,transformOut:P}=x0(e),{textColorClasses:R,textColorStyles:O}=zr(()=>{var Ye;return(Ye=c.value)==null?void 0:Ye.color}),z=tn(e,"search",""),$=tn(e,"modelValue",[],Ye=>A(Ye===null?[null]:Mi(Ye)),Ye=>{const St=P(Ye);return e.multiple?St:St[0]??null}),F=ne(()=>typeof e.counterValue=="function"?e.counterValue($.value):typeof e.counterValue=="number"?e.counterValue:$.value.length),H=bm(e),{filteredItems:Y,getMatches:te}=Qd(e,T,()=>d.value?"":z.value),Q=ne(()=>e.hideSelected?Y.value.filter(Ye=>!$.value.some(St=>St.value===Ye.value)):Y.value),ce=ne(()=>!!(e.chips||r.chip)),oe=ne(()=>ce.value||!!r.selection),he=ne(()=>$.value.map(Ye=>Ye.props.value)),pe=ne(()=>{var St;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&z.value===((St=Q.value[0])==null?void 0:St.title))&&Q.value.length>0&&!d.value&&!a.value}),_e=ne(()=>e.hideNoData&&!Q.value.length||H.isReadonly.value||H.isDisabled.value),ae=tn(e,"menu"),be=ne({get:()=>ae.value,set:Ye=>{var St;ae.value&&!Ye&&((St=b.value)!=null&&St.ΨopenChildren.size)||Ye&&_e.value||(ae.value=Ye)}}),je=ne(()=>be.value?e.closeText:e.openText),Ve=et(),Fe=T0(Ve,c);function Ke(Ye){e.openOnClear&&(be.value=!0),z.value=""}function mt(){_e.value||(be.value=!0)}function ft(Ye){_e.value||(f.value&&(Ye.preventDefault(),Ye.stopPropagation()),be.value=!be.value)}function ze(Ye){var St;(Ld(Ye)||Ye.key==="Backspace")&&((St=c.value)==null||St.focus())}function Se(Ye){var ue,Le,Ze,ut,Je;if(H.isReadonly.value)return;const St=(ue=c.value)==null?void 0:ue.selectionStart,re=$.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Ye.key)&&Ye.preventDefault(),["Enter","ArrowDown"].includes(Ye.key)&&(be.value=!0),["Escape"].includes(Ye.key)&&(be.value=!1),pe.value&&["Enter","Tab"].includes(Ye.key)&&!$.value.some(Pt=>{let{value:ct}=Pt;return ct===Q.value[0].value})&&st(Q.value[0]),Ye.key==="ArrowDown"&&pe.value&&((Le=Ve.value)==null||Le.focus("next")),["Backspace","Delete"].includes(Ye.key)){if(!e.multiple&&oe.value&&$.value.length>0&&!z.value)return st($.value[0],!1);if(~w.value){Ye.preventDefault();const Pt=w.value;st($.value[w.value],!1),w.value=Pt>=re-1?re-2:Pt}else Ye.key==="Backspace"&&!z.value&&(w.value=re-1);return}if(e.multiple)if(Ye.key==="ArrowLeft"){if(w.value<0&&St&&St>0)return;const Pt=w.value>-1?w.value-1:re-1;if($.value[Pt])w.value=Pt;else{const ct=((Ze=z.value)==null?void 0:Ze.length)??null;w.value=-1,(ut=c.value)==null||ut.setSelectionRange(ct,ct)}}else if(Ye.key==="ArrowRight"){if(w.value<0)return;const Pt=w.value+1;$.value[Pt]?w.value=Pt:(w.value=-1,(Je=c.value)==null||Je.setSelectionRange(0,0))}else~w.value&&Ld(Ye)&&(w.value=-1)}function Ie(Ye){if(Rd(c.value,":autofill")||Rd(c.value,":-webkit-autofill")){const St=T.value.find(re=>re.title===Ye.target.value);St&&st(St)}}function Qe(){var Ye;e.eager&&((Ye=C.value)==null||Ye.calculateVisibleItems())}function jt(){var Ye;f.value&&(d.value=!0,(Ye=c.value)==null||Ye.focus())}function Tt(Ye){f.value=!0,setTimeout(()=>{a.value=!0})}function xt(Ye){a.value=!1}function Re(Ye){(Ye==null||Ye===""&&!e.multiple&&!oe.value)&&($.value=[])}const vt=Dt(!1);function st(Ye){let St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Ye||Ye.props.disabled))if(e.multiple){const re=$.value.findIndex(Le=>(e.valueComparator||Rr)(Le.value,Ye.value)),ue=St??!~re;if(~re){const Le=ue?[...$.value,Ye]:[...$.value];Le.splice(re,1),$.value=Le}else ue&&($.value=[...$.value,Ye]);e.clearOnSelect&&(z.value="")}else{const re=St!==!1;$.value=re?[Ye]:[],z.value=re&&!oe.value?Ye.title:"",Dn(()=>{be.value=!1,d.value=!0})}}return Ot(f,(Ye,St)=>{var re;Ye!==St&&(Ye?(vt.value=!0,z.value=e.multiple||oe.value?"":String(((re=$.value.at(-1))==null?void 0:re.props.title)??""),d.value=!0,Dn(()=>vt.value=!1)):(!e.multiple&&z.value==null&&($.value=[]),be.value=!1,(e.multiple||oe.value)&&(z.value=""),w.value=-1))}),Ot(z,Ye=>{!f.value||vt.value||(Ye&&(be.value=!0),d.value=!Ye)}),Ot(be,()=>{if(!e.hideSelected&&be.value&&$.value.length){const Ye=Q.value.findIndex(St=>$.value.some(re=>St.value===re.value));Yn&&window.requestAnimationFrame(()=>{var St;Ye>=0&&((St=C.value)==null||St.scrollToIndex(Ye))})}}),Ot(()=>e.items,(Ye,St)=>{be.value||f.value&&!St.length&&Ye.length&&(be.value=!0)}),_t(()=>{const Ye=!!(!e.hideNoData||Q.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),St=$.value.length>0,re=To.filterProps(e);return U(To,lt({ref:c},re,{modelValue:z.value,"onUpdate:modelValue":[ue=>z.value=ue,Re],focused:f.value,"onUpdate:focused":ue=>f.value=ue,validationValue:$.externalValue,counterValue:F.value,dirty:St,onChange:Ie,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":be.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!oe.value,"v-autocomplete--selecting-index":w.value>-1},e.class],style:e.style,readonly:H.isReadonly.value,placeholder:St?void 0:e.placeholder,"onClick:clear":Ke,"onMousedown:control":mt,onKeydown:Se}),{...r,default:()=>X(Wt,null,[U(Od,lt({ref:b,modelValue:be.value,"onUpdate:modelValue":ue=>be.value=ue,activator:"parent",contentClass:"v-autocomplete__content",disabled:_e.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Qe,onAfterLeave:jt},e.menuProps),{default:()=>[Ye&&U(Bd,lt({ref:Ve,filterable:!0,selected:he.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:ue=>ue.preventDefault(),onKeydown:ze,onFocusin:Tt,onFocusout:xt,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Fe,e.listProps),{default:()=>{var ue,Le,Ze;return[(ue=r["prepend-item"])==null?void 0:ue.call(r),!Q.value.length&&!e.hideNoData&&(((Le=r["no-data"])==null?void 0:Le.call(r))??U(ys,{key:"no-data",title:s(e.noDataText)},null)),U(Yg,{ref:C,renderless:!0,items:Q.value,itemKey:"value"},{default:ut=>{var It,sn,Ht;let{item:Je,index:Pt,itemRef:ct}=ut;const Lt=lt(Je.props,{ref:ct,key:Je.value,active:pe.value&&Pt===0?!0:void 0,onClick:()=>st(Je,null)});return Je.type==="divider"?((It=r.divider)==null?void 0:It.call(r,{props:Je.raw,index:Pt}))??U($a,lt(Je.props,{key:`divider-${Pt}`}),null):Je.type==="subheader"?((sn=r.subheader)==null?void 0:sn.call(r,{props:Je.raw,index:Pt}))??U(Xd,lt(Je.props,{key:`subheader-${Pt}`}),null):((Ht=r.item)==null?void 0:Ht.call(r,{item:Je,index:Pt,props:Lt}))??U(ys,lt(Lt,{role:"option"}),{prepend:en=>{let{isSelected:cn}=en;return X(Wt,null,[e.multiple&&!e.hideSelected?U(Hs,{key:Je.value,modelValue:cn,ripple:!1,tabindex:"-1"},null):void 0,Je.props.prependAvatar&&U(Ja,{image:Je.props.prependAvatar},null),Je.props.prependIcon&&U(Xn,{icon:Je.props.prependIcon},null)])},title:()=>{var en;return d.value?Je.title:VP("v-autocomplete",Je.title,(en=te(Je))==null?void 0:en.title)}})}}),(Ze=r["append-item"])==null?void 0:Ze.call(r)]}})]}),$.value.map((ue,Le)=>{function Ze(ct){ct.stopPropagation(),ct.preventDefault(),st(ue,!1)}const ut={"onClick:close":Ze,onKeydown(ct){ct.key!=="Enter"&&ct.key!==" "||(ct.preventDefault(),ct.stopPropagation(),Ze(ct))},onMousedown(ct){ct.preventDefault(),ct.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Je=ce.value?!!r.chip:!!r.selection,Pt=Je?$g(ce.value?r.chip({item:ue,index:Le,props:ut}):r.selection({item:ue,index:Le})):void 0;if(!(Je&&!Pt))return X("div",{key:ue.value,class:gt(["v-autocomplete__selection",Le===w.value&&["v-autocomplete__selection--selected",R.value]]),style:Bt(Le===w.value?O.value:{})},[ce.value?r.chip?U(Sn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:ue.title}}},{default:()=>[Pt]}):U(Yd,lt({key:"chip",closable:e.closableChips,size:"small",text:ue.title,disabled:ue.props.disabled},ut),null):Pt??X("span",{class:"v-autocomplete__selection-text"},[ue.title,e.multiple&&Le<$.value.length-1&&X("span",{class:"v-autocomplete__selection-comma"},[nn(",")])])])})]),"append-inner":function(){var ut,Je;for(var ue=arguments.length,Le=new Array(ue),Ze=0;Ze<ue;Ze++)Le[Ze]=arguments[Ze];return X(Wt,null,[(ut=r["append-inner"])==null?void 0:ut.call(r,...Le),e.menuIcon?U(Xn,{class:"v-autocomplete__menu-icon",color:(Je=c.value)==null?void 0:Je.fieldIconColor,icon:e.menuIcon,onMousedown:ft,onClick:eT,"aria-label":s(je.value),title:s(je.value),tabindex:"-1"},null):void 0])}})}),Tr({isFocused:f,isPristine:d,menu:be,search:z,filteredItems:Y,select:st},c)}}),mB=Ue({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:an,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Zt(),...Eo({location:"top end"}),...vi(),...xn(),...Un(),...ws({transition:"scale-rotate-transition"}),...Zi()},"VBadge"),pB=ht()({name:"VBadge",inheritAttrs:!1,props:mB(),setup(e,n){const{backgroundColorClasses:r,backgroundColorStyles:s}=ti(()=>e.color),{roundedClasses:c}=Vi(e),{t:f}=gi(),{textColorClasses:d,textColorStyles:a}=zr(()=>e.textColor),{themeClasses:b}=c0(),{locationStyles:C}=ac(e,!0,T=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(T)?Number(e.offsetY??0):["left","right"].includes(T)?Number(e.offsetX??0):0)),{dimensionStyles:w}=Ki(e);return _t(()=>{const T=Number(e.content),A=!e.max||isNaN(T)?e.content:T<=Number(e.max)?T:`${e.max}+`,[P,R]=k_(n.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return U(e.tag,lt({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},R,{style:e.style}),{default:()=>{var O,z;return[X("div",{class:"v-badge__wrapper"},[(z=(O=n.slots).default)==null?void 0:z.call(O),U(na,{transition:e.transition},{default:()=>{var $,F;return[Di(X("span",lt({class:["v-badge__badge",b.value,r.value,c.value,d.value],style:[s.value,a.value,w.value,e.inline?{}:C.value],"aria-atomic":"true","aria-label":f(e.label,T),"aria-live":"polite",role:"status"},P),[e.dot?void 0:n.slots.badge?(F=($=n.slots).badge)==null?void 0:F.call($):e.icon?U(Xn,{icon:e.icon},null):A]),[[xs,e.modelValue]])]}})])]}})}),{}}}),gB=Ue({color:String,density:String,...Zt()},"VBannerActions"),BP=ht()({name:"VBannerActions",props:gB(),setup(e,n){let{slots:r}=n;return Li({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),_t(()=>{var s;return X("div",{class:gt(["v-banner-actions",e.class]),style:Bt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),OP=Ao("v-banner-text"),vB=Ue({avatar:String,bgColor:String,color:String,icon:an,lines:String,stacked:Boolean,sticky:Boolean,text:String,...ya(),...Zt(),...fr(),...Zi(),...Xu({mobile:null}),...nr(),...Eo(),...Wd(),...vi(),...xn(),...Un()},"VBanner"),yB=ht()({name:"VBanner",props:vB(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.bgColor),{borderClasses:f}=Ta(e),{densityClasses:d}=aa(e),{displayClasses:a,mobile:b}=Qa(e),{dimensionStyles:C}=Ki(e),{elevationClasses:w}=kr(e),{locationStyles:T}=ac(e),{positionClasses:A}=Zd(e),{roundedClasses:P}=Vi(e),{themeClasses:R}=Jn(e),O=Me(()=>e.color),z=Me(()=>e.density);Li({VBannerActions:{color:O,density:z}}),_t(()=>{const $=!!(e.text||r.text),F=!!(e.avatar||e.icon),H=!!(F||r.prepend);return U(e.tag,{class:gt(["v-banner",{"v-banner--stacked":e.stacked||b.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},R.value,s.value,f.value,d.value,a.value,w.value,A.value,P.value,e.class]),style:Bt([c.value,C.value,T.value,e.style]),role:"banner"},{default:()=>{var Y;return[H&&X("div",{key:"prepend",class:"v-banner__prepend"},[r.prepend?U(Sn,{key:"prepend-defaults",disabled:!F,defaults:{VAvatar:{color:O.value,density:z.value,icon:e.icon,image:e.avatar}}},r.prepend):U(Ja,{key:"prepend-avatar",color:O.value,density:z.value,icon:e.icon,image:e.avatar},null)]),X("div",{class:"v-banner__content"},[$&&U(OP,{key:"text"},{default:()=>{var te;return[((te=r.text)==null?void 0:te.call(r))??e.text]}}),(Y=r.default)==null?void 0:Y.call(r)]),r.actions&&U(BP,{key:"actions"},r.actions)]}})})}}),_B=Ue({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...ya(),...Zt(),...fr(),...nr(),...vi(),...Ju({name:"bottom-navigation"}),...xn({tag:"header"}),...nc({selectedClass:"v-btn--selected"}),...Un()},"VBottomNavigation"),bB=ht()({name:"VBottomNavigation",props:_B(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=c0(),{borderClasses:c}=Ta(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{densityClasses:a}=aa(e),{elevationClasses:b}=kr(e),{roundedClasses:C}=Vi(e),{ssrBootStyles:w}=ec(),T=ne(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),A=tn(e,"active",e.active),{layoutItemStyles:P}=Qu({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Me(()=>"bottom"),layoutSize:Me(()=>A.value?T.value:0),elementSize:T,active:A,absolute:Me(()=>e.absolute)});return Ml(e,g0),Li({VBtn:{baseColor:Me(()=>e.baseColor),color:Me(()=>e.color),density:Me(()=>e.density),stacked:Me(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),_t(()=>U(e.tag,{class:gt(["v-bottom-navigation",{"v-bottom-navigation--active":A.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},s.value,f.value,c.value,a.value,b.value,C.value,e.class]),style:Bt([d.value,P.value,{height:Gt(T.value)},w.value,e.style])},{default:()=>[r.default&&X("div",{class:"v-bottom-navigation__content"},[r.default()])]})),{}}}),FP=Ue({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...xm({origin:"center center",scrollStrategy:"block",transition:{component:Ug},zIndex:2400})},"VDialog"),K_=ht()({name:"VDialog",props:FP(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=tn(e,"modelValue"),{scopeId:f}=sc(),d=et();function a(w){var P,R;const T=w.relatedTarget,A=w.target;if(T!==A&&((P=d.value)!=null&&P.contentEl)&&((R=d.value)!=null&&R.globalTop)&&![document,d.value.contentEl].includes(A)&&!d.value.contentEl.contains(A)){const O=Gf(d.value.contentEl);if(!O.length)return;const z=O[0],$=O[O.length-1];T===z?$.focus():z.focus()}}Vr(()=>{document.removeEventListener("focusin",a)}),Yn&&Ot(()=>c.value&&e.retainFocus,w=>{w?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0});function b(){var w;r("afterEnter"),(e.scrim||e.retainFocus)&&((w=d.value)!=null&&w.contentEl)&&!d.value.contentEl.contains(document.activeElement)&&d.value.contentEl.focus({preventScroll:!0})}function C(){r("afterLeave")}return Ot(c,async w=>{var T;w||(await Dn(),(T=d.value.activatorEl)==null||T.focus({preventScroll:!0}))}),_t(()=>{const w=qs.filterProps(e),T=lt({"aria-haspopup":"dialog"},e.activatorProps),A=lt({tabindex:-1},e.contentProps);return U(qs,lt({ref:d,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},w,{modelValue:c.value,"onUpdate:modelValue":P=>c.value=P,"aria-modal":"true",activatorProps:T,contentProps:A,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:C},f),{activator:s.activator,default:function(){for(var P=arguments.length,R=new Array(P),O=0;O<P;O++)R[O]=arguments[O];return U(Sn,{root:"VDialog"},{default:()=>{var z;return[(z=s.default)==null?void 0:z.call(s,...R)]}})}})}),Tr({},d)}}),xB=Ue({inset:Boolean,...FP({transition:"bottom-sheet-transition"})},"VBottomSheet"),wB=ht()({name:"VBottomSheet",props:xB(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue");return _t(()=>{const c=K_.filterProps(e);return U(K_,lt(c,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),r)}),{}}}),SB=Ue({divider:[Number,String],...Zt()},"VBreadcrumbsDivider"),$P=ht()({name:"VBreadcrumbsDivider",props:SB(),setup(e,n){let{slots:r}=n;return _t(()=>{var s;return X("li",{"aria-hidden":"true",class:gt(["v-breadcrumbs-divider",e.class]),style:Bt(e.style)},[((s=r==null?void 0:r.default)==null?void 0:s.call(r))??e.divider])}),{}}}),CB=Ue({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Zt(),...ym(),...xn({tag:"li"})},"VBreadcrumbsItem"),jP=ht()({name:"VBreadcrumbsItem",props:CB(),setup(e,n){let{slots:r,attrs:s}=n;const c=vm(e,s),f=ne(()=>{var b;return e.active||((b=c.isActive)==null?void 0:b.value)}),{textColorClasses:d,textColorStyles:a}=zr(()=>f.value?e.activeColor:e.color);return _t(()=>U(e.tag,{class:gt(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":f.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:f.value&&e.activeClass},d.value,e.class]),style:Bt([a.value,e.style]),"aria-current":f.value?"page":void 0},{default:()=>{var b,C;return[c.isLink.value?X("a",lt({class:"v-breadcrumbs-item--link",onClick:c.navigate},c.linkProps),[((C=r.default)==null?void 0:C.call(r))??e.title]):((b=r.default)==null?void 0:b.call(r))??e.title]}})),{}}}),kB=Ue({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:an,items:{type:Array,default:()=>[]},...Zt(),...fr(),...vi(),...xn({tag:"ul"})},"VBreadcrumbs"),TB=ht()({name:"VBreadcrumbs",props:kB(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.bgColor),{densityClasses:f}=aa(e),{roundedClasses:d}=Vi(e);Li({VBreadcrumbsDivider:{divider:Me(()=>e.divider)},VBreadcrumbsItem:{activeClass:Me(()=>e.activeClass),activeColor:Me(()=>e.activeColor),color:Me(()=>e.color),disabled:Me(()=>e.disabled)}});const a=ne(()=>e.items.map(b=>typeof b=="string"?{item:{title:b},raw:b}:{item:b,raw:b}));return _t(()=>{const b=!!(r.prepend||e.icon);return U(e.tag,{class:gt(["v-breadcrumbs",s.value,f.value,d.value,e.class]),style:Bt([c.value,e.style])},{default:()=>{var C;return[b&&X("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[r.prepend?U(Sn,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},r.prepend):U(Xn,{key:"prepend-icon",start:!0,icon:e.icon},null)]),a.value.map((w,T,A)=>{var O;let{item:P,raw:R}=w;return X(Wt,null,[((O=r.item)==null?void 0:O.call(r,{item:P,index:T}))??U(jP,lt({key:T,disabled:T>=A.length-1},typeof P=="string"?{title:P}:P),{default:r.title?()=>{var z;return(z=r.title)==null?void 0:z.call(r,{item:P,index:T})}:void 0}),T<A.length-1&&U($P,null,{default:r.divider?()=>{var z;return(z=r.divider)==null?void 0:z.call(r,{item:R,index:T})}:void 0})])}),(C=r.default)==null?void 0:C.call(r)]}})}),{}}}),NP=ht()({name:"VCardActions",props:Zt(),setup(e,n){let{slots:r}=n;return Li({VBtn:{slim:!0,variant:"text"}}),_t(()=>{var s;return X("div",{class:gt(["v-card-actions",e.class]),style:Bt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),PB=Ue({opacity:[Number,String],...Zt(),...xn()},"VCardSubtitle"),UP=ht()({name:"VCardSubtitle",props:PB(),setup(e,n){let{slots:r}=n;return _t(()=>U(e.tag,{class:gt(["v-card-subtitle",e.class]),style:Bt([{"--v-card-subtitle-opacity":e.opacity},e.style])},r)),{}}}),GP=Ao("v-card-title"),IB=Ue({appendAvatar:String,appendIcon:an,prependAvatar:String,prependIcon:an,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Zt(),...fr()},"VCardItem"),HP=ht()({name:"VCardItem",props:IB(),setup(e,n){let{slots:r}=n;return _t(()=>{var C;const s=!!(e.prependAvatar||e.prependIcon),c=!!(s||r.prepend),f=!!(e.appendAvatar||e.appendIcon),d=!!(f||r.append),a=!!(e.title!=null||r.title),b=!!(e.subtitle!=null||r.subtitle);return X("div",{class:gt(["v-card-item",e.class]),style:Bt(e.style)},[c&&X("div",{key:"prepend",class:"v-card-item__prepend"},[r.prepend?U(Sn,{key:"prepend-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},r.prepend):X(Wt,null,[e.prependAvatar&&U(Ja,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&U(Xn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),X("div",{class:"v-card-item__content"},[a&&U(GP,{key:"title"},{default:()=>{var w;return[((w=r.title)==null?void 0:w.call(r))??ei(e.title)]}}),b&&U(UP,{key:"subtitle"},{default:()=>{var w;return[((w=r.subtitle)==null?void 0:w.call(r))??ei(e.subtitle)]}}),(C=r.default)==null?void 0:C.call(r)]),d&&X("div",{key:"append",class:"v-card-item__append"},[r.append?U(Sn,{key:"append-defaults",disabled:!f,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},r.append):X(Wt,null,[e.appendIcon&&U(Xn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&U(Ja,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),AB=Ue({opacity:[Number,String],...Zt(),...xn()},"VCardText"),qP=ht()({name:"VCardText",props:AB(),setup(e,n){let{slots:r}=n;return _t(()=>U(e.tag,{class:gt(["v-card-text",e.class]),style:Bt([{"--v-card-text-opacity":e.opacity},e.style])},r)),{}}}),EB=Ue({appendAvatar:String,appendIcon:an,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:an,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ya(),...Zt(),...fr(),...Zi(),...nr(),...qg(),...Eo(),...Wd(),...vi(),...ym(),...xn(),...Un(),...es({variant:"elevated"})},"VCard"),MB=ht()({name:"VCard",directives:{vRipple:ra},props:EB(),setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Jn(e),{borderClasses:f}=Ta(e),{colorClasses:d,colorStyles:a,variantClasses:b}=tc(e),{densityClasses:C}=aa(e),{dimensionStyles:w}=Ki(e),{elevationClasses:T}=kr(e),{loaderClasses:A}=pm(e),{locationStyles:P}=ac(e),{positionClasses:R}=Zd(e),{roundedClasses:O}=Vi(e),z=vm(e,r);return _t(()=>{const $=e.link!==!1&&z.isLink.value,F=!e.disabled&&e.link!==!1&&(e.link||z.isClickable.value),H=$?"a":e.tag,Y=!!(s.title||e.title!=null),te=!!(s.subtitle||e.subtitle!=null),Q=Y||te,ce=!!(s.append||e.appendAvatar||e.appendIcon),oe=!!(s.prepend||e.prependAvatar||e.prependIcon),he=!!(s.image||e.image),pe=Q||oe||ce,_e=!!(s.text||e.text!=null);return Di(U(H,lt({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":F},c.value,f.value,d.value,C.value,T.value,A.value,R.value,O.value,b.value,e.class],style:[a.value,w.value,P.value,e.style],onClick:F&&z.navigate,tabindex:e.disabled?-1:void 0},z.linkProps),{default:()=>{var ae;return[he&&X("div",{key:"image",class:"v-card__image"},[s.image?U(Sn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},s.image):U(ko,{key:"image-img",cover:!0,src:e.image},null)]),U(gm,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:s.loader}),pe&&U(HP,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:s.item,prepend:s.prepend,title:s.title,subtitle:s.subtitle,append:s.append}),_e&&U(qP,{key:"text"},{default:()=>{var be;return[((be=s.text)==null?void 0:be.call(s))??e.text]}}),(ae=s.default)==null?void 0:ae.call(s),s.actions&&U(NP,null,{default:s.actions}),El(F,"v-card")]}}),[[ra,F&&e.ripple]])}),{}}}),DB=e=>{const{touchstartX:n,touchendX:r,touchstartY:s,touchendY:c}=e,f=.5,d=16;e.offsetX=r-n,e.offsetY=c-s,Math.abs(e.offsetY)<f*Math.abs(e.offsetX)&&(e.left&&r<n-d&&e.left(e),e.right&&r>n+d&&e.right(e)),Math.abs(e.offsetX)<f*Math.abs(e.offsetY)&&(e.up&&c<s-d&&e.up(e),e.down&&c>s+d&&e.down(e))};function RB(e,n){var s;const r=e.changedTouches[0];n.touchstartX=r.clientX,n.touchstartY=r.clientY,(s=n.start)==null||s.call(n,{originalEvent:e,...n})}function LB(e,n){var s;const r=e.changedTouches[0];n.touchendX=r.clientX,n.touchendY=r.clientY,(s=n.end)==null||s.call(n,{originalEvent:e,...n}),DB(n)}function zB(e,n){var s;const r=e.changedTouches[0];n.touchmoveX=r.clientX,n.touchmoveY=r.clientY,(s=n.move)==null||s.call(n,{originalEvent:e,...n})}function VB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:r=>RB(r,n),touchend:r=>LB(r,n),touchmove:r=>zB(r,n)}}function BB(e,n){var a;const r=n.value,s=r!=null&&r.parent?e.parentElement:e,c=(r==null?void 0:r.options)??{passive:!0},f=(a=n.instance)==null?void 0:a.$.uid;if(!s||!f)return;const d=VB(n.value);s._touchHandlers=s._touchHandlers??Object.create(null),s._touchHandlers[f]=d,Wk(d).forEach(b=>{s.addEventListener(b,d[b],c)})}function OB(e,n){var f,d;const r=(f=n.value)!=null&&f.parent?e.parentElement:e,s=(d=n.instance)==null?void 0:d.$.uid;if(!(r!=null&&r._touchHandlers)||!s)return;const c=r._touchHandlers[s];Wk(c).forEach(a=>{r.removeEventListener(a,c[a])}),delete r._touchHandlers[s]}const Sg={mounted:BB,unmounted:OB},WP=Symbol.for("vuetify:v-window"),ZP=Symbol.for("vuetify:v-window-group"),Xg=Ue({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Zt(),...xn(),...Un()},"VWindow"),Gu=ht()({name:"VWindow",directives:{vTouch:Sg},props:Xg(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{isRtl:c}=tr(),{t:f}=gi(),d=Ml(e,ZP),a=et(),b=ne(()=>c.value?!e.reverse:e.reverse),C=Dt(!1),w=ne(()=>{const Y=e.direction==="vertical"?"y":"x",Q=(b.value?!C.value:C.value)?"-reverse":"";return`v-window-${Y}${Q}-transition`}),T=Dt(0),A=et(void 0),P=ne(()=>d.items.value.findIndex(Y=>d.selected.value.includes(Y.id)));Ot(P,(Y,te)=>{const Q=d.items.value.length,ce=Q-1;Q<=2?C.value=Y<te:Y===ce&&te===0?C.value=!0:Y===0&&te===ce?C.value=!1:C.value=Y<te}),ri(WP,{transition:w,isReversed:C,transitionCount:T,transitionHeight:A,rootRef:a});const R=Me(()=>e.continuous||P.value!==0),O=Me(()=>e.continuous||P.value!==d.items.value.length-1);function z(){R.value&&d.prev()}function $(){O.value&&d.next()}const F=ne(()=>{const Y=[],te={icon:c.value?e.nextIcon:e.prevIcon,class:`v-window__${b.value?"right":"left"}`,onClick:d.prev,"aria-label":f("$vuetify.carousel.prev")};Y.push(R.value?r.prev?r.prev({props:te}):U(Mn,te,null):X("div",null,null));const Q={icon:c.value?e.prevIcon:e.nextIcon,class:`v-window__${b.value?"left":"right"}`,onClick:d.next,"aria-label":f("$vuetify.carousel.next")};return Y.push(O.value?r.next?r.next({props:Q}):U(Mn,Q,null):X("div",null,null)),Y}),H=ne(()=>e.touch===!1?e.touch:{...{left:()=>{b.value?z():$()},right:()=>{b.value?$():z()},start:te=>{let{originalEvent:Q}=te;Q.stopPropagation()}},...e.touch===!0?{}:e.touch});return _t(()=>Di(U(e.tag,{ref:a,class:gt(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows},s.value,e.class]),style:Bt(e.style)},{default:()=>{var Y,te;return[X("div",{class:"v-window__container",style:{height:A.value}},[(Y=r.default)==null?void 0:Y.call(r,{group:d}),e.showArrows!==!1&&X("div",{class:gt(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[F.value])]),(te=r.additional)==null?void 0:te.call(r,{group:d})]}}),[[Sg,H.value]])),{group:d}}}),FB=Ue({color:String,cycle:Boolean,delimiterIcon:{type:an,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Xg({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),$B=ht()({name:"VCarousel",props:FB(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),{t:c}=gi(),f=et();let d=-1;Ot(s,b),Ot(()=>e.interval,b),Ot(()=>e.cycle,C=>{C?b():window.clearTimeout(d)}),zi(a);function a(){!e.cycle||!f.value||(d=window.setTimeout(f.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function b(){window.clearTimeout(d),window.requestAnimationFrame(a)}return _t(()=>{const C=Gu.filterProps(e);return U(Gu,lt({ref:f},C,{modelValue:s.value,"onUpdate:modelValue":w=>s.value=w,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:Gt(e.height)},e.style]}),{default:r.default,additional:w=>{let{group:T}=w;return X(Wt,null,[!e.hideDelimiters&&X("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[T.items.value.length>0&&U(Sn,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[T.items.value.map((A,P)=>{const R={id:`carousel-item-${A.id}`,"aria-label":c("$vuetify.carousel.ariaLabel.delimiter",P+1,T.items.value.length),class:["v-carousel__controls__item",T.isSelected(A.id)&&"v-btn--active"],onClick:()=>T.select(A.id,!0)};return r.item?r.item({props:R,item:A}):U(Mn,lt(A,R),null)})]})]),e.progress&&U(Hg,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(T.getItemIndex(s.value)+1)/T.items.value.length*100},null)])},prev:r.prev,next:r.next})}),{}}}),Jg=Ue({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Zt(),...ic(),...C0()},"VWindowItem"),Hu=ht()({name:"VWindowItem",directives:{vTouch:Sg},props:Jg(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=bn(WP),c=rc(e,ZP),{isBooted:f}=ec();if(!s||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=Dt(!1),a=ne(()=>f.value&&(s.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function b(){!d.value||!s||(d.value=!1,s.transitionCount.value>0&&(s.transitionCount.value-=1,s.transitionCount.value===0&&(s.transitionHeight.value=void 0)))}function C(){var R;d.value||!s||(d.value=!0,s.transitionCount.value===0&&(s.transitionHeight.value=Gt((R=s.rootRef.value)==null?void 0:R.clientHeight)),s.transitionCount.value+=1)}function w(){b()}function T(R){d.value&&Dn(()=>{!a.value||!d.value||!s||(s.transitionHeight.value=Gt(R.clientHeight))})}const A=ne(()=>{const R=s.isReversed.value?e.reverseTransition:e.transition;return a.value?{name:typeof R!="string"?s.transition.value:R,onBeforeEnter:C,onAfterEnter:b,onEnterCancelled:w,onBeforeLeave:C,onAfterLeave:b,onLeaveCancelled:w,onEnter:T}:!1}),{hasContent:P}=k0(e,c.isSelected);return _t(()=>U(na,{transition:A.value,disabled:!f.value},{default:()=>{var R;return[Di(X("div",{class:gt(["v-window-item",c.selectedClass.value,e.class]),style:Bt(e.style)},[P.value&&((R=r.default)==null?void 0:R.call(r))]),[[xs,c.isSelected.value]])]}})),{groupItem:c}}}),jB=Ue({...zT(),...Jg()},"VCarouselItem"),NB=ht()({name:"VCarouselItem",inheritAttrs:!1,props:jB(),setup(e,n){let{slots:r,attrs:s}=n;_t(()=>{const c=ko.filterProps(e),f=Hu.filterProps(e);return U(Hu,lt({class:["v-carousel-item",e.class]},f),{default:()=>[U(ko,lt(s,c),r)]})})}}),UB=Ao("v-code","code"),GB=Ue({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Zt()},"VColorPickerCanvas"),HB=ja({name:"VColorPickerCanvas",props:GB(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,n){let{emit:r}=n;const s=Dt(!1),c=et(),f=Dt(parseFloat(e.width)),d=Dt(parseFloat(e.height)),a=et({x:0,y:0}),b=ne({get:()=>a.value,set(z){var H,Y;if(!c.value)return;const{x:$,y:F}=z;a.value=z,r("update:color",{h:((H=e.color)==null?void 0:H.h)??0,s:ci($,0,f.value)/f.value,v:1-ci(F,0,d.value)/d.value,a:((Y=e.color)==null?void 0:Y.a)??1})}}),C=ne(()=>{const{x:z,y:$}=b.value,F=parseInt(e.dotSize,10)/2;return{width:Gt(e.dotSize),height:Gt(e.dotSize),transform:`translate(${Gt(z-F)}, ${Gt($-F)})`}}),{resizeRef:w}=vs(z=>{var H;if(!((H=w.el)!=null&&H.offsetParent))return;const{width:$,height:F}=z[0].contentRect;f.value=$,d.value=F});function T(z,$,F){const{left:H,top:Y,width:te,height:Q}=F;b.value={x:ci(z-H,0,te),y:ci($-Y,0,Q)}}function A(z){z.type==="mousedown"&&z.preventDefault(),!e.disabled&&(P(z),window.addEventListener("mousemove",P),window.addEventListener("mouseup",R),window.addEventListener("touchmove",P),window.addEventListener("touchend",R))}function P(z){if(e.disabled||!c.value)return;s.value=!0;const $=rR(z);T($.clientX,$.clientY,c.value.getBoundingClientRect())}function R(){window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",P),window.removeEventListener("touchend",R)}function O(){var Y;if(!c.value)return;const z=c.value,$=z.getContext("2d");if(!$)return;const F=$.createLinearGradient(0,0,z.width,0);F.addColorStop(0,"hsla(0, 0%, 100%, 1)"),F.addColorStop(1,`hsla(${((Y=e.color)==null?void 0:Y.h)??0}, 100%, 50%, 1)`),$.fillStyle=F,$.fillRect(0,0,z.width,z.height);const H=$.createLinearGradient(0,0,0,z.height);H.addColorStop(0,"hsla(0, 0%, 0%, 0)"),H.addColorStop(1,"hsla(0, 0%, 0%, 1)"),$.fillStyle=H,$.fillRect(0,0,z.width,z.height)}return Ot(()=>{var z;return(z=e.color)==null?void 0:z.h},O,{immediate:!0}),Ot(()=>[f.value,d.value],(z,$)=>{O(),a.value={x:b.value.x*z[0]/$[0],y:b.value.y*z[1]/$[1]}},{flush:"post"}),Ot(()=>e.color,()=>{if(s.value){s.value=!1;return}a.value=e.color?{x:e.color.s*f.value,y:(1-e.color.v)*d.value}:{x:0,y:0}},{deep:!0,immediate:!0}),zi(()=>O()),_t(()=>X("div",{ref:w,class:gt(["v-color-picker-canvas",e.class]),style:Bt(e.style),onMousedown:A,onTouchstartPassive:A},[X("canvas",{ref:c,width:f.value,height:d.value},null),e.color&&X("div",{class:gt(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Bt(C.value)},null)])),{}}});function qB(e,n){if(n){const{a:r,...s}=e;return s}return e}function WB(e,n){if(n==null||typeof n=="string"){const r=e.a!==1;if(n!=null&&n.startsWith("rgb(")){const{r:c,g:f,b:d,a}=Gs(e);return`rgb(${c} ${f} ${d}`+(r?` / ${a})`:")")}else if(n!=null&&n.startsWith("hsl(")){const{h:c,s:f,l:d,a}=M_(e);return`hsl(${c} ${Math.round(f*100)} ${Math.round(d*100)}`+(r?` / ${a})`:")")}const s=dT(e);return e.a===1?s.slice(0,7):s}if(typeof n=="object"){let r;return Lu(n,["r","g","b"])?r=Gs(e):Lu(n,["h","s","l"])?r=M_(e):Lu(n,["h","s","v"])&&(r=e),qB(r,!Lu(n,["a"])&&e.a===1)}return e}const Cd={h:0,s:0,v:0,a:1},Y_={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,n)=>({...e,r:Number(n)})},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,n)=>({...e,g:Number(n)})},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,n)=>({...e,b:Number(n)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:n}=e;return n!=null?Math.round(n*100)/100:1},getColor:(e,n)=>({...e,a:Number(n)})}],to:Gs,from:dm};var bC;const ZB={...Y_,inputs:(bC=Y_.inputs)==null?void 0:bC.slice(0,3)},X_={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,n)=>({...e,h:Number(n)})},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,n)=>({...e,s:Number(n)})},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,n)=>({...e,l:Number(n)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:n}=e;return n!=null?Math.round(n*100)/100:1},getColor:(e,n)=>({...e,a:Number(n)})}],to:M_,from:n0},KB={...X_,inputs:X_.inputs.slice(0,3)},KP={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,n)=>n}],to:dT,from:AR},YB={...KP,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,n)=>n}]},$u={rgb:ZB,rgba:Y_,hsl:KB,hsla:X_,hex:YB,hexa:KP},XB=e=>{let{label:n,...r}=e;return X("div",{class:"v-color-picker-edit__input"},[X("input",jE(Dk(r)),null),X("span",null,[n])])},JB=Ue({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys($u).includes(e)},modes:{type:Array,default:()=>Object.keys($u),validator:e=>Array.isArray(e)&&e.every(n=>Object.keys($u).includes(n))},...Zt()},"VColorPickerEdit"),QB=ja({name:"VColorPickerEdit",props:JB(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,n){let{emit:r}=n;const s=ne(()=>e.modes.map(f=>({...$u[f],name:f}))),c=ne(()=>{var a;const f=s.value.find(b=>b.name===e.mode);if(!f)return[];const d=e.color?f.to(e.color):null;return(a=f.inputs)==null?void 0:a.map(b=>{let{getValue:C,getColor:w,...T}=b;return{...f.inputProps,...T,disabled:e.disabled,value:d&&C(d),onChange:A=>{const P=A.target;P&&r("update:color",f.from(w(d??f.to(Cd),P.value)))}}})});return _t(()=>{var f;return X("div",{class:gt(["v-color-picker-edit",e.class]),style:Bt(e.style)},[(f=c.value)==null?void 0:f.map(d=>U(XB,d,null)),s.value.length>1&&U(Mn,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const d=s.value.findIndex(a=>a.name===e.mode);r("update:mode",s.value[(d+1)%s.value.length].name)}},null)])}),{}}}),A0=Symbol.for("vuetify:v-slider");function J_(e,n,r){const s=r==="vertical",c=n.getBoundingClientRect(),f="touches"in e?e.touches[0]:e;return s?f.clientY-(c.top+c.height/2):f.clientX-(c.left+c.width/2)}function eO(e,n){return"touches"in e&&e.touches.length?e.touches[0][n]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][n]:e[n]}const YP=Ue({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...vi(),...nr({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),XP=e=>{const n=ne(()=>parseFloat(e.min)),r=ne(()=>parseFloat(e.max)),s=ne(()=>Number(e.step)>0?parseFloat(e.step):0),c=ne(()=>Math.max(A1(s.value),A1(n.value)));function f(d){if(d=parseFloat(d),s.value<=0)return d;const a=ci(d,n.value,r.value),b=n.value%s.value;let C=Math.round((a-b)/s.value)*s.value+b;return a>C&&C+s.value>r.value&&(C=r.value),parseFloat(Math.min(C,r.value).toFixed(c.value))}return{min:n,max:r,step:s,decimals:c,roundValue:f}},JP=e=>{let{props:n,steps:r,onSliderStart:s,onSliderMove:c,onSliderEnd:f,getActiveThumb:d}=e;const{isRtl:a}=tr(),b=Me(()=>n.reverse),C=ne(()=>n.direction==="vertical"),w=ne(()=>C.value!==b.value),{min:T,max:A,step:P,decimals:R,roundValue:O}=r,z=ne(()=>parseInt(n.thumbSize,10)),$=ne(()=>parseInt(n.tickSize,10)),F=ne(()=>parseInt(n.trackSize,10)),H=ne(()=>(A.value-T.value)/P.value),Y=Me(()=>n.disabled),te=ne(()=>n.error||n.disabled?void 0:n.thumbColor??n.color),Q=ne(()=>n.error||n.disabled?void 0:n.trackColor??n.color),ce=ne(()=>n.error||n.disabled?void 0:n.trackFillColor??n.color),oe=Dt(!1),he=Dt(0),pe=et(),_e=et();function ae(xt){var ut;const Re=(ut=pe.value)==null?void 0:ut.$el;if(!Re)return;const vt=n.direction==="vertical",st=vt?"top":"left",Ye=vt?"height":"width",St=vt?"clientY":"clientX",{[st]:re,[Ye]:ue}=Re.getBoundingClientRect(),Le=eO(xt,St);let Ze=ci((Le-re-he.value)/ue)||0;return(vt?w.value:w.value!==a.value)&&(Ze=1-Ze),O(T.value+Ze*(A.value-T.value))}const be=xt=>{const Re=ae(xt);Re!=null&&f({value:Re}),oe.value=!1,he.value=0},je=xt=>{const Re=ae(xt);_e.value=d(xt),_e.value&&(oe.value=!0,_e.value.contains(xt.target)?he.value=J_(xt,_e.value,n.direction):(he.value=0,Re!=null&&c({value:Re})),Re!=null&&s({value:Re}),Dn(()=>{var vt;return(vt=_e.value)==null?void 0:vt.focus()}))},Ve={passive:!0,capture:!0};function Fe(xt){const Re=ae(xt);Re!=null&&c({value:Re})}function Ke(xt){xt.stopPropagation(),xt.preventDefault(),be(xt),window.removeEventListener("mousemove",Fe,Ve),window.removeEventListener("mouseup",Ke)}function mt(xt){var Re;be(xt),window.removeEventListener("touchmove",Fe,Ve),(Re=xt.target)==null||Re.removeEventListener("touchend",mt)}function ft(xt){var Re;je(xt),window.addEventListener("touchmove",Fe,Ve),(Re=xt.target)==null||Re.addEventListener("touchend",mt,{passive:!1})}function ze(xt){xt.button===0&&(xt.preventDefault(),je(xt),window.addEventListener("mousemove",Fe,Ve),window.addEventListener("mouseup",Ke,{passive:!1}))}const Se=xt=>{const Re=(xt-T.value)/(A.value-T.value)*100;return ci(isNaN(Re)?0:Re,0,100)},Ie=Me(()=>n.showTicks),Qe=ne(()=>Ie.value?n.ticks?Array.isArray(n.ticks)?n.ticks.map(xt=>({value:xt,position:Se(xt),label:xt.toString()})):Object.keys(n.ticks).map(xt=>({value:parseFloat(xt),position:Se(parseFloat(xt)),label:n.ticks[xt]})):H.value!==1/0?Oa(H.value+1).map(xt=>{const Re=T.value+xt*P.value;return{value:Re,position:Se(Re)}}):[]:[]),jt=ne(()=>Qe.value.some(xt=>{let{label:Re}=xt;return!!Re})),Tt={activeThumbRef:_e,color:Me(()=>n.color),decimals:R,disabled:Y,direction:Me(()=>n.direction),elevation:Me(()=>n.elevation),hasLabels:jt,isReversed:b,indexFromEnd:w,min:T,max:A,mousePressed:oe,numTicks:H,onSliderMousedown:ze,onSliderTouchstart:ft,parsedTicks:Qe,parseMouseMove:ae,position:Se,readonly:Me(()=>n.readonly),rounded:Me(()=>n.rounded),roundValue:O,showTicks:Ie,startOffset:he,step:P,thumbSize:z,thumbColor:te,thumbLabel:Me(()=>n.thumbLabel),ticks:Me(()=>n.ticks),tickSize:$,trackColor:Q,trackContainerRef:pe,trackFillColor:ce,trackSize:F,vertical:C};return ri(A0,Tt),Tt},tO=Ue({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...Zt()},"VSliderThumb"),Q_=ht()({name:"VSliderThumb",directives:{vRipple:ra},props:tO(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=bn(A0),{isRtl:f,rtlClasses:d}=tr();if(!c)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:a,max:b,thumbColor:C,step:w,disabled:T,thumbSize:A,thumbLabel:P,direction:R,isReversed:O,vertical:z,readonly:$,elevation:F,mousePressed:H,decimals:Y,indexFromEnd:te}=c,Q=ne(()=>T.value?void 0:F.value),{elevationClasses:ce}=kr(Q),{textColorClasses:oe,textColorStyles:he}=zr(C),{pageup:pe,pagedown:_e,end:ae,home:be,left:je,right:Ve,down:Fe,up:Ke}=C_,mt=[pe,_e,ae,be,je,Ve,Fe,Ke],ft=ne(()=>w.value?[1,2,3]:[1,5,10]);function ze(Ie,Qe){if(!mt.includes(Ie.key))return;Ie.preventDefault();const jt=w.value||.1,Tt=(b.value-a.value)/jt;if([je,Ve,Fe,Ke].includes(Ie.key)){const Re=(z.value?[f.value?je:Ve,O.value?Fe:Ke]:te.value!==f.value?[je,Ke]:[Ve,Ke]).includes(Ie.key)?1:-1,vt=Ie.shiftKey?2:Ie.ctrlKey?1:0;Re===-1&&Qe===b.value&&!vt&&!Number.isInteger(Tt)?Qe=Qe-Tt%1*jt:Qe=Qe+Re*jt*ft.value[vt]}else if(Ie.key===be)Qe=a.value;else if(Ie.key===ae)Qe=b.value;else{const xt=Ie.key===_e?1:-1;Qe=Qe-xt*jt*(Tt>100?Tt/10:10)}return Math.max(e.min,Math.min(e.max,Qe))}function Se(Ie){const Qe=ze(Ie,e.modelValue);Qe!=null&&s("update:modelValue",Qe)}return _t(()=>{const Ie=Gt(te.value?100-e.position:e.position,"%");return X("div",{class:gt(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&H.value},e.class,d.value]),style:Bt([{"--v-slider-thumb-position":Ie,"--v-slider-thumb-size":Gt(A.value)},e.style]),role:"slider",tabindex:T.value?-1:0,"aria-label":e.name,"aria-valuemin":a.value,"aria-valuemax":b.value,"aria-valuenow":e.modelValue,"aria-readonly":!!$.value,"aria-orientation":R.value,onKeydown:$.value?void 0:Se},[X("div",{class:gt(["v-slider-thumb__surface",oe.value,ce.value]),style:{...he.value}},null),Di(X("div",{class:gt(["v-slider-thumb__ripple",oe.value]),style:Bt(he.value)},null),[[ra,e.ripple,null,{circle:!0,center:!0}]]),U(h0,{origin:"bottom center"},{default:()=>{var Qe;return[Di(X("div",{class:"v-slider-thumb__label-container"},[X("div",{class:gt(["v-slider-thumb__label",oe.value])},[X("div",null,[((Qe=r["thumb-label"])==null?void 0:Qe.call(r,{modelValue:e.modelValue}))??e.modelValue.toFixed(w.value?Y.value:1)])])]),[[xs,P.value&&e.focused||P.value==="always"]])]}})])}),{}}}),nO=Ue({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Zt()},"VSliderTrack"),QP=ht()({name:"VSliderTrack",props:nO(),emits:{},setup(e,n){let{slots:r}=n;const s=bn(A0);if(!s)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:c,parsedTicks:f,rounded:d,showTicks:a,tickSize:b,trackColor:C,trackFillColor:w,trackSize:T,vertical:A,min:P,max:R,indexFromEnd:O}=s,{roundedClasses:z}=Vi(d),{backgroundColorClasses:$,backgroundColorStyles:F}=ti(w),{backgroundColorClasses:H,backgroundColorStyles:Y}=ti(C),te=ne(()=>`inset-${A.value?"block":"inline"}-${O.value?"end":"start"}`),Q=ne(()=>A.value?"height":"width"),ce=ne(()=>({[te.value]:"0%",[Q.value]:"100%"})),oe=ne(()=>e.stop-e.start),he=ne(()=>({[te.value]:Gt(e.start,"%"),[Q.value]:Gt(oe.value,"%")})),pe=ne(()=>a.value?(A.value?f.value.slice().reverse():f.value).map((ae,be)=>{var Ve;const je=ae.value!==P.value&&ae.value!==R.value?Gt(ae.position,"%"):void 0;return X("div",{key:ae.value,class:gt(["v-slider-track__tick",{"v-slider-track__tick--filled":ae.position>=e.start&&ae.position<=e.stop,"v-slider-track__tick--first":ae.value===P.value,"v-slider-track__tick--last":ae.value===R.value}]),style:{[te.value]:je}},[(ae.label||r["tick-label"])&&X("div",{class:"v-slider-track__tick-label"},[((Ve=r["tick-label"])==null?void 0:Ve.call(r,{tick:ae,index:be}))??ae.label])])}):[]);return _t(()=>X("div",{class:gt(["v-slider-track",z.value,e.class]),style:Bt([{"--v-slider-track-size":Gt(T.value),"--v-slider-tick-size":Gt(b.value)},e.style])},[X("div",{class:gt(["v-slider-track__background",H.value,{"v-slider-track__background--opacity":!!c.value||!w.value}]),style:{...ce.value,...Y.value}},null),X("div",{class:gt(["v-slider-track__fill",$.value]),style:{...he.value,...F.value}},null),a.value&&X("div",{class:gt(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":a.value==="always"}])},[pe.value])])),{}}}),iO=Ue({..._m(),...YP(),...Do(),modelValue:{type:[Number,String],default:0}},"VSlider"),eb=ht()({name:"VSlider",props:iO(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=et(),f=et(),{rtlClasses:d}=tr(),a=XP(e),b=tn(e,"modelValue",void 0,ce=>a.roundValue(ce??a.min.value)),{min:C,max:w,mousePressed:T,roundValue:A,onSliderMousedown:P,onSliderTouchstart:R,trackContainerRef:O,position:z,hasLabels:$,readonly:F}=JP({props:e,steps:a,onSliderStart:()=>{s("start",b.value)},onSliderEnd:ce=>{let{value:oe}=ce;const he=A(oe);b.value=he,s("end",he)},onSliderMove:ce=>{let{value:oe}=ce;return b.value=A(oe)},getActiveThumb:()=>{var ce;return(ce=c.value)==null?void 0:ce.$el}}),{isFocused:H,focus:Y,blur:te}=Mo(e),Q=ne(()=>z(b.value));return _t(()=>{const ce=qr.filterProps(e),oe=!!(e.label||r.label||r.prepend);return U(qr,lt({ref:f,class:["v-slider",{"v-slider--has-labels":!!r["tick-label"]||$.value,"v-slider--focused":H.value,"v-slider--pressed":T.value,"v-slider--disabled":e.disabled},d.value,e.class],style:e.style},ce,{focused:H.value}),{...r,prepend:oe?he=>{var pe,_e;return X(Wt,null,[((pe=r.label)==null?void 0:pe.call(r,he))??(e.label?U(Kd,{id:he.id.value,class:"v-slider__label",text:e.label},null):void 0),(_e=r.prepend)==null?void 0:_e.call(r,he)])}:void 0,default:he=>{let{id:pe,messagesId:_e}=he;return X("div",{class:"v-slider__container",onMousedown:F.value?void 0:P,onTouchstartPassive:F.value?void 0:R},[X("input",{id:pe.value,name:e.name||pe.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:b.value},null),U(QP,{ref:O,start:0,stop:Q.value},{"tick-label":r["tick-label"]}),U(Q_,{ref:c,"aria-describedby":_e.value,focused:H.value,min:C.value,max:w.value,modelValue:b.value,"onUpdate:modelValue":ae=>b.value=ae,position:Q.value,elevation:e.elevation,onFocus:Y,onBlur:te,ripple:e.ripple,name:e.name},{"thumb-label":r["thumb-label"]})])}})}),Tr({focus:()=>{var ce;return(ce=c.value)==null?void 0:ce.$el.focus()}},f)}}),rO=Ue({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...Zt()},"VColorPickerPreview"),aO=ja({name:"VColorPickerPreview",props:rO(),emits:{"update:color":e=>!0},setup(e,n){let{emit:r}=n;const s=new AbortController;lm(()=>s.abort());async function c(){if(!k1||e.disabled)return;const f=new window.EyeDropper;try{const d=await f.open({signal:s.signal}),a=dm(Fa(d.sRGBHex));r("update:color",{...e.color??Cd,...a})}catch{}}return _t(()=>{var f,d;return X("div",{class:gt(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Bt(e.style)},[k1&&X("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[U(Mn,{density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:c},null)]),X("div",{class:"v-color-picker-preview__dot"},[X("div",{style:{background:lT(e.color??Cd)}},null)]),X("div",{class:"v-color-picker-preview__sliders"},[U(eb,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(f=e.color)==null?void 0:f.h,"onUpdate:modelValue":a=>r("update:color",{...e.color??Cd,h:a}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&U(eb,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:((d=e.color)==null?void 0:d.a)??1,"onUpdate:modelValue":a=>r("update:color",{...e.color??Cd,a}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),sO={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},oO={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},lO={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},uO={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},cO={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},dO={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},hO={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},fO={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},mO={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},pO={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},gO={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},vO={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},yO={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},_O={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},bO={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},xO={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},wO={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},SO={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},CO={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},kO={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},TO={red:sO,pink:oO,purple:lO,deepPurple:uO,indigo:cO,blue:dO,lightBlue:hO,cyan:fO,teal:mO,green:pO,lightGreen:gO,lime:vO,yellow:yO,amber:_O,orange:bO,deepOrange:xO,brown:wO,blueGrey:SO,grey:CO,shades:kO},PO=Ue({swatches:{type:Array,default:()=>IO(TO)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Zt()},"VColorPickerSwatches");function IO(e){return Object.keys(e).map(n=>{const r=e[n];return r.base?[r.base,r.darken4,r.darken3,r.darken2,r.darken1,r.lighten1,r.lighten2,r.lighten3,r.lighten4,r.lighten5]:[r.black,r.white,r.transparent]})}const AO=ja({name:"VColorPickerSwatches",props:PO(),emits:{"update:color":e=>!0},setup(e,n){let{emit:r}=n;return _t(()=>X("div",{class:gt(["v-color-picker-swatches",e.class]),style:Bt([{maxHeight:Gt(e.maxHeight)},e.style])},[X("div",null,[e.swatches.map(s=>X("div",{class:"v-color-picker-swatches__swatch"},[s.map(c=>{const f=Fa(c),d=dm(f),a=oT(f);return X("div",{class:"v-color-picker-swatches__color",onClick:()=>d&&r("update:color",d)},[X("div",{style:{background:a}},[e.color&&Rr(e.color,d)?U(Xn,{size:"x-small",icon:"$success",color:RR(c,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),EO=Ao("v-picker-title"),E0=Ue({color:String,...ya(),...Zt(),...Zi(),...nr(),...Eo(),...Wd(),...vi(),...xn(),...Un()},"VSheet"),tm=ht()({name:"VSheet",props:E0(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{borderClasses:d}=Ta(e),{dimensionStyles:a}=Ki(e),{elevationClasses:b}=kr(e),{locationStyles:C}=ac(e),{positionClasses:w}=Zd(e),{roundedClasses:T}=Vi(e);return _t(()=>U(e.tag,{class:gt(["v-sheet",s.value,c.value,d.value,b.value,w.value,T.value,e.class]),style:Bt([f.value,a.value,C.value,e.style])},r)),{}}}),Qg=Ue({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...E0()},"VPicker"),Fd=ht()({name:"VPicker",props:Qg(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color);return _t(()=>{const f=tm.filterProps(e),d=!!(e.title||r.title);return U(tm,lt(f,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!r.actions},e.class],style:e.style}),{default:()=>{var a;return[!e.hideHeader&&X("div",{key:"header",class:gt([s.value]),style:Bt([c.value])},[d&&U(EO,{key:"picker-title"},{default:()=>{var b;return[((b=r.title)==null?void 0:b.call(r))??e.title]}}),r.header&&X("div",{class:"v-picker__header"},[r.header()])]),X("div",{class:"v-picker__body"},[(a=r.default)==null?void 0:a.call(r)]),r.actions&&U(Sn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[X("div",{class:"v-picker__actions"},[r.actions()])]})]}})}),{}}}),MO=Ue({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys($u).includes(e)},modes:{type:Array,default:()=>Object.keys($u),validator:e=>Array.isArray(e)&&e.every(n=>Object.keys($u).includes(n))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...Qg({hideHeader:!0})},"VColorPicker"),DO=ja({name:"VColorPicker",props:MO(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"mode"),c=et(null),f=tn(e,"modelValue",void 0,w=>{if(w==null||w==="")return null;let T;try{T=dm(Fa(w))}catch{return null}return T},w=>w?WB(w,e.modelValue):null),d=ne(()=>f.value?{...f.value,h:c.value??f.value.h}:null),{rtlClasses:a}=tr();let b=!0;Ot(f,w=>{if(!b){b=!0;return}w&&(c.value=w.h)},{immediate:!0});const C=w=>{b=!1,c.value=w.h,f.value=w};return Hd(()=>{e.modes.includes(s.value)||(s.value=e.modes[0])}),Li({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),_t(()=>{const w=Fd.filterProps(e);return U(Fd,lt(w,{class:["v-color-picker",a.value,e.class],style:[{"--v-color-picker-color-hsv":lT({...d.value??Cd,a:1})},e.style]}),{...r,default:()=>X(Wt,null,[!e.hideCanvas&&U(HB,{key:"canvas",color:d.value,"onUpdate:color":C,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&X("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&U(aO,{key:"preview",color:d.value,"onUpdate:color":C,hideAlpha:!s.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&U(QB,{key:"edit",modes:e.modes,mode:s.value,"onUpdate:mode":T=>s.value=T,color:d.value,"onUpdate:color":C,disabled:e.disabled},null)]),e.showSwatches&&U(AO,{key:"swatches",color:d.value,"onUpdate:color":C,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),RO=Ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Jd({filterKeys:["title"]}),...P0({hideNoData:!0,returnObject:!0}),...di(Sm({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:!1})},"VCombobox"),LO=ht()({name:"VCombobox",props:RO(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,n){var St;let{emit:r,slots:s}=n;const{t:c}=gi(),f=et(),d=Dt(!1),a=Dt(!0),b=Dt(!1),C=et(),w=et(),T=Dt(-1);let A=!1;const{items:P,transformIn:R,transformOut:O}=x0(e),{textColorClasses:z,textColorStyles:$}=zr(()=>{var re;return(re=f.value)==null?void 0:re.color}),F=tn(e,"modelValue",[],re=>R(Mi(re)),re=>{const ue=O(re);return e.multiple?ue:ue[0]??null}),H=bm(e),Y=ne(()=>!!(e.chips||s.chip)),te=ne(()=>Y.value||!!s.selection),Q=Dt(!e.multiple&&!te.value?((St=F.value[0])==null?void 0:St.title)??"":""),ce=ne({get:()=>Q.value,set:re=>{var ue;if(Q.value=re??"",!e.multiple&&!te.value&&(F.value=[bl(e,re)],Dn(()=>{var Le;return(Le=w.value)==null?void 0:Le.scrollToIndex(0)})),re&&e.multiple&&((ue=e.delimiters)!=null&&ue.length)){const Le=re.split(new RegExp(`(?:${e.delimiters.join("|")})+`));Le.length>1&&(Le.forEach(Ze=>{Ze=Ze.trim(),Ze&&Re(bl(e,Ze))}),Q.value="")}re||(T.value=-1),a.value=!re}}),oe=ne(()=>typeof e.counterValue=="function"?e.counterValue(F.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?F.value.length:ce.value.length),{filteredItems:he,getMatches:pe}=Qd(e,P,()=>a.value?"":ce.value),_e=ne(()=>e.hideSelected?he.value.filter(re=>!F.value.some(ue=>ue.value===re.value)):he.value),ae=ne(()=>e.hideNoData&&!_e.value.length||H.isReadonly.value||H.isDisabled.value),be=tn(e,"menu"),je=ne({get:()=>be.value,set:re=>{var ue;be.value&&!re&&((ue=C.value)!=null&&ue.ΨopenChildren.size)||re&&ae.value||(be.value=re)}}),Ve=Me(()=>je.value?e.closeText:e.openText);Ot(Q,re=>{A?Dn(()=>A=!1):d.value&&!je.value&&(je.value=!0),r("update:search",re)}),Ot(F,re=>{var ue;!e.multiple&&!te.value&&(Q.value=((ue=re[0])==null?void 0:ue.title)??"")});const Fe=ne(()=>F.value.map(re=>re.value)),Ke=ne(()=>{var ue;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&ce.value===((ue=_e.value[0])==null?void 0:ue.title))&&_e.value.length>0&&!a.value&&!b.value}),mt=et(),ft=T0(mt,f);function ze(re){A=!0,e.openOnClear&&(je.value=!0)}function Se(){ae.value||(je.value=!0)}function Ie(re){ae.value||(d.value&&(re.preventDefault(),re.stopPropagation()),je.value=!je.value)}function Qe(re){var ue;(Ld(re)||re.key==="Backspace")&&((ue=f.value)==null||ue.focus())}function jt(re){var Ze,ut,Je,Pt;if(nR(re)||H.isReadonly.value)return;const ue=(Ze=f.value)==null?void 0:Ze.selectionStart,Le=F.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(re.key)&&re.preventDefault(),["Enter","ArrowDown"].includes(re.key)&&(je.value=!0),["Escape"].includes(re.key)&&(je.value=!1),["Enter","Escape","Tab"].includes(re.key)&&(Ke.value&&["Enter","Tab"].includes(re.key)&&!F.value.some(ct=>{let{value:Lt}=ct;return Lt===_e.value[0].value})&&Re(he.value[0]),a.value=!0),re.key==="ArrowDown"&&Ke.value&&((ut=mt.value)==null||ut.focus("next")),re.key==="Enter"&&ce.value&&(Re(bl(e,ce.value)),te.value&&(Q.value="")),["Backspace","Delete"].includes(re.key)){if(!e.multiple&&te.value&&F.value.length>0&&!ce.value)return Re(F.value[0],!1);if(~T.value){re.preventDefault();const ct=T.value;Re(F.value[T.value],!1),T.value=ct>=Le-1?Le-2:ct}else re.key==="Backspace"&&!ce.value&&(T.value=Le-1);return}if(e.multiple)if(re.key==="ArrowLeft"){if(T.value<0&&ue&&ue>0)return;const ct=T.value>-1?T.value-1:Le-1;F.value[ct]?T.value=ct:(T.value=-1,(Je=f.value)==null||Je.setSelectionRange(ce.value.length,ce.value.length))}else if(re.key==="ArrowRight"){if(T.value<0)return;const ct=T.value+1;F.value[ct]?T.value=ct:(T.value=-1,(Pt=f.value)==null||Pt.setSelectionRange(0,0))}else~T.value&&Ld(re)&&(T.value=-1)}function Tt(){var re;e.eager&&((re=w.value)==null||re.calculateVisibleItems())}function xt(){var re;d.value&&(a.value=!0,(re=f.value)==null||re.focus())}function Re(re){let ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!re||re.props.disabled))if(e.multiple){const Le=F.value.findIndex(ut=>(e.valueComparator||Rr)(ut.value,re.value)),Ze=ue??!~Le;if(~Le){const ut=Ze?[...F.value,re]:[...F.value];ut.splice(Le,1),F.value=ut}else Ze&&(F.value=[...F.value,re]);e.clearOnSelect&&(ce.value="")}else{const Le=ue!==!1;F.value=Le?[re]:[],Q.value=Le&&!te.value?re.title:"",Dn(()=>{je.value=!1,a.value=!0})}}function vt(re){d.value=!0,setTimeout(()=>{b.value=!0})}function st(re){b.value=!1}function Ye(re){(re==null||re===""&&!e.multiple&&!te.value)&&(F.value=[])}return Ot(d,(re,ue)=>{if(!(re||re===ue)&&(T.value=-1,je.value=!1,ce.value)){if(e.multiple){Re(bl(e,ce.value));return}if(!te.value)return;F.value.some(Le=>{let{title:Ze}=Le;return Ze===ce.value})?Q.value="":Re(bl(e,ce.value))}}),Ot(je,()=>{if(!e.hideSelected&&je.value&&F.value.length){const re=_e.value.findIndex(ue=>F.value.some(Le=>(e.valueComparator||Rr)(Le.value,ue.value)));Yn&&window.requestAnimationFrame(()=>{var ue;re>=0&&((ue=w.value)==null||ue.scrollToIndex(re))})}}),Ot(()=>e.items,(re,ue)=>{je.value||d.value&&!ue.length&&re.length&&(je.value=!0)}),_t(()=>{const re=!!(!e.hideNoData||_e.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),ue=F.value.length>0,Le=To.filterProps(e);return U(To,lt({ref:f},Le,{modelValue:ce.value,"onUpdate:modelValue":[Ze=>ce.value=Ze,Ye],focused:d.value,"onUpdate:focused":Ze=>d.value=Ze,validationValue:F.externalValue,counterValue:oe.value,dirty:ue,class:["v-combobox",{"v-combobox--active-menu":je.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!te.value,"v-combobox--selecting-index":T.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:H.isReadonly.value,placeholder:ue?void 0:e.placeholder,"onClick:clear":ze,"onMousedown:control":Se,onKeydown:jt}),{...s,default:()=>X(Wt,null,[U(Od,lt({ref:C,modelValue:je.value,"onUpdate:modelValue":Ze=>je.value=Ze,activator:"parent",contentClass:"v-combobox__content",disabled:ae.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Tt,onAfterLeave:xt},e.menuProps),{default:()=>[re&&U(Bd,lt({ref:mt,filterable:!0,selected:Fe.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Ze=>Ze.preventDefault(),onKeydown:Qe,onFocusin:vt,onFocusout:st,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},ft,e.listProps),{default:()=>{var Ze,ut,Je;return[(Ze=s["prepend-item"])==null?void 0:Ze.call(s),!_e.value.length&&!e.hideNoData&&(((ut=s["no-data"])==null?void 0:ut.call(s))??U(ys,{key:"no-data",title:c(e.noDataText)},null)),U(Yg,{ref:w,renderless:!0,items:_e.value,itemKey:"value"},{default:Pt=>{var Ht,en,cn;let{item:ct,index:Lt,itemRef:It}=Pt;const sn=lt(ct.props,{ref:It,key:ct.value,active:Ke.value&&Lt===0?!0:void 0,onClick:()=>Re(ct,null)});return ct.type==="divider"?((Ht=s.divider)==null?void 0:Ht.call(s,{props:ct.raw,index:Lt}))??U($a,lt(ct.props,{key:`divider-${Lt}`}),null):ct.type==="subheader"?((en=s.subheader)==null?void 0:en.call(s,{props:ct.raw,index:Lt}))??U(Xd,lt(ct.props,{key:`subheader-${Lt}`}),null):((cn=s.item)==null?void 0:cn.call(s,{item:ct,index:Lt,props:sn}))??U(ys,lt(sn,{role:"option"}),{prepend:vn=>{let{isSelected:En}=vn;return X(Wt,null,[e.multiple&&!e.hideSelected?U(Hs,{key:ct.value,modelValue:En,ripple:!1,tabindex:"-1"},null):void 0,ct.props.prependAvatar&&U(Ja,{image:ct.props.prependAvatar},null),ct.props.prependIcon&&U(Xn,{icon:ct.props.prependIcon},null)])},title:()=>{var vn;return a.value?ct.title:VP("v-combobox",ct.title,(vn=pe(ct))==null?void 0:vn.title)}})}}),(Je=s["append-item"])==null?void 0:Je.call(s)]}})]}),F.value.map((Ze,ut)=>{function Je(It){It.stopPropagation(),It.preventDefault(),Re(Ze,!1)}const Pt={"onClick:close":Je,onKeydown(It){It.key!=="Enter"&&It.key!==" "||(It.preventDefault(),It.stopPropagation(),Je(It))},onMousedown(It){It.preventDefault(),It.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ct=Y.value?!!s.chip:!!s.selection,Lt=ct?$g(Y.value?s.chip({item:Ze,index:ut,props:Pt}):s.selection({item:Ze,index:ut})):void 0;if(!(ct&&!Lt))return X("div",{key:Ze.value,class:gt(["v-combobox__selection",ut===T.value&&["v-combobox__selection--selected",z.value]]),style:Bt(ut===T.value?$.value:{})},[Y.value?s.chip?U(Sn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Ze.title}}},{default:()=>[Lt]}):U(Yd,lt({key:"chip",closable:e.closableChips,size:"small",text:Ze.title,disabled:Ze.props.disabled},Pt),null):Lt??X("span",{class:"v-combobox__selection-text"},[Ze.title,e.multiple&&ut<F.value.length-1&&X("span",{class:"v-combobox__selection-comma"},[nn(",")])])])})]),"append-inner":function(){var Pt,ct;for(var Ze=arguments.length,ut=new Array(Ze),Je=0;Je<Ze;Je++)ut[Je]=arguments[Je];return X(Wt,null,[(Pt=s["append-inner"])==null?void 0:Pt.call(s,...ut),(!e.hideNoData||e.items.length)&&e.menuIcon?U(Xn,{class:"v-combobox__menu-icon",color:(ct=f.value)==null?void 0:ct.fieldIconColor,icon:e.menuIcon,onMousedown:Ie,onClick:eT,"aria-label":c(Ve.value),title:c(Ve.value),tabindex:"-1"},null):void 0])}})}),Tr({isFocused:d,isPristine:a,menu:je,search:ce,selectionIndex:T,filteredItems:he,select:Re},f)}}),zO=Ue({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),VO=ht()({name:"VConfirmEdit",props:zO(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=tn(e,"modelValue"),f=et();Ri(()=>{f.value=structuredClone(fn(c.value))});const{t:d}=gi(),a=ne(()=>Rr(c.value,f.value));function b(O){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(O):a.value}const C=ne(()=>b("save")),w=ne(()=>b("cancel"));function T(){c.value=f.value,r("save",f.value)}function A(){f.value=structuredClone(fn(c.value)),r("cancel")}function P(O){return X(Wt,null,[U(Mn,lt({disabled:w.value,variant:"text",color:e.color,onClick:A,text:d(e.cancelText)},O),null),U(Mn,lt({disabled:C.value,variant:"text",color:e.color,onClick:T,text:d(e.okText)},O),null)])}let R=!1;return _t(()=>{var O;return X(Wt,null,[(O=s.default)==null?void 0:O.call(s,{model:f,save:T,cancel:A,isPristine:a.value,get actions(){return R=!0,P}}),!e.hideActions&&!R&&P()])}),{save:T,cancel:A,isPristine:a}}}),e2=Ue({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),t2=Symbol.for("vuetify:datatable:expanded");function ev(e){const n=Me(()=>e.expandOnClick),r=tn(e,"expanded",e.expanded,a=>new Set(a),a=>[...a.values()]);function s(a,b){const C=new Set(r.value);b?C.add(a.value):C.delete(a.value),r.value=C}function c(a){return r.value.has(a.value)}function f(a){s(a,!c(a))}const d={expand:s,expanded:r,expandOnClick:n,isExpanded:c,toggleExpand:f};return ri(t2,d),d}function n2(){const e=bn(t2);if(!e)throw new Error("foo");return e}const M0=Ue({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),i2=Symbol.for("vuetify:data-table-group");function D0(e){return{groupBy:tn(e,"groupBy")}}function tv(e){const{disableSort:n,groupBy:r,sortBy:s}=e,c=et(new Set),f=ne(()=>r.value.map(w=>({...w,order:w.order??!1})).concat(n!=null&&n.value?[]:s.value));function d(w){return c.value.has(w.id)}function a(w){const T=new Set(c.value);d(w)?T.delete(w.id):T.add(w.id),c.value=T}function b(w){function T(A){const P=[];for(const R of A.items)"type"in R&&R.type==="group"?P.push(...T(R)):P.push(R);return[...new Set(P)]}return T({items:w})}const C={sortByWithGroups:f,toggleGroup:a,opened:c,groupBy:r,extractRows:b,isGroupOpen:d};return ri(i2,C),C}function r2(){const e=bn(i2);if(!e)throw new Error("Missing group!");return e}function BO(e,n){if(!e.length)return[];const r=new Map;for(const s of e){const c=Nu(s.raw,n);r.has(c)||r.set(c,[]),r.get(c).push(s)}return r}function a2(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!n.length)return[];const c=BO(e,n[0]),f=[],d=n.slice(1);return c.forEach((a,b)=>{const C=n[0],w=`${s}_${C}_${b}`;f.push({depth:r,id:w,key:C,value:b,items:d.length?a2(a,d,r+1,w):a,type:"group"})}),f}function s2(e,n){const r=[];for(const s of e)"type"in s&&s.type==="group"?(s.value!=null&&r.push(s),(n.has(s.id)||s.value==null)&&r.push(...s2(s.items,n))):r.push(s);return r}function nv(e,n,r){return{flatItems:ne(()=>{if(!n.value.length)return e.value;const c=a2(e.value,n.value.map(f=>f.key));return s2(c,r.value)})}}function iv(e){let{page:n,itemsPerPage:r,sortBy:s,groupBy:c,search:f}=e;const d=ji("VDataTable"),a=()=>({page:n.value,itemsPerPage:r.value,sortBy:s.value,groupBy:c.value,search:f.value});let b=null;Ot(a,C=>{Rr(b,C)||(b&&b.search!==C.search&&(n.value=1),d.emit("update:options",C),b=C)},{deep:!0,immediate:!0})}const R0=Ue({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),o2=Symbol.for("vuetify:data-table-pagination");function L0(e){const n=tn(e,"page",void 0,s=>Number(s??1)),r=tn(e,"itemsPerPage",void 0,s=>Number(s??10));return{page:n,itemsPerPage:r}}function z0(e){const{page:n,itemsPerPage:r,itemsLength:s}=e,c=ne(()=>r.value===-1?0:r.value*(n.value-1)),f=ne(()=>r.value===-1?s.value:Math.min(s.value,c.value+r.value)),d=ne(()=>r.value===-1||s.value===0?1:Math.ceil(s.value/r.value));Ot([n,d],()=>{n.value>d.value&&(n.value=d.value)});function a(A){r.value=A,n.value=1}function b(){n.value=ci(n.value+1,1,d.value)}function C(){n.value=ci(n.value-1,1,d.value)}function w(A){n.value=ci(A,1,d.value)}const T={page:n,itemsPerPage:r,startIndex:c,stopIndex:f,pageCount:d,itemsLength:s,nextPage:b,prevPage:C,setPage:w,setItemsPerPage:a};return ri(o2,T),T}function OO(){const e=bn(o2);if(!e)throw new Error("Missing pagination!");return e}function l2(e){const n=ji("usePaginatedItems"),{items:r,startIndex:s,stopIndex:c,itemsPerPage:f}=e,d=ne(()=>f.value<=0?r.value:r.value.slice(s.value,c.value));return Ot(d,a=>{n.emit("update:currentItems",a)},{immediate:!0}),{paginatedItems:d}}const FO={showSelectAll:!1,allSelected:()=>[],select:e=>{var s;let{items:n,value:r}=e;return new Set(r?[(s=n[0])==null?void 0:s.value]:[])},selectAll:e=>{let{selected:n}=e;return n}},u2={showSelectAll:!0,allSelected:e=>{let{currentPage:n}=e;return n},select:e=>{let{items:n,value:r,selected:s}=e;for(const c of n)r?s.add(c.value):s.delete(c.value);return s},selectAll:e=>{let{value:n,currentPage:r,selected:s}=e;return u2.select({items:r,value:n,selected:s})}},c2={showSelectAll:!0,allSelected:e=>{let{allItems:n}=e;return n},select:e=>{let{items:n,value:r,selected:s}=e;for(const c of n)r?s.add(c.value):s.delete(c.value);return s},selectAll:e=>{let{value:n,allItems:r,selected:s}=e;return c2.select({items:r,value:n,selected:s})}},d2=Ue({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Rr}},"DataTable-select"),h2=Symbol.for("vuetify:data-table-selection");function rv(e,n){let{allItems:r,currentPage:s}=n;const c=tn(e,"modelValue",e.modelValue,F=>new Set(Mi(F).map(H=>{var Y;return((Y=r.value.find(te=>e.valueComparator(H,te.value)))==null?void 0:Y.value)??H})),F=>[...F.values()]),f=ne(()=>r.value.filter(F=>F.selectable)),d=ne(()=>s.value.filter(F=>F.selectable)),a=ne(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return FO;case"all":return c2;case"page":default:return u2}}),b=Dt(null);function C(F){return Mi(F).every(H=>c.value.has(H.value))}function w(F){return Mi(F).some(H=>c.value.has(H.value))}function T(F,H){const Y=a.value.select({items:F,value:H,selected:new Set(c.value)});c.value=Y}function A(F,H,Y){const te=[];if(H=H??s.value.findIndex(Q=>Q.value===F.value),e.selectStrategy!=="single"&&(Y!=null&&Y.shiftKey)&&b.value!==null){const[Q,ce]=[b.value,H].sort((oe,he)=>oe-he);te.push(...s.value.slice(Q,ce+1).filter(oe=>oe.selectable))}else te.push(F),b.value=H;T(te,!C([F]))}function P(F){const H=a.value.selectAll({value:F,allItems:f.value,currentPage:d.value,selected:new Set(c.value)});c.value=H}const R=ne(()=>c.value.size>0),O=ne(()=>{const F=a.value.allSelected({allItems:f.value,currentPage:d.value});return!!F.length&&C(F)}),z=Me(()=>a.value.showSelectAll),$={toggleSelect:A,select:T,selectAll:P,isSelected:C,isSomeSelected:w,someSelected:R,allSelected:O,showSelectAll:z,lastSelectedIndex:b,selectStrategy:a};return ri(h2,$),$}function av(){const e=bn(h2);if(!e)throw new Error("Missing selection!");return e}const f2=Ue({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),m2=Symbol.for("vuetify:data-table-sort");function sv(e){const n=tn(e,"sortBy"),r=Me(()=>e.mustSort),s=Me(()=>e.multiSort);return{sortBy:n,mustSort:r,multiSort:s}}function ov(e){const{sortBy:n,mustSort:r,multiSort:s,page:c}=e,f=b=>{if(b.key==null)return;let C=n.value.map(T=>({...T}))??[];const w=C.find(T=>T.key===b.key);w?w.order==="desc"?r.value&&C.length===1?w.order="asc":C=C.filter(T=>T.key!==b.key):w.order="desc":s.value?C.push({key:b.key,order:"asc"}):C=[{key:b.key,order:"asc"}],n.value=C,c&&(c.value=1)};function d(b){return!!n.value.find(C=>C.key===b.key)}const a={sortBy:n,toggleSort:f,isSorted:d};return ri(m2,a),a}function p2(){const e=bn(m2);if(!e)throw new Error("Missing sort!");return e}function V0(e,n,r,s){const c=gi();return{sortedItems:ne(()=>{var d,a;return r.value.length?$O(n.value,r.value,c.current.value,{transform:s==null?void 0:s.transform,sortFunctions:{...e.customKeySort,...(d=s==null?void 0:s.sortFunctions)==null?void 0:d.value},sortRawFunctions:(a=s==null?void 0:s.sortRawFunctions)==null?void 0:a.value}):n.value})}}function $O(e,n,r,s){const c=new Intl.Collator(r,{sensitivity:"accent",usage:"sort"});return e.map(d=>[d,s!=null&&s.transform?s.transform(d):d]).sort((d,a)=>{var b,C;for(let w=0;w<n.length;w++){let T=!1;const A=n[w].key,P=n[w].order??"asc";if(P===!1)continue;let R=Nu(d[1],A),O=Nu(a[1],A),z=d[0].raw,$=a[0].raw;if(P==="desc"&&([R,O]=[O,R],[z,$]=[$,z]),(b=s==null?void 0:s.sortRawFunctions)!=null&&b[A]){const F=s.sortRawFunctions[A](z,$);if(F==null)continue;if(T=!0,F)return F}if((C=s==null?void 0:s.sortFunctions)!=null&&C[A]){const F=s.sortFunctions[A](R,O);if(F==null)continue;if(T=!0,F)return F}if(!T&&(R instanceof Date&&O instanceof Date&&(R=R.getTime(),O=O.getTime()),[R,O]=[R,O].map(F=>F!=null?F.toString().toLocaleLowerCase():F),R!==O))return jp(R)&&jp(O)?0:jp(R)?-1:jp(O)?1:!isNaN(R)&&!isNaN(O)?Number(R)-Number(O):c.compare(R,O)}return 0}).map(d=>{let[a]=d;return a})}const jO=Ue({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function NO(e,n){const r=e.returnObject?n:Wi(n,e.itemValue),s=Wi(n,e.itemSelectable,!0);return{type:"item",value:r,selectable:s,raw:n}}function UO(e,n){const r=[];for(const s of n)r.push(NO(e,s));return r}function GO(e){return{items:ne(()=>UO(e,e.items))}}const HO=Ue({search:String,loading:Boolean,...Zt(),...jO(),...d2(),...f2(),...R0({itemsPerPage:5}),...e2(),...M0(),...Jd(),...xn(),...ws({transition:{component:Zf,hideOnLeave:!0}})},"VDataIterator"),qO=ht()({name:"VDataIterator",props:HO(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"groupBy"),c=Me(()=>e.search),{items:f}=GO(e),{filteredItems:d}=Qd(e,f,c,{transform:Se=>Se.raw}),{sortBy:a,multiSort:b,mustSort:C}=sv(e),{page:w,itemsPerPage:T}=L0(e),{toggleSort:A}=ov({sortBy:a,multiSort:b,mustSort:C,page:w}),{sortByWithGroups:P,opened:R,extractRows:O,isGroupOpen:z,toggleGroup:$}=tv({groupBy:s,sortBy:a}),{sortedItems:F}=V0(e,d,P,{transform:Se=>Se.raw}),{flatItems:H}=nv(F,s,R),Y=Me(()=>H.value.length),{startIndex:te,stopIndex:Q,pageCount:ce,prevPage:oe,nextPage:he,setItemsPerPage:pe,setPage:_e}=z0({page:w,itemsPerPage:T,itemsLength:Y}),{paginatedItems:ae}=l2({items:H,startIndex:te,stopIndex:Q,itemsPerPage:T}),be=ne(()=>O(ae.value)),{isSelected:je,select:Ve,selectAll:Fe,toggleSelect:Ke}=rv(e,{allItems:f,currentPage:be}),{isExpanded:mt,toggleExpand:ft}=ev(e);iv({page:w,itemsPerPage:T,sortBy:a,groupBy:s,search:c});const ze=ne(()=>({page:w.value,itemsPerPage:T.value,sortBy:a.value,pageCount:ce.value,toggleSort:A,prevPage:oe,nextPage:he,setPage:_e,setItemsPerPage:pe,isSelected:je,select:Ve,selectAll:Fe,toggleSelect:Ke,isExpanded:mt,toggleExpand:ft,isGroupOpen:z,toggleGroup:$,items:be.value,groupedItems:ae.value}));return _t(()=>U(e.tag,{class:gt(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Bt(e.style)},{default:()=>{var Se,Ie;return[(Se=r.header)==null?void 0:Se.call(r,ze.value),U(na,{transition:e.transition},{default:()=>{var Qe,jt;return[e.loading?U(gm,{key:"loader",name:"v-data-iterator",active:!0},{default:Tt=>{var xt;return(xt=r.loader)==null?void 0:xt.call(r,Tt)}}):X("div",{key:"items"},[ae.value.length?(jt=r.default)==null?void 0:jt.call(r,ze.value):(Qe=r["no-data"])==null?void 0:Qe.call(r)])]}}),(Ie=r.footer)==null?void 0:Ie.call(r,ze.value)]}})),{}}});function WO(){const e=et([]);hk(()=>e.value=[]);function n(r,s){e.value[s]=r}return{refs:e,updateRef:n}}const ZO=Ue({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:an,default:"$first"},prevIcon:{type:an,default:"$prev"},nextIcon:{type:an,default:"$next"},lastIcon:{type:an,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ya(),...Zt(),...fr(),...nr(),...vi(),...Ks(),...xn({tag:"nav"}),...Un(),...es({variant:"text"})},"VPagination"),tb=ht()({name:"VPagination",props:ZO(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=tn(e,"modelValue"),{t:f,n:d}=gi(),{isRtl:a}=tr(),{themeClasses:b}=Jn(e),{width:C}=Qa(),w=Dt(-1);Li(void 0,{scoped:!0});const{resizeRef:T}=vs(oe=>{if(!oe.length)return;const{target:he,contentRect:pe}=oe[0],_e=he.querySelector(".v-pagination__list > *");if(!_e)return;const ae=pe.width,be=_e.offsetWidth+parseFloat(getComputedStyle(_e).marginRight)*2;w.value=O(ae,be)}),A=ne(()=>parseInt(e.length,10)),P=ne(()=>parseInt(e.start,10)),R=ne(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):w.value>=0?w.value:O(C.value,58));function O(oe,he){const pe=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((oe-he*pe)/he).toFixed(2))))}const z=ne(()=>{if(A.value<=0||isNaN(A.value)||A.value>Number.MAX_SAFE_INTEGER)return[];if(R.value<=0)return[];if(R.value===1)return[c.value];if(A.value<=R.value)return Oa(A.value,P.value);const oe=R.value%2===0,he=oe?R.value/2:Math.floor(R.value/2),pe=oe?he:he+1,_e=A.value-he;if(pe-c.value>=0)return[...Oa(Math.max(1,R.value-1),P.value),e.ellipsis,A.value];if(c.value-_e>=(oe?1:0)){const ae=R.value-1,be=A.value-ae+P.value;return[P.value,e.ellipsis,...Oa(ae,be)]}else{const ae=Math.max(1,R.value-2),be=ae===1?c.value:c.value-Math.ceil(ae/2)+P.value;return[P.value,e.ellipsis,...Oa(ae,be),e.ellipsis,A.value]}});function $(oe,he,pe){oe.preventDefault(),c.value=he,pe&&s(pe,he)}const{refs:F,updateRef:H}=WO();Li({VPaginationBtn:{color:Me(()=>e.color),border:Me(()=>e.border),density:Me(()=>e.density),size:Me(()=>e.size),variant:Me(()=>e.variant),rounded:Me(()=>e.rounded),elevation:Me(()=>e.elevation)}});const Y=ne(()=>z.value.map((oe,he)=>{const pe=_e=>H(_e,he);if(typeof oe=="string")return{isActive:!1,key:`ellipsis-${he}`,page:oe,props:{ref:pe,ellipsis:!0,icon:!0,disabled:!0}};{const _e=oe===c.value;return{isActive:_e,key:oe,page:d(oe),props:{ref:pe,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:_e?e.activeColor:e.color,"aria-current":_e,"aria-label":f(_e?e.currentPageAriaLabel:e.pageAriaLabel,oe),onClick:ae=>$(ae,oe)}}}})),te=ne(()=>{const oe=!!e.disabled||c.value<=P.value,he=!!e.disabled||c.value>=P.value+A.value-1;return{first:e.showFirstLastPage?{icon:a.value?e.lastIcon:e.firstIcon,onClick:pe=>$(pe,P.value,"first"),disabled:oe,"aria-label":f(e.firstAriaLabel),"aria-disabled":oe}:void 0,prev:{icon:a.value?e.nextIcon:e.prevIcon,onClick:pe=>$(pe,c.value-1,"prev"),disabled:oe,"aria-label":f(e.previousAriaLabel),"aria-disabled":oe},next:{icon:a.value?e.prevIcon:e.nextIcon,onClick:pe=>$(pe,c.value+1,"next"),disabled:he,"aria-label":f(e.nextAriaLabel),"aria-disabled":he},last:e.showFirstLastPage?{icon:a.value?e.firstIcon:e.lastIcon,onClick:pe=>$(pe,P.value+A.value-1,"last"),disabled:he,"aria-label":f(e.lastAriaLabel),"aria-disabled":he}:void 0}});function Q(){var he;const oe=c.value-P.value;(he=F.value[oe])==null||he.$el.focus()}function ce(oe){oe.key===C_.left&&!e.disabled&&c.value>Number(e.start)?(c.value=c.value-1,Dn(Q)):oe.key===C_.right&&!e.disabled&&c.value<P.value+A.value-1&&(c.value=c.value+1,Dn(Q))}return _t(()=>U(e.tag,{ref:T,class:gt(["v-pagination",b.value,e.class]),style:Bt(e.style),role:"navigation","aria-label":f(e.ariaLabel),onKeydown:ce,"data-test":"v-pagination-root"},{default:()=>[X("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&X("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(te.value.first):U(Mn,lt({_as:"VPaginationBtn"},te.value.first),null)]),X("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(te.value.prev):U(Mn,lt({_as:"VPaginationBtn"},te.value.prev),null)]),Y.value.map((oe,he)=>X("li",{key:oe.key,class:gt(["v-pagination__item",{"v-pagination__item--is-active":oe.isActive}]),"data-test":"v-pagination-item"},[r.item?r.item(oe):U(Mn,lt({_as:"VPaginationBtn"},oe.props),{default:()=>[oe.page]})])),X("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(te.value.next):U(Mn,lt({_as:"VPaginationBtn"},te.value.next),null)]),e.showFirstLastPage&&X("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(te.value.last):U(Mn,lt({_as:"VPaginationBtn"},te.value.last),null)])])]})),{}}}),B0=Ue({prevIcon:{type:an,default:"$prev"},nextIcon:{type:an,default:"$next"},firstIcon:{type:an,default:"$first"},lastIcon:{type:an,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),nm=ht()({name:"VDataTableFooter",props:B0(),setup(e,n){let{slots:r}=n;const{t:s}=gi(),{page:c,pageCount:f,startIndex:d,stopIndex:a,itemsLength:b,itemsPerPage:C,setItemsPerPage:w}=OO(),T=ne(()=>e.itemsPerPageOptions.map(A=>typeof A=="number"?{value:A,title:A===-1?s("$vuetify.dataFooter.itemsPerPageAll"):String(A)}:{...A,title:isNaN(Number(A.title))?s(A.title):A.title}));return _t(()=>{var P;const A=tb.filterProps(e);return X("div",{class:"v-data-table-footer"},[(P=r.prepend)==null?void 0:P.call(r),X("div",{class:"v-data-table-footer__items-per-page"},[X("span",{"aria-label":s(e.itemsPerPageText)},[s(e.itemsPerPageText)]),U(I0,{items:T.value,modelValue:C.value,"onUpdate:modelValue":R=>w(Number(R)),density:"compact",variant:"outlined","hide-details":!0},null)]),X("div",{class:"v-data-table-footer__info"},[X("div",null,[s(e.pageText,b.value?d.value+1:0,a.value,b.value)])]),X("div",{class:"v-data-table-footer__pagination"},[U(tb,lt({modelValue:c.value,"onUpdate:modelValue":R=>c.value=R,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:f.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},A),null)])])}),{}}}),Cg=OR({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,n)=>{let{slots:r}=n;const s=e.tag??"td",c=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return U(s,{class:gt(["v-data-table__td",{"v-data-table-column--fixed":c==="start","v-data-table-column--fixed-end":c==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:Gt(e.height),width:Gt(e.width),maxWidth:Gt(e.maxWidth),left:c==="start"?Gt(e.fixedOffset||null):void 0,right:c==="end"?Gt(e.fixedEndOffset||null):void 0}},{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r)]}})}),KO=Ue({headers:Array},"DataTable-header"),g2=Symbol.for("vuetify:data-table-headers"),v2={title:"",sortable:!1},YO={...v2,width:48};function XO(){const n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(r=>({element:r,priority:0}));return{enqueue:(r,s)=>{let c=!1;for(let f=0;f<n.length;f++)if(n[f].priority>s){n.splice(f,0,{element:r,priority:s}),c=!0;break}c||n.push({element:r,priority:s})},size:()=>n.length,count:()=>{let r=0;if(!n.length)return 0;const s=Math.floor(n[0].priority);for(let c=0;c<n.length;c++)Math.floor(n[c].priority)===s&&(r+=1);return r},dequeue:()=>n.shift()}}function nb(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)n.push(e);else for(const r of e.children)nb(r,n);return n}function y2(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const r of e)r.key&&n.add(r.key),r.children&&y2(r.children,n);return n}function JO(e){if(e.key){if(e.key==="data-table-group")return v2;if(["data-table-expand","data-table-select"].includes(e.key))return YO}}function O0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(n,...e.children.map(r=>O0(r,n+1))):n}function QO(e){let n=!1;function r(a,b){var T;let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(!a)return;C!=="none"&&(a.fixed=C),a.fixed===!0&&(a.fixed="start");const w=b==="start"?(T=a.children)==null?void 0:T.toReversed():a.children;if(a.fixed===b)if(w)for(const A of w)r(A,b,b);else!n&&b==="start"?a.lastFixed=!0:!n&&b==="end"?a.firstFixedEnd=!0:isNaN(Number(a.width))?(`${a.key}`,void 0):a.minWidth=Math.max(Number(a.width)||0,Number(a.minWidth)||0),n=!0;else if(w)for(const A of w)r(A,b);else n=!1}for(const a of e.toReversed())r(a,"start");for(const a of e)r(a,"end");function s(a){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!a)return b;if(a.children){a.fixedOffset=b;for(const C of a.children)b=s(C,b)}else a.fixed&&a.fixed!=="end"&&(a.fixedOffset=b,b+=parseFloat(a.width||"0")||0);return b}let c=0;for(const a of e)c=s(a,c);function f(a){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!a)return b;if(a.children){a.fixedEndOffset=b;for(const C of a.children)b=f(C,b)}else a.fixed==="end"&&(a.fixedEndOffset=b,b+=parseFloat(a.width||"0")||0);return b}let d=0;for(const a of e.toReversed())d=f(a,d)}function eF(e,n){const r=[];let s=0;const c=XO(e);for(;c.size()>0;){let d=c.count();const a=[];let b=1;for(;d>0;){const{element:C,priority:w}=c.dequeue(),T=n-s-O0(C);if(a.push({...C,rowspan:T??1,colspan:C.children?nb(C).length:1}),C.children)for(const A of C.children){const P=w%1+b/Math.pow(10,s+2);c.enqueue(A,s+T+P)}b+=1,d-=1}s+=1,r.push(a)}return{columns:e.map(d=>nb(d)).flat(),headers:r}}function _2(e){const n=[];for(const r of e){const s={...JO(r),...r},c=s.key??(typeof s.value=="string"?s.value:null),f=s.value??c??null,d={...s,key:c,value:f,sortable:s.sortable??(s.key!=null||!!s.sort),children:s.children?_2(s.children):void 0};n.push(d)}return n}function F0(e,n){const r=et([]),s=et([]),c=et({}),f=et({}),d=et({});Ri(()=>{var O,z,$;const C=(e.headers||Object.keys(e.items[0]??{}).map(F=>({key:F,title:Ws(F)}))).slice(),w=y2(C);(O=n==null?void 0:n.groupBy)!=null&&O.value.length&&!w.has("data-table-group")&&C.unshift({key:"data-table-group",title:"Group"}),(z=n==null?void 0:n.showSelect)!=null&&z.value&&!w.has("data-table-select")&&C.unshift({key:"data-table-select"}),($=n==null?void 0:n.showExpand)!=null&&$.value&&!w.has("data-table-expand")&&C.push({key:"data-table-expand"});const T=_2(C);QO(T);const A=Math.max(...T.map(F=>O0(F)))+1,P=eF(T,A);r.value=P.headers,s.value=P.columns;const R=P.headers.flat(1);for(const F of R)F.key&&(F.sortable&&(F.sort&&(c.value[F.key]=F.sort),F.sortRaw&&(f.value[F.key]=F.sortRaw)),F.filter&&(d.value[F.key]=F.filter))});const a={headers:r,columns:s,sortFunctions:c,sortRawFunctions:f,filterFunctions:d};return ri(g2,a),a}function lv(){const e=bn(g2);if(!e)throw new Error("Missing headers!");return e}const b2=Ue({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:an,default:"$sortAsc"},sortDescIcon:{type:an,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Xu(),...qg()},"VDataTableHeaders"),qu=ht()({name:"VDataTableHeaders",props:b2(),setup(e,n){let{slots:r}=n;const{t:s}=gi(),{toggleSort:c,sortBy:f,isSorted:d}=p2(),{someSelected:a,allSelected:b,selectAll:C,showSelectAll:w}=av(),{columns:T,headers:A}=lv(),{loaderClasses:P}=pm(e);function R(he,pe){if(!(e.sticky||e.fixedHeader)&&!he.fixed)return;const _e=typeof he.fixed=="string"?he.fixed:he.fixed?"start":"none";return{position:"sticky",left:_e==="start"?Gt(he.fixedOffset):void 0,right:_e==="end"?Gt(he.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${pe})`:void 0}}function O(he,pe){he.key==="Enter"&&!e.disableSort&&c(pe)}function z(he){const pe=f.value.find(_e=>_e.key===he.key);return pe?pe.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:$,backgroundColorStyles:F}=ti(()=>e.color),{displayClasses:H,mobile:Y}=Qa(e),te=ne(()=>({headers:A.value,columns:T.value,toggleSort:c,isSorted:d,sortBy:f.value,someSelected:a.value,allSelected:b.value,selectAll:C,getSortIcon:z})),Q=ne(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},H.value,P.value]),ce=he=>{let{column:pe,x:_e,y:ae}=he;const be=pe.key==="data-table-select"||pe.key==="data-table-expand",je=lt(e.headerProps??{},pe.headerProps??{});return U(Cg,lt({tag:"th",align:pe.align,class:[{"v-data-table__th--sortable":pe.sortable&&!e.disableSort,"v-data-table__th--sorted":d(pe),"v-data-table__th--fixed":pe.fixed},...Q.value],style:{width:Gt(pe.width),minWidth:Gt(pe.minWidth),maxWidth:Gt(pe.maxWidth),...R(pe,ae)},colspan:pe.colspan,rowspan:pe.rowspan,fixed:pe.fixed,nowrap:pe.nowrap,lastFixed:pe.lastFixed,firstFixedEnd:pe.firstFixedEnd,noPadding:be,tabindex:pe.sortable?0:void 0,onClick:pe.sortable?()=>c(pe):void 0,onKeydown:pe.sortable?Ve=>O(Ve,pe):void 0},je),{default:()=>{var Ke;const Ve=`header.${pe.key}`,Fe={column:pe,selectAll:C,isSorted:d,toggleSort:c,sortBy:f.value,someSelected:a.value,allSelected:b.value,getSortIcon:z};return r[Ve]?r[Ve](Fe):pe.key==="data-table-select"?((Ke=r["header.data-table-select"])==null?void 0:Ke.call(r,Fe))??(w.value&&U(Hs,{modelValue:b.value,indeterminate:a.value&&!b.value,"onUpdate:modelValue":C},null)):X("div",{class:"v-data-table-header__content"},[X("span",null,[pe.title]),pe.sortable&&!e.disableSort&&U(Xn,{key:"icon",class:"v-data-table-header__sort-icon",icon:z(pe)},null),e.multiSort&&d(pe)&&X("div",{key:"badge",class:gt(["v-data-table-header__sort-badge",...$.value]),style:Bt(F.value)},[f.value.findIndex(mt=>mt.key===pe.key)+1])])}})},oe=()=>{const he=ne(()=>T.value.filter(_e=>(_e==null?void 0:_e.sortable)&&!e.disableSort)),pe=ne(()=>{if(T.value.find(ae=>ae.key==="data-table-select")!=null)return b.value?"$checkboxOn":a.value?"$checkboxIndeterminate":"$checkboxOff"});return U(Cg,lt({tag:"th",class:[...Q.value],colspan:A.value.length+1},e.headerProps),{default:()=>[X("div",{class:"v-data-table-header__content"},[U(I0,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:he.value,label:s("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>f.value=[],appendIcon:pe.value,"onClick:append":()=>C(!b.value)},{...r,chip:_e=>{var ae;return U(Yd,{onClick:(ae=_e.item.raw)!=null&&ae.sortable?()=>c(_e.item.raw):void 0,onMousedown:be=>{be.preventDefault(),be.stopPropagation()}},{default:()=>[_e.item.title,U(Xn,{class:gt(["v-data-table__td-sort-icon",d(_e.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:z(_e.item.raw),size:"small"},null)]})}})])]})};_t(()=>Y.value?X("tr",null,[U(oe,null,null)]):X(Wt,null,[r.headers?r.headers(te.value):A.value.map((he,pe)=>X("tr",null,[he.map((_e,ae)=>U(ce,{column:_e,x:ae,y:pe},null))])),e.loading&&X("tr",{class:"v-data-table-progress"},[X("th",{colspan:T.value.length},[U(gm,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:r.loader})])])]))}}),tF=Ue({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),nF=ht()({name:"VDataTableGroupHeaderRow",props:tF(),setup(e,n){let{slots:r}=n;const{isGroupOpen:s,toggleGroup:c,extractRows:f}=r2(),{isSelected:d,isSomeSelected:a,select:b}=av(),{columns:C}=lv(),w=ne(()=>f([e.item]));return()=>X("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[C.value.map(T=>{var A,P;if(T.key==="data-table-group"){const R=s(e.item)?"$expand":"$next",O=()=>c(e.item);return((A=r["data-table-group"])==null?void 0:A.call(r,{item:e.item,count:w.value.length,props:{icon:R,onClick:O}}))??U(Cg,{class:"v-data-table-group-header-row__column"},{default:()=>[U(Mn,{size:"small",variant:"text",icon:R,onClick:O},null),X("span",null,[e.item.value]),X("span",null,[nn("("),w.value.length,nn(")")])]})}if(T.key==="data-table-select"){const R=d(w.value),O=a(w.value)&&!R,z=$=>b(w.value,$);return((P=r["data-table-select"])==null?void 0:P.call(r,{props:{modelValue:R,indeterminate:O,"onUpdate:modelValue":z}}))??X("td",null,[U(Hs,{modelValue:R,indeterminate:O,"onUpdate:modelValue":z},null)])}return X("td",null,null)})])}}),iF=Ue({index:Number,item:Object,cellProps:[Object,Function],onClick:Lr(),onContextmenu:Lr(),onDblclick:Lr(),...Xu()},"VDataTableRow"),$0=ht()({name:"VDataTableRow",props:iF(),setup(e,n){let{slots:r}=n;const{displayClasses:s,mobile:c}=Qa(e,"v-data-table__tr"),{isSelected:f,toggleSelect:d,someSelected:a,allSelected:b,selectAll:C}=av(),{isExpanded:w,toggleExpand:T}=n2(),{toggleSort:A,sortBy:P,isSorted:R}=p2(),{columns:O}=lv();_t(()=>X("tr",{class:gt(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},s.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&O.value.map((z,$)=>{const F=e.item,H=`item.${z.key}`,Y=`header.${z.key}`,te={index:e.index,item:F.raw,internalItem:F,value:Nu(F.columns,z.key),column:z,isSelected:f,toggleSelect:d,isExpanded:w,toggleExpand:T},Q={column:z,selectAll:C,isSorted:R,toggleSort:A,sortBy:P.value,someSelected:a.value,allSelected:b.value,getSortIcon:()=>""},ce=typeof e.cellProps=="function"?e.cellProps({index:te.index,item:te.item,internalItem:te.internalItem,value:te.value,column:z}):e.cellProps,oe=typeof z.cellProps=="function"?z.cellProps({index:te.index,item:te.item,internalItem:te.internalItem,value:te.value}):z.cellProps;return U(Cg,lt({align:z.align,class:{"v-data-table__td--expanded-row":z.key==="data-table-expand","v-data-table__td--select-row":z.key==="data-table-select"},fixed:z.fixed,fixedOffset:z.fixedOffset,fixedEndOffset:z.fixedEndOffset,lastFixed:z.lastFixed,firstFixedEnd:z.firstFixedEnd,maxWidth:c.value?void 0:z.maxWidth,noPadding:z.key==="data-table-select"||z.key==="data-table-expand",nowrap:z.nowrap,width:c.value?void 0:z.width},ce,oe),{default:()=>{var pe,_e,ae,be;if(z.key==="data-table-select")return((pe=r["item.data-table-select"])==null?void 0:pe.call(r,{...te,props:{disabled:!F.selectable,modelValue:f([F]),onClick:wl(()=>d(F),["stop"])}}))??U(Hs,{disabled:!F.selectable,modelValue:f([F]),onClick:wl(je=>d(F,e.index,je),["stop"])},null);if(z.key==="data-table-expand")return((_e=r["item.data-table-expand"])==null?void 0:_e.call(r,{...te,props:{icon:w(F)?"$collapse":"$expand",size:"small",variant:"text",onClick:wl(()=>T(F),["stop"])}}))??U(Mn,{icon:w(F)?"$collapse":"$expand",size:"small",variant:"text",onClick:wl(()=>T(F),["stop"])},null);if(r[H]&&!c.value)return r[H](te);const he=ei(te.value);return c.value?X(Wt,null,[X("div",{class:"v-data-table__td-title"},[((ae=r[Y])==null?void 0:ae.call(r,Q))??z.title]),X("div",{class:"v-data-table__td-value"},[((be=r[H])==null?void 0:be.call(r,te))??he])]):he}})})]))}}),x2=Ue({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Xu()},"VDataTableRows"),Wu=ht()({name:"VDataTableRows",inheritAttrs:!1,props:x2(),setup(e,n){let{attrs:r,slots:s}=n;const{columns:c}=lv(),{expandOnClick:f,toggleExpand:d,isExpanded:a}=n2(),{isSelected:b,toggleSelect:C}=av(),{toggleGroup:w,isGroupOpen:T}=r2(),{t:A}=gi(),{mobile:P}=Qa(e);return _t(()=>{var R,O;return e.loading&&(!e.items.length||s.loading)?X("tr",{class:"v-data-table-rows-loading",key:"loading"},[X("td",{colspan:c.value.length},[((R=s.loading)==null?void 0:R.call(s))??A(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?X("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[X("td",{colspan:c.value.length},[((O=s["no-data"])==null?void 0:O.call(s))??A(e.noDataText)])]):X(Wt,null,[e.items.map((z,$)=>{var Y;if(z.type==="group"){const te={index:$,item:z,columns:c.value,isExpanded:a,toggleExpand:d,isSelected:b,toggleSelect:C,toggleGroup:w,isGroupOpen:T};return s["group-header"]?s["group-header"](te):U(nF,lt({key:`group-header_${z.id}`,item:z},W1(r,":group-header",()=>te)),s)}const F={index:$,item:z.raw,internalItem:z,columns:c.value,isExpanded:a,toggleExpand:d,isSelected:b,toggleSelect:C},H={...F,props:lt({key:`item_${z.key??z.index}`,onClick:f.value?()=>{d(z)}:void 0,index:$,item:z,cellProps:e.cellProps,mobile:P.value},W1(r,":row",()=>F),typeof e.rowProps=="function"?e.rowProps({item:F.item,index:F.index,internalItem:F.internalItem}):e.rowProps)};return X(Wt,{key:H.props.key},[s.item?s.item(H):U($0,H.props,s),a(z)&&((Y=s["expanded-row"])==null?void 0:Y.call(s,F))])})])}),{}}}),w2=Ue({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Zt(),...fr(),...xn(),...Un()},"VTable"),Zu=ht()({name:"VTable",props:w2(),setup(e,n){let{slots:r,emit:s}=n;const{themeClasses:c}=Jn(e),{densityClasses:f}=aa(e);return _t(()=>U(e.tag,{class:gt(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!r.top,"v-table--has-bottom":!!r.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},c.value,f.value,e.class]),style:Bt(e.style)},{default:()=>{var d,a,b;return[(d=r.top)==null?void 0:d.call(r),r.default?X("div",{class:"v-table__wrapper",style:{height:Gt(e.height)}},[X("table",null,[r.default()])]):(a=r.wrapper)==null?void 0:a.call(r),(b=r.bottom)==null?void 0:b.call(r)]}})),{}}}),rF=Ue({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function aF(e,n,r,s){const c=e.returnObject?n:Wi(n,e.itemValue),f=Wi(n,e.itemSelectable,!0),d=s.reduce((a,b)=>(b.key!=null&&(a[b.key]=Wi(n,b.value)),a),{});return{type:"item",key:e.returnObject?Wi(n,e.itemValue):c,index:r,value:c,selectable:f,columns:d,raw:n}}function sF(e,n,r){return n.map((s,c)=>aF(e,s,c,r))}function j0(e,n){return{items:ne(()=>sF(e,e.items,n.value))}}const N0=Ue({...x2(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...e2(),...M0(),...KO(),...rF(),...d2(),...f2(),...b2(),...w2()},"DataTable"),oF=Ue({...R0(),...N0(),...Jd(),...B0()},"VDataTable"),lF=ht()({name:"VDataTable",props:oF(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=D0(e),{sortBy:f,multiSort:d,mustSort:a}=sv(e),{page:b,itemsPerPage:C}=L0(e),{disableSort:w}=Gd(e),{columns:T,headers:A,sortFunctions:P,sortRawFunctions:R,filterFunctions:O}=F0(e,{groupBy:c,showSelect:Me(()=>e.showSelect),showExpand:Me(()=>e.showExpand)}),{items:z}=j0(e,T),$=Me(()=>e.search),{filteredItems:F}=Qd(e,z,$,{transform:Re=>Re.columns,customKeyFilter:O}),{toggleSort:H}=ov({sortBy:f,multiSort:d,mustSort:a,page:b}),{sortByWithGroups:Y,opened:te,extractRows:Q,isGroupOpen:ce,toggleGroup:oe}=tv({groupBy:c,sortBy:f,disableSort:w}),{sortedItems:he}=V0(e,F,Y,{transform:Re=>({...Re.raw,...Re.columns}),sortFunctions:P,sortRawFunctions:R}),{flatItems:pe}=nv(he,c,te),_e=ne(()=>pe.value.length),{startIndex:ae,stopIndex:be,pageCount:je,setItemsPerPage:Ve}=z0({page:b,itemsPerPage:C,itemsLength:_e}),{paginatedItems:Fe}=l2({items:pe,startIndex:ae,stopIndex:be,itemsPerPage:C}),Ke=ne(()=>Q(Fe.value)),{isSelected:mt,select:ft,selectAll:ze,toggleSelect:Se,someSelected:Ie,allSelected:Qe}=rv(e,{allItems:z,currentPage:Ke}),{isExpanded:jt,toggleExpand:Tt}=ev(e);iv({page:b,itemsPerPage:C,sortBy:f,groupBy:c,search:$}),Li({VDataTableRows:{hideNoData:Me(()=>e.hideNoData),noDataText:Me(()=>e.noDataText),loading:Me(()=>e.loading),loadingText:Me(()=>e.loadingText)}});const xt=ne(()=>({page:b.value,itemsPerPage:C.value,sortBy:f.value,pageCount:je.value,toggleSort:H,setItemsPerPage:Ve,someSelected:Ie.value,allSelected:Qe.value,isSelected:mt,select:ft,selectAll:ze,toggleSelect:Se,isExpanded:jt,toggleExpand:Tt,isGroupOpen:ce,toggleGroup:oe,items:Ke.value.map(Re=>Re.raw),internalItems:Ke.value,groupedItems:Fe.value,columns:T.value,headers:A.value}));return _t(()=>{const Re=nm.filterProps(e),vt=qu.filterProps(e),st=Wu.filterProps(e),Ye=Zu.filterProps(e);return U(Zu,lt({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},Ye,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var St;return(St=s.top)==null?void 0:St.call(s,xt.value)},default:()=>{var St,re,ue,Le,Ze,ut;return s.default?s.default(xt.value):X(Wt,null,[(St=s.colgroup)==null?void 0:St.call(s,xt.value),!e.hideDefaultHeader&&X("thead",{key:"thead"},[U(qu,vt,s)]),(re=s.thead)==null?void 0:re.call(s,xt.value),!e.hideDefaultBody&&X("tbody",null,[(ue=s["body.prepend"])==null?void 0:ue.call(s,xt.value),s.body?s.body(xt.value):U(Wu,lt(r,st,{items:Fe.value}),s),(Le=s["body.append"])==null?void 0:Le.call(s,xt.value)]),(Ze=s.tbody)==null?void 0:Ze.call(s,xt.value),(ut=s.tfoot)==null?void 0:ut.call(s,xt.value)])},bottom:()=>s.bottom?s.bottom(xt.value):!e.hideDefaultFooter&&X(Wt,null,[U($a,null,null),U(nm,Re,{prepend:s["footer.prepend"]})])})}),{}}}),uF=Ue({...di(N0(),["hideDefaultFooter"]),...M0(),...LP(),...Jd()},"VDataTableVirtual"),cF=ht()({name:"VDataTableVirtual",props:uF(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=D0(e),{sortBy:f,multiSort:d,mustSort:a}=sv(e),{disableSort:b}=Gd(e),{columns:C,headers:w,filterFunctions:T,sortFunctions:A,sortRawFunctions:P}=F0(e,{groupBy:c,showSelect:Me(()=>e.showSelect),showExpand:Me(()=>e.showExpand)}),{items:R}=j0(e,C),O=Me(()=>e.search),{filteredItems:z}=Qd(e,R,O,{transform:Ye=>Ye.columns,customKeyFilter:T}),{toggleSort:$}=ov({sortBy:f,multiSort:d,mustSort:a}),{sortByWithGroups:F,opened:H,extractRows:Y,isGroupOpen:te,toggleGroup:Q}=tv({groupBy:c,sortBy:f,disableSort:b}),{sortedItems:ce}=V0(e,z,F,{transform:Ye=>({...Ye.raw,...Ye.columns}),sortFunctions:A,sortRawFunctions:P}),{flatItems:oe}=nv(ce,c,H),he=ne(()=>Y(oe.value)),{isSelected:pe,select:_e,selectAll:ae,toggleSelect:be,someSelected:je,allSelected:Ve}=rv(e,{allItems:he,currentPage:he}),{isExpanded:Fe,toggleExpand:Ke}=ev(e),{containerRef:mt,markerRef:ft,paddingTop:ze,paddingBottom:Se,computedItems:Ie,handleItemResize:Qe,handleScroll:jt,handleScrollend:Tt,calculateVisibleItems:xt,scrollToIndex:Re}=zP(e,oe),vt=ne(()=>Ie.value.map(Ye=>Ye.raw));iv({sortBy:f,page:Dt(1),itemsPerPage:Dt(-1),groupBy:c,search:O}),Li({VDataTableRows:{hideNoData:Me(()=>e.hideNoData),noDataText:Me(()=>e.noDataText),loading:Me(()=>e.loading),loadingText:Me(()=>e.loadingText)}});const st=ne(()=>({sortBy:f.value,toggleSort:$,someSelected:je.value,allSelected:Ve.value,isSelected:pe,select:_e,selectAll:ae,toggleSelect:be,isExpanded:Fe,toggleExpand:Ke,isGroupOpen:te,toggleGroup:Q,items:he.value.map(Ye=>Ye.raw),internalItems:he.value,groupedItems:oe.value,columns:C.value,headers:w.value}));return _t(()=>{const Ye=qu.filterProps(e),St=Wu.filterProps(e),re=Zu.filterProps(e);return U(Zu,lt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},re,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var ue;return(ue=s.top)==null?void 0:ue.call(s,st.value)},wrapper:()=>{var ue,Le,Ze,ut,Je,Pt;return X("div",{ref:mt,onScrollPassive:jt,onScrollend:Tt,class:"v-table__wrapper",style:{height:Gt(e.height)}},[X("table",null,[(ue=s.colgroup)==null?void 0:ue.call(s,st.value),!e.hideDefaultHeader&&X("thead",{key:"thead"},[U(qu,Ye,s)]),(Le=s.thead)==null?void 0:Le.call(s,st.value),!e.hideDefaultBody&&X("tbody",{key:"tbody"},[X("tr",{ref:ft,style:{height:Gt(ze.value),border:0}},[X("td",{colspan:C.value.length,style:{height:0,border:0}},null)]),(Ze=s["body.prepend"])==null?void 0:Ze.call(s,st.value),U(Wu,lt(r,St,{items:vt.value}),{...s,item:ct=>U(RP,{key:ct.internalItem.index,renderless:!0,"onUpdate:height":Lt=>Qe(ct.internalItem.index,Lt)},{default:Lt=>{var sn;let{itemRef:It}=Lt;return((sn=s.item)==null?void 0:sn.call(s,{...ct,itemRef:It}))??U($0,lt(ct.props,{ref:It,key:ct.internalItem.index,index:ct.internalItem.index}),s)}})}),(ut=s["body.append"])==null?void 0:ut.call(s,st.value),X("tr",{style:{height:Gt(Se.value),border:0}},[X("td",{colspan:C.value.length,style:{height:0,border:0}},null)])]),(Je=s.tbody)==null?void 0:Je.call(s,st.value),(Pt=s.tfoot)==null?void 0:Pt.call(s,st.value)])])},bottom:()=>{var ue;return(ue=s.bottom)==null?void 0:ue.call(s,st.value)}})}),{calculateVisibleItems:xt,scrollToIndex:Re}}}),dF=Ue({itemsLength:{type:[Number,String],required:!0},...R0(),...N0(),...B0()},"VDataTableServer"),hF=ht()({name:"VDataTableServer",props:dF(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=D0(e),{sortBy:f,multiSort:d,mustSort:a}=sv(e),{page:b,itemsPerPage:C}=L0(e),{disableSort:w}=Gd(e),T=ne(()=>parseInt(e.itemsLength,10)),{columns:A,headers:P}=F0(e,{groupBy:c,showSelect:Me(()=>e.showSelect),showExpand:Me(()=>e.showExpand)}),{items:R}=j0(e,A),{toggleSort:O}=ov({sortBy:f,multiSort:d,mustSort:a,page:b}),{opened:z,isGroupOpen:$,toggleGroup:F,extractRows:H}=tv({groupBy:c,sortBy:f,disableSort:w}),{pageCount:Y,setItemsPerPage:te}=z0({page:b,itemsPerPage:C,itemsLength:T}),{flatItems:Q}=nv(R,c,z),{isSelected:ce,select:oe,selectAll:he,toggleSelect:pe,someSelected:_e,allSelected:ae}=rv(e,{allItems:R,currentPage:R}),{isExpanded:be,toggleExpand:je}=ev(e),Ve=ne(()=>H(R.value));iv({page:b,itemsPerPage:C,sortBy:f,groupBy:c,search:Me(()=>e.search)}),ri("v-data-table",{toggleSort:O,sortBy:f}),Li({VDataTableRows:{hideNoData:Me(()=>e.hideNoData),noDataText:Me(()=>e.noDataText),loading:Me(()=>e.loading),loadingText:Me(()=>e.loadingText)}});const Fe=ne(()=>({page:b.value,itemsPerPage:C.value,sortBy:f.value,pageCount:Y.value,toggleSort:O,setItemsPerPage:te,someSelected:_e.value,allSelected:ae.value,isSelected:ce,select:oe,selectAll:he,toggleSelect:pe,isExpanded:be,toggleExpand:je,isGroupOpen:$,toggleGroup:F,items:Ve.value.map(Ke=>Ke.raw),internalItems:Ve.value,groupedItems:Q.value,columns:A.value,headers:P.value}));_t(()=>{const Ke=nm.filterProps(e),mt=qu.filterProps(e),ft=Wu.filterProps(e),ze=Zu.filterProps(e);return U(Zu,lt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ze,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Se;return(Se=s.top)==null?void 0:Se.call(s,Fe.value)},default:()=>{var Se,Ie,Qe,jt,Tt,xt;return s.default?s.default(Fe.value):X(Wt,null,[(Se=s.colgroup)==null?void 0:Se.call(s,Fe.value),!e.hideDefaultHeader&&X("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[U(qu,mt,s)]),(Ie=s.thead)==null?void 0:Ie.call(s,Fe.value),!e.hideDefaultBody&&X("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(Qe=s["body.prepend"])==null?void 0:Qe.call(s,Fe.value),s.body?s.body(Fe.value):U(Wu,lt(r,ft,{items:Q.value}),s),(jt=s["body.append"])==null?void 0:jt.call(s,Fe.value)]),(Tt=s.tbody)==null?void 0:Tt.call(s,Fe.value),(xt=s.tfoot)==null?void 0:xt.call(s,Fe.value)])},bottom:()=>s.bottom?s.bottom(Fe.value):!e.hideDefaultFooter&&X(Wt,null,[U($a,null,null),U(nm,Ke,{prepend:s["footer.prepend"]})])})})}}),fF=Ue({fluid:{type:Boolean,default:!1},...Zt(),...Zi(),...xn()},"VContainer"),mF=ht()({name:"VContainer",props:fF(),setup(e,n){let{slots:r}=n;const{rtlClasses:s}=tr(),{dimensionStyles:c}=Ki(e);return _t(()=>U(e.tag,{class:gt(["v-container",{"v-container--fluid":e.fluid},s.value,e.class]),style:Bt([c.value,e.style])},r)),{}}}),S2=jg.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}),C2=jg.reduce((e,n)=>{const r="offset"+Ws(n);return e[r]={type:[String,Number],default:null},e},{}),k2=jg.reduce((e,n)=>{const r="order"+Ws(n);return e[r]={type:[String,Number],default:null},e},{}),_S={col:Object.keys(S2),offset:Object.keys(C2),order:Object.keys(k2)};function pF(e,n,r){let s=e;if(!(r==null||r===!1)){if(n){const c=n.replace(e,"");s+=`-${c}`}return e==="col"&&(s="v-"+s),e==="col"&&(r===""||r===!0)||(s+=`-${r}`),s.toLowerCase()}}const gF=["auto","start","end","center","baseline","stretch"],vF=Ue({cols:{type:[Boolean,String,Number],default:!1},...S2,offset:{type:[String,Number],default:null},...C2,order:{type:[String,Number],default:null},...k2,alignSelf:{type:String,default:null,validator:e=>gF.includes(e)},...Zt(),...xn()},"VCol"),yF=ht()({name:"VCol",props:vF(),setup(e,n){let{slots:r}=n;const s=ne(()=>{const c=[];let f;for(f in _S)_S[f].forEach(a=>{const b=e[a],C=pF(f,a,b);C&&c.push(C)});const d=c.some(a=>a.startsWith("v-col-"));return c.push({"v-col":!d||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),c});return()=>{var c;return bs(e.tag,{class:[s.value,e.class],style:e.style},(c=r.default)==null?void 0:c.call(r))}}}),U0=["start","end","center"],T2=["space-between","space-around","space-evenly"];function G0(e,n){return jg.reduce((r,s)=>{const c=e+Ws(s);return r[c]=n(),r},{})}const _F=[...U0,"baseline","stretch"],P2=e=>_F.includes(e),I2=G0("align",()=>({type:String,default:null,validator:P2})),bF=[...U0,...T2],A2=e=>bF.includes(e),E2=G0("justify",()=>({type:String,default:null,validator:A2})),xF=[...U0,...T2,"stretch"],M2=e=>xF.includes(e),D2=G0("alignContent",()=>({type:String,default:null,validator:M2})),bS={align:Object.keys(I2),justify:Object.keys(E2),alignContent:Object.keys(D2)},wF={align:"align",justify:"justify",alignContent:"align-content"};function SF(e,n,r){let s=wF[e];if(r!=null){if(n){const c=n.replace(e,"");s+=`-${c}`}return s+=`-${r}`,s.toLowerCase()}}const CF=Ue({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:P2},...I2,justify:{type:String,default:null,validator:A2},...E2,alignContent:{type:String,default:null,validator:M2},...D2,...Zt(),...xn()},"VRow"),kF=ht()({name:"VRow",props:CF(),setup(e,n){let{slots:r}=n;const s=ne(()=>{const c=[];let f;for(f in bS)bS[f].forEach(d=>{const a=e[d],b=SF(f,d,a);b&&c.push(b)});return c.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),c});return()=>{var c;return bs(e.tag,{class:["v-row",s.value,e.class],style:e.style},(c=r.default)==null?void 0:c.call(r))}}}),R2=Ao("v-spacer","div","VSpacer"),L2=Ue({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:an,default:"$next"},prevIcon:{type:an,default:"$prev"},modeIcon:{type:an,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ib=ht()({name:"VDatePickerControls",props:L2(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:r}=n;const s=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),c=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),f=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),d=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function a(){r("click:prev")}function b(){r("click:next")}function C(){r("click:year")}function w(){r("click:month")}return _t(()=>X("div",{class:gt(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Gt(e.controlHeight)}},[U(Mn,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:s.value,text:e.text,variant:"text",rounded:!0,onClick:w},null),U(Mn,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:c.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:C},null),U(R2,null,null),X("div",{class:"v-date-picker-controls__month"},[U(Mn,{"data-testid":"prev-month",disabled:f.value,density:"comfortable",icon:e.prevIcon,variant:"text",onClick:a},null),U(Mn,{"data-testid":"next-month",disabled:d.value,icon:e.nextIcon,density:"comfortable",variant:"text",onClick:b},null)])])),{}}}),TF=Ue({appendIcon:an,color:String,header:String,transition:String,onClick:Lr()},"VDatePickerHeader"),rb=ht()({name:"VDatePickerHeader",props:TF(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:r,slots:s}=n;const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color);function d(){r("click")}function a(){r("click:append")}return _t(()=>{const b=!!(s.default||e.header),C=!!(s.append||e.appendIcon);return X("div",{class:gt(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},c.value]),style:Bt(f.value),onClick:d},[s.prepend&&X("div",{key:"prepend",class:"v-date-picker-header__prepend"},[s.prepend()]),b&&U(na,{key:"content",name:e.transition},{default:()=>{var w;return[X("div",{key:e.header,class:"v-date-picker-header__content"},[((w=s.default)==null?void 0:w.call(s))??e.header])]}}),C&&X("div",{class:"v-date-picker-header__append"},[s.append?U(Sn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var w;return[(w=s.append)==null?void 0:w.call(s)]}}):U(Mn,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:a},null)])])}),{}}}),PF=Ue({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function IF(e){const n=fm(),r=tn(e,"modelValue",[],P=>Mi(P).map(R=>n.date(R))),s=ne(()=>e.displayValue?n.date(e.displayValue):r.value.length>0?n.date(r.value[0]):e.min?n.date(e.min):Array.isArray(e.allowedDates)?n.date(e.allowedDates[0]):n.date()),c=tn(e,"year",void 0,P=>{const R=P!=null?Number(P):n.getYear(s.value);return n.startOfYear(n.setYear(n.date(),R))},P=>n.getYear(P)),f=tn(e,"month",void 0,P=>{const R=P!=null?Number(P):n.getMonth(s.value),O=n.setYear(n.startOfMonth(n.date()),n.getYear(c.value));return n.setMonth(O,R)},P=>n.getMonth(P)),d=ne(()=>{const P=n.toJsDate(n.startOfWeek(n.date(),e.firstDayOfWeek)).getDay();return n.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((R,O)=>e.weekdays.includes((O+P)%7))}),a=ne(()=>{const P=n.getWeekArray(f.value,e.firstDayOfWeek),R=P.flat(),O=6*7;if(e.weeksInMonth==="static"&&R.length<O){const z=R[R.length-1];let $=[];for(let F=1;F<=O-R.length;F++)$.push(n.addDays(z,F)),F%7===0&&(P.push($),$=[])}return P});function b(P,R){return P.filter(O=>e.weekdays.includes(n.toJsDate(O).getDay())).map((O,z)=>{const $=n.toISO(O),F=!n.isSameMonth(O,f.value),H=n.isSameDay(O,n.startOfMonth(f.value)),Y=n.isSameDay(O,n.endOfMonth(f.value)),te=n.isSameDay(O,f.value),Q=e.weekdays.length;return{date:O,formatted:n.format(O,"keyboardDate"),isAdjacent:F,isDisabled:A(O),isEnd:Y,isHidden:F&&!e.showAdjacentMonths,isSame:te,isSelected:r.value.some(ce=>n.isSameDay(O,ce)),isStart:H,isToday:n.isSameDay(O,R),isWeekEnd:z%Q===Q-1,isWeekStart:z%Q===0,isoDate:$,localized:n.format(O,"dayOfMonth"),month:n.getMonth(O),year:n.getYear(O)}})}const C=ne(()=>{const P=n.startOfWeek(s.value,e.firstDayOfWeek),R=[];for(let z=0;z<=6;z++)R.push(n.addDays(P,z));const O=n.date();return b(R,O)}),w=ne(()=>{const P=a.value.flat(),R=n.date();return b(P,R)}),T=ne(()=>a.value.map(P=>P.length?n.getWeek(P[0],e.firstDayOfWeek):null));function A(P){if(e.disabled)return!0;const R=n.date(P);return e.min&&n.isAfter(n.date(e.min),R)||e.max&&n.isAfter(R,n.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(O=>n.isSameDay(n.date(O),R)):typeof e.allowedDates=="function"?!e.allowedDates(R):!1}return{displayValue:s,daysInMonth:w,daysInWeek:C,genDays:b,model:r,weeksInMonth:a,weekdayLabels:d,weekNumbers:T}}const z2=Ue({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...di(PF(),["displayValue"])},"VDatePickerMonth"),ab=ht()({name:"VDatePickerMonth",props:z2(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=et(),{daysInMonth:f,model:d,weekNumbers:a,weekdayLabels:b}=IF(e),C=fm(),w=Dt(),T=Dt(),A=Dt(!1),P=Me(()=>A.value?e.reverseTransition:e.transition);e.multiple==="range"&&d.value.length>0&&(w.value=d.value[0],d.value.length>1&&(T.value=d.value[d.value.length-1]));const R=ne(()=>{const F=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return d.value.length>=F});Ot(f,(F,H)=>{H&&(A.value=C.isBefore(F[0].date,H[0].date))});function O(F){const H=C.startOfDay(F);if(d.value.length===0?w.value=void 0:d.value.length===1&&(w.value=d.value[0],T.value=void 0),!w.value)w.value=H,d.value=[w.value];else if(T.value)w.value=F,T.value=void 0,d.value=[w.value];else{if(C.isSameDay(H,w.value)){w.value=void 0,d.value=[];return}else C.isBefore(H,w.value)?(T.value=C.endOfDay(w.value),w.value=H):T.value=C.endOfDay(H);d.value=RL(C,w.value,T.value)}}function z(F){const H=d.value.findIndex(Y=>C.isSameDay(Y,F));if(H===-1)d.value=[...d.value,F];else{const Y=[...d.value];Y.splice(H,1),d.value=Y}}function $(F){e.multiple==="range"?O(F):e.multiple?z(F):d.value=[F]}_t(()=>X("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&X("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&X("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[nn(" ")]),a.value.map(F=>X("div",{class:gt(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[F]))]),U(na,{name:P.value},{default:()=>{var F;return[X("div",{ref:c,key:(F=f.value[0].date)==null?void 0:F.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&b.value.map(H=>X("div",{class:gt(["v-date-picker-month__day","v-date-picker-month__weekday"])},[H])),f.value.map((H,Y)=>{var Q;const te={props:{class:"v-date-picker-month__day-btn",color:H.isSelected||H.isToday?e.color:void 0,disabled:H.isDisabled,icon:!0,ripple:!1,text:H.localized,variant:H.isSelected?"flat":H.isToday?"outlined":"text",onClick:()=>$(H.date)},item:H,i:Y};return R.value&&!H.isSelected&&(H.isDisabled=!0),X("div",{class:gt(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":H.isAdjacent,"v-date-picker-month__day--hide-adjacent":H.isHidden,"v-date-picker-month__day--selected":H.isSelected,"v-date-picker-month__day--week-end":H.isWeekEnd,"v-date-picker-month__day--week-start":H.isWeekStart}]),"data-v-date":H.isDisabled?void 0:H.isoDate},[(e.showAdjacentMonths||!H.isAdjacent)&&(((Q=s.day)==null?void 0:Q.call(s,te))??U(Mn,te.props,null))])})])]}})]))}}),V2=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),sb=ht()({name:"VDatePickerMonths",props:V2(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=fm(),f=tn(e,"modelValue"),d=ne(()=>{let b=c.startOfYear(c.date());return e.year&&(b=c.setYear(b,e.year)),Oa(12).map(C=>{const w=c.format(b,"monthShort"),T=!!(!a(C)||e.min&&c.isAfter(c.startOfMonth(c.date(e.min)),b)||e.max&&c.isAfter(b,c.startOfMonth(c.date(e.max))));return b=c.getNextMonth(b),{isDisabled:T,text:w,value:C}})});Ri(()=>{f.value=f.value??c.getMonth(c.date())});function a(b){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(b):typeof e.allowedMonths=="function"?e.allowedMonths(b):!0}return _t(()=>X("div",{class:"v-date-picker-months",style:{height:Gt(e.height)}},[X("div",{class:"v-date-picker-months__content"},[d.value.map((b,C)=>{var A;const w={active:f.value===C,color:f.value===C?e.color:void 0,disabled:b.isDisabled,rounded:!0,text:b.text,variant:f.value===b.value?"flat":"text",onClick:()=>T(C)};function T(P){if(f.value===P){r("update:modelValue",f.value);return}f.value=P}return((A=s.month)==null?void 0:A.call(s,{month:b,i:C,props:w}))??U(Mn,lt({key:"month"},w),null)})])])),{}}}),B2=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),ob=ht()({name:"VDatePickerYears",props:B2(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=fm(),f=tn(e,"modelValue"),d=ne(()=>{const C=c.getYear(c.date());let w=C-100,T=C+52;e.min&&(w=c.getYear(c.date(e.min))),e.max&&(T=c.getYear(c.date(e.max)));let A=c.startOfYear(c.date());return A=c.setYear(A,w),Oa(T-w+1,w).map(P=>{const R=c.format(A,"year");return A=c.setYear(A,c.getYear(A)+1),{text:R,value:P,isDisabled:!b(P)}})});Ri(()=>{f.value=f.value??c.getYear(c.date())});const a=gg();zi(async()=>{var C;await Dn(),(C=a.el)==null||C.focus()});function b(C){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(C):typeof e.allowedYears=="function"?e.allowedYears(C):!0}return _t(()=>X("div",{class:"v-date-picker-years",style:{height:Gt(e.height)}},[X("div",{class:"v-date-picker-years__content"},[d.value.map((C,w)=>{var A;const T={ref:f.value===C.value?a:void 0,active:f.value===C.value,color:f.value===C.value?e.color:void 0,rounded:!0,text:C.text,disabled:C.isDisabled,variant:f.value===C.value?"flat":"text",onClick:()=>{if(f.value===C.value){r("update:modelValue",f.value);return}f.value=C.value}};return((A=s.year)==null?void 0:A.call(s,{year:C,i:w,props:T}))??U(Mn,lt({key:"month"},T),null)})])])),{}}}),AF=Ue({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...L2(),...z2({weeksInMonth:"static"}),...di(V2(),["modelValue"]),...di(B2(),["modelValue"]),...Qg({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),EF=ht()({name:"VDatePicker",props:AF(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=fm(),{t:f}=gi(),{rtlClasses:d}=tr(),a=tn(e,"modelValue",void 0,Fe=>Mi(Fe).map(Ke=>c.date(Ke)),Fe=>e.multiple?Fe:Fe[0]),b=tn(e,"viewMode"),C=ne(()=>{const Fe=c.date(e.min);return e.min&&c.isValid(Fe)?Fe:null}),w=ne(()=>{const Fe=c.date(e.max);return e.max&&c.isValid(Fe)?Fe:null}),T=ne(()=>{var mt;const Fe=c.date();let Ke=Fe;return(mt=a.value)!=null&&mt[0]?Ke=c.date(a.value[0]):C.value&&c.isBefore(Fe,C.value)?Ke=C.value:w.value&&c.isAfter(Fe,w.value)&&(Ke=w.value),Ke&&c.isValid(Ke)?Ke:Fe}),A=Me(()=>e.headerColor??e.color),P=tn(e,"month"),R=ne({get:()=>Number(P.value??c.getMonth(c.startOfMonth(T.value))),set:Fe=>P.value=Fe}),O=tn(e,"year"),z=ne({get:()=>Number(O.value??c.getYear(c.startOfYear(c.setMonth(T.value,R.value)))),set:Fe=>O.value=Fe}),$=Dt(!1),F=ne(()=>e.multiple&&a.value.length>1?f("$vuetify.datePicker.itemsSelected",a.value.length):a.value[0]&&c.isValid(a.value[0])?c.format(c.date(a.value[0]),"normalDateWithWeekday"):f(e.header)),H=ne(()=>{let Fe=c.date();return Fe=c.setDate(Fe,1),Fe=c.setMonth(Fe,R.value),Fe=c.setYear(Fe,z.value),c.format(Fe,"monthAndYear")}),Y=Me(()=>`date-picker-header${$.value?"-reverse":""}-transition`),te=ne(()=>{if(e.disabled)return!0;const Fe=[];if(b.value!=="month")Fe.push("prev","next");else{let Ke=c.date();if(Ke=c.startOfMonth(Ke),Ke=c.setMonth(Ke,R.value),Ke=c.setYear(Ke,z.value),C.value){const mt=c.addDays(c.startOfMonth(Ke),-1);c.isAfter(C.value,mt)&&Fe.push("prev")}if(w.value){const mt=c.addDays(c.endOfMonth(Ke),1);c.isAfter(mt,w.value)&&Fe.push("next")}}return Fe});function Q(Fe,Ke){const mt=e.allowedDates;if(typeof mt!="function")return!0;const ft=c.getDiff(Ke,Fe,"days");for(let ze=0;ze<ft;ze++)if(mt(c.addDays(Fe,ze)))return!0;return!1}function ce(Fe){if(typeof e.allowedDates=="function"){const Ke=c.parseISO(`${Fe}-01-01`);return Q(Ke,c.endOfYear(Ke))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ke of e.allowedDates)if(c.getYear(c.date(Ke))===Fe)return!0;return!1}return!0}function oe(Fe){if(typeof e.allowedDates=="function"){const Ke=String(Fe+1).padStart(2,"0"),mt=c.parseISO(`${z.value}-${Ke}-01`);return Q(mt,c.endOfMonth(mt))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ke of e.allowedDates)if(c.getYear(c.date(Ke))===z.value&&c.getMonth(c.date(Ke))===Fe)return!0;return!1}return!0}function he(){R.value<11?R.value++:(z.value++,R.value=0,Ve()),je()}function pe(){R.value>0?R.value--:(z.value--,R.value=11,Ve()),je()}function _e(){b.value="month"}function ae(){b.value=b.value==="months"?"month":"months"}function be(){b.value=b.value==="year"?"month":"year"}function je(){b.value==="months"&&ae()}function Ve(){b.value==="year"&&be()}return Ot(a,(Fe,Ke)=>{const mt=Mi(Ke),ft=Mi(Fe);if(!ft.length)return;const ze=c.date(mt[mt.length-1]),Se=c.date(ft[ft.length-1]),Ie=c.getMonth(Se),Qe=c.getYear(Se);Ie!==R.value&&(R.value=Ie,je()),Qe!==z.value&&(z.value=Qe,Ve()),$.value=c.isBefore(ze,Se)}),_t(()=>{const Fe=Fd.filterProps(e),Ke=ib.filterProps(e),mt=rb.filterProps(e),ft=ab.filterProps(e),ze=di(sb.filterProps(e),["modelValue"]),Se=di(ob.filterProps(e),["modelValue"]),Ie={color:A.value,header:F.value,transition:Y.value};return U(Fd,lt(Fe,{color:A.value,class:["v-date-picker",`v-date-picker--${b.value}`,{"v-date-picker--show-week":e.showWeek},d.value,e.class],style:e.style}),{title:()=>{var Qe;return((Qe=s.title)==null?void 0:Qe.call(s))??X("div",{class:"v-date-picker__title"},[f(e.title)])},header:()=>s.header?U(Sn,{defaults:{VDatePickerHeader:{...Ie}}},{default:()=>{var Qe;return[(Qe=s.header)==null?void 0:Qe.call(s,Ie)]}}):U(rb,lt({key:"header"},mt,Ie,{onClick:b.value!=="month"?_e:void 0}),{prepend:s.prepend,append:s.append}),default:()=>X(Wt,null,[U(ib,lt(Ke,{disabled:te.value,text:H.value,"onClick:next":he,"onClick:prev":pe,"onClick:month":ae,"onClick:year":be}),null),U(Zf,{hideOnLeave:!0},{default:()=>[b.value==="months"?U(sb,lt({key:"date-picker-months"},ze,{modelValue:R.value,"onUpdate:modelValue":[Qe=>R.value=Qe,je],min:C.value,max:w.value,year:z.value,allowedMonths:oe}),{month:s.month}):b.value==="year"?U(ob,lt({key:"date-picker-years"},Se,{modelValue:z.value,"onUpdate:modelValue":[Qe=>z.value=Qe,Ve],min:C.value,max:w.value,allowedYears:ce}),{year:s.year}):U(ab,lt({key:"date-picker-month"},ft,{modelValue:a.value,"onUpdate:modelValue":Qe=>a.value=Qe,month:R.value,"onUpdate:month":[Qe=>R.value=Qe,je],year:z.value,"onUpdate:year":[Qe=>z.value=Qe,Ve],min:C.value,max:w.value}),{day:s.day})]})]),actions:s.actions})}),{}}}),MF=Ue({actionText:String,bgColor:String,color:String,icon:an,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Zt(),...Zi(),...Ks({size:void 0}),...Un()},"VEmptyState"),DF=ht()({name:"VEmptyState",props:MF(),emits:{"click:action":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{themeClasses:c}=Jn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{dimensionStyles:a}=Ki(e),{displayClasses:b}=Qa();function C(w){r("click:action",w)}return _t(()=>{var z,$,F;const w=!!(s.actions||e.actionText),T=!!(s.headline||e.headline),A=!!(s.title||e.title),P=!!(s.text||e.text),R=!!(s.media||e.image||e.icon),O=e.size||(e.image?200:96);return X("div",{class:gt(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},c.value,f.value,b.value,e.class]),style:Bt([d.value,a.value,e.style])},[R&&X("div",{key:"media",class:"v-empty-state__media"},[s.media?U(Sn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:O},VIcon:{size:O,icon:e.icon}}},{default:()=>[s.media()]}):X(Wt,null,[e.image?U(ko,{key:"image",src:e.image,height:O},null):e.icon?U(Xn,{key:"icon",color:e.color,size:O,icon:e.icon},null):void 0])]),T&&X("div",{key:"headline",class:"v-empty-state__headline"},[((z=s.headline)==null?void 0:z.call(s))??e.headline]),A&&X("div",{key:"title",class:"v-empty-state__title"},[(($=s.title)==null?void 0:$.call(s))??e.title]),P&&X("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Gt(e.textWidth)}},[((F=s.text)==null?void 0:F.call(s))??e.text]),s.default&&X("div",{key:"content",class:"v-empty-state__content"},[s.default()]),w&&X("div",{key:"actions",class:"v-empty-state__actions"},[U(Sn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>{var H;return[((H=s.actions)==null?void 0:H.call(s,{props:{onClick:C}}))??U(Mn,{onClick:C},null)]}})])])}),{}}}),im=Symbol.for("vuetify:v-expansion-panel"),O2=Ue({...Zt(),...C0()},"VExpansionPanelText"),lb=ht()({name:"VExpansionPanelText",props:O2(),setup(e,n){let{slots:r}=n;const s=bn(im);if(!s)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:c,onAfterLeave:f}=k0(e,s.isSelected);return _t(()=>U(Gg,{onAfterLeave:f},{default:()=>{var d;return[Di(X("div",{class:gt(["v-expansion-panel-text",e.class]),style:Bt(e.style)},[r.default&&c.value&&X("div",{class:"v-expansion-panel-text__wrapper"},[(d=r.default)==null?void 0:d.call(r)])]),[[xs,s.isSelected.value]])]}})),{}}}),F2=Ue({color:String,expandIcon:{type:an,default:"$expand"},collapseIcon:{type:an,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Zt(),...Zi()},"VExpansionPanelTitle"),ub=ht()({name:"VExpansionPanelTitle",directives:{vRipple:ra},props:F2(),setup(e,n){let{slots:r}=n;const s=bn(im);if(!s)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{dimensionStyles:d}=Ki(e),a=ne(()=>({collapseIcon:e.collapseIcon,disabled:s.disabled.value,expanded:s.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),b=Me(()=>s.isSelected.value?e.collapseIcon:e.expandIcon);return _t(()=>{var C;return Di(X("button",{class:gt(["v-expansion-panel-title",{"v-expansion-panel-title--active":s.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},c.value,e.class]),style:Bt([f.value,d.value,e.style]),type:"button",tabindex:s.disabled.value?-1:void 0,disabled:s.disabled.value,"aria-expanded":s.isSelected.value,onClick:e.readonly?void 0:s.toggle},[X("span",{class:"v-expansion-panel-title__overlay"},null),(C=r.default)==null?void 0:C.call(r,a.value),!e.hideActions&&U(Sn,{defaults:{VIcon:{icon:b.value}}},{default:()=>{var w;return[X("span",{class:"v-expansion-panel-title__icon"},[((w=r.actions)==null?void 0:w.call(r,a.value))??U(Xn,null,null)])]}})]),[[ra,e.ripple]])}),{}}}),$2=Ue({title:String,text:String,bgColor:String,...nr(),...ic(),...vi(),...xn(),...F2(),...O2()},"VExpansionPanel"),RF=ht()({name:"VExpansionPanel",props:$2(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=rc(e,im),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.bgColor),{elevationClasses:d}=kr(e),{roundedClasses:a}=Vi(e),b=Me(()=>(s==null?void 0:s.disabled.value)||e.disabled),C=ne(()=>s.group.items.value.reduce((A,P,R)=>(s.group.selected.value.includes(P.id)&&A.push(R),A),[])),w=ne(()=>{const A=s.group.items.value.findIndex(P=>P.id===s.id);return!s.isSelected.value&&C.value.some(P=>P-A===1)}),T=ne(()=>{const A=s.group.items.value.findIndex(P=>P.id===s.id);return!s.isSelected.value&&C.value.some(P=>P-A===-1)});return ri(im,s),_t(()=>{const A=!!(r.text||e.text),P=!!(r.title||e.title),R=ub.filterProps(e),O=lb.filterProps(e);return U(e.tag,{class:gt(["v-expansion-panel",{"v-expansion-panel--active":s.isSelected.value,"v-expansion-panel--before-active":w.value,"v-expansion-panel--after-active":T.value,"v-expansion-panel--disabled":b.value},a.value,c.value,e.class]),style:Bt([f.value,e.style])},{default:()=>[X("div",{class:gt(["v-expansion-panel__shadow",...d.value])},null),U(Sn,{defaults:{VExpansionPanelTitle:{...R},VExpansionPanelText:{...O}}},{default:()=>{var z;return[P&&U(ub,{key:"title"},{default:()=>[r.title?r.title():e.title]}),A&&U(lb,{key:"text"},{default:()=>[r.text?r.text():e.text]}),(z=r.default)==null?void 0:z.call(r)]}})]})}),{groupItem:s}}}),LF=["default","accordion","inset","popout"],zF=Ue({flat:Boolean,...nc(),...Io($2(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Un(),...Zt(),...xn(),variant:{type:String,default:"default",validator:e=>LF.includes(e)}},"VExpansionPanels"),VF=ht()({name:"VExpansionPanels",props:zF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{next:s,prev:c}=Ml(e,im),{themeClasses:f}=Jn(e),d=Me(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return Li({VExpansionPanel:{bgColor:Me(()=>e.bgColor),collapseIcon:Me(()=>e.collapseIcon),color:Me(()=>e.color),eager:Me(()=>e.eager),elevation:Me(()=>e.elevation),expandIcon:Me(()=>e.expandIcon),focusable:Me(()=>e.focusable),hideActions:Me(()=>e.hideActions),readonly:Me(()=>e.readonly),ripple:Me(()=>e.ripple),rounded:Me(()=>e.rounded),static:Me(()=>e.static)}}),_t(()=>U(e.tag,{class:gt(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},f.value,d.value,e.class]),style:Bt(e.style)},{default:()=>{var a;return[(a=r.default)==null?void 0:a.call(r,{prev:c,next:s})]}})),{next:s,prev:c}}}),BF=Ue({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...di(Wg({active:!0}),["location"]),...Ju(),...Eo(),...ws({transition:"fab-transition"})},"VFab"),OF=ht()({name:"VFab",props:BF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),c=Dt(56),f=et(),{resizeRef:d}=vs(T=>{T.length&&(c.value=T[0].target.clientHeight)}),a=Me(()=>e.app||e.absolute),b=ne(()=>{var T;return a.value?((T=e.location)==null?void 0:T.split(" ").shift())??"bottom":!1}),C=ne(()=>{var T;return a.value?((T=e.location)==null?void 0:T.split(" ")[1])??"end":!1});ia(()=>e.app,()=>{const T=Qu({id:e.name,order:ne(()=>parseInt(e.order,10)),position:b,layoutSize:ne(()=>e.layout?c.value+24:0),elementSize:ne(()=>c.value+24),active:ne(()=>e.app&&s.value),absolute:Me(()=>e.absolute)});Ri(()=>{f.value=T.layoutItemStyles.value})});const w=et();return _t(()=>{const T=Mn.filterProps(e);return X("div",{ref:w,class:gt(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${b.value}`]:a.value,[`v-fab--${C.value}`]:a.value},e.class]),style:Bt([e.app?{...f.value}:{height:e.absolute?"100%":"inherit"},e.style])},[X("div",{class:"v-fab__container"},[U(na,{appear:e.appear,transition:e.transition},{default:()=>[Di(U(Mn,lt({ref:d},T,{active:void 0,location:void 0}),r),[[xs,e.active]])]})])])}),{}}});function FF(){function e(r){var c,f;return[...((c=r.dataTransfer)==null?void 0:c.items)??[]].filter(d=>d.kind==="file").map(d=>d.webkitGetAsEntry()).filter(Boolean).length>0||[...((f=r.dataTransfer)==null?void 0:f.files)??[]].length>0}async function n(r){var f,d;const s=[],c=[...((f=r.dataTransfer)==null?void 0:f.items)??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean);if(c.length)for(const a of c){const b=await j2(a,N2(".",a));s.push(...b.map(C=>C.file))}else s.push(...((d=r.dataTransfer)==null?void 0:d.files)??[]);return s}return{handleDrop:n,hasFilesOrFolders:e}}function j2(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((r,s)=>{e.isFile?e.file(f=>r([{file:f,path:n}]),s):e.isDirectory&&e.createReader().readEntries(async f=>{const d=[];for(const a of f)d.push(...await j2(a,N2(n,a)));r(d)})})}function N2(e,n){return n.isDirectory?`${e}/${n.name}`:e}const $F=Ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Do({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Mi(e).every(n=>n!=null&&typeof n=="object")},...wm({clearable:!0})},"VFileInput"),jF=ht()({name:"VFileInput",inheritAttrs:!1,props:$F(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{t:f}=gi(),d=tn(e,"modelValue",e.modelValue,Ve=>Mi(Ve),Ve=>!e.multiple&&Array.isArray(Ve)?Ve[0]:Ve),{isFocused:a,focus:b,blur:C}=Mo(e),w=ne(()=>typeof e.showSize!="boolean"?e.showSize:void 0),T=ne(()=>(d.value??[]).reduce((Ve,Fe)=>{let{size:Ke=0}=Fe;return Ve+Ke},0)),A=ne(()=>D1(T.value,w.value)),P=ne(()=>(d.value??[]).map(Ve=>{const{name:Fe="",size:Ke=0}=Ve;return e.showSize?`${Fe} (${D1(Ke,w.value)})`:Fe})),R=ne(()=>{var Fe;const Ve=((Fe=d.value)==null?void 0:Fe.length)??0;return e.showSize?f(e.counterSizeString,Ve,A.value):f(e.counterString,Ve)}),O=et(),z=et(),$=et(),F=Me(()=>a.value||e.active),H=ne(()=>["plain","underlined"].includes(e.variant)),Y=Dt(!1),{handleDrop:te,hasFilesOrFolders:Q}=FF();function ce(){var Ve;$.value!==document.activeElement&&((Ve=$.value)==null||Ve.focus()),a.value||b()}function oe(Ve){var Fe;(Fe=$.value)==null||Fe.click()}function he(Ve){s("mousedown:control",Ve)}function pe(Ve){var Fe;(Fe=$.value)==null||Fe.click(),s("click:control",Ve)}function _e(Ve){Ve.stopPropagation(),ce(),Dn(()=>{d.value=[],Fg(e["onClick:clear"],Ve)})}function ae(Ve){Ve.preventDefault(),Ve.stopImmediatePropagation(),Y.value=!0}function be(Ve){Ve.preventDefault(),Y.value=!1}async function je(Ve){if(Ve.preventDefault(),Ve.stopImmediatePropagation(),Y.value=!1,!$.value||!Q(Ve))return;const Fe=new DataTransfer;for(const Ke of await te(Ve))Fe.items.add(Ke);$.value.files=Fe.files,$.value.dispatchEvent(new Event("change",{bubbles:!0}))}return Ot(d,Ve=>{(!Array.isArray(Ve)||!Ve.length)&&$.value&&($.value.value="")}),_t(()=>{const Ve=!!(c.counter||e.counter),Fe=!!(Ve||c.details),[Ke,mt]=Al(r),{modelValue:ft,...ze}=qr.filterProps(e),Se=Pl.filterProps(e);return U(qr,lt({ref:O,modelValue:e.multiple?d.value:d.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":Y.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":H.value},e.class],style:e.style,"onClick:prepend":oe},Ke,ze,{centerAffix:!H.value,focused:a.value}),{...c,default:Ie=>{let{id:Qe,isDisabled:jt,isDirty:Tt,isReadonly:xt,isValid:Re}=Ie;return U(Pl,lt({ref:z,"prepend-icon":e.prependIcon,onMousedown:he,onClick:pe,"onClick:clear":_e,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Se,{id:Qe.value,active:F.value||Tt.value,dirty:Tt.value||e.dirty,disabled:jt.value,focused:a.value,error:Re.value===!1,onDragover:ae,onDrop:je}),{...c,default:vt=>{var St;let{props:{class:st,...Ye}}=vt;return X(Wt,null,[X("input",lt({ref:$,type:"file",readonly:xt.value,disabled:jt.value,multiple:e.multiple,name:e.name,onClick:re=>{re.stopPropagation(),xt.value&&re.preventDefault(),ce()},onChange:re=>{if(!re.target)return;const ue=re.target;d.value=[...ue.files??[]]},onDragleave:be,onFocus:ce,onBlur:C},Ye,mt),null),X("div",{class:gt(st)},[!!((St=d.value)!=null&&St.length)&&!e.hideInput&&(c.selection?c.selection({fileNames:P.value,totalBytes:T.value,totalBytesReadable:A.value}):e.chips?P.value.map(re=>U(Yd,{key:re,size:"small",text:re},null)):P.value.join(", "))])])}})},details:Fe?Ie=>{var Qe,jt;return X(Wt,null,[(Qe=c.details)==null?void 0:Qe.call(c,Ie),Ve&&X(Wt,null,[X("span",null,null),U(Kg,{active:!!((jt=d.value)!=null&&jt.length),value:R.value,disabled:e.disabled},c.counter)])])}:void 0})}),Tr({},O,z,$)}}),NF=Ue({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ya(),...Zt(),...nr(),...Ju(),...vi(),...xn({tag:"footer"}),...Un()},"VFooter"),UF=ht()({name:"VFooter",props:NF(),setup(e,n){let{slots:r}=n;const s=et(),{themeClasses:c}=Jn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.color),{borderClasses:a}=Ta(e),{elevationClasses:b}=kr(e),{roundedClasses:C}=Vi(e),w=Dt(32),{resizeRef:T}=vs(P=>{P.length&&(w.value=P[0].target.clientHeight)}),A=ne(()=>e.height==="auto"?w.value:parseInt(e.height,10));return ia(()=>e.app,()=>{const P=Qu({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Me(()=>"bottom"),layoutSize:A,elementSize:ne(()=>e.height==="auto"?void 0:A.value),active:Me(()=>e.app),absolute:Me(()=>e.absolute)});Ri(()=>{s.value=P.layoutItemStyles.value})}),_t(()=>U(e.tag,{ref:T,class:gt(["v-footer",c.value,f.value,a.value,b.value,C.value,e.class]),style:Bt([d.value,e.app?s.value:{height:Gt(e.height)},e.style])},r)),{}}}),GF=Ue({...Zt(),...nV()},"VForm"),HF=ht()({name:"VForm",props:GF(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=iV(e),f=et();function d(b){b.preventDefault(),c.reset()}function a(b){const C=b,w=c.validate();C.then=w.then.bind(w),C.catch=w.catch.bind(w),C.finally=w.finally.bind(w),s("submit",C),C.defaultPrevented||w.then(T=>{var P;let{valid:A}=T;A&&((P=f.value)==null||P.submit())}),C.preventDefault()}return _t(()=>{var b;return X("form",{ref:f,class:gt(["v-form",e.class]),style:Bt(e.style),novalidate:!0,onReset:d,onSubmit:a},[(b=r.default)==null?void 0:b.call(r,c)])}),Tr(c,f)}}),qF=Ue({disabled:Boolean,modelValue:{type:Boolean,default:null},...w0()},"VHover"),WF=ht()({name:"VHover",props:qF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),{runOpenDelay:c,runCloseDelay:f}=S0(e,d=>!e.disabled&&(s.value=d));return()=>{var d;return(d=r.default)==null?void 0:d.call(r,{isHovering:s.value,props:{onMouseenter:c,onMouseleave:f}})}}}),ZF=Ue({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Zi(),...xn()},"VInfiniteScroll"),xS=ja({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,n)=>!0},setup(e,n){let{emit:r}=n;const{intersectionRef:s,isIntersecting:c}=mm();return Ot(c,async f=>{r("intersect",e.side,f)}),_t(()=>X("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:s},[nn(" ")])),{}}}),KF=ht()({name:"VInfiniteScroll",props:ZF(),emits:{load:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=et(),f=Dt("ok"),d=Dt("ok"),a=ne(()=>Gt(e.margin)),b=Dt(!1);function C(Q){if(!c.value)return;const ce=e.direction==="vertical"?"scrollTop":"scrollLeft";c.value[ce]=Q}function w(){if(!c.value)return 0;const Q=e.direction==="vertical"?"scrollTop":"scrollLeft";return c.value[Q]}function T(){if(!c.value)return 0;const Q=e.direction==="vertical"?"scrollHeight":"scrollWidth";return c.value[Q]}function A(){if(!c.value)return 0;const Q=e.direction==="vertical"?"clientHeight":"clientWidth";return c.value[Q]}zi(()=>{c.value&&(e.side==="start"?C(T()):e.side==="both"&&C(T()/2-A()/2))});function P(Q,ce){Q==="start"?f.value=ce:Q==="end"?d.value=ce:Q==="both"&&(f.value=ce,d.value=ce)}function R(Q){return Q==="start"?f.value:d.value}let O=0;function z(Q,ce){b.value=ce,b.value&&$(Q)}function $(Q){if(e.mode!=="manual"&&!b.value)return;const ce=R(Q);if(!c.value||["empty","loading"].includes(ce))return;O=T(),P(Q,"loading");function oe(he){P(Q,he),Dn(()=>{he==="empty"||he==="error"||(he==="ok"&&Q==="start"&&C(T()-O+w()),e.mode!=="manual"&&Dn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{$(Q)})})})}))})}s("load",{side:Q,done:oe})}const{t:F}=gi();function H(Q,ce){var pe,_e,ae,be,je;if(e.side!==Q&&e.side!=="both")return;const oe=()=>$(Q),he={side:Q,props:{onClick:oe,color:e.color}};return ce==="error"?(pe=r.error)==null?void 0:pe.call(r,he):ce==="empty"?((_e=r.empty)==null?void 0:_e.call(r,he))??X("div",null,[F(e.emptyText)]):e.mode==="manual"?ce==="loading"?((ae=r.loading)==null?void 0:ae.call(r,he))??U(Uu,{indeterminate:!0,color:e.color},null):((be=r["load-more"])==null?void 0:be.call(r,he))??U(Mn,{variant:"outlined",color:e.color,onClick:oe},{default:()=>[F(e.loadMoreText)]}):((je=r.loading)==null?void 0:je.call(r,he))??U(Uu,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:Y}=Ki(e);_t(()=>{const Q=e.tag,ce=e.side==="start"||e.side==="both",oe=e.side==="end"||e.side==="both",he=e.mode==="intersect";return U(Q,{ref:c,class:gt(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":ce,"v-infinite-scroll--end":oe}]),style:Bt(Y.value)},{default:()=>{var pe;return[X("div",{class:"v-infinite-scroll__side"},[H("start",f.value)]),ce&&he&&U(xS,{key:"start",side:"start",onIntersect:z,rootMargin:a.value},null),(pe=r.default)==null?void 0:pe.call(r),oe&&he&&U(xS,{key:"end",side:"end",onIntersect:z,rootMargin:a.value},null),X("div",{class:"v-infinite-scroll__side"},[H("end",d.value)])]}})});function te(Q){const ce=Q??e.side;P(ce,"ok"),Dn(()=>{C(T()-O+w()),e.mode!=="manual"&&Dn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{ce==="both"?($("start"),$("end")):$(ce)})})})})})}return{reset:te}}}),U2=Symbol.for("vuetify:v-item-group"),YF=Ue({...Zt(),...nc({selectedClass:"v-item--selected"}),...xn(),...Un()},"VItemGroup"),XF=ht()({name:"VItemGroup",props:YF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{isSelected:c,select:f,next:d,prev:a,selected:b}=Ml(e,U2);return()=>U(e.tag,{class:gt(["v-item-group",s.value,e.class]),style:Bt(e.style)},{default:()=>{var C;return[(C=r.default)==null?void 0:C.call(r,{isSelected:c,select:f,next:d,prev:a,selected:b.value})]}})}}),JF=ht()({name:"VItem",props:ic(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const{isSelected:s,select:c,toggle:f,selectedClass:d,value:a,disabled:b}=rc(e,U2);return()=>{var C;return(C=r.default)==null?void 0:C.call(r,{isSelected:s.value,selectedClass:d.value,select:c,toggle:f,value:a.value,disabled:b.value})}}}),QF=Ue({color:String,...ya(),...Zt(),...vi(),...xn({tag:"kbd"}),...Un(),...nr()},"VKbd"),e3=ht()({name:"VKbd",props:QF(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{borderClasses:c}=Ta(e),{roundedClasses:f}=Vi(e),{backgroundColorClasses:d,backgroundColorStyles:a}=ti(()=>e.color),{elevationClasses:b}=kr(e);return _t(()=>U(e.tag,{class:gt(["v-kbd",s.value,d.value,c.value,b.value,f.value,e.class]),style:Bt([a.value,e.style])},r)),{}}}),t3=Ue({...Zt(),...Zi(),...TT()},"VLayout"),n3=ht()({name:"VLayout",props:t3(),setup(e,n){let{slots:r}=n;const{layoutClasses:s,layoutStyles:c,getLayoutItem:f,items:d,layoutRef:a}=IT(e),{dimensionStyles:b}=Ki(e);return _t(()=>{var C;return X("div",{ref:a,class:gt([s.value,e.class]),style:Bt([b.value,c.value,e.style])},[(C=r.default)==null?void 0:C.call(r)])}),{getLayoutItem:f,items:d}}}),i3=Ue({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Zt(),...Ju()},"VLayoutItem"),r3=ht()({name:"VLayoutItem",props:i3(),setup(e,n){let{slots:r}=n;const{layoutItemStyles:s}=Qu({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Me(()=>e.position),elementSize:Me(()=>e.size),layoutSize:Me(()=>e.size),active:Me(()=>e.modelValue),absolute:Me(()=>e.absolute)});return()=>{var c;return X("div",{class:gt(["v-layout-item",e.class]),style:Bt([s.value,e.style])},[(c=r.default)==null?void 0:c.call(r)])}}}),a3=Ue({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Zt(),...Zi(),...xn(),...ws({transition:"fade-transition"})},"VLazy"),s3=ht()({name:"VLazy",directives:{vIntersect:Co},props:a3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),c=tn(e,"modelValue");function f(d){c.value||(c.value=d)}return _t(()=>Di(U(e.tag,{class:gt(["v-lazy",e.class]),style:Bt([s.value,e.style])},{default:()=>[c.value&&U(na,{transition:e.transition,appear:!0},{default:()=>{var d;return[(d=r.default)==null?void 0:d.call(r)]}})]}),[[Co,{handler:f,options:e.options},null]])),{}}}),o3=Ue({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Zt()},"VLocaleProvider"),l3=ht()({name:"VLocaleProvider",props:o3(),setup(e,n){let{slots:r}=n;const{rtlClasses:s}=ZR(e);return _t(()=>{var c;return X("div",{class:gt(["v-locale-provider",s.value,e.class]),style:Bt(e.style)},[(c=r.default)==null?void 0:c.call(r)])}),{}}}),u3=Ue({scrollable:Boolean,...Zt(),...Zi(),...xn({tag:"main"})},"VMain"),c3=ht()({name:"VMain",props:u3(),setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),{mainStyles:c}=PT(),{ssrBootStyles:f}=ec();return _t(()=>U(e.tag,{class:gt(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Bt([c.value,f.value,s.value,e.style])},{default:()=>{var d,a;return[e.scrollable?X("div",{class:"v-main__scroller"},[(d=r.default)==null?void 0:d.call(r)]):(a=r.default)==null?void 0:a.call(r)]}})),{}}});function d3(e){let{rootEl:n,isSticky:r,layoutItemStyles:s}=e;const c=Dt(!1),f=Dt(0),d=ne(()=>{const C=typeof c.value=="boolean"?"top":c.value;return[r.value?{top:"auto",bottom:"auto",height:void 0}:void 0,c.value?{[C]:Gt(f.value)}:{top:s.value.top}]});zi(()=>{Ot(r,C=>{C?window.addEventListener("scroll",b,{passive:!0}):window.removeEventListener("scroll",b)},{immediate:!0})}),Vr(()=>{window.removeEventListener("scroll",b)});let a=0;function b(){const C=a>window.scrollY?"up":"down",w=n.value.getBoundingClientRect(),T=parseFloat(s.value.top??0),A=window.scrollY-Math.max(0,f.value-T),P=w.height+Math.max(f.value,T)-window.scrollY-window.innerHeight,R=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;w.height<window.innerHeight-T?(c.value="top",f.value=T):C==="up"&&c.value==="bottom"||C==="down"&&c.value==="top"?(f.value=window.scrollY+w.top-R,c.value=!0):C==="down"&&P<=0?(f.value=0,c.value="bottom"):C==="up"&&A<=0&&(R?c.value!=="top"&&(f.value=-A+R+T,c.value="top"):(f.value=w.top+A,c.value="top")),a=window.scrollY}return{isStuck:c,stickyStyles:d}}const h3=100,f3=20;function wS(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function SS(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let n=0;for(let r=e.length-1;r>0;r--){if(e[r].t===e[r-1].t)continue;const s=wS(n),c=(e[r].d-e[r-1].d)/(e[r].t-e[r-1].t);n+=(c-s)*Math.abs(c),r===e.length-1&&(n*=.5)}return wS(n)*1e3}function m3(){const e={};function n(c){Array.from(c.changedTouches).forEach(f=>{(e[f.identifier]??(e[f.identifier]=new Xk(f3))).push([c.timeStamp,f])})}function r(c){Array.from(c.changedTouches).forEach(f=>{delete e[f.identifier]})}function s(c){var C;const f=(C=e[c])==null?void 0:C.values().reverse();if(!f)throw new Error(`No samples for touch id ${c}`);const d=f[0],a=[],b=[];for(const w of f){if(d[0]-w[0]>h3)break;a.push({t:w[0],d:w[1].clientX}),b.push({t:w[0],d:w[1].clientY})}return{x:SS(a),y:SS(b),get direction(){const{x:w,y:T}=this,[A,P]=[Math.abs(w),Math.abs(T)];return A>P&&w>=0?"right":A>P&&w<=0?"left":P>A&&T>=0?"down":P>A&&T<=0?"up":p3()}}}return{addMovement:n,endTouch:r,getVelocity:s}}function p3(){throw new Error}function g3(e){let{el:n,isActive:r,isTemporary:s,width:c,touchless:f,position:d}=e;zi(()=>{window.addEventListener("touchstart",F,{passive:!0}),window.addEventListener("touchmove",H,{passive:!1}),window.addEventListener("touchend",Y,{passive:!0})}),Vr(()=>{window.removeEventListener("touchstart",F),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",Y)});const a=ne(()=>["left","right"].includes(d.value)),{addMovement:b,endTouch:C,getVelocity:w}=m3();let T=!1;const A=Dt(!1),P=Dt(0),R=Dt(0);let O;function z(Q,ce){return(d.value==="left"?Q:d.value==="right"?document.documentElement.clientWidth-Q:d.value==="top"?Q:d.value==="bottom"?document.documentElement.clientHeight-Q:ud())-(ce?c.value:0)}function $(Q){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const oe=d.value==="left"?(Q-R.value)/c.value:d.value==="right"?(document.documentElement.clientWidth-Q-R.value)/c.value:d.value==="top"?(Q-R.value)/c.value:d.value==="bottom"?(document.documentElement.clientHeight-Q-R.value)/c.value:ud();return ce?ci(oe):oe}function F(Q){if(f.value)return;const ce=Q.changedTouches[0].clientX,oe=Q.changedTouches[0].clientY,he=25,pe=d.value==="left"?ce<he:d.value==="right"?ce>document.documentElement.clientWidth-he:d.value==="top"?oe<he:d.value==="bottom"?oe>document.documentElement.clientHeight-he:ud(),_e=r.value&&(d.value==="left"?ce<c.value:d.value==="right"?ce>document.documentElement.clientWidth-c.value:d.value==="top"?oe<c.value:d.value==="bottom"?oe>document.documentElement.clientHeight-c.value:ud());(pe||_e||r.value&&s.value)&&(O=[ce,oe],R.value=z(a.value?ce:oe,r.value),P.value=$(a.value?ce:oe),T=R.value>-20&&R.value<80,C(Q),b(Q))}function H(Q){const ce=Q.changedTouches[0].clientX,oe=Q.changedTouches[0].clientY;if(T){if(!Q.cancelable){T=!1;return}const pe=Math.abs(ce-O[0]),_e=Math.abs(oe-O[1]);(a.value?pe>_e&&pe>3:_e>pe&&_e>3)?(A.value=!0,T=!1):(a.value?_e:pe)>3&&(T=!1)}if(!A.value)return;Q.preventDefault(),b(Q);const he=$(a.value?ce:oe,!1);P.value=Math.max(0,Math.min(1,he)),he>1?R.value=z(a.value?ce:oe,!0):he<0&&(R.value=z(a.value?ce:oe,!1))}function Y(Q){if(T=!1,!A.value)return;b(Q),A.value=!1;const ce=w(Q.changedTouches[0].identifier),oe=Math.abs(ce.x),he=Math.abs(ce.y);(a.value?oe>he&&oe>400:he>oe&&he>3)?r.value=ce.direction===({left:"right",right:"left",top:"down",bottom:"up"}[d.value]||ud()):r.value=P.value>.5}const te=ne(()=>A.value?{transform:d.value==="left"?`translateX(calc(-100% + ${P.value*c.value}px))`:d.value==="right"?`translateX(calc(100% - ${P.value*c.value}px))`:d.value==="top"?`translateY(calc(-100% + ${P.value*c.value}px))`:d.value==="bottom"?`translateY(calc(100% - ${P.value*c.value}px))`:ud(),transition:"none"}:void 0);return ia(A,()=>{var oe,he;const Q=((oe=n.value)==null?void 0:oe.style.transform)??null,ce=((he=n.value)==null?void 0:he.style.transition)??null;Ri(()=>{var pe,_e,ae,be;(_e=n.value)==null||_e.style.setProperty("transform",((pe=te.value)==null?void 0:pe.transform)||"none"),(be=n.value)==null||be.style.setProperty("transition",((ae=te.value)==null?void 0:ae.transition)||null)}),hr(()=>{var pe,_e;(pe=n.value)==null||pe.style.setProperty("transform",Q),(_e=n.value)==null||_e.style.setProperty("transition",ce)})}),{isDragging:A,dragProgress:P,dragStyles:te}}function ud(){throw new Error}const v3=["start","end","left","right","top","bottom"],y3=Ue({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>v3.includes(e)},sticky:Boolean,...ya(),...Zt(),...w0(),...Xu({mobile:null}),...nr(),...Ju(),...vi(),...xn({tag:"nav"}),...Un()},"VNavigationDrawer"),_3=ht()({name:"VNavigationDrawer",props:y3(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{isRtl:f}=tr(),{themeClasses:d}=Jn(e),{borderClasses:a}=Ta(e),{backgroundColorClasses:b,backgroundColorStyles:C}=ti(()=>e.color),{elevationClasses:w}=kr(e),{displayClasses:T,mobile:A}=Qa(e),{roundedClasses:P}=Vi(e),R=FT(),O=tn(e,"modelValue",null,ze=>!!ze),{ssrBootStyles:z}=ec(),{scopeId:$}=sc(),F=et(),H=Dt(!1),{runOpenDelay:Y,runCloseDelay:te}=S0(e,ze=>{H.value=ze}),Q=ne(()=>e.rail&&e.expandOnHover&&H.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),ce=ne(()=>A_(e.location,f.value)),oe=Me(()=>e.persistent),he=ne(()=>!e.permanent&&(A.value||e.temporary)),pe=ne(()=>e.sticky&&!he.value&&ce.value!=="bottom");ia(()=>e.expandOnHover&&e.rail!=null,()=>{Ot(H,ze=>s("update:rail",!ze))}),ia(()=>!e.disableResizeWatcher,()=>{Ot(he,ze=>!e.permanent&&Dn(()=>O.value=!ze))}),ia(()=>!e.disableRouteWatcher&&!!R,()=>{Ot(R.currentRoute,()=>he.value&&(O.value=!1))}),Ot(()=>e.permanent,ze=>{ze&&(O.value=!0)}),e.modelValue==null&&!he.value&&(O.value=e.permanent||!A.value);const{isDragging:_e,dragProgress:ae}=g3({el:F,isActive:O,isTemporary:he,width:Q,touchless:Me(()=>e.touchless),position:ce}),be=ne(()=>{const ze=he.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):Q.value;return _e.value?ze*ae.value:ze}),{layoutItemStyles:je,layoutItemScrimStyles:Ve}=Qu({id:e.name,order:ne(()=>parseInt(e.order,10)),position:ce,layoutSize:be,elementSize:Q,active:Ud(O),disableTransitions:Me(()=>_e.value),absolute:ne(()=>e.absolute||pe.value&&typeof Fe.value!="string")}),{isStuck:Fe,stickyStyles:Ke}=d3({rootEl:F,isSticky:pe,layoutItemStyles:je}),mt=ti(()=>typeof e.scrim=="string"?e.scrim:null),ft=ne(()=>({..._e.value?{opacity:ae.value*.2,transition:"none"}:void 0,...Ve.value}));return Li({VList:{bgColor:"transparent"}}),_t(()=>{const ze=c.image||e.image;return X(Wt,null,[U(e.tag,lt({ref:F,onMouseenter:Y,onMouseleave:te,class:["v-navigation-drawer",`v-navigation-drawer--${ce.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":H.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":he.value,"v-navigation-drawer--persistent":oe.value,"v-navigation-drawer--active":O.value,"v-navigation-drawer--sticky":pe.value},d.value,b.value,a.value,T.value,w.value,P.value,e.class],style:[C.value,je.value,z.value,Ke.value,e.style]},$,r),{default:()=>{var Se,Ie,Qe;return[ze&&X("div",{key:"image",class:"v-navigation-drawer__img"},[c.image?U(Sn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},c.image):U(ko,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),c.prepend&&X("div",{class:"v-navigation-drawer__prepend"},[(Se=c.prepend)==null?void 0:Se.call(c)]),X("div",{class:"v-navigation-drawer__content"},[(Ie=c.default)==null?void 0:Ie.call(c)]),c.append&&X("div",{class:"v-navigation-drawer__append"},[(Qe=c.append)==null?void 0:Qe.call(c)])]}}),U(kl,{name:"fade-transition"},{default:()=>[he.value&&(_e.value||O.value)&&!!e.scrim&&X("div",lt({class:["v-navigation-drawer__scrim",mt.backgroundColorClasses.value],style:[ft.value,mt.backgroundColorStyles.value],onClick:()=>{oe.value||(O.value=!1)}},$),null)]})])}),{isStuck:Fe}}}),b3=ja({name:"VNoSsr",setup(e,n){let{slots:r}=n;const s=IP();return()=>{var c;return s.value&&((c=r.default)==null?void 0:c.call(r))}}}),x3=50,w3=500;function S3(e){let{toggleUpDown:n}=e,r=-1,s=-1;hr(f);function c(a){f(),d(a),window.addEventListener("pointerup",f),document.addEventListener("blur",f),r=window.setTimeout(()=>{s=window.setInterval(()=>d(a),x3)},w3)}function f(){window.clearTimeout(r),window.clearInterval(s),window.removeEventListener("pointerup",f),document.removeEventListener("blur",f)}function d(a){n(a==="up")}return{holdStart:c,holdStop:f}}const C3=Ue({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...di(Sm(),["modelValue","validationValue"])},"VNumberInput"),k3=ht()({name:"VNumberInput",props:{...C3()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=et(),{holdStart:c,holdStop:f}=S3({toggleUpDown:he}),d=bm(e),a=ne(()=>d.isDisabled.value||d.isReadonly.value),b=Dt(e.focused),{decimalSeparator:C}=gi(),w=ne(()=>{var Se;return((Se=e.decimalSeparator)==null?void 0:Se[0])||C.value});function T(Se){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,Qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const jt=Ie==null?String(Se):Se.toFixed(Ie);if(b.value&&Qe)return Number(jt).toString().replace(".",w.value);if(e.minFractionDigits===null||Ie!==null&&Ie<e.minFractionDigits)return jt.replace(".",w.value);let[Tt,xt]=jt.split(".");return xt=(xt??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0`,"g"),""),[Tt,xt].filter(Boolean).join(w.value)}const A=tn(e,"modelValue",null,Se=>Se??null,Se=>Se==null?Se??null:ci(Number(Se),e.min,e.max)),P=Dt(null);Ri(()=>{b.value&&!a.value||(A.value==null?P.value=null:isNaN(A.value)||(P.value=T(A.value)))});const R=ne({get:()=>P.value,set(Se){if(Se===null||Se===""){A.value=null,P.value=null;return}const Ie=Number(Se.replace(w.value,"."));!isNaN(Ie)&&Ie<=e.max&&Ie>=e.min&&(A.value=Ie,P.value=Se)}}),O=ne(()=>a.value?!1:(A.value??0)+e.step<=e.max),z=ne(()=>a.value?!1:(A.value??0)-e.step>=e.min),$=ne(()=>e.hideInput?"stacked":e.controlVariant),F=Me(()=>$.value==="split"?"$plus":"$collapse"),H=Me(()=>$.value==="split"?"$minus":"$expand"),Y=Me(()=>$.value==="split"?"default":"small"),te=Me(()=>$.value==="stacked"?"auto":"100%"),Q={props:{onClick:ae,onPointerup:be,onPointerdown:je,onPointercancel:be}},ce={props:{onClick:ae,onPointerup:be,onPointerdown:Ve,onPointercancel:be}};Ot(()=>e.precision,()=>Ke()),Ot(()=>e.minFractionDigits,()=>Ke()),zi(()=>{Fe()});function oe(Se){if(Se==null)return 0;const Ie=Se.toString(),Qe=Ie.indexOf(".");return~Qe?Ie.length-Qe:0}function he(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(a.value)return;if(A.value==null){R.value=T(ci(0,e.min,e.max));return}let Ie=Math.max(oe(A.value),oe(e.step));e.precision!=null&&(Ie=Math.max(Ie,e.precision)),Se?O.value&&(R.value=T(A.value+e.step,Ie)):z.value&&(R.value=T(A.value-e.step,Ie))}function pe(Se){var vt;if(!Se.data)return;const Ie=Se.target,{value:Qe,selectionStart:jt,selectionEnd:Tt}=Ie??{},xt=Qe?Qe.slice(0,jt)+Se.data+Qe.slice(Tt):Se.data,Re=oR(xt,e.precision,w.value);new RegExp(`^-?\\d*${P_(w.value)}?\\d*$`).test(xt)||(Se.preventDefault(),Ie.value=Re),e.precision!=null&&(((vt=xt.split(w.value)[1])==null?void 0:vt.length)>e.precision&&(Se.preventDefault(),Ie.value=Re),e.precision===0&&xt.includes(w.value)&&(Se.preventDefault(),Ie.value=Re))}async function _e(Se){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(Se.key)||Se.ctrlKey||["ArrowDown","ArrowUp"].includes(Se.key)&&(Se.preventDefault(),Fe(),await Dn(),Se.key==="ArrowDown"?he(!1):he())}function ae(Se){Se.stopPropagation()}function be(Se){const Ie=Se.currentTarget;Ie==null||Ie.releasePointerCapture(Se.pointerId),Se.preventDefault(),f()}function je(Se){const Ie=Se.currentTarget;Ie==null||Ie.setPointerCapture(Se.pointerId),Se.preventDefault(),Se.stopPropagation(),c("up")}function Ve(Se){const Ie=Se.currentTarget;Ie==null||Ie.setPointerCapture(Se.pointerId),Se.preventDefault(),Se.stopPropagation(),c("down")}function Fe(){if(a.value||!s.value)return;const Se=s.value.value,Ie=Number(Se.replace(w.value,"."));Se&&!isNaN(Ie)?R.value=T(ci(Ie,e.min,e.max)):R.value=null}function Ke(){a.value||(R.value=A.value!==null&&!isNaN(A.value)?T(A.value,e.precision,!1):null)}function mt(){if(!a.value){if(A.value===null||isNaN(A.value)){R.value=null;return}R.value=A.value.toString().replace(".",w.value)}}function ft(){mt()}function ze(){Fe()}return _t(()=>{const{modelValue:Se,...Ie}=To.filterProps(e);function Qe(){return r.increment?U(Sn,{key:"increment-defaults",defaults:{VBtn:{disabled:!O.value,flat:!0,height:te.value,size:Y.value,icon:F.value}}},{default:()=>[r.increment(Q)]}):U(Mn,{"aria-hidden":"true","data-testid":"increment",disabled:!O.value,flat:!0,height:te.value,icon:F.value,key:"increment-btn",onClick:ae,onPointerdown:je,onPointerup:be,onPointercancel:be,size:Y.value,tabindex:"-1"},null)}function jt(){return r.decrement?U(Sn,{key:"decrement-defaults",defaults:{VBtn:{disabled:!z.value,flat:!0,height:te.value,size:Y.value,icon:H.value}}},{default:()=>[r.decrement(ce)]}):U(Mn,{"aria-hidden":"true","data-testid":"decrement",disabled:!z.value,flat:!0,height:te.value,icon:H.value,key:"decrement-btn",onClick:ae,onPointerdown:Ve,onPointerup:be,onPointercancel:be,size:Y.value,tabindex:"-1"},null)}function Tt(){return X("div",{class:"v-number-input__control"},[jt(),U($a,{vertical:$.value!=="stacked"},null),Qe()])}function xt(){return!e.hideInput&&!e.inset?U($a,{vertical:!0},null):void 0}const Re=$.value==="split"?X("div",{class:"v-number-input__control"},[U($a,{vertical:!0},null),Qe()]):e.reverse||$.value==="hidden"?void 0:X(Wt,null,[xt(),Tt()]),vt=r["append-inner"]||Re,st=$.value==="split"?X("div",{class:"v-number-input__control"},[jt(),U($a,{vertical:!0},null)]):e.reverse&&$.value!=="hidden"?X(Wt,null,[Tt(),xt()]):void 0,Ye=r["prepend-inner"]||st;return U(To,lt({ref:s},Ie,{modelValue:R.value,"onUpdate:modelValue":St=>R.value=St,focused:b.value,"onUpdate:focused":St=>b.value=St,validationValue:A.value,onBeforeinput:pe,onFocus:ft,onBlur:ze,onKeydown:_e,class:["v-number-input",{"v-number-input--default":$.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":$.value==="split","v-number-input--stacked":$.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...r,"append-inner":vt?function(){var Le;for(var St=arguments.length,re=new Array(St),ue=0;ue<St;ue++)re[ue]=arguments[ue];return X(Wt,null,[(Le=r["append-inner"])==null?void 0:Le.call(r,...re),Re])}:void 0,"prepend-inner":Ye?function(){var Le;for(var St=arguments.length,re=new Array(St),ue=0;ue<St;ue++)re[ue]=arguments[ue];return X(Wt,null,[st,(Le=r["prepend-inner"])==null?void 0:Le.call(r,...re)])}:void 0})}),Tr({},s)}}),T3=Ue({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Zi(),..._m(),...Io(wm({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),P3=ht()({name:"VOtpInput",props:T3(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{dimensionStyles:f}=Ki(e),{isFocused:d,focus:a,blur:b}=Mo(e),C=tn(e,"modelValue","",oe=>oe==null?[]:String(oe).split(""),oe=>oe.join("")),{t:w}=gi(),T=ne(()=>Number(e.length)),A=ne(()=>Array(T.value).fill(0)),P=et(-1),R=et(),O=et([]),z=ne(()=>O.value[P.value]);ia(()=>e.autofocus,()=>{const oe=Md();oe.run(()=>{const{intersectionRef:he,isIntersecting:pe}=mm();Ri(()=>{he.value=O.value[0]}),Ot(pe,_e=>{var ae;_e&&((ae=he.value)==null||ae.focus(),oe.stop())})})});function $(){if(ce(z.value.value)){z.value.value="";return}const oe=C.value.slice(),he=z.value.value;oe[P.value]=he;let pe=null;P.value>C.value.length?pe=C.value.length+1:P.value+1!==T.value&&(pe="next"),C.value=oe,pe&&Fu(R.value,pe)}function F(oe){const he=C.value.slice(),pe=P.value;let _e=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(oe.key)&&(oe.preventDefault(),oe.key==="ArrowLeft"?_e="prev":oe.key==="ArrowRight"?_e="next":["Backspace","Delete"].includes(oe.key)&&(he[P.value]="",C.value=he,P.value>0&&oe.key==="Backspace"?_e="prev":requestAnimationFrame(()=>{var ae;(ae=O.value[pe])==null||ae.select()})),requestAnimationFrame(()=>{_e!=null&&Fu(R.value,_e)}))}function H(oe,he){var ae,be;he.preventDefault(),he.stopPropagation();const pe=((ae=he==null?void 0:he.clipboardData)==null?void 0:ae.getData("Text").trim().slice(0,T.value))??"",_e=pe.length-1===-1?oe:pe.length-1;ce(pe)||(C.value=pe.split(""),(be=O.value)==null||be[_e].focus())}function Y(){C.value=[]}function te(oe,he){a(),P.value=he}function Q(){b(),P.value=-1}function ce(oe){return e.type==="number"&&/[^0-9]/g.test(oe)}return Li({VField:{color:Me(()=>e.color),bgColor:Me(()=>e.color),baseColor:Me(()=>e.baseColor),disabled:Me(()=>e.disabled),error:Me(()=>e.error),variant:Me(()=>e.variant)}},{scoped:!0}),Ot(C,oe=>{oe.length===T.value&&(P.value=T.value-1,s("finish",oe.join("")))},{deep:!0}),Ot(P,oe=>{oe<0||Dn(()=>{var he;(he=O.value[oe])==null||he.select()})}),_t(()=>{var pe;const[oe,he]=Al(r);return X("div",lt({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},oe),[X("div",{ref:R,class:"v-otp-input__content",style:Bt([f.value])},[A.value.map((_e,ae)=>X(Wt,null,[e.divider&&ae!==0&&X("span",{class:"v-otp-input__divider"},[e.divider]),U(Pl,{focused:d.value&&e.focusAll||P.value===ae,key:ae},{...c,loader:void 0,default:()=>X("input",{ref:be=>O.value[ae]=be,"aria-label":w(e.label,ae+1),autofocus:ae===0&&e.autofocus,autocomplete:"one-time-code",class:gt(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:ae===0?T.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:C.value[ae],onInput:$,onFocus:be=>te(be,ae),onBlur:Q,onKeydown:F,onPaste:be=>H(ae,be)},null)})])),X("input",lt({class:"v-otp-input-input",type:"hidden"},he,{value:C.value.join("")}),null),U(qs,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var _e;return[((_e=c.loader)==null?void 0:_e.call(c))??U(Uu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(pe=c.default)==null?void 0:pe.call(c)])])}),{blur:()=>{var oe;(oe=O.value)==null||oe.some(he=>he.blur())},focus:()=>{var oe;(oe=O.value)==null||oe[0].focus()},reset:Y,isFocused:d}}});function I3(e){return Math.floor(Math.abs(e))*Math.sign(e)}const A3=Ue({scale:{type:[Number,String],default:.5},...Zt()},"VParallax"),E3=ht()({name:"VParallax",props:A3(),setup(e,n){let{slots:r}=n;const{intersectionRef:s,isIntersecting:c}=mm(),{resizeRef:f,contentRect:d}=vs(),{height:a}=Qa(),b=et();Ri(()=>{var P;s.value=f.value=(P=b.value)==null?void 0:P.$el});let C;Ot(c,P=>{P?(C=r0(s.value),C=C===document.scrollingElement?document:C,C.addEventListener("scroll",A,{passive:!0}),A()):C.removeEventListener("scroll",A)}),Vr(()=>{C==null||C.removeEventListener("scroll",A)}),Ot(a,A),Ot(()=>{var P;return(P=d.value)==null?void 0:P.height},A);const w=ne(()=>1-ci(Number(e.scale)));let T=-1;function A(){c.value&&(cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var te;const P=((te=b.value)==null?void 0:te.$el).querySelector(".v-img__img");if(!P)return;const R=C instanceof Document?document.documentElement.clientHeight:C.clientHeight,O=C instanceof Document?window.scrollY:C.scrollTop,z=s.value.getBoundingClientRect().top+O,$=d.value.height,F=z+($-R)/2,H=I3((O-F)*w.value),Y=Math.max(1,(w.value*(R-$)+$)/$);P.style.setProperty("transform",`translateY(${H}px) scale(${Y})`)}))}return _t(()=>U(ko,{class:gt(["v-parallax",{"v-parallax--active":c.value},e.class]),style:Bt(e.style),ref:b,cover:!0,onLoadstart:A,onLoad:A},r)),{}}}),M3=Ue({...Zg({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),D3=ht()({name:"VRadio",props:M3(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=Tl.filterProps(e);return U(Tl,lt(s,{class:["v-radio",e.class],style:e.style,type:"radio"}),r)}),{}}}),R3=Ue({height:{type:[Number,String],default:"auto"},...Do(),...di(v0(),["multiple"]),trueIcon:{type:an,default:"$radioOn"},falseIcon:{type:an,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),L3=ht()({name:"VRadioGroup",inheritAttrs:!1,props:R3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=va(),f=ne(()=>e.id||`radio-group-${c}`),d=tn(e,"modelValue"),a=et();return _t(()=>{const[b,C]=Al(r),w=qr.filterProps(e),T=Tl.filterProps(e),A=s.label?s.label({label:e.label,props:{for:f.value}}):e.label;return U(qr,lt({ref:a,class:["v-radio-group",e.class],style:e.style},b,w,{modelValue:d.value,"onUpdate:modelValue":P=>d.value=P,id:f.value}),{...s,default:P=>{let{id:R,messagesId:O,isDisabled:z,isReadonly:$}=P;return X(Wt,null,[A&&U(Kd,{id:R.value},{default:()=>[A]}),U(KT,lt(T,{id:R.value,"aria-describedby":O.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:z.value,readonly:$.value,"aria-labelledby":A?R.value:void 0,multiple:!1},C,{modelValue:d.value,"onUpdate:modelValue":F=>d.value=F}),s)])}})}),Tr({},a)}}),z3=Ue({..._m(),...Do(),...YP(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),V3=ht()({name:"VRangeSlider",props:z3(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=et(),f=et(),d=et(),{rtlClasses:a}=tr();function b(pe){if(!c.value||!f.value)return;const _e=J_(pe,c.value.$el,e.direction),ae=J_(pe,f.value.$el,e.direction),be=Math.abs(_e),je=Math.abs(ae);return be<je||be===je&&_e<0?c.value.$el:f.value.$el}const C=XP(e),w=tn(e,"modelValue",void 0,pe=>pe!=null&&pe.length?pe.map(_e=>C.roundValue(_e)):[0,0]),{activeThumbRef:T,hasLabels:A,max:P,min:R,mousePressed:O,onSliderMousedown:z,onSliderTouchstart:$,position:F,trackContainerRef:H,readonly:Y}=JP({props:e,steps:C,onSliderStart:()=>{s("start",w.value)},onSliderEnd:pe=>{var be;let{value:_e}=pe;const ae=T.value===((be=c.value)==null?void 0:be.$el)?[_e,w.value[1]]:[w.value[0],_e];!e.strict&&ae[0]<ae[1]&&(w.value=ae),s("end",w.value)},onSliderMove:pe=>{var je,Ve,Fe,Ke;let{value:_e}=pe;const[ae,be]=w.value;!e.strict&&ae===be&&ae!==R.value&&(T.value=_e>ae?(je=f.value)==null?void 0:je.$el:(Ve=c.value)==null?void 0:Ve.$el,(Fe=T.value)==null||Fe.focus()),T.value===((Ke=c.value)==null?void 0:Ke.$el)?w.value=[Math.min(_e,be),be]:w.value=[ae,Math.max(ae,_e)]},getActiveThumb:b}),{isFocused:te,focus:Q,blur:ce}=Mo(e),oe=ne(()=>F(w.value[0])),he=ne(()=>F(w.value[1]));return _t(()=>{const pe=qr.filterProps(e),_e=!!(e.label||r.label||r.prepend);return U(qr,lt({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!r["tick-label"]||A.value,"v-slider--focused":te.value,"v-slider--pressed":O.value,"v-slider--disabled":e.disabled},a.value,e.class],style:e.style,ref:d},pe,{focused:te.value}),{...r,prepend:_e?ae=>{var be,je;return X(Wt,null,[((be=r.label)==null?void 0:be.call(r,ae))??(e.label?U(Kd,{class:"v-slider__label",text:e.label},null):void 0),(je=r.prepend)==null?void 0:je.call(r,ae)])}:void 0,default:ae=>{var Ve,Fe;let{id:be,messagesId:je}=ae;return X("div",{class:"v-slider__container",onMousedown:Y.value?void 0:z,onTouchstartPassive:Y.value?void 0:$},[X("input",{id:`${be.value}_start`,name:e.name||be.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:w.value[0]},null),X("input",{id:`${be.value}_stop`,name:e.name||be.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:w.value[1]},null),U(QP,{ref:H,start:oe.value,stop:he.value},{"tick-label":r["tick-label"]}),U(Q_,{ref:c,"aria-describedby":je.value,focused:te&&T.value===((Ve=c.value)==null?void 0:Ve.$el),modelValue:w.value[0],"onUpdate:modelValue":Ke=>w.value=[Ke,w.value[1]],onFocus:Ke=>{var mt,ft,ze,Se;Q(),T.value=(mt=c.value)==null?void 0:mt.$el,P.value!==R.value&&w.value[0]===w.value[1]&&w.value[1]===R.value&&Ke.relatedTarget!==((ft=f.value)==null?void 0:ft.$el)&&((ze=c.value)==null||ze.$el.blur(),(Se=f.value)==null||Se.$el.focus())},onBlur:()=>{ce(),T.value=void 0},min:R.value,max:w.value[1],position:oe.value,ripple:e.ripple},{"thumb-label":r["thumb-label"]}),U(Q_,{ref:f,"aria-describedby":je.value,focused:te&&T.value===((Fe=f.value)==null?void 0:Fe.$el),modelValue:w.value[1],"onUpdate:modelValue":Ke=>w.value=[w.value[0],Ke],onFocus:Ke=>{var mt,ft,ze,Se;Q(),T.value=(mt=f.value)==null?void 0:mt.$el,P.value!==R.value&&w.value[0]===w.value[1]&&w.value[0]===P.value&&Ke.relatedTarget!==((ft=c.value)==null?void 0:ft.$el)&&((ze=f.value)==null||ze.$el.blur(),(Se=c.value)==null||Se.$el.focus())},onBlur:()=>{ce(),T.value=void 0},min:w.value[0],max:P.value,position:he.value,ripple:e.ripple},{"thumb-label":r["thumb-label"]})])}})}),Tr({focus:()=>{var pe;return(pe=c.value)==null?void 0:pe.$el.focus()}},d)}}),B3=Ue({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:an,default:"$ratingEmpty"},fullIcon:{type:an,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Zt(),...fr(),...Ks(),...xn(),...Un()},"VRating"),O3=ht()({name:"VRating",props:B3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=gi(),{themeClasses:c}=Jn(e),f=tn(e,"modelValue"),d=ne(()=>ci(parseFloat(f.value),0,Number(e.length))),a=ne(()=>Oa(Number(e.length),1)),b=ne(()=>a.value.flatMap(z=>e.halfIncrements?[z-.5,z]:[z])),C=Dt(-1),w=ne(()=>b.value.map(z=>{const $=e.hover&&C.value>-1,F=d.value>=z,H=C.value>=z,te=($?H:F)?e.fullIcon:e.emptyIcon,Q=e.activeColor??e.color,ce=F||H?Q:e.color;return{isFilled:F,isHovered:H,icon:te,color:ce}})),T=ne(()=>[0,...b.value].map(z=>{function $(){C.value=z}function F(){C.value=-1}function H(){e.disabled||e.readonly||(f.value=d.value===z&&e.clearable?0:z)}return{onMouseenter:e.hover?$:void 0,onMouseleave:e.hover?F:void 0,onClick:H}})),A=va(),P=ne(()=>e.name??`v-rating-${A}`);function R(z){var he,pe;let{value:$,index:F,showStar:H=!0}=z;const{onMouseenter:Y,onMouseleave:te,onClick:Q}=T.value[F+1],ce=`${P.value}-${String($).replace(".","-")}`,oe={color:(he=w.value[F])==null?void 0:he.color,density:e.density,disabled:e.disabled,icon:(pe=w.value[F])==null?void 0:pe.icon,ripple:e.ripple,size:e.size,variant:"plain"};return X(Wt,null,[X("label",{for:ce,class:gt({"v-rating__item--half":e.halfIncrements&&$%1>0,"v-rating__item--full":e.halfIncrements&&$%1===0}),onMouseenter:Y,onMouseleave:te,onClick:Q},[X("span",{class:"v-rating__hidden"},[s(e.itemAriaLabel,$,e.length)]),H?r.item?r.item({...w.value[F],props:oe,value:$,index:F,rating:d.value}):U(Mn,lt({"aria-label":s(e.itemAriaLabel,$,e.length)},oe),null):void 0]),X("input",{class:"v-rating__hidden",name:P.value,id:ce,type:"radio",value:$,checked:d.value===$,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function O(z){return r["item-label"]?r["item-label"](z):z.label?X("span",null,[z.label]):X("span",null,[nn(" ")])}return _t(()=>{var $;const z=!!(($=e.itemLabels)!=null&&$.length)||r["item-label"];return U(e.tag,{class:gt(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},c.value,e.class]),style:Bt(e.style)},{default:()=>[U(R,{value:0,index:-1,showStar:!1},null),a.value.map((F,H)=>{var Y,te;return X("div",{class:"v-rating__wrapper"},[z&&e.itemLabelPosition==="top"?O({value:F,index:H,label:(Y=e.itemLabels)==null?void 0:Y[H]}):void 0,X("div",{class:"v-rating__item"},[e.halfIncrements?X(Wt,null,[U(R,{value:F-.5,index:H*2},null),U(R,{value:F,index:H*2+1},null)]):U(R,{value:F,index:H},null)]),z&&e.itemLabelPosition==="bottom"?O({value:F,index:H,label:(te=e.itemLabels)==null?void 0:te[H]}):void 0])})]})}),{}}}),F3={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function $3(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return X("div",{class:gt(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[n])}function CS(e){const[n,r]=e.split("@");return Array.from({length:r}).map(()=>uv(n))}function uv(e){let n=[];if(!e)return n;const r=F3[e];if(e!==r){if(e.includes(","))return kS(e);if(e.includes("@"))return CS(e);r.includes(",")?n=kS(r):r.includes("@")?n=CS(r):r&&n.push(uv(r))}return[$3(e,n)]}function kS(e){return e.replace(/\s/g,"").split(",").map(uv)}const j3=Ue({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Zi(),...nr(),...Un()},"VSkeletonLoader"),N3=ht()({name:"VSkeletonLoader",props:j3(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color),{dimensionStyles:f}=Ki(e),{elevationClasses:d}=kr(e),{themeClasses:a}=Jn(e),{t:b}=gi(),C=ne(()=>uv(Mi(e.type).join(",")));return _t(()=>{var A;const w=!r.default||e.loading,T=e.boilerplate||!w?{}:{ariaLive:"polite",ariaLabel:b(e.loadingText),role:"alert"};return X("div",lt({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},a.value,s.value,d.value],style:[c.value,w?f.value:{}]},T),[w?C.value:(A=r.default)==null?void 0:A.call(r)])}),{}}}),U3=ht()({name:"VSlideGroupItem",props:ic(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=rc(e,rP);return()=>{var c;return(c=r.default)==null?void 0:c.call(r,{isSelected:s.isSelected.value,select:s.select,toggle:s.toggle,selectedClass:s.selectedClass.value})}}});function G3(e){const n=Dt(e());let r=-1;function s(){clearInterval(r)}function c(){s(),Dn(()=>n.value=e())}function f(d){const a=d?getComputedStyle(d):{transitionDuration:.2},b=parseFloat(a.transitionDuration)*1e3||200;if(s(),n.value<=0)return;const C=performance.now();r=window.setInterval(()=>{const w=performance.now()-C+b;n.value=Math.max(e()-w,0),n.value<=0&&s()},b)}return hr(s),{clear:s,time:n,start:f,reset:c}}const G2=Ue({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Eo({location:"bottom"}),...Wd(),...vi(),...es(),...Un(),...di(xm({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),cb=ht()({name:"VSnackbar",props:G2(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),{positionClasses:c}=Zd(e),{scopeId:f}=sc(),{themeClasses:d}=Jn(e),{colorClasses:a,colorStyles:b,variantClasses:C}=tc(e),{roundedClasses:w}=Vi(e),T=G3(()=>Number(e.timeout)),A=et(),P=et(),R=Dt(!1),O=Dt(0),z=et(),$=bn(Wf,void 0);ia(()=>!!$,()=>{const _e=PT();Ri(()=>{z.value=_e.mainStyles.value})}),Ot(s,H),Ot(()=>e.timeout,H),zi(()=>{s.value&&H()});let F=-1;function H(){T.reset(),window.clearTimeout(F);const _e=Number(e.timeout);if(!s.value||_e===-1)return;const ae=Xb(P.value);T.start(ae),F=window.setTimeout(()=>{s.value=!1},_e)}function Y(){T.reset(),window.clearTimeout(F)}function te(){R.value=!0,Y()}function Q(){R.value=!1,H()}function ce(_e){O.value=_e.touches[0].clientY}function oe(_e){Math.abs(O.value-_e.changedTouches[0].clientY)>50&&(s.value=!1)}function he(){R.value&&Q()}const pe=ne(()=>e.location.split(" ").reduce((_e,ae)=>(_e[`v-snackbar--${ae}`]=!0,_e),{}));return _t(()=>{const _e=qs.filterProps(e),ae=!!(r.default||r.text||e.text);return U(qs,lt({ref:A,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},pe.value,c.value,e.class],style:[z.value,e.style]},_e,{modelValue:s.value,"onUpdate:modelValue":be=>s.value=be,contentProps:lt({class:["v-snackbar__wrapper",d.value,a.value,w.value,C.value],style:[b.value],onPointerenter:te,onPointerleave:Q},_e.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:ce,onTouchend:oe,onAfterLeave:he},f),{default:()=>{var be,je;return[El(!1,"v-snackbar"),e.timer&&!R.value&&X("div",{key:"timer",class:"v-snackbar__timer"},[U(Hg,{ref:P,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":T.time.value},null)]),ae&&X("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((be=r.text)==null?void 0:be.call(r))??e.text,(je=r.default)==null?void 0:je.call(r)]),r.actions&&U(Sn,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[X("div",{class:"v-snackbar__actions"},[r.actions({isActive:s})])]})]},activator:r.activator})}),Tr({},A)}}),H3=Ue({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...di(G2(),["modelValue"])},"VSnackbarQueue"),q3=ht()({name:"VSnackbarQueue",props:H3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=gi(),f=Dt(!1),d=Dt(!1),a=Dt();Ot(()=>e.modelValue.length,(A,P)=>{!d.value&&A>P&&C()}),Ot(f,A=>{A&&(d.value=!0)});function b(){e.modelValue.length?C():(a.value=void 0,d.value=!1)}function C(){const[A,...P]=e.modelValue;r("update:modelValue",P),a.value=typeof A=="string"?{text:A}:A,Dn(()=>{f.value=!0})}function w(){f.value=!1}const T=ne(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:c(e.closeText)}));_t(()=>{const A=!!(e.closable||s.actions),{modelValue:P,...R}=cb.filterProps(e);return X(Wt,null,[d.value&&!!a.value&&(s.default?U(Sn,{defaults:{VSnackbar:a.value}},{default:()=>[s.default({item:a.value})]}):U(cb,lt(R,a.value,{modelValue:f.value,"onUpdate:modelValue":O=>f.value=O,onAfterLeave:b}),{text:s.text?()=>{var O;return(O=s.text)==null?void 0:O.call(s,{item:a.value})}:void 0,actions:A?()=>X(Wt,null,[s.actions?U(Sn,{defaults:{VBtn:T.value}},{default:()=>[s.actions({item:a.value,props:{onClick:w}})]}):U(Mn,lt(T.value,{onClick:w}),null)]):void 0}))])})}}),H2=Ue({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),q2=Ue({autoLineWidth:Boolean,...H2()},"VBarline"),TS=ht()({name:"VBarline",props:q2(),setup(e,n){let{slots:r}=n;const s=va(),c=ne(()=>e.id||`barline-${s}`),f=ne(()=>Number(e.autoDrawDuration)||500),d=ne(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),a=ne(()=>parseFloat(e.lineWidth)||4),b=ne(()=>Math.max(e.modelValue.length*a.value,Number(e.width))),C=ne(()=>({minX:0,maxX:b.value,minY:0,maxY:parseInt(e.height,10)})),w=ne(()=>e.modelValue.map(z=>Wi(z,e.itemValue,z)));function T(z,$){const{minX:F,maxX:H,minY:Y,maxY:te}=$,Q=z.length;let ce=e.max!=null?Number(e.max):Math.max(...z),oe=e.min!=null?Number(e.min):Math.min(...z);oe>0&&e.min==null&&(oe=0),ce<0&&e.max==null&&(ce=0);const he=H/Q,pe=(te-Y)/(ce-oe||1),_e=te-Math.abs(oe*pe);return z.map((ae,be)=>{const je=Math.abs(pe*ae);return{x:F+be*he,y:_e-je+ +(ae<0)*je,height:je,value:ae}})}const A=ne(()=>{const z=[],$=T(w.value,C.value),F=$.length;for(let H=0;z.length<F;H++){const Y=$[H];let te=e.labels[H];te||(te=typeof Y=="object"?Y.value:Y),z.push({x:Y.x,value:String(te)})}return z}),P=ne(()=>T(w.value,C.value)),R=ne(()=>(Math.abs(P.value[0].x-P.value[1].x)-a.value)/2),O=ne(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));_t(()=>{const z=e.gradient.slice().length?e.gradient.slice().reverse():[""];return X("svg",{display:"block"},[X("defs",null,[X("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[z.map(($,F)=>X("stop",{offset:F/Math.max(z.length-1,1),"stop-color":$||"currentColor"},null))])]),X("clipPath",{id:`${c.value}-clip`},[P.value.map($=>X("rect",{x:$.x+R.value,y:$.y,width:a.value,height:$.height,rx:O.value,ry:O.value},[e.autoDraw&&X(Wt,null,[X("animate",{attributeName:"y",from:$.y+$.height,to:$.y,dur:`${f.value}ms`,fill:"freeze"},null),X("animate",{attributeName:"height",from:"0",to:$.height,dur:`${f.value}ms`,fill:"freeze"},null)])]))]),d.value&&X("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[A.value.map(($,F)=>{var H;return X("text",{x:$.x+R.value+a.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((H=r.label)==null?void 0:H.call(r,{index:F,value:$.value}))??$.value])})]),X("g",{"clip-path":`url(#${c.value}-clip)`,fill:`url(#${c.value})`},[X("rect",{x:0,y:0,width:Math.max(e.modelValue.length*a.value,Number(e.width)),height:e.height},null)])])})}});function W3(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const c=e.shift(),f=e[e.length-1];return(r?`M${c.x} ${s-c.x+2} L${c.x} ${c.y}`:`M${c.x} ${c.y}`)+e.map((d,a)=>{const b=e[a+1],C=e[a-1]||c,w=b&&Z3(b,d,C);if(!b||w)return`L${d.x} ${d.y}`;const T=Math.min(PS(C,d),PS(b,d)),P=T/2<n?T/2:n,R=IS(C,d,P),O=IS(b,d,P);return`L${R.x} ${R.y}S${d.x} ${d.y} ${O.x} ${O.y}`}).join("")+(r?`L${f.x} ${s-c.x+2} Z`:"")}function Hp(e){return parseInt(e,10)}function Z3(e,n,r){return Hp(e.x+r.x)===Hp(2*n.x)&&Hp(e.y+r.y)===Hp(2*n.y)}function PS(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function IS(e,n,r){const s={x:e.x-n.x,y:e.y-n.y},c=Math.sqrt(s.x*s.x+s.y*s.y),f={x:s.x/c,y:s.y/c};return{x:n.x+f.x*r,y:n.y+f.y*r}}const W2=Ue({fill:Boolean,...H2()},"VTrendline"),AS=ht()({name:"VTrendline",props:W2(),setup(e,n){let{slots:r}=n;const s=va(),c=ne(()=>e.id||`trendline-${s}`),f=ne(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),d=et(0),a=et(null);function b(z,$){const{minX:F,maxX:H,minY:Y,maxY:te}=$,Q=z.length,ce=e.max!=null?Number(e.max):Math.max(...z),oe=e.min!=null?Number(e.min):Math.min(...z),he=(H-F)/(Q-1),pe=(te-Y)/(ce-oe||1);return z.map((_e,ae)=>({x:F+ae*he,y:te-(_e-oe)*pe,value:_e}))}const C=ne(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),w=ne(()=>parseFloat(e.lineWidth)||4),T=ne(()=>Number(e.width)),A=ne(()=>{const z=Number(e.padding);return{minX:z,maxX:T.value-z,minY:z,maxY:parseInt(e.height,10)-z}}),P=ne(()=>e.modelValue.map(z=>Wi(z,e.itemValue,z))),R=ne(()=>{const z=[],$=b(P.value,A.value),F=$.length;for(let H=0;z.length<F;H++){const Y=$[H];let te=e.labels[H];te||(te=typeof Y=="object"?Y.value:Y),z.push({x:Y.x,value:String(te)})}return z});Ot(()=>e.modelValue,async()=>{if(await Dn(),!e.autoDraw||!a.value)return;const z=a.value,$=z.getTotalLength();e.fill?(z.style.transformOrigin="bottom center",z.style.transition="none",z.style.transform="scaleY(0)",z.getBoundingClientRect(),z.style.transition=`transform ${f.value}ms ${e.autoDrawEasing}`,z.style.transform="scaleY(1)"):(z.style.strokeDasharray=`${$}`,z.style.strokeDashoffset=`${$}`,z.getBoundingClientRect(),z.style.transition=`stroke-dashoffset ${f.value}ms ${e.autoDrawEasing}`,z.style.strokeDashoffset="0"),d.value=$},{immediate:!0});function O(z){const $=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return W3(b(P.value,A.value),$,z,parseInt(e.height,10))}_t(()=>{var $;const z=e.gradient.slice().length?e.gradient.slice().reverse():[""];return X("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[X("defs",null,[X("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[z.map((F,H)=>X("stop",{offset:H/Math.max(z.length-1,1),"stop-color":F||"currentColor"},null))])]),C.value&&X("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[R.value.map((F,H)=>{var Y;return X("text",{x:F.x+w.value/2+w.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((Y=r.label)==null?void 0:Y.call(r,{index:H,value:F.value}))??F.value])})]),X("path",{ref:a,d:O(e.fill),fill:e.fill?`url(#${c.value})`:"none",stroke:e.fill?"none":`url(#${c.value})`},null),e.fill&&X("path",{d:O(!1),fill:"none",stroke:e.color??(($=e.gradient)==null?void 0:$[0])},null)])})}}),K3=Ue({type:{type:String,default:"trend"},...q2(),...W2()},"VSparkline"),Y3=ht()({name:"VSparkline",props:K3(),setup(e,n){let{slots:r}=n;const{textColorClasses:s,textColorStyles:c}=zr(()=>e.color),f=ne(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),d=ne(()=>{let a=parseInt(e.height,10);return f.value&&(a+=parseInt(e.labelSize,10)*1.5),a});_t(()=>{const a=e.type==="trend"?AS:TS,b=e.type==="trend"?AS.filterProps(e):TS.filterProps(e);return U(a,lt({key:e.type,class:s.value,style:c.value,viewBox:`0 0 ${e.width} ${parseInt(d.value,10)}`},b),r)})}}),X3=Ue({...Zt(),...MP({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),J3=ht()({name:"VSpeedDial",props:X3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),c=et(),f=ne(()=>{var C;const[a,b="center"]=((C=e.location)==null?void 0:C.split(" "))??[];return`${a} ${b}`}),d=ne(()=>({[`v-speed-dial__content--${f.value.replace(" ","-")}`]:!0}));return _t(()=>{const a=Od.filterProps(e);return U(Od,lt(a,{modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,class:e.class,style:e.style,contentClass:["v-speed-dial__content",d.value,e.contentClass],location:f.value,ref:c,transition:"fade-transition"}),{...r,default:b=>U(Sn,{defaults:{VBtn:{size:"small"}}},{default:()=>[U(na,{appear:!0,group:!0,transition:e.transition},{default:()=>{var C;return[(C=r.default)==null?void 0:C.call(r,b)]}})]})})}),{}}}),H0=Symbol.for("vuetify:v-stepper"),Z2=Ue({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),K2=ht()({name:"VStepperActions",props:Z2(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=gi();function f(){r("click:prev")}function d(){r("click:next")}return _t(()=>{const a={onClick:f},b={onClick:d};return X("div",{class:"v-stepper-actions"},[U(Sn,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:c(e.prevText),variant:"text"}}},{default:()=>{var C;return[((C=s.prev)==null?void 0:C.call(s,{props:a}))??U(Mn,a,null)]}}),U(Sn,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:c(e.nextText),variant:"tonal"}}},{default:()=>{var C;return[((C=s.next)==null?void 0:C.call(s,{props:b}))??U(Mn,b,null)]}})])}),{}}}),Y2=Ao("v-stepper-header"),Q3=Ue({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:an,default:"$complete"},editable:Boolean,editIcon:{type:an,default:"$edit"},error:Boolean,errorIcon:{type:an,default:"$error"},icon:an,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),e5=Ue({...Q3(),...ic()},"VStepperItem"),X2=ht()({name:"VStepperItem",directives:{vRipple:ra},props:e5(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=rc(e,H0,!0),c=ne(()=>(s==null?void 0:s.value.value)??e.value),f=ne(()=>e.rules.every(A=>A()===!0)),d=ne(()=>!e.disabled&&e.editable),a=ne(()=>!e.disabled&&e.editable),b=ne(()=>e.error||!f.value),C=ne(()=>e.complete||e.rules.length>0&&f.value),w=ne(()=>b.value?e.errorIcon:C.value?e.completeIcon:s.isSelected.value&&e.editable?e.editIcon:e.icon),T=ne(()=>({canEdit:a.value,hasError:b.value,hasCompleted:C.value,title:e.title,subtitle:e.subtitle,step:c.value,value:e.value}));return _t(()=>{var z,$,F;const A=(!s||s.isSelected.value||C.value||a.value)&&!b.value&&!e.disabled,P=!!(e.title!=null||r.title),R=!!(e.subtitle!=null||r.subtitle);function O(){s==null||s.toggle()}return Di(X("button",{class:gt(["v-stepper-item",{"v-stepper-item--complete":C.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":b.value},s==null?void 0:s.selectedClass.value]),disabled:!e.editable,type:"button",onClick:O},[d.value&&El(!0,"v-stepper-item"),U(Ja,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:A?e.color:void 0,size:24},{default:()=>{var H;return[((H=r.icon)==null?void 0:H.call(r,T.value))??(w.value?U(Xn,{icon:w.value},null):c.value)]}}),X("div",{class:"v-stepper-item__content"},[P&&X("div",{key:"title",class:"v-stepper-item__title"},[((z=r.title)==null?void 0:z.call(r,T.value))??e.title]),R&&X("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[(($=r.subtitle)==null?void 0:$.call(r,T.value))??e.subtitle]),(F=r.default)==null?void 0:F.call(r,T.value)])]),[[ra,e.ripple&&e.editable,null]])}),{}}}),t5=Ue({...di(Xg(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),J2=ht()({name:"VStepperWindow",props:t5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=bn(H0,null),c=tn(e,"modelValue"),f=ne({get(){var d;return c.value!=null||!s?c.value:(d=s.items.value.find(a=>s.selected.value.includes(a.id)))==null?void 0:d.value},set(d){c.value=d}});return _t(()=>{const d=Gu.filterProps(e);return U(Gu,lt({_as:"VStepperWindow"},d,{modelValue:f.value,"onUpdate:modelValue":a=>f.value=a,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),r)}),{}}}),n5=Ue({...Jg()},"VStepperWindowItem"),Q2=ht()({name:"VStepperWindowItem",props:n5(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=Hu.filterProps(e);return U(Hu,lt({_as:"VStepperWindowItem"},s,{class:["v-stepper-window-item",e.class],style:e.style}),r)}),{}}}),i5=Ue({altLabels:Boolean,bgColor:String,completeIcon:an,editIcon:an,editable:Boolean,errorIcon:an,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Xu()},"Stepper"),r5=Ue({...i5(),...nc({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...E0(),...Io(Z2(),["prevText","nextText"])},"VStepper"),a5=ht()({name:"VStepper",props:r5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{items:s,next:c,prev:f,selected:d}=Ml(e,H0),{displayClasses:a,mobile:b}=Qa(e),{completeIcon:C,editIcon:w,errorIcon:T,color:A,editable:P,prevText:R,nextText:O}=Gd(e),z=ne(()=>e.items.map((H,Y)=>{const te=Wi(H,e.itemTitle,H),Q=Wi(H,e.itemValue,Y+1);return{title:te,value:Q,raw:H}})),$=ne(()=>s.value.findIndex(H=>d.value.includes(H.id))),F=ne(()=>e.disabled?e.disabled:$.value===0?"prev":$.value===s.value.length-1?"next":!1);return Li({VStepperItem:{editable:P,errorIcon:T,completeIcon:C,editIcon:w,prevText:R,nextText:O},VStepperActions:{color:A,disabled:F,prevText:R,nextText:O}}),_t(()=>{const H=tm.filterProps(e),Y=!!(r.header||e.items.length),te=e.items.length>0,Q=!e.hideActions&&!!(te||r.actions);return U(tm,lt(H,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":b.value},a.value,e.class],style:e.style}),{default:()=>{var ce,oe;return[Y&&U(Y2,{key:"stepper-header"},{default:()=>[z.value.map((he,pe)=>{let{raw:_e,...ae}=he;return X(Wt,null,[!!pe&&U($a,null,null),U(X2,ae,{default:r[`header-item.${ae.value}`]??r.header,icon:r.icon,title:r.title,subtitle:r.subtitle})])})]}),te&&U(J2,{key:"stepper-window"},{default:()=>[z.value.map(he=>U(Q2,{value:he.value},{default:()=>{var pe,_e;return((pe=r[`item.${he.value}`])==null?void 0:pe.call(r,he))??((_e=r.item)==null?void 0:_e.call(r,he))}}))]}),(ce=r.default)==null?void 0:ce.call(r,{prev:f,next:c}),Q&&(((oe=r.actions)==null?void 0:oe.call(r,{next:c,prev:f}))??U(K2,{key:"stepper-actions","onClick:prev":f,"onClick:next":c},r))]}})}),{prev:f,next:c}}}),s5=Ue({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Do(),...Zg()},"VSwitch"),o5=ht()({name:"VSwitch",inheritAttrs:!1,props:s5(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=tn(e,"indeterminate"),f=tn(e,"modelValue"),{loaderClasses:d}=pm(e),{isFocused:a,focus:b,blur:C}=Mo(e),w=et(),T=et(),A=Yn&&window.matchMedia("(forced-colors: active)").matches,P=Me(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),R=va(),O=Me(()=>e.id||`switch-${R}`);function z(){c.value&&(c.value=!1)}function $(F){var H,Y;F.stopPropagation(),F.preventDefault(),(Y=(H=w.value)==null?void 0:H.input)==null||Y.click()}return _t(()=>{const[F,H]=Al(r),Y=qr.filterProps(e),te=Tl.filterProps(e);return U(qr,lt({ref:T,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":c.value},d.value,e.class]},F,Y,{modelValue:f.value,"onUpdate:modelValue":Q=>f.value=Q,id:O.value,focused:a.value,style:e.style}),{...s,default:Q=>{let{id:ce,messagesId:oe,isDisabled:he,isReadonly:pe,isValid:_e}=Q;const ae={model:f,isValid:_e};return U(Tl,lt({ref:w},te,{modelValue:f.value,"onUpdate:modelValue":[be=>f.value=be,z],id:ce.value,"aria-describedby":oe.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:he.value,readonly:pe.value,onFocus:b,onBlur:C},H),{...s,default:be=>{let{backgroundColorClasses:je,backgroundColorStyles:Ve}=be;return X("div",{class:gt(["v-switch__track",A?void 0:je.value]),style:Bt(Ve.value),onClick:$},[s["track-true"]&&X("div",{key:"prepend",class:"v-switch__track-true"},[s["track-true"](ae)]),s["track-false"]&&X("div",{key:"append",class:"v-switch__track-false"},[s["track-false"](ae)])])},input:be=>{let{inputNode:je,icon:Ve,backgroundColorClasses:Fe,backgroundColorStyles:Ke}=be;return X(Wt,null,[je,X("div",{class:gt(["v-switch__thumb",{"v-switch__thumb--filled":Ve||e.loading},e.inset||A?void 0:Fe.value]),style:Bt(e.inset?void 0:Ke.value)},[s.thumb?U(Sn,{defaults:{VIcon:{icon:Ve,size:"x-small"}}},{default:()=>[s.thumb({...ae,icon:Ve})]}):U(h0,null,{default:()=>[e.loading?U(gm,{name:"v-switch",active:!0,color:_e.value===!1?void 0:P.value},{default:mt=>s.loader?s.loader(mt):U(Uu,{active:mt.isActive,color:mt.color,indeterminate:!0,size:"16",width:"2"},null)}):Ve&&U(Xn,{key:String(Ve),icon:Ve,size:"x-small"},null)]})])])}})}})}),Tr({},T)}}),l5=Ue({color:String,height:[Number,String],window:Boolean,...Zt(),...nr(),...Ju(),...vi(),...xn(),...Un()},"VSystemBar"),u5=ht()({name:"VSystemBar",props:l5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{elevationClasses:d}=kr(e),{roundedClasses:a}=Vi(e),{ssrBootStyles:b}=ec(),C=ne(()=>e.height??(e.window?32:24)),{layoutItemStyles:w}=Qu({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Dt("top"),layoutSize:C,elementSize:C,active:ne(()=>!0),absolute:Me(()=>e.absolute)});return _t(()=>U(e.tag,{class:gt(["v-system-bar",{"v-system-bar--window":e.window},s.value,c.value,d.value,a.value,e.class]),style:Bt([f.value,w.value,b.value,e.style])},r)),{}}}),q0=Symbol.for("vuetify:v-tabs"),c5=Ue({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...di(Wg({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),eI=ht()({name:"VTab",props:c5(),setup(e,n){let{slots:r,attrs:s}=n;const{textColorClasses:c,textColorStyles:f}=zr(()=>e.sliderColor),d=et(),a=et(),b=ne(()=>e.direction==="horizontal"),C=ne(()=>{var T,A;return((A=(T=d.value)==null?void 0:T.group)==null?void 0:A.isSelected.value)??!1});function w(T){var P,R;let{value:A}=T;if(A){const O=(R=(P=d.value)==null?void 0:P.$el.parentElement)==null?void 0:R.querySelector(".v-tab--selected .v-tab__slider"),z=a.value;if(!O||!z)return;const $=getComputedStyle(O).color,F=O.getBoundingClientRect(),H=z.getBoundingClientRect(),Y=b.value?"x":"y",te=b.value?"X":"Y",Q=b.value?"right":"bottom",ce=b.value?"width":"height",oe=F[Y],he=H[Y],pe=oe>he?F[Q]-H[Q]:F[Y]-H[Y],_e=Math.sign(pe)>0?b.value?"right":"bottom":Math.sign(pe)<0?b.value?"left":"top":"center",be=(Math.abs(pe)+(Math.sign(pe)<0?F[ce]:H[ce]))/Math.max(F[ce],H[ce])||0,je=F[ce]/H[ce]||0,Ve=1.5;zu(z,{backgroundColor:[$,"currentcolor"],transform:[`translate${te}(${pe}px) scale${te}(${je})`,`translate${te}(${pe/Ve}px) scale${te}(${(be-1)/Ve+1})`,"none"],transformOrigin:Array(3).fill(_e)},{duration:225,easing:Hf})}}return _t(()=>{const T=Mn.filterProps(e);return U(Mn,lt({symbol:q0,ref:d,class:["v-tab",e.class],style:e.style,tabindex:C.value?0:-1,role:"tab","aria-selected":String(C.value),active:!1},T,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":w}),{...r,default:()=>{var A;return X(Wt,null,[((A=r.default)==null?void 0:A.call(r))??e.text,!e.hideSlider&&X("div",{ref:a,class:gt(["v-tab__slider",c.value]),style:Bt(f.value)},null)])}})}),Tr({},d)}}),d5=Ue({...di(Xg(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),tI=ht()({name:"VTabsWindow",props:d5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=bn(q0,null),c=tn(e,"modelValue"),f=ne({get(){var d;return c.value!=null||!s?c.value:(d=s.items.value.find(a=>s.selected.value.includes(a.id)))==null?void 0:d.value},set(d){c.value=d}});return _t(()=>{const d=Gu.filterProps(e);return U(Gu,lt({_as:"VTabsWindow"},d,{modelValue:f.value,"onUpdate:modelValue":a=>f.value=a,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),r)}),{}}}),h5=Ue({...Jg()},"VTabsWindowItem"),nI=ht()({name:"VTabsWindowItem",props:h5(),setup(e,n){let{slots:r}=n;return _t(()=>{const s=Hu.filterProps(e);return U(Hu,lt({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),r)}),{}}});function f5(e){return e?e.map(n=>Uf(n)?n:{text:n,value:n}):[]}const m5=Ue({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...y0({mandatory:"force",selectedClass:"v-tab-item--selected"}),...fr(),...xn()},"VTabs"),p5=ht()({name:"VTabs",props:m5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=tn(e,"modelValue"),f=ne(()=>f5(e.items)),{densityClasses:d}=aa(e),{backgroundColorClasses:a,backgroundColorStyles:b}=ti(()=>e.bgColor),{scopeId:C}=sc();return Li({VTab:{color:Me(()=>e.color),direction:Me(()=>e.direction),stacked:Me(()=>e.stacked),fixed:Me(()=>e.fixedTabs),sliderColor:Me(()=>e.sliderColor),hideSlider:Me(()=>e.hideSlider)}}),_t(()=>{const w=Jf.filterProps(e),T=!!(s.window||e.items.length>0);return X(Wt,null,[U(Jf,lt(w,{modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,a.value,e.class],style:[{"--v-tabs-height":Gt(e.height)},b.value,e.style],role:"tablist",symbol:q0},C,r),{default:()=>{var A;return[((A=s.default)==null?void 0:A.call(s))??f.value.map(P=>{var R;return((R=s.tab)==null?void 0:R.call(s,{item:P}))??U(eI,lt(P,{key:P.text,value:P.value}),{default:s[`tab.${P.value}`]?()=>{var O;return(O=s[`tab.${P.value}`])==null?void 0:O.call(s,{item:P})}:void 0})})]}}),T&&U(tI,lt({modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,key:"tabs-window"},C),{default:()=>{var A;return[f.value.map(P=>{var R;return((R=s.item)==null?void 0:R.call(s,{item:P}))??U(nI,{value:P.value},{default:()=>{var O;return(O=s[`item.${P.value}`])==null?void 0:O.call(s,{item:P})}})}),(A=s.window)==null?void 0:A.call(s)]}})])}),{}}}),g5=Ue({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Do(),...wm()},"VTextarea"),v5=ht()({name:"VTextarea",directives:{vIntersect:Co},inheritAttrs:!1,props:g5(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const f=tn(e,"modelValue"),{isFocused:d,focus:a,blur:b}=Mo(e),{onIntersect:C}=DP(e),w=ne(()=>typeof e.counterValue=="function"?e.counterValue(f.value):(f.value||"").toString().length),T=ne(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),A=et(),P=et(),R=Dt(""),O=et(),z=ne(()=>e.persistentPlaceholder||d.value||e.active);function $(){var _e;O.value!==document.activeElement&&((_e=O.value)==null||_e.focus()),d.value||a()}function F(_e){$(),s("click:control",_e)}function H(_e){s("mousedown:control",_e)}function Y(_e){_e.stopPropagation(),$(),Dn(()=>{f.value="",Fg(e["onClick:clear"],_e)})}function te(_e){var be;const ae=_e.target;if(f.value=ae.value,(be=e.modelModifiers)!=null&&be.trim){const je=[ae.selectionStart,ae.selectionEnd];Dn(()=>{ae.selectionStart=je[0],ae.selectionEnd=je[1]})}}const Q=et(),ce=et(Number(e.rows)),oe=ne(()=>["plain","underlined"].includes(e.variant));Ri(()=>{e.autoGrow||(ce.value=Number(e.rows))});function he(){e.autoGrow&&Dn(()=>{if(!Q.value||!P.value)return;const _e=getComputedStyle(Q.value),ae=getComputedStyle(P.value.$el),be=parseFloat(_e.getPropertyValue("--v-field-padding-top"))+parseFloat(_e.getPropertyValue("--v-input-padding-top"))+parseFloat(_e.getPropertyValue("--v-field-padding-bottom")),je=Q.value.scrollHeight,Ve=parseFloat(_e.lineHeight),Fe=Math.max(parseFloat(e.rows)*Ve+be,parseFloat(ae.getPropertyValue("--v-input-control-height"))),Ke=parseFloat(e.maxRows)*Ve+be||1/0,mt=ci(je??0,Fe,Ke);ce.value=Math.floor((mt-be)/Ve),R.value=Gt(mt)})}zi(he),Ot(f,he),Ot(()=>e.rows,he),Ot(()=>e.maxRows,he),Ot(()=>e.density,he),Ot(ce,_e=>{s("update:rows",_e)});let pe;return Ot(Q,_e=>{_e?(pe=new ResizeObserver(he),pe.observe(Q.value)):pe==null||pe.disconnect()}),Vr(()=>{pe==null||pe.disconnect()}),_t(()=>{const _e=!!(c.counter||e.counter||e.counterValue),ae=!!(_e||c.details),[be,je]=Al(r),{modelValue:Ve,...Fe}=qr.filterProps(e),Ke=Pl.filterProps(e);return U(qr,lt({ref:A,modelValue:f.value,"onUpdate:modelValue":mt=>f.value=mt,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":oe.value},e.class],style:e.style},be,Fe,{centerAffix:ce.value===1&&!oe.value,focused:d.value}),{...c,default:mt=>{let{id:ft,isDisabled:ze,isDirty:Se,isReadonly:Ie,isValid:Qe}=mt;return U(Pl,lt({ref:P,style:{"--v-textarea-control-height":R.value},onClick:F,onMousedown:H,"onClick:clear":Y,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ke,{id:ft.value,active:z.value||Se.value,centerAffix:ce.value===1&&!oe.value,dirty:Se.value||e.dirty,disabled:ze.value,focused:d.value,error:Qe.value===!1}),{...c,default:jt=>{let{props:{class:Tt,...xt}}=jt;return X(Wt,null,[e.prefix&&X("span",{class:"v-text-field__prefix"},[e.prefix]),Di(X("textarea",lt({ref:O,class:Tt,value:f.value,onInput:te,autofocus:e.autofocus,readonly:Ie.value,disabled:ze.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:$,onBlur:b},xt,je),null),[[Co,{handler:C},null,{once:!0}]]),e.autoGrow&&Di(X("textarea",{class:gt([Tt,"v-textarea__sizer"]),id:`${xt.id}-sizer`,"onUpdate:modelValue":Re=>f.value=Re,ref:Q,readonly:!0,"aria-hidden":"true"},null),[[GD,f.value]]),e.suffix&&X("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:ae?mt=>{var ft;return X(Wt,null,[(ft=c.details)==null?void 0:ft.call(c,mt),_e&&X(Wt,null,[X("span",null,null),U(Kg,{active:e.persistentCounter||d.value,value:w.value,max:T.value,disabled:e.disabled},c.counter)])])}:void 0})}),Tr({},A,P,O)}}),y5=Ue({withBackground:Boolean,...Zt(),...Un(),...xn()},"VThemeProvider"),_5=ht()({name:"VThemeProvider",props:y5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e);return()=>{var c;return e.withBackground?U(e.tag,{class:gt(["v-theme-provider",s.value,e.class]),style:Bt(e.style)},{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r)]}}):(c=r.default)==null?void 0:c.call(r)}}}),b5=Ue({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:an,iconColor:String,lineColor:String,...Zt(),...vi(),...Ks(),...nr()},"VTimelineDivider"),x5=ht()({name:"VTimelineDivider",props:b5(),setup(e,n){let{slots:r}=n;const{sizeClasses:s,sizeStyles:c}=qd(e,"v-timeline-divider__dot"),{backgroundColorStyles:f,backgroundColorClasses:d}=ti(()=>e.dotColor),{roundedClasses:a}=Vi(e,"v-timeline-divider__dot"),{elevationClasses:b}=kr(e),{backgroundColorClasses:C,backgroundColorStyles:w}=ti(()=>e.lineColor);return _t(()=>X("div",{class:gt(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Bt(e.style)},[X("div",{class:gt(["v-timeline-divider__before",C.value]),style:Bt(w.value)},null),!e.hideDot&&X("div",{key:"dot",class:gt(["v-timeline-divider__dot",b.value,a.value,s.value]),style:Bt(c.value)},[X("div",{class:gt(["v-timeline-divider__inner-dot",d.value,a.value]),style:Bt(f.value)},[r.default?U(Sn,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},r.default):U(Xn,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),X("div",{class:gt(["v-timeline-divider__after",C.value]),style:Bt(w.value)},null)])),{}}}),iI=Ue({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:an,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Zt(),...Zi(),...nr(),...vi(),...Ks(),...xn()},"VTimelineItem"),w5=ht()({name:"VTimelineItem",props:iI(),setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),c=Dt(0),f=et();return Ot(f,d=>{var a;d&&(c.value=((a=d.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:a.getBoundingClientRect().width)??0)},{flush:"post"}),_t(()=>{var d,a;return X("div",{class:gt(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Bt([{"--v-timeline-dot-size":Gt(c.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Gt(e.lineInset)})`:Gt(0)},e.style])},[X("div",{class:"v-timeline-item__body",style:Bt(s.value)},[(d=r.default)==null?void 0:d.call(r)]),U(x5,{ref:f,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:r.icon}),e.density!=="compact"&&X("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((a=r.opposite)==null?void 0:a.call(r))])])}),{}}}),S5=Ue({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Io(iI({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Zt(),...fr(),...xn(),...Un()},"VTimeline"),C5=ht()({name:"VTimeline",props:S5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Jn(e),{densityClasses:c}=aa(e),{rtlClasses:f}=tr();Li({VTimelineDivider:{lineColor:Me(()=>e.lineColor)},VTimelineItem:{density:Me(()=>e.density),dotColor:Me(()=>e.dotColor),fillDot:Me(()=>e.fillDot),hideOpposite:Me(()=>e.hideOpposite),iconColor:Me(()=>e.iconColor),lineColor:Me(()=>e.lineColor),lineInset:Me(()=>e.lineInset),size:Me(()=>e.size)}});const d=ne(()=>{const b=e.side?e.side:e.density!=="default"?"end":null;return b&&`v-timeline--side-${b}`}),a=ne(()=>{const b=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return b;case"start":return b[0];case"end":return b[1];default:return null}});return _t(()=>U(e.tag,{class:gt(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,a.value,{"v-timeline--inset-line":!!e.lineInset},s.value,c.value,d.value,f.value,e.class]),style:Bt([{"--v-timeline-line-thickness":Gt(e.lineThickness)},e.style])},r)),{}}});function Vu(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(n,"0")}const k5=Ue({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),db=ht()({name:"VTimePickerClock",props:k5(),emits:{change:e=>!0,input:e=>!0},setup(e,n){let{emit:r}=n;const s=et(null),c=et(null),f=et(void 0),d=et(!1),a=et(null),b=et(null),C=Kk(ft=>r("change",ft),750),{textColorClasses:w,textColorStyles:T}=zr(()=>e.color),{backgroundColorClasses:A,backgroundColorStyles:P}=ti(()=>e.color),R=ne(()=>e.max-e.min+1),O=ne(()=>e.double?R.value/2:R.value),z=ne(()=>360/O.value),$=ne(()=>z.value*Math.PI/180),F=ne(()=>e.modelValue==null?e.min:e.modelValue),H=ne(()=>.62),Y=ne(()=>{const ft=[];for(let ze=e.min;ze<=e.max;ze=ze+e.step)ft.push(ze);return ft});Ot(()=>e.modelValue,ft=>{f.value=ft});function te(ft){f.value!==ft&&(f.value=ft),r("input",ft)}function Q(ft){return!e.allowedValues||e.allowedValues(ft)}function ce(ft){if(!e.scrollable||e.disabled)return;ft.preventDefault();const ze=Math.sign(-ft.deltaY||1);let Se=F.value;do Se=Se+ze,Se=(Se-e.min+R.value)%R.value+e.min;while(!Q(Se)&&Se!==F.value);Se!==e.displayedValue&&te(Se),C(Se)}function oe(ft){return e.double&&ft-e.min>=O.value}function he(ft){return oe(ft)?H.value:1}function pe(ft){const ze=e.rotate*Math.PI/180;return{x:Math.sin((ft-e.min)*$.value+ze)*he(ft),y:-Math.cos((ft-e.min)*$.value+ze)*he(ft)}}function _e(ft,ze){const Se=(Math.round(ft/z.value)+(ze?O.value:0))%R.value+e.min;return ft<360-z.value/2?Se:ze?e.max-O.value+1:e.min}function ae(ft){const{x:ze,y:Se}=pe(ft);return{left:`${Math.round(50+ze*50)}%`,top:`${Math.round(50+Se*50)}%`}}function be(ft,ze){const Se=ze.x-ft.x,Ie=ze.y-ft.y;return Math.sqrt(Se*Se+Ie*Ie)}function je(ft,ze){const Se=2*Math.atan2(ze.y-ft.y-be(ft,ze),ze.x-ft.x);return Math.abs(Se*180/Math.PI)}function Ve(ft){a.value===null&&(a.value=ft),b.value=ft,te(ft)}function Fe(ft){var re,ue;if(ft.preventDefault(),!d.value&&ft.type!=="click"||!s.value)return;const{width:ze,top:Se,left:Ie}=(re=s.value)==null?void 0:re.getBoundingClientRect(),{width:Qe}=((ue=c.value)==null?void 0:ue.getBoundingClientRect())??{width:0},{clientX:jt,clientY:Tt}="touches"in ft?ft.touches[0]:ft,xt={x:ze/2,y:-ze/2},Re={x:jt-Ie,y:Se-Tt},vt=Math.round(je(xt,Re)-e.rotate+360)%360,st=e.double&&be(xt,Re)<(Qe+Qe*H.value)/4,Ye=Math.ceil(15/z.value);let St;for(let Le=0;Le<Ye;Le++)if(St=_e(vt+Le*z.value,st),Q(St)||(St=_e(vt-Le*z.value,st),Q(St)))return Ve(St)}function Ke(ft){e.disabled||(ft.preventDefault(),window.addEventListener("mousemove",Fe),window.addEventListener("touchmove",Fe),window.addEventListener("mouseup",mt),window.addEventListener("touchend",mt),a.value=null,b.value=null,d.value=!0,Fe(ft))}function mt(ft){ft.stopPropagation(),window.removeEventListener("mousemove",Fe),window.removeEventListener("touchmove",Fe),window.removeEventListener("mouseup",mt),window.removeEventListener("touchend",mt),d.value=!1,b.value!==null&&Q(b.value)&&r("change",b.value)}_t(()=>X("div",{class:gt([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Ke,onTouchstart:Ke,onWheel:ce,ref:s},[X("div",{class:"v-time-picker-clock__inner",ref:c},[X("div",{class:gt([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":oe(e.modelValue)},w.value]),style:Bt([{transform:`rotate(${e.rotate+z.value*(F.value-e.min)}deg) scaleY(${he(F.value)})`},T.value])},null),Y.value.map(ft=>{const ze=ft===F.value;return X("div",{class:gt([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":ze,"v-time-picker-clock__item--disabled":e.disabled||!Q(ft)},ze&&A.value]),style:Bt([ae(ft),ze&&P.value])},[X("span",null,[e.format(ft)])])})])]))}}),T5=Ue({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),hb=ht()({name:"VTimePickerControls",props:T5(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=gi();return _t(()=>{let f=e.hour;return e.ampm&&(f=f?(f-1)%12+1:12),X("div",{class:"v-time-picker-controls"},[X("div",{class:gt({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[U(Mn,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:gt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":Vu(`${f}`),onClick:()=>r("update:viewMode","hour")},null),X("span",{class:gt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[nn(":")]),U(Mn,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:gt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":Vu(e.minute),onClick:()=>r("update:viewMode","minute")},null),e.useSeconds&&X("span",{class:gt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[nn(":")]),e.useSeconds&&U(Mn,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>r("update:viewMode","second"),class:gt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":Vu(e.second)},null),e.ampm&&X("div",{class:"v-time-picker-controls__ampm"},[U(Mn,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:gt({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:c("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?r("update:period","am"):null},null),U(Mn,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:gt({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:c("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?r("update:period","pm"):null},null)])])])}),{}}}),P5=Oa(24),rI=Oa(12),I5=rI.map(e=>e+12);Oa(60);const A5=Ue({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...di(Qg({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),E5=ht()({name:"VTimePicker",props:A5(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=gi(),f=et(null),d=et(null),a=et(null),b=et(null),C=et(null),w=et(null),T=et("am"),A=tn(e,"viewMode","hour"),P=et(null),R=et(null),O=ne(()=>{let ae;if(e.allowedHours instanceof Array?ae=Ve=>e.allowedHours.includes(Ve):ae=e.allowedHours,!e.min&&!e.max)return ae;const be=e.min?Number(e.min.split(":")[0]):0,je=e.max?Number(e.max.split(":")[0]):23;return Ve=>Ve>=Number(be)&&Ve<=Number(je)&&(!ae||ae(Ve))}),z=ne(()=>{let ae;const be=!O.value||f.value===null||O.value(f.value);if(e.allowedMinutes instanceof Array?ae=ze=>e.allowedMinutes.includes(ze):ae=e.allowedMinutes,!e.min&&!e.max)return be?ae:()=>!1;const[je,Ve]=e.min?e.min.split(":").map(Number):[0,0],[Fe,Ke]=e.max?e.max.split(":").map(Number):[23,59],mt=je*60+Number(Ve),ft=Fe*60+Number(Ke);return ze=>{const Se=60*f.value+ze;return Se>=mt&&Se<=ft&&be&&(!ae||ae(ze))}}),$=ne(()=>{let ae;const je=(!O.value||f.value===null||O.value(f.value))&&(!z.value||d.value===null||z.value(d.value));if(e.allowedSeconds instanceof Array?ae=Qe=>e.allowedSeconds.includes(Qe):ae=e.allowedSeconds,!e.min&&!e.max)return je?ae:()=>!1;const[Ve,Fe,Ke]=e.min?e.min.split(":").map(Number):[0,0,0],[mt,ft,ze]=e.max?e.max.split(":").map(Number):[23,59,59],Se=Ve*3600+Fe*60+Number(Ke||0),Ie=mt*3600+ft*60+Number(ze||0);return Qe=>{const jt=3600*f.value+60*d.value+Qe;return jt>=Se&&jt<=Ie&&je&&(!ae||ae(Qe))}}),F=ne(()=>e.format==="ampm");Ot(()=>e.modelValue,ae=>ce(ae)),zi(()=>{ce(e.modelValue)});function H(){return f.value!=null&&d.value!=null&&(!e.useSeconds||a.value!=null)?`${Vu(f.value)}:${Vu(d.value)}`+(e.useSeconds?`:${Vu(a.value)}`:""):null}function Y(){const ae=H();ae!==null&&r("update:modelValue",ae)}function te(ae){return ae?(ae-1)%12+1:12}function Q(ae,be){return ae%12+(be==="pm"?12:0)}function ce(ae){if(ae==null||ae==="")f.value=null,d.value=null,a.value=null;else if(ae instanceof Date)f.value=ae.getHours(),d.value=ae.getMinutes(),a.value=ae.getSeconds();else{const[be,,je,,Ve,Fe]=ae.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);f.value=Fe?Q(parseInt(be,10),Fe):parseInt(be,10),d.value=parseInt(je,10),a.value=parseInt(Ve||0,10)}T.value=f.value==null||f.value<12?"am":"pm"}function oe(ae,be){const je=O.value;if(!je)return be;const Ve=F.value?be<12?rI:I5:P5;return((Ve.find(Ke=>je((Ke+be)%Ve.length+Ve[0]))||0)+be)%Ve.length+Ve[0]}function he(ae){if(T.value=ae,f.value!=null){const be=f.value+(T.value==="am"?-12:12);f.value=oe("hour",be)}return r("update:period",ae),Y(),!0}function pe(ae){A.value==="hour"?f.value=F.value?Q(ae,T.value):ae:A.value==="minute"?d.value=ae:a.value=ae}function _e(ae){switch(A.value||"hour"){case"hour":r("update:hour",ae);break;case"minute":r("update:minute",ae);break;case"second":r("update:second",ae);break}const be=f.value!==null&&d.value!==null&&(e.useSeconds?a.value!==null:!0);A.value==="hour"?A.value="minute":e.useSeconds&&A.value==="minute"&&(A.value="second"),!(f.value===b.value&&d.value===C.value&&(!e.useSeconds||a.value===w.value)||H()===null)&&(b.value=f.value,C.value=d.value,e.useSeconds&&(w.value=a.value),be&&Y())}_t(()=>{const ae=Fd.filterProps(e),be=hb.filterProps(e),je=db.filterProps(di(e,["format","modelValue","min","max"]));return U(Fd,lt(ae,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>{var Ve;return((Ve=s.title)==null?void 0:Ve.call(s))??X("div",{class:"v-time-picker__title"},[c(e.title)])},header:()=>U(hb,lt(be,{ampm:F.value,hour:f.value,minute:d.value,period:T.value,second:a.value,viewMode:A.value,"onUpdate:period":Ve=>he(Ve),"onUpdate:viewMode":Ve=>A.value=Ve,ref:P}),null),default:()=>U(db,lt(je,{allowedValues:A.value==="hour"?O.value:A.value==="minute"?z.value:$.value,double:A.value==="hour"&&!F.value,format:A.value==="hour"?F.value?te:Ve=>Ve:Ve=>Vu(Ve,2),max:A.value==="hour"?F.value&&T.value==="am"?11:23:59,min:A.value==="hour"&&F.value&&T.value==="pm"?12:0,size:20,step:A.value==="hour"?1:5,modelValue:A.value==="hour"?f.value:A.value==="minute"?d.value:a.value,onChange:_e,onInput:pe,ref:R}),null),actions:s.actions})})}}),M5=Ue({...Zt(),...es({variant:"text"})},"VToolbarItems"),D5=ht()({name:"VToolbarItems",props:M5(),setup(e,n){let{slots:r}=n;return Li({VBtn:{color:Me(()=>e.color),height:"inherit",variant:Me(()=>e.variant)}}),_t(()=>{var s;return X("div",{class:gt(["v-toolbar-items",e.class]),style:Bt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),R5=Ue({id:String,interactive:Boolean,text:String,...di(xm({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),aI=ht()({name:"VTooltip",props:R5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tn(e,"modelValue"),{scopeId:c}=sc(),f=va(),d=Me(()=>e.id||`v-tooltip-${f}`),a=et(),b=ne(()=>e.location.split(" ").length>1?e.location:e.location+" center"),C=ne(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),w=Me(()=>e.transition!=null?e.transition:s.value?"scale-transition":"fade-transition"),T=ne(()=>lt({"aria-describedby":d.value},e.activatorProps));return _t(()=>{const A=qs.filterProps(e);return U(qs,lt({ref:a,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:d.value},A,{modelValue:s.value,"onUpdate:modelValue":P=>s.value=P,transition:w.value,absolute:!0,location:b.value,origin:C.value,persistent:!0,role:"tooltip",activatorProps:T.value,_disableGlobalStack:!0},c),{activator:r.activator,default:function(){var z;for(var P=arguments.length,R=new Array(P),O=0;O<P;O++)R[O]=arguments[O];return((z=r.default)==null?void 0:z.call(r,...R))??e.text}})}),Tr({},a)}}),L5=Ue({...di(mP({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),fb=ht()({name:"VTreeviewGroup",props:L5(),setup(e,n){let{slots:r}=n;const s=et(),c=ne(()=>{var d;return(d=s.value)!=null&&d.isOpen?e.collapseIcon:e.expandIcon}),f=ne(()=>{var d;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(d=s.value)==null?void 0:d.isOpen,toggleIcon:c.value}}});return _t(()=>{const d=em.filterProps(e);return U(em,lt(d,{ref:s,class:["v-treeview-group",e.class],subgroup:!0}),{...r,activator:r.activator?a=>X(Wt,null,[U(Sn,{defaults:f.value},{default:()=>{var b;return[(b=r.activator)==null?void 0:b.call(r,a)]}})]):void 0})}),{}}}),sI=Symbol.for("vuetify:v-treeview"),oI=Ue({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:an,...vP({slim:!0})},"VTreeviewItem"),mb=ht()({name:"VTreeviewItem",props:oI(),emits:{toggleExpand:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=bn(sI,{visibleIds:et()}).visibleIds,f=et(),d=ne(()=>{var A,P;return((A=f.value)==null?void 0:A.root.activatable.value)&&((P=f.value)==null?void 0:P.isGroupActivator)}),a=ne(()=>{var A,P;return((A=f.value)==null?void 0:A.link.isClickable.value)||e.value!=null&&!!((P=f.value)!=null&&P.list)}),b=ne(()=>!e.disabled&&e.link!==!1&&(e.link||a.value||d.value)),C=ne(()=>{var A;return c.value&&!c.value.has(fn((A=f.value)==null?void 0:A.id))});function w(A){var P,R;b.value&&d.value&&((R=f.value)==null||R.activate(!((P=f.value)!=null&&P.isActivated),A))}function T(A){A.preventDefault(),A.stopPropagation(),s("toggleExpand",A)}return _t(()=>{var R;const A=ys.filterProps(e),P=r.prepend||e.toggleIcon||e.indentLines;return U(ys,lt({ref:f},A,{active:((R=f.value)==null?void 0:R.isActivated)||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":d.value,"v-treeview-item--filtered":C.value},e.class],ripple:!1,onClick:w}),{...r,prepend:P?O=>{var z;return X(Wt,null,[e.indentLines&&e.indentLines.length>0?X("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map($=>X("div",{class:gt(`v-treeview-indent-line v-treeview-indent-line--${$}`)},null))]):"",!e.hideActions&&U(CP,{start:!0},{default:()=>[e.toggleIcon?U(Mn,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:T},{loader:()=>U(Uu,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):X("div",{class:"v-treeview-item__level"},null)]}),(z=r.prepend)==null?void 0:z.call(r,O)])}:void 0})}),Tr({},f)}}),lI=Ue({disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:an,default:"$checkboxIndeterminate"},falseIcon:an,trueIcon:an,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Io(oI(),["hideActions"]),...fr()},"VTreeviewChildren"),kg=ht()({name:"VTreeviewChildren",props:lI(),setup(e,n){let{slots:r}=n;const s=wr(new Set),c=et([]),f=ne(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function d(b){var C,w;try{if(!((C=e.items)!=null&&C.length)||!e.loadChildren)return;((w=b==null?void 0:b.children)==null?void 0:w.length)===0&&(s.add(b.value),await e.loadChildren(b.raw))}finally{s.delete(b.value)}}function a(b,C){e.selectable&&b(C)}return()=>{var b,C;return((b=r.default)==null?void 0:b.call(r))??((C=e.items)==null?void 0:C.map((w,T,A)=>{var oe,he;const{children:P,props:R}=w,O=s.has(w.value),z=!!((oe=A.at(T+1))!=null&&oe.children),$=((he=e.path)==null?void 0:he.length)??0,F=A.length-1===T,H={index:T,depth:$,isFirst:T===0,isLast:F,path:[...e.path,T],hideAction:e.hideActions},Y=NR({depth:$,isLast:F,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),te={prepend:pe=>{var _e;return X(Wt,null,[e.selectable&&(!P||P&&!["leaf","single-leaf"].includes(e.selectStrategy))&&X("div",null,[U(Hs,{key:w.value,modelValue:pe.isSelected,disabled:e.disabled,loading:O,color:e.selectedColor,density:e.density,indeterminate:pe.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":ae=>a(pe.select,ae),onClick:ae=>ae.stopPropagation(),onKeydown:ae=>{["Enter","Space"].includes(ae.key)&&(ae.stopPropagation(),a(pe.select,pe.isSelected))}},null)]),(_e=r.prepend)==null?void 0:_e.call(r,{...pe,...H,item:w.raw,internalItem:w})])},append:r.append?pe=>{var _e;return(_e=r.append)==null?void 0:_e.call(r,{...pe,...H,item:w.raw,internalItem:w})}:void 0,title:r.title?pe=>{var _e;return(_e=r.title)==null?void 0:_e.call(r,{...pe,item:w.raw,internalItem:w})}:void 0,subtitle:r.subtitle?pe=>{var _e;return(_e=r.subtitle)==null?void 0:_e.call(r,{...pe,item:w.raw,internalItem:w})}:void 0},Q=fb.filterProps(R),ce=kg.filterProps({...e,...H});return P?U(fb,lt(Q,{value:e.returnObject?w.raw:Q==null?void 0:Q.value,rawId:Q==null?void 0:Q.value}),{activator:pe=>{let{props:_e}=pe;const ae={...R,..._e,value:R==null?void 0:R.value,onToggleExpand:[()=>d(w),_e.onClick],onClick:f.value?[()=>d(w),_e.onClick]:()=>{var be,je;return a((be=c.value[T])==null?void 0:be.select,!((je=c.value[T])!=null&&je.isSelected))}};return U(mb,lt({ref:be=>c.value[T]=be},ae,{hideActions:e.hideActions,indentLines:Y.node,value:e.returnObject?w.raw:R.value,loading:O}),te)},default:()=>U(kg,lt(ce,{items:P,indentLinesVariant:e.indentLinesVariant,parentIndentLines:Y.children,isLastGroup:z,returnObject:e.returnObject}),r)}):Ny(r.item,{props:R,item:w.raw,internalItem:w},()=>w.type==="divider"?Ny(r.divider,{props:w.raw},()=>U($a,w.props,null)):w.type==="subheader"?Ny(r.subheader,{props:w.raw},()=>U(Xd,w.props,null)):U(mb,lt(R,{hideActions:e.hideActions,indentLines:Y.leaf,value:e.returnObject?fn(w.raw):R.value}),te))}))}}});function uI(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const r of e)n.push(r),r.children&&uI(r.children,n);return n}const z5=Ue({fluid:Boolean,openAll:Boolean,indentLines:[Boolean,String],search:String,...Jd({filterKeys:["title"]}),...di(lI(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...di(SP({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),V5=ht()({name:"VTreeview",props:z5(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:r,emit:s}=n;const{items:c}=wP(e),f=Me(()=>e.activeColor),d=Me(()=>e.baseColor),a=Me(()=>e.color),b=tn(e,"activated"),C=tn(e,"selected"),w=ne({get:()=>e.modelValue??C.value,set(H){C.value=H,s("update:modelValue",H)}}),T=et(),A=ne(()=>e.openAll?F(c.value):e.opened),P=ne(()=>uI(c.value)),R=Me(()=>e.search),{filteredItems:O}=Qd(e,P,R),z=ne(()=>{var Y;if(!R.value)return null;const H=(Y=T.value)==null?void 0:Y.getPath;return H?new Set(O.value.flatMap(te=>{const Q=e.returnObject?te.raw:te.props.value;return[...H(Q),...$(Q)].map(fn)})):null});function $(H){var Q,ce;const Y=[],te=(((Q=T.value)==null?void 0:Q.children.get(H))??[]).slice();for(;te.length;){const oe=te.shift();oe&&(Y.push(oe),te.push(...(((ce=T.value)==null?void 0:ce.children.get(oe))??[]).slice()))}return Y}function F(H){let Y=[];for(const te of H)te.children&&(Y.push(e.returnObject?fn(te.raw):te.value),te.children&&(Y=Y.concat(F(te.children))));return Y}return ri(sI,{visibleIds:z}),Li({VTreeviewGroup:{activeColor:f,baseColor:d,color:a,collapseIcon:Me(()=>e.collapseIcon),expandIcon:Me(()=>e.expandIcon)},VTreeviewItem:{activeClass:Me(()=>e.activeClass),activeColor:f,baseColor:d,color:a,density:Me(()=>e.density),disabled:Me(()=>e.disabled),lines:Me(()=>e.lines),variant:Me(()=>e.variant)}}),_t(()=>{const H=Bd.filterProps(e),Y=kg.filterProps(e),te=typeof e.indentLines=="boolean"?"default":e.indentLines;return U(Bd,lt({ref:T},H,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],"open-strategy":"multiple",style:e.style,opened:A.value,activated:b.value,"onUpdate:activated":Q=>b.value=Q,selected:w.value,"onUpdate:selected":Q=>w.value=Q}),{default:()=>[U(kg,lt(Y,{density:e.density,returnObject:e.returnObject,items:c.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:te}),r)]})}),{}}}),B5=ht()({name:"VValidation",props:eP(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tP(e,"validation");return()=>{var c;return(c=r.default)==null?void 0:c.call(r,s)}}}),O5=Object.freeze(Object.defineProperty({__proto__:null,VAlert:Yz,VAlertTitle:WT,VApp:iz,VAppBar:Sz,VAppBarNavIcon:Gz,VAppBarTitle:Hz,VAutocomplete:fB,VAvatar:Ja,VBadge:pB,VBanner:yB,VBannerActions:BP,VBannerText:OP,VBottomNavigation:bB,VBottomSheet:wB,VBreadcrumbs:TB,VBreadcrumbsDivider:$P,VBreadcrumbsItem:jP,VBtn:Mn,VBtnGroup:j_,VBtnToggle:Az,VCard:MB,VCardActions:NP,VCardItem:HP,VCardSubtitle:UP,VCardText:qP,VCardTitle:GP,VCarousel:$B,VCarouselItem:NB,VCheckbox:oV,VCheckboxBtn:Hs,VChip:Yd,VChipGroup:hV,VClassIcon:u0,VCode:UB,VCol:yF,VColorPicker:DO,VCombobox:LO,VComponentIcon:O_,VConfirmEdit:VO,VContainer:mF,VCounter:Kg,VDataIterator:qO,VDataTable:lF,VDataTableFooter:nm,VDataTableHeaders:qu,VDataTableRow:$0,VDataTableRows:Wu,VDataTableServer:hF,VDataTableVirtual:cF,VDatePicker:EF,VDatePickerControls:ib,VDatePickerHeader:rb,VDatePickerMonth:ab,VDatePickerMonths:sb,VDatePickerYears:ob,VDefaultsProvider:Sn,VDialog:K_,VDialogBottomTransition:oz,VDialogTopTransition:lz,VDialogTransition:Ug,VDivider:$a,VEmptyState:DF,VExpandTransition:Gg,VExpandXTransition:m0,VExpansionPanel:RF,VExpansionPanelText:lb,VExpansionPanelTitle:ub,VExpansionPanels:VF,VFab:OF,VFabTransition:sz,VFadeTransition:Zf,VField:Pl,VFieldLabel:xf,VFileInput:jF,VFooter:UF,VForm:HF,VHover:WF,VIcon:Xn,VImg:ko,VInfiniteScroll:KF,VInput:qr,VItem:JF,VItemGroup:XF,VKbd:e3,VLabel:Kd,VLayout:n3,VLayoutItem:r3,VLazy:s3,VLigatureIcon:NL,VList:Bd,VListGroup:em,VListImg:EV,VListItem:ys,VListItemAction:CP,VListItemMedia:RV,VListItemSubtitle:pP,VListItemTitle:gP,VListSubheader:Xd,VLocaleProvider:l3,VMain:c3,VMenu:Od,VMessages:JT,VNavigationDrawer:_3,VNoSsr:b3,VNumberInput:k3,VOtpInput:P3,VOverlay:qs,VPagination:tb,VParallax:E3,VProgressCircular:Uu,VProgressLinear:Hg,VRadio:D3,VRadioGroup:L3,VRangeSlider:V3,VRating:O3,VResponsive:F_,VRow:kF,VScaleTransition:h0,VScrollXReverseTransition:cz,VScrollXTransition:uz,VScrollYReverseTransition:hz,VScrollYTransition:dz,VSelect:I0,VSelectionControl:Tl,VSelectionControlGroup:KT,VSheet:tm,VSkeletonLoader:N3,VSlideGroup:Jf,VSlideGroupItem:U3,VSlideXReverseTransition:mz,VSlideXTransition:fz,VSlideYReverseTransition:pz,VSlideYTransition:f0,VSlider:eb,VSnackbar:cb,VSnackbarQueue:q3,VSpacer:R2,VSparkline:Y3,VSpeedDial:J3,VStepper:a5,VStepperActions:K2,VStepperHeader:Y2,VStepperItem:X2,VStepperWindow:J2,VStepperWindowItem:Q2,VSvgIcon:l0,VSwitch:o5,VSystemBar:u5,VTab:eI,VTable:Zu,VTabs:p5,VTabsWindow:tI,VTabsWindowItem:nI,VTextField:To,VTextarea:v5,VThemeProvider:_5,VTimePicker:E5,VTimePickerClock:db,VTimePickerControls:hb,VTimeline:C5,VTimelineItem:w5,VToolbar:$_,VToolbarItems:D5,VToolbarTitle:d0,VTooltip:aI,VTreeview:V5,VTreeviewGroup:fb,VTreeviewItem:mb,VValidation:B5,VVirtualScroll:Yg,VWindow:Gu,VWindowItem:Hu},Symbol.toStringTag,{value:"Module"}));function F5(e,n){const r=n.modifiers||{},s=n.value,{once:c,immediate:f,...d}=r,a=!Object.keys(d).length,{handler:b,options:C}=typeof s=="object"?s:{handler:s,options:{attributes:(d==null?void 0:d.attr)??a,characterData:(d==null?void 0:d.char)??a,childList:(d==null?void 0:d.child)??a,subtree:(d==null?void 0:d.sub)??a}},w=new MutationObserver(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=arguments.length>1?arguments[1]:void 0;b==null||b(T,A),c&&cI(e,n)});f&&(b==null||b([],w)),e._mutate=Object(e._mutate),e._mutate[n.instance.$.uid]={observer:w},w.observe(e,C)}function cI(e,n){var r;(r=e._mutate)!=null&&r[n.instance.$.uid]&&(e._mutate[n.instance.$.uid].observer.disconnect(),delete e._mutate[n.instance.$.uid])}const $5={mounted:F5,unmounted:cI};function j5(e,n){var c,f;const r=n.value,s={passive:!((c=n.modifiers)!=null&&c.active)};window.addEventListener("resize",r,s),e._onResize=Object(e._onResize),e._onResize[n.instance.$.uid]={handler:r,options:s},(f=n.modifiers)!=null&&f.quiet||r()}function N5(e,n){var c;if(!((c=e._onResize)!=null&&c[n.instance.$.uid]))return;const{handler:r,options:s}=e._onResize[n.instance.$.uid];window.removeEventListener("resize",r,s),delete e._onResize[n.instance.$.uid]}const U5={mounted:j5,unmounted:N5};function dI(e,n){const{self:r=!1}=n.modifiers??{},s=n.value,c=typeof s=="object"&&s.options||{passive:!0},f=typeof s=="function"||"handleEvent"in s?s:s.handler,d=r?e:n.arg?document.querySelector(n.arg):window;d&&(d.addEventListener("scroll",f,c),e._onScroll=Object(e._onScroll),e._onScroll[n.instance.$.uid]={handler:f,options:c,target:r?void 0:d})}function hI(e,n){var f;if(!((f=e._onScroll)!=null&&f[n.instance.$.uid]))return;const{handler:r,options:s,target:c=e}=e._onScroll[n.instance.$.uid];c.removeEventListener("scroll",r,s),delete e._onScroll[n.instance.$.uid]}function G5(e,n){n.value!==n.oldValue&&(hI(e,n),dI(e,n))}const H5={mounted:dI,unmounted:hI,updated:G5};function q5(e,n){const r=typeof e=="string"?Rt(e):e,s=W5(r,n);return{mounted:s,updated:s,unmounted(c){Gk(null,c)}}}function W5(e,n){return function(r,s,c){var T,A,P;const f=typeof n=="function"?n(s):n,d=((T=s.value)==null?void 0:T.text)??s.value??(f==null?void 0:f.text),a=Uf(s.value)?s.value:{},b=()=>d??r.textContent,C=(c.ctx===s.instance.$?(A=Z5(c,s.instance.$))==null?void 0:A.provides:(P=c.ctx)==null?void 0:P.provides)??s.instance.$.provides,w=bs(e,lt(f,a),b);w.appContext=Object.assign(Object.create(null),s.instance.$.appContext,{provides:C}),Gk(w,r)}}function Z5(e,n){const r=new Set,s=f=>{var d,a;for(const b of f){if(!b)continue;if(b===e||b.el&&e.el&&b.el===e.el)return!0;r.add(b);let C;if(b.suspense?C=s([b.ssContent]):Array.isArray(b.children)?C=s(b.children):(d=b.component)!=null&&d.vnode&&(C=s([(a=b.component)==null?void 0:a.subTree])),C)return C;r.delete(b)}return!1};if(!s([n.subTree]))return n;const c=Array.from(r).reverse();for(const f of c)if(f.component)return f.component;return n}const K5=q5(aI,e=>{var n;return{activator:"parent",location:(n=e.arg)==null?void 0:n.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value}}),Y5=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:Z_,Intersect:Co,Mutate:$5,Resize:U5,Ripple:ra,Scroll:H5,Tooltip:K5,Touch:Sg},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const xd=typeof document<"u";function fI(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function X5(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&fI(e.default)}const oi=Object.assign;function t_(e,n){const r={};for(const s in n){const c=n[s];r[s]=_s(c)?c.map(e):e(c)}return r}const Mf=()=>{},_s=Array.isArray,mI=/#/g,J5=/&/g,Q5=/\//g,e$=/=/g,t$=/\?/g,pI=/\+/g,n$=/%5B/g,i$=/%5D/g,gI=/%5E/g,r$=/%60/g,vI=/%7B/g,a$=/%7C/g,yI=/%7D/g,s$=/%20/g;function W0(e){return encodeURI(""+e).replace(a$,"|").replace(n$,"[").replace(i$,"]")}function o$(e){return W0(e).replace(vI,"{").replace(yI,"}").replace(gI,"^")}function pb(e){return W0(e).replace(pI,"%2B").replace(s$,"+").replace(mI,"%23").replace(J5,"%26").replace(r$,"`").replace(vI,"{").replace(yI,"}").replace(gI,"^")}function l$(e){return pb(e).replace(e$,"%3D")}function u$(e){return W0(e).replace(mI,"%23").replace(t$,"%3F")}function c$(e){return e==null?"":u$(e).replace(Q5,"%2F")}function rm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const d$=/\/$/,h$=e=>e.replace(d$,"");function n_(e,n,r="/"){let s,c={},f="",d="";const a=n.indexOf("#");let b=n.indexOf("?");return a<b&&a>=0&&(b=-1),b>-1&&(s=n.slice(0,b),f=n.slice(b+1,a>-1?a:n.length),c=e(f)),a>-1&&(s=s||n.slice(0,a),d=n.slice(a,n.length)),s=g$(s??n,r),{fullPath:s+(f&&"?")+f+d,path:s,query:c,hash:rm(d)}}function f$(e,n){const r=n.query?e(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function ES(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function m$(e,n,r){const s=n.matched.length-1,c=r.matched.length-1;return s>-1&&s===c&&$d(n.matched[s],r.matched[c])&&_I(n.params,r.params)&&e(n.query)===e(r.query)&&n.hash===r.hash}function $d(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function _I(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!p$(e[r],n[r]))return!1;return!0}function p$(e,n){return _s(e)?MS(e,n):_s(n)?MS(n,e):e===n}function MS(e,n){return _s(n)?e.length===n.length&&e.every((r,s)=>r===n[s]):e.length===1&&e[0]===n}function g$(e,n){if(e.startsWith("/"))return e;if(!e)return n;const r=n.split("/"),s=e.split("/"),c=s[s.length-1];(c===".."||c===".")&&s.push("");let f=r.length-1,d,a;for(d=0;d<s.length;d++)if(a=s[d],a!==".")if(a==="..")f>1&&f--;else break;return r.slice(0,f).join("/")+"/"+s.slice(d).join("/")}const hl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var am;(function(e){e.pop="pop",e.push="push"})(am||(am={}));var Df;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Df||(Df={}));function v$(e){if(!e)if(xd){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),h$(e)}const y$=/^[^#]+#/;function _$(e,n){return e.replace(y$,"#")+n}function b$(e,n){const r=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:n.behavior,left:s.left-r.left-(n.left||0),top:s.top-r.top-(n.top||0)}}const cv=()=>({left:window.scrollX,top:window.scrollY});function x$(e){let n;if("el"in e){const r=e.el,s=typeof r=="string"&&r.startsWith("#"),c=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!c)return;n=b$(c,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function DS(e,n){return(history.state?history.state.position-n:-1)+e}const gb=new Map;function w$(e,n){gb.set(e,n)}function S$(e){const n=gb.get(e);return gb.delete(e),n}let C$=()=>location.protocol+"//"+location.host;function bI(e,n){const{pathname:r,search:s,hash:c}=n,f=e.indexOf("#");if(f>-1){let a=c.includes(e.slice(f))?e.slice(f).length:1,b=c.slice(a);return b[0]!=="/"&&(b="/"+b),ES(b,"")}return ES(r,e)+s+c}function k$(e,n,r,s){let c=[],f=[],d=null;const a=({state:A})=>{const P=bI(e,location),R=r.value,O=n.value;let z=0;if(A){if(r.value=P,n.value=A,d&&d===R){d=null;return}z=O?A.position-O.position:0}else s(P);c.forEach($=>{$(r.value,R,{delta:z,type:am.pop,direction:z?z>0?Df.forward:Df.back:Df.unknown})})};function b(){d=r.value}function C(A){c.push(A);const P=()=>{const R=c.indexOf(A);R>-1&&c.splice(R,1)};return f.push(P),P}function w(){const{history:A}=window;A.state&&A.replaceState(oi({},A.state,{scroll:cv()}),"")}function T(){for(const A of f)A();f=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:b,listen:C,destroy:T}}function RS(e,n,r,s=!1,c=!1){return{back:e,current:n,forward:r,replaced:s,position:window.history.length,scroll:c?cv():null}}function T$(e){const{history:n,location:r}=window,s={value:bI(e,r)},c={value:n.state};c.value||f(s.value,{back:null,current:s.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function f(b,C,w){const T=e.indexOf("#"),A=T>-1?(r.host&&document.querySelector("base")?e:e.slice(T))+b:C$()+e+b;try{n[w?"replaceState":"pushState"](C,"",A),c.value=C}catch(P){console.error(P),r[w?"replace":"assign"](A)}}function d(b,C){const w=oi({},n.state,RS(c.value.back,b,c.value.forward,!0),C,{position:c.value.position});f(b,w,!0),s.value=b}function a(b,C){const w=oi({},c.value,n.state,{forward:b,scroll:cv()});f(w.current,w,!0);const T=oi({},RS(s.value,b,null),{position:w.position+1},C);f(b,T,!1),s.value=b}return{location:s,state:c,push:a,replace:d}}function P$(e){e=v$(e);const n=T$(e),r=k$(e,n.state,n.location,n.replace);function s(f,d=!0){d||r.pauseListeners(),history.go(f)}const c=oi({location:"",base:e,go:s,createHref:_$.bind(null,e)},n,r);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>n.state.value}),c}function I$(e){return typeof e=="string"||e&&typeof e=="object"}function xI(e){return typeof e=="string"||typeof e=="symbol"}const wI=Symbol("");var LS;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(LS||(LS={}));function jd(e,n){return oi(new Error,{type:e,[wI]:!0},n)}function po(e,n){return e instanceof Error&&wI in e&&(n==null||!!(e.type&n))}const zS="[^/]+?",A$={sensitive:!1,strict:!1,start:!0,end:!0},E$=/[.+*?^${}()[\]/\\]/g;function M$(e,n){const r=oi({},A$,n),s=[];let c=r.start?"^":"";const f=[];for(const C of e){const w=C.length?[]:[90];r.strict&&!C.length&&(c+="/");for(let T=0;T<C.length;T++){const A=C[T];let P=40+(r.sensitive?.25:0);if(A.type===0)T||(c+="/"),c+=A.value.replace(E$,"\\$&"),P+=40;else if(A.type===1){const{value:R,repeatable:O,optional:z,regexp:$}=A;f.push({name:R,repeatable:O,optional:z});const F=$||zS;if(F!==zS){P+=10;try{new RegExp(`(${F})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${R}" (${F}): `+Y.message)}}let H=O?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;T||(H=z&&C.length<2?`(?:/${H})`:"/"+H),z&&(H+="?"),c+=H,P+=20,z&&(P+=-8),O&&(P+=-20),F===".*"&&(P+=-50)}w.push(P)}s.push(w)}if(r.strict&&r.end){const C=s.length-1;s[C][s[C].length-1]+=.7000000000000001}r.strict||(c+="/?"),r.end?c+="$":r.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const d=new RegExp(c,r.sensitive?"":"i");function a(C){const w=C.match(d),T={};if(!w)return null;for(let A=1;A<w.length;A++){const P=w[A]||"",R=f[A-1];T[R.name]=P&&R.repeatable?P.split("/"):P}return T}function b(C){let w="",T=!1;for(const A of e){(!T||!w.endsWith("/"))&&(w+="/"),T=!1;for(const P of A)if(P.type===0)w+=P.value;else if(P.type===1){const{value:R,repeatable:O,optional:z}=P,$=R in C?C[R]:"";if(_s($)&&!O)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const F=_s($)?$.join("/"):$;if(!F)if(z)A.length<2&&(w.endsWith("/")?w=w.slice(0,-1):T=!0);else throw new Error(`Missing required param "${R}"`);w+=F}}return w||"/"}return{re:d,score:s,keys:f,parse:a,stringify:b}}function D$(e,n){let r=0;for(;r<e.length&&r<n.length;){const s=n[r]-e[r];if(s)return s;r++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function SI(e,n){let r=0;const s=e.score,c=n.score;for(;r<s.length&&r<c.length;){const f=D$(s[r],c[r]);if(f)return f;r++}if(Math.abs(c.length-s.length)===1){if(VS(s))return 1;if(VS(c))return-1}return c.length-s.length}function VS(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const R$={type:0,value:""},L$=/[a-zA-Z0-9_]/;function z$(e){if(!e)return[[]];if(e==="/")return[[R$]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(P){throw new Error(`ERR (${r})/"${C}": ${P}`)}let r=0,s=r;const c=[];let f;function d(){f&&c.push(f),f=[]}let a=0,b,C="",w="";function T(){C&&(r===0?f.push({type:0,value:C}):r===1||r===2||r===3?(f.length>1&&(b==="*"||b==="+")&&n(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),f.push({type:1,value:C,regexp:w,repeatable:b==="*"||b==="+",optional:b==="*"||b==="?"})):n("Invalid state to consume buffer"),C="")}function A(){C+=b}for(;a<e.length;){if(b=e[a++],b==="\\"&&r!==2){s=r,r=4;continue}switch(r){case 0:b==="/"?(C&&T(),d()):b===":"?(T(),r=1):A();break;case 4:A(),r=s;break;case 1:b==="("?r=2:L$.test(b)?A():(T(),r=0,b!=="*"&&b!=="?"&&b!=="+"&&a--);break;case 2:b===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+b:r=3:w+=b;break;case 3:T(),r=0,b!=="*"&&b!=="?"&&b!=="+"&&a--,w="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${C}"`),T(),d(),c}function V$(e,n,r){const s=M$(z$(e.path),r),c=oi(s,{record:e,parent:n,children:[],alias:[]});return n&&!c.record.aliasOf==!n.record.aliasOf&&n.children.push(c),c}function B$(e,n){const r=[],s=new Map;n=$S({strict:!1,end:!0,sensitive:!1},n);function c(T){return s.get(T)}function f(T,A,P){const R=!P,O=OS(T);O.aliasOf=P&&P.record;const z=$S(n,T),$=[O];if("alias"in T){const Y=typeof T.alias=="string"?[T.alias]:T.alias;for(const te of Y)$.push(OS(oi({},O,{components:P?P.record.components:O.components,path:te,aliasOf:P?P.record:O})))}let F,H;for(const Y of $){const{path:te}=Y;if(A&&te[0]!=="/"){const Q=A.record.path,ce=Q[Q.length-1]==="/"?"":"/";Y.path=A.record.path+(te&&ce+te)}if(F=V$(Y,A,z),P?P.alias.push(F):(H=H||F,H!==F&&H.alias.push(F),R&&T.name&&!FS(F)&&d(T.name)),CI(F)&&b(F),O.children){const Q=O.children;for(let ce=0;ce<Q.length;ce++)f(Q[ce],F,P&&P.children[ce])}P=P||F}return H?()=>{d(H)}:Mf}function d(T){if(xI(T)){const A=s.get(T);A&&(s.delete(T),r.splice(r.indexOf(A),1),A.children.forEach(d),A.alias.forEach(d))}else{const A=r.indexOf(T);A>-1&&(r.splice(A,1),T.record.name&&s.delete(T.record.name),T.children.forEach(d),T.alias.forEach(d))}}function a(){return r}function b(T){const A=$$(T,r);r.splice(A,0,T),T.record.name&&!FS(T)&&s.set(T.record.name,T)}function C(T,A){let P,R={},O,z;if("name"in T&&T.name){if(P=s.get(T.name),!P)throw jd(1,{location:T});z=P.record.name,R=oi(BS(A.params,P.keys.filter(H=>!H.optional).concat(P.parent?P.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),T.params&&BS(T.params,P.keys.map(H=>H.name))),O=P.stringify(R)}else if(T.path!=null)O=T.path,P=r.find(H=>H.re.test(O)),P&&(R=P.parse(O),z=P.record.name);else{if(P=A.name?s.get(A.name):r.find(H=>H.re.test(A.path)),!P)throw jd(1,{location:T,currentLocation:A});z=P.record.name,R=oi({},A.params,T.params),O=P.stringify(R)}const $=[];let F=P;for(;F;)$.unshift(F.record),F=F.parent;return{name:z,path:O,params:R,matched:$,meta:F$($)}}e.forEach(T=>f(T));function w(){r.length=0,s.clear()}return{addRoute:f,resolve:C,removeRoute:d,clearRoutes:w,getRoutes:a,getRecordMatcher:c}}function BS(e,n){const r={};for(const s of n)s in e&&(r[s]=e[s]);return r}function OS(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:O$(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function O$(e){const n={},r=e.props||!1;if("component"in e)n.default=r;else for(const s in e.components)n[s]=typeof r=="object"?r[s]:r;return n}function FS(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function F$(e){return e.reduce((n,r)=>oi(n,r.meta),{})}function $S(e,n){const r={};for(const s in e)r[s]=s in n?n[s]:e[s];return r}function $$(e,n){let r=0,s=n.length;for(;r!==s;){const f=r+s>>1;SI(e,n[f])<0?s=f:r=f+1}const c=j$(e);return c&&(s=n.lastIndexOf(c,s-1)),s}function j$(e){let n=e;for(;n=n.parent;)if(CI(n)&&SI(e,n)===0)return n}function CI({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function N$(e){const n={};if(e===""||e==="?")return n;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<s.length;++c){const f=s[c].replace(pI," "),d=f.indexOf("="),a=rm(d<0?f:f.slice(0,d)),b=d<0?null:rm(f.slice(d+1));if(a in n){let C=n[a];_s(C)||(C=n[a]=[C]),C.push(b)}else n[a]=b}return n}function jS(e){let n="";for(let r in e){const s=e[r];if(r=l$(r),s==null){s!==void 0&&(n+=(n.length?"&":"")+r);continue}(_s(s)?s.map(f=>f&&pb(f)):[s&&pb(s)]).forEach(f=>{f!==void 0&&(n+=(n.length?"&":"")+r,f!=null&&(n+="="+f))})}return n}function U$(e){const n={};for(const r in e){const s=e[r];s!==void 0&&(n[r]=_s(s)?s.map(c=>c==null?null:""+c):s==null?s:""+s)}return n}const G$=Symbol(""),NS=Symbol(""),dv=Symbol(""),Z0=Symbol(""),vb=Symbol("");function vf(){let e=[];function n(s){return e.push(s),()=>{const c=e.indexOf(s);c>-1&&e.splice(c,1)}}function r(){e=[]}return{add:n,list:()=>e.slice(),reset:r}}function yl(e,n,r,s,c,f=d=>d()){const d=s&&(s.enterCallbacks[c]=s.enterCallbacks[c]||[]);return()=>new Promise((a,b)=>{const C=A=>{A===!1?b(jd(4,{from:r,to:n})):A instanceof Error?b(A):I$(A)?b(jd(2,{from:n,to:A})):(d&&s.enterCallbacks[c]===d&&typeof A=="function"&&d.push(A),a())},w=f(()=>e.call(s&&s.instances[c],n,r,C));let T=Promise.resolve(w);e.length<3&&(T=T.then(C)),T.catch(A=>b(A))})}function i_(e,n,r,s,c=f=>f()){const f=[];for(const d of e)for(const a in d.components){let b=d.components[a];if(!(n!=="beforeRouteEnter"&&!d.instances[a]))if(fI(b)){const w=(b.__vccOpts||b)[n];w&&f.push(yl(w,r,s,d,a,c))}else{let C=b();f.push(()=>C.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${a}" at "${d.path}"`);const T=X5(w)?w.default:w;d.mods[a]=w,d.components[a]=T;const P=(T.__vccOpts||T)[n];return P&&yl(P,r,s,d,a,c)()}))}}return f}function US(e){const n=bn(dv),r=bn(Z0),s=ne(()=>{const b=Sr(e.to);return n.resolve(b)}),c=ne(()=>{const{matched:b}=s.value,{length:C}=b,w=b[C-1],T=r.matched;if(!w||!T.length)return-1;const A=T.findIndex($d.bind(null,w));if(A>-1)return A;const P=GS(b[C-2]);return C>1&&GS(w)===P&&T[T.length-1].path!==P?T.findIndex($d.bind(null,b[C-2])):A}),f=ne(()=>c.value>-1&&K$(r.params,s.value.params)),d=ne(()=>c.value>-1&&c.value===r.matched.length-1&&_I(r.params,s.value.params));function a(b={}){if(Z$(b)){const C=n[Sr(e.replace)?"replace":"push"](Sr(e.to)).catch(Mf);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>C),C}return Promise.resolve()}return{route:s,href:ne(()=>s.value.href),isActive:f,isExactActive:d,navigate:a}}function H$(e){return e.length===1?e[0]:e}const q$=$b({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:US,setup(e,{slots:n}){const r=wr(US(e)),{options:s}=bn(dv),c=ne(()=>({[HS(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[HS(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const f=n.default&&H$(n.default(r));return e.custom?f:bs("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:c.value},f)}}}),W$=q$;function Z$(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function K$(e,n){for(const r in n){const s=n[r],c=e[r];if(typeof s=="string"){if(s!==c)return!1}else if(!_s(c)||c.length!==s.length||s.some((f,d)=>f!==c[d]))return!1}return!0}function GS(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const HS=(e,n,r)=>e??n??r,Y$=$b({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:r}){const s=bn(vb),c=ne(()=>e.route||s.value),f=bn(NS,0),d=ne(()=>{let C=Sr(f);const{matched:w}=c.value;let T;for(;(T=w[C])&&!T.components;)C++;return C}),a=ne(()=>c.value.matched[d.value]);ri(NS,ne(()=>d.value+1)),ri(G$,a),ri(vb,c);const b=et();return Ot(()=>[b.value,a.value,e.name],([C,w,T],[A,P,R])=>{w&&(w.instances[T]=C,P&&P!==w&&C&&C===A&&(w.leaveGuards.size||(w.leaveGuards=P.leaveGuards),w.updateGuards.size||(w.updateGuards=P.updateGuards))),C&&w&&(!P||!$d(w,P)||!A)&&(w.enterCallbacks[T]||[]).forEach(O=>O(C))},{flush:"post"}),()=>{const C=c.value,w=e.name,T=a.value,A=T&&T.components[w];if(!A)return qS(r.default,{Component:A,route:C});const P=T.props[w],R=P?P===!0?C.params:typeof P=="function"?P(C):P:null,z=bs(A,oi({},R,n,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(T.instances[w]=null)},ref:b}));return qS(r.default,{Component:z,route:C})||z}}});function qS(e,n){if(!e)return null;const r=e(n);return r.length===1?r[0]:r}const X$=Y$;function J$(e){const n=B$(e.routes,e),r=e.parseQuery||N$,s=e.stringifyQuery||jS,c=e.history,f=vf(),d=vf(),a=vf(),b=Dt(hl);let C=hl;xd&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=t_.bind(null,Re=>""+Re),T=t_.bind(null,c$),A=t_.bind(null,rm);function P(Re,vt){let st,Ye;return xI(Re)?(st=n.getRecordMatcher(Re),Ye=vt):Ye=Re,n.addRoute(Ye,st)}function R(Re){const vt=n.getRecordMatcher(Re);vt&&n.removeRoute(vt)}function O(){return n.getRoutes().map(Re=>Re.record)}function z(Re){return!!n.getRecordMatcher(Re)}function $(Re,vt){if(vt=oi({},vt||b.value),typeof Re=="string"){const Le=n_(r,Re,vt.path),Ze=n.resolve({path:Le.path},vt),ut=c.createHref(Le.fullPath);return oi(Le,Ze,{params:A(Ze.params),hash:rm(Le.hash),redirectedFrom:void 0,href:ut})}let st;if(Re.path!=null)st=oi({},Re,{path:n_(r,Re.path,vt.path).path});else{const Le=oi({},Re.params);for(const Ze in Le)Le[Ze]==null&&delete Le[Ze];st=oi({},Re,{params:T(Le)}),vt.params=T(vt.params)}const Ye=n.resolve(st,vt),St=Re.hash||"";Ye.params=w(A(Ye.params));const re=f$(s,oi({},Re,{hash:o$(St),path:Ye.path})),ue=c.createHref(re);return oi({fullPath:re,hash:St,query:s===jS?U$(Re.query):Re.query||{}},Ye,{redirectedFrom:void 0,href:ue})}function F(Re){return typeof Re=="string"?n_(r,Re,b.value.path):oi({},Re)}function H(Re,vt){if(C!==Re)return jd(8,{from:vt,to:Re})}function Y(Re){return ce(Re)}function te(Re){return Y(oi(F(Re),{replace:!0}))}function Q(Re){const vt=Re.matched[Re.matched.length-1];if(vt&&vt.redirect){const{redirect:st}=vt;let Ye=typeof st=="function"?st(Re):st;return typeof Ye=="string"&&(Ye=Ye.includes("?")||Ye.includes("#")?Ye=F(Ye):{path:Ye},Ye.params={}),oi({query:Re.query,hash:Re.hash,params:Ye.path!=null?{}:Re.params},Ye)}}function ce(Re,vt){const st=C=$(Re),Ye=b.value,St=Re.state,re=Re.force,ue=Re.replace===!0,Le=Q(st);if(Le)return ce(oi(F(Le),{state:typeof Le=="object"?oi({},St,Le.state):St,force:re,replace:ue}),vt||st);const Ze=st;Ze.redirectedFrom=vt;let ut;return!re&&m$(s,Ye,st)&&(ut=jd(16,{to:Ze,from:Ye}),Se(Ye,Ye,!0,!1)),(ut?Promise.resolve(ut):pe(Ze,Ye)).catch(Je=>po(Je)?po(Je,2)?Je:ze(Je):mt(Je,Ze,Ye)).then(Je=>{if(Je){if(po(Je,2))return ce(oi({replace:ue},F(Je.to),{state:typeof Je.to=="object"?oi({},St,Je.to.state):St,force:re}),vt||Ze)}else Je=ae(Ze,Ye,!0,ue,St);return _e(Ze,Ye,Je),Je})}function oe(Re,vt){const st=H(Re,vt);return st?Promise.reject(st):Promise.resolve()}function he(Re){const vt=jt.values().next().value;return vt&&typeof vt.runWithContext=="function"?vt.runWithContext(Re):Re()}function pe(Re,vt){let st;const[Ye,St,re]=Q$(Re,vt);st=i_(Ye.reverse(),"beforeRouteLeave",Re,vt);for(const Le of Ye)Le.leaveGuards.forEach(Ze=>{st.push(yl(Ze,Re,vt))});const ue=oe.bind(null,Re,vt);return st.push(ue),xt(st).then(()=>{st=[];for(const Le of f.list())st.push(yl(Le,Re,vt));return st.push(ue),xt(st)}).then(()=>{st=i_(St,"beforeRouteUpdate",Re,vt);for(const Le of St)Le.updateGuards.forEach(Ze=>{st.push(yl(Ze,Re,vt))});return st.push(ue),xt(st)}).then(()=>{st=[];for(const Le of re)if(Le.beforeEnter)if(_s(Le.beforeEnter))for(const Ze of Le.beforeEnter)st.push(yl(Ze,Re,vt));else st.push(yl(Le.beforeEnter,Re,vt));return st.push(ue),xt(st)}).then(()=>(Re.matched.forEach(Le=>Le.enterCallbacks={}),st=i_(re,"beforeRouteEnter",Re,vt,he),st.push(ue),xt(st))).then(()=>{st=[];for(const Le of d.list())st.push(yl(Le,Re,vt));return st.push(ue),xt(st)}).catch(Le=>po(Le,8)?Le:Promise.reject(Le))}function _e(Re,vt,st){a.list().forEach(Ye=>he(()=>Ye(Re,vt,st)))}function ae(Re,vt,st,Ye,St){const re=H(Re,vt);if(re)return re;const ue=vt===hl,Le=xd?history.state:{};st&&(Ye||ue?c.replace(Re.fullPath,oi({scroll:ue&&Le&&Le.scroll},St)):c.push(Re.fullPath,St)),b.value=Re,Se(Re,vt,st,ue),ze()}let be;function je(){be||(be=c.listen((Re,vt,st)=>{if(!Tt.listening)return;const Ye=$(Re),St=Q(Ye);if(St){ce(oi(St,{replace:!0,force:!0}),Ye).catch(Mf);return}C=Ye;const re=b.value;xd&&w$(DS(re.fullPath,st.delta),cv()),pe(Ye,re).catch(ue=>po(ue,12)?ue:po(ue,2)?(ce(oi(F(ue.to),{force:!0}),Ye).then(Le=>{po(Le,20)&&!st.delta&&st.type===am.pop&&c.go(-1,!1)}).catch(Mf),Promise.reject()):(st.delta&&c.go(-st.delta,!1),mt(ue,Ye,re))).then(ue=>{ue=ue||ae(Ye,re,!1),ue&&(st.delta&&!po(ue,8)?c.go(-st.delta,!1):st.type===am.pop&&po(ue,20)&&c.go(-1,!1)),_e(Ye,re,ue)}).catch(Mf)}))}let Ve=vf(),Fe=vf(),Ke;function mt(Re,vt,st){ze(Re);const Ye=Fe.list();return Ye.length?Ye.forEach(St=>St(Re,vt,st)):console.error(Re),Promise.reject(Re)}function ft(){return Ke&&b.value!==hl?Promise.resolve():new Promise((Re,vt)=>{Ve.add([Re,vt])})}function ze(Re){return Ke||(Ke=!Re,je(),Ve.list().forEach(([vt,st])=>Re?st(Re):vt()),Ve.reset()),Re}function Se(Re,vt,st,Ye){const{scrollBehavior:St}=e;if(!xd||!St)return Promise.resolve();const re=!st&&S$(DS(Re.fullPath,0))||(Ye||!st)&&history.state&&history.state.scroll||null;return Dn().then(()=>St(Re,vt,re)).then(ue=>ue&&x$(ue)).catch(ue=>mt(ue,Re,vt))}const Ie=Re=>c.go(Re);let Qe;const jt=new Set,Tt={currentRoute:b,listening:!0,addRoute:P,removeRoute:R,clearRoutes:n.clearRoutes,hasRoute:z,getRoutes:O,resolve:$,options:e,push:Y,replace:te,go:Ie,back:()=>Ie(-1),forward:()=>Ie(1),beforeEach:f.add,beforeResolve:d.add,afterEach:a.add,onError:Fe.add,isReady:ft,install(Re){const vt=this;Re.component("RouterLink",W$),Re.component("RouterView",X$),Re.config.globalProperties.$router=vt,Object.defineProperty(Re.config.globalProperties,"$route",{enumerable:!0,get:()=>Sr(b)}),xd&&!Qe&&b.value===hl&&(Qe=!0,Y(c.location).catch(St=>{}));const st={};for(const St in hl)Object.defineProperty(st,St,{get:()=>b.value[St],enumerable:!0});Re.provide(dv,vt),Re.provide(Z0,GC(st)),Re.provide(vb,b);const Ye=Re.unmount;jt.add(Re),Re.unmount=function(){jt.delete(Re),jt.size<1&&(C=hl,be&&be(),be=null,b.value=hl,Qe=!1,Ke=!1),Ye()}}};function xt(Re){return Re.reduce((vt,st)=>vt.then(()=>he(st)),Promise.resolve())}return Tt}function Q$(e,n){const r=[],s=[],c=[],f=Math.max(n.matched.length,e.matched.length);for(let d=0;d<f;d++){const a=n.matched[d];a&&(e.matched.find(C=>$d(C,a))?s.push(a):r.push(a));const b=e.matched[d];b&&(n.matched.find(C=>$d(C,b))||c.push(b))}return[r,s,c]}function oc(){return bn(dv)}function BN(e){return bn(Z0)}const ej="modulepreload",tj=function(e){return"/fahrrad_kilometer_tracker/"+e},WS={},Ku=function(n,r,s){let c=Promise.resolve();if(r&&r.length>0){let d=function(C){return Promise.all(C.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),b=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));c=d(r.map(C=>{if(C=tj(C),C in WS)return;WS[C]=!0;const w=C.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${T}`))return;const A=document.createElement("link");if(A.rel=w?"stylesheet":ej,w||(A.as="script"),A.crossOrigin="",A.href=C,b&&A.setAttribute("nonce",b),document.head.appendChild(A),w)return new Promise((P,R)=>{A.addEventListener("load",P),A.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${C}`)))})}))}function f(d){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=d,window.dispatchEvent(a),!a.defaultPrevented)throw d}return c.then(d=>{for(const a of d||[])a.status==="rejected"&&f(a.reason);return n().catch(f)})},nj=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Ku(async()=>{const{default:s}=await Promise.resolve().then(()=>eh);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)};class K0 extends Error{constructor(n,r="FunctionsError",s){super(n),this.name=r,this.context=s}}class ij extends K0{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class rj extends K0{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class aj extends K0{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var yb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yb||(yb={}));var sj=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};class oj{constructor(n,{headers:r={},customFetch:s,region:c=yb.Any}={}){this.url=n,this.headers=r,this.region=c,this.fetch=nj(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var s;return sj(this,void 0,void 0,function*(){try{const{headers:c,method:f,body:d}=r;let a={},{region:b}=r;b||(b=this.region),b&&b!=="any"&&(a["x-region"]=b);let C;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",C=d):typeof d=="string"?(a["Content-Type"]="text/plain",C=d):typeof FormData<"u"&&d instanceof FormData?C=d:(a["Content-Type"]="application/json",C=JSON.stringify(d)));const w=yield this.fetch(`${this.url}/${n}`,{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),c),body:C}).catch(R=>{throw new ij(R)}),T=w.headers.get("x-relay-error");if(T&&T==="true")throw new rj(w);if(!w.ok)throw new aj(w);let A=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),P;return A==="application/json"?P=yield w.json():A==="application/octet-stream"?P=yield w.blob():A==="text/event-stream"?P=w:A==="multipart/form-data"?P=yield w.formData():P=yield w.text(),{data:P,error:null}}catch(c){return{data:null,error:c}}})}}function kI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lj(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),r}var Mr={},cd={},dd={},hd={},fd={},md={},uj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Nd=uj();const cj=Nd.fetch,TI=Nd.fetch.bind(Nd),PI=Nd.Headers,dj=Nd.Request,hj=Nd.Response,eh=Object.freeze(Object.defineProperty({__proto__:null,Headers:PI,Request:dj,Response:hj,default:TI,fetch:cj},Symbol.toStringTag,{value:"Module"})),fj=lj(eh);var qp={},ZS;function II(){if(ZS)return qp;ZS=1,Object.defineProperty(qp,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return qp.default=e,qp}var KS;function AI(){if(KS)return md;KS=1;var e=md&&md.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(md,"__esModule",{value:!0});const n=e(fj),r=e(II());class s{constructor(f){this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=f.headers,this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=f.shouldThrowOnError,this.signal=f.signal,this.isMaybeSingle=f.isMaybeSingle,f.fetch?this.fetch=f.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,d){return this.headers=Object.assign({},this.headers),this.headers[f]=d,this}then(f,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let b=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async C=>{var w,T,A;let P=null,R=null,O=null,z=C.status,$=C.statusText;if(C.ok){if(this.method!=="HEAD"){const te=await C.text();te===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?R=te:R=JSON.parse(te))}const H=(w=this.headers.Prefer)===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),Y=(T=C.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");H&&Y&&Y.length>1&&(O=parseInt(Y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(P={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,O=null,z=406,$="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const H=await C.text();try{P=JSON.parse(H),Array.isArray(P)&&C.status===404&&(R=[],P=null,z=200,$="OK")}catch{C.status===404&&H===""?(z=204,$="No Content"):P={message:H}}if(P&&this.isMaybeSingle&&(!((A=P==null?void 0:P.details)===null||A===void 0)&&A.includes("0 rows"))&&(P=null,z=200,$="OK"),P&&this.shouldThrowOnError)throw new r.default(P)}return{error:P,data:R,count:O,status:z,statusText:$}});return this.shouldThrowOnError||(b=b.catch(C=>{var w,T,A;return{error:{message:`${(w=C==null?void 0:C.name)!==null&&w!==void 0?w:"FetchError"}: ${C==null?void 0:C.message}`,details:`${(T=C==null?void 0:C.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${(A=C==null?void 0:C.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),b.then(f,d)}returns(){return this}overrideTypes(){return this}}return md.default=s,md}var YS;function EI(){if(YS)return fd;YS=1;var e=fd&&fd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fd,"__esModule",{value:!0});const n=e(AI());class r extends n.default{select(c){let f=!1;const d=(c??"*").split("").map(a=>/\s/.test(a)&&!f?"":(a==='"'&&(f=!f),a)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(c,{ascending:f=!0,nullsFirst:d,foreignTable:a,referencedTable:b=a}={}){const C=b?`${b}.order`:"order",w=this.url.searchParams.get(C);return this.url.searchParams.set(C,`${w?`${w},`:""}${c}.${f?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:f,referencedTable:d=f}={}){const a=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(a,`${c}`),this}range(c,f,{foreignTable:d,referencedTable:a=d}={}){const b=typeof a>"u"?"offset":`${a}.offset`,C=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(b,`${c}`),this.url.searchParams.set(C,`${f-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:c=!1,verbose:f=!1,settings:d=!1,buffers:a=!1,wal:b=!1,format:C="text"}={}){var w;const T=[c?"analyze":null,f?"verbose":null,d?"settings":null,a?"buffers":null,b?"wal":null].filter(Boolean).join("|"),A=(w=this.headers.Accept)!==null&&w!==void 0?w:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${C}; for="${A}"; options=${T};`,C==="json"?this:this}rollback(){var c;return((c=this.headers.Prefer)!==null&&c!==void 0?c:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return fd.default=r,fd}var XS;function Y0(){if(XS)return hd;XS=1;var e=hd&&hd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hd,"__esModule",{value:!0});const n=e(EI());class r extends n.default{eq(c,f){return this.url.searchParams.append(c,`eq.${f}`),this}neq(c,f){return this.url.searchParams.append(c,`neq.${f}`),this}gt(c,f){return this.url.searchParams.append(c,`gt.${f}`),this}gte(c,f){return this.url.searchParams.append(c,`gte.${f}`),this}lt(c,f){return this.url.searchParams.append(c,`lt.${f}`),this}lte(c,f){return this.url.searchParams.append(c,`lte.${f}`),this}like(c,f){return this.url.searchParams.append(c,`like.${f}`),this}likeAllOf(c,f){return this.url.searchParams.append(c,`like(all).{${f.join(",")}}`),this}likeAnyOf(c,f){return this.url.searchParams.append(c,`like(any).{${f.join(",")}}`),this}ilike(c,f){return this.url.searchParams.append(c,`ilike.${f}`),this}ilikeAllOf(c,f){return this.url.searchParams.append(c,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(c,f){return this.url.searchParams.append(c,`ilike(any).{${f.join(",")}}`),this}is(c,f){return this.url.searchParams.append(c,`is.${f}`),this}in(c,f){const d=Array.from(new Set(f)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(c,`in.(${d})`),this}contains(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cs.{${f.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(f)}`),this}containedBy(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cd.{${f.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(f)}`),this}rangeGt(c,f){return this.url.searchParams.append(c,`sr.${f}`),this}rangeGte(c,f){return this.url.searchParams.append(c,`nxl.${f}`),this}rangeLt(c,f){return this.url.searchParams.append(c,`sl.${f}`),this}rangeLte(c,f){return this.url.searchParams.append(c,`nxr.${f}`),this}rangeAdjacent(c,f){return this.url.searchParams.append(c,`adj.${f}`),this}overlaps(c,f){return typeof f=="string"?this.url.searchParams.append(c,`ov.${f}`):this.url.searchParams.append(c,`ov.{${f.join(",")}}`),this}textSearch(c,f,{config:d,type:a}={}){let b="";a==="plain"?b="pl":a==="phrase"?b="ph":a==="websearch"&&(b="w");const C=d===void 0?"":`(${d})`;return this.url.searchParams.append(c,`${b}fts${C}.${f}`),this}match(c){return Object.entries(c).forEach(([f,d])=>{this.url.searchParams.append(f,`eq.${d}`)}),this}not(c,f,d){return this.url.searchParams.append(c,`not.${f}.${d}`),this}or(c,{foreignTable:f,referencedTable:d=f}={}){const a=d?`${d}.or`:"or";return this.url.searchParams.append(a,`(${c})`),this}filter(c,f,d){return this.url.searchParams.append(c,`${f}.${d}`),this}}return hd.default=r,hd}var JS;function MI(){if(JS)return dd;JS=1;var e=dd&&dd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dd,"__esModule",{value:!0});const n=e(Y0());class r{constructor(c,{headers:f={},schema:d,fetch:a}){this.url=c,this.headers=f,this.schema=d,this.fetch=a}select(c,{head:f=!1,count:d}={}){const a=f?"HEAD":"GET";let b=!1;const C=(c??"*").split("").map(w=>/\s/.test(w)&&!b?"":(w==='"'&&(b=!b),w)).join("");return this.url.searchParams.set("select",C),d&&(this.headers.Prefer=`count=${d}`),new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(c,{count:f,defaultToNull:d=!0}={}){const a="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),f&&b.push(`count=${f}`),d||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(c)){const C=c.reduce((w,T)=>w.concat(Object.keys(T)),[]);if(C.length>0){const w=[...new Set(C)].map(T=>`"${T}"`);this.url.searchParams.set("columns",w.join(","))}}return new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}upsert(c,{onConflict:f,ignoreDuplicates:d=!1,count:a,defaultToNull:b=!0}={}){const C="POST",w=[`resolution=${d?"ignore":"merge"}-duplicates`];if(f!==void 0&&this.url.searchParams.set("on_conflict",f),this.headers.Prefer&&w.push(this.headers.Prefer),a&&w.push(`count=${a}`),b||w.push("missing=default"),this.headers.Prefer=w.join(","),Array.isArray(c)){const T=c.reduce((A,P)=>A.concat(Object.keys(P)),[]);if(T.length>0){const A=[...new Set(T)].map(P=>`"${P}"`);this.url.searchParams.set("columns",A.join(","))}}return new n.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}update(c,{count:f}={}){const d="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),f&&a.push(`count=${f}`),this.headers.Prefer=a.join(","),new n.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}delete({count:c}={}){const f="DELETE",d=[];return c&&d.push(`count=${c}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return dd.default=r,dd}var yf={},_f={},QS;function mj(){return QS||(QS=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.version=void 0,_f.version="0.0.0-automated"),_f}var eC;function pj(){if(eC)return yf;eC=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.DEFAULT_HEADERS=void 0;const e=mj();return yf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},yf}var tC;function gj(){if(tC)return cd;tC=1;var e=cd&&cd.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(cd,"__esModule",{value:!0});const n=e(MI()),r=e(Y0()),s=pj();class c{constructor(d,{headers:a={},schema:b,fetch:C}={}){this.url=d,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),a),this.schemaName=b,this.fetch=C}from(d){const a=new URL(`${this.url}/${d}`);return new n.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new c(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,a={},{head:b=!1,get:C=!1,count:w}={}){let T;const A=new URL(`${this.url}/rpc/${d}`);let P;b||C?(T=b?"HEAD":"GET",Object.entries(a).filter(([O,z])=>z!==void 0).map(([O,z])=>[O,Array.isArray(z)?`{${z.join(",")}}`:`${z}`]).forEach(([O,z])=>{A.searchParams.append(O,z)})):(T="POST",P=a);const R=Object.assign({},this.headers);return w&&(R.Prefer=`count=${w}`),new r.default({method:T,url:A,headers:R,schema:this.schemaName,body:P,fetch:this.fetch,allowEmpty:!1})}}return cd.default=c,cd}var nC;function vj(){if(nC)return Mr;nC=1;var e=Mr&&Mr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.PostgrestError=Mr.PostgrestBuilder=Mr.PostgrestTransformBuilder=Mr.PostgrestFilterBuilder=Mr.PostgrestQueryBuilder=Mr.PostgrestClient=void 0;const n=e(gj());Mr.PostgrestClient=n.default;const r=e(MI());Mr.PostgrestQueryBuilder=r.default;const s=e(Y0());Mr.PostgrestFilterBuilder=s.default;const c=e(EI());Mr.PostgrestTransformBuilder=c.default;const f=e(AI());Mr.PostgrestBuilder=f.default;const d=e(II());return Mr.PostgrestError=d.default,Mr.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:f.default,PostgrestError:d.default},Mr}var yj=vj();const _j=kI(yj),{PostgrestClient:bj,PostgrestQueryBuilder:ON,PostgrestFilterBuilder:FN,PostgrestTransformBuilder:$N,PostgrestBuilder:jN,PostgrestError:NN}=_j;let _b;typeof window>"u"?_b=require("ws"):_b=window.WebSocket;const xj="2.11.10",wj={"X-Client-Info":`realtime-js/${xj}`},Sj="1.0.0",DI=1e4,Cj=1e3;var Ed;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ed||(Ed={}));var fa;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(fa||(fa={}));var ms;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ms||(ms={}));var bb;(function(e){e.websocket="websocket"})(bb||(bb={}));var Ru;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ru||(Ru={}));class kj{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),s=new TextDecoder;return this._decodeBroadcast(n,r,s)}_decodeBroadcast(n,r,s){const c=r.getUint8(1),f=r.getUint8(2);let d=this.HEADER_LENGTH+2;const a=s.decode(n.slice(d,d+c));d=d+c;const b=s.decode(n.slice(d,d+f));d=d+f;const C=JSON.parse(s.decode(n.slice(d,n.byteLength)));return{ref:null,topic:a,event:b,payload:C}}}class RI{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ki;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ki||(ki={}));const iC=(e,n,r={})=>{var s;const c=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(n).reduce((f,d)=>(f[d]=Tj(d,e,n,c),f),{})},Tj=(e,n,r,s)=>{const c=n.find(a=>a.name===e),f=c==null?void 0:c.type,d=r[e];return f&&!s.includes(f)?LI(f,d):xb(d)},LI=(e,n)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Ej(n,r)}switch(e){case ki.bool:return Pj(n);case ki.float4:case ki.float8:case ki.int2:case ki.int4:case ki.int8:case ki.numeric:case ki.oid:return Ij(n);case ki.json:case ki.jsonb:return Aj(n);case ki.timestamp:return Mj(n);case ki.abstime:case ki.date:case ki.daterange:case ki.int4range:case ki.int8range:case ki.money:case ki.reltime:case ki.text:case ki.time:case ki.timestamptz:case ki.timetz:case ki.tsrange:case ki.tstzrange:return xb(n);default:return xb(n)}},xb=e=>e,Pj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ij=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},Aj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.log(`JSON parse error: ${n}`),e}return e},Ej=(e,n)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let f;const d=e.slice(1,r);try{f=JSON.parse("["+d+"]")}catch{f=d?d.split(","):[]}return f.map(a=>LI(n,a))}return e},Mj=e=>typeof e=="string"?e.replace(" ","T"):e,zI=e=>{let n=e;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class r_{constructor(n,r,s={},c=DI){this.channel=n,this.event=r,this.payload=s,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var s;return this._hasReceived(n)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var rC;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(rC||(rC={}));class Rf{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},c=>{const{onJoin:f,onLeave:d,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rf.syncState(this.state,c,f,d),this.pendingDiffs.forEach(b=>{this.state=Rf.syncDiff(this.state,b,f,d)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},c=>{const{onJoin:f,onLeave:d,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Rf.syncDiff(this.state,c,f,d),a())}),this.onJoin((c,f,d)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:f,newPresences:d})}),this.onLeave((c,f,d)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:f,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,s,c){const f=this.cloneDeep(n),d=this.transformState(r),a={},b={};return this.map(f,(C,w)=>{d[C]||(b[C]=w)}),this.map(d,(C,w)=>{const T=f[C];if(T){const A=w.map(z=>z.presence_ref),P=T.map(z=>z.presence_ref),R=w.filter(z=>P.indexOf(z.presence_ref)<0),O=T.filter(z=>A.indexOf(z.presence_ref)<0);R.length>0&&(a[C]=R),O.length>0&&(b[C]=O)}else a[C]=w}),this.syncDiff(f,{joins:a,leaves:b},s,c)}static syncDiff(n,r,s,c){const{joins:f,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),c||(c=()=>{}),this.map(f,(a,b)=>{var C;const w=(C=n[a])!==null&&C!==void 0?C:[];if(n[a]=this.cloneDeep(b),w.length>0){const T=n[a].map(P=>P.presence_ref),A=w.filter(P=>T.indexOf(P.presence_ref)<0);n[a].unshift(...A)}s(a,w,b)}),this.map(d,(a,b)=>{let C=n[a];if(!C)return;const w=b.map(T=>T.presence_ref);C=C.filter(T=>w.indexOf(T.presence_ref)<0),n[a]=C,c(a,C,b),C.length===0&&delete n[a]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(s=>r(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,s)=>{const c=n[s];return"metas"in c?r[s]=c.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):r[s]=c,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var aC;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(aC||(aC={}));var sC;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(sC||(sC={}));var yo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yo||(yo={}));class X0{constructor(n,r={config:{}},s){this.topic=n,this.params=r,this.socket=s,this.bindings={},this.state=fa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new r_(this,ms.join,this.params,this.timeout),this.rejoinTimer=new RI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fa.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=fa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ms.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Rf(this),this.broadcastEndpointURL=zI(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,r=this.timeout){var s,c;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:f,presence:d,private:a}}=this.params;this._onError(w=>n==null?void 0:n(yo.CHANNEL_ERROR,w)),this._onClose(()=>n==null?void 0:n(yo.CLOSED));const b={},C={broadcast:f,presence:d,postgres_changes:(c=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&c!==void 0?c:[],private:a};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:C},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var T;if(this.socket.setAuth(),w===void 0){n==null||n(yo.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,P=(T=A==null?void 0:A.length)!==null&&T!==void 0?T:0,R=[];for(let O=0;O<P;O++){const z=A[O],{filter:{event:$,schema:F,table:H,filter:Y}}=z,te=w&&w[O];if(te&&te.event===$&&te.schema===F&&te.table===H&&te.filter===Y)R.push(Object.assign(Object.assign({},z),{id:te.id}));else{this.unsubscribe(),this.state=fa.errored,n==null||n(yo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,n&&n(yo.SUBSCRIBED);return}}).receive("error",w=>{this.state=fa.errored,n==null||n(yo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(yo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,s){return this._on(n,r,s)}async send(n,r={}){var s,c;if(!this._canPush()&&n.type==="broadcast"){const{event:f,payload:d}=n,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:d,private:this.private}]})};try{const C=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((c=C.body)===null||c===void 0?void 0:c.cancel()),C.ok?"ok":"error"}catch(C){return C.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var d,a,b;const C=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((b=(a=(d=this.params)===null||d===void 0?void 0:d.config)===null||a===void 0?void 0:a.broadcast)===null||b===void 0)&&b.ack)&&f("ok"),C.receive("ok",()=>f("ok")),C.receive("error",()=>f("error")),C.receive("timeout",()=>f("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=fa.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ms.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const c=new r_(this,ms.leave,{},n);c.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),c.send(),this._canPush()||c.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(n,r,s){const c=new AbortController,f=setTimeout(()=>c.abort(),s),d=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(f),d}_push(n,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new r_(this,n,r,s);return this._canPush()?c.send():(c.startTimeout(),this.pushBuffer.push(c)),c}_onMessage(n,r,s){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,s){var c,f;const d=n.toLocaleLowerCase(),{close:a,error:b,leave:C,join:w}=ms;if(s&&[a,b,C,w].indexOf(d)>=0&&s!==this._joinRef())return;let A=this._onMessage(d,r,s);if(r&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(P=>{var R,O,z;return((R=P.filter)===null||R===void 0?void 0:R.event)==="*"||((z=(O=P.filter)===null||O===void 0?void 0:O.event)===null||z===void 0?void 0:z.toLocaleLowerCase())===d}).map(P=>P.callback(A,s)):(f=this.bindings[d])===null||f===void 0||f.filter(P=>{var R,O,z,$,F,H;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in P){const Y=P.id,te=(R=P.filter)===null||R===void 0?void 0:R.event;return Y&&((O=r.ids)===null||O===void 0?void 0:O.includes(Y))&&(te==="*"||(te==null?void 0:te.toLocaleLowerCase())===((z=r.data)===null||z===void 0?void 0:z.type.toLocaleLowerCase()))}else{const Y=(F=($=P==null?void 0:P.filter)===null||$===void 0?void 0:$.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return Y==="*"||Y===((H=r==null?void 0:r.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===d}).map(P=>{if(typeof A=="object"&&"ids"in A){const R=A.data,{schema:O,table:z,commit_timestamp:$,type:F,errors:H}=R;A=Object.assign(Object.assign({},{schema:O,table:z,commit_timestamp:$,eventType:F,new:{},old:{},errors:H}),this._getPayloadRecords(R))}P.callback(A,s)})}_isClosed(){return this.state===fa.closed}_isJoined(){return this.state===fa.joined}_isJoining(){return this.state===fa.joining}_isLeaving(){return this.state===fa.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,s){const c=n.toLocaleLowerCase(),f={type:c,filter:r,callback:s};return this.bindings[c]?this.bindings[c].push(f):this.bindings[c]=[f],this}_off(n,r){const s=n.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(c=>{var f;return!(((f=c.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===s&&X0.isEqual(c.filter,r))}),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const s in n)if(n[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ms.close,{},n)}_onError(n){this._on(ms.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fa.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=iC(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=iC(n.columns,n.old_record)),r}}const oC=()=>{},Dj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Rj{constructor(n,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=wj,this.params={},this.timeout=DI,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=oC,this.ref=0,this.logger=oC,this.conn=null,this.sendBuffer=[],this.serializer=new kj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=f=>{let d;return f?d=f:typeof fetch>"u"?d=(...a)=>Ku(async()=>{const{default:b}=await Promise.resolve().then(()=>eh);return{default:b}},void 0).then(({default:b})=>b(...a)):d=fetch,(...a)=>d(...a)},this.endPoint=`${n}/${bb.websocket}`,this.httpEndpoint=zI(n),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const c=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(c&&(this.accessTokenValue=c,this.apiKey=c),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:f=>[1e3,2e3,5e3,1e4][f-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(f,d)=>d(JSON.stringify(f)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new RI(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=_b),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Lj(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sj}))}disconnect(n,r){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==n._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,s){this.logger(n,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ed.connecting:return Ru.Connecting;case Ed.open:return Ru.Open;case Ed.closing:return Ru.Closing;default:return Ru.Closed}}isConnected(){return this.connectionState()===Ru.Open}channel(n,r={config:{}}){const s=`realtime:${n}`,c=this.getChannels().find(f=>f.topic===s);if(c)return c;{const f=new X0(`realtime:${n}`,r,this);return this.channels.push(f),f}}push(n){const{topic:r,event:s,payload:c,ref:f}=n,d=()=>{this.encode(n,a=>{var b;(b=this.conn)===null||b===void 0||b.send(a)})};this.log("push",`${r} ${s} (${f})`,c),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){let r=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(ms.access_token,{access_token:r})}))}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(n=this.conn)===null||n===void 0||n.close(Cj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,r=>{let{topic:s,event:c,payload:f,ref:d}=r;s==="phoenix"&&c==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${f.status||""} ${s} ${c} ${d&&"("+d+")"||""}`,f),Array.from(this.channels).filter(a=>a._isMember(s)).forEach(a=>a._trigger(c,f,d)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(n=>n())}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(n))}_onConnError(n){this.log("transport",n.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(ms.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const s=n.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${n}${s}${c}`}_workerObjectUrl(n){let r;if(n)r=n;else{const s=new Blob([Dj],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class Lj{constructor(n,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ed.connecting,this.send=()=>{},this.url=null,this.url=n,this.close=s.close}}class J0 extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Dr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class zj extends J0{constructor(n,r){super(n),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class wb extends J0{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var Vj=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const VI=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Ku(async()=>{const{default:s}=await Promise.resolve().then(()=>eh);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},Bj=()=>Vj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ku(()=>Promise.resolve().then(()=>eh),void 0)).Response:Response}),Sb=e=>{if(Array.isArray(e))return e.map(r=>Sb(r));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([r,s])=>{const c=r.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));n[c]=Sb(s)}),n};var lc=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const a_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oj=(e,n,r)=>lc(void 0,void 0,void 0,function*(){const s=yield Bj();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(c=>{n(new zj(a_(c),e.status||500))}).catch(c=>{n(new wb(a_(c),c))}):n(new wb(a_(e),e))}),Fj=(e,n,r,s)=>{const c={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),s&&(c.body=JSON.stringify(s)),Object.assign(Object.assign({},c),r))};function Cm(e,n,r,s,c,f){return lc(this,void 0,void 0,function*(){return new Promise((d,a)=>{e(r,Fj(n,s,c,f)).then(b=>{if(!b.ok)throw b;return s!=null&&s.noResolveJson?b:b.json()}).then(b=>d(b)).catch(b=>Oj(b,a,s))})})}function Tg(e,n,r,s){return lc(this,void 0,void 0,function*(){return Cm(e,"GET",n,r,s)})}function _l(e,n,r,s,c){return lc(this,void 0,void 0,function*(){return Cm(e,"POST",n,s,c,r)})}function $j(e,n,r,s,c){return lc(this,void 0,void 0,function*(){return Cm(e,"PUT",n,s,c,r)})}function jj(e,n,r,s){return lc(this,void 0,void 0,function*(){return Cm(e,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function BI(e,n,r,s,c){return lc(this,void 0,void 0,function*(){return Cm(e,"DELETE",n,s,c,r)})}var Ca=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const Nj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uj{constructor(n,r={},s,c){this.url=n,this.headers=r,this.bucketId=s,this.fetch=VI(c)}uploadOrUpdate(n,r,s,c){return Ca(this,void 0,void 0,function*(){try{let f;const d=Object.assign(Object.assign({},lC),c);let a=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const b=d.metadata;typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),b&&f.append("metadata",this.encodeMetadata(b)),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",d.cacheControl),b&&f.append("metadata",this.encodeMetadata(b))):(f=s,a["cache-control"]=`max-age=${d.cacheControl}`,a["content-type"]=d.contentType,b&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),c!=null&&c.headers&&(a=Object.assign(Object.assign({},a),c.headers));const C=this._removeEmptyFolders(r),w=this._getFinalPath(C),T=yield this.fetch(`${this.url}/object/${w}`,Object.assign({method:n,body:f,headers:a},d!=null&&d.duplex?{duplex:d.duplex}:{})),A=yield T.json();return T.ok?{data:{path:C,id:A.Id,fullPath:A.Key},error:null}:{data:null,error:A}}catch(f){if(Dr(f))return{data:null,error:f};throw f}})}upload(n,r,s){return Ca(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,s)})}uploadToSignedUrl(n,r,s,c){return Ca(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(n),d=this._getFinalPath(f),a=new URL(this.url+`/object/upload/sign/${d}`);a.searchParams.set("token",r);try{let b;const C=Object.assign({upsert:lC.upsert},c),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(C.upsert)});typeof Blob<"u"&&s instanceof Blob?(b=new FormData,b.append("cacheControl",C.cacheControl),b.append("",s)):typeof FormData<"u"&&s instanceof FormData?(b=s,b.append("cacheControl",C.cacheControl)):(b=s,w["cache-control"]=`max-age=${C.cacheControl}`,w["content-type"]=C.contentType);const T=yield this.fetch(a.toString(),{method:"PUT",body:b,headers:w}),A=yield T.json();return T.ok?{data:{path:f,fullPath:A.Key},error:null}:{data:null,error:A}}catch(b){if(Dr(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(n,r){return Ca(this,void 0,void 0,function*(){try{let s=this._getFinalPath(n);const c=Object.assign({},this.headers);r!=null&&r.upsert&&(c["x-upsert"]="true");const f=yield _l(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:c}),d=new URL(this.url+f.url),a=d.searchParams.get("token");if(!a)throw new J0("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:a},error:null}}catch(s){if(Dr(s))return{data:null,error:s};throw s}})}update(n,r,s){return Ca(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,s)})}move(n,r,s){return Ca(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(Dr(c))return{data:null,error:c};throw c}})}copy(n,r,s){return Ca(this,void 0,void 0,function*(){try{return{data:{path:(yield _l(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(Dr(c))return{data:null,error:c};throw c}})}createSignedUrl(n,r,s){return Ca(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),f=yield _l(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${d}`)},{data:f,error:null}}catch(c){if(Dr(c))return{data:null,error:c};throw c}})}createSignedUrls(n,r,s){return Ca(this,void 0,void 0,function*(){try{const c=yield _l(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),f=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${f}`):null})),error:null}}catch(c){if(Dr(c))return{data:null,error:c};throw c}})}download(n,r){return Ca(this,void 0,void 0,function*(){const c=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=f?`?${f}`:"";try{const a=this._getFinalPath(n);return{data:yield(yield Tg(this.fetch,`${this.url}/${c}/${a}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Dr(a))return{data:null,error:a};throw a}})}info(n){return Ca(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const s=yield Tg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Sb(s),error:null}}catch(s){if(Dr(s))return{data:null,error:s};throw s}})}exists(n){return Ca(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield jj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Dr(s)&&s instanceof wb){const c=s.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:s}}throw s}})}getPublicUrl(n,r){const s=this._getFinalPath(n),c=[],f=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";f!==""&&c.push(f);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});b!==""&&c.push(b);let C=c.join("&");return C!==""&&(C=`?${C}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${C}`)}}}remove(n){return Ca(this,void 0,void 0,function*(){try{return{data:yield BI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}list(n,r,s){return Ca(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Nj),r),{prefix:n||""});return{data:yield _l(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},s),error:null}}catch(c){if(Dr(c))return{data:null,error:c};throw c}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const Gj="2.7.1",Hj={"X-Client-Info":`storage-js/${Gj}`};var pd=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};class qj{constructor(n,r={},s){this.url=n,this.headers=Object.assign(Object.assign({},Hj),r),this.fetch=VI(s)}listBuckets(){return pd(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Dr(n))return{data:null,error:n};throw n}})}getBucket(n){return pd(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return pd(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/bucket`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Dr(s))return{data:null,error:s};throw s}})}updateBucket(n,r){return pd(this,void 0,void 0,function*(){try{return{data:yield $j(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Dr(s))return{data:null,error:s};throw s}})}emptyBucket(n){return pd(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}deleteBucket(n){return pd(this,void 0,void 0,function*(){try{return{data:yield BI(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}}class Wj extends qj{constructor(n,r={},s){super(n,r,s)}from(n){return new Uj(this.url,this.headers,n,this.fetch)}}const Zj="2.50.0";let wf="";typeof Deno<"u"?wf="deno":typeof document<"u"?wf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wf="react-native":wf="node";const Kj={"X-Client-Info":`supabase-js-${wf}/${Zj}`},Yj={headers:Kj},Xj={schema:"public"},Jj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qj={};var e4=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};const t4=e=>{let n;return e?n=e:typeof fetch>"u"?n=TI:n=fetch,(...r)=>n(...r)},n4=()=>typeof Headers>"u"?PI:Headers,i4=(e,n,r)=>{const s=t4(r),c=n4();return(f,d)=>e4(void 0,void 0,void 0,function*(){var a;const b=(a=yield n())!==null&&a!==void 0?a:e;let C=new c(d==null?void 0:d.headers);return C.has("apikey")||C.set("apikey",e),C.has("Authorization")||C.set("Authorization",`Bearer ${b}`),s(f,Object.assign(Object.assign({},d),{headers:C}))})};var r4=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};function a4(e){return e.endsWith("/")?e:e+"/"}function s4(e,n){var r,s;const{db:c,auth:f,realtime:d,global:a}=e,{db:b,auth:C,realtime:w,global:T}=n,A={db:Object.assign(Object.assign({},b),c),auth:Object.assign(Object.assign({},C),f),realtime:Object.assign(Object.assign({},w),d),global:Object.assign(Object.assign(Object.assign({},T),a),{headers:Object.assign(Object.assign({},(r=T==null?void 0:T.headers)!==null&&r!==void 0?r:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>r4(this,void 0,void 0,function*(){return""})};return e.accessToken?A.accessToken=e.accessToken:delete A.accessToken,A}const OI="2.70.0",wd=30*1e3,Cb=3,s_=Cb*wd,o4="http://localhost:9999",l4="supabase.auth.token",u4={"X-Client-Info":`gotrue-js/${OI}`},kb="X-Supabase-Api-Version",FI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,d4=6e5;class Q0 extends Error{constructor(n,r,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function On(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class h4 extends Q0{constructor(n,r,s){super(n,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function f4(e){return On(e)&&e.name==="AuthApiError"}class $I extends Q0{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Dl extends Q0{constructor(n,r,s,c){super(n,s,c),this.name=r,this.status=s}}class ml extends Dl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function m4(e){return On(e)&&e.name==="AuthSessionMissingError"}class Wp extends Dl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zp extends Dl{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Kp extends Dl{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p4(e){return On(e)&&e.name==="AuthImplicitGrantRedirectError"}class uC extends Dl{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tb extends Dl{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function o_(e){return On(e)&&e.name==="AuthRetryableFetchError"}class cC extends Dl{constructor(n,r,s){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Lf extends Dl{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dC=` 	
\r=`.split(""),g4=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<dC.length;n+=1)e[dC[n].charCodeAt(0)]=-2;for(let n=0;n<Pg.length;n+=1)e[Pg[n].charCodeAt(0)]=n;return e})();function hC(e,n,r){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(Pg[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(Pg[s]),n.queuedBits-=6}}function jI(e,n,r){const s=g4[e];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fC(e){const n=[],r=d=>{n.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},f=d=>{_4(d,s,r)};for(let d=0;d<e.length;d+=1)jI(e.charCodeAt(d),c,f);return n.join("")}function v4(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function y4(e,n){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const c=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}v4(s,n)}}function _4(e,n,r){if(n.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function b4(e){const n=[],r={queue:0,queuedBits:0},s=c=>{n.push(c)};for(let c=0;c<e.length;c+=1)jI(e.charCodeAt(c),r,s);return new Uint8Array(n)}function x4(e){const n=[];return y4(e,r=>n.push(r)),new Uint8Array(n)}function w4(e){const n=[],r={queue:0,queuedBits:0},s=c=>{n.push(c)};return e.forEach(c=>hC(c,r,s)),hC(null,r,s),n.join("")}function S4(e){return Math.round(Date.now()/1e3)+e}function C4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=Math.random()*16|0;return(e=="x"?n:n&3|8).toString(16)})}const fs=()=>typeof window<"u"&&typeof document<"u",Iu={tested:!1,writable:!1},zf=()=>{if(!fs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Iu.tested)return Iu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Iu.tested=!0,Iu.writable=!0}catch{Iu.tested=!0,Iu.writable=!1}return Iu.writable};function k4(e){const n={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,f)=>{n[f]=c})}catch{}return r.searchParams.forEach((s,c)=>{n[c]=s}),n}const NI=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Ku(async()=>{const{default:s}=await Promise.resolve().then(()=>eh);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},T4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",UI=async(e,n,r)=>{await e.setItem(n,JSON.stringify(r))},Yp=async(e,n)=>{const r=await e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Xp=async(e,n)=>{await e.removeItem(n)};class hv{constructor(){this.promise=new hv.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}hv.promiseConstructor=Promise;function l_(e){const n=e.split(".");if(n.length!==3)throw new Lf("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!c4.test(n[s]))throw new Lf("JWT not in base64url format");return{header:JSON.parse(fC(n[0])),payload:JSON.parse(fC(n[1])),signature:b4(n[2]),raw:{header:n[0],payload:n[1]}}}async function P4(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function I4(e,n){return new Promise((s,c)=>{(async()=>{for(let f=0;f<1/0;f++)try{const d=await e(f);if(!n(f,null,d)){s(d);return}}catch(d){if(!n(f,d)){c(d);return}}})()})}function A4(e){return("0"+e.toString(16)).substr(-2)}function E4(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let c="";for(let f=0;f<56;f++)c+=r.charAt(Math.floor(Math.random()*s));return c}return crypto.getRandomValues(n),Array.from(n,A4).join("")}async function M4(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(s);return Array.from(c).map(f=>String.fromCharCode(f)).join("")}async function D4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await M4(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gd(e,n,r=!1){const s=E4();let c=s;r&&(c+="/PASSWORD_RECOVERY"),await UI(e,`${n}-code-verifier`,c);const f=await D4(s);return[f,s===f?"plain":"s256"]}const R4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function L4(e){const n=e.headers.get(kb);if(!n||!n.match(R4))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function z4(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function V4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const B4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vd(e){if(!B4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var O4=function(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(r[s[c]]=e[s[c]]);return r};const Eu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),F4=[502,503,504];async function mC(e){var n;if(!T4(e))throw new Tb(Eu(e),0);if(F4.includes(e.status))throw new Tb(Eu(e),e.status);let r;try{r=await e.json()}catch(f){throw new $I(Eu(f),f)}let s;const c=L4(e);if(c&&c.getTime()>=FI["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new cC(Eu(r),e.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new ml}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((f,d)=>f&&typeof d=="string",!0))throw new cC(Eu(r),e.status,r.weak_password.reasons);throw new h4(Eu(r),e.status||500,s)}const $4=(e,n,r,s)=>{const c={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),c.body=JSON.stringify(s),Object.assign(Object.assign({},c),r))};async function Hn(e,n,r,s){var c;const f=Object.assign({},s==null?void 0:s.headers);f[kb]||(f[kb]=FI["2024-01-01"].name),s!=null&&s.jwt&&(f.Authorization=`Bearer ${s.jwt}`);const d=(c=s==null?void 0:s.query)!==null&&c!==void 0?c:{};s!=null&&s.redirectTo&&(d.redirect_to=s.redirectTo);const a=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",b=await j4(e,n,r+a,{headers:f,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(b):{data:Object.assign({},b),error:null}}async function j4(e,n,r,s,c,f){const d=$4(n,s,c,f);let a;try{a=await e(r,Object.assign({},d))}catch(b){throw console.error(b),new Tb(Eu(b),0)}if(a.ok||await mC(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(b){await mC(b)}}function go(e){var n;let r=null;H4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=S4(e.expires_in)));const s=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:r,user:s},error:null}}function pC(e){const n=go(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(n.data.weak_password=e.weak_password),n}function xl(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function N4(e){return{data:e,error:null}}function U4(e){const{action_link:n,email_otp:r,hashed_token:s,redirect_to:c,verification_type:f}=e,d=O4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:n,email_otp:r,hashed_token:s,redirect_to:c,verification_type:f},b=Object.assign({},d);return{data:{properties:a,user:b},error:null}}function G4(e){return e}function H4(e){return e.access_token&&e.refresh_token&&e.expires_in}const u_=["global","local","others"];var q4=function(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(r[s[c]]=e[s[c]]);return r};class W4{constructor({url:n="",headers:r={},fetch:s}){this.url=n,this.headers=r,this.fetch=NI(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r=u_[0]){if(u_.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${u_.join(", ")}`);try{return await Hn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,r={}){try{return await Hn(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xl})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:r}=n,s=q4(n,["options"]),c=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(c.new_email=s==null?void 0:s.newEmail,delete c.newEmail),await Hn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:U4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(On(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Hn(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:xl})}catch(r){if(On(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,s,c,f,d,a,b;try{const C={nextPage:null,lastPage:0,total:0},w=await Hn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(f=(c=n==null?void 0:n.perPage)===null||c===void 0?void 0:c.toString())!==null&&f!==void 0?f:""},xform:G4});if(w.error)throw w.error;const T=await w.json(),A=(d=w.headers.get("x-total-count"))!==null&&d!==void 0?d:0,P=(b=(a=w.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&b!==void 0?b:[];return P.length>0&&(P.forEach(R=>{const O=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(R.split(";")[1].split("=")[1]);C[`${z}Page`]=O}),C.total=parseInt(A)),{data:Object.assign(Object.assign({},T),C),error:null}}catch(C){if(On(C))return{data:{users:[]},error:C};throw C}}async getUserById(n){vd(n);try{return await Hn(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:xl})}catch(r){if(On(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){vd(n);try{return await Hn(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:xl})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,r=!1){vd(n);try{return await Hn(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:xl})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){vd(n.userId);try{const{data:r,error:s}=await Hn(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:s}}catch(r){if(On(r))return{data:null,error:r};throw r}}async _deleteFactor(n){vd(n.userId),vd(n.id);try{return{data:await Hn(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}}}const Z4={getItem:e=>zf()?globalThis.localStorage.getItem(e):null,setItem:(e,n)=>{zf()&&globalThis.localStorage.setItem(e,n)},removeItem:e=>{zf()&&globalThis.localStorage.removeItem(e)}};function gC(e={}){return{getItem:n=>e[n]||null,setItem:(n,r)=>{e[n]=r},removeItem:n=>{delete e[n]}}}function K4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yd={debug:!!(globalThis&&zf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GI extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Y4 extends GI{}async function X4(e,n,r){yd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),yd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async c=>{if(c){yd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,c.name);try{return await r()}finally{yd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,c.name)}}else{if(n===0)throw yd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Y4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(yd.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}K4();const J4={url:o4,storageKey:l4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:u4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vC(e,n,r){return await r()}class sm{constructor(n){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sm.nextInstanceID,sm.nextInstanceID+=1,this.instanceID>0&&fs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},J4),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new W4({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=NI(c.fetch),this.lock=c.lock||vC,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:fs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=X4:this.lock=vC,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?c.storage?this.storage=c.storage:zf()?this.storage=Z4:(this.memoryStorage={},this.storage=gC(this.memoryStorage)):(this.memoryStorage={},this.storage=gC(this.memoryStorage)),fs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${OI}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=k4(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),fs()&&this.detectSessionInUrl&&s!=="none"){const{data:c,error:f}=await this._getSessionFromURL(r,s);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),p4(f)){const b=(n=f.details)===null||n===void 0?void 0:n.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:d,redirectType:a}=c;return this._debug("#_initialize()","detected session in URL",d,"redirect type",a),await this._saveSession(d),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return On(r)?{error:r}:{error:new $I("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,s,c;try{const f=await Hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(c=n==null?void 0:n.options)===null||c===void 0?void 0:c.captchaToken}},xform:go}),{data:d,error:a}=f;if(a||!d)return{data:{user:null,session:null},error:a};const b=d.session,C=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:C,session:b},error:null}}catch(f){if(On(f))return{data:{user:null,session:null},error:f};throw f}}async signUp(n){var r,s,c;try{let f;if("email"in n){const{email:w,password:T,options:A}=n;let P=null,R=null;this.flowType==="pkce"&&([P,R]=await gd(this.storage,this.storageKey)),f=await Hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:w,password:T,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:P,code_challenge_method:R},xform:go})}else if("phone"in n){const{phone:w,password:T,options:A}=n;f=await Hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:T,data:(s=A==null?void 0:A.data)!==null&&s!==void 0?s:{},channel:(c=A==null?void 0:A.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:go})}else throw new Zp("You must provide either an email or phone number and a password");const{data:d,error:a}=f;if(a||!d)return{data:{user:null,session:null},error:a};const b=d.session,C=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:C,session:b},error:null}}catch(f){if(On(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithPassword(n){try{let r;if("email"in n){const{email:f,password:d,options:a}=n;r=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pC})}else if("phone"in n){const{phone:f,password:d,options:a}=n;r=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pC})}else throw new Zp("You must provide either an email or phone number and a password");const{data:s,error:c}=r;return c?{data:{user:null,session:null},error:c}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Wp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:c})}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,s,c,f;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(f=n.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;if(r==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(n){var r,s,c,f,d,a,b,C,w,T,A,P;let R,O;if("message"in n)R=n.message,O=n.signature;else{const{chain:z,wallet:$,statement:F,options:H}=n;let Y;if(fs())if(typeof $=="object")Y=$;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))Y=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=$}const te=new URL((r=H==null?void 0:H.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Y&&Y.signIn){const Q=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H==null?void 0:H.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),F?{statement:F}:null));let ce;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")ce=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)ce=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ce&&"signature"in ce&&(typeof ce.signedMessage=="string"||ce.signedMessage instanceof Uint8Array)&&ce.signature instanceof Uint8Array)R=typeof ce.signedMessage=="string"?ce.signedMessage:new TextDecoder().decode(ce.signedMessage),O=ce.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${te.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(c=(s=H==null?void 0:H.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((f=H==null?void 0:H.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((d=H==null?void 0:H.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((a=H==null?void 0:H.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((b=H==null?void 0:H.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((C=H==null?void 0:H.signInWithSolana)===null||C===void 0)&&C.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((T=(w=H==null?void 0:H.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||T===void 0)&&T.length?["Resources",...H.signInWithSolana.resources.map(ce=>`- ${ce}`)]:[]].join(`
`);const Q=await Y.signMessage(new TextEncoder().encode(R),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=Q}}try{const{data:z,error:$}=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:w4(O)},!((A=n.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(P=n.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:go});if($)throw $;return!z||!z.session||!z.user?{data:{user:null,session:null},error:new Wp}:(z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),{data:Object.assign({},z),error:$})}catch(z){if(On(z))return{data:{user:null,session:null},error:z};throw z}}async _exchangeCodeForSession(n){const r=await Yp(this.storage,`${this.storageKey}-code-verifier`),[s,c]=(r??"").split("/");try{const{data:f,error:d}=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:go});if(await Xp(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!f||!f.session||!f.user?{data:{user:null,session:null,redirectType:null},error:new Wp}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign(Object.assign({},f),{redirectType:c??null}),error:d})}catch(f){if(On(f))return{data:{user:null,session:null,redirectType:null},error:f};throw f}}async signInWithIdToken(n){try{const{options:r,provider:s,token:c,access_token:f,nonce:d}=n,a=await Hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:c,access_token:f,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:go}),{data:b,error:C}=a;return C?{data:{user:null,session:null},error:C}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Wp}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:C})}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,s,c,f,d;try{if("email"in n){const{email:a,options:b}=n;let C=null,w=null;this.flowType==="pkce"&&([C,w]=await gd(this.storage,this.storageKey));const{error:T}=await Hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},create_user:(s=b==null?void 0:b.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:C,code_challenge_method:w},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in n){const{phone:a,options:b}=n,{data:C,error:w}=await Hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(c=b==null?void 0:b.data)!==null&&c!==void 0?c:{},create_user:(f=b==null?void 0:b.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(d=b==null?void 0:b.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:C==null?void 0:C.message_id},error:w}}throw new Zp("You must provide either an email or phone number.")}catch(a){if(On(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(n){var r,s;try{let c,f;"options"in n&&(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo,f=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:a}=await Hn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:f}}),redirectTo:c,xform:go});if(a)throw a;if(!d)throw new Error("An error occurred on token verification.");const b=d.session,C=d.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:C,session:b},error:null}}catch(c){if(On(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var r,s,c;try{let f=null,d=null;return this.flowType==="pkce"&&([f,d]=await gd(this.storage,this.storageKey)),await Hn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((c=n==null?void 0:n.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:d}),headers:this.headers,xform:N4})}catch(f){if(On(f))return{data:null,error:f};throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)throw s;if(!r)throw new ml;const{error:c}=await Hn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(On(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:s,type:c,options:f}=n,{error:d}=await Hn(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in n){const{phone:s,type:c,options:f}=n,{data:d,error:a}=await Hn(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:a}}throw new Zp("You must provide either an email or phone number and a type")}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Yp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<s_:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.storage.isServer){let d=this.suppressGetSessionWarning;n=new Proxy(n,{get:(b,C,w)=>(!d&&C==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,C,w))})}return{data:{session:n},error:null}}const{session:c,error:f}=await this._callRefreshToken(n.refresh_token);return f?{data:{session:null},error:f}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:xl}):await this._useSession(async r=>{var s,c,f;const{data:d,error:a}=r;if(a)throw a;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ml}:await Hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0,xform:xl})})}catch(r){if(On(r))return m4(r)&&(await this._removeSession(),await Xp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async s=>{const{data:c,error:f}=s;if(f)throw f;if(!c.session)throw new ml;const d=c.session;let a=null,b=null;this.flowType==="pkce"&&n.email!=null&&([a,b]=await gd(this.storage,this.storageKey));const{data:C,error:w}=await Hn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:a,code_challenge_method:b}),jwt:d.access_token,xform:xl});if(w)throw w;return d.user=C.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(On(s))return{data:{user:null},error:s};throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new ml;const r=Date.now()/1e3;let s=r,c=!0,f=null;const{payload:d}=l_(n.access_token);if(d.exp&&(s=d.exp,c=s<=r),c){const{session:a,error:b}=await this._callRefreshToken(n.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!a)return{data:{user:null,session:null},error:null};f=a}else{const{data:a,error:b}=await this._getUser(n.access_token);if(b)throw b;f={access_token:n.access_token,refresh_token:n.refresh_token,user:a.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return{data:{user:f.user,session:f},error:null}}catch(r){if(On(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var s;if(!n){const{data:d,error:a}=r;if(a)throw a;n=(s=d.session)!==null&&s!==void 0?s:void 0}if(!(n!=null&&n.refresh_token))throw new ml;const{session:c,error:f}=await this._callRefreshToken(n.refresh_token);return f?{data:{user:null,session:null},error:f}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(On(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!fs())throw new Kp("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Kp(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new uC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new uC("No code detected.");const{data:F,error:H}=await this._exchangeCodeForSession(n.code);if(H)throw H;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:c,access_token:f,refresh_token:d,expires_in:a,expires_at:b,token_type:C}=n;if(!f||!a||!d||!C)throw new Kp("No session defined in URL");const w=Math.round(Date.now()/1e3),T=parseInt(a);let A=w+T;b&&(A=parseInt(b));const P=A-w;P*1e3<=wd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${T}s`);const R=A-T;w-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,A,w):w-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,A,w);const{data:O,error:z}=await this._getUser(f);if(z)throw z;const $={provider_token:s,provider_refresh_token:c,access_token:f,expires_in:T,expires_at:A,refresh_token:d,token_type:C,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:n.type},error:null}}catch(s){if(On(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Yp(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:c,error:f}=r;if(f)return{error:f};const d=(s=c.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:a}=await this.admin.signOut(d,n);if(a&&!(f4(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return n!=="others"&&(await this._removeSession(),await Xp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=C4(),s={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async r=>{var s,c;try{const{data:{session:f},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",n,"session",f)}catch(f){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",f),console.error(f)}})}async resetPasswordForEmail(n,r={}){let s=null,c=null;this.flowType==="pkce"&&([s,c]=await gd(this.storage,this.storageKey,!0));try{return await Hn(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(f){if(On(f))return{data:null,error:f};throw f}}async getUserIdentities(){var n;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(On(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{const{data:s,error:c}=await this._useSession(async f=>{var d,a,b,C,w;const{data:T,error:A}=f;if(A)throw A;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(b=n.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Hn(this.fetch,"GET",P,{headers:this.headers,jwt:(w=(C=T.session)===null||C===void 0?void 0:C.access_token)!==null&&w!==void 0?w:void 0})});if(c)throw c;return fs()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:n.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(On(s))return{data:{provider:n.provider,url:null},error:s};throw s}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var s,c;const{data:f,error:d}=r;if(d)throw d;return await Hn(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(s=f.session)===null||s===void 0?void 0:s.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(On(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await I4(async c=>(c>0&&await P4(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await Hn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:go})),(c,f)=>{const d=200*Math.pow(2,c);return f&&o_(f)&&Date.now()+d-s<wd})}catch(s){if(this._debug(r,"error",s),On(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",s),fs()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Yp(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const c=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<s_;if(this._debug(r,`session has${c?"":" not"} expired with margin of ${s_}s`),c){if(this.autoRefreshToken&&s.refresh_token){const{error:f}=await this._callRefreshToken(s.refresh_token);f&&(console.error(f),o_(f)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var r,s;if(!n)throw new ml;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new hv;const{data:f,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!f.session)throw new ml;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const a={session:f.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(f){if(this._debug(c,"error",f),On(f)){const d={session:null,error:f};return o_(f)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(f),f}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,r,s=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:r});const f=[],d=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(n,r)}catch(b){f.push(b)}});if(await Promise.all(d),f.length>0){for(let a=0;a<f.length;a+=1)console.error(f[a]);throw f[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await UI(this.storage,this.storageKey,n)}async _removeSession(){this._debug("#_removeSession()"),await Xp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&fs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),wd);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((s.expires_at*1e3-n)/wd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${wd}ms, refresh threshold is ${Cb} ticks`),c<=Cb&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof GI)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,s){const c=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&c.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&c.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[f,d]=await gd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(d)}`});c.push(a.toString())}if(s!=null&&s.queryParams){const f=new URLSearchParams(s.queryParams);c.push(f.toString())}return s!=null&&s.skipBrowserRedirect&&c.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;return f?{data:null,error:f}:await Hn(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(On(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var s,c;const{data:f,error:d}=r;if(d)return{data:null,error:d};const a=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:b,error:C}=await Hn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=f==null?void 0:f.session)===null||s===void 0?void 0:s.access_token});return C?{data:null,error:C}:(n.factorType==="totp"&&(!((c=b==null?void 0:b.totp)===null||c===void 0)&&c.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(r){if(On(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;if(f)return{data:null,error:f};const{data:d,error:a}=await Hn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:a})})}catch(r){if(On(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;return f?{data:null,error:f}:await Hn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(On(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:s}=await this._challenge({factorId:n.factorId});return s?{data:null,error:s}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(n==null?void 0:n.factors)||[],c=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),f=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:c,phone:f},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,s;const{data:{session:c},error:f}=n;if(f)return{data:null,error:f};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=l_(c.access_token);let a=null;d.aal&&(a=d.aal);let b=a;((s=(r=c.user.factors)===null||r===void 0?void 0:r.filter(T=>T.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(b="aal2");const w=d.amr||[];return{data:{currentLevel:a,nextLevel:b,currentAuthenticationMethods:w},error:null}}))}async fetchJwk(n,r={keys:[]}){let s=r.keys.find(d=>d.kid===n);if(s||(s=this.jwks.keys.find(d=>d.kid===n),s&&this.jwks_cached_at+d4>Date.now()))return s;const{data:c,error:f}=await Hn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;if(!c.keys||c.keys.length===0)throw new Lf("JWKS is empty");if(this.jwks=c,this.jwks_cached_at=Date.now(),s=c.keys.find(d=>d.kid===n),!s)throw new Lf("No matching signing key found in JWKS");return s}async getClaims(n,r={keys:[]}){try{let s=n;if(!s){const{data:P,error:R}=await this.getSession();if(R||!P.session)return{data:null,error:R};s=P.session.access_token}const{header:c,payload:f,signature:d,raw:{header:a,payload:b}}=l_(s);if(z4(f.exp),!c.kid||c.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:P}=await this.getUser(s);if(P)throw P;return{data:{claims:f,header:c,signature:d},error:null}}const C=V4(c.alg),w=await this.fetchJwk(c.kid,r),T=await crypto.subtle.importKey("jwk",w,C,!0,["verify"]);if(!await crypto.subtle.verify(C,T,d,x4(`${a}.${b}`)))throw new Lf("Invalid JWT signature");return{data:{claims:f,header:c,signature:d},error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}}}sm.nextInstanceID=0;const Q4=sm;class eN extends Q4{constructor(n){super(n)}}var tN=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(w){try{C(s.next(w))}catch(T){d(T)}}function b(w){try{C(s.throw(w))}catch(T){d(T)}}function C(w){w.done?f(w.value):c(w.value).then(a,b)}C((s=s.apply(e,n||[])).next())})};class nN{constructor(n,r,s){var c,f,d;if(this.supabaseUrl=n,this.supabaseKey=r,!n)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=a4(n),b=new URL(a);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const C=`sb-${b.hostname.split(".")[0]}-auth-token`,w={db:Xj,realtime:Qj,auth:Object.assign(Object.assign({},Jj),{storageKey:C}),global:Yj},T=s4(s??{},w);this.storageKey=(c=T.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(f=T.global.headers)!==null&&f!==void 0?f:{},T.accessToken?(this.accessToken=T.accessToken,this.auth=new Proxy({},{get:(A,P)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(P)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=T.auth)!==null&&d!==void 0?d:{},this.headers,T.global.fetch),this.fetch=i4(r,this._getAccessToken.bind(this),T.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},T.realtime)),this.rest=new bj(new URL("rest/v1",b).href,{headers:this.headers,schema:T.db.schema,fetch:this.fetch}),T.accessToken||this._listenForAuthEvents()}get functions(){return new oj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Wj(this.storageUrl.href,this.headers,this.fetch)}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},s={}){return this.rest.rpc(n,r,s)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return tN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:c,storageKey:f,flowType:d,lock:a,debug:b},C,w){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eN({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),C),storageKey:f,autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:c,flowType:d,lock:a,debug:b,fetch:w,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new Rj(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(n,r,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iN=(e,n,r)=>new nN(e,n,r);console.log("Supabase URL:",void 0);const rN=void 0,aN=void 0,Wn=iN(rN,aN),sN={__name:"NavBar",setup(e){const n=oc(),r=et(!1),s=et(!1),c=et("");let f=null;const d=async()=>{const{data:{session:w}}=await Wn.auth.getSession();r.value=!!w};zi(()=>{d();const{data:w}=Wn.auth.onAuthStateChange(()=>{d()});f=w.subscription}),lm(()=>{f&&f.unsubscribe()});const a=()=>{n.push(r.value?"/profile":"/login")},b=async()=>{const{error:w}=await Wn.auth.signOut();w?(c.value="Fehler beim Logout",s.value=!0):n.push("/login")},C=w=>{n.push(w)};return(w,T)=>{const A=Rt("v-toolbar-title"),P=Rt("v-spacer"),R=Rt("v-icon"),O=Rt("v-btn"),z=Rt("v-list-item-title"),$=Rt("v-list-item"),F=Rt("v-list"),H=Rt("v-menu"),Y=Rt("v-app-bar"),te=Rt("v-snackbar");return yn(),za(Wt,null,[U(Y,{app:"",color:"primary",dark:""},{default:kt(()=>[U(A,{class:"cursor-pointer",onClick:a},{default:kt(()=>T[4]||(T[4]=[nn(" 🚴 Fahrrad App ")])),_:1,__:[4]}),r.value?(yn(),za(Wt,{key:0},[U(P),U(H,{location:"bottom"},{activator:kt(({props:Q})=>[U(O,lt({icon:""},Q),{default:kt(()=>[U(R,null,{default:kt(()=>T[5]||(T[5]=[nn("mdi-menu")])),_:1,__:[5]})]),_:2},1040)]),default:kt(()=>[U(F,null,{default:kt(()=>[U($,{onClick:T[0]||(T[0]=Q=>C("/teams"))},{default:kt(()=>[U(z,null,{default:kt(()=>T[6]||(T[6]=[nn("Teams")])),_:1,__:[6]})]),_:1}),U($,{onClick:T[1]||(T[1]=Q=>C("/rides/new"))},{default:kt(()=>[U(z,null,{default:kt(()=>T[7]||(T[7]=[nn("Fahrt eintragen")])),_:1,__:[7]})]),_:1}),U($,{onClick:T[2]||(T[2]=Q=>C("/profile"))},{default:kt(()=>[U(z,null,{default:kt(()=>T[8]||(T[8]=[nn("Profil")])),_:1,__:[8]})]),_:1})]),_:1})]),_:1}),U(O,{variant:"text",onClick:b,class:"ml-2",color:"white"},{default:kt(()=>T[9]||(T[9]=[nn(" Logout ")])),_:1,__:[9]})],64)):Hr("",!0)]),_:1}),U(te,{modelValue:s.value,"onUpdate:modelValue":T[3]||(T[3]=Q=>s.value=Q),timeout:3e3,color:"error"},{default:kt(()=>[nn(ei(c.value),1)]),_:1},8,["modelValue"])],64)}}},oN={__name:"App",setup(e){return(n,r)=>{const s=Rt("router-view"),c=Rt("v-app");return yn(),Gn(c,null,{default:kt(()=>[U(sN),U(s)]),_:1})}}},lN={__name:"HomePage",setup(e){const n=oc();return zi(async()=>{const{data:{session:r}}=await Wn.auth.getSession();r&&n.replace("/teams")}),(r,s)=>{const c=Rt("v-card-title"),f=Rt("v-card-text"),d=Rt("v-btn"),a=Rt("v-card-actions"),b=Rt("v-card"),C=Rt("v-col"),w=Rt("v-row"),T=Rt("v-container"),A=Rt("v-main");return yn(),Gn(A,null,{default:kt(()=>[U(T,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:kt(()=>[U(w,{justify:"center"},{default:kt(()=>[U(C,{cols:"12",sm:"10",md:"8"},{default:kt(()=>[U(b,{class:"pa-4 text-center",elevation:"6"},{default:kt(()=>[U(c,{class:"text-h4"},{default:kt(()=>s[0]||(s[0]=[nn("🚴 Fahrrad Kilometer App")])),_:1,__:[0]}),U(f,{class:"text-h6"},{default:kt(()=>s[1]||(s[1]=[nn(" Willkommen! Dies ist ein "),X("strong",null,"Testprojekt",-1),nn(", um "),X("strong",null,"Supabase",-1),nn(" auszuprobieren. Die App wurde mit "),X("strong",null,"Vue.js",-1),nn(" entwickelt und dient zum Sammeln und Vergleichen von gefahrenen Fahrradkilometern. ")])),_:1,__:[1]}),U(a,{class:"justify-center"},{default:kt(()=>[U(d,{color:"primary",to:"/login",class:"mx-2"},{default:kt(()=>s[2]||(s[2]=[nn("Anmelden")])),_:1,__:[2]}),U(d,{color:"secondary",to:"/register",class:"mx-2"},{default:kt(()=>s[3]||(s[3]=[nn("Registrieren")])),_:1,__:[3]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},uN={class:"mt-4 text-center"},cN={__name:"LoginPage",setup(e){const n=oc(),r=et(""),s=et(""),c=et("");async function f(){c.value="";const{error:a}=await Wn.auth.signInWithPassword({email:r.value,password:s.value});a?c.value=a.message:n.push("/teams")}async function d(){const{error:a}=await Wn.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});a&&(c.value=a.message)}return(a,b)=>{const C=Rt("v-card-title"),w=Rt("v-text-field"),T=Rt("v-btn"),A=Rt("v-form"),P=Rt("v-alert"),R=Rt("router-link"),O=Rt("v-card-text"),z=Rt("v-card"),$=Rt("v-col"),F=Rt("v-row"),H=Rt("v-container"),Y=Rt("v-main");return yn(),Gn(Y,null,{default:kt(()=>[U(H,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:kt(()=>[U(F,{justify:"center"},{default:kt(()=>[U($,{cols:"12",sm:"8",md:"4"},{default:kt(()=>[U(z,{class:"pa-4",elevation:"6"},{default:kt(()=>[U(C,{class:"text-h5 text-center"},{default:kt(()=>b[2]||(b[2]=[nn("🚴 Fahrrad App – Login")])),_:1,__:[2]}),U(O,null,{default:kt(()=>[U(A,{onSubmit:wl(f,["prevent"])},{default:kt(()=>[U(w,{modelValue:r.value,"onUpdate:modelValue":b[0]||(b[0]=te=>r.value=te),label:"E-Mail",type:"email",required:"","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),U(w,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=te=>s.value=te),label:"Passwort",type:"password",required:"","prepend-inner-icon":"mdi-lock"},null,8,["modelValue"]),U(T,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:kt(()=>b[3]||(b[3]=[nn("Anmelden")])),_:1,__:[3]})]),_:1}),U(T,{class:"mt-4",color:"black",block:"",onClick:d,"prepend-icon":"mdi-github"},{default:kt(()=>b[4]||(b[4]=[nn(" Mit GitHub anmelden ")])),_:1,__:[4]}),c.value?(yn(),Gn(P,{key:0,type:"error",class:"mt-4",dense:"",border:"start"},{default:kt(()=>[nn(ei(c.value),1)]),_:1})):Hr("",!0),X("div",uN,[b[6]||(b[6]=nn(" Noch kein Konto? ")),U(R,{to:"/register"},{default:kt(()=>b[5]||(b[5]=[nn("Hier registrieren")])),_:1,__:[5]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},dN={key:1},hN={key:1},fN={class:"d-flex justify-space-between align-center"},mN={class:"text-h6"},pN={class:"text-right"},gN={key:1},vN={class:"text-caption"},yN={class:"text-right font-weight-bold"},_N={key:4,class:"mt-6"},bN={__name:"TeamsPage",setup(e){const n=[{title:"Rang",value:"rank"},{title:"Teamname",value:"name"},{title:"Kilometer",value:"total_km"},{title:"Mitglieder",value:"member_count"}],r=oc(),s=et([]),c=et(!0),f=et(null),d=et(null),a=et(window.innerWidth<=900);async function b(){c.value=!0;const{data:P,error:R}=await Wn.from("teams").select(`
            id,
            name,
            members:members (
                user_id
            )
        `).order("created_at",{ascending:!1});if(R){f.value=R.message,c.value=!1;return}const O=[];for(const z of P){let $=0,F=z.members?z.members.length:0;if(z.members&&z.members.length>0){const H=z.members.map(te=>te.user_id),{data:Y}=await Wn.from("rides").select("km").in("user_id",H);if(Y)for(const te of Y)$+=Number(te.km)||0}O.push({id:z.id,name:z.name,total_km:$,member_count:F})}s.value=O,c.value=!1}async function C(){const{data:{user:P}}=await Wn.auth.getUser();if(!P){d.value=null;return}const{data:R}=await Wn.from("members").select("team_id").eq("user_id",P.id).single();d.value=(R==null?void 0:R.team_id)||null}function w(){r.push("/create-team")}const T=ne(()=>[...s.value].sort((P,R)=>(R.total_km??0)-(P.total_km??0)));function A(){a.value=window.innerWidth<=700}return zi(()=>{b(),C(),window.addEventListener("resize",A)}),lm(()=>{window.removeEventListener("resize",A)}),(P,R)=>{const O=Rt("v-card-title"),z=Rt("v-progress-circular"),$=Rt("router-link"),F=Rt("v-chip"),H=Rt("v-data-table"),Y=Rt("v-card"),te=Rt("v-col"),Q=Rt("v-row"),ce=Rt("v-btn"),oe=Rt("v-alert"),he=Rt("v-card-text"),pe=Rt("v-container"),_e=Rt("v-main");return yn(),Gn(_e,null,{default:kt(()=>[U(pe,{class:"page-container",fluid:""},{default:kt(()=>[U(Y,{class:"pa-6 mb-6",elevation:"4"},{default:kt(()=>[U(O,{class:"text-h5"},{default:kt(()=>R[0]||(R[0]=[nn("🚴 Team-Übersicht")])),_:1,__:[0]}),U(he,null,{default:kt(()=>[c.value?(yn(),Gn(z,{key:0,indeterminate:"",color:"primary",class:"ma-4"})):s.value.length===0?(yn(),za("div",dN,"Keine Teams gefunden.")):Hr("",!0),a.value?(yn(),Gn(Q,{key:3,class:"mt-4",dense:""},{default:kt(()=>[(yn(!0),za(Wt,null,Ub(T.value,(ae,be)=>(yn(),Gn(te,{key:ae.id,cols:"12"},{default:kt(()=>[U(Y,{color:ae.id===d.value?"primary":"surface",class:"pa-4",elevation:"2"},{default:kt(()=>[X("div",fN,[X("div",mN,"#"+ei(be+1),1),X("div",pN,[ae.id===d.value?(yn(),Gn($,{key:0,to:"/my-team",class:"my-team-link"},{default:kt(()=>[X("strong",null,ei(ae.name),1)]),_:2},1024)):(yn(),za("strong",gN,ei(ae.name),1)),X("div",vN,ei(ae.member_count)+" Mitglieder ",1)]),X("div",yN,ei(ae.total_km??0)+" km ",1)])]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1})):(yn(),Gn(H,{key:2,headers:n,items:T.value,class:"elevation-1 mt-4","item-value":"id","disable-pagination":"","hide-default-footer":""},{"item.name":kt(({item:ae})=>[X("div",null,[ae.id===d.value?(yn(),Gn($,{key:0,to:"/my-team",class:"my-team-link"},{default:kt(()=>[X("strong",null,ei(ae.name),1)]),_:2},1024)):(yn(),za("strong",hN,ei(ae.name),1)),ae.id===d.value?(yn(),Gn(F,{key:2,color:"primary",size:"small",class:"ml-2"},{default:kt(()=>R[1]||(R[1]=[nn(" Mein Team ")])),_:1,__:[1]})):Hr("",!0)])]),"item.rank":kt(({index:ae})=>[nn(" #"+ei(ae+1),1)]),_:1},8,["items"])),d.value?Hr("",!0):(yn(),za("div",_N,[U(ce,{color:"primary",onClick:w},{default:kt(()=>R[2]||(R[2]=[nn(" ➕ Team erstellen ")])),_:1,__:[2]})])),f.value?(yn(),Gn(oe,{key:5,type:"error",class:"mt-4"},{default:kt(()=>[nn(ei(f.value),1)]),_:1})):Hr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},xN={__name:"CreateTeamPage",setup(e){const n=oc(),r=et(""),s=et(null);async function c(){const{data:{user:f}}=await Wn.auth.getUser(),{data:d,error:a}=await Wn.from("teams").insert([{name:r.value}]).select().single();if(a){s.value=a.message;return}const{error:b}=await Wn.from("members").insert([{user_id:f.id,team_id:d.id}]);if(b){s.value=b.message;return}n.push("/teams")}return(f,d)=>{const a=Rt("v-card-title"),b=Rt("v-text-field"),C=Rt("v-btn"),w=Rt("v-form"),T=Rt("v-alert"),A=Rt("v-card-text"),P=Rt("v-card"),R=Rt("v-col"),O=Rt("v-row"),z=Rt("v-container"),$=Rt("v-main");return yn(),Gn($,null,{default:kt(()=>[U(z,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:kt(()=>[U(O,{justify:"center"},{default:kt(()=>[U(R,{cols:"12",sm:"8",md:"4"},{default:kt(()=>[U(P,{class:"pa-4",elevation:"6"},{default:kt(()=>[U(a,{class:"text-h5 text-center"},{default:kt(()=>d[1]||(d[1]=[nn("➕ Neues Team erstellen")])),_:1,__:[1]}),U(A,null,{default:kt(()=>[U(w,{onSubmit:wl(c,["prevent"])},{default:kt(()=>[U(b,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=F=>r.value=F),label:"Teamname",type:"text",required:"","prepend-inner-icon":"mdi-account-group"},null,8,["modelValue"]),U(C,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:kt(()=>d[2]||(d[2]=[nn("Team erstellen")])),_:1,__:[2]})]),_:1}),s.value?(yn(),Gn(T,{key:0,type:"error",class:"mt-4",dense:"",border:"start"},{default:kt(()=>[nn(ei(s.value),1)]),_:1})):Hr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},wN={class:"mt-4 text-center"},SN={__name:"RegisterPage",setup(e){const n=et(""),r=et(""),s=et(""),c=et(null),f=et(null);oc();async function d(){var T;c.value=null,f.value=null;const{data:b,error:C}=await Wn.auth.signUp({email:n.value,password:r.value,options:{emailRedirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});if(C){c.value=C.message;return}const w=(T=b.user)==null?void 0:T.id;if(w){const{error:A}=await Wn.from("profiles").update({username:s.value}).eq("id",w);if(A){c.value=A.message;return}}f.value="Bitte bestätige deine E-Mail-Adresse über den Link, den wir dir geschickt haben, bevor du dich einloggst."}async function a(){const{error:b}=await Wn.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});b&&(c.value=b.message)}return(b,C)=>{const w=Rt("v-card-title"),T=Rt("v-text-field"),A=Rt("v-btn"),P=Rt("v-form"),R=Rt("v-alert"),O=Rt("router-link"),z=Rt("v-card-text"),$=Rt("v-card"),F=Rt("v-col"),H=Rt("v-row"),Y=Rt("v-container"),te=Rt("v-main");return yn(),Gn(te,null,{default:kt(()=>[U(Y,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:kt(()=>[U(H,{justify:"center"},{default:kt(()=>[U(F,{cols:"12",sm:"8",md:"4"},{default:kt(()=>[U($,{class:"pa-4",elevation:"6"},{default:kt(()=>[U(w,{class:"text-h5 text-center"},{default:kt(()=>C[3]||(C[3]=[nn("🚴 Fahrrad App – Registrieren")])),_:1,__:[3]}),U(z,null,{default:kt(()=>[f.value?Hr("",!0):(yn(),Gn(P,{key:0,onSubmit:wl(d,["prevent"])},{default:kt(()=>[U(T,{modelValue:n.value,"onUpdate:modelValue":C[0]||(C[0]=Q=>n.value=Q),label:"E-Mail",type:"email",required:"","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),U(T,{modelValue:r.value,"onUpdate:modelValue":C[1]||(C[1]=Q=>r.value=Q),label:"Passwort",type:"password",required:"","prepend-inner-icon":"mdi-lock"},null,8,["modelValue"]),U(T,{modelValue:s.value,"onUpdate:modelValue":C[2]||(C[2]=Q=>s.value=Q),label:"Benutzername",type:"text",required:"","prepend-inner-icon":"mdi-account"},null,8,["modelValue"]),U(A,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:kt(()=>C[4]||(C[4]=[nn("Registrieren")])),_:1,__:[4]})]),_:1})),U(A,{class:"mt-4",color:"black",block:"",onClick:a,"prepend-icon":"mdi-github"},{default:kt(()=>C[5]||(C[5]=[nn(" Mit GitHub registrieren ")])),_:1,__:[5]}),c.value?(yn(),Gn(R,{key:1,type:"error",class:"mt-4",dense:"",border:"start"},{default:kt(()=>[nn(ei(c.value),1)]),_:1})):Hr("",!0),f.value?(yn(),Gn(R,{key:2,type:"success",class:"mt-4",dense:"",border:"start"},{default:kt(()=>[nn(ei(f.value),1)]),_:1})):Hr("",!0),X("div",wN,[C[7]||(C[7]=nn(" Schon ein Konto? ")),U(O,{to:"/login"},{default:kt(()=>C[6]||(C[6]=[nn("Hier anmelden")])),_:1,__:[6]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},CN={key:1},kN={key:2},TN={key:4},PN={__name:"ProfilePage",setup(e){const n=et(null),r=et("Kein Team"),s=et(null),c=et([]),f=et(!0),d=et(null),a=et(null),b=et(""),C=et(""),w=et(""),T=et(!1),A=async()=>{const{data:{user:F},error:H}=await Wn.auth.getUser();if(H||!F){s.value="Nicht eingeloggt.";return}f.value=F.email_confirmed_at!==null;const{data:Y,error:te}=await Wn.from("profiles").select("username").eq("id",F.id).single();if(te){s.value="Profil nicht gefunden.";return}n.value=Y,b.value=Y.username;const{data:Q}=await Wn.from("members").select("team_id").eq("user_id",F.id).single();if(Q&&Q.team_id){d.value=Q.id;const{data:oe}=await Wn.from("teams").select("name").eq("id",Q.team_id).single();oe&&oe.name?r.value=oe.name:r.value="Kein Team"}else d.value=null,r.value="Kein Team";const{data:ce}=await Wn.from("rides").select("id, created_at, km").eq("user_id",F.id).order("created_at",{ascending:!1});c.value=ce||[]};async function P(){if(!d.value)return;const{error:F}=await Wn.from("members").delete().eq("id",d.value);F?s.value="Fehler beim Verlassen des Teams: "+F.message:(r.value="Kein Team",d.value=null)}function R(F){const H=new Date(F),Y=String(H.getDate()).padStart(2,"0"),te=String(H.getMonth()+1).padStart(2,"0"),Q=H.getFullYear(),ce=String(H.getHours()).padStart(2,"0"),oe=String(H.getMinutes()).padStart(2,"0");return`${Y}.${te}.${Q} ${ce}:${oe}`}async function O(){T.value=!1,s.value=null,a.value=null;const{data:{user:F}}=await Wn.auth.getUser(),{error:H}=await Wn.functions.invoke("delete-user",{body:{userId:F.id}});H?s.value="Fehler beim Löschen des Accounts: "+H.message:(a.value="Account gelöscht.",await Wn.auth.signOut(),window.location.href="/login")}function z(){T.value=!0}async function $(){C.value="",w.value="";const{data:{user:F}}=await Wn.auth.getUser();if(!F){C.value="Nicht eingeloggt.";return}if(!b.value||b.value.length<3){C.value="Benutzername zu kurz.";return}const{error:H}=await Wn.from("profiles").update({username:b.value}).eq("id",F.id);H?C.value="Fehler beim Speichern: "+H.message:(w.value="Benutzername gespeichert!",n.value.username=b.value)}return zi(A),(F,H)=>{const Y=Rt("v-card-title"),te=Rt("v-alert"),Q=Rt("v-progress-circular"),ce=Rt("v-text-field"),oe=Rt("v-btn"),he=Rt("v-col"),pe=Rt("v-row"),_e=Rt("v-list-item-title"),ae=Rt("v-list-item-content"),be=Rt("v-list-item"),je=Rt("v-list"),Ve=Rt("v-card-text"),Fe=Rt("v-card"),Ke=Rt("v-spacer"),mt=Rt("v-card-actions"),ft=Rt("v-dialog"),ze=Rt("v-container"),Se=Rt("v-main");return yn(),Gn(Se,null,{default:kt(()=>[U(ze,{class:"page-container",fluid:""},{default:kt(()=>[U(Fe,{class:"pa-6",elevation:"4"},{default:kt(()=>[U(Y,{class:"text-h5"},{default:kt(()=>H[3]||(H[3]=[nn("👤 Profil")])),_:1,__:[3]}),U(Ve,null,{default:kt(()=>[s.value?(yn(),Gn(te,{key:0,type:"error",dense:"",class:"mb-4"},{default:kt(()=>[nn(ei(s.value),1)]),_:1})):n.value?(yn(),za("div",kN,[f.value?Hr("",!0):(yn(),Gn(te,{key:0,type:"warning",dense:"",class:"mb-4"},{default:kt(()=>H[5]||(H[5]=[nn(" Bitte bestätige deine E-Mail-Adresse, um alle Funktionen nutzen zu können. ")])),_:1,__:[5]})),U(pe,{class:"mb-4"},{default:kt(()=>[U(he,{cols:"12",md:"8"},{default:kt(()=>[U(ce,{modelValue:b.value,"onUpdate:modelValue":H[0]||(H[0]=Ie=>b.value=Ie),label:"Benutzername",variant:"outlined"},null,8,["modelValue"]),U(oe,{color:"primary",onClick:$},{default:kt(()=>H[6]||(H[6]=[nn("Speichern")])),_:1,__:[6]})]),_:1})]),_:1}),w.value?(yn(),Gn(te,{key:1,type:"success",dense:"",class:"mb-2"},{default:kt(()=>[nn(ei(w.value),1)]),_:1})):Hr("",!0),C.value?(yn(),Gn(te,{key:2,type:"error",dense:"",class:"mb-2"},{default:kt(()=>[nn(ei(C.value),1)]),_:1})):Hr("",!0),X("p",null,[H[8]||(H[8]=X("strong",null,"Team:",-1)),nn(" "+ei(r.value)+" ",1),r.value!=="Kein Team"?(yn(),Gn(oe,{key:0,color:"warning",class:"ml-4",onClick:P},{default:kt(()=>H[7]||(H[7]=[nn(" Team verlassen ")])),_:1,__:[7]})):Hr("",!0)]),H[10]||(H[10]=X("h2",{class:"mt-6 mb-4"},"Deine Fahrten",-1)),c.value.length>0?(yn(),Gn(je,{key:3,class:"mb-4"},{default:kt(()=>[(yn(!0),za(Wt,null,Ub(c.value,Ie=>(yn(),Gn(be,{key:Ie.id},{default:kt(()=>[U(ae,null,{default:kt(()=>[U(_e,null,{default:kt(()=>[nn(ei(R(Ie.created_at))+": "+ei(Ie.km)+" km ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(yn(),za("p",TN,"Keine Fahrten gefunden.")),U(oe,{color:"error",class:"mt-6",onClick:z},{default:kt(()=>H[9]||(H[9]=[nn(" Account löschen ")])),_:1,__:[9]})])):(yn(),za("div",CN,[U(Q,{indeterminate:"",color:"primary"}),H[4]||(H[4]=X("span",{class:"ml-2"},"Lade Profil...",-1))]))]),_:1})]),_:1}),U(ft,{modelValue:T.value,"onUpdate:modelValue":H[2]||(H[2]=Ie=>T.value=Ie),persistent:"","max-width":"400"},{default:kt(()=>[U(Fe,null,{default:kt(()=>[U(Y,{class:"text-h5"},{default:kt(()=>H[11]||(H[11]=[nn("Account löschen?")])),_:1,__:[11]}),U(Ve,null,{default:kt(()=>H[12]||(H[12]=[nn(" Bist du sicher, dass du deinen Account unwiderruflich löschen möchtest? Alle deine Daten gehen dabei verloren. ")])),_:1,__:[12]}),U(mt,null,{default:kt(()=>[U(Ke),U(oe,{color:"blue darken-1",text:"",onClick:H[1]||(H[1]=Ie=>T.value=!1)},{default:kt(()=>H[13]||(H[13]=[nn("Abbrechen")])),_:1,__:[13]}),U(oe,{color:"red darken-1",text:"",onClick:O},{default:kt(()=>H[14]||(H[14]=[nn("Löschen")])),_:1,__:[14]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};var ag={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */var IN=ag.exports,yC;function AN(){return yC||(yC=1,function(e,n){(function(r,s){e.exports=s()})(IN,function(){var r={},s={};function c(d,a,b){if(s[d]=b,d==="index"){var C="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",w={};return s.shared(w),s.index(r,w),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),r}}c("shared",["exports"],function(d){function a(u,i,l,h){return new(l||(l=Promise))(function(g,_){function x(D){try{E(h.next(D))}catch(V){_(V)}}function k(D){try{E(h.throw(D))}catch(V){_(V)}}function E(D){var V;D.done?g(D.value):(V=D.value,V instanceof l?V:new l(function(j){j(V)})).then(x,k)}E((h=h.apply(u,i||[])).next())})}function b(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var C,w;function T(){if(w)return C;function u(i,l){this.x=i,this.y=l}return w=1,C=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,l){return this.clone()._rotateAround(i,l)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var l=i.x-this.x,h=i.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,l){return Math.atan2(this.x*l-this.y*i,this.x*i+this.y*l)},_matMult:function(i){var l=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=l,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var l=Math.cos(i),h=Math.sin(i),g=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=g,this},_rotateAround:function(i,l){var h=Math.cos(i),g=Math.sin(i),_=l.y+g*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-g*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(i){return i instanceof u?i:Array.isArray(i)?new u(i[0],i[1]):i},C}typeof SuppressedError=="function"&&SuppressedError;var A,P,R=b(T()),O=function(){if(P)return A;function u(i,l,h,g){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=h,this.p2y=g}return P=1,A=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,g=0;g<8;g++){var _=this.sampleCurveX(h)-i;if(Math.abs(_)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var k=0,E=1;for(h=i,g=0;g<20&&(_=this.sampleCurveX(h),!(Math.abs(_-i)<l));g++)i>_?k=h:E=h,h=.5*(E-k)+k;return h},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},A}(),z=b(O);let $,F;function H(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function Y(){if(F==null&&(F=!1,H())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){const g=4*h;i.fillStyle=`rgb(${g},${g+1},${g+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){F=!0;break}}}return F||!1}var te=1e-6,Q=typeof Float32Array<"u"?Float32Array:Array;function ce(){var u=new Q(9);return Q!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function oe(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function he(){var u=new Q(3);return Q!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function pe(u){return Math.hypot(u[0],u[1],u[2])}function _e(u,i,l){var h=new Q(3);return h[0]=u,h[1]=i,h[2]=l,h}function ae(u,i,l){return u[0]=i[0]+l[0],u[1]=i[1]+l[1],u[2]=i[2]+l[2],u}function be(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u}function je(u,i,l){var h=i[0],g=i[1],_=i[2],x=l[0],k=l[1],E=l[2];return u[0]=g*E-_*k,u[1]=_*x-h*E,u[2]=h*k-g*x,u}Math.hypot||(Math.hypot=function(){for(var u=0,i=arguments.length;i--;)u+=arguments[i]*arguments[i];return Math.sqrt(u)});var Ve,Fe=pe;function Ke(u,i,l){var h=i[0],g=i[1],_=i[2],x=i[3];return u[0]=l[0]*h+l[4]*g+l[8]*_+l[12]*x,u[1]=l[1]*h+l[5]*g+l[9]*_+l[13]*x,u[2]=l[2]*h+l[6]*g+l[10]*_+l[14]*x,u[3]=l[3]*h+l[7]*g+l[11]*_+l[15]*x,u}function mt(){var u=new Q(4);return Q!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function ft(u,i,l,h){var g=.5*Math.PI/180;i*=g,l*=g,h*=g;var _=Math.sin(i),x=Math.cos(i),k=Math.sin(l),E=Math.cos(l),D=Math.sin(h),V=Math.cos(h);return u[0]=_*E*V-x*k*D,u[1]=x*k*V+_*E*D,u[2]=x*E*D-_*k*V,u[3]=x*E*V+_*k*D,u}function ze(){var u=new Q(2);return Q!=Float32Array&&(u[0]=0,u[1]=0),u}function Se(u,i){var l=new Q(2);return l[0]=u,l[1]=i,l}he(),Ve=new Q(4),Q!=Float32Array&&(Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=0),he(),_e(1,0,0),_e(0,1,0),mt(),mt(),ce(),ze();const Ie=8192;function Qe(u,i,l){return i*(Ie/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}function jt(u,i){return(u%i+i)%i}function Tt(u,i,l){return u*(1-l)+i*l}function xt(u){if(u<=0)return 0;if(u>=1)return 1;const i=u*u,l=i*u;return 4*(u<.5?l:3*(u-i)+l-.75)}function Re(u,i,l,h){const g=new z(u,i,l,h);return _=>g.solve(_)}const vt=Re(.25,.1,.25,1);function st(u,i,l){return Math.min(l,Math.max(i,u))}function Ye(u,i,l){const h=l-i,g=((u-i)%h+h)%h+i;return g===i?l:g}function St(u,...i){for(const l of i)for(const h in l)u[h]=l[h];return u}let re=1;function ue(u,i,l){const h={};for(const g in u)h[g]=i.call(this,u[g],g,u);return h}function Le(u,i,l){const h={};for(const g in u)i.call(this,u[g],g,u)&&(h[g]=u[g]);return h}function Ze(u){return Array.isArray(u)?u.map(Ze):typeof u=="object"&&u?ue(u,Ze):u}const ut={};function Je(u){ut[u]||(typeof console<"u"&&console.warn(u),ut[u]=!0)}function Pt(u,i,l){return(l.y-u.y)*(i.x-u.x)>(i.y-u.y)*(l.x-u.x)}function ct(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Lt=null;function It(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ht(u,i,l,h,g){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(u,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const k=x.startsWith("BGR"),E=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(E,function(D,V,j,q,K){const J=4*Math.max(1,0),ie=(Math.max(0,j)-j)*q*4+J,me=4*q,xe=Math.max(0,V),Ne=Math.max(0,j);return{rect:{x:xe,y:Ne,width:Math.min(D.width,V+q)-xe,height:Math.min(D.height,j+K)-Ne},layout:[{offset:ie,stride:me}]}}(u,i,l,h,g)),k)for(let D=0;D<E.length;D+=4){const V=E[D];E[D]=E[D+2],E[D+2]=V}return E}finally{_.close()}})}let en,cn;function vn(u,i,l,h){return u.addEventListener(i,l,h),{unsubscribe:()=>{u.removeEventListener(i,l,h)}}}function En(u){return u*Math.PI/180}function Rn(u){return u/Math.PI*180}const Ni={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Yi={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ui="AbortError";function He(){return new Error(Ui)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function le(u){return se.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const fe="global-dispatcher";class Ce extends Error{constructor(i,l,h,g){super(`AJAXError: ${l} (${i}): ${h}`),this.status=i,this.statusText=l,this.url=h,this.body=g}}const $e=()=>ct(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,We=function(u,i){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const h=le(u.url);if(h)return h(u,i);if(ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:fe},i)}if(!(/^file:/.test(l=u.url)||/^file:/.test($e())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return a(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:$e(),signal:g.signal});let x,k;h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{x=yield fetch(_)}catch(D){throw new Ce(0,D.message,h.url,new Blob)}if(!x.ok){const D=yield x.blob();throw new Ce(x.status,x.statusText,h.url,D)}k=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const E=yield k;if(g.signal.aborted)throw He();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(u,i);if(ct(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:fe},i)}var l;return function(h,g){return new Promise((_,x)=>{var k;const E=new XMLHttpRequest;E.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(E.responseType="arraybuffer");for(const D in h.headers)E.setRequestHeader(D,h.headers[D]);h.type==="json"&&(E.responseType="text",!((k=h.headers)===null||k===void 0)&&k.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=h.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!g.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let D=E.response;if(h.type==="json")try{D=JSON.parse(E.response)}catch(V){return void x(V)}_({data:D,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const D=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new Ce(E.status,E.statusText,h.url,D))}},g.signal.addEventListener("abort",()=>{E.abort(),x(He())}),E.send(h.body)})}(u,i)};function rt(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const i=new URL(u),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function qe(u,i,l){l[u]&&l[u].indexOf(i)!==-1||(l[u]=l[u]||[],l[u].push(i))}function bt(u,i,l){if(l&&l[u]){const h=l[u].indexOf(i);h!==-1&&l[u].splice(h,1)}}class pt{constructor(i,l={}){St(this,l),this.type=i}}class Xe extends pt{constructor(i,l={}){super("error",St({error:i},l))}}class Ct{on(i,l){return this._listeners=this._listeners||{},qe(i,l,this._listeners),{unsubscribe:()=>{this.off(i,l)}}}off(i,l){return bt(i,l,this._listeners),bt(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},qe(i,l,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,l){typeof i=="string"&&(i=new pt(i,l||{}));const h=i.type;if(this.listens(h)){i.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const k of g)k.call(this,i);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const k of _)bt(h,k,this._oneTimeListeners),k.call(this,i);const x=this._eventedParent;x&&(St(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Xe&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const qt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hn(u,i){const l={};for(const h in u)h!=="ref"&&(l[h]=u[h]);return qt.forEach(h=>{h in i&&(l[h]=i[h])}),l}function Yt(u,i){if(Array.isArray(u)){if(!Array.isArray(i)||u.length!==i.length)return!1;for(let l=0;l<u.length;l++)if(!Yt(u[l],i[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&i!==null){if(typeof i!="object"||Object.keys(u).length!==Object.keys(i).length)return!1;for(const l in u)if(!Yt(u[l],i[l]))return!1;return!0}return u===i}function on(u,i){u.push(i)}function gn(u,i,l){on(l,{command:"addSource",args:[u,i[u]]})}function ui(u,i,l){on(i,{command:"removeSource",args:[u]}),l[u]=!0}function Qn(u,i,l,h){ui(u,l,h),gn(u,i,l)}function qn(u,i,l){let h;for(h in u[l])if(Object.prototype.hasOwnProperty.call(u[l],h)&&h!=="data"&&!Yt(u[l][h],i[l][h]))return!1;for(h in i[l])if(Object.prototype.hasOwnProperty.call(i[l],h)&&h!=="data"&&!Yt(u[l][h],i[l][h]))return!1;return!0}function pn(u,i,l,h,g,_){u=u||{},i=i||{};for(const x in u)Object.prototype.hasOwnProperty.call(u,x)&&(Yt(u[x],i[x])||l.push({command:_,args:[h,x,i[x],g]}));for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&!Object.prototype.hasOwnProperty.call(u,x)&&(Yt(u[x],i[x])||l.push({command:_,args:[h,x,i[x],g]}))}function $n(u){return u.id}function ir(u,i){return u[i.id]=i,u}class Ft{constructor(i,l,h,g){this.message=(i?`${i}: `:"")+h,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function mr(u,...i){for(const l of i)for(const h in l)u[h]=l[h];return u}class yi extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class Ss{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[h,g]of l)this.bindings[h]=g}concat(i){return new Ss(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ys={kind:"null"},Ut={kind:"number"},Pn={kind:"string"},In={kind:"boolean"},sa={kind:"color"},uc={kind:"projectionDefinition"},Ua={kind:"object"},An={kind:"value"},ts={kind:"collator"},Xs={kind:"formatted"},Fi={kind:"padding"},Rl={kind:"colorArray"},Ll={kind:"numberArray"},ns={kind:"resolvedImage"},zl={kind:"variableAnchorOffsetCollection"};function oa(u,i){return{kind:"array",itemType:u,N:i}}function _i(u){if(u.kind==="array"){const i=_i(u.itemType);return typeof u.N=="number"?`array<${i}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${i}>`}return u.kind}const km=[Ys,Ut,Pn,In,sa,uc,Xs,Ua,oa(An),Fi,Ll,Rl,ns,zl];function Vl(u,i){if(i.kind==="error")return null;if(u.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Vl(u.itemType,i.itemType))&&(typeof u.N!="number"||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if(u.kind==="value"){for(const l of km)if(!Vl(l,i))return null}}return`Expected ${_i(u)} but found ${_i(i)} instead.`}function cc(u,i){return i.some(l=>l.kind===u.kind)}function Js(u,i){return i.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}function Cs(u,i){return u.kind==="array"&&i.kind==="array"?u.itemType.kind===i.itemType.kind&&typeof u.N=="number":u.kind===i.kind}const Tm=.96422,Pm=.82521,Im=4/29,Ro=6/29,Am=3*Ro*Ro,Em=Ro*Ro*Ro,Bl=Math.PI/180,fv=180/Math.PI;function Mm(u){return(u%=360)<0&&(u+=360),u}function Lo([u,i,l,h]){let g,_;const x=nh((.2225045*(u=th(u))+.7168786*(i=th(i))+.0606169*(l=th(l)))/1);u===i&&i===l?g=_=x:(g=nh((.4360747*u+.3850649*i+.1430804*l)/Tm),_=nh((.0139322*u+.0971045*i+.7141733*l)/Pm));const k=116*x-16;return[k<0?0:k,500*(g-x),200*(x-_),h]}function th(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function nh(u){return u>Em?Math.pow(u,1/3):u/Am+Im}function Dm([u,i,l,h]){let g=(u+16)/116,_=isNaN(i)?g:g+i/500,x=isNaN(l)?g:g-l/200;return g=1*hc(g),_=Tm*hc(_),x=Pm*hc(x),[dc(3.1338561*_-1.6168667*g-.4906146*x),dc(-.9787684*_+1.9161415*g+.033454*x),dc(.0719453*_-.2289914*g+1.4052427*x),h]}function dc(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function hc(u){return u>Ro?u*u*u:Am*(u-Im)}const Ga=Object.hasOwn||function(u,i){return Object.prototype.hasOwnProperty.call(u,i)};function Ln(u,i){return Ga(u,i)?u[i]:void 0}function is(u){return parseInt(u.padEnd(2,u),16)/255}function rs(u,i){return Qs(i?u/100:u,0,1)}function Qs(u,i,l){return Math.min(Math.max(i,u),l)}function ih(u){return!u.some(Number.isNaN)}const rh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function _a(u,i,l){return u+l*(i-u)}function as(u,i,l){return u.map((h,g)=>_a(h,i[g],l))}class zn{constructor(i,l,h,g=1,_=!0){this.r=i,this.g=l,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,l,h,g]))}static parse(i){if(i instanceof zn)return i;if(typeof i!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Ln(rh,h);if(g){const[x,k,E]=g;return[x/255,k/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let k=1;return[is(h.slice(k,k+=x)),is(h.slice(k,k+=x)),is(h.slice(k,k+=x)),is(h.slice(k,k+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[k,E,D,V,j,q,K,J,ie,me,xe,Ne]=x,Pe=[V||" ",K||" ",me].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const Z=[D,q,ie].join(""),de=Z==="%%%"?100:Z===""?255:0;if(de){const Ee=[Qs(+E/de,0,1),Qs(+j/de,0,1),Qs(+J/de,0,1),xe?rs(+xe,Ne):1];if(ih(Ee))return Ee}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,k,E,D,V,j,q,K,J]=_,ie=[E||" ",V||" ",q].join("");if(ie==="  "||ie==="  /"||ie===",,"||ie===",,,"){const me=[+k,Qs(+D,0,100),Qs(+j,0,100),K?rs(+K,J):1];if(ih(me))return function([xe,Ne,Pe,Z]){function de(Ee){const it=(Ee+xe/30)%12,At=Ne*Math.min(Pe,1-Pe);return Pe-At*Math.max(-1,Math.min(it-3,9-it,1))}return xe=Mm(xe),Ne/=100,Pe/=100,[de(0),de(8),de(4),Z]}(me)}}}(i);return l?new zn(...l,!1):void 0}get rgb(){const{r:i,g:l,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[i/_,l/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[l,h,g,_]=Lo(i),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Mm(Math.atan2(g,h)*fv):NaN,x,l,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Lo(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,h,g]=this.rgb;return`rgba(${[i,l,h].map(_=>Math.round(255*_)).join(",")},${g})`}static interpolate(i,l,h,g="rgb"){switch(g){case"rgb":{const[_,x,k,E]=as(i.rgb,l.rgb,h);return new zn(_,x,k,E,!1)}case"hcl":{const[_,x,k,E]=i.hcl,[D,V,j,q]=l.hcl;let K,J;if(isNaN(_)||isNaN(D))isNaN(_)?isNaN(D)?K=NaN:(K=D,k!==1&&k!==0||(J=V)):(K=_,j!==1&&j!==0||(J=x));else{let Pe=D-_;D>_&&Pe>180?Pe-=360:D<_&&_-D>180&&(Pe+=360),K=_+h*Pe}const[ie,me,xe,Ne]=function([Pe,Z,de,Ee]){return Pe=isNaN(Pe)?0:Pe*Bl,Dm([de,Math.cos(Pe)*Z,Math.sin(Pe)*Z,Ee])}([K,J??_a(x,V,h),_a(k,j,h),_a(E,q,h)]);return new zn(ie,me,xe,Ne,!1)}case"lab":{const[_,x,k,E]=Dm(as(i.lab,l.lab,h));return new zn(_,x,k,E,!1)}}}}zn.black=new zn(0,0,0,1),zn.white=new zn(1,1,1,1),zn.transparent=new zn(0,0,0,0),zn.red=new zn(1,0,0,1);class Ol{constructor(i,l,h){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const fc=["bottom","center","top"];class ah{constructor(i,l,h,g,_,x){this.text=i,this.image=l,this.scale=h,this.fontStack=g,this.textColor=_,this.verticalAlign=x}}class Pr{constructor(i){this.sections=i}static fromString(i){return new Pr([new ah(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Pr?i:Pr.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Gi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Gi)return i;if(typeof i=="number")return new Gi([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Gi(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){return new Gi(as(i.values,l.values,h))}}class Ir{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ir)return i;if(typeof i=="number")return new Ir([i]);if(Array.isArray(i)){for(const l of i)if(typeof l!="number")return;return new Ir(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){return new Ir(as(i.values,l.values,h))}}class rr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof rr)return i;if(typeof i=="string"){const h=zn.parse(i);return h?new rr([h]):void 0}if(!Array.isArray(i))return;const l=[];for(const h of i){if(typeof h!="string")return;const g=zn.parse(h);if(!g)return;l.push(g)}return new rr(l)}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h,g="rgb"){const _=[];if(i.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let x=0;x<i.values.length;x++)_.push(zn.interpolate(i.values[x],l.values[x],h,g));return new rr(_)}}class bi extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const mc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class jn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof jn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const h=i[l],g=i[l+1];if(typeof h!="string"||!mc.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new jn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){const g=i.values,_=l.values;if(g.length!==_.length)throw new bi(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${l.toString()}`);const x=[];for(let k=0;k<g.length;k+=2){if(g[k]!==_[k])throw new bi(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${g[k]}, to[${k}]: ${_[k]}`);x.push(g[k]);const[E,D]=g[k+1],[V,j]=_[k+1];x.push([_a(E,V,h),_a(D,j,h)])}return new jn(x)}}class Wr{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Wr({name:i,available:!1}):null}}class wn{constructor(i,l,h){this.from=i,this.to=l,this.transition=h}static interpolate(i,l,h){return new wn(i,l,h)}static parse(i){return i instanceof wn?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new wn(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new wn(i.from,i.to,i.transition):typeof i=="string"?new wn(i,i,1):void 0}}function Cn(u,i,l,h){return typeof u=="number"&&u>=0&&u<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[u,i,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[u,i,l,h]:[u,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof wn||u instanceof zn||u instanceof Ol||u instanceof Pr||u instanceof Gi||u instanceof Ir||u instanceof rr||u instanceof jn||u instanceof Wr)return!0;if(Array.isArray(u)){for(const i of u)if(!eo(i))return!1;return!0}if(typeof u=="object"){for(const i in u)if(!eo(u[i]))return!1;return!0}return!1}function mn(u){if(u===null)return Ys;if(typeof u=="string")return Pn;if(typeof u=="boolean")return In;if(typeof u=="number")return Ut;if(u instanceof zn)return sa;if(u instanceof wn)return uc;if(u instanceof Ol)return ts;if(u instanceof Pr)return Xs;if(u instanceof Gi)return Fi;if(u instanceof Ir)return Ll;if(u instanceof rr)return Rl;if(u instanceof jn)return zl;if(u instanceof Wr)return ns;if(Array.isArray(u)){const i=u.length;let l;for(const h of u){const g=mn(h);if(l){if(l===g)continue;l=An;break}l=g}return oa(l||An,i)}return Ua}function to(u){const i=typeof u;return u===null?"":i==="string"||i==="number"||i==="boolean"?String(u):u instanceof zn||u instanceof wn||u instanceof Pr||u instanceof Gi||u instanceof Ir||u instanceof rr||u instanceof jn||u instanceof Wr?u.toString():JSON.stringify(u)}class Br{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!eo(i[1]))return l.error("invalid value");const h=i[1];let g=mn(h);const _=l.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Br(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const zo={string:Pn,number:Ut,boolean:In,object:Ua};class ba{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h,g=1;const _=i[0];if(_==="array"){let k,E;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in zo)||D==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);k=zo[D],g++}else k=An;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=i[2],g++}h=oa(k,E)}else{if(!zo[_])throw new Error(`Types doesn't contain name = ${_}`);h=zo[_]}const x=[];for(;g<i.length;g++){const k=l.parse(i[g],g,An);if(!k)return null;x.push(k)}return new ba(h,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(i);if(!Vl(this.type,mn(h)))return h;if(l===this.args.length-1)throw new bi(`Expected value to be of type ${_i(this.type)}, but found ${_i(mn(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const sh={"to-boolean":In,"to-color":sa,"to-number":Ut,"to-string":Pn};class Ha{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[0];if(!sh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return l.error("Expected one argument.");const g=sh[h],_=[];for(let x=1;x<i.length;x++){const k=l.parse(i[x],x,An);if(!k)return null;_.push(k)}return new Ha(g,_)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,h;for(const g of this.args){if(l=g.evaluate(i),h=null,l instanceof zn)return l;if(typeof l=="string"){const _=i.parseColor(l);if(_)return _}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Cn(l[0],l[1],l[2],l[3]),!h))return new zn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new bi(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(i);const g=Gi.parse(l);if(g)return g}throw new bi(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const h of this.args){l=h.evaluate(i);const g=Ir.parse(l);if(g)return g}throw new bi(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const h of this.args){l=h.evaluate(i);const g=rr.parse(l);if(g)return g}throw new bi(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(i);const g=jn.parse(l);if(g)return g}throw new bi(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(i),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new bi(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Pr.fromString(to(this.args[0].evaluate(i)));case"resolvedImage":return Wr.fromString(to(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return to(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Rm=["Unknown","Point","LineString","Polygon"];class Lm{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Rm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache.get(i);return l||(l=zn.parse(i),this._parseColorCache.set(i,l)),l}}class Fl{constructor(i,l,h=[],g,_=new Ss,x=[]){this.registry=i,this.path=h,this.key=h.map(k=>`[${k}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=l}parse(i,l,h,g,_={}){return l?this.concat(l,h,g)._parse(i,_):this._parse(i,_)}_parse(i,l){function h(g,_,x){return x==="assert"?new ba(_,[g]):x==="coerce"?new Ha(_,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(i,this);if(!x)return null;if(this.expectedType){const k=this.expectedType,E=x.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||E.kind!=="value"){if(k.kind==="projectionDefinition"&&["string","array"].includes(E.kind)||["color","formatted","resolvedImage"].includes(k.kind)&&["value","string"].includes(E.kind)||["padding","numberArray"].includes(k.kind)&&["value","number","array"].includes(E.kind)||k.kind==="colorArray"&&["value","string","array"].includes(E.kind)||k.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(E.kind))x=h(x,k,l.typeAnnotation||"coerce");else if(this.checkSubtype(k,E))return null}else x=h(x,k,l.typeAnnotation||"assert")}if(!(x instanceof Br)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const k=new Lm;try{x=new Br(x.type,x.evaluate(k))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,h){const g=typeof i=="number"?this.path.concat(i):this.path,_=h?this.scope.concat(h):this.scope;return new Fl(this.registry,this._isConstant,g,l||null,_,this.errors)}error(i,...l){const h=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new yi(h,i))}checkSubtype(i,l){const h=Vl(i,l);return h&&this.error(h),h}}class $l{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let _=1;_<i.length-1;_+=2){const x=i[_];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",_);const k=l.parse(i[_+1],_+1);if(!k)return null;h.push([x,k])}const g=l.parse(i[i.length-1],i.length-1,l.expectedType,h);return g?new $l(h,g):null}outputDefined(){return this.result.outputDefined()}}class Pa{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=i[1];return l.scope.has(h)?new Pa(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class ar{constructor(i,l,h){this.type=i,this.index=l,this.input=h}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Ut),g=l.parse(i[2],2,oa(l.expectedType||An));return h&&g?new ar(g.type.itemType,h,g):null}evaluate(i){const l=this.index.evaluate(i),h=this.input.evaluate(i);if(l<0)throw new bi(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new bi(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new bi(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Vo{constructor(i,l){this.type=In,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,An),g=l.parse(i[2],2,An);return h&&g?cc(h.type,[In,Pn,Ut,Ys,An])?new Vo(h,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${_i(h.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!Js(l,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${_i(mn(l))} instead.`);if(!Js(h,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${_i(mn(h))} instead.`);return h.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class jl{constructor(i,l,h){this.type=Ut,this.needle=i,this.haystack=l,this.fromIndex=h}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,An),g=l.parse(i[2],2,An);if(!h||!g)return null;if(!cc(h.type,[In,Pn,Ut,Ys,An]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${_i(h.type)} instead`);if(i.length===4){const _=l.parse(i[3],3,Ut);return _?new jl(h,g,_):null}return new jl(h,g)}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!Js(l,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${_i(mn(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(i)),Js(h,["string"])){const _=h.indexOf(l,g);return _===-1?-1:[...h.slice(0,_)].length}if(Js(h,["array"]))return h.indexOf(l,g);throw new bi(`Expected second argument to be of type array or string, but found ${_i(mn(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Bo{constructor(i,l,h,g,_,x){this.inputType=i,this.type=l,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let h,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const _={},x=[];for(let D=2;D<i.length-1;D+=2){let V=i[D];const j=i[D+1];Array.isArray(V)||(V=[V]);const q=l.concat(D);if(V.length===0)return q.error("Expected at least one branch label.");for(const J of V){if(typeof J!="number"&&typeof J!="string")return q.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return q.error("Numeric branch labels must be integer values.");if(h){if(q.checkSubtype(h,mn(J)))return null}else h=mn(J);if(_[String(J)]!==void 0)return q.error("Branch labels must be unique.");_[String(J)]=x.length}const K=l.parse(j,D,g);if(!K)return null;g=g||K.type,x.push(K)}const k=l.parse(i[1],1,An);if(!k)return null;const E=l.parse(i[i.length-1],i.length-1,g);return E?k.type.kind!=="value"&&l.concat(1).checkSubtype(h,k.type)?null:new Bo(h,g,k,_,x,E):null}evaluate(i){const l=this.input.evaluate(i);return(mn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class Hi{constructor(i,l,h){this.type=i,this.branches=l,this.otherwise=h}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const g=[];for(let x=1;x<i.length-1;x+=2){const k=l.parse(i[x],x,In);if(!k)return null;const E=l.parse(i[x+1],x+1,h);if(!E)return null;g.push([k,E]),h=h||E.type}const _=l.parse(i[i.length-1],i.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new Hi(h,g,_)}evaluate(i){for(const[l,h]of this.branches)if(l.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,h]of this.branches)i(l),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Nl{constructor(i,l,h,g){this.type=i,this.input=l,this.beginIndex=h,this.endIndex=g}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,An),g=l.parse(i[2],2,Ut);if(!h||!g)return null;if(!cc(h.type,[oa(An),Pn,An]))return l.error(`Expected first argument to be of type array or string, but found ${_i(h.type)} instead`);if(i.length===4){const _=l.parse(i[3],3,Ut);return _?new Nl(h.type,h,g,_):null}return new Nl(h.type,h,g)}evaluate(i){const l=this.input.evaluate(i),h=this.beginIndex.evaluate(i);let g;if(this.endIndex&&(g=this.endIndex.evaluate(i)),Js(l,["string"]))return[...l].slice(h,g).join("");if(Js(l,["array"]))return l.slice(h,g);throw new bi(`Expected first argument to be of type array or string, but found ${_i(mn(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Oo(u,i){const l=u.length-1;let h,g,_=0,x=l,k=0;for(;_<=x;)if(k=Math.floor((_+x)/2),h=u[k],g=u[k+1],h<=i){if(k===l||i<g)return k;_=k+1}else{if(!(h>i))throw new bi("Input is not a number.");x=k-1}return 0}class Fo{constructor(i,l,h){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(i[1],1,Ut);if(!h)return null;const g=[];let _=null;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);for(let x=1;x<i.length;x+=2){const k=x===1?-1/0:i[x],E=i[x+1],D=x,V=x+1;if(typeof k!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=k)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const j=l.parse(E,V,_);if(!j)return null;_=_||j.type,g.push([k,j])}return new Fo(_,h,g)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return h[0].evaluate(i);const _=l.length;return g>=l[_-1]?h[_-1].evaluate(i):h[Oo(l,g)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function mv(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var ks,Ul,oh=function(){if(Ul)return ks;function u(i,l,h,g){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=h,this.p2y=g}return Ul=1,ks=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,g=0;g<8;g++){var _=this.sampleCurveX(h)-i;if(Math.abs(_)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var k=0,E=1;for(h=i,g=0;g<20&&(_=this.sampleCurveX(h),!(Math.abs(_-i)<l));g++)i>_?k=h:E=h,h=.5*(E-k)+k;return h},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},ks}(),pv=mv(oh);class Or{constructor(i,l,h,g,_){this.type=i,this.operator=l,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,k]of _)this.labels.push(x),this.outputs.push(k)}static interpolationFactor(i,l,h,g){let _=0;if(i.name==="exponential")_=$o(l,i.base,h,g);else if(i.name==="linear")_=$o(l,1,h,g);else if(i.name==="cubic-bezier"){const x=i.controlPoints;_=new pv(x[0],x[1],x[2],x[3]).solve($o(l,1,h,g))}return _}static parse(i,l){let[h,g,_,...x]=i;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some(V=>typeof V!="number"||V<0||V>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(_=l.parse(_,2,Ut),!_)return null;const k=[];let E=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||l.expectedType==Rl?l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType):E=sa;for(let D=0;D<x.length;D+=2){const V=x[D],j=x[D+1],q=D+3,K=D+4;if(typeof V!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(k.length&&k[k.length-1][0]>=V)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const J=l.parse(j,K,E);if(!J)return null;E=E||J.type,k.push([V,J])}return Cs(E,Ut)||Cs(E,uc)||Cs(E,sa)||Cs(E,Fi)||Cs(E,Ll)||Cs(E,Rl)||Cs(E,zl)||Cs(E,oa(Ut))?new Or(E,h,g,_,k):l.error(`Type ${_i(E)} is not interpolatable.`)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return h[0].evaluate(i);const _=l.length;if(g>=l[_-1])return h[_-1].evaluate(i);const x=Oo(l,g),k=Or.interpolationFactor(this.interpolation,g,l[x],l[x+1]),E=h[x].evaluate(i),D=h[x+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return _a(E,D,k);case"color":return zn.interpolate(E,D,k);case"padding":return Gi.interpolate(E,D,k);case"colorArray":return rr.interpolate(E,D,k);case"numberArray":return Ir.interpolate(E,D,k);case"variableAnchorOffsetCollection":return jn.interpolate(E,D,k);case"array":return as(E,D,k);case"projectionDefinition":return wn.interpolate(E,D,k)}case"interpolate-hcl":switch(this.type.kind){case"color":return zn.interpolate(E,D,k,"hcl");case"colorArray":return rr.interpolate(E,D,k,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return zn.interpolate(E,D,k,"lab");case"colorArray":return rr.interpolate(E,D,k,"lab")}}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function $o(u,i,l,h){const g=h-l,_=u-l;return g===0?0:i===1?_/g:(Math.pow(i,_)-1)/(Math.pow(i,g)-1)}const la={color:zn.interpolate,number:_a,padding:Gi.interpolate,numberArray:Ir.interpolate,colorArray:rr.interpolate,variableAnchorOffsetCollection:jn.interpolate,array:as};class Zr{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h=null;const g=l.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const k of i.slice(1)){const E=l.parse(k,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,_.push(E)}if(!h)throw new Error("No output type");const x=g&&_.some(k=>Vl(g,k.type));return new Zr(x?An:h,_)}evaluate(i){let l,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(i),h&&h instanceof Wr&&!h.available&&(l||(l=h.name),h=null,g===this.args.length&&(h=l)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function lh(u,i){return u==="=="||u==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Gl(u,i,l,h){return h.compare(i,l)===0}function jo(u,i,l){const h=u!=="=="&&u!=="!=";return class HI{constructor(_,x,k){this.type=In,this.lhs=_,this.rhs=x,this.collator=k,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const k=_[0];let E=x.parse(_[1],1,An);if(!E)return null;if(!lh(k,E.type))return x.concat(1).error(`"${k}" comparisons are not supported for type '${_i(E.type)}'.`);let D=x.parse(_[2],2,An);if(!D)return null;if(!lh(k,D.type))return x.concat(2).error(`"${k}" comparisons are not supported for type '${_i(D.type)}'.`);if(E.type.kind!==D.type.kind&&E.type.kind!=="value"&&D.type.kind!=="value")return x.error(`Cannot compare types '${_i(E.type)}' and '${_i(D.type)}'.`);h&&(E.type.kind==="value"&&D.type.kind!=="value"?E=new ba(D.type,[E]):E.type.kind!=="value"&&D.type.kind==="value"&&(D=new ba(E.type,[D])));let V=null;if(_.length===4){if(E.type.kind!=="string"&&D.type.kind!=="string"&&E.type.kind!=="value"&&D.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(V=x.parse(_[3],3,ts),!V)return null}return new HI(E,D,V)}evaluate(_){const x=this.lhs.evaluate(_),k=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const E=mn(x),D=mn(k);if(E.kind!==D.kind||E.kind!=="string"&&E.kind!=="number")throw new bi(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${E.kind}, ${D.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=mn(x),D=mn(k);if(E.kind!=="string"||D.kind!=="string")return i(_,x,k)}return this.collator?l(_,x,k,this.collator.evaluate(_)):i(_,x,k)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const uh=jo("==",function(u,i,l){return i===l},Gl),gv=jo("!=",function(u,i,l){return i!==l},function(u,i,l,h){return!Gl(0,i,l,h)}),vv=jo("<",function(u,i,l){return i<l},function(u,i,l,h){return h.compare(i,l)<0}),yv=jo(">",function(u,i,l){return i>l},function(u,i,l,h){return h.compare(i,l)>0}),_v=jo("<=",function(u,i,l){return i<=l},function(u,i,l,h){return h.compare(i,l)<=0}),pc=jo(">=",function(u,i,l){return i>=l},function(u,i,l,h){return h.compare(i,l)>=0});class gc{constructor(i,l,h){this.type=ts,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const g=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,In);if(!g)return null;const _=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,In);if(!_)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,Pn),!x)?null:new gc(g,_,x)}evaluate(i){return new Ol(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class vc{constructor(i,l,h,g,_){this.type=Pn,this.number=i,this.locale=l,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const h=l.parse(i[1],1,Ut);if(!h)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=l.parse(g.locale,1,Pn),!_))return null;let x=null;if(g.currency&&(x=l.parse(g.currency,1,Pn),!x))return null;let k=null;if(g["min-fraction-digits"]&&(k=l.parse(g["min-fraction-digits"],1,Ut),!k))return null;let E=null;return g["max-fraction-digits"]&&(E=l.parse(g["max-fraction-digits"],1,Ut),!E)?null:new vc(h,_,x,k,E)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Hl{constructor(i){this.type=Xs,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=i.length-1;++x){const k=i[x];if(_&&typeof k=="object"&&!Array.isArray(k)){_=!1;let E=null;if(k["font-scale"]&&(E=l.parse(k["font-scale"],1,Ut),!E))return null;let D=null;if(k["text-font"]&&(D=l.parse(k["text-font"],1,oa(Pn)),!D))return null;let V=null;if(k["text-color"]&&(V=l.parse(k["text-color"],1,sa),!V))return null;let j=null;if(k["vertical-align"]){if(typeof k["vertical-align"]=="string"&&!fc.includes(k["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${k["vertical-align"]}' instead.`);if(j=l.parse(k["vertical-align"],1,Pn),!j)return null}const q=g[g.length-1];q.scale=E,q.font=D,q.textColor=V,q.verticalAlign=j}else{const E=l.parse(i[x],1,An);if(!E)return null;const D=E.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:E,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Hl(g)}evaluate(i){return new Pr(this.sections.map(l=>{const h=l.content.evaluate(i);return mn(h)===ns?new ah("",h,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(i):null):new ah(to(h),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null,l.verticalAlign?l.verticalAlign.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor),l.verticalAlign&&i(l.verticalAlign)}outputDefined(){return!1}}class ch{constructor(i){this.type=ns,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const h=l.parse(i[1],1,Pn);return h?new ch(h):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),h=Wr.fromString(l);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(l)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class yc{constructor(i){this.type=Ut,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=l.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${_i(h.type)} instead.`):new yc(h):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new bi(`Expected value to be of type string or array, but found ${_i(mn(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const qa=8192;function bv(u,i){const l=(180+u[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(l*g*qa),Math.round(h*g*qa)]}function dh(u,i){const l=Math.pow(2,i.z);return[(g=(u[0]/qa+i.x)/l,360*g-180),(h=(u[1]/qa+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function ql(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function Wl(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function zm(u,i,l){const h=u[0]-i[0],g=u[1]-i[1],_=u[0]-l[0],x=u[1]-l[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function Zl(u,i,l,h){return(g=[h[0]-l[0],h[1]-l[1]])[0]*(_=[i[0]-u[0],i[1]-u[1]])[1]-g[1]*_[0]!=0&&!(!_c(u,i,l,h)||!_c(l,h,u,i));var g,_}function Vm(u,i,l){for(const h of l)for(let g=0;g<h.length-1;++g)if(Zl(u,i,h[g],h[g+1]))return!0;return!1}function No(u,i,l=!1){let h=!1;for(const k of i)for(let E=0;E<k.length-1;E++){if(zm(u,k[E],k[E+1]))return l;(_=k[E])[1]>(g=u)[1]!=(x=k[E+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var g,_,x;return h}function xv(u,i){for(const l of i)if(No(u,l))return!0;return!1}function Bm(u,i){for(const l of u)if(!No(l,i))return!1;for(let l=0;l<u.length-1;++l)if(Vm(u[l],u[l+1],i))return!1;return!0}function wv(u,i){for(const l of i)if(Bm(u,l))return!0;return!1}function _c(u,i,l,h){const g=h[0]-l[0],_=h[1]-l[1],x=(u[0]-l[0])*_-g*(u[1]-l[1]),k=(i[0]-l[0])*_-g*(i[1]-l[1]);return x>0&&k<0||x<0&&k>0}function hh(u,i,l){const h=[];for(let g=0;g<u.length;g++){const _=[];for(let x=0;x<u[g].length;x++){const k=bv(u[g][x],l);ql(i,k),_.push(k)}h.push(_)}return h}function Om(u,i,l){const h=[];for(let g=0;g<u.length;g++){const _=hh(u[g],i,l);h.push(_)}return h}function Fm(u,i,l,h){if(u[0]<l[0]||u[0]>l[2]){const g=.5*h;let _=u[0]-l[0]>g?-h:l[0]-u[0]>g?h:0;_===0&&(_=u[0]-l[2]>g?-h:l[2]-u[0]>g?h:0),u[0]+=_}ql(i,u)}function fh(u,i,l,h){const g=Math.pow(2,h.z)*qa,_=[h.x*qa,h.y*qa],x=[];for(const k of u)for(const E of k){const D=[E.x+_[0],E.y+_[1]];Fm(D,i,l,g),x.push(D)}return x}function mh(u,i,l,h){const g=Math.pow(2,h.z)*qa,_=[h.x*qa,h.y*qa],x=[];for(const E of u){const D=[];for(const V of E){const j=[V.x+_[0],V.y+_[1]];ql(i,j),D.push(j)}x.push(D)}if(i[2]-i[0]<=g/2){(k=i)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const E of x)for(const D of E)Fm(D,i,l,g)}var k;return x}class no{constructor(i,l){this.type=In,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(eo(i[1])){const h=i[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:k}=_.geometry;x==="Polygon"&&g.push(k),x==="MultiPolygon"&&g.push(...k)}if(g.length)return new no(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new no(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new no(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const k=hh(h.coordinates,_,x),E=fh(l.geometry(),g,_,x);if(!Wl(g,_))return!1;for(const D of E)if(!No(D,k))return!1}if(h.type==="MultiPolygon"){const k=Om(h.coordinates,_,x),E=fh(l.geometry(),g,_,x);if(!Wl(g,_))return!1;for(const D of E)if(!xv(D,k))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const k=hh(h.coordinates,_,x),E=mh(l.geometry(),g,_,x);if(!Wl(g,_))return!1;for(const D of E)if(!Bm(D,k))return!1}if(h.type==="MultiPolygon"){const k=Om(h.coordinates,_,x),E=mh(l.geometry(),g,_,x);if(!Wl(g,_))return!1;for(const D of E)if(!wv(D,k))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let $m=class{constructor(u=[],i=(l,h)=>l<h?-1:l>h?1:0){if(this.data=u,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:i,compare:l}=this,h=i[u];for(;u>0;){const g=u-1>>1,_=i[g];if(l(h,_)>=0)break;i[u]=_,u=g}i[u]=h}_down(u){const{data:i,compare:l}=this,h=this.length>>1,g=i[u];for(;u<h;){let _=1+(u<<1);const x=_+1;if(x<this.length&&l(i[x],i[_])<0&&(_=x),l(i[_],g)>=0)break;i[u]=i[_],u=_}i[u]=g}};function ph(u,i,l=0,h=u.length-1,g=Sv){for(;h>l;){if(h-l>600){const E=h-l+1,D=i-l+1,V=Math.log(E),j=.5*Math.exp(2*V/3),q=.5*Math.sqrt(V*j*(E-j)/E)*(D-E/2<0?-1:1);ph(u,i,Math.max(l,Math.floor(i-D*j/E+q)),Math.min(h,Math.floor(i+(E-D)*j/E+q)),g)}const _=u[i];let x=l,k=h;for(Uo(u,l,i),g(u[h],_)>0&&Uo(u,l,h);x<k;){for(Uo(u,x,k),x++,k--;g(u[x],_)<0;)x++;for(;g(u[k],_)>0;)k--}g(u[l],_)===0?Uo(u,l,k):(k++,Uo(u,k,h)),k<=i&&(l=k+1),i<=k&&(h=k-1)}}function Uo(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}function Sv(u,i){return u<i?-1:u>i?1:0}function bc(u,i){if(u.length<=1)return[u];const l=[];let h,g;for(const _ of u){const x=jm(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&l.push(h),h=[_]):h.push(_))}if(h&&l.push(h),i>1)for(let _=0;_<l.length;_++)l[_].length<=i||(ph(l[_],i,1,l[_].length-1,Cv),l[_]=l[_].slice(0,i));return l}function Cv(u,i){return i.area-u.area}function jm(u){let i=0;for(let l,h,g=0,_=u.length,x=_-1;g<_;x=g++)l=u[g],h=u[x],i+=(h.x-l.x)*(l.y+h.y);return i}const Nm=1/298.257223563,Um=Nm*(2-Nm),Gm=Math.PI/180;class gh{constructor(i){const l=6378.137*Gm*1e3,h=Math.cos(i*Gm),g=1/(1-Um*(1-h*h)),_=Math.sqrt(g);this.kx=l*_*h,this.ky=l*_*g*(1-Um)}distance(i,l){const h=this.wrap(i[0]-l[0])*this.kx,g=(i[1]-l[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(i,l){let h,g,_,x,k=1/0;for(let E=0;E<i.length-1;E++){let D=i[E][0],V=i[E][1],j=this.wrap(i[E+1][0]-D)*this.kx,q=(i[E+1][1]-V)*this.ky,K=0;j===0&&q===0||(K=(this.wrap(l[0]-D)*this.kx*j+(l[1]-V)*this.ky*q)/(j*j+q*q),K>1?(D=i[E+1][0],V=i[E+1][1]):K>0&&(D+=j/this.kx*K,V+=q/this.ky*K)),j=this.wrap(l[0]-D)*this.kx,q=(l[1]-V)*this.ky;const J=j*j+q*q;J<k&&(k=J,h=D,g=V,_=E,x=K)}return{point:[h,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Zn(u,i){return i[0]-u[0]}function xc(u){return u[1]-u[0]+1}function ss(u,i){return u[1]>=u[0]&&u[1]<i}function vh(u,i){if(u[0]>u[1])return[null,null];const l=xc(u);if(i){if(l===2)return[u,null];const g=Math.floor(l/2);return[[u[0],u[0]+g],[u[0]+g,u[1]]]}if(l===1)return[u,null];const h=Math.floor(l/2)-1;return[[u[0],u[0]+h],[u[0]+h+1,u[1]]]}function yh(u,i){if(!ss(i,u.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)ql(l,u[h]);return l}function _h(u){const i=[1/0,1/0,-1/0,-1/0];for(const l of u)for(const h of l)ql(i,h);return i}function Hm(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function bh(u,i,l){if(!Hm(u)||!Hm(i))return NaN;let h=0,g=0;return u[2]<i[0]&&(h=i[0]-u[2]),u[0]>i[2]&&(h=u[0]-i[2]),u[1]>i[3]&&(g=u[1]-i[3]),u[3]<i[1]&&(g=i[1]-u[3]),l.distance([0,0],[h,g])}function io(u,i,l){const h=l.pointOnLine(i,u);return l.distance(u,h.point)}function xh(u,i,l,h,g){const _=Math.min(io(u,[l,h],g),io(i,[l,h],g)),x=Math.min(io(l,[u,i],g),io(h,[u,i],g));return Math.min(_,x)}function kv(u,i,l,h,g){if(!ss(i,u.length)||!ss(h,l.length))return 1/0;let _=1/0;for(let x=i[0];x<i[1];++x){const k=u[x],E=u[x+1];for(let D=h[0];D<h[1];++D){const V=l[D],j=l[D+1];if(Zl(k,E,V,j))return 0;_=Math.min(_,xh(k,E,V,j,g))}}return _}function Tv(u,i,l,h,g){if(!ss(i,u.length)||!ss(h,l.length))return NaN;let _=1/0;for(let x=i[0];x<=i[1];++x)for(let k=h[0];k<=h[1];++k)if(_=Math.min(_,g.distance(u[x],l[k])),_===0)return _;return _}function Pv(u,i,l){if(No(u,i,!0))return 0;let h=1/0;for(const g of i){const _=g[0],x=g[g.length-1];if(_!==x&&(h=Math.min(h,io(u,[x,_],l)),h===0))return h;const k=l.pointOnLine(g,u);if(h=Math.min(h,l.distance(u,k.point)),h===0)return h}return h}function Iv(u,i,l,h){if(!ss(i,u.length))return NaN;for(let _=i[0];_<=i[1];++_)if(No(u[_],l,!0))return 0;let g=1/0;for(let _=i[0];_<i[1];++_){const x=u[_],k=u[_+1];for(const E of l)for(let D=0,V=E.length,j=V-1;D<V;j=D++){const q=E[j],K=E[D];if(Zl(x,k,q,K))return 0;g=Math.min(g,xh(x,k,q,K,h))}}return g}function qm(u,i){for(const l of u)for(const h of l)if(No(h,i,!0))return!0;return!1}function Av(u,i,l,h=1/0){const g=_h(u),_=_h(i);if(h!==1/0&&bh(g,_,l)>=h)return h;if(Wl(g,_)){if(qm(u,i))return 0}else if(qm(i,u))return 0;let x=1/0;for(const k of u)for(let E=0,D=k.length,V=D-1;E<D;V=E++){const j=k[V],q=k[E];for(const K of i)for(let J=0,ie=K.length,me=ie-1;J<ie;me=J++){const xe=K[me],Ne=K[J];if(Zl(j,q,xe,Ne))return 0;x=Math.min(x,xh(j,q,xe,Ne,l))}}return x}function Wm(u,i,l,h,g,_){if(!_)return;const x=bh(yh(h,_),g,l);x<i&&u.push([x,_,[0,0]])}function wc(u,i,l,h,g,_,x){if(!_||!x)return;const k=bh(yh(h,_),yh(g,x),l);k<i&&u.push([k,_,x])}function Sc(u,i,l,h,g=1/0){let _=Math.min(h.distance(u[0],l[0][0]),g);if(_===0)return _;const x=new $m([[0,[0,u.length-1],[0,0]]],Zn),k=_h(l);for(;x.length>0;){const E=x.pop();if(E[0]>=_)continue;const D=E[1],V=i?50:100;if(xc(D)<=V){if(!ss(D,u.length))return NaN;if(i){const j=Iv(u,D,l,h);if(isNaN(j)||j===0)return j;_=Math.min(_,j)}else for(let j=D[0];j<=D[1];++j){const q=Pv(u[j],l,h);if(_=Math.min(_,q),_===0)return 0}}else{const j=vh(D,i);Wm(x,_,h,u,k,j[0]),Wm(x,_,h,u,k,j[1])}}return _}function Cc(u,i,l,h,g,_=1/0){let x=Math.min(_,g.distance(u[0],l[0]));if(x===0)return x;const k=new $m([[0,[0,u.length-1],[0,l.length-1]]],Zn);for(;k.length>0;){const E=k.pop();if(E[0]>=x)continue;const D=E[1],V=E[2],j=i?50:100,q=h?50:100;if(xc(D)<=j&&xc(V)<=q){if(!ss(D,u.length)&&ss(V,l.length))return NaN;let K;if(i&&h)K=kv(u,D,l,V,g),x=Math.min(x,K);else if(i&&!h){const J=u.slice(D[0],D[1]+1);for(let ie=V[0];ie<=V[1];++ie)if(K=io(l[ie],J,g),x=Math.min(x,K),x===0)return x}else if(!i&&h){const J=l.slice(V[0],V[1]+1);for(let ie=D[0];ie<=D[1];++ie)if(K=io(u[ie],J,g),x=Math.min(x,K),x===0)return x}else K=Tv(u,D,l,V,g),x=Math.min(x,K)}else{const K=vh(D,i),J=vh(V,h);wc(k,x,g,u,l,K[0],J[0]),wc(k,x,g,u,l,K[0],J[1]),wc(k,x,g,u,l,K[1],J[0]),wc(k,x,g,u,l,K[1],J[1])}}return x}function wh(u){return u.type==="MultiPolygon"?u.coordinates.map(i=>({type:"Polygon",coordinates:i})):u.type==="MultiLineString"?u.coordinates.map(i=>({type:"LineString",coordinates:i})):u.type==="MultiPoint"?u.coordinates.map(i=>({type:"Point",coordinates:i})):[u]}class ro{constructor(i,l){this.type=Ut,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(eo(i[1])){const h=i[1];if(h.type==="FeatureCollection")return new ro(h,h.features.map(g=>wh(g.geometry)).flat());if(h.type==="Feature")return new ro(h,wh(h.geometry));if("type"in h&&"coordinates"in h)return new ro(h,wh(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const g=l.geometry(),_=g.flat().map(E=>dh([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new gh(_[0][1]);let k=1/0;for(const E of h){switch(E.type){case"Point":k=Math.min(k,Cc(_,!1,[E.coordinates],!1,x,k));break;case"LineString":k=Math.min(k,Cc(_,!1,E.coordinates,!0,x,k));break;case"Polygon":k=Math.min(k,Sc(_,!1,E.coordinates,x,k))}if(k===0)return k}return k}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const g=l.geometry(),_=g.flat().map(E=>dh([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new gh(_[0][1]);let k=1/0;for(const E of h){switch(E.type){case"Point":k=Math.min(k,Cc(_,!0,[E.coordinates],!1,x,k));break;case"LineString":k=Math.min(k,Cc(_,!0,E.coordinates,!0,x,k));break;case"Polygon":k=Math.min(k,Sc(_,!0,E.coordinates,x,k))}if(k===0)return k}return k}(i,this.geometries);if(i.geometryType()==="Polygon")return function(l,h){const g=l.geometry();if(g.length===0||g[0].length===0)return NaN;const _=bc(g,0).map(E=>E.map(D=>D.map(V=>dh([V.x,V.y],l.canonical)))),x=new gh(_[0][0][0][1]);let k=1/0;for(const E of h)for(const D of _){switch(E.type){case"Point":k=Math.min(k,Sc([E.coordinates],!1,D,x,k));break;case"LineString":k=Math.min(k,Sc(E.coordinates,!0,D,x,k));break;case"Polygon":k=Math.min(k,Av(D,E.coordinates,x,k))}if(k===0)return k}return k}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Kl{constructor(i){this.type=An,this.key=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=i[1];return h==null?l.error("Global state property must be defined."):typeof h!="string"?l.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new Kl(h)}evaluate(i){var l;const h=(l=i.globals)===null||l===void 0?void 0:l.globalState;return h&&Object.keys(h).length!==0?Ln(h,this.key):null}eachChild(){}outputDefined(){return!1}}const Go={"==":uh,"!=":gv,">":yv,"<":vv,">=":pc,"<=":_v,array:ba,at:ar,boolean:ba,case:Hi,coalesce:Zr,collator:gc,format:Hl,image:ch,in:Vo,"index-of":jl,interpolate:Or,"interpolate-hcl":Or,"interpolate-lab":Or,length:yc,let:$l,literal:Br,match:Bo,number:ba,"number-format":vc,object:ba,slice:Nl,step:Fo,string:ba,"to-boolean":Ha,"to-color":Ha,"to-number":Ha,"to-string":Ha,var:Pa,within:no,distance:ro,"global-state":Kl};class xa{constructor(i,l,h,g){this.name=i,this.type=l,this._evaluate=h,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const h=i[0],g=xa.definitions[h];if(!g)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,k=x.filter(([D])=>!Array.isArray(D)||D.length===i.length-1);let E=null;for(const[D,V]of k){E=new Fl(l.registry,kc,l.path,null,l.scope);const j=[];let q=!1;for(let K=1;K<i.length;K++){const J=i[K],ie=Array.isArray(D)?D[K-1]:D.type,me=E.parse(J,1+j.length,ie);if(!me){q=!0;break}j.push(me)}if(!q)if(Array.isArray(D)&&D.length!==j.length)E.error(`Expected ${D.length} arguments, but found ${j.length} instead.`);else{for(let K=0;K<j.length;K++){const J=Array.isArray(D)?D[K]:D.type,ie=j[K];E.concat(K+1).checkSubtype(J,ie.type)}if(E.errors.length===0)return new xa(h,_,V,j)}}if(k.length===1)l.errors.push(...E.errors);else{const D=(k.length?k:x).map(([j])=>{return q=j,Array.isArray(q)?`(${q.map(_i).join(", ")})`:`(${_i(q.type)}...)`;var q}).join(" | "),V=[];for(let j=1;j<i.length;j++){const q=l.parse(i[j],1+V.length);if(!q)return null;V.push(_i(q.type))}l.error(`Expected arguments of type ${D}, but found (${V.join(", ")}) instead.`)}return null}static register(i,l){xa.definitions=l;for(const h in l)i[h]=xa}}function Zm(u,[i,l,h,g]){i=i.evaluate(u),l=l.evaluate(u),h=h.evaluate(u);const _=g?g.evaluate(u):1,x=Cn(i,l,h,_);if(x)throw new bi(x);return new zn(i/255,l/255,h/255,_,!1)}function Km(u,i){return u in i}function Sh(u,i){const l=i[u];return l===void 0?null:l}function ao(u){return{type:u}}function kc(u){if(u instanceof Pa)return kc(u.boundExpression);if(u instanceof xa&&u.name==="error"||u instanceof gc||u instanceof no||u instanceof ro||u instanceof Kl)return!1;const i=u instanceof Ha||u instanceof ba;let l=!0;return u.eachChild(h=>{l=i?l&&kc(h):l&&h instanceof Br}),!!l&&Tc(u)&&Ho(u,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Tc(u){if(u instanceof xa&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof no||u instanceof ro)return!1;let i=!0;return u.eachChild(l=>{i&&!Tc(l)&&(i=!1)}),i}function Yl(u){if(u instanceof xa&&u.name==="feature-state")return!1;let i=!0;return u.eachChild(l=>{i&&!Yl(l)&&(i=!1)}),i}function Ho(u,i){if(u instanceof xa&&i.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(h=>{l&&!Ho(h,i)&&(l=!1)}),l}function Ym(u){return{result:"success",value:u}}function qo(u){return{result:"error",value:u}}function Wo(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Ch(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function kh(u){return!!u.expression&&u.expression.interpolated}function Vn(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function so(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&mn(u)===Ua}function Xm(u){return u}function Jm(u,i){const l=u.stops&&typeof u.stops[0][0]=="object",h=l||!(l||u.property!==void 0),g=u.type||(kh(i)?"exponential":"interval"),_=function(V){switch(V.type){case"color":return zn.parse;case"padding":return Gi.parse;case"numberArray":return Ir.parse;case"colorArray":return rr.parse;default:return null}}(i);if(_&&((u=mr({},u)).stops&&(u.stops=u.stops.map(V=>[V[0],_(V[1])])),u.default=_(u.default?u.default:i.default)),u.colorSpace&&(x=u.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var x;const k=function(V){switch(V){case"exponential":return Qm;case"interval":return Mv;case"categorical":return Ev;case"identity":return ep;default:throw new Error(`Unknown function type "${V}"`)}}(g);let E,D;if(g==="categorical"){E=Object.create(null);for(const V of u.stops)E[V[0]]=V[1];D=typeof u.stops[0][0]}if(l){const V={},j=[];for(let J=0;J<u.stops.length;J++){const ie=u.stops[J],me=ie[0].zoom;V[me]===void 0&&(V[me]={zoom:me,type:u.type,property:u.property,default:u.default,stops:[]},j.push(me)),V[me].stops.push([ie[0].value,ie[1]])}const q=[];for(const J of j)q.push([V[J].zoom,Jm(V[J],i)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Or.interpolationFactor.bind(void 0,K),zoomStops:q.map(J=>J[0]),evaluate:({zoom:J},ie)=>Qm({stops:q,base:u.base},i,J).evaluate(J,ie)}}if(h){const V=g==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Or.interpolationFactor.bind(void 0,V),zoomStops:u.stops.map(j=>j[0]),evaluate:({zoom:j})=>k(u,i,j,E,D)}}return{kind:"source",evaluate(V,j){const q=j&&j.properties?j.properties[u.property]:void 0;return q===void 0?Xl(u.default,i.default):k(u,i,q,E,D)}}}function Xl(u,i,l){return u!==void 0?u:i!==void 0?i:l!==void 0?l:void 0}function Ev(u,i,l,h,g){return Xl(typeof l===g?h[l]:void 0,u.default,i.default)}function Mv(u,i,l){if(Vn(l)!=="number")return Xl(u.default,i.default);const h=u.stops.length;if(h===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[h-1][0])return u.stops[h-1][1];const g=Oo(u.stops.map(_=>_[0]),l);return u.stops[g][1]}function Qm(u,i,l){const h=u.base!==void 0?u.base:1;if(Vn(l)!=="number")return Xl(u.default,i.default);const g=u.stops.length;if(g===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[g-1][0])return u.stops[g-1][1];const _=Oo(u.stops.map(V=>V[0]),l),x=function(V,j,q,K){const J=K-q,ie=V-q;return J===0?0:j===1?ie/J:(Math.pow(j,ie)-1)/(Math.pow(j,J)-1)}(l,h,u.stops[_][0],u.stops[_+1][0]),k=u.stops[_][1],E=u.stops[_+1][1],D=la[i.type]||Xm;return typeof k.evaluate=="function"?{evaluate(...V){const j=k.evaluate.apply(void 0,V),q=E.evaluate.apply(void 0,V);if(j!==void 0&&q!==void 0)return D(j,q,x,u.colorSpace)}}:D(k,E,x,u.colorSpace)}function ep(u,i,l){switch(i.type){case"color":l=zn.parse(l);break;case"formatted":l=Pr.fromString(l.toString());break;case"resolvedImage":l=Wr.fromString(l.toString());break;case"padding":l=Gi.parse(l);break;case"colorArray":l=rr.parse(l);break;case"numberArray":l=Ir.parse(l);break;default:Vn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return Xl(l,u.default,i.default)}xa.register(Go,{error:[{kind:"error"},[Pn],(u,[i])=>{throw new bi(i.evaluate(u))}],typeof:[Pn,[An],(u,[i])=>_i(mn(i.evaluate(u)))],"to-rgba":[oa(Ut,4),[sa],(u,[i])=>{const[l,h,g,_]=i.evaluate(u).rgb;return[255*l,255*h,255*g,_]}],rgb:[sa,[Ut,Ut,Ut],Zm],rgba:[sa,[Ut,Ut,Ut,Ut],Zm],has:{type:In,overloads:[[[Pn],(u,[i])=>Km(i.evaluate(u),u.properties())],[[Pn,Ua],(u,[i,l])=>Km(i.evaluate(u),l.evaluate(u))]]},get:{type:An,overloads:[[[Pn],(u,[i])=>Sh(i.evaluate(u),u.properties())],[[Pn,Ua],(u,[i,l])=>Sh(i.evaluate(u),l.evaluate(u))]]},"feature-state":[An,[Pn],(u,[i])=>Sh(i.evaluate(u),u.featureState||{})],properties:[Ua,[],u=>u.properties()],"geometry-type":[Pn,[],u=>u.geometryType()],id:[An,[],u=>u.id()],zoom:[Ut,[],u=>u.globals.zoom],"heatmap-density":[Ut,[],u=>u.globals.heatmapDensity||0],elevation:[Ut,[],u=>u.globals.elevation||0],"line-progress":[Ut,[],u=>u.globals.lineProgress||0],accumulated:[An,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Ut,ao(Ut),(u,i)=>{let l=0;for(const h of i)l+=h.evaluate(u);return l}],"*":[Ut,ao(Ut),(u,i)=>{let l=1;for(const h of i)l*=h.evaluate(u);return l}],"-":{type:Ut,overloads:[[[Ut,Ut],(u,[i,l])=>i.evaluate(u)-l.evaluate(u)],[[Ut],(u,[i])=>-i.evaluate(u)]]},"/":[Ut,[Ut,Ut],(u,[i,l])=>i.evaluate(u)/l.evaluate(u)],"%":[Ut,[Ut,Ut],(u,[i,l])=>i.evaluate(u)%l.evaluate(u)],ln2:[Ut,[],()=>Math.LN2],pi:[Ut,[],()=>Math.PI],e:[Ut,[],()=>Math.E],"^":[Ut,[Ut,Ut],(u,[i,l])=>Math.pow(i.evaluate(u),l.evaluate(u))],sqrt:[Ut,[Ut],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[Ut,[Ut],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[Ut,[Ut],(u,[i])=>Math.log(i.evaluate(u))],log2:[Ut,[Ut],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[Ut,[Ut],(u,[i])=>Math.sin(i.evaluate(u))],cos:[Ut,[Ut],(u,[i])=>Math.cos(i.evaluate(u))],tan:[Ut,[Ut],(u,[i])=>Math.tan(i.evaluate(u))],asin:[Ut,[Ut],(u,[i])=>Math.asin(i.evaluate(u))],acos:[Ut,[Ut],(u,[i])=>Math.acos(i.evaluate(u))],atan:[Ut,[Ut],(u,[i])=>Math.atan(i.evaluate(u))],min:[Ut,ao(Ut),(u,i)=>Math.min(...i.map(l=>l.evaluate(u)))],max:[Ut,ao(Ut),(u,i)=>Math.max(...i.map(l=>l.evaluate(u)))],abs:[Ut,[Ut],(u,[i])=>Math.abs(i.evaluate(u))],round:[Ut,[Ut],(u,[i])=>{const l=i.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ut,[Ut],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[Ut,[Ut],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[In,[Pn,An],(u,[i,l])=>u.properties()[i.value]===l.value],"filter-id-==":[In,[An],(u,[i])=>u.id()===i.value],"filter-type-==":[In,[Pn],(u,[i])=>u.geometryType()===i.value],"filter-<":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h<g}],"filter-id-<":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l<h}],"filter->":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h>g}],"filter-id->":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l>h}],"filter-<=":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l<=h}],"filter->=":[In,[Pn,An],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[In,[An],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l>=h}],"filter-has":[In,[An],(u,[i])=>i.value in u.properties()],"filter-has-id":[In,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[In,[oa(Pn)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[In,[oa(An)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[In,[Pn,oa(An)],(u,[i,l])=>l.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[In,[Pn,oa(An)],(u,[i,l])=>function(h,g,_,x){for(;_<=x;){const k=_+x>>1;if(g[k]===h)return!0;g[k]>h?x=k-1:_=k+1}return!1}(u.properties()[i.value],l.value,0,l.value.length-1)],all:{type:In,overloads:[[[In,In],(u,[i,l])=>i.evaluate(u)&&l.evaluate(u)],[ao(In),(u,i)=>{for(const l of i)if(!l.evaluate(u))return!1;return!0}]]},any:{type:In,overloads:[[[In,In],(u,[i,l])=>i.evaluate(u)||l.evaluate(u)],[ao(In),(u,i)=>{for(const l of i)if(l.evaluate(u))return!0;return!1}]]},"!":[In,[In],(u,[i])=>!i.evaluate(u)],"is-supported-script":[In,[Pn],(u,[i])=>{const l=u.globals&&u.globals.isSupportedScript;return!l||l(i.evaluate(u))}],upcase:[Pn,[Pn],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[Pn,[Pn],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[Pn,ao(An),(u,i)=>i.map(l=>to(l.evaluate(u))).join("")],"resolved-locale":[Pn,[ts],(u,[i])=>i.evaluate(u).resolvedLocale()]});class Pc{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new Lm,this._defaultValue=l?function(h){if(h.type==="color"&&so(h.default))return new zn(0,0,0,0);switch(h.type){case"color":return zn.parse(h.default)||null;case"padding":return Gi.parse(h.default)||null;case"numberArray":return Ir.parse(h.default)||null;case"colorArray":return rr.parse(h.default)||null;case"variableAnchorOffsetCollection":return jn.parse(h.default)||null;case"projectionDefinition":return wn.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,h,g,_,x){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(i,l,h,g,_,x){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new bi(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function Ic(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Go}function Ac(u,i){const l=new Fl(Go,kc,[],i?function(g){const _={color:sa,string:Pn,number:Ut,enum:Pn,boolean:In,formatted:Xs,padding:Fi,numberArray:Ll,colorArray:Rl,projectionDefinition:uc,resolvedImage:ns,variableAnchorOffsetCollection:zl};return g.type==="array"?oa(_[g.value]||An,g.length):_[g.type]}(i):void 0),h=l.parse(u,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ym(new Pc(h,i)):qo(l.errors)}class Jl{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Yl(l.expression),this.globalStateRefs=Ko(l.expression)}evaluateWithoutErrorHandling(i,l,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,g,_,x)}evaluate(i,l,h,g,_,x){return this._styleExpression.evaluate(i,l,h,g,_,x)}}class Ec{constructor(i,l,h,g){this.kind=i,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Yl(l.expression),this.globalStateRefs=Ko(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,l,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,g,_,x)}evaluate(i,l,h,g,_,x){return this._styleExpression.evaluate(i,l,h,g,_,x)}interpolationFactor(i,l,h){return this.interpolationType?Or.interpolationFactor(this.interpolationType,i,l,h):0}}function Th(u,i){const l=Ac(u,i);if(l.result==="error")return l;const h=l.value.expression,g=Tc(h);if(!g&&!Wo(i))return qo([new yi("","data expressions not supported")]);const _=Ho(h,["zoom"]);if(!_&&!Ch(i))return qo([new yi("","zoom expressions not supported")]);const x=Zo(h);return x||_?x instanceof yi?qo([x]):x instanceof Or&&!kh(i)?qo([new yi("",'"interpolate" expressions cannot be used with this property')]):Ym(x?new Ec(g?"camera":"composite",l.value,x.labels,x instanceof Or?x.interpolation:void 0):new Jl(g?"constant":"source",l.value)):qo([new yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ql{constructor(i,l){this._parameters=i,this._specification=l,mr(this,Jm(this._parameters,this._specification))}static deserialize(i){return new Ql(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Zo(u){let i=null;if(u instanceof $l)i=Zo(u.result);else if(u instanceof Zr){for(const l of u.args)if(i=Zo(l),i)break}else(u instanceof Fo||u instanceof Or)&&u.input instanceof xa&&u.input.name==="zoom"&&(i=u);return i instanceof yi||u.eachChild(l=>{const h=Zo(l);h instanceof yi?i=h:!i&&h?i=new yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new yi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Ko(u,i=new Set){return u instanceof Kl&&i.add(u.key),u.eachChild(l=>{Ko(l,i)}),i}function eu(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!eu(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Ph={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ts(u){if(u==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};eu(u)||(u=Mc(u));const i=Ac(u,Ph);if(i.result==="error")throw new Error(i.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,g)=>i.value.evaluate(l,h,{},g),needGeometry:tp(u),getGlobalStateRefs:()=>Ko(i.value.expression)}}function Dv(u,i){return u<i?-1:u>i?1:0}function tp(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let i=1;i<u.length;i++)if(tp(u[i]))return!0;return!1}function Mc(u){if(!u)return!0;const i=u[0];return u.length<=1?i!=="any":i==="=="?Ih(u[1],u[2],"=="):i==="!="?tu(Ih(u[1],u[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Ih(u[1],u[2],i):i==="any"?(l=u.slice(1),["any"].concat(l.map(Mc))):i==="all"?["all"].concat(u.slice(1).map(Mc)):i==="none"?["all"].concat(u.slice(1).map(Mc).map(tu)):i==="in"?np(u[1],u.slice(2)):i==="!in"?tu(np(u[1],u.slice(2))):i==="has"?ip(u[1]):i!=="!has"||tu(ip(u[1]));var l}function Ih(u,i,l){switch(u){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,u,i]}}function np(u,i){if(i.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",u,["literal",i.sort(Dv)]]:["filter-in-small",u,["literal",i]]}}function ip(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function tu(u){return["!",u]}function Dc(u){const i=typeof u;if(i==="number"||i==="boolean"||i==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let g="[";for(const _ of u)g+=`${Dc(_)},`;return`${g}]`}const l=Object.keys(u).sort();let h="{";for(let g=0;g<l.length;g++)h+=`${JSON.stringify(l[g])}:${Dc(u[l[g]])},`;return`${h}}`}function Rc(u){let i="";for(const l of qt)i+=`/${Dc(u[l])}`;return i}function rp(u){const i=u.value;return i?[new Ft(u.key,i,"constants have been deprecated as of v8")]:[]}function Ii(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Ps(u){if(Array.isArray(u))return u.map(Ps);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const l in u)i[l]=Ps(u[l]);return i}return Ii(u)}function wa(u){const i=u.key,l=u.value,h=u.valueSpec||{},g=u.objectElementValidators||{},_=u.style,x=u.styleSpec,k=u.validateSpec;let E=[];const D=Vn(l);if(D!=="object")return[new Ft(i,l,`object expected, ${D} found`)];for(const V in l){const j=V.split(".")[0],q=Ln(h,j)||h["*"];let K;if(Ln(g,j))K=g[j];else if(Ln(h,j))K=k;else if(g["*"])K=g["*"];else{if(!h["*"]){E.push(new Ft(i,l[V],`unknown property "${V}"`));continue}K=k}E=E.concat(K({key:(i&&`${i}.`)+V,value:l[V],valueSpec:q,style:_,styleSpec:x,object:l,objectKey:V,validateSpec:k},l))}for(const V in h)g[V]||h[V].required&&h[V].default===void 0&&l[V]===void 0&&E.push(new Ft(i,l,`missing required property "${V}"`));return E}function Lc(u){const i=u.value,l=u.valueSpec,h=u.style,g=u.styleSpec,_=u.key,x=u.arrayElementValidator||u.validateSpec;if(Vn(i)!=="array")return[new Ft(_,i,`array expected, ${Vn(i)} found`)];if(l.length&&i.length!==l.length)return[new Ft(_,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Ft(_,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let k={type:l.value,values:l.values};g.$version<7&&(k.function=l.function),Vn(l.value)==="object"&&(k=l.value);let E=[];for(let D=0;D<i.length;D++)E=E.concat(x({array:i,arrayIndex:D,value:i[D],valueSpec:k,validateSpec:u.validateSpec,style:h,styleSpec:g,key:`${_}[${D}]`}));return E}function nu(u){const i=u.key,l=u.value,h=u.valueSpec;let g=Vn(l);return g==="number"&&l!=l&&(g="NaN"),g!=="number"?[new Ft(i,l,`number expected, ${g} found`)]:"minimum"in h&&l<h.minimum?[new Ft(i,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Ft(i,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function Yo(u){const i=u.valueSpec,l=Ii(u.value.type);let h,g,_,x={};const k=l!=="categorical"&&u.value.property===void 0,E=!k,D=Vn(u.value.stops)==="array"&&Vn(u.value.stops[0])==="array"&&Vn(u.value.stops[0][0])==="object",V=wa({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(K){if(l==="identity")return[new Ft(K.key,K.value,'identity function may not have a "stops" property')];let J=[];const ie=K.value;return J=J.concat(Lc({key:K.key,value:ie,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:j})),Vn(ie)==="array"&&ie.length===0&&J.push(new Ft(K.key,ie,"array must have at least one stop")),J},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:i,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return l==="identity"&&k&&V.push(new Ft(u.key,u.value,'missing required property "property"')),l==="identity"||u.value.stops||V.push(new Ft(u.key,u.value,'missing required property "stops"')),l==="exponential"&&u.valueSpec.expression&&!kh(u.valueSpec)&&V.push(new Ft(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(E&&!Wo(u.valueSpec)?V.push(new Ft(u.key,u.value,"property functions not supported")):k&&!Ch(u.valueSpec)&&V.push(new Ft(u.key,u.value,"zoom functions not supported"))),l!=="categorical"&&!D||u.value.property!==void 0||V.push(new Ft(u.key,u.value,'"property" property is required')),V;function j(K){let J=[];const ie=K.value,me=K.key;if(Vn(ie)!=="array")return[new Ft(me,ie,`array expected, ${Vn(ie)} found`)];if(ie.length!==2)return[new Ft(me,ie,`array length 2 expected, length ${ie.length} found`)];if(D){if(Vn(ie[0])!=="object")return[new Ft(me,ie,`object expected, ${Vn(ie[0])} found`)];if(ie[0].zoom===void 0)return[new Ft(me,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new Ft(me,ie,"object stop key must have value")];if(_&&_>Ii(ie[0].zoom))return[new Ft(me,ie[0].zoom,"stop zoom values must appear in ascending order")];Ii(ie[0].zoom)!==_&&(_=Ii(ie[0].zoom),g=void 0,x={}),J=J.concat(wa({key:`${me}[0]`,value:ie[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:nu,value:q}}))}else J=J.concat(q({key:`${me}[0]`,value:ie[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},ie));return Ic(Ps(ie[1]))?J.concat([new Ft(`${me}[1]`,ie[1],"expressions are not allowed in function stops.")]):J.concat(K.validateSpec({key:`${me}[1]`,value:ie[1],valueSpec:i,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function q(K,J){const ie=Vn(K.value),me=Ii(K.value),xe=K.value!==null?K.value:J;if(h){if(ie!==h)return[new Ft(K.key,xe,`${ie} stop domain type must match previous stop domain type ${h}`)]}else h=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean")return[new Ft(K.key,xe,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&l!=="categorical"){let Ne=`number expected, ${ie} found`;return Wo(i)&&l===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ft(K.key,xe,Ne)]}return l!=="categorical"||ie!=="number"||isFinite(me)&&Math.floor(me)===me?l!=="categorical"&&ie==="number"&&g!==void 0&&me<g?[new Ft(K.key,xe,"stop domain values must appear in ascending order")]:(g=me,l==="categorical"&&me in x?[new Ft(K.key,xe,"stop domain values must be unique")]:(x[me]=!0,[])):[new Ft(K.key,xe,`integer expected, found ${me}`)]}}function Xo(u){const i=(u.expressionContext==="property"?Th:Ac)(Ps(u.value),u.valueSpec);if(i.result==="error")return i.value.map(h=>new Ft(`${u.key}${h.key}`,u.value,h.message));const l=i.value.expression||i.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!l.outputDefined())return[new Ft(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Yl(l))return[new Ft(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Yl(l))return[new Ft(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Ho(l,["zoom","feature-state"]))return[new Ft(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Tc(l))return[new Ft(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ah(u){const i=u.key,l=u.value,h=Vn(l);return h!=="string"?[new Ft(i,l,`color expected, ${h} found`)]:zn.parse(String(l))?[]:[new Ft(i,l,`color expected, "${l}" found`)]}function iu(u){const i=u.key,l=u.value,h=u.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(Ii(l))===-1&&g.push(new Ft(i,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Ii(l))===-1&&g.push(new Ft(i,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Eh(u){return eu(Ps(u.value))?Xo(mr({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ap(u)}function ap(u){const i=u.value,l=u.key;if(Vn(i)!=="array")return[new Ft(l,i,`array expected, ${Vn(i)} found`)];const h=u.styleSpec;let g,_=[];if(i.length<1)return[new Ft(l,i,"filter array must have at least 1 element")];switch(_=_.concat(iu({key:`${l}[0]`,value:i[0],valueSpec:h.filter_operator,style:u.style,styleSpec:u.styleSpec})),Ii(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Ii(i[1])==="$type"&&_.push(new Ft(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&_.push(new Ft(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=Vn(i[1]),g!=="string"&&_.push(new Ft(`${l}[1]`,i[1],`string expected, ${g} found`)));for(let x=2;x<i.length;x++)g=Vn(i[x]),Ii(i[1])==="$type"?_=_.concat(iu({key:`${l}[${x}]`,value:i[x],valueSpec:h.geometry_type,style:u.style,styleSpec:u.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Ft(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)_=_.concat(ap({key:`${l}[${x}]`,value:i[x],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":g=Vn(i[1]),i.length!==2?_.push(new Ft(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Ft(`${l}[1]`,i[1],`string expected, ${g} found`))}return _}function sp(u,i){const l=u.key,h=u.validateSpec,g=u.style,_=u.styleSpec,x=u.value,k=u.objectKey,E=_[`${i}_${u.layerType}`];if(!E)return[];const D=k.match(/^(.*)-transition$/);if(i==="paint"&&D&&E[D[1]]&&E[D[1]].transition)return h({key:l,value:x,valueSpec:_.transition,style:g,styleSpec:_});const V=u.valueSpec||E[k];if(!V)return[new Ft(l,x,`unknown property "${k}"`)];let j;if(Vn(x)==="string"&&Wo(V)&&!V.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new Ft(l,x,`"${k}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const q=[];return u.layerType==="symbol"&&(k==="text-field"&&g&&!g.glyphs&&q.push(new Ft(l,x,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&so(Ps(x))&&Ii(x.type)==="identity"&&q.push(new Ft(l,x,'"text-font" does not support identity functions'))),q.concat(h({key:u.key,value:x,valueSpec:V,style:g,styleSpec:_,expressionContext:"property",propertyType:i,propertyKey:k}))}function Jo(u){return sp(u,"paint")}function Qo(u){return sp(u,"layout")}function Kr(u){let i=[];const l=u.value,h=u.key,g=u.style,_=u.styleSpec;if(Vn(l)!=="object")return[new Ft(h,l,`object expected, ${Vn(l)} found`)];l.type||l.ref||i.push(new Ft(h,l,'either "type" or "ref" is required'));let x=Ii(l.type);const k=Ii(l.ref);if(l.id){const E=Ii(l.id);for(let D=0;D<u.arrayIndex;D++){const V=g.layers[D];Ii(V.id)===E&&i.push(new Ft(h,l.id,`duplicate layer id "${l.id}", previously used at line ${V.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(D=>{D in l&&i.push(new Ft(h,l[D],`"${D}" is prohibited for ref layers`))}),g.layers.forEach(D=>{Ii(D.id)===k&&(E=D)}),E?E.ref?i.push(new Ft(h,l.ref,"ref cannot reference another ref layer")):x=Ii(E.type):i.push(new Ft(h,l.ref,`ref layer "${k}" not found`))}else if(x!=="background")if(l.source){const E=g.sources&&g.sources[l.source],D=E&&Ii(E.type);E?D==="vector"&&x==="raster"?i.push(new Ft(h,l.source,`layer "${l.id}" requires a raster source`)):D!=="raster-dem"&&x==="hillshade"||D!=="raster-dem"&&x==="color-relief"?i.push(new Ft(h,l.source,`layer "${l.id}" requires a raster-dem source`)):D==="raster"&&x!=="raster"?i.push(new Ft(h,l.source,`layer "${l.id}" requires a vector source`)):D!=="vector"||l["source-layer"]?D==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?i.push(new Ft(h,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||D==="geojson"&&E.lineMetrics||i.push(new Ft(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ft(h,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Ft(h,l.source,`source "${l.source}" not found`))}else i.push(new Ft(h,l,'missing required property "source"'));return i=i.concat(wa({key:h,value:l,valueSpec:_.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${h}.type`,value:l.type,valueSpec:_.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:l,objectKey:"type"}),filter:Eh,layout:E=>wa({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":D=>Qo(mr({layerType:x},D))}}),paint:E=>wa({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":D=>Jo(mr({layerType:x},D))}})}})),i}function Ia(u){const i=u.value,l=u.key,h=Vn(i);return h!=="string"?[new Ft(l,i,`string expected, ${h} found`)]:[]}const Mh={promoteId:function({key:u,value:i}){if(Vn(i)==="string")return Ia({key:u,value:i});{const l=[];for(const h in i)l.push(...Ia({key:`${u}.${h}`,value:i[h]}));return l}}};function op(u){const i=u.value,l=u.key,h=u.styleSpec,g=u.style,_=u.validateSpec;if(!i.type)return[new Ft(l,i,'"type" is required')];const x=Ii(i.type);let k;switch(x){case"vector":case"raster":return k=wa({key:l,value:i,valueSpec:h[`source_${x.replace("-","_")}`],style:u.style,styleSpec:h,objectElementValidators:Mh,validateSpec:_}),k;case"raster-dem":return k=function(E){var D;const V=(D=E.sourceName)!==null&&D!==void 0?D:"",j=E.value,q=E.styleSpec,K=q.source_raster_dem,J=E.style;let ie=[];const me=Vn(j);if(j===void 0)return ie;if(me!=="object")return ie.push(new Ft("source_raster_dem",j,`object expected, ${me} found`)),ie;const xe=Ii(j.encoding)==="custom",Ne=["redFactor","greenFactor","blueFactor","baseShift"],Pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const Z in j)!xe&&Ne.includes(Z)?ie.push(new Ft(Z,j[Z],`In "${V}": "${Z}" is only valid when "encoding" is set to "custom". ${Pe} encoding found`)):K[Z]?ie=ie.concat(E.validateSpec({key:Z,value:j[Z],valueSpec:K[Z],validateSpec:E.validateSpec,style:J,styleSpec:q})):ie.push(new Ft(Z,j[Z],`unknown property "${Z}"`));return ie}({sourceName:l,value:i,style:u.style,styleSpec:h,validateSpec:_}),k;case"geojson":if(k=wa({key:l,value:i,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:Mh}),i.cluster)for(const E in i.clusterProperties){const[D,V]=i.clusterProperties[E],j=typeof D=="string"?[D,["accumulated"],["get",E]]:D;k.push(...Xo({key:`${l}.${E}.map`,value:V,expressionContext:"cluster-map"})),k.push(...Xo({key:`${l}.${E}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return k;case"video":return wa({key:l,value:i,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return wa({key:l,value:i,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new Ft(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return iu({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function lp(u){const i=u.value,l=u.styleSpec,h=l.light,g=u.style;let _=[];const x=Vn(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Ft("light",i,`object expected, ${x} found`)]),_;for(const k in i){const E=k.match(/^(.*)-transition$/);_=_.concat(E&&h[E[1]]&&h[E[1]].transition?u.validateSpec({key:k,value:i[k],valueSpec:l.transition,validateSpec:u.validateSpec,style:g,styleSpec:l}):h[k]?u.validateSpec({key:k,value:i[k],valueSpec:h[k],validateSpec:u.validateSpec,style:g,styleSpec:l}):[new Ft(k,i[k],`unknown property "${k}"`)])}return _}function el(u){const i=u.value,l=u.styleSpec,h=l.sky,g=u.style,_=Vn(i);if(i===void 0)return[];if(_!=="object")return[new Ft("sky",i,`object expected, ${_} found`)];let x=[];for(const k in i)x=x.concat(h[k]?u.validateSpec({key:k,value:i[k],valueSpec:h[k],style:g,styleSpec:l}):[new Ft(k,i[k],`unknown property "${k}"`)]);return x}function Dh(u){const i=u.value,l=u.styleSpec,h=l.terrain,g=u.style;let _=[];const x=Vn(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Ft("terrain",i,`object expected, ${x} found`)]),_;for(const k in i)_=_.concat(h[k]?u.validateSpec({key:k,value:i[k],valueSpec:h[k],validateSpec:u.validateSpec,style:g,styleSpec:l}):[new Ft(k,i[k],`unknown property "${k}"`)]);return _}function zc(u){let i=[];const l=u.value,h=u.key;if(Array.isArray(l)){const g=[],_=[];for(const x in l)l[x].id&&g.includes(l[x].id)&&i.push(new Ft(h,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),g.push(l[x].id),l[x].url&&_.includes(l[x].url)&&i.push(new Ft(h,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),_.push(l[x].url),i=i.concat(wa({key:`${h}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return i}return Ia({key:h,value:l})}function up(u){return i=u.value,i&&i.constructor===Object?[]:[new Ft(u.key,u.value,`object expected, ${Vn(u.value)} found`)];var i}const Vc={"*":()=>[],array:Lc,boolean:function(u){const i=u.value,l=u.key,h=Vn(i);return h!=="boolean"?[new Ft(l,i,`boolean expected, ${h} found`)]:[]},number:nu,color:Ah,constants:rp,enum:iu,filter:Eh,function:Yo,layer:Kr,object:wa,source:op,light:lp,sky:el,terrain:Dh,projection:function(u){const i=u.value,l=u.styleSpec,h=l.projection,g=u.style,_=Vn(i);if(i===void 0)return[];if(_!=="object")return[new Ft("projection",i,`object expected, ${_} found`)];let x=[];for(const k in i)x=x.concat(h[k]?u.validateSpec({key:k,value:i[k],valueSpec:h[k],style:g,styleSpec:l}):[new Ft(k,i[k],`unknown property "${k}"`)]);return x},projectionDefinition:function(u){const i=u.key;let l=u.value;l=l instanceof String?l.valueOf():l;const h=Vn(l);return h!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(l)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(l)?["array","string"].includes(h)?[]:[new Ft(i,l,`projection expected, invalid type "${h}" found`)]:[new Ft(i,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Ia,formatted:function(u){return Ia(u).length===0?[]:Xo(u)},resolvedImage:function(u){return Ia(u).length===0?[]:Xo(u)},padding:function(u){const i=u.key,l=u.value;if(Vn(l)==="array"){if(l.length<1||l.length>4)return[new Ft(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<l.length;_++)g=g.concat(u.validateSpec({key:`${i}[${_}]`,value:l[_],validateSpec:u.validateSpec,valueSpec:h}));return g}return nu({key:i,value:l,valueSpec:{}})},numberArray:function(u){const i=u.key,l=u.value;if(Vn(l)==="array"){const h={type:"number"};if(l.length<1)return[new Ft(i,l,"array length at least 1 expected, length 0 found")];let g=[];for(let _=0;_<l.length;_++)g=g.concat(u.validateSpec({key:`${i}[${_}]`,value:l[_],validateSpec:u.validateSpec,valueSpec:h}));return g}return nu({key:i,value:l,valueSpec:{}})},colorArray:function(u){const i=u.key,l=u.value;if(Vn(l)==="array"){if(l.length<1)return[new Ft(i,l,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<l.length;g++)h=h.concat(Ah({key:`${i}[${g}]`,value:l[g]}));return h}return Ah({key:i,value:l})},variableAnchorOffsetCollection:function(u){const i=u.key,l=u.value,h=Vn(l),g=u.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Ft(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<l.length;x+=2)_=_.concat(iu({key:`${i}[${x}]`,value:l[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(Lc({key:`${i}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:g}));return _},sprite:zc,state:up};function Bc(u){const i=u.value,l=u.valueSpec,h=u.styleSpec;return u.validateSpec=Bc,l.expression&&so(Ii(i))?Yo(u):l.expression&&Ic(Ps(i))?Xo(u):l.type&&Vc[l.type]?Vc[l.type](u):wa(mr({},u,{valueSpec:l.type?h[l.type]:l}))}function tl(u){const i=u.value,l=u.key,h=Ia(u);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new Ft(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new Ft(l,i,'"glyphs" url must include a "{range}" token'))),h}function Sa(u,i=Oe){let l=[];return l=l.concat(Bc({key:"",value:u,valueSpec:i.$root,styleSpec:i,style:u,validateSpec:Bc,objectElementValidators:{glyphs:tl,"*":()=>[]}})),u.constants&&(l=l.concat(rp({key:"constants",value:u.constants}))),cp(l)}function Aa(u){return function(i){return u({...i,validateSpec:Bc})}}function cp(u){return[].concat(u).sort((i,l)=>i.line-l.line)}function Fr(u){return function(...i){return cp(u.apply(this,i))}}Sa.source=Fr(Aa(op)),Sa.sprite=Fr(Aa(zc)),Sa.glyphs=Fr(Aa(tl)),Sa.light=Fr(Aa(lp)),Sa.sky=Fr(Aa(el)),Sa.terrain=Fr(Aa(Dh)),Sa.state=Fr(Aa(up)),Sa.layer=Fr(Aa(Kr)),Sa.filter=Fr(Aa(Eh)),Sa.paintProperty=Fr(Aa(Jo)),Sa.layoutProperty=Fr(Aa(Qo));const nl=Sa,Rv=nl.light,Oc=nl.sky,Lv=nl.paintProperty,Rh=nl.layoutProperty;function ru(u,i){let l=!1;if(i&&i.length)for(const h of i)u.fire(new Xe(new Error(h.message))),l=!0;return l}class il{constructor(i,l,h){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const x=new Int32Array(this.arrayBuffer);i=x[0],this.d=(l=x[1])+2*(h=x[2]);for(let E=0;E<this.d*this.d;E++){const D=x[3+E],V=x[3+E+1];g.push(D===V?null:x.subarray(D,V))}const k=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],k),this.bboxes=x.subarray(k),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=h,this.scale=l/i,this.uid=0;const _=h/l*i;this.min=-_,this.max=i+_}insert(i,l,h,g,_){this._forEachCell(l,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,h,g,_,x){this.cells[_].push(x)}query(i,l,h,g,_){const x=this.min,k=this.max;if(i<=x&&l<=x&&k<=h&&k<=g&&!_)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(i,l,h,g,this._queryCell,E,{},_),E}}_queryCell(i,l,h,g,_,x,k,E){const D=this.cells[_];if(D!==null){const V=this.keys,j=this.bboxes;for(let q=0;q<D.length;q++){const K=D[q];if(k[K]===void 0){const J=4*K;(E?E(j[J+0],j[J+1],j[J+2],j[J+3]):i<=j[J+2]&&l<=j[J+3]&&h>=j[J+0]&&g>=j[J+1])?(k[K]=!0,x.push(V[K])):k[K]=!1}}}}_forEachCell(i,l,h,g,_,x,k,E){const D=this._convertToCellCoord(i),V=this._convertToCellCoord(l),j=this._convertToCellCoord(h),q=this._convertToCellCoord(g);for(let K=D;K<=j;K++)for(let J=V;J<=q;J++){const ie=this.d*J+K;if((!E||E(this._convertFromCellCoord(K),this._convertFromCellCoord(J),this._convertFromCellCoord(K+1),this._convertFromCellCoord(J+1)))&&_.call(this,i,l,h,g,ie,x,k,E))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(l+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=l;for(let x=0;x<i.length;x++){const k=i[x];g[3+x]=_,g.set(k,_),_+=k.length}return g[3+i.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+i.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(i,l){const h=i.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(i){return new il(i.buffer)}}const Wa={};function Kt(u,i,l={}){if(Wa[u])throw new Error(`${u} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:u,writeable:!1}),Wa[u]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}Kt("Object",Object),Kt("Set",Set),Kt("TransferableGridIndex",il),Kt("Color",zn),Kt("Error",Error),Kt("AJAXError",Ce),Kt("ResolvedImage",Wr),Kt("StylePropertyFunction",Ql),Kt("StyleExpression",Pc,{omit:["_evaluator"]}),Kt("ZoomDependentExpression",Ec),Kt("ZoomConstantExpression",Jl),Kt("CompoundExpression",xa,{omit:["_evaluate"]});for(const u in Go)Go[u]._classRegistryKey||Kt(`Expression_${u}`,Go[u]);function Lh(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function au(u){return u.$name||u.constructor._classRegistryKey}function zh(u){return!function(i){if(i===null||typeof i!="object")return!1;const l=au(i);return!(!l||l==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||Lh(u)||It(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function su(u,i){if(zh(u))return(Lh(u)||It(u))&&i&&i.push(u),ArrayBuffer.isView(u)&&i&&i.push(u.buffer),u instanceof ImageData&&i&&i.push(u.data.buffer),u;if(Array.isArray(u)){const _=[];for(const x of u)_.push(su(x,i));return _}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const l=au(u);if(!l)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!Wa[l])throw new Error(`${l} is not registered.`);const{klass:h}=Wa[l],g=h.serialize?h.serialize(u,i):{};if(h.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in u){if(!u.hasOwnProperty(_)||Wa[l].omit.indexOf(_)>=0)continue;const x=u[_];g[_]=Wa[l].shallow.indexOf(_)>=0?x:su(x,i)}u instanceof Error&&(g.message=u.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(g.$name=l),g}function rl(u){if(zh(u))return u;if(Array.isArray(u))return u.map(rl);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const i=au(u)||"Object";if(!Wa[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=Wa[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(u);const h=Object.create(l.prototype);for(const g of Object.keys(u)){if(g==="$name")continue;const _=u[g];h[g]=Wa[i].shallow.indexOf(g)>=0?_:rl(_)}return h}class Vh{constructor(){this.first=!0}update(i,l){const h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}const Bn={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Bh(u){for(const i of u)if($c(i.charCodeAt(0)))return!0;return!1}function dp(u){for(const i of u)if(!Vv(i.charCodeAt(0)))return!1;return!0}function Fc(u){const i=u.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(i.join("|"),"u")}const zv=Fc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Vv(u){return!zv.test(String.fromCodePoint(u))}const Oh=Fc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function $c(u){return!(u!==746&&u!==747&&(u<4352||!(Bn["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Bn["CJK Compatibility"](u)||Bn["CJK Strokes"](u)||!(!Bn["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Bn["Enclosed CJK Letters and Months"](u)||Bn["Ideographic Description Characters"](u)||Bn.Kanbun(u)||Bn.Katakana(u)&&u!==12540||!(!Bn["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Bn["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Bn["Vertical Forms"](u)||Bn["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Oh.test(String.fromCodePoint(u)))))}function Fh(u){return!($c(u)||function(i){return!!(Bn["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Bn["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Bn["Letterlike Symbols"](i)||Bn["Number Forms"](i)||Bn["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Bn["Control Pictures"](i)&&i!==9251||Bn["Optical Character Recognition"](i)||Bn["Enclosed Alphanumerics"](i)||Bn["Geometric Shapes"](i)||Bn["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Bn["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Bn["CJK Symbols and Punctuation"](i)||Bn.Katakana(i)||Bn["Private Use Area"](i)||Bn["CJK Compatibility Forms"](i)||Bn["Small Form Variants"](i)||Bn["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(u))}const hp=Fc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ou(u){return hp.test(String.fromCodePoint(u))}function Bv(u,i){return!(!i&&ou(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Bn.Khmer(u))}function $h(u){for(const i of u)if(ou(i.charCodeAt(0)))return!0;return!1}const Is=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(Is.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,i){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const l=u.pluginURL,h=new Promise(_=>{this.loadScriptResolve=_});i(l);const g=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([h,g]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:l};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class mi{constructor(i,l){this.zoom=i,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new Vh,this.transition=l.transition||{},this.globalState=l.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vh,this.transition={},this.globalState={})}isSupportedScript(i){return function(l,h){for(const g of l)if(!Bv(g.charCodeAt(0),h))return!1;return!0}(i,Is.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class lu{constructor(i,l){this.property=i,this.value=l,this.expression=function(h,g){if(so(h))return new Ql(h,g);if(Ic(h)){const _=Th(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=zn.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?g.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?_=jn.parse(h):g.type==="projectionDefinition"&&typeof h=="string"&&(_=wn.parse(h)):_=rr.parse(h):_=Ir.parse(h):_=Gi.parse(h),{globalStateRefs:new Set,kind:"constant",evaluate:()=>_}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,l,h){return this.property.possiblyEvaluate(this,i,l,h)}}class jc{constructor(i){this.property=i,this.value=new lu(i,void 0)}transitioned(i,l){return new fp(this.property,this.value,l,St({},i.transition,this.transition),i.now)}untransitioned(){return new fp(this.property,this.value,null,{},0)}}class jh{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Ze(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new jc(this._values[i].property)),this._values[i].value=new lu(this._values[i].property,l===null?void 0:Ze(l))}getTransition(i){return Ze(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new jc(this._values[i].property)),this._values[i].transition=Ze(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h);const g=this.getTransition(l);g!==void 0&&(i[`${l}-transition`]=g)}return i}transitioned(i,l){const h=new mp(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(i,l._values[g]);return h}untransitioned(){const i=new mp(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class fp{constructor(i,l,h,g,_){this.property=i,this.value=l,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(i,l,h){const g=i.now||0,_=this.value.possiblyEvaluate(i,l,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(i,l,h);{const k=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,h),_,xt(k))}}return _}}class mp{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,h){const g=new Nc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,l,h);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Ov{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Ze(this._values[i].value)}setValue(i,l){this._values[i]=new lu(this._values[i].property,l===null?void 0:Ze(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h)}return i}possiblyEvaluate(i,l,h){const g=new Nc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,l,h);return g}}class Za{constructor(i,l,h){this.property=i,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,h,g){return this.property.evaluate(this.value,this.parameters,i,l,h,g)}}class Nc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Qt{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,h){const g=la[this.specification.type];return g?g(i,l,h):i}}class dn{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,h,g){return new Za(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},h,g)}:i.expression,l)}interpolate(i,l,h){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Za(this,{kind:"constant",value:void 0},i.parameters);const g=la[this.specification.type];if(g){const _=g(i.value.value,l.value.value,h);return new Za(this,{kind:"constant",value:_},i.parameters)}return i}evaluate(i,l,h,g,_,x){return i.kind==="constant"?i.value:i.evaluate(l,h,g,_,x)}}class Uc extends dn{possiblyEvaluate(i,l,h,g){if(i.value===void 0)return new Za(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const _=i.expression.evaluate(l,null,{},h,g),x=i.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,k=this._calculate(x,x,x,l);return new Za(this,{kind:"constant",value:k},l)}if(i.expression.kind==="camera"){const _=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Za(this,{kind:"constant",value:_},l)}return new Za(this,i.expression,l)}evaluate(i,l,h,g,_,x){if(i.kind==="source"){const k=i.evaluate(l,h,g,_,x);return this._calculate(k,k,k,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},h,g),i.evaluate({zoom:Math.floor(l.zoom)},h,g),i.evaluate({zoom:Math.floor(l.zoom)+1},h,g),l):i.value}_calculate(i,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:h,to:l}}interpolate(i){return i}}class Nh{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const _=i.expression.evaluate(l,null,{},h,g);return this._calculate(_,_,_,l)}return this._calculate(i.expression.evaluate(new mi(Math.floor(l.zoom-1),l)),i.expression.evaluate(new mi(Math.floor(l.zoom),l)),i.expression.evaluate(new mi(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:h,to:l}}interpolate(i){return i}}class uu{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,g){return!!i.expression.evaluate(l,null,{},h,g)}interpolate(){return!1}}class $r{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const h=i[l];h.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new lu(h,void 0),_=this.defaultTransitionablePropertyValues[l]=new jc(h);this.defaultTransitioningPropertyValues[l]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}Kt("DataDrivenProperty",dn),Kt("DataConstantProperty",Qt),Kt("CrossFadedDataDrivenProperty",Uc),Kt("CrossFadedProperty",Nh),Kt("ColorRampProperty",uu);const pp="-transition";class pr extends Ct{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=Ts(i.filter)),l.layout&&(this._unevaluatedLayout=new Ov(l.layout)),l.paint)){this._transitionablePaint=new jh(l.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Nc(l.paint)}}setFilter(i){this.filter=i,this._featureFilter=Ts(i)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[l];for(const g of h.getGlobalStateRefs())i.add(g)}for(const l of this._featureFilter.getGlobalStateRefs())i.add(l);return i}setLayoutProperty(i,l,h={}){l!=null&&this._validate(Rh,`layers.${this.id}.layout.${i}`,i,l,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(pp)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,h={}){if(l!=null&&this._validate(Lv,`layers.${this.id}.paint.${i}`,i,l,h))return!1;if(i.endsWith(pp))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[i],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),k=g.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const E=this._transitionablePaint._values[i].value;return E.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(i,k,E)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Le(i,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(i,l,h,g,_={}){return(!_||_.validate!==!1)&&ru(this,i.call(nl,{key:l,layerType:this.type,objectKey:h,value:g,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Za&&Wo(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const gp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oo{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class xi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ai(u,i=1){let l=0,h=0;return{members:u.map(g=>{const _=gp[g.type].BYTES_PER_ELEMENT,x=l=vp(l,Math.max(i,_)),k=g.components||1;return h=Math.max(h,_),l+=_*k,{name:g.name,type:g.type,components:k,offset:x}}),size:vp(l,Math.max(h,i)),alignment:i}}function vp(u,i){return Math.ceil(u/i)*i}class As extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.int16[g+0]=l,this.int16[g+1]=h,i}}As.prototype.bytesPerElement=4,Kt("StructArrayLayout2i4",As);class Es extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.int16[_+0]=l,this.int16[_+1]=h,this.int16[_+2]=g,i}}Es.prototype.bytesPerElement=6,Kt("StructArrayLayout3i6",Es);class Uh extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,l,h,g)}emplace(i,l,h,g,_){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,i}}Uh.prototype.bytesPerElement=8,Kt("StructArrayLayout4i8",Uh);class Gc extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const k=this.length;return this.resize(k+1),this.emplace(k,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,k){const E=6*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=k,i}}Gc.prototype.bytesPerElement=12,Kt("StructArrayLayout2i4i12",Gc);class lo extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const k=this.length;return this.resize(k+1),this.emplace(k,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,k){const E=4*i,D=8*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.uint8[D+4]=g,this.uint8[D+5]=_,this.uint8[D+6]=x,this.uint8[D+7]=k,i}}lo.prototype.bytesPerElement=8,Kt("StructArrayLayout2i4ub8",lo);class cu extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.float32[g+0]=l,this.float32[g+1]=h,i}}cu.prototype.bytesPerElement=8,Kt("StructArrayLayout2f8",cu);class Gh extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,k,E,D,V){const j=this.length;return this.resize(j+1),this.emplace(j,i,l,h,g,_,x,k,E,D,V)}emplace(i,l,h,g,_,x,k,E,D,V,j){const q=10*i;return this.uint16[q+0]=l,this.uint16[q+1]=h,this.uint16[q+2]=g,this.uint16[q+3]=_,this.uint16[q+4]=x,this.uint16[q+5]=k,this.uint16[q+6]=E,this.uint16[q+7]=D,this.uint16[q+8]=V,this.uint16[q+9]=j,i}}Gh.prototype.bytesPerElement=20,Kt("StructArrayLayout10ui20",Gh);class Hc extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,k,E,D,V,j,q){const K=this.length;return this.resize(K+1),this.emplace(K,i,l,h,g,_,x,k,E,D,V,j,q)}emplace(i,l,h,g,_,x,k,E,D,V,j,q,K){const J=12*i;return this.int16[J+0]=l,this.int16[J+1]=h,this.int16[J+2]=g,this.int16[J+3]=_,this.uint16[J+4]=x,this.uint16[J+5]=k,this.uint16[J+6]=E,this.uint16[J+7]=D,this.int16[J+8]=V,this.int16[J+9]=j,this.int16[J+10]=q,this.int16[J+11]=K,i}}Hc.prototype.bytesPerElement=24,Kt("StructArrayLayout4i4ui4i24",Hc);class Hh extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.float32[_+0]=l,this.float32[_+1]=h,this.float32[_+2]=g,i}}Hh.prototype.bytesPerElement=12,Kt("StructArrayLayout3f12",Hh);class v extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}v.prototype.bytesPerElement=4,Kt("StructArrayLayout1ul4",v);class t extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,k,E,D){const V=this.length;return this.resize(V+1),this.emplace(V,i,l,h,g,_,x,k,E,D)}emplace(i,l,h,g,_,x,k,E,D,V){const j=10*i,q=5*i;return this.int16[j+0]=l,this.int16[j+1]=h,this.int16[j+2]=g,this.int16[j+3]=_,this.int16[j+4]=x,this.int16[j+5]=k,this.uint32[q+3]=E,this.uint16[j+8]=D,this.uint16[j+9]=V,i}}t.prototype.bytesPerElement=20,Kt("StructArrayLayout6i1ul2ui20",t);class o extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const k=this.length;return this.resize(k+1),this.emplace(k,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,k){const E=6*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=k,i}}o.prototype.bytesPerElement=12,Kt("StructArrayLayout2i2i2i12",o);class m extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,g,_)}emplace(i,l,h,g,_,x){const k=4*i,E=8*i;return this.float32[k+0]=l,this.float32[k+1]=h,this.float32[k+2]=g,this.int16[E+6]=_,this.int16[E+7]=x,i}}m.prototype.bytesPerElement=16,Kt("StructArrayLayout2f1f2i16",m);class p extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x){const k=this.length;return this.resize(k+1),this.emplace(k,i,l,h,g,_,x)}emplace(i,l,h,g,_,x,k){const E=16*i,D=4*i,V=8*i;return this.uint8[E+0]=l,this.uint8[E+1]=h,this.float32[D+1]=g,this.float32[D+2]=_,this.int16[V+6]=x,this.int16[V+7]=k,i}}p.prototype.bytesPerElement=16,Kt("StructArrayLayout2ub2f2i16",p);class y extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.uint16[_+0]=l,this.uint16[_+1]=h,this.uint16[_+2]=g,i}}y.prototype.bytesPerElement=6,Kt("StructArrayLayout3ui6",y);class S extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,k,E,D,V,j,q,K,J,ie,me,xe){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,i,l,h,g,_,x,k,E,D,V,j,q,K,J,ie,me,xe)}emplace(i,l,h,g,_,x,k,E,D,V,j,q,K,J,ie,me,xe,Ne){const Pe=24*i,Z=12*i,de=48*i;return this.int16[Pe+0]=l,this.int16[Pe+1]=h,this.uint16[Pe+2]=g,this.uint16[Pe+3]=_,this.uint32[Z+2]=x,this.uint32[Z+3]=k,this.uint32[Z+4]=E,this.uint16[Pe+10]=D,this.uint16[Pe+11]=V,this.uint16[Pe+12]=j,this.float32[Z+7]=q,this.float32[Z+8]=K,this.uint8[de+36]=J,this.uint8[de+37]=ie,this.uint8[de+38]=me,this.uint32[Z+10]=xe,this.int16[Pe+22]=Ne,i}}S.prototype.bytesPerElement=48,Kt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",S);class I extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g,_,x,k,E,D,V,j,q,K,J,ie,me,xe,Ne,Pe,Z,de,Ee,it,At,dt,yt,zt,Mt){const Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,i,l,h,g,_,x,k,E,D,V,j,q,K,J,ie,me,xe,Ne,Pe,Z,de,Ee,it,At,dt,yt,zt,Mt)}emplace(i,l,h,g,_,x,k,E,D,V,j,q,K,J,ie,me,xe,Ne,Pe,Z,de,Ee,it,At,dt,yt,zt,Mt,Vt){const wt=32*i,Jt=16*i;return this.int16[wt+0]=l,this.int16[wt+1]=h,this.int16[wt+2]=g,this.int16[wt+3]=_,this.int16[wt+4]=x,this.int16[wt+5]=k,this.int16[wt+6]=E,this.int16[wt+7]=D,this.uint16[wt+8]=V,this.uint16[wt+9]=j,this.uint16[wt+10]=q,this.uint16[wt+11]=K,this.uint16[wt+12]=J,this.uint16[wt+13]=ie,this.uint16[wt+14]=me,this.uint16[wt+15]=xe,this.uint16[wt+16]=Ne,this.uint16[wt+17]=Pe,this.uint16[wt+18]=Z,this.uint16[wt+19]=de,this.uint16[wt+20]=Ee,this.uint16[wt+21]=it,this.uint16[wt+22]=At,this.uint32[Jt+12]=dt,this.float32[Jt+13]=yt,this.float32[Jt+14]=zt,this.uint16[wt+30]=Mt,this.uint16[wt+31]=Vt,i}}I.prototype.bytesPerElement=64,Kt("StructArrayLayout8i15ui1ul2f2ui64",I);class M extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}M.prototype.bytesPerElement=4,Kt("StructArrayLayout1f4",M);class L extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=3*i;return this.uint16[6*i+0]=l,this.float32[_+1]=h,this.float32[_+2]=g,i}}L.prototype.bytesPerElement=12,Kt("StructArrayLayout1ui2f12",L);class B extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const _=4*i;return this.uint32[2*i+0]=l,this.uint16[_+2]=h,this.uint16[_+3]=g,i}}B.prototype.bytesPerElement=8,Kt("StructArrayLayout1ul2ui8",B);class G extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.uint16[g+0]=l,this.uint16[g+1]=h,i}}G.prototype.bytesPerElement=4,Kt("StructArrayLayout2ui4",G);class N extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}N.prototype.bytesPerElement=2,Kt("StructArrayLayout1ui2",N);class W extends xi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,l,h,g)}emplace(i,l,h,g,_){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,i}}W.prototype.bytesPerElement=16,Kt("StructArrayLayout4f16",W);class ee extends oo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}ee.prototype.size=20;class ve extends t{get(i){return new ee(this,i)}}Kt("CollisionBoxArray",ve);class ge extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class ye extends S{get(i){return new ge(this,i)}}Kt("PlacedSymbolArray",ye);class we extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}we.prototype.size=64;class Ae extends I{get(i){return new we(this,i)}}Kt("SymbolInstanceArray",Ae);class ke extends M{getoffsetX(i){return this.float32[1*i+0]}}Kt("GlyphOffsetArray",ke);class De extends Es{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Kt("SymbolLineVertexArray",De);class Be extends oo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Be.prototype.size=12;class Te extends L{get(i){return new Be(this,i)}}Kt("TextAnchorOffsetArray",Te);class Ge extends oo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ge.prototype.size=8;class at extends B{get(i){return new Ge(this,i)}}Kt("FeatureIndexArray",at);class tt extends As{}class nt extends As{}class ot extends As{}class Nt extends Gc{}class $t extends lo{}class Et extends cu{}class Xt extends Gh{}class kn extends Hc{}class Kn extends Hh{}class wi extends v{}class ni extends o{}class Si extends p{}class ai extends y{}class ii extends G{}const si=Ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:gr}=si;class Nn{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,l,h,g){const _=this.segments[this.segments.length-1];return i>Nn.MAX_VERTEX_ARRAY_LENGTH&&Je(`Max vertices per segment is ${Nn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Nn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+i>Nn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g?this.createNewSegment(l,h,g):_}createNewSegment(i,l,h){const g={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(g.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(i,l,h){return this.prepareSegment(0,i,l,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,h,g){return new Nn([{vertexOffset:i,primitiveOffset:l,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function sr(u,i){return 256*(u=st(Math.floor(u),0,255))+st(Math.floor(i),0,255)}Nn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Kt("SegmentVector",Nn);const vr=Ai([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ms,Ds,Rs,Ka={exports:{}},du={exports:{}},hu={exports:{}},al=function(){if(Rs)return Ka.exports;Rs=1;var u=(Ms||(Ms=1,du.exports=function(l,h){var g,_,x,k,E,D,V,j;for(_=l.length-(g=3&l.length),x=h,E=3432918353,D=461845907,j=0;j<_;)V=255&l.charCodeAt(j)|(255&l.charCodeAt(++j))<<8|(255&l.charCodeAt(++j))<<16|(255&l.charCodeAt(++j))<<24,++j,x=27492+(65535&(k=5*(65535&(x=(x^=V=(65535&(V=(V=(65535&V)*E+(((V>>>16)*E&65535)<<16)&4294967295)<<15|V>>>17))*D+(((V>>>16)*D&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(k>>>16)&65535)<<16);switch(V=0,g){case 3:V^=(255&l.charCodeAt(j+2))<<16;case 2:V^=(255&l.charCodeAt(j+1))<<8;case 1:x^=V=(65535&(V=(V=(65535&(V^=255&l.charCodeAt(j)))*E+(((V>>>16)*E&65535)<<16)&4294967295)<<15|V>>>17))*D+(((V>>>16)*D&65535)<<16)&4294967295}return x^=l.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),du.exports),i=(Ds||(Ds=1,hu.exports=function(l,h){for(var g,_=l.length,x=h^_,k=0;_>=4;)g=1540483477*(65535&(g=255&l.charCodeAt(k)|(255&l.charCodeAt(++k))<<8|(255&l.charCodeAt(++k))<<16|(255&l.charCodeAt(++k))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),_-=4,++k;switch(_){case 3:x^=(255&l.charCodeAt(k+2))<<16;case 2:x^=(255&l.charCodeAt(k+1))<<8;case 1:x=1540483477*(65535&(x^=255&l.charCodeAt(k)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),hu.exports);return Ka.exports=u,Ka.exports.murmur3=u,Ka.exports.murmur2=i,Ka.exports}(),Yr=b(al);class Ea{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,h,g){this.ids.push(Ls(i)),this.positions.push(l,h,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Ls(i);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=l?g=x:h=x+1}const _=[];for(;this.ids[h]===l;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(i,l){const h=new Float64Array(i.ids),g=new Uint32Array(i.positions);return uo(h,g,0,h.length-1),l&&l.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(i){const l=new Ea;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Ls(u){const i=+u;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Yr(String(u))}function uo(u,i,l,h){for(;l<h;){const g=u[l+h>>1];let _=l-1,x=h+1;for(;;){do _++;while(u[_]<g);do x--;while(u[x]>g);if(_>=x)break;Bi(u,_,x),Bi(i,3*_,3*x),Bi(i,3*_+1,3*x+1),Bi(i,3*_+2,3*x+2)}x-l<h-x?(uo(u,i,l,x),l=x+1):(uo(u,i,x+1,h),h=x)}}function Bi(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}Kt("FeaturePositionMap",Ea);class hi{constructor(i,l){this.gl=i.gl,this.location=l}}class jr extends hi{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Xi extends hi{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class yp extends hi{constructor(i,l){super(i,l),this.current=zn.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Fv=new Float32Array(16);function qh(u){return[sr(255*u.r,255*u.g),sr(255*u.b,255*u.a)]}class fu{constructor(i,l,h){this.value=i,this.uniformNames=l.map(g=>`u_${g}`),this.type=h}setUniform(i,l,h){i.set(h.constantOr(this.value))}getBinding(i,l,h){return this.type==="color"?new yp(i,l):new jr(i,l)}}class sl{constructor(i,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setUniform(i,l,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&i.set(_)}getBinding(i,l,h){return h.substr(0,9)==="u_pattern"?new Xi(i,l):new jr(i,l)}}class os{constructor(i,l,h,g){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,l,h,g,_){const x=this.paintVertexArray.length,k=this.expression.evaluate(new mi(0),l,{},g,[],_);this.paintVertexArray.resize(i),this._setPaintValue(x,i,k)}updatePaintArray(i,l,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(i,l,_)}_setPaintValue(i,l,h){if(this.type==="color"){const g=qh(h);for(let _=i;_<l;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=i;g<l;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class yr{constructor(i,l,h,g,_,x){this.expression=i,this.uniformNames=l.map(k=>`u_${k}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=l.map(k=>({name:`a_${k}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,h,g,_){const x=this.expression.evaluate(new mi(this.zoom),l,{},g,[],_),k=this.expression.evaluate(new mi(this.zoom+1),l,{},g,[],_),E=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(E,i,x,k)}updatePaintArray(i,l,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(i,l,_,x)}_setPaintValue(i,l,h,g){if(this.type==="color"){const _=qh(h),x=qh(g);for(let k=i;k<l;k++)this.paintVertexArray.emplace(k,_[0],_[1],x[0],x[1])}else{for(let _=i;_<l;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=st(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,l,h){return new jr(i,l)}}class ls{constructor(i,l,h,g,_,x){this.expression=i,this.type=l,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(i,l,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(i,l,h,g,_){this._setPaintValues(i,l,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(i,l,h,g){if(!g||!h)return;const{min:_,mid:x,max:k}=h,E=g[_],D=g[x],V=g[k];if(E&&D&&V)for(let j=i;j<l;j++)this.zoomInPaintVertexArray.emplace(j,D.tl[0],D.tl[1],D.br[0],D.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],D.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,D.tl[0],D.tl[1],D.br[0],D.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],D.pixelRatio,V.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,vr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,vr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Wh{constructor(i,l,h){this.binders={},this._buffers=[];const g=[];for(const _ in i.paint._values){if(!h(_))continue;const x=i.paint.get(_);if(!(x instanceof Za&&Wo(x.property.specification)))continue;const k=Zh(_,i.type),E=x.value,D=x.property.specification.type,V=x.property.useIntegerZoom,j=x.property.specification["property-type"],q=j==="cross-faded"||j==="cross-faded-data-driven";if(E.kind==="constant")this.binders[_]=q?new sl(E.value,k):new fu(E.value,k,D),g.push(`/u_${_}`);else if(E.kind==="source"||q){const K=Kh(_,D,"source");this.binders[_]=q?new ls(E,D,V,l,K,i.id):new os(E,k,D,K),g.push(`/a_${_}`)}else{const K=Kh(_,D,"composite");this.binders[_]=new yr(E,k,D,V,l,K),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof os||l instanceof yr?l.maxValue:0}populatePaintArrays(i,l,h,g,_){for(const x in this.binders){const k=this.binders[x];(k instanceof os||k instanceof yr||k instanceof ls)&&k.populatePaintArray(i,l,h,g,_)}}setConstantPatternPositions(i,l){for(const h in this.binders){const g=this.binders[h];g instanceof sl&&g.setConstantPatternPositions(i,l)}}updatePaintArrays(i,l,h,g,_){let x=!1;for(const k in i){const E=l.getPositions(k);for(const D of E){const V=h.feature(D.index);for(const j in this.binders){const q=this.binders[j];if((q instanceof os||q instanceof yr||q instanceof ls)&&q.expression.isStateDependent===!0){const K=g.paint.get(j);q.expression=K.value,q.updatePaintArray(D.start,D.end,V,i[k],_),x=!0}}}}return x}defines(){const i=[];for(const l in this.binders){const h=this.binders[l];(h instanceof fu||h instanceof sl)&&i.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof os||h instanceof yr)for(let g=0;g<h.paintVertexAttributes.length;g++)i.push(h.paintVertexAttributes[g].name);else if(h instanceof ls)for(let g=0;g<vr.members.length;g++)i.push(vr.members[g].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof fu||h instanceof sl||h instanceof yr)for(const g of h.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof fu||_ instanceof sl||_ instanceof yr){for(const x of _.uniformNames)if(l[x]){const k=_.getBinding(i,l[x],x);h.push({name:x,property:g,binding:k})}}}return h}setUniforms(i,l,h,g){for(const{name:_,property:x,binding:k}of l)this.binders[x].setUniform(k,g,h.get(x),_)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(i&&h instanceof ls){const g=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof os||h instanceof yr)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(const l in this.binders){const h=this.binders[l];(h instanceof os||h instanceof yr||h instanceof ls)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof os||l instanceof yr||l instanceof ls)&&l.destroy()}}}class zs{constructor(i,l,h=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new Wh(g,l,h);this.needsUpload=!1,this._featureMap=new Ea,this._bufferOffset=0}populatePaintArrays(i,l,h,g,_,x){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(i,l,g,_,x);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(i,this._featureMap,l,_,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Zh(u,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${i}-`,"").replace(/-/g,"_")]}function Kh(u,i,l){const h={color:{source:cu,composite:W},number:{source:M,composite:cu}},g=function(_){return{"line-pattern":{source:Xt,composite:Xt},"fill-pattern":{source:Xt,composite:Xt},"fill-extrusion-pattern":{source:Xt,composite:Xt}}[_]}(u);return g&&g[l]||h[i][l]}Kt("ConstantBinder",fu),Kt("CrossFadedConstantBinder",sl),Kt("SourceExpressionBinder",os),Kt("CrossFadedCompositeBinder",ls),Kt("CompositeExpressionBinder",yr),Kt("ProgramConfiguration",Wh,{omit:["_buffers"]}),Kt("ProgramConfigurationSet",zs);const mu=Math.pow(2,14)-1,ex=-mu-1;function pu(u){const i=Ie/u.extent,l=u.loadGeometry();for(let h=0;h<l.length;h++){const g=l[h];for(let _=0;_<g.length;_++){const x=g[_],k=Math.round(x.x*i),E=Math.round(x.y*i);x.x=st(k,ex,mu),x.y=st(E,ex,mu),(k<x.x||k>x.x+1||E<x.y||E>x.y+1)&&Je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function gu(u,i){return{type:u.type,id:u.id,properties:u.properties,geometry:i?pu(u):[]}}const tx=-32768;function qI(u,i,l,h,g){u.emplaceBack(tx+8*i+h,tx+8*l+g)}class $v{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new nt,this.indexArray=new ai,this.segments=new Nn,this.programConfigurations=new zs(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){const g=this.layers[0],_=[];let x=null,k=!1,E=g.type==="heatmap";if(g.type==="circle"){const V=g;x=V.layout.get("circle-sort-key"),k=!x.isConstant(),E=E||V.paint.get("circle-pitch-alignment")==="map"}const D=E?l.subdivisionGranularity.circle:1;for(const{feature:V,id:j,index:q,sourceLayerIndex:K}of i){const J=this.layers[0]._featureFilter.needGeometry,ie=gu(V,J);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),ie,h))continue;const me=k?x.evaluate(ie,{},h):void 0,xe={id:j,properties:V.properties,type:V.type,sourceLayerIndex:K,index:q,geometry:J?ie.geometry:pu(V),patterns:{},sortKey:me};_.push(xe)}k&&_.sort((V,j)=>V.sortKey-j.sortKey);for(const V of _){const{geometry:j,index:q,sourceLayerIndex:K}=V,J=i[q].feature;this.addFeature(V,j,q,h,D),l.featureIndex.insert(J,j,q,K,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,gr),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,h,g,_=1){let x;switch(_){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const k=x.length;for(const E of l)for(const D of E){const V=D.x,j=D.y;if(V<0||V>=Ie||j<0||j>=Ie)continue;const q=this.segments.prepareSegment(k*k,this.layoutVertexArray,this.indexArray,i.sortKey),K=q.vertexLength;for(let J=0;J<k;J++)for(let ie=0;ie<k;ie++)qI(this.layoutVertexArray,V,j,x[ie],x[J]);for(let J=0;J<k-1;J++)for(let ie=0;ie<k-1;ie++){const me=K+J*k+ie,xe=K+(J+1)*k+ie;this.indexArray.emplaceBack(me,xe+1,me+1),this.indexArray.emplaceBack(me,xe,xe+1)}q.vertexLength+=k*k,q.primitiveLength+=(k-1)*(k-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},g)}}function nx(u,i){for(let l=0;l<u.length;l++)if(qc(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(qc(u,i[l]))return!0;return!!jv(u,i)}function WI(u,i,l){return!!qc(u,i)||!!Nv(i,u,l)}function ix(u,i){if(u.length===1)return ax(i,u[0]);for(let l=0;l<i.length;l++){const h=i[l];for(let g=0;g<h.length;g++)if(qc(u,h[g]))return!0}for(let l=0;l<u.length;l++)if(ax(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(jv(u,i[l]))return!0;return!1}function ZI(u,i,l){if(u.length>1){if(jv(u,i))return!0;for(let h=0;h<i.length;h++)if(Nv(i[h],u,l))return!0}for(let h=0;h<u.length;h++)if(Nv(u[h],i,l))return!0;return!1}function jv(u,i){if(u.length===0||i.length===0)return!1;for(let l=0;l<u.length-1;l++){const h=u[l],g=u[l+1];for(let _=0;_<i.length-1;_++)if(KI(h,g,i[_],i[_+1]))return!0}return!1}function KI(u,i,l,h){return Pt(u,l,h)!==Pt(i,l,h)&&Pt(u,i,l)!==Pt(u,i,h)}function Nv(u,i,l){const h=l*l;if(i.length===1)return u.distSqr(i[0])<h;for(let g=1;g<i.length;g++)if(rx(u,i[g-1],i[g])<h)return!0;return!1}function rx(u,i,l){const h=i.distSqr(l);if(h===0)return u.distSqr(i);const g=((u.x-i.x)*(l.x-i.x)+(u.y-i.y)*(l.y-i.y))/h;return u.distSqr(g<0?i:g>1?l:l.sub(i)._mult(g)._add(i))}function ax(u,i){let l,h,g,_=!1;for(let x=0;x<u.length;x++){l=u[x];for(let k=0,E=l.length-1;k<l.length;E=k++)h=l[k],g=l[E],h.y>i.y!=g.y>i.y&&i.x<(g.x-h.x)*(i.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function qc(u,i){let l=!1;for(let h=0,g=u.length-1;h<u.length;g=h++){const _=u[h],x=u[g];_.y>i.y!=x.y>i.y&&i.x<(x.x-_.x)*(i.y-_.y)/(x.y-_.y)+_.x&&(l=!l)}return l}function YI(u,i,l){const h=l[0],g=l[2];if(u.x<h.x&&i.x<h.x||u.x>g.x&&i.x>g.x||u.y<h.y&&i.y<h.y||u.y>g.y&&i.y>g.y)return!1;const _=Pt(u,i,l[0]);return _!==Pt(u,i,l[1])||_!==Pt(u,i,l[2])||_!==Pt(u,i,l[3])}function Yh(u,i,l){const h=i.paint.get(u).value;return h.kind==="constant"?h.value:l.programConfigurations.get(i.id).getMaxValue(u)}function _p(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function bp(u,i,l,h,g){if(!i[0]&&!i[1])return u;const _=R.convert(i)._mult(g);l==="viewport"&&_._rotate(-h);const x=[];for(let k=0;k<u.length;k++)x.push(u[k].sub(_));return x}let sx,ox;Kt("CircleBucket",$v,{omit:["layers"]});var XI={get paint(){return ox=ox||new $r({"circle-radius":new dn(Oe.paint_circle["circle-radius"]),"circle-color":new dn(Oe.paint_circle["circle-color"]),"circle-blur":new dn(Oe.paint_circle["circle-blur"]),"circle-opacity":new dn(Oe.paint_circle["circle-opacity"]),"circle-translate":new Qt(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Qt(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qt(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qt(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new dn(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new dn(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new dn(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return sx=sx||new $r({"circle-sort-key":new dn(Oe.layout_circle["circle-sort-key"])})}};class JI extends pr{constructor(i){super(i,XI)}createBucket(i){return new $v(i)}queryRadius(i){const l=i;return Yh("circle-radius",this,l)+Yh("circle-stroke-width",this,l)+_p(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x,unwrappedTileID:k,getElevation:E}){const D=bp(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,x),V=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),j=this.paint.get("circle-pitch-alignment")==="map",q=j?D:function(J,ie,me,xe){return J.map(Ne=>lx(Ne,ie,me,xe))}(D,_,k,E),K=j?V*x:V;for(const J of g)for(const ie of J){const me=j?ie:lx(ie,_,k,E);let xe=K;const Ne=_.projectTileCoordinates(ie.x,ie.y,k,E).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xe*=Ne/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xe*=_.cameraToCenterDistance/Ne),WI(q,me,xe))return!0}return!1}}function lx(u,i,l,h){const g=i.projectTileCoordinates(u.x,u.y,l,h).point;return new R((.5*g.x+.5)*i.width,(.5*-g.y+.5)*i.height)}class ux extends $v{}let cx;Kt("HeatmapBucket",ux,{omit:["layers"]});var QI={get paint(){return cx=cx||new $r({"heatmap-radius":new dn(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new dn(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qt(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uu(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qt(Oe.paint_heatmap["heatmap-opacity"])})}};function Uv(u,{width:i,height:l},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*l*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*l*h}`)}else g=new Uint8Array(i*l*h);return u.width=i,u.height=l,u.data=g,u}function dx(u,{width:i,height:l},h){if(i===u.width&&l===u.height)return;const g=Uv({},{width:i,height:l},h);Gv(u,g,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,i),height:Math.min(u.height,l)},h),u.width=i,u.height=l,u.data=g.data}function Gv(u,i,l,h,g,_){if(g.width===0||g.height===0)return i;if(g.width>u.width||g.height>u.height||l.x>u.width-g.width||l.y>u.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||h.x>i.width-g.width||h.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=u.data,k=i.data;if(x===k)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const D=((l.y+E)*u.width+l.x)*_,V=((h.y+E)*i.width+h.x)*_;for(let j=0;j<g.width*_;j++)k[V+j]=x[D+j]}return i}class Xh{constructor(i,l){Uv(this,i,1,l)}resize(i){dx(this,i,1)}clone(){return new Xh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,g,_){Gv(i,l,h,g,_,1)}}class ua{constructor(i,l){Uv(this,i,4,l)}resize(i){dx(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ua({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,g,_){Gv(i,l,h,g,_,4)}setPixel(i,l,h){const g=4*(i*this.width+l);this.data[g+0]=Math.round(255*h.r/h.a),this.data[g+1]=Math.round(255*h.g/h.a),this.data[g+2]=Math.round(255*h.b/h.a),this.data[g+3]=Math.round(255*h.a)}}function hx(u){const i={},l=u.resolution||256,h=u.clips?u.clips.length:1,g=u.image||new ua({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const _=(x,k,E)=>{i[u.evaluationKey]=E;const D=u.expression.evaluate(i);g.setPixel(x/4/l,k/4,D)};if(u.clips)for(let x=0,k=0;x<h;++x,k+=4*l)for(let E=0,D=0;E<l;E++,D+=4){const V=E/(l-1),{start:j,end:q}=u.clips[x];_(k,D,j*(1-V)+q*V)}else for(let x=0,k=0;x<l;x++,k+=4)_(0,k,x/(l-1));return g}Kt("AlphaImage",Xh),Kt("RGBAImage",ua);const Hv="big-fb";class eA extends pr{createBucket(i){return new ux(i)}constructor(i){super(i,QI),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Hv)&&this.heatmapFbos.delete(Hv)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let fx;var tA={get paint(){return fx=fx||new $r({"hillshade-illumination-direction":new Qt(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Qt(Oe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Qt(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qt(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qt(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qt(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qt(Oe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Qt(Oe.paint_hillshade["hillshade-method"])})}};class nA extends pr{constructor(i){super(i,tA),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const _=Math.max(i.length,l.length,h.length,g.length);i=i.concat(Array(_-i.length).fill(i.at(-1))),l=l.concat(Array(_-l.length).fill(l.at(-1))),h=h.concat(Array(_-h.length).fill(h.at(-1))),g=g.concat(Array(_-g.length).fill(g.at(-1)));const x=l.map(En);return{directionRadians:i.map(En),altitudeRadians:x,shadowColor:g,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let mx;var iA={get paint(){return mx=mx||new $r({"color-relief-opacity":new Qt(Oe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new uu(Oe["paint_color-relief"]["color-relief-color"])})}};class qv{constructor(i,l,h,g){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(l,g)}update(i,l,h){const{width:g,height:_}=i,x=!(this.size&&this.size[0]===g&&this.size[1]===_||h),{context:k}=this,{gl:E}=k;if(this.useMipmap=!!(l&&l.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!l||l.premultiply!==!1)),x)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||It(i)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,g,_,0,this.format,E.UNSIGNED_BYTE,i.data);else{const{x:D,y:V}=h||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||It(i)?E.texSubImage2D(E.TEXTURE_2D,0,D,V,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,D,V,g,_,E.RGBA,E.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D),k.pixelStoreUnpackFlipY.setDefault(),k.pixelStoreUnpack.setDefault(),k.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,h){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),h!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,h||i),this.filter=i),l!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,l),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class px{constructor(i,l,h,g=1,_=1,x=1,k=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Je(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const E=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=k;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<E;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(E,D)]=this.data[this._idx(E-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,E)]=this.data[this._idx(D,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<E;D++)for(let V=0;V<E;V++){const j=this.get(D,V);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(i,l){const h=new Uint8Array(this.data.buffer),g=4*this._idx(i,l);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,h){return i*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}pack(i){return gx(i,this.getUnpackVector())}getPixels(){return new ua({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,_=l*this.dim+this.dim,x=h*this.dim,k=h*this.dim+this.dim;switch(l){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=k-1;break;case 1:k=x+1}const E=-l*this.dim,D=-h*this.dim;for(let V=x;V<k;V++)for(let j=g;j<_;j++)this.data[this._idx(j,V)]=i.data[this._idx(j+E,V+D)]}}function gx(u,i){const l=i[0],h=i[1],g=i[2],_=i[3],x=Math.min(l,h,g),k=Math.round((u+_)/x);return{r:Math.floor(k*x/l)%256,g:Math.floor(k*x/h)%256,b:Math.floor(k*x/g)%256}}Kt("DEMData",px);class rA extends pr{constructor(i){super(i,iA)}_createColorRamp(i){const l={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof Jl&&h._styleExpression.expression instanceof Or){this.colorRampExpression=h;const x=h._styleExpression.expression;l.elevationStops=x.labels,l.colorStops=[];for(const k of l.elevationStops)l.colorStops.push(x.evaluate({globals:{elevation:k}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[zn.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=i)return l;const g={elevationStops:[],colorStops:[]},_=(l.elevationStops.length-1)/(i-1);for(let x=0;x<l.elevationStops.length-.5;x+=_)g.elevationStops.push(l.elevationStops[Math.round(x)]),g.colorStops.push(l.colorStops[Math.round(x)]);return Je(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,l,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(l),_=new ua({width:g.colorStops.length,height:1}),x=new ua({width:g.colorStops.length,height:1});for(let k=0;k<g.elevationStops.length;k++){const E=gx(g.elevationStops[k],h);x.setPixel(0,k,new zn(E.r/255,E.g/255,E.b/255,1)),_.setPixel(0,k,g.colorStops[k])}return this.colorRampTextures={elevationTexture:new qv(i,x,i.gl.RGBA),colorTexture:new qv(i,_,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const aA=Ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:sA}=aA;function Wv(u,i,l){const h=l.patternDependencies;let g=!1;for(const _ of i){const x=_.paint.get(`${u}-pattern`);x.isConstant()||(g=!0);const k=x.constantOr(null);k&&(g=!0,h[k.to]=!0,h[k.from]=!0)}return g}function Zv(u,i,l,h,g){const _=g.patternDependencies;for(const x of i){const k=x.paint.get(`${u}-pattern`).value;if(k.kind!=="constant"){let E=k.evaluate({zoom:h-1},l,{},g.availableImages),D=k.evaluate({zoom:h},l,{},g.availableImages),V=k.evaluate({zoom:h+1},l,{},g.availableImages);E=E&&E.name?E.name:E,D=D&&D.name?D.name:D,V=V&&V.name?V.name:V,_[E]=!0,_[D]=!0,_[V]=!0,l.patterns[x.id]={min:E,mid:D,max:V}}}return l}function vx(u,i,l,h,g){let _;if(g===function(x,k,E,D){let V=0;for(let j=k,q=E-D;j<E;j+=D)V+=(x[q]-x[j])*(x[j+1]+x[q+1]),q=j;return V}(u,i,l,h)>0)for(let x=i;x<l;x+=h)_=xx(x/h|0,u[x],u[x+1],_);else for(let x=l-h;x>=i;x-=h)_=xx(x/h|0,u[x],u[x+1],_);return _&&Wc(_,_.next)&&(tf(_),_=_.next),_}function vu(u,i){if(!u)return u;i||(i=u);let l,h=u;do if(l=!1,h.steiner||!Wc(h,h.next)&&$i(h.prev,h,h.next)!==0)h=h.next;else{if(tf(h),h=i=h.prev,h===h.next)break;l=!0}while(l||h!==i);return i}function Jh(u,i,l,h,g,_,x){if(!u)return;!x&&_&&function(E,D,V,j){let q=E;do q.z===0&&(q.z=Kv(q.x,q.y,D,V,j)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==E);q.prevZ.nextZ=null,q.prevZ=null,function(K){let J,ie=1;do{let me,xe=K;K=null;let Ne=null;for(J=0;xe;){J++;let Pe=xe,Z=0;for(let Ee=0;Ee<ie&&(Z++,Pe=Pe.nextZ,Pe);Ee++);let de=ie;for(;Z>0||de>0&&Pe;)Z!==0&&(de===0||!Pe||xe.z<=Pe.z)?(me=xe,xe=xe.nextZ,Z--):(me=Pe,Pe=Pe.nextZ,de--),Ne?Ne.nextZ=me:K=me,me.prevZ=Ne,Ne=me;xe=Pe}Ne.nextZ=null,ie*=2}while(J>1)}(q)}(u,h,g,_);let k=u;for(;u.prev!==u.next;){const E=u.prev,D=u.next;if(_?lA(u,h,g,_):oA(u))i.push(E.i,u.i,D.i),tf(u),u=D.next,k=D.next;else if((u=D)===k){x?x===1?Jh(u=uA(vu(u),i),i,l,h,g,_,2):x===2&&cA(u,i,l,h,g,_):Jh(vu(u),i,l,h,g,_,1);break}}}function oA(u){const i=u.prev,l=u,h=u.next;if($i(i,l,h)>=0)return!1;const g=i.x,_=l.x,x=h.x,k=i.y,E=l.y,D=h.y,V=Math.min(g,_,x),j=Math.min(k,E,D),q=Math.max(g,_,x),K=Math.max(k,E,D);let J=h.next;for(;J!==i;){if(J.x>=V&&J.x<=q&&J.y>=j&&J.y<=K&&Qh(g,k,_,E,x,D,J.x,J.y)&&$i(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function lA(u,i,l,h){const g=u.prev,_=u,x=u.next;if($i(g,_,x)>=0)return!1;const k=g.x,E=_.x,D=x.x,V=g.y,j=_.y,q=x.y,K=Math.min(k,E,D),J=Math.min(V,j,q),ie=Math.max(k,E,D),me=Math.max(V,j,q),xe=Kv(K,J,i,l,h),Ne=Kv(ie,me,i,l,h);let Pe=u.prevZ,Z=u.nextZ;for(;Pe&&Pe.z>=xe&&Z&&Z.z<=Ne;){if(Pe.x>=K&&Pe.x<=ie&&Pe.y>=J&&Pe.y<=me&&Pe!==g&&Pe!==x&&Qh(k,V,E,j,D,q,Pe.x,Pe.y)&&$i(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,Z.x>=K&&Z.x<=ie&&Z.y>=J&&Z.y<=me&&Z!==g&&Z!==x&&Qh(k,V,E,j,D,q,Z.x,Z.y)&&$i(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;Pe&&Pe.z>=xe;){if(Pe.x>=K&&Pe.x<=ie&&Pe.y>=J&&Pe.y<=me&&Pe!==g&&Pe!==x&&Qh(k,V,E,j,D,q,Pe.x,Pe.y)&&$i(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;Z&&Z.z<=Ne;){if(Z.x>=K&&Z.x<=ie&&Z.y>=J&&Z.y<=me&&Z!==g&&Z!==x&&Qh(k,V,E,j,D,q,Z.x,Z.y)&&$i(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function uA(u,i){let l=u;do{const h=l.prev,g=l.next.next;!Wc(h,g)&&_x(h,l,l.next,g)&&ef(h,g)&&ef(g,h)&&(i.push(h.i,l.i,g.i),tf(l),tf(l.next),l=u=g),l=l.next}while(l!==u);return vu(l)}function cA(u,i,l,h,g,_){let x=u;do{let k=x.next.next;for(;k!==x.prev;){if(x.i!==k.i&&pA(x,k)){let E=bx(x,k);return x=vu(x,x.next),E=vu(E,E.next),Jh(x,i,l,h,g,_,0),void Jh(E,i,l,h,g,_,0)}k=k.next}x=x.next}while(x!==u)}function dA(u,i){let l=u.x-i.x;return l===0&&(l=u.y-i.y,l===0)&&(l=(u.next.y-u.y)/(u.next.x-u.x)-(i.next.y-i.y)/(i.next.x-i.x)),l}function hA(u,i){const l=function(g,_){let x=_;const k=g.x,E=g.y;let D,V=-1/0;if(Wc(g,x))return x;do{if(Wc(g,x.next))return x.next;if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){const ie=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(ie<=k&&ie>V&&(V=ie,D=x.x<x.next.x?x:x.next,ie===k))return D}x=x.next}while(x!==_);if(!D)return null;const j=D,q=D.x,K=D.y;let J=1/0;x=D;do{if(k>=x.x&&x.x>=q&&k!==x.x&&yx(E<K?k:V,E,q,K,E<K?V:k,E,x.x,x.y)){const ie=Math.abs(E-x.y)/(k-x.x);ef(x,g)&&(ie<J||ie===J&&(x.x>D.x||x.x===D.x&&fA(D,x)))&&(D=x,J=ie)}x=x.next}while(x!==j);return D}(u,i);if(!l)return i;const h=bx(l,u);return vu(h,h.next),vu(l,l.next)}function fA(u,i){return $i(u.prev,u,i.prev)<0&&$i(i.next,u,u.next)<0}function Kv(u,i,l,h,g){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*g|0)|u<<8))|u<<4))|u<<2))|u<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function mA(u){let i=u,l=u;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==u);return l}function yx(u,i,l,h,g,_,x,k){return(g-x)*(i-k)>=(u-x)*(_-k)&&(u-x)*(h-k)>=(l-x)*(i-k)&&(l-x)*(_-k)>=(g-x)*(h-k)}function Qh(u,i,l,h,g,_,x,k){return!(u===x&&i===k)&&yx(u,i,l,h,g,_,x,k)}function pA(u,i){return u.next.i!==i.i&&u.prev.i!==i.i&&!function(l,h){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==h.i&&g.next.i!==h.i&&_x(g,g.next,l,h))return!0;g=g.next}while(g!==l);return!1}(u,i)&&(ef(u,i)&&ef(i,u)&&function(l,h){let g=l,_=!1;const x=(l.x+h.x)/2,k=(l.y+h.y)/2;do g.y>k!=g.next.y>k&&g.next.y!==g.y&&x<(g.next.x-g.x)*(k-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==l);return _}(u,i)&&($i(u.prev,u,i.prev)||$i(u,i.prev,i))||Wc(u,i)&&$i(u.prev,u,u.next)>0&&$i(i.prev,i,i.next)>0)}function $i(u,i,l){return(i.y-u.y)*(l.x-i.x)-(i.x-u.x)*(l.y-i.y)}function Wc(u,i){return u.x===i.x&&u.y===i.y}function _x(u,i,l,h){const g=wp($i(u,i,l)),_=wp($i(u,i,h)),x=wp($i(l,h,u)),k=wp($i(l,h,i));return g!==_&&x!==k||!(g!==0||!xp(u,l,i))||!(_!==0||!xp(u,h,i))||!(x!==0||!xp(l,u,h))||!(k!==0||!xp(l,i,h))}function xp(u,i,l){return i.x<=Math.max(u.x,l.x)&&i.x>=Math.min(u.x,l.x)&&i.y<=Math.max(u.y,l.y)&&i.y>=Math.min(u.y,l.y)}function wp(u){return u>0?1:u<0?-1:0}function ef(u,i){return $i(u.prev,u,u.next)<0?$i(u,i,u.next)>=0&&$i(u,u.prev,i)>=0:$i(u,i,u.prev)<0||$i(u,u.next,i)<0}function bx(u,i){const l=Yv(u.i,u.x,u.y),h=Yv(i.i,i.x,i.y),g=u.next,_=i.prev;return u.next=i,i.prev=u,l.next=g,g.prev=l,h.next=l,l.prev=h,_.next=h,h.prev=_,h}function xx(u,i,l,h){const g=Yv(u,i,l);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function tf(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Yv(u,i,l){return{i:u,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zc{constructor(i,l){if(l>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=l}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class Sp{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}Sp.noSubdivision=new Sp({fill:new Zc(0,0),line:new Zc(0,0),tile:new Zc(0,0),stencil:new Zc(0,0),circle:1}),Kt("SubdivisionGranularityExpression",Zc),Kt("SubdivisionGranularitySetting",Sp);const Kc=-32768,nf=32767;class gA{constructor(i,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=Ie/i,this._canonical=l}_getKey(i,l){return(i+=32768)<<16|l+32768}_vertexToIndex(i,l){if(i<-32768||l<-32768||i>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(i),g=0|Math.round(l),_=this._getKey(h,g);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,x),this._vertexBuffer.push(h,g),x}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(g,_){const x=[];for(let k=0;k<_.length;k+=3){const E=_[k],D=_[k+1],V=_[k+2],j=g[2*E],q=g[2*E+1];(g[2*D]-j)*(g[2*V+1]-q)-(g[2*D+1]-q)*(g[2*V]-j)>0?(x.push(E),x.push(V),x.push(D)):(x.push(E),x.push(D),x.push(V))}return x}(this._vertexBuffer,i);const l=[],h=i.length;for(let g=0;g<h;g+=3){const _=[i[g+0],i[g+1],i[g+2]],x=[this._vertexBuffer[2*i[g+0]+0],this._vertexBuffer[2*i[g+0]+1],this._vertexBuffer[2*i[g+1]+0],this._vertexBuffer[2*i[g+1]+1],this._vertexBuffer[2*i[g+2]+0],this._vertexBuffer[2*i[g+2]+1]];let k=1/0,E=1/0,D=-1/0,V=-1/0;for(let ie=0;ie<3;ie++){const me=x[2*ie],xe=x[2*ie+1];k=Math.min(k,me),D=Math.max(D,me),E=Math.min(E,xe),V=Math.max(V,xe)}if(k===D||E===V)continue;const j=Math.floor(k/this._granularityCellSize),q=Math.ceil(D/this._granularityCellSize),K=Math.floor(E/this._granularityCellSize),J=Math.ceil(V/this._granularityCellSize);if(j!==q||K!==J)for(let ie=K;ie<J;ie++){const me=this._scanlineGenerateVertexRingForCellRow(ie,x,_);vA(this._vertexBuffer,me,l)}else l.push(..._)}return l}_scanlineGenerateVertexRingForCellRow(i,l,h){const g=i*this._granularityCellSize,_=g+this._granularityCellSize,x=[];for(let k=0;k<3;k++){const E=l[2*k],D=l[2*k+1],V=l[2*(k+1)%6],j=l[(2*(k+1)+1)%6],q=l[2*(k+2)%6],K=l[(2*(k+2)+1)%6],J=V-E,ie=j-D,me=J===0,xe=ie===0,Ne=(g-D)/ie,Pe=(_-D)/ie,Z=Math.min(Ne,Pe),de=Math.max(Ne,Pe);if(!xe&&(Z>=1||de<=0)||xe&&(D<g||D>_)){j>=g&&j<=_&&x.push(h[(k+1)%3]);continue}!xe&&Z>0&&x.push(this._vertexToIndex(E+J*Z,D+ie*Z));const Ee=E+J*Math.max(Z,0),it=E+J*Math.min(de,1);me||this._generateIntraEdgeVertices(x,E,D,V,j,Ee,it),!xe&&de<1&&x.push(this._vertexToIndex(E+J*de,D+ie*de)),(xe||j>=g&&j<=_)&&x.push(h[(k+1)%3]),!xe&&(j<=g||j>=_)&&this._generateInterEdgeVertices(x,E,D,V,j,q,K,it,g,_)}return x}_generateIntraEdgeVertices(i,l,h,g,_,x,k){const E=g-l,D=_-h,V=D===0,j=V?Math.min(l,g):Math.min(x,k),q=V?Math.max(l,g):Math.max(x,k),K=Math.floor(j/this._granularityCellSize)+1,J=Math.ceil(q/this._granularityCellSize)-1;if(V?l<g:x<k)for(let ie=K;ie<=J;ie++){const me=ie*this._granularityCellSize;i.push(this._vertexToIndex(me,h+D*(me-l)/E))}else for(let ie=J;ie>=K;ie--){const me=ie*this._granularityCellSize;i.push(this._vertexToIndex(me,h+D*(me-l)/E))}}_generateInterEdgeVertices(i,l,h,g,_,x,k,E,D,V){const j=_-h,q=x-g,K=k-_,J=(D-_)/K,ie=(V-_)/K,me=Math.min(J,ie),xe=Math.max(J,ie),Ne=g+q*me;let Pe=Math.floor(Math.min(Ne,E)/this._granularityCellSize)+1,Z=Math.ceil(Math.max(Ne,E)/this._granularityCellSize)-1,de=E<Ne;const Ee=K===0;if(Ee&&(k===D||k===V))return;if(Ee||me>=1||xe<=0){const At=h-k,dt=x+(l-x)*Math.min((D-k)/At,(V-k)/At);Pe=Math.floor(Math.min(dt,E)/this._granularityCellSize)+1,Z=Math.ceil(Math.max(dt,E)/this._granularityCellSize)-1,de=E<dt}const it=j>0?V:D;if(de)for(let At=Pe;At<=Z;At++)i.push(this._vertexToIndex(At*this._granularityCellSize,it));else for(let At=Z;At>=Pe;At--)i.push(this._vertexToIndex(At*this._granularityCellSize,it))}_generateOutline(i){const l=[];for(const h of i){const g=yu(h,this._granularity,!0),_=this._pointArrayToIndices(g),x=[];for(let k=1;k<_.length;k++)x.push(_[k-1]),x.push(_[k]);l.push(x)}return l}_handlePoles(i){let l=!1,h=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(l||h)&&this._fillPoles(i,l,h)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let l=0;l<i.length;l+=2){const h=i[l+1];h===Kc&&(i[l+1]=-32767),h===nf&&(i[l+1]=32766)}}_generatePoleQuad(i,l,h,g,_,x){g>_!=(x===Kc)?(i.push(l),i.push(h),i.push(this._vertexToIndex(g,x)),i.push(h),i.push(this._vertexToIndex(_,x)),i.push(this._vertexToIndex(g,x))):(i.push(h),i.push(l),i.push(this._vertexToIndex(g,x)),i.push(this._vertexToIndex(_,x)),i.push(h),i.push(this._vertexToIndex(g,x)))}_fillPoles(i,l,h){const g=this._vertexBuffer,_=Ie,x=i.length;for(let k=2;k<x;k+=3){const E=i[k-2],D=i[k-1],V=i[k],j=g[2*E],q=g[2*E+1],K=g[2*D],J=g[2*D+1],ie=g[2*V],me=g[2*V+1];l&&(q===0&&J===0&&this._generatePoleQuad(i,E,D,j,K,Kc),J===0&&me===0&&this._generatePoleQuad(i,D,V,K,ie,Kc),me===0&&q===0&&this._generatePoleQuad(i,V,E,ie,j,Kc)),h&&(q===_&&J===_&&this._generatePoleQuad(i,E,D,j,K,nf),J===_&&me===_&&this._generatePoleQuad(i,D,V,K,ie,nf),me===_&&q===_&&this._generatePoleQuad(i,V,E,ie,j,nf))}}_initializeVertices(i){for(let l=0;l<i.length;l+=2)this._vertexToIndex(i[l],i[l+1])}subdividePolygonInternal(i,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:g}=function(k){const E=[],D=[];for(const V of k)if(V.length!==0){V!==k[0]&&E.push(D.length/2);for(let j=0;j<V.length;j++)D.push(V[j].x),D.push(V[j].y)}return{flattened:D,holeIndices:E}}(i);let _;this._initializeVertices(h);try{const k=function(D,V,j=2){const q=V&&V.length,K=q?V[0]*j:D.length;let J=vx(D,0,K,j,!0);const ie=[];if(!J||J.next===J.prev)return ie;let me,xe,Ne;if(q&&(J=function(Pe,Z,de,Ee){const it=[];for(let At=0,dt=Z.length;At<dt;At++){const yt=vx(Pe,Z[At]*Ee,At<dt-1?Z[At+1]*Ee:Pe.length,Ee,!1);yt===yt.next&&(yt.steiner=!0),it.push(mA(yt))}it.sort(dA);for(let At=0;At<it.length;At++)de=hA(it[At],de);return de}(D,V,J,j)),D.length>80*j){me=1/0,xe=1/0;let Pe=-1/0,Z=-1/0;for(let de=j;de<K;de+=j){const Ee=D[de],it=D[de+1];Ee<me&&(me=Ee),it<xe&&(xe=it),Ee>Pe&&(Pe=Ee),it>Z&&(Z=it)}Ne=Math.max(Pe-me,Z-xe),Ne=Ne!==0?32767/Ne:0}return Jh(J,ie,j,me,xe,Ne,0),ie}(h,g),E=this._convertIndices(h,k);_=this._subdivideTrianglesScanline(E)}catch(k){console.error(k)}let x=[];return l&&(x=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:x}}_convertIndices(i,l){const h=[];for(let g=0;g<l.length;g++)h.push(this._vertexToIndex(i[2*l[g]],i[2*l[g]+1]));return h}_pointArrayToIndices(i){const l=[];for(let h=0;h<i.length;h++){const g=i[h];l.push(this._vertexToIndex(g.x,g.y))}return l}}function wx(u,i,l,h=!0){return new gA(l,i).subdividePolygonInternal(u,h)}function yu(u,i,l=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const h=u[0],g=u[u.length-1],_=l&&(h.x!==g.x||h.y!==g.y);if(i<2)return _?[...u,u[0]]:[...u];const x=Math.floor(Ie/i),k=[];k.push(new R(u[0].x,u[0].y));const E=u.length,D=_?E:E-1;for(let V=0;V<D;V++){const j=u[V],q=V<E-1?u[V+1]:u[0],K=j.x,J=j.y,ie=q.x,me=q.y,xe=K!==ie,Ne=J!==me;if(!xe&&!Ne)continue;const Pe=ie-K,Z=me-J,de=Math.abs(Pe),Ee=Math.abs(Z);let it=K,At=J;for(;;){const yt=Pe>0?(Math.floor(it/x)+1)*x:(Math.ceil(it/x)-1)*x,zt=Z>0?(Math.floor(At/x)+1)*x:(Math.ceil(At/x)-1)*x,Mt=Math.abs(it-yt),Vt=Math.abs(At-zt),wt=Math.abs(it-ie),Jt=Math.abs(At-me),un=xe?Mt/de:Number.POSITIVE_INFINITY,ln=Ne?Vt/Ee:Number.POSITIVE_INFINITY;if((wt<=Mt||!xe)&&(Jt<=Vt||!Ne))break;if(un<ln&&xe||!Ne){it=yt,At+=Z*un;const rn=new R(it,Math.round(At));k[k.length-1].x===rn.x&&k[k.length-1].y===rn.y||k.push(rn)}else{it+=Pe*ln,At=zt;const rn=new R(Math.round(it),At);k[k.length-1].x===rn.x&&k[k.length-1].y===rn.y||k.push(rn)}}const dt=new R(ie,me);k[k.length-1].x===dt.x&&k[k.length-1].y===dt.y||k.push(dt)}return k}function vA(u,i,l){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,g=u[2*i[0]];for(let E=1;E<i.length;E++){const D=u[2*i[E]];D<g&&(g=D,h=E)}const _=i.length;let x=h,k=(x+1)%_;for(;;){const E=x-1>=0?x-1:_-1,D=(k+1)%_,V=u[2*i[E]],j=u[2*i[D]],q=u[2*i[x]],K=u[2*i[x]+1],J=u[2*i[k]+1];let ie=!1;if(V<j)ie=!0;else if(V>j)ie=!1;else{const me=J-K,xe=-(u[2*i[k]]-q),Ne=K<J?1:-1;((V-q)*me+(u[2*i[E]+1]-K)*xe)*Ne>((j-q)*me+(u[2*i[D]+1]-K)*xe)*Ne&&(ie=!0)}if(ie){const me=i[E],xe=i[x],Ne=i[k];me!==xe&&me!==Ne&&xe!==Ne&&l.push(Ne,xe,me),x--,x<0&&(x=_-1)}else{const me=i[D],xe=i[x],Ne=i[k];me!==xe&&me!==Ne&&xe!==Ne&&l.push(Ne,xe,me),k++,k>=_&&(k=0)}if(E===D)break}}function Sx(u,i,l,h,g,_,x,k,E){const D=g.length/2,V=x&&k&&E;if(D<Nn.MAX_VERTEX_ARRAY_LENGTH){const j=i.prepareSegment(D,l,h),q=j.vertexLength;for(let ie=0;ie<_.length;ie+=3)h.emplaceBack(q+_[ie],q+_[ie+1],q+_[ie+2]);let K,J;j.vertexLength+=D,j.primitiveLength+=_.length/3,V&&(J=x.prepareSegment(D,l,k),K=J.vertexLength,J.vertexLength+=D);for(let ie=0;ie<g.length;ie+=2)u(g[ie],g[ie+1]);if(V)for(let ie=0;ie<E.length;ie++){const me=E[ie];for(let xe=1;xe<me.length;xe+=2)k.emplaceBack(K+me[xe-1],K+me[xe]);J.primitiveLength+=me.length/2}}else(function(j,q,K,J,ie,me){const xe=[];for(let Ee=0;Ee<J.length/2;Ee++)xe.push(-1);const Ne={count:0};let Pe=0,Z=j.getOrCreateLatestSegment(q,K),de=Z.vertexLength;for(let Ee=2;Ee<ie.length;Ee+=3){const it=ie[Ee-2],At=ie[Ee-1],dt=ie[Ee];let yt=xe[it]<Pe,zt=xe[At]<Pe,Mt=xe[dt]<Pe;Z.vertexLength+((yt?1:0)+(zt?1:0)+(Mt?1:0))>Nn.MAX_VERTEX_ARRAY_LENGTH&&(Z=j.createNewSegment(q,K),Pe=Ne.count,yt=!0,zt=!0,Mt=!0,de=0);const Vt=rf(xe,J,me,Ne,it,yt,Z),wt=rf(xe,J,me,Ne,At,zt,Z),Jt=rf(xe,J,me,Ne,dt,Mt,Z);K.emplaceBack(de+Vt-Pe,de+wt-Pe,de+Jt-Pe),Z.primitiveLength++}})(i,l,h,g,_,u),V&&function(j,q,K,J,ie,me){const xe=[];for(let Ee=0;Ee<J.length/2;Ee++)xe.push(-1);const Ne={count:0};let Pe=0,Z=j.getOrCreateLatestSegment(q,K),de=Z.vertexLength;for(let Ee=0;Ee<ie.length;Ee++){const it=ie[Ee];for(let At=1;At<ie[Ee].length;At+=2){const dt=it[At-1],yt=it[At];let zt=xe[dt]<Pe,Mt=xe[yt]<Pe;Z.vertexLength+((zt?1:0)+(Mt?1:0))>Nn.MAX_VERTEX_ARRAY_LENGTH&&(Z=j.createNewSegment(q,K),Pe=Ne.count,zt=!0,Mt=!0,de=0);const Vt=rf(xe,J,me,Ne,dt,zt,Z),wt=rf(xe,J,me,Ne,yt,Mt,Z);K.emplaceBack(de+Vt-Pe,de+wt-Pe),Z.primitiveLength++}}}(x,l,k,g,E,u),i.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function rf(u,i,l,h,g,_,x){if(_){const k=h.count;return l(i[2*g],i[2*g+1]),u[g]=h.count,h.count++,x.vertexLength++,k}return u[g]}class Xv{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ot,this.indexArray=new ai,this.indexArray2=new ii,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new Nn,this.segments2=new Nn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.hasPattern=Wv("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:k,id:E,index:D,sourceLayerIndex:V}of i){const j=this.layers[0]._featureFilter.needGeometry,q=gu(k,j);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),q,h))continue;const K=_?g.evaluate(q,{},h,l.availableImages):void 0,J={id:E,properties:k.properties,type:k.type,sourceLayerIndex:V,index:D,geometry:j?q.geometry:pu(k),patterns:{},sortKey:K};x.push(J)}_&&x.sort((k,E)=>k.sortKey-E.sortKey);for(const k of x){const{geometry:E,index:D,sourceLayerIndex:V}=k;if(this.hasPattern){const j=Zv("fill",this.layers,k,this.zoom,l);this.patternFeatures.push(j)}else this.addFeature(k,E,D,h,{},l.subdivisionGranularity);l.featureIndex.insert(i[D].feature,E,D,V,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}addFeatures(i,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,sA),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,h,g,_,x){for(const k of bc(l,500)){const E=wx(k,g,x.fill.getGranularityForZoomLevel(g.z)),D=this.layoutVertexArray;Sx((V,j)=>{D.emplaceBack(V,j)},this.segments,this.layoutVertexArray,this.indexArray,E.verticesFlattened,E.indicesTriangles,this.segments2,this.indexArray2,E.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}}let Cx,kx;Kt("FillBucket",Xv,{omit:["layers","patternFeatures"]});var yA={get paint(){return kx=kx||new $r({"fill-antialias":new Qt(Oe.paint_fill["fill-antialias"]),"fill-opacity":new dn(Oe.paint_fill["fill-opacity"]),"fill-color":new dn(Oe.paint_fill["fill-color"]),"fill-outline-color":new dn(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Qt(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Qt(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Uc(Oe.paint_fill["fill-pattern"])})},get layout(){return Cx=Cx||new $r({"fill-sort-key":new dn(Oe.layout_fill["fill-sort-key"])})}};class _A extends pr{constructor(i){super(i,yA)}recalculate(i,l){super.recalculate(i,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Xv(i)}queryRadius(){return _p(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:l,transform:h,pixelsToTileUnits:g}){return ix(bp(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,g),l)}isTileClipped(){return!0}}const bA=Ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xA=Ai([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wA}=bA;var Jv,Tx,Qv,Px,ey,Ix,Ax,Cp={};function Ex(){if(Tx)return Jv;Tx=1;var u=T();function i(g,_,x,k,E){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=k,this._values=E,g.readFields(l,this,_)}function l(g,_,x){g==1?_.id=x.readVarint():g==2?function(k,E){for(var D=k.readVarint()+k.pos;k.pos<D;){var V=E._keys[k.readVarint()],j=E._values[k.readVarint()];E.properties[V]=j}}(x,_):g==3?_.type=x.readVarint():g==4&&(_._geometry=x.pos)}function h(g){for(var _,x,k=0,E=0,D=g.length,V=D-1;E<D;V=E++)k+=((x=g[V]).x-(_=g[E]).x)*(_.y+x.y);return k}return Jv=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var _,x=g.readVarint()+g.pos,k=1,E=0,D=0,V=0,j=[];g.pos<x;){if(E<=0){var q=g.readVarint();k=7&q,E=q>>3}if(E--,k===1||k===2)D+=g.readSVarint(),V+=g.readSVarint(),k===1&&(_&&j.push(_),_=[]),_.push(new u(D,V));else{if(k!==7)throw new Error("unknown command "+k);_&&_.push(_[0].clone())}}return _&&j.push(_),j},i.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var _=g.readVarint()+g.pos,x=1,k=0,E=0,D=0,V=1/0,j=-1/0,q=1/0,K=-1/0;g.pos<_;){if(k<=0){var J=g.readVarint();x=7&J,k=J>>3}if(k--,x===1||x===2)(E+=g.readSVarint())<V&&(V=E),E>j&&(j=E),(D+=g.readSVarint())<q&&(q=D),D>K&&(K=D);else if(x!==7)throw new Error("unknown command "+x)}return[V,q,j,K]},i.prototype.toGeoJSON=function(g,_,x){var k,E,D=this.extent*Math.pow(2,x),V=this.extent*g,j=this.extent*_,q=this.loadGeometry(),K=i.types[this.type];function J(xe){for(var Ne=0;Ne<xe.length;Ne++){var Pe=xe[Ne];xe[Ne]=[360*(Pe.x+V)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+j)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(k=0;k<q.length;k++)ie[k]=q[k][0];J(q=ie);break;case 2:for(k=0;k<q.length;k++)J(q[k]);break;case 3:for(q=function(xe){var Ne=xe.length;if(Ne<=1)return[xe];for(var Pe,Z,de=[],Ee=0;Ee<Ne;Ee++){var it=h(xe[Ee]);it!==0&&(Z===void 0&&(Z=it<0),Z===it<0?(Pe&&de.push(Pe),Pe=[xe[Ee]]):Pe.push(xe[Ee]))}return Pe&&de.push(Pe),de}(q),k=0;k<q.length;k++)for(E=0;E<q[k].length;E++)J(q[k][E])}q.length===1?q=q[0]:K="Multi"+K;var me={type:"Feature",geometry:{type:K,coordinates:q},properties:this.properties};return"id"in this&&(me.id=this.id),me},Jv}function Mx(){if(Px)return Qv;Px=1;var u=Ex();function i(h,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,g),this.length=this._features.length}function l(h,g,_){h===15?g.version=_.readVarint():h===1?g.name=_.readString():h===5?g.extent=_.readVarint():h===2?g._features.push(_.pos):h===3?g._keys.push(_.readString()):h===4&&g._values.push(function(x){for(var k=null,E=x.readVarint()+x.pos;x.pos<E;){var D=x.readVarint()>>3;k=D===1?x.readString():D===2?x.readFloat():D===3?x.readDouble():D===4?x.readVarint64():D===5?x.readVarint():D===6?x.readSVarint():D===7?x.readBoolean():null}return k}(_))}return Qv=i,i.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var g=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,g,this.extent,this._keys,this._values)},Qv}function Dx(){return Ax||(Ax=1,Cp.VectorTile=function(){if(Ix)return ey;Ix=1;var u=Mx();function i(l,h,g){if(l===3){var _=new u(g,g.readVarint()+g.pos);_.length&&(h[_.name]=_)}}return ey=function(l,h){this.layers=l.readFields(i,{},h)},ey}(),Cp.VectorTileFeature=Ex(),Cp.VectorTileLayer=Mx()),Cp}var af=b(Dx());const SA=af.VectorTileFeature.types,ty=Math.pow(2,13);function sf(u,i,l,h,g,_,x,k){u.emplaceBack(i,l,2*Math.floor(h*ty)+x,g*ty*2,_*ty*2,Math.round(k))}class ny{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Nt,this.centroidVertexArray=new tt,this.indexArray=new ai,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new Nn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.features=[],this.hasPattern=Wv("fill-extrusion",this.layers,l);for(const{feature:g,id:_,index:x,sourceLayerIndex:k}of i){const E=this.layers[0]._featureFilter.needGeometry,D=gu(g,E);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),D,h))continue;const V={id:_,sourceLayerIndex:k,index:x,geometry:E?D.geometry:pu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Zv("fill-extrusion",this.layers,V,this.zoom,l)):this.addFeature(V,V.geometry,x,h,{},l.subdivisionGranularity),l.featureIndex.insert(g,V.geometry,x,k,this.index,!0)}}addFeatures(i,l,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,l,h,i.subdivisionGranularity)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,wA),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,xA.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,h,g,_,x){for(const k of bc(l,500)){const E={x:0,y:0,sampleCount:0},D=this.layoutVertexArray.length;this.processPolygon(E,g,i,k,x);const V=this.layoutVertexArray.length-D,j=Math.floor(E.x/E.sampleCount),q=Math.floor(E.y/E.sampleCount);for(let K=0;K<V;K++)this.centroidVertexArray.emplaceBack(j,q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}processPolygon(i,l,h,g,_){if(g.length<1||Rx(g[0]))return;for(const j of g)j.length!==0&&CA(i,j);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},k=_.fill.getGranularityForZoomLevel(l.z),E=SA[h.type]==="Polygon";for(const j of g){if(j.length===0||Rx(j))continue;const q=yu(j,k,E);this._generateSideFaces(q,x)}if(!E)return;const D=wx(g,l,k,!1),V=this.layoutVertexArray;Sx((j,q)=>{sf(V,j,q,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles)}_generateSideFaces(i,l){let h=0;for(let g=1;g<i.length;g++){const _=i[g],x=i[g-1];if(kA(_,x))continue;l.segment.vertexLength+4>Nn.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const k=_.sub(x)._perp()._unit(),E=x.dist(_);h+E>32768&&(h=0),sf(this.layoutVertexArray,_.x,_.y,k.x,k.y,0,0,h),sf(this.layoutVertexArray,_.x,_.y,k.x,k.y,0,1,h),h+=E,sf(this.layoutVertexArray,x.x,x.y,k.x,k.y,0,0,h),sf(this.layoutVertexArray,x.x,x.y,k.x,k.y,0,1,h);const D=l.segment.vertexLength;this.indexArray.emplaceBack(D,D+2,D+1),this.indexArray.emplaceBack(D+1,D+2,D+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function CA(u,i){for(let l=0;l<i.length;l++){const h=i[l];l===i.length-1&&i[0].x===h.x&&i[0].y===h.y||(u.x+=h.x,u.y+=h.y,u.sampleCount++)}}function kA(u,i){return u.x===i.x&&(u.x<0||u.x>Ie)||u.y===i.y&&(u.y<0||u.y>Ie)}function Rx(u){return u.every(i=>i.x<0)||u.every(i=>i.x>Ie)||u.every(i=>i.y<0)||u.every(i=>i.y>Ie)}let Lx;Kt("FillExtrusionBucket",ny,{omit:["layers","features"]});var TA={get paint(){return Lx=Lx||new $r({"fill-extrusion-opacity":new Qt(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new dn(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qt(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qt(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Uc(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new dn(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new dn(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qt(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class PA extends pr{constructor(i){super(i,TA)}createBucket(i){return new ny(i)}queryRadius(){return _p(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x,pixelPosMatrix:k}){const E=bp(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,x),D=this.paint.get("fill-extrusion-height").evaluate(l,h),V=this.paint.get("fill-extrusion-base").evaluate(l,h),j=function(K,J){const ie=[];for(const me of K){const xe=[me.x,me.y,0,1];Ke(xe,xe,J),ie.push(new R(xe[0]/xe[3],xe[1]/xe[3]))}return ie}(E,k),q=function(K,J,ie,me){const xe=[],Ne=[],Pe=me[8]*J,Z=me[9]*J,de=me[10]*J,Ee=me[11]*J,it=me[8]*ie,At=me[9]*ie,dt=me[10]*ie,yt=me[11]*ie;for(const zt of K){const Mt=[],Vt=[];for(const wt of zt){const Jt=wt.x,un=wt.y,ln=me[0]*Jt+me[4]*un+me[12],rn=me[1]*Jt+me[5]*un+me[13],Fn=me[2]*Jt+me[6]*un+me[14],Ei=me[3]*Jt+me[7]*un+me[15],Ji=Fn+de,Er=Ei+Ee,Da=ln+it,ca=rn+At,_r=Fn+dt,Ci=Ei+yt,lr=new R((ln+Pe)/Er,(rn+Z)/Er);lr.z=Ji/Er,Mt.push(lr);const br=new R(Da/Ci,ca/Ci);br.z=_r/Ci,Vt.push(br)}xe.push(Mt),Ne.push(Vt)}return[xe,Ne]}(g,V,D,k);return function(K,J,ie){let me=1/0;ix(ie,J)&&(me=zx(ie,J[0]));for(let xe=0;xe<J.length;xe++){const Ne=J[xe],Pe=K[xe];for(let Z=0;Z<Ne.length-1;Z++){const de=Ne[Z],Ee=[de,Ne[Z+1],Pe[Z+1],Pe[Z],de];nx(ie,Ee)&&(me=Math.min(me,zx(ie,Ee)))}}return me!==1/0&&me}(q[0],q[1],j)}}function of(u,i){return u.x*i.x+u.y*i.y}function zx(u,i){if(u.length===1){let l=0;const h=i[l++];let g;for(;!g||h.equals(g);)if(g=i[l++],!g)return 1/0;for(;l<i.length;l++){const _=i[l],x=u[0],k=g.sub(h),E=_.sub(h),D=x.sub(h),V=of(k,k),j=of(k,E),q=of(E,E),K=of(D,k),J=of(D,E),ie=V*q-j*j,me=(q*K-j*J)/ie,xe=(V*J-j*K)/ie,Ne=h.z*(1-me-xe)+g.z*me+_.z*xe;if(isFinite(Ne))return Ne}return 1/0}{let l=1/0;for(const h of i)l=Math.min(l,h.z);return l}}const IA=Ai([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:AA}=IA,EA=Ai([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:MA}=EA,DA=af.VectorTileFeature.types,RA=Math.cos(Math.PI/180*37.5),Vx=Math.pow(2,14)/.5;class iy{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new $t,this.layoutVertexArray2=new Et,this.indexArray=new ai,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new Nn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.hasPattern=Wv("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:k,id:E,index:D,sourceLayerIndex:V}of i){const j=this.layers[0]._featureFilter.needGeometry,q=gu(k,j);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),q,h))continue;const K=_?g.evaluate(q,{},h):void 0,J={id:E,properties:k.properties,type:k.type,sourceLayerIndex:V,index:D,geometry:j?q.geometry:pu(k),patterns:{},sortKey:K};x.push(J)}_&&x.sort((k,E)=>k.sortKey-E.sortKey);for(const k of x){const{geometry:E,index:D,sourceLayerIndex:V}=k;if(this.hasPattern){const j=Zv("line",this.layers,k,this.zoom,l);this.patternFeatures.push(j)}else this.addFeature(k,E,D,h,{},l.subdivisionGranularity);l.featureIndex.insert(i[D].feature,E,D,V,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}addFeatures(i,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,MA)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,AA),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,h,g,_,x){const k=this.layers[0].layout,E=k.get("line-join").evaluate(i,{}),D=k.get("line-cap"),V=k.get("line-miter-limit"),j=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const q of l)this.addLine(q,i,E,D,V,j,g,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}addLine(i,l,h,g,_,x,k,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=yu(i,k?E.line.getGranularityForZoomLevel(k.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<i.length-1;Pe++)this.totalDistance+=i[Pe].dist(i[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=DA[l.type]==="Polygon";let V=i.length;for(;V>=2&&i[V-1].equals(i[V-2]);)V--;let j=0;for(;j<V-1&&i[j].equals(i[j+1]);)j++;if(V<(D?3:2))return;h==="bevel"&&(_=1.05);const q=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*V,this.layoutVertexArray,this.indexArray);let J,ie,me,xe,Ne;this.e1=this.e2=-1,D&&(J=i[V-2],Ne=i[j].sub(J)._unit()._perp());for(let Pe=j;Pe<V;Pe++){if(me=Pe===V-1?D?i[j+1]:void 0:i[Pe+1],me&&i[Pe].equals(me))continue;Ne&&(xe=Ne),J&&(ie=J),J=i[Pe],Ne=me?me.sub(J)._unit()._perp():xe,xe=xe||Ne;let Z=xe.add(Ne);Z.x===0&&Z.y===0||Z._unit();const de=xe.x*Ne.x+xe.y*Ne.y,Ee=Z.x*Ne.x+Z.y*Ne.y,it=Ee!==0?1/Ee:1/0,At=2*Math.sqrt(2-2*Ee),dt=Ee<RA&&ie&&me,yt=xe.x*Ne.y-xe.y*Ne.x>0;if(dt&&Pe>j){const Vt=J.dist(ie);if(Vt>2*q){const wt=J.sub(J.sub(ie)._mult(q/Vt)._round());this.updateDistance(ie,wt),this.addCurrentVertex(wt,xe,0,0,K),ie=wt}}const zt=ie&&me;let Mt=zt?h:D?"butt":g;if(zt&&Mt==="round"&&(it<x?Mt="miter":it<=2&&(Mt="fakeround")),Mt==="miter"&&it>_&&(Mt="bevel"),Mt==="bevel"&&(it>2&&(Mt="flipbevel"),it<_&&(Mt="miter")),ie&&this.updateDistance(ie,J),Mt==="miter")Z._mult(it),this.addCurrentVertex(J,Z,0,0,K);else if(Mt==="flipbevel"){if(it>100)Z=Ne.mult(-1);else{const Vt=it*xe.add(Ne).mag()/xe.sub(Ne).mag();Z._perp()._mult(Vt*(yt?-1:1))}this.addCurrentVertex(J,Z,0,0,K),this.addCurrentVertex(J,Z.mult(-1),0,0,K)}else if(Mt==="bevel"||Mt==="fakeround"){const Vt=-Math.sqrt(it*it-1),wt=yt?Vt:0,Jt=yt?0:Vt;if(ie&&this.addCurrentVertex(J,xe,wt,Jt,K),Mt==="fakeround"){const un=Math.round(180*At/Math.PI/20);for(let ln=1;ln<un;ln++){let rn=ln/un;if(rn!==.5){const Ei=rn-.5;rn+=rn*Ei*(rn-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*Ei*Ei+(.848013+de*(.215638*de-1.06021)))}const Fn=Ne.sub(xe)._mult(rn)._add(xe)._unit()._mult(yt?-1:1);this.addHalfVertex(J,Fn.x,Fn.y,!1,yt,0,K)}}me&&this.addCurrentVertex(J,Ne,-wt,-Jt,K)}else if(Mt==="butt")this.addCurrentVertex(J,Z,0,0,K);else if(Mt==="square"){const Vt=ie?1:-1;this.addCurrentVertex(J,Z,Vt,Vt,K)}else Mt==="round"&&(ie&&(this.addCurrentVertex(J,xe,0,0,K),this.addCurrentVertex(J,xe,1,1,K,!0)),me&&(this.addCurrentVertex(J,Ne,-1,-1,K,!0),this.addCurrentVertex(J,Ne,0,0,K)));if(dt&&Pe<V-1){const Vt=J.dist(me);if(Vt>2*q){const wt=J.add(me.sub(J)._mult(q/Vt)._round());this.updateDistance(J,wt),this.addCurrentVertex(wt,Ne,0,0,K),J=wt}}}}addCurrentVertex(i,l,h,g,_,x=!1){const k=l.y*g-l.x,E=-l.y-l.x*g;this.addHalfVertex(i,l.x+l.y*h,l.y-l.x*h,x,!1,h,_),this.addHalfVertex(i,k,E,x,!0,-g,_),this.distance>Vx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,h,g,_,x))}addHalfVertex({x:i,y:l},h,g,_,x,k,E){const D=.5*(this.lineClips?this.scaledDistance*(Vx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(_?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(k===0?0:k<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,V,this.e2),E.primitiveLength++),x?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}let Bx,Ox;Kt("LineBucket",iy,{omit:["layers","patternFeatures"]});var Fx={get paint(){return Ox=Ox||new $r({"line-opacity":new dn(Oe.paint_line["line-opacity"]),"line-color":new dn(Oe.paint_line["line-color"]),"line-translate":new Qt(Oe.paint_line["line-translate"]),"line-translate-anchor":new Qt(Oe.paint_line["line-translate-anchor"]),"line-width":new dn(Oe.paint_line["line-width"]),"line-gap-width":new dn(Oe.paint_line["line-gap-width"]),"line-offset":new dn(Oe.paint_line["line-offset"]),"line-blur":new dn(Oe.paint_line["line-blur"]),"line-dasharray":new Nh(Oe.paint_line["line-dasharray"]),"line-pattern":new Uc(Oe.paint_line["line-pattern"]),"line-gradient":new uu(Oe.paint_line["line-gradient"])})},get layout(){return Bx=Bx||new $r({"line-cap":new Qt(Oe.layout_line["line-cap"]),"line-join":new dn(Oe.layout_line["line-join"]),"line-miter-limit":new Qt(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Qt(Oe.layout_line["line-round-limit"]),"line-sort-key":new dn(Oe.layout_line["line-sort-key"])})}};class LA extends dn{possiblyEvaluate(i,l){return l=new mi(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,h,g){return l=St({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,h,g)}}let kp;class zA extends pr{constructor(i){super(i,Fx),this.gradientVersion=0,kp||(kp=new LA(Fx.paint.properties["line-width"].specification),kp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Fo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=kp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new iy(i)}queryRadius(i){const l=i,h=$x(Yh("line-width",this,l),Yh("line-gap-width",this,l)),g=Yh("line-offset",this,l);return h/2+Math.abs(g)+_p(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x}){const k=bp(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,x),E=x/2*$x(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),D=this.paint.get("line-offset").evaluate(l,h);return D&&(g=function(V,j){const q=[];for(let K=0;K<V.length;K++){const J=V[K],ie=[];for(let me=0;me<J.length;me++){const xe=J[me-1],Ne=J[me],Pe=J[me+1],Z=me===0?new R(0,0):Ne.sub(xe)._unit()._perp(),de=me===J.length-1?new R(0,0):Pe.sub(Ne)._unit()._perp(),Ee=Z._add(de)._unit(),it=Ee.x*de.x+Ee.y*de.y;it!==0&&Ee._mult(1/it),ie.push(Ee._mult(j)._add(Ne))}q.push(ie)}return q}(g,D*x)),function(V,j,q){for(let K=0;K<j.length;K++){const J=j[K];if(V.length>=3){for(let ie=0;ie<J.length;ie++)if(qc(V,J[ie]))return!0}if(ZI(V,J,q))return!0}return!1}(k,g,E)}isTileClipped(){return!0}}function $x(u,i){return i>0?i+2*u:u}const VA=Ai([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),BA=Ai([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ai([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const OA=Ai([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ai([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jx=Ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),FA=Ai([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $A(u,i,l){return u.sections.forEach(h=>{h.text=function(g,_,x){const k=_.layout.get("text-transform").evaluate(x,{});return k==="uppercase"?g=g.toLocaleUpperCase():k==="lowercase"&&(g=g.toLocaleLowerCase()),Is.applyArabicShaping&&(g=Is.applyArabicShaping(g)),g}(h.text,i,l)}),u}Ai([{name:"triangle",components:3,type:"Uint16"}]),Ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ai([{type:"Float32",name:"offsetX"}]),Ai([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ai([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const lf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Nx,ry,Ux,or=24,ay={};function jA(){return Nx||(Nx=1,ay.read=function(u,i,l,h,g){var _,x,k=8*g-h-1,E=(1<<k)-1,D=E>>1,V=-7,j=l?g-1:0,q=l?-1:1,K=u[i+j];for(j+=q,_=K&(1<<-V)-1,K>>=-V,V+=k;V>0;_=256*_+u[i+j],j+=q,V-=8);for(x=_&(1<<-V)-1,_>>=-V,V+=h;V>0;x=256*x+u[i+j],j+=q,V-=8);if(_===0)_=1-D;else{if(_===E)return x?NaN:1/0*(K?-1:1);x+=Math.pow(2,h),_-=D}return(K?-1:1)*x*Math.pow(2,_-h)},ay.write=function(u,i,l,h,g,_){var x,k,E,D=8*_-g-1,V=(1<<D)-1,j=V>>1,q=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=h?0:_-1,J=h?1:-1,ie=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(k=isNaN(i)?1:0,x=V):(x=Math.floor(Math.log(i)/Math.LN2),i*(E=Math.pow(2,-x))<1&&(x--,E*=2),(i+=x+j>=1?q/E:q*Math.pow(2,1-j))*E>=2&&(x++,E/=2),x+j>=V?(k=0,x=V):x+j>=1?(k=(i*E-1)*Math.pow(2,g),x+=j):(k=i*Math.pow(2,j-1)*Math.pow(2,g),x=0));g>=8;u[l+K]=255&k,K+=J,k/=256,g-=8);for(x=x<<g|k,D+=g;D>0;u[l+K]=255&x,K+=J,x/=256,D-=8);u[l+K-J]|=128*ie}),ay}function Gx(){if(Ux)return ry;Ux=1,ry=i;var u=jA();function i(Z){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Z)?Z:new Uint8Array(Z||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var l=4294967296,h=1/l,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function _(Z){return Z.type===i.Bytes?Z.readVarint()+Z.pos:Z.pos+1}function x(Z,de,Ee){return Ee?4294967296*de+(Z>>>0):4294967296*(de>>>0)+(Z>>>0)}function k(Z,de,Ee){var it=de<=16383?1:de<=2097151?2:de<=268435455?3:Math.floor(Math.log(de)/(7*Math.LN2));Ee.realloc(it);for(var At=Ee.pos-1;At>=Z;At--)Ee.buf[At+it]=Ee.buf[At]}function E(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeVarint(Z[Ee])}function D(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeSVarint(Z[Ee])}function V(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeFloat(Z[Ee])}function j(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeDouble(Z[Ee])}function q(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeBoolean(Z[Ee])}function K(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeFixed32(Z[Ee])}function J(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeSFixed32(Z[Ee])}function ie(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeFixed64(Z[Ee])}function me(Z,de){for(var Ee=0;Ee<Z.length;Ee++)de.writeSFixed64(Z[Ee])}function xe(Z,de){return(Z[de]|Z[de+1]<<8|Z[de+2]<<16)+16777216*Z[de+3]}function Ne(Z,de,Ee){Z[Ee]=de,Z[Ee+1]=de>>>8,Z[Ee+2]=de>>>16,Z[Ee+3]=de>>>24}function Pe(Z,de){return(Z[de]|Z[de+1]<<8|Z[de+2]<<16)+(Z[de+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(Z,de,Ee){for(Ee=Ee||this.length;this.pos<Ee;){var it=this.readVarint(),At=it>>3,dt=this.pos;this.type=7&it,Z(At,de,this),this.pos===dt&&this.skip(it)}return de},readMessage:function(Z,de){return this.readFields(Z,de,this.readVarint()+this.pos)},readFixed32:function(){var Z=xe(this.buf,this.pos);return this.pos+=4,Z},readSFixed32:function(){var Z=Pe(this.buf,this.pos);return this.pos+=4,Z},readFixed64:function(){var Z=xe(this.buf,this.pos)+xe(this.buf,this.pos+4)*l;return this.pos+=8,Z},readSFixed64:function(){var Z=xe(this.buf,this.pos)+Pe(this.buf,this.pos+4)*l;return this.pos+=8,Z},readFloat:function(){var Z=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Z},readDouble:function(){var Z=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Z},readVarint:function(Z){var de,Ee,it=this.buf;return de=127&(Ee=it[this.pos++]),Ee<128?de:(de|=(127&(Ee=it[this.pos++]))<<7,Ee<128?de:(de|=(127&(Ee=it[this.pos++]))<<14,Ee<128?de:(de|=(127&(Ee=it[this.pos++]))<<21,Ee<128?de:function(At,dt,yt){var zt,Mt,Vt=yt.buf;if(zt=(112&(Mt=Vt[yt.pos++]))>>4,Mt<128||(zt|=(127&(Mt=Vt[yt.pos++]))<<3,Mt<128)||(zt|=(127&(Mt=Vt[yt.pos++]))<<10,Mt<128)||(zt|=(127&(Mt=Vt[yt.pos++]))<<17,Mt<128)||(zt|=(127&(Mt=Vt[yt.pos++]))<<24,Mt<128)||(zt|=(1&(Mt=Vt[yt.pos++]))<<31,Mt<128))return x(At,zt,dt);throw new Error("Expected varint not more than 10 bytes")}(de|=(15&(Ee=it[this.pos]))<<28,Z,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Z=this.readVarint();return Z%2==1?(Z+1)/-2:Z/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Z=this.readVarint()+this.pos,de=this.pos;return this.pos=Z,Z-de>=12&&g?function(Ee,it,At){return g.decode(Ee.subarray(it,At))}(this.buf,de,Z):function(Ee,it,At){for(var dt="",yt=it;yt<At;){var zt,Mt,Vt,wt=Ee[yt],Jt=null,un=wt>239?4:wt>223?3:wt>191?2:1;if(yt+un>At)break;un===1?wt<128&&(Jt=wt):un===2?(192&(zt=Ee[yt+1]))==128&&(Jt=(31&wt)<<6|63&zt)<=127&&(Jt=null):un===3?(Mt=Ee[yt+2],(192&(zt=Ee[yt+1]))==128&&(192&Mt)==128&&((Jt=(15&wt)<<12|(63&zt)<<6|63&Mt)<=2047||Jt>=55296&&Jt<=57343)&&(Jt=null)):un===4&&(Mt=Ee[yt+2],Vt=Ee[yt+3],(192&(zt=Ee[yt+1]))==128&&(192&Mt)==128&&(192&Vt)==128&&((Jt=(15&wt)<<18|(63&zt)<<12|(63&Mt)<<6|63&Vt)<=65535||Jt>=1114112)&&(Jt=null)),Jt===null?(Jt=65533,un=1):Jt>65535&&(Jt-=65536,dt+=String.fromCharCode(Jt>>>10&1023|55296),Jt=56320|1023&Jt),dt+=String.fromCharCode(Jt),yt+=un}return dt}(this.buf,de,Z)},readBytes:function(){var Z=this.readVarint()+this.pos,de=this.buf.subarray(this.pos,Z);return this.pos=Z,de},readPackedVarint:function(Z,de){if(this.type!==i.Bytes)return Z.push(this.readVarint(de));var Ee=_(this);for(Z=Z||[];this.pos<Ee;)Z.push(this.readVarint(de));return Z},readPackedSVarint:function(Z){if(this.type!==i.Bytes)return Z.push(this.readSVarint());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readSVarint());return Z},readPackedBoolean:function(Z){if(this.type!==i.Bytes)return Z.push(this.readBoolean());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readBoolean());return Z},readPackedFloat:function(Z){if(this.type!==i.Bytes)return Z.push(this.readFloat());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readFloat());return Z},readPackedDouble:function(Z){if(this.type!==i.Bytes)return Z.push(this.readDouble());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readDouble());return Z},readPackedFixed32:function(Z){if(this.type!==i.Bytes)return Z.push(this.readFixed32());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readFixed32());return Z},readPackedSFixed32:function(Z){if(this.type!==i.Bytes)return Z.push(this.readSFixed32());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readSFixed32());return Z},readPackedFixed64:function(Z){if(this.type!==i.Bytes)return Z.push(this.readFixed64());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readFixed64());return Z},readPackedSFixed64:function(Z){if(this.type!==i.Bytes)return Z.push(this.readSFixed64());var de=_(this);for(Z=Z||[];this.pos<de;)Z.push(this.readSFixed64());return Z},skip:function(Z){var de=7&Z;if(de===i.Varint)for(;this.buf[this.pos++]>127;);else if(de===i.Bytes)this.pos=this.readVarint()+this.pos;else if(de===i.Fixed32)this.pos+=4;else{if(de!==i.Fixed64)throw new Error("Unimplemented type: "+de);this.pos+=8}},writeTag:function(Z,de){this.writeVarint(Z<<3|de)},realloc:function(Z){for(var de=this.length||16;de<this.pos+Z;)de*=2;if(de!==this.length){var Ee=new Uint8Array(de);Ee.set(this.buf),this.buf=Ee,this.length=de}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Z){this.realloc(4),Ne(this.buf,Z,this.pos),this.pos+=4},writeSFixed32:function(Z){this.realloc(4),Ne(this.buf,Z,this.pos),this.pos+=4},writeFixed64:function(Z){this.realloc(8),Ne(this.buf,-1&Z,this.pos),Ne(this.buf,Math.floor(Z*h),this.pos+4),this.pos+=8},writeSFixed64:function(Z){this.realloc(8),Ne(this.buf,-1&Z,this.pos),Ne(this.buf,Math.floor(Z*h),this.pos+4),this.pos+=8},writeVarint:function(Z){(Z=+Z||0)>268435455||Z<0?function(de,Ee){var it,At;if(de>=0?(it=de%4294967296|0,At=de/4294967296|0):(At=~(-de/4294967296),4294967295^(it=~(-de%4294967296))?it=it+1|0:(it=0,At=At+1|0)),de>=18446744073709552e3||de<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ee.realloc(10),function(dt,yt,zt){zt.buf[zt.pos++]=127&dt|128,dt>>>=7,zt.buf[zt.pos++]=127&dt|128,dt>>>=7,zt.buf[zt.pos++]=127&dt|128,dt>>>=7,zt.buf[zt.pos++]=127&dt|128,zt.buf[zt.pos]=127&(dt>>>=7)}(it,0,Ee),function(dt,yt){var zt=(7&dt)<<4;yt.buf[yt.pos++]|=zt|((dt>>>=3)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt|((dt>>>=7)?128:0),dt&&(yt.buf[yt.pos++]=127&dt)))))}(At,Ee)}(Z,this):(this.realloc(4),this.buf[this.pos++]=127&Z|(Z>127?128:0),Z<=127||(this.buf[this.pos++]=127&(Z>>>=7)|(Z>127?128:0),Z<=127||(this.buf[this.pos++]=127&(Z>>>=7)|(Z>127?128:0),Z<=127||(this.buf[this.pos++]=Z>>>7&127))))},writeSVarint:function(Z){this.writeVarint(Z<0?2*-Z-1:2*Z)},writeBoolean:function(Z){this.writeVarint(!!Z)},writeString:function(Z){Z=String(Z),this.realloc(4*Z.length),this.pos++;var de=this.pos;this.pos=function(it,At,dt){for(var yt,zt,Mt=0;Mt<At.length;Mt++){if((yt=At.charCodeAt(Mt))>55295&&yt<57344){if(!zt){yt>56319||Mt+1===At.length?(it[dt++]=239,it[dt++]=191,it[dt++]=189):zt=yt;continue}if(yt<56320){it[dt++]=239,it[dt++]=191,it[dt++]=189,zt=yt;continue}yt=zt-55296<<10|yt-56320|65536,zt=null}else zt&&(it[dt++]=239,it[dt++]=191,it[dt++]=189,zt=null);yt<128?it[dt++]=yt:(yt<2048?it[dt++]=yt>>6|192:(yt<65536?it[dt++]=yt>>12|224:(it[dt++]=yt>>18|240,it[dt++]=yt>>12&63|128),it[dt++]=yt>>6&63|128),it[dt++]=63&yt|128)}return dt}(this.buf,Z,this.pos);var Ee=this.pos-de;Ee>=128&&k(de,Ee,this),this.pos=de-1,this.writeVarint(Ee),this.pos+=Ee},writeFloat:function(Z){this.realloc(4),u.write(this.buf,Z,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Z){this.realloc(8),u.write(this.buf,Z,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Z){var de=Z.length;this.writeVarint(de),this.realloc(de);for(var Ee=0;Ee<de;Ee++)this.buf[this.pos++]=Z[Ee]},writeRawMessage:function(Z,de){this.pos++;var Ee=this.pos;Z(de,this);var it=this.pos-Ee;it>=128&&k(Ee,it,this),this.pos=Ee-1,this.writeVarint(it),this.pos+=it},writeMessage:function(Z,de,Ee){this.writeTag(Z,i.Bytes),this.writeRawMessage(de,Ee)},writePackedVarint:function(Z,de){de.length&&this.writeMessage(Z,E,de)},writePackedSVarint:function(Z,de){de.length&&this.writeMessage(Z,D,de)},writePackedBoolean:function(Z,de){de.length&&this.writeMessage(Z,q,de)},writePackedFloat:function(Z,de){de.length&&this.writeMessage(Z,V,de)},writePackedDouble:function(Z,de){de.length&&this.writeMessage(Z,j,de)},writePackedFixed32:function(Z,de){de.length&&this.writeMessage(Z,K,de)},writePackedSFixed32:function(Z,de){de.length&&this.writeMessage(Z,J,de)},writePackedFixed64:function(Z,de){de.length&&this.writeMessage(Z,ie,de)},writePackedSFixed64:function(Z,de){de.length&&this.writeMessage(Z,me,de)},writeBytesField:function(Z,de){this.writeTag(Z,i.Bytes),this.writeBytes(de)},writeFixed32Field:function(Z,de){this.writeTag(Z,i.Fixed32),this.writeFixed32(de)},writeSFixed32Field:function(Z,de){this.writeTag(Z,i.Fixed32),this.writeSFixed32(de)},writeFixed64Field:function(Z,de){this.writeTag(Z,i.Fixed64),this.writeFixed64(de)},writeSFixed64Field:function(Z,de){this.writeTag(Z,i.Fixed64),this.writeSFixed64(de)},writeVarintField:function(Z,de){this.writeTag(Z,i.Varint),this.writeVarint(de)},writeSVarintField:function(Z,de){this.writeTag(Z,i.Varint),this.writeSVarint(de)},writeStringField:function(Z,de){this.writeTag(Z,i.Bytes),this.writeString(de)},writeFloatField:function(Z,de){this.writeTag(Z,i.Fixed32),this.writeFloat(de)},writeDoubleField:function(Z,de){this.writeTag(Z,i.Fixed64),this.writeDouble(de)},writeBooleanField:function(Z,de){this.writeVarintField(Z,!!de)}},ry}var ol,sy=b(Gx());function NA(u,i,l){u===1&&l.readMessage(UA,i)}function UA(u,i,l){if(u===3){const{id:h,bitmap:g,width:_,height:x,left:k,top:E,advance:D}=l.readMessage(GA,{});i.push({id:h,bitmap:new Xh({width:_+6,height:x+6},g),metrics:{width:_,height:x,left:k,top:E,advance:D}})}}function GA(u,i,l){u===1?i.id=l.readVarint():u===2?i.bitmap=l.readBytes():u===3?i.width=l.readVarint():u===4?i.height=l.readVarint():u===5?i.left=l.readSVarint():u===6?i.top=l.readSVarint():u===7&&(i.advance=l.readVarint())}function Hx(u){let i=0,l=0;for(const x of u)i+=x.w*x.h,l=Math.max(l,x.w);u.sort((x,k)=>k.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let g=0,_=0;for(const x of u)for(let k=h.length-1;k>=0;k--){const E=h[k];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===E.w&&x.h===E.h){const D=h.pop();k<h.length&&(h[k]=D)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:g,h:_,fill:i/(g*_)||0}}class oy{constructor(i,{pixelRatio:l,version:h,stretchX:g,stretchY:_,content:x,textFitWidth:k,textFitHeight:E}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=k,this.textFitHeight=E}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class qx{constructor(i,l){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(i,h,_),this.addImages(l,g,_);const{w:x,h:k}=Hx(_),E=new ua({width:x||1,height:k||1});for(const D in i){const V=i[D],j=h[D].paddedRect;ua.copy(V.data,E,{x:0,y:0},{x:j.x+1,y:j.y+1},V.data)}for(const D in l){const V=l[D],j=g[D].paddedRect,q=j.x+1,K=j.y+1,J=V.data.width,ie=V.data.height;ua.copy(V.data,E,{x:0,y:0},{x:q,y:K},V.data),ua.copy(V.data,E,{x:0,y:ie-1},{x:q,y:K-1},{width:J,height:1}),ua.copy(V.data,E,{x:0,y:0},{x:q,y:K+ie},{width:J,height:1}),ua.copy(V.data,E,{x:J-1,y:0},{x:q-1,y:K},{width:1,height:ie}),ua.copy(V.data,E,{x:0,y:0},{x:q+J,y:K},{width:1,height:ie})}this.image=E,this.iconPositions=h,this.patternPositions=g}addImages(i,l,h){for(const g in i){const _=i[g],x={x:0,y:0,w:_.data.width+2,h:_.data.height+2};h.push(x),l[g]=new oy(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),l)}patchUpdatedImage(i,l,h){if(!i||!l||i.version===l.version)return;i.version=l.version;const[g,_]=i.tl;h.update(l.data,void 0,{x:g,y:_})}}Kt("ImagePosition",oy),Kt("ImageAtlas",qx),d.an=void 0,(ol=d.an||(d.an={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";class uf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,l,h){const g=new uf;return g.scale=i||1,g.fontStack=l,g.verticalAlign=h||"bottom",g}static forImage(i,l){const h=new uf;return h.imageName=i,h.verticalAlign=l||"bottom",h}}class Yc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const h=new Yc;for(let g=0;g<i.sections.length;g++){const _=i.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,l)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let l="";for(let h=0;h<i.length;h++){const g=i.charCodeAt(h+1)||null,_=i.charCodeAt(h-1)||null;l+=g&&Fh(g)&&!lf[i[h+1]]||_&&Fh(_)&&!lf[i[h-1]]||!lf[i[h]]?i[h]:lf[i[h]]}return l}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&Pp[this.text.charCodeAt(h)];h++)i++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&Pp[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const h=new Yc;return h.text=this.text.substring(i,l),h.sectionIndex=this.sectionIndex.slice(i,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}getMaxImageSize(i){let l=0,h=0;for(let g=0;g<this.length();g++){const _=this.getSection(g);if(_.imageName){const x=i[_.imageName];if(!x)continue;const k=x.displaySize;l=Math.max(l,k[0]),h=Math.max(h,k[1])}}return{maxImageWidth:l,maxImageHeight:h}}addTextSection(i,l){this.text+=i.text,this.sections.push(uf.forText(i.scale,i.fontStack||l,i.verticalAlign));const h=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(h)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Je("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(uf.forImage(l,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Tp(u,i,l,h,g,_,x,k,E,D,V,j,q,K,J){const ie=Yc.fromFeature(u,g);let me;j===d.an.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:xe,processStyledBidirectionalText:Ne}=Is;if(xe&&ie.sections.length===1){me=[];const de=xe(ie.toString(),ly(ie,D,_,i,h,K));for(const Ee of de){const it=new Yc;it.text=Ee,it.sections=ie.sections;for(let At=0;At<Ee.length;At++)it.sectionIndex.push(0);me.push(it)}}else if(Ne){me=[];const de=Ne(ie.text,ie.sectionIndex,ly(ie,D,_,i,h,K));for(const Ee of de){const it=new Yc;it.text=Ee[0],it.sectionIndex=Ee[1],it.sections=ie.sections,me.push(it)}}else me=function(de,Ee){const it=[],At=de.text;let dt=0;for(const yt of Ee)it.push(de.substring(dt,yt)),dt=yt;return dt<At.length&&it.push(de.substring(dt,At.length)),it}(ie,ly(ie,D,_,i,h,K));const Pe=[],Z={positionedLines:Pe,text:ie.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(de,Ee,it,At,dt,yt,zt,Mt,Vt,wt,Jt,un){let ln=0,rn=0,Fn=0,Ei=0;const Ji=Mt==="right"?1:Mt==="left"?0:.5,Er=or/un;let Da=0;for(const Ci of dt){Ci.trim();const lr=Ci.getMaxScale(),br={positionedGlyphs:[],lineOffset:0};de.positionedLines[Da]=br;const xr=br.positionedGlyphs;let Xr=0;if(!Ci.length()){rn+=yt,++Da;continue}const Ra=ZA(At,Ci,Er);for(let da=0;da<Ci.length();da++){const Qi=Ci.getSection(da),cr=Ci.getSectionIndex(da),dr=Ci.getCharCode(da),qi=KA(Vt,Jt,dr);let fi;if(Qi.imageName){if(de.iconsInText=!0,Qi.scale=Qi.scale*Er,fi=XA(Qi,qi,lr,Ra,At),!fi)continue;Xr=Math.max(Xr,fi.imageOffset)}else if(fi=YA(Qi,dr,qi,Ra,Ee,it),!fi)continue;const{rect:us,metrics:ed,baselineOffset:cs}=fi;xr.push({glyph:dr,imageName:Qi.imageName,x:ln,y:rn+cs+-17,vertical:qi,scale:Qi.scale,fontStack:Qi.fontStack,sectionIndex:cr,metrics:ed,rect:us}),qi?(de.verticalizable=!0,ln+=(Qi.imageName?ed.advance:or)*Qi.scale+wt):ln+=ed.advance*Qi.scale+wt}xr.length!==0&&(Fn=Math.max(ln-wt,Fn),JA(xr,0,xr.length-1,Ji)),ln=0,br.lineOffset=Math.max(Xr,(lr-1)*or);const ur=yt*lr+Xr;rn+=ur,Ei=Math.max(ur,Ei),++Da}const{horizontalAlign:ca,verticalAlign:_r}=uy(zt);(function(Ci,lr,br,xr,Xr,Ra,ur,da,Qi){const cr=(lr-br)*Xr;let dr=0;dr=Ra!==ur?-da*xr- -17:-xr*Qi*ur+.5*ur;for(const qi of Ci)for(const fi of qi.positionedGlyphs)fi.x+=cr,fi.y+=dr})(de.positionedLines,Ji,ca,_r,Fn,Ei,yt,rn,dt.length),de.top+=-_r*rn,de.bottom=de.top+rn,de.left+=-ca*Fn,de.right=de.left+Fn}(Z,i,l,h,me,x,k,E,j,D,q,J),!function(de){for(const Ee of de)if(Ee.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&Z}const Pp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},HA={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},qA={40:!0};function Wx(u,i,l,h,g,_){if(i.imageName){const x=h[i.imageName];return x?x.displaySize[0]*i.scale*or/_+g:0}{const x=l[i.fontStack],k=x&&x[u];return k?k.metrics.advance*i.scale+g:0}}function Zx(u,i,l,h){const g=Math.pow(u-i,2);return h?u<i?g/2:2*g:g+Math.abs(l)*l}function WA(u,i,l){let h=0;return u===10&&(h-=1e4),l&&(h+=150),u!==40&&u!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function Kx(u,i,l,h,g,_){let x=null,k=Zx(i,l,g,_);for(const E of h){const D=Zx(i-E.x,l,g,_)+E.badness;D<=k&&(x=E,k=D)}return{index:u,x:i,priorBreak:x,badness:k}}function Yx(u){return u?Yx(u.priorBreak).concat(u.index):[]}function ly(u,i,l,h,g,_){if(!u)return[];const x=[],k=function(j,q,K,J,ie,me){let xe=0;for(let Ne=0;Ne<j.length();Ne++){const Pe=j.getSection(Ne);xe+=Wx(j.getCharCode(Ne),Pe,J,ie,q,me)}return xe/Math.max(1,Math.ceil(xe/K))}(u,i,l,h,g,_),E=u.text.indexOf("​")>=0;let D=0;for(let j=0;j<u.length();j++){const q=u.getSection(j),K=u.getCharCode(j);if(Pp[K]||(D+=Wx(K,q,h,g,i,_)),j<u.length()-1){const J=!((V=K)<11904)&&(!!Bn["CJK Compatibility Forms"](V)||!!Bn["CJK Compatibility"](V)||!!Bn["CJK Strokes"](V)||!!Bn["CJK Symbols and Punctuation"](V)||!!Bn["Enclosed CJK Letters and Months"](V)||!!Bn["Halfwidth and Fullwidth Forms"](V)||!!Bn["Ideographic Description Characters"](V)||!!Bn["Vertical Forms"](V)||Oh.test(String.fromCodePoint(V)));(HA[K]||J||q.imageName||j!==u.length()-2&&qA[u.getCharCode(j+1)])&&x.push(Kx(j+1,D,k,x,WA(K,u.getCharCode(j+1),J&&E),!1))}}var V;return Yx(Kx(u.length(),D,k,x,0,!0))}function uy(u){let i=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function ZA(u,i,l){const h=i.getMaxScale()*or,{maxImageWidth:g,maxImageHeight:_}=i.getMaxImageSize(u),x=Math.max(h,_*l);return{verticalLineContentWidth:Math.max(h,g*l),horizontalLineContentHeight:x}}function Xx(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function KA(u,i,l){return!(u===d.an.horizontal||!i&&!$c(l)||i&&(Pp[l]||(h=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function YA(u,i,l,h,g,_){const x=_[u.fontStack],k=function(D,V,j,q){if(D&&D.rect)return D;const K=V[j.fontStack],J=K&&K[q];return J?{rect:null,metrics:J.metrics}:null}(x&&x[i],g,u,i);if(k===null)return null;let E;if(l)E=h.verticalLineContentWidth-u.scale*or;else{const D=Xx(u.verticalAlign);E=(h.horizontalLineContentHeight-u.scale*or)*D}return{rect:k.rect,metrics:k.metrics,baselineOffset:E}}function XA(u,i,l,h,g){const _=g[u.imageName];if(!_)return null;const x=_.paddedRect,k=_.displaySize,E={width:k[0],height:k[1],left:1,top:-3,advance:i?k[1]:k[0]};let D;if(i)D=h.verticalLineContentWidth-k[1]*u.scale;else{const V=Xx(u.verticalAlign);D=(h.horizontalLineContentHeight-k[1]*u.scale)*V}return{rect:x,metrics:E,baselineOffset:D,imageOffset:(i?k[0]:k[1])*u.scale-or*l}}function JA(u,i,l,h){if(h===0)return;const g=u[l],_=(u[l].x+g.metrics.advance*g.scale)*h;for(let x=i;x<=l;x++)u[x].x-=_}function QA(u,i,l){const{horizontalAlign:h,verticalAlign:g}=uy(l),_=i[0]-u.displaySize[0]*h,x=i[1]-u.displaySize[1]*g;return{image:u,top:x,bottom:x+u.displaySize[1],left:_,right:_+u.displaySize[0]}}function Jx(u){var i,l;let h=u.left,g=u.top,_=u.right-h,x=u.bottom-g;const k=(i=u.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",E=(l=u.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",D=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(E==="proportional"){if(k==="stretchOnly"&&_/x<D||k==="proportional"){const V=Math.ceil(x*D);h*=V/_,_=V}}else if(k==="proportional"&&E==="stretchOnly"&&D!==0&&_/x>D){const V=Math.ceil(_/D);g*=V/x,x=V}return{x1:h,y1:g,x2:h+_,y2:g+x}}function Qx(u,i,l,h,g,_){const x=u.image;let k;if(x.content){const me=x.content,xe=x.pixelRatio||1;k=[me[0]/xe,me[1]/xe,x.displaySize[0]-me[2]/xe,x.displaySize[1]-me[3]/xe]}const E=i.left*_,D=i.right*_;let V,j,q,K;l==="width"||l==="both"?(K=g[0]+E-h[3],j=g[0]+D+h[1]):(K=g[0]+(E+D-x.displaySize[0])/2,j=K+x.displaySize[0]);const J=i.top*_,ie=i.bottom*_;return l==="height"||l==="both"?(V=g[1]+J-h[0],q=g[1]+ie+h[2]):(V=g[1]+(J+ie-x.displaySize[1])/2,q=V+x.displaySize[1]),{image:x,top:V,right:j,bottom:q,left:K,collisionPadding:k}}const co=128,ll=32640;function ew(u,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new mi(u+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=l;let _=0;for(;_<h.length&&h[_]<=u;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<u+1;)x++;x=Math.min(h.length-1,x);const k=h[_],E=h[x];return l.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:k,maxZoom:E,minSize:l.evaluate(new mi(k)),maxSize:l.evaluate(new mi(E)),interpolationType:g}}}function cy(u,i,l){let h="never";const g=u.get(i);return g?h=g:u.get(l)&&(h="always"),h}const eE=af.VectorTileFeature.types,tE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ip(u,i,l,h,g,_,x,k,E,D,V,j,q){const K=k?Math.min(ll,Math.round(k[0])):0,J=k?Math.min(ll,Math.round(k[1])):0;u.emplaceBack(i,l,Math.round(32*h),Math.round(32*g),_,x,(K<<1)+(E?1:0),J,16*D,16*V,256*j,256*q)}function dy(u,i,l){u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l)}function nE(u){for(const i of u.sections)if($h(i.text))return!0;return!1}class hy{constructor(i){this.layoutVertexArray=new kn,this.indexArray=new ai,this.programConfigurations=i,this.segments=new Nn,this.dynamicLayoutVertexArray=new Kn,this.opacityVertexArray=new wi,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,VA.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,BA.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,tE,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Kt("SymbolBuffers",hy);class fy{constructor(i,l,h){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Nn,this.collisionVertexArray=new Si}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,OA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Kt("CollisionBuffers",fy);class Xc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ew(this.zoom,l["text-size"]),this.iconSizeData=ew(this.zoom,l["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=cy(h,"text-overlap","text-allow-overlap")!=="never"||cy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.an[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID}createArrays(){this.text=new hy(new zs(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new hy(new zs(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new ke,this.lineVertexArray=new De,this.symbolInstances=new Ae,this.textAnchorOffsets=new Te}calculateGlyphDependencies(i,l,h,g,_){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,(h||g)&&_){const k=lf[i.charAt(x)];k&&(l[k.charCodeAt(0)]=!0)}}populate(i,l,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),k=_.get("text-field"),E=_.get("icon-image"),D=(k.value.kind!=="constant"||k.value.value instanceof Pr&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),V=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,j=_.get("symbol-sort-key");if(this.features=[],!D&&!V)return;const q=l.iconDependencies,K=l.glyphDependencies,J=l.availableImages,ie=new mi(this.zoom,{globalState:this.globalState});for(const{feature:me,id:xe,index:Ne,sourceLayerIndex:Pe}of i){const Z=g._featureFilter.needGeometry,de=gu(me,Z);if(!g._featureFilter.filter(ie,de,h))continue;let Ee,it;if(Z||(de.geometry=pu(me)),D){const dt=g.getValueAndResolveTokens("text-field",de,h,J),yt=Pr.factory(dt),zt=this.hasRTLText=this.hasRTLText||nE(yt);(!zt||Is.getRTLTextPluginStatus()==="unavailable"||zt&&Is.isParsed())&&(Ee=$A(yt,g,de))}if(V){const dt=g.getValueAndResolveTokens("icon-image",de,h,J);it=dt instanceof Wr?dt:Wr.fromString(dt)}if(!Ee&&!it)continue;const At=this.sortFeaturesByKey?j.evaluate(de,{},h):void 0;if(this.features.push({id:xe,text:Ee,icon:it,index:Ne,sourceLayerIndex:Pe,geometry:de.geometry,properties:me.properties,type:eE[me.type],sortKey:At}),it&&(q[it.name]=!0),Ee){const dt=x.evaluate(de,{},h).join(","),yt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.an.vertical)>=0;for(const zt of Ee.sections)if(zt.image)q[zt.image.name]=!0;else{const Mt=Bh(Ee.toString()),Vt=zt.fontStack||dt,wt=K[Vt]=K[Vt]||{};this.calculateGlyphDependencies(zt.text,wt,yt,this.allowVerticalPlacement,Mt)}}}_.get("symbol-placement")==="line"&&(this.features=function(me){const xe={},Ne={},Pe=[];let Z=0;function de(dt){Pe.push(me[dt]),Z++}function Ee(dt,yt,zt){const Mt=Ne[dt];return delete Ne[dt],Ne[yt]=Mt,Pe[Mt].geometry[0].pop(),Pe[Mt].geometry[0]=Pe[Mt].geometry[0].concat(zt[0]),Mt}function it(dt,yt,zt){const Mt=xe[yt];return delete xe[yt],xe[dt]=Mt,Pe[Mt].geometry[0].shift(),Pe[Mt].geometry[0]=zt[0].concat(Pe[Mt].geometry[0]),Mt}function At(dt,yt,zt){const Mt=zt?yt[0][yt[0].length-1]:yt[0][0];return`${dt}:${Mt.x}:${Mt.y}`}for(let dt=0;dt<me.length;dt++){const yt=me[dt],zt=yt.geometry,Mt=yt.text?yt.text.toString():null;if(!Mt){de(dt);continue}const Vt=At(Mt,zt),wt=At(Mt,zt,!0);if(Vt in Ne&&wt in xe&&Ne[Vt]!==xe[wt]){const Jt=it(Vt,wt,zt),un=Ee(Vt,wt,Pe[Jt].geometry);delete xe[Vt],delete Ne[wt],Ne[At(Mt,Pe[un].geometry,!0)]=un,Pe[Jt].geometry=null}else Vt in Ne?Ee(Vt,wt,zt):wt in xe?it(Vt,wt,zt):(de(dt),xe[Vt]=Z-1,Ne[wt]=Z-1)}return Pe.filter(dt=>dt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,xe)=>me.sortKey-xe.sortKey)}update(i,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const h=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(l[i.segment+1]),_=i.dist(l[i.segment]);const x={};for(let k=i.segment+1;k<l.length;k++)x[k]={x:l[k].x,y:l[k].y,tileUnitDistanceFromAnchor:g},k<l.length-1&&(g+=l[k+1].dist(l[k]));for(let k=i.segment||0;k>=0;k--)x[k]={x:l[k].x,y:l[k].y,tileUnitDistanceFromAnchor:_},k>0&&(_+=l[k-1].dist(l[k]));for(let k=0;k<l.length;k++){const E=x[k];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,l,h,g,_,x,k,E,D,V,j,q){const K=i.indexArray,J=i.layoutVertexArray,ie=i.segments.prepareSegment(4*l.length,J,K,this.canOverlap?x.sortKey:void 0),me=this.glyphOffsetArray.length,xe=ie.vertexLength,Ne=this.allowVerticalPlacement&&k===d.an.vertical?Math.PI/2:0,Pe=x.text&&x.text.sections;for(let Z=0;Z<l.length;Z++){const{tl:de,tr:Ee,bl:it,br:At,tex:dt,pixelOffsetTL:yt,pixelOffsetBR:zt,minFontScaleX:Mt,minFontScaleY:Vt,glyphOffset:wt,isSDF:Jt,sectionIndex:un}=l[Z],ln=ie.vertexLength,rn=wt[1];Ip(J,E.x,E.y,de.x,rn+de.y,dt.x,dt.y,h,Jt,yt.x,yt.y,Mt,Vt),Ip(J,E.x,E.y,Ee.x,rn+Ee.y,dt.x+dt.w,dt.y,h,Jt,zt.x,yt.y,Mt,Vt),Ip(J,E.x,E.y,it.x,rn+it.y,dt.x,dt.y+dt.h,h,Jt,yt.x,zt.y,Mt,Vt),Ip(J,E.x,E.y,At.x,rn+At.y,dt.x+dt.w,dt.y+dt.h,h,Jt,zt.x,zt.y,Mt,Vt),dy(i.dynamicLayoutVertexArray,E,Ne),K.emplaceBack(ln,ln+2,ln+1),K.emplaceBack(ln+1,ln+2,ln+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),Z!==l.length-1&&un===l[Z+1].sectionIndex||i.programConfigurations.populatePaintArrays(J.length,x,x.index,{},q,Pe&&Pe[un])}i.placedSymbolArray.emplaceBack(E.x,E.y,me,this.glyphOffsetArray.length-me,xe,D,V,E.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],k,0,!1,0,j)}_addCollisionDebugVertex(i,l,h,g,_,x){return l.emplaceBack(0,0),i.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(i,l,h,g,_,x,k){const E=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),D=E.vertexLength,V=_.layoutVertexArray,j=_.collisionVertexArray,q=k.anchorX,K=k.anchorY;this._addCollisionDebugVertex(V,j,x,q,K,new R(i,l)),this._addCollisionDebugVertex(V,j,x,q,K,new R(h,l)),this._addCollisionDebugVertex(V,j,x,q,K,new R(h,g)),this._addCollisionDebugVertex(V,j,x,q,K,new R(i,g)),E.vertexLength+=4;const J=_.indexArray;J.emplaceBack(D,D+1),J.emplaceBack(D+1,D+2),J.emplaceBack(D+2,D+3),J.emplaceBack(D+3,D),E.primitiveLength+=4}addDebugCollisionBoxes(i,l,h,g){for(let _=i;_<l;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fy(ni,jx.members,ii),this.iconCollisionBox=new fy(ni,jx.members,ii);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,h,g,_,x,k,E,D){const V={};for(let j=l;j<h;j++){const q=i.get(j);V.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},V.textFeatureIndex=q.featureIndex;break}for(let j=g;j<_;j++){const q=i.get(j);V.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},V.verticalTextFeatureIndex=q.featureIndex;break}for(let j=x;j<k;j++){const q=i.get(j);V.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},V.iconFeatureIndex=q.featureIndex;break}for(let j=E;j<D;j++){const q=i.get(j);V.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},V.verticalIconFeatureIndex=q.featureIndex;break}return V}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const h=i.placedSymbolArray.get(l),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)i.indexArray.emplaceBack(_,_+2,_+1),i.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),h=Math.cos(i),g=[],_=[],x=[];for(let k=0;k<this.symbolInstances.length;++k){x.push(k);const E=this.symbolInstances.get(k);g.push(0|Math.round(l*E.anchorX+h*E.anchorY)),_.push(E.featureIndex)}return x.sort((k,E)=>g[k]-g[E]||_[E]-_[k]),x}addToSortKeyRanges(i,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tw,nw;Kt("SymbolBucket",Xc,{omit:["layers","collisionBoxArray","features","compareText"]}),Xc.MAX_GLYPHS=65535,Xc.addDynamicAttributes=dy;var my={get paint(){return nw=nw||new $r({"icon-opacity":new dn(Oe.paint_symbol["icon-opacity"]),"icon-color":new dn(Oe.paint_symbol["icon-color"]),"icon-halo-color":new dn(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new dn(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new dn(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Qt(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qt(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new dn(Oe.paint_symbol["text-opacity"]),"text-color":new dn(Oe.paint_symbol["text-color"],{runtimeType:sa,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new dn(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new dn(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new dn(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Qt(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Qt(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return tw=tw||new $r({"symbol-placement":new Qt(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Qt(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qt(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new dn(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qt(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qt(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Qt(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Qt(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qt(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qt(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new dn(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Qt(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qt(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new dn(Oe.layout_symbol["icon-image"]),"icon-rotate":new dn(Oe.layout_symbol["icon-rotate"]),"icon-padding":new dn(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Qt(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new dn(Oe.layout_symbol["icon-offset"]),"icon-anchor":new dn(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qt(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qt(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qt(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new dn(Oe.layout_symbol["text-field"]),"text-font":new dn(Oe.layout_symbol["text-font"]),"text-size":new dn(Oe.layout_symbol["text-size"]),"text-max-width":new dn(Oe.layout_symbol["text-max-width"]),"text-line-height":new Qt(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new dn(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new dn(Oe.layout_symbol["text-justify"]),"text-radial-offset":new dn(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qt(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new dn(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new dn(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Qt(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Qt(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new dn(Oe.layout_symbol["text-rotate"]),"text-padding":new Qt(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Qt(Oe.layout_symbol["text-keep-upright"]),"text-transform":new dn(Oe.layout_symbol["text-transform"]),"text-offset":new dn(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Qt(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Qt(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Qt(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Qt(Oe.layout_symbol["text-optional"])})}};class iw{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ys,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Kt("FormatSectionOverride",iw,{omit:["defaultValue"]});class Ap extends pr{constructor(i){super(i,my)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,h,g){const _=this.layout.get(i).evaluate(l,{},h,g),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Ic(x.value)||!_?_:function(k,E){return E.replace(/{([^{}]+)}/g,(D,V)=>k&&V in k?String(k[V]):"")}(l.properties,_)}createBucket(i){return new Xc(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of my.paint.overridableProperties){if(!Ap.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),h=new iw(l),g=new Pc(h,l.property.specification);let _=null;_=l.value.kind==="constant"||l.value.kind==="source"?new Jl("source",g):new Ec("composite",g,l.value.zoomStops),this.paint._values[i]=new Za(l.property,_,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Ap.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const h=i.get("text-field"),g=my.paint.properties[l];let _=!1;const x=k=>{for(const E of k)if(g.overrides&&g.overrides.hasOverride(E))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Pr)x(h.value.value.sections);else if(h.value.kind==="source"){const k=D=>{_||(D instanceof Br&&mn(D.value)===Xs?x(D.value.sections):D instanceof Hl?x(D.sections):D.eachChild(k))},E=h.value;E._styleExpression&&k(E._styleExpression.expression)}return _}}let rw;var iE={get paint(){return rw=rw||new $r({"background-color":new Qt(Oe.paint_background["background-color"]),"background-pattern":new Nh(Oe.paint_background["background-pattern"]),"background-opacity":new Qt(Oe.paint_background["background-opacity"])})}};class rE extends pr{constructor(i){super(i,iE)}}let aw;var aE={get paint(){return aw=aw||new $r({"raster-opacity":new Qt(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qt(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qt(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qt(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Qt(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Qt(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Qt(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Qt(Oe.paint_raster["raster-fade-duration"])})}};class sE extends pr{constructor(i){super(i,aE)}}class oE extends pr{constructor(i){super(i,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class lE{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const uE={once:!0},py=63710088e-1;class ul{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ul(Ye(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,h=this.lat*l,g=i.lat*l,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((i.lng-this.lng)*l);return py*Math.acos(Math.min(_,1))}static convert(i){if(i instanceof ul)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new ul(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new ul(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const sw=2*Math.PI*py;function ow(u){return sw*Math.cos(u*Math.PI/180)}function lw(u){return(180+u)/360}function uw(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function cw(u,i){return u/ow(i)}function gy(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function dw(u,i){return u*ow(gy(i))}class cf{constructor(i,l,h=0){this.x=+i,this.y=+l,this.z=+h}static fromLngLat(i,l=0){const h=ul.convert(i);return new cf(lw(h.lng),uw(h.lat),cw(l,h.lat))}toLngLat(){return new ul(360*this.x-180,gy(this.y))}toAltitude(){return dw(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/sw*(i=gy(this.y),1/Math.cos(i*Math.PI/180));var i}}function hw(u,i,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[u*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class vy{constructor(i,l,h){if(!function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(i,l,h))throw new Error(`x=${l}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=h,this.key=Jc(0,i,i,l,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,h){const g=(x=this.y,k=this.z,E=hw(256*(_=this.x),256*(x=Math.pow(2,k)-x-1),k),D=hw(256*(_+1),256*(x+1),k),E[0]+","+E[1]+","+D[0]+","+D[1]);var _,x,k,E,D;const V=function(j,q,K){let J,ie="";for(let me=j;me>0;me--)J=1<<me-1,ie+=(q&J?1:0)+(K&J?2:0);return ie}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new R((i.x*l-this.x)*Ie,(i.y*l-this.y)*Ie)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fw{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Jc(i,l.z,l.z,l.x,l.y)}}class Ma{constructor(i,l,h,g,_){if(this.terrainRttPosMatrix32f=null,i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=l,this.canonical=new vy(h,+g,+_),this.key=Jc(l,i,h,g,_)}clone(){return new Ma(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new Ma(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ma(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-i;return i>this.canonical.z?Jc(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):Jc(this.wrap*+l,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Ma(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Ma(l,this.wrap,l,h,g),new Ma(l,this.wrap,l,h+1,g),new Ma(l,this.wrap,l,h,g+1),new Ma(l,this.wrap,l,h+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Ma(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Ma(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new cf(i.x-this.wrap,i.y))}}function Jc(u,i,l,h,g){(u*=2)<0&&(u=-1*u-1);const _=1<<l;return(_*_*u+_*g+h).toString(36)+l.toString(36)+i.toString(36)}Kt("CanonicalTileID",vy),Kt("OverscaledTileID",Ma,{omit:["terrainRttPosMatrix32f"]});class _u{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const l=new _u;return l.extend(i(new R(this.minX,this.minY))),l.extend(i(new R(this.maxX,this.minY))),l.extend(i(new R(this.minX,this.maxY))),l.extend(i(new R(this.maxX,this.maxY))),l}static fromPoints(i){const l=new _u;for(const h of i)l.extend(h);return l}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class mw{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const h=i[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class pw{constructor(i,l,h,g,_){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=h,i._y=g,this.properties=i.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class gw{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new il(Ie,16,0),this.grid3D=new il(Ie,16,0),this.featureIndexArray=new at,this.promoteId=l}insert(i,l,h,g,_,x){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const E=x?this.grid3D:this.grid;for(let D=0;D<l.length;D++){const V=l[D],j=[1/0,1/0,-1/0,-1/0];for(let q=0;q<V.length;q++){const K=V[q];j[0]=Math.min(j[0],K.x),j[1]=Math.min(j[1],K.y),j[2]=Math.max(j[2],K.x),j[3]=Math.max(j[3],K.y)}j[0]<Ie&&j[1]<Ie&&j[2]>=0&&j[3]>=0&&E.insert(k,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new af.VectorTile(new sy(this.rawTileData)).layers,this.sourceLayerCoder=new mw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,l,h,g){this.loadVTLayers();const _=i.params,x=Ie/i.tileSize/i.scale,k=Ts(_.filter),E=i.queryGeometry,D=i.queryPadding*x,V=_u.fromPoints(E),j=this.grid.query(V.minX-D,V.minY-D,V.maxX+D,V.maxY+D),q=_u.fromPoints(i.cameraQueryGeometry).expandBy(D),K=this.grid3D.query(q.minX,q.minY,q.maxX,q.maxY,(me,xe,Ne,Pe)=>function(Z,de,Ee,it,At){for(const yt of Z)if(de<=yt.x&&Ee<=yt.y&&it>=yt.x&&At>=yt.y)return!0;const dt=[new R(de,Ee),new R(de,At),new R(it,At),new R(it,Ee)];if(Z.length>2){for(const yt of dt)if(qc(Z,yt))return!0}for(let yt=0;yt<Z.length-1;yt++)if(YI(Z[yt],Z[yt+1],dt))return!0;return!1}(i.cameraQueryGeometry,me-D,xe-D,Ne+D,Pe+D));for(const me of K)j.push(me);j.sort(cE);const J={};let ie;for(let me=0;me<j.length;me++){const xe=j[me];if(xe===ie)continue;ie=xe;const Ne=this.featureIndexArray.get(xe);let Pe=null;this.loadMatchingFeature(J,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,k,_.layers,_.availableImages,l,h,g,(Z,de,Ee)=>(Pe||(Pe=pu(Z)),de.queryIntersectsFeature({queryGeometry:E,feature:Z,featureState:Ee,geometry:Pe,zoom:this.z,transform:i.transform,pixelsToTileUnits:x,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return J}loadMatchingFeature(i,l,h,g,_,x,k,E,D,V,j){const q=this.bucketLayerIDs[l];if(x&&!q.some(me=>x.has(me)))return;const K=this.sourceLayerCoder.decode(h),J=this.vtLayers[K].feature(g);if(_.needGeometry){const me=gu(J,!0);if(!_.filter(new mi(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!_.filter(new mi(this.tileID.overscaledZ),J))return;const ie=this.getId(J,K);for(let me=0;me<q.length;me++){const xe=q[me];if(x&&!x.has(xe))continue;const Ne=E[xe];if(!Ne)continue;let Pe={};ie&&V&&(Pe=V.getState(Ne.sourceLayer||"_geojsonTileLayer",ie));const Z=St({},D[xe]);Z.paint=vw(Z.paint,Ne.paint,J,Pe,k),Z.layout=vw(Z.layout,Ne.layout,J,Pe,k);const de=!j||j(J,Ne,Pe);if(!de)continue;const Ee=new pw(J,this.z,this.x,this.y,ie);Ee.layer=Z;let it=i[xe];it===void 0&&(it=i[xe]=[]),it.push({featureIndex:g,feature:Ee,intersectionZ:de})}}lookupSymbolFeatures(i,l,h,g,_,x,k,E){const D={};this.loadVTLayers();const V=Ts(_);for(const j of i)this.loadMatchingFeature(D,h,g,j,V,x,k,E,l);return D}hasLayer(i){for(const l of this.bucketLayerIDs)for(const h of l)if(i===h)return!0;return!1}getId(i,l){var h;let g=i.id;return this.promoteId&&(g=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((h=i.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(g=Number(i.properties.cluster_id))),g}}function vw(u,i,l,h,g){return ue(u,(_,x)=>{const k=i instanceof Nc?i.get(x):null;return k&&k.evaluate?k.evaluate(l,h,g):k})}function cE(u,i){return i-u}function yw(u,i,l,h,g){const _=[];for(let x=0;x<u.length;x++){const k=u[x];let E;for(let D=0;D<k.length-1;D++){let V=k[D],j=k[D+1];V.x<i&&j.x<i||(V.x<i?V=new R(i,V.y+(i-V.x)/(j.x-V.x)*(j.y-V.y))._round():j.x<i&&(j=new R(i,V.y+(i-V.x)/(j.x-V.x)*(j.y-V.y))._round()),V.y<l&&j.y<l||(V.y<l?V=new R(V.x+(l-V.y)/(j.y-V.y)*(j.x-V.x),l)._round():j.y<l&&(j=new R(V.x+(l-V.y)/(j.y-V.y)*(j.x-V.x),l)._round()),V.x>=h&&j.x>=h||(V.x>=h?V=new R(h,V.y+(h-V.x)/(j.x-V.x)*(j.y-V.y))._round():j.x>=h&&(j=new R(h,V.y+(h-V.x)/(j.x-V.x)*(j.y-V.y))._round()),V.y>=g&&j.y>=g||(V.y>=g?V=new R(V.x+(g-V.y)/(j.y-V.y)*(j.x-V.x),g)._round():j.y>=g&&(j=new R(V.x+(g-V.y)/(j.y-V.y)*(j.x-V.x),g)._round()),E&&V.equals(E[E.length-1])||(E=[V],_.push(E)),E.push(j)))))}}return _}Kt("FeatureIndex",gw,{omit:["rawTileData","sourceLayerCoder"]});class cl extends R{constructor(i,l,h,g){super(i,l),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new cl(this.x,this.y,this.angle,this.segment)}}function _w(u,i,l,h,g){if(i.segment===void 0||l===0)return!0;let _=i,x=i.segment+1,k=0;for(;k>-l/2;){if(x--,x<0)return!1;k-=u[x].dist(_),_=u[x]}k+=u[x].dist(u[x+1]),x++;const E=[];let D=0;for(;k<l/2;){const V=u[x],j=u[x+1];if(!j)return!1;let q=u[x-1].angleTo(V)-V.angleTo(j);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:k,angleDelta:q}),D+=q;k-E[0].distance>h;)D-=E.shift().angleDelta;if(D>g)return!1;x++,k+=V.dist(j)}return!0}function bw(u){let i=0;for(let l=0;l<u.length-1;l++)i+=u[l].dist(u[l+1]);return i}function xw(u,i,l){return u?.6*i*l:0}function ww(u,i){return Math.max(u?u.right-u.left:0,i?i.right-i.left:0)}function dE(u,i,l,h,g,_){const x=xw(l,g,_),k=ww(l,h)*_;let E=0;const D=bw(u)/2;for(let V=0;V<u.length-1;V++){const j=u[V],q=u[V+1],K=j.dist(q);if(E+K>D){const J=(D-E)/K,ie=la.number(j.x,q.x,J),me=la.number(j.y,q.y,J),xe=new cl(ie,me,q.angleTo(j),V);return xe._round(),!x||_w(u,xe,k,x,i)?xe:void 0}E+=K}}function hE(u,i,l,h,g,_,x,k,E){const D=xw(h,_,x),V=ww(h,g),j=V*x,q=u[0].x===0||u[0].x===E||u[0].y===0||u[0].y===E;return i-j<i/4&&(i=j+i/4),Sw(u,q?i/2*k%i:(V/2+2*_)*x*k%i,i,D,l,j,q,!1,E)}function Sw(u,i,l,h,g,_,x,k,E){const D=_/2,V=bw(u);let j=0,q=i-l,K=[];for(let J=0;J<u.length-1;J++){const ie=u[J],me=u[J+1],xe=ie.dist(me),Ne=me.angleTo(ie);for(;q+l<j+xe;){q+=l;const Pe=(q-j)/xe,Z=la.number(ie.x,me.x,Pe),de=la.number(ie.y,me.y,Pe);if(Z>=0&&Z<E&&de>=0&&de<E&&q-D>=0&&q+D<=V){const Ee=new cl(Z,de,Ne,J);Ee._round(),h&&!_w(u,Ee,_,h,g)||K.push(Ee)}}j+=xe}return k||K.length||x||(K=Sw(u,j/2,l,h,g,_,x,!0,E)),K}function Cw(u,i,l,h){const g=[],_=u.image,x=_.pixelRatio,k=_.paddedRect.w-2,E=_.paddedRect.h-2;let D={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const V=_.stretchX||[[0,k]],j=_.stretchY||[[0,E]],q=(wt,Jt)=>wt+Jt[1]-Jt[0],K=V.reduce(q,0),J=j.reduce(q,0),ie=k-K,me=E-J;let xe=0,Ne=K,Pe=0,Z=J,de=0,Ee=ie,it=0,At=me;if(_.content&&h){const wt=_.content,Jt=wt[2]-wt[0],un=wt[3]-wt[1];(_.textFitWidth||_.textFitHeight)&&(D=Jx(u)),xe=Ep(V,0,wt[0]),Pe=Ep(j,0,wt[1]),Ne=Ep(V,wt[0],wt[2]),Z=Ep(j,wt[1],wt[3]),de=wt[0]-xe,it=wt[1]-Pe,Ee=Jt-Ne,At=un-Z}const dt=D.x1,yt=D.y1,zt=D.x2-dt,Mt=D.y2-yt,Vt=(wt,Jt,un,ln)=>{const rn=Mp(wt.stretch-xe,Ne,zt,dt),Fn=Dp(wt.fixed-de,Ee,wt.stretch,K),Ei=Mp(Jt.stretch-Pe,Z,Mt,yt),Ji=Dp(Jt.fixed-it,At,Jt.stretch,J),Er=Mp(un.stretch-xe,Ne,zt,dt),Da=Dp(un.fixed-de,Ee,un.stretch,K),ca=Mp(ln.stretch-Pe,Z,Mt,yt),_r=Dp(ln.fixed-it,At,ln.stretch,J),Ci=new R(rn,Ei),lr=new R(Er,Ei),br=new R(Er,ca),xr=new R(rn,ca),Xr=new R(Fn/x,Ji/x),Ra=new R(Da/x,_r/x),ur=i*Math.PI/180;if(ur){const cr=Math.sin(ur),dr=Math.cos(ur),qi=[dr,-cr,cr,dr];Ci._matMult(qi),lr._matMult(qi),xr._matMult(qi),br._matMult(qi)}const da=wt.stretch+wt.fixed,Qi=Jt.stretch+Jt.fixed;return{tl:Ci,tr:lr,bl:xr,br,tex:{x:_.paddedRect.x+1+da,y:_.paddedRect.y+1+Qi,w:un.stretch+un.fixed-da,h:ln.stretch+ln.fixed-Qi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xr,pixelOffsetBR:Ra,minFontScaleX:Ee/x/zt,minFontScaleY:At/x/Mt,isSDF:l}};if(h&&(_.stretchX||_.stretchY)){const wt=kw(V,ie,K),Jt=kw(j,me,J);for(let un=0;un<wt.length-1;un++){const ln=wt[un],rn=wt[un+1];for(let Fn=0;Fn<Jt.length-1;Fn++)g.push(Vt(ln,Jt[Fn],rn,Jt[Fn+1]))}}else g.push(Vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:E+1}));return g}function Ep(u,i,l){let h=0;for(const g of u)h+=Math.max(i,Math.min(l,g[1]))-Math.max(i,Math.min(l,g[0]));return h}function kw(u,i,l){const h=[{fixed:-1,stretch:0}];for(const[g,_]of u){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:i+1,stretch:l}),h}function Mp(u,i,l,h){return u/i*l+h}function Dp(u,i,l,h){return u-i*l/h}Kt("Anchor",cl);class Rp{constructor(i,l,h,g,_,x,k,E,D,V){var j;if(this.boxStartIndex=i.length,D){let q=x.top,K=x.bottom;const J=x.collisionPadding;J&&(q-=J[1],K+=J[3]);let ie=K-q;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{const q=!((j=x.image)===null||j===void 0)&&j.content&&(x.image.textFitWidth||x.image.textFitHeight)?Jx(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};q.y1=q.y1*k-E[0],q.y2=q.y2*k+E[2],q.x1=q.x1*k-E[3],q.x2=q.x2*k+E[1];const K=x.collisionPadding;if(K&&(q.x1-=K[0]*k,q.y1-=K[1]*k,q.x2+=K[2]*k,q.y2+=K[3]*k),V){const J=new R(q.x1,q.y1),ie=new R(q.x2,q.y1),me=new R(q.x1,q.y2),xe=new R(q.x2,q.y2),Ne=V*Math.PI/180;J._rotate(Ne),ie._rotate(Ne),me._rotate(Ne),xe._rotate(Ne),q.x1=Math.min(J.x,ie.x,me.x,xe.x),q.x2=Math.max(J.x,ie.x,me.x,xe.x),q.y1=Math.min(J.y,ie.y,me.y,xe.y),q.y2=Math.max(J.y,ie.y,me.y,xe.y)}i.emplaceBack(l.x,l.y,q.x1,q.y1,q.x2,q.y2,h,g,_)}this.boxEndIndex=i.length}}class fE{constructor(i=[],l=(h,g)=>h<g?-1:h>g?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:h}=this,g=l[i];for(;i>0;){const _=i-1>>1,x=l[_];if(h(g,x)>=0)break;l[i]=x,i=_}l[i]=g}_down(i){const{data:l,compare:h}=this,g=this.length>>1,_=l[i];for(;i<g;){let x=1+(i<<1);const k=x+1;if(k<this.length&&h(l[k],l[x])<0&&(x=k),h(l[x],_)>=0)break;l[i]=l[x],i=x}l[i]=_}}function mE(u,i=1,l=!1){const h=_u.fromPoints(u[0]),g=Math.min(h.width(),h.height());let _=g/2;const x=new fE([],pE),{minX:k,minY:E,maxX:D,maxY:V}=h;if(g===0)return new R(k,E);for(let K=k;K<D;K+=g)for(let J=E;J<V;J+=g)x.push(new Qc(K+_,J+_,_,u));let j=function(K){let J=0,ie=0,me=0;const xe=K[0];for(let Ne=0,Pe=xe.length,Z=Pe-1;Ne<Pe;Z=Ne++){const de=xe[Ne],Ee=xe[Z],it=de.x*Ee.y-Ee.x*de.y;ie+=(de.x+Ee.x)*it,me+=(de.y+Ee.y)*it,J+=3*it}return new Qc(ie/J,me/J,0,K)}(u),q=x.length;for(;x.length;){const K=x.pop();(K.d>j.d||!j.d)&&(j=K,l&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,q)),K.max-j.d<=i||(_=K.h/2,x.push(new Qc(K.p.x-_,K.p.y-_,_,u)),x.push(new Qc(K.p.x+_,K.p.y-_,_,u)),x.push(new Qc(K.p.x-_,K.p.y+_,_,u)),x.push(new Qc(K.p.x+_,K.p.y+_,_,u)),q+=4)}return l&&(console.log(`num probes: ${q}`),console.log(`best distance: ${j.d}`)),j.p}function pE(u,i){return i.max-u.max}function Qc(u,i,l,h){this.p=new R(u,i),this.h=l,this.d=function(g,_){let x=!1,k=1/0;for(let E=0;E<_.length;E++){const D=_[E];for(let V=0,j=D.length,q=j-1;V<j;q=V++){const K=D[V],J=D[q];K.y>g.y!=J.y>g.y&&g.x<(J.x-K.x)*(g.y-K.y)/(J.y-K.y)+K.x&&(x=!x),k=Math.min(k,rx(g,K,J))}}return(x?1:-1)*Math.sqrt(k)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Ar;d.aD=void 0,(Ar=d.aD||(d.aD={}))[Ar.center=1]="center",Ar[Ar.left=2]="left",Ar[Ar.right=3]="right",Ar[Ar.top=4]="top",Ar[Ar.bottom=5]="bottom",Ar[Ar["top-left"]=6]="top-left",Ar[Ar["top-right"]=7]="top-right",Ar[Ar["bottom-left"]=8]="bottom-left",Ar[Ar["bottom-right"]=9]="bottom-right";const yy=Number.POSITIVE_INFINITY;function Tw(u,i){return i[1]!==yy?function(l,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),l){case"top-right":case"top-left":case"top":x=g-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-g}switch(l){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(u,i[0],i[1]):function(l,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(l){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-h;break;case"top":_=h-7}switch(l){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(u,i[0])}function Pw(u,i,l){var h;const g=u.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},l);if(_){const k=_.values,E=[];for(let D=0;D<k.length;D+=2){const V=E[D]=k[D],j=k[D+1].map(q=>q*or);V.startsWith("top")?j[1]-=7:V.startsWith("bottom")&&(j[1]+=7),E[D+1]=j}return new jn(E)}const x=g.get("text-variable-anchor");if(x){let k;k=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(i,{},l)*or,yy]:g.get("text-offset").evaluate(i,{},l).map(D=>D*or);const E=[];for(const D of x)E.push(D,Tw(D,k));return new jn(E)}return null}function _y(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function gE(u,i,l,h,g,_,x,k,E,D,V,j){let q=_.textMaxSize.evaluate(i,{});q===void 0&&(q=x);const K=u.layers[0].layout,J=K.get("icon-offset").evaluate(i,{},V),ie=Aw(l.horizontal),me=x/24,xe=u.tilePixelRatio*me,Ne=u.tilePixelRatio*q/24,Pe=u.tilePixelRatio*k,Z=u.tilePixelRatio*K.get("symbol-spacing"),de=K.get("text-padding")*u.tilePixelRatio,Ee=function(un,ln,rn,Fn=1){const Ei=un.get("icon-padding").evaluate(ln,{},rn),Ji=Ei&&Ei.values;return[Ji[0]*Fn,Ji[1]*Fn,Ji[2]*Fn,Ji[3]*Fn]}(K,i,V,u.tilePixelRatio),it=K.get("text-max-angle")/180*Math.PI,At=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",dt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",yt=K.get("symbol-placement"),zt=Z/2,Mt=K.get("icon-text-fit");let Vt;h&&Mt!=="none"&&(u.allowVerticalPlacement&&l.vertical&&(Vt=Qx(h,l.vertical,Mt,K.get("icon-text-fit-padding"),J,me)),ie&&(h=Qx(h,ie,Mt,K.get("icon-text-fit-padding"),J,me)));const wt=V?j.line.getGranularityForZoomLevel(V.z):1,Jt=(un,ln)=>{ln.x<0||ln.x>=Ie||ln.y<0||ln.y>=Ie||function(rn,Fn,Ei,Ji,Er,Da,ca,_r,Ci,lr,br,xr,Xr,Ra,ur,da,Qi,cr,dr,qi,fi,us,ed,cs,_E){const td=rn.addToLineVertexArray(Fn,Ei);let bu,nd,id,rd,Rw=0,Lw=0,zw=0,Vw=0,Py=-1,Iy=-1;const ho={};let Bw=Yr("");if(rn.allowVerticalPlacement&&Ji.vertical){const Nr=_r.layout.get("text-rotate").evaluate(fi,{},cs)+90;id=new Rp(Ci,Fn,lr,br,xr,Ji.vertical,Xr,Ra,ur,Nr),ca&&(rd=new Rp(Ci,Fn,lr,br,xr,ca,Qi,cr,ur,Nr))}if(Er){const Nr=_r.layout.get("icon-rotate").evaluate(fi,{}),La=_r.layout.get("icon-text-fit")!=="none",xu=Cw(Er,Nr,ed,La),hs=ca?Cw(ca,Nr,ed,La):void 0;nd=new Rp(Ci,Fn,lr,br,xr,Er,Qi,cr,!1,Nr),Rw=4*xu.length;const wu=rn.iconSizeData;let Vs=null;wu.kind==="source"?(Vs=[co*_r.layout.get("icon-size").evaluate(fi,{})],Vs[0]>ll&&Je(`${rn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):wu.kind==="composite"&&(Vs=[co*us.compositeIconSizes[0].evaluate(fi,{},cs),co*us.compositeIconSizes[1].evaluate(fi,{},cs)],(Vs[0]>ll||Vs[1]>ll)&&Je(`${rn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),rn.addSymbols(rn.icon,xu,Vs,qi,dr,fi,d.an.none,Fn,td.lineStartIndex,td.lineLength,-1,cs),Py=rn.icon.placedSymbolArray.length-1,hs&&(Lw=4*hs.length,rn.addSymbols(rn.icon,hs,Vs,qi,dr,fi,d.an.vertical,Fn,td.lineStartIndex,td.lineLength,-1,cs),Iy=rn.icon.placedSymbolArray.length-1)}const Ow=Object.keys(Ji.horizontal);for(const Nr of Ow){const La=Ji.horizontal[Nr];if(!bu){Bw=Yr(La.text);const hs=_r.layout.get("text-rotate").evaluate(fi,{},cs);bu=new Rp(Ci,Fn,lr,br,xr,La,Xr,Ra,ur,hs)}const xu=La.positionedLines.length===1;if(zw+=Iw(rn,Fn,La,Da,_r,ur,fi,da,td,Ji.vertical?d.an.horizontal:d.an.horizontalOnly,xu?Ow:[Nr],ho,Py,us,cs),xu)break}Ji.vertical&&(Vw+=Iw(rn,Fn,Ji.vertical,Da,_r,ur,fi,da,td,d.an.vertical,["vertical"],ho,Iy,us,cs));const bE=bu?bu.boxStartIndex:rn.collisionBoxArray.length,xE=bu?bu.boxEndIndex:rn.collisionBoxArray.length,wE=id?id.boxStartIndex:rn.collisionBoxArray.length,SE=id?id.boxEndIndex:rn.collisionBoxArray.length,CE=nd?nd.boxStartIndex:rn.collisionBoxArray.length,kE=nd?nd.boxEndIndex:rn.collisionBoxArray.length,TE=rd?rd.boxStartIndex:rn.collisionBoxArray.length,PE=rd?rd.boxEndIndex:rn.collisionBoxArray.length;let ds=-1;const zp=(Nr,La)=>Nr&&Nr.circleDiameter?Math.max(Nr.circleDiameter,La):La;ds=zp(bu,ds),ds=zp(id,ds),ds=zp(nd,ds),ds=zp(rd,ds);const Fw=ds>-1?1:0;Fw&&(ds*=_E/or),rn.glyphOffsetArray.length>=Xc.MAX_GLYPHS&&Je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),fi.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,fi.sortKey);const IE=Pw(_r,fi,cs),[AE,EE]=function(Nr,La){const xu=Nr.length,hs=La==null?void 0:La.values;if((hs==null?void 0:hs.length)>0)for(let wu=0;wu<hs.length;wu+=2){const Vs=hs[wu+1];Nr.emplaceBack(d.aD[hs[wu]],Vs[0],Vs[1])}return[xu,Nr.length]}(rn.textAnchorOffsets,IE);rn.symbolInstances.emplaceBack(Fn.x,Fn.y,ho.right>=0?ho.right:-1,ho.center>=0?ho.center:-1,ho.left>=0?ho.left:-1,ho.vertical||-1,Py,Iy,Bw,bE,xE,wE,SE,CE,kE,TE,PE,lr,zw,Vw,Rw,Lw,Fw,0,Xr,ds,AE,EE)}(u,ln,un,l,h,g,Vt,u.layers[0],u.collisionBoxArray,i.index,i.sourceLayerIndex,u.index,xe,[de,de,de,de],At,E,Pe,Ee,dt,J,i,_,D,V,x)};if(yt==="line")for(const un of yw(i.geometry,0,0,Ie,Ie)){const ln=yu(un,wt),rn=hE(ln,Z,it,l.vertical||ie,h,24,Ne,u.overscaling,Ie);for(const Fn of rn)ie&&vE(u,ie.text,zt,Fn)||Jt(ln,Fn)}else if(yt==="line-center"){for(const un of i.geometry)if(un.length>1){const ln=yu(un,wt),rn=dE(ln,it,l.vertical||ie,h,24,Ne);rn&&Jt(ln,rn)}}else if(i.type==="Polygon")for(const un of bc(i.geometry,0)){const ln=mE(un,16);Jt(yu(un[0],wt,!0),new cl(ln.x,ln.y,0))}else if(i.type==="LineString")for(const un of i.geometry){const ln=yu(un,wt);Jt(ln,new cl(ln[0].x,ln[0].y,0))}else if(i.type==="Point")for(const un of i.geometry)for(const ln of un)Jt([ln],new cl(ln.x,ln.y,0))}function Iw(u,i,l,h,g,_,x,k,E,D,V,j,q,K,J){const ie=function(Ne,Pe,Z,de,Ee,it,At,dt){const yt=de.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,zt=[];for(const Mt of Pe.positionedLines)for(const Vt of Mt.positionedGlyphs){if(!Vt.rect)continue;const wt=Vt.rect||{};let Jt=4,un=!0,ln=1,rn=0;const Fn=(Ee||dt)&&Vt.vertical,Ei=Vt.metrics.advance*Vt.scale/2;if(dt&&Pe.verticalizable&&(rn=Mt.lineOffset/2-(Vt.imageName?-(or-Vt.metrics.width*Vt.scale)/2:(Vt.scale-1)*or)),Vt.imageName){const cr=At[Vt.imageName];un=cr.sdf,ln=cr.pixelRatio,Jt=1/ln}const Ji=Ee?[Vt.x+Ei,Vt.y]:[0,0];let Er=Ee?[0,0]:[Vt.x+Ei+Z[0],Vt.y+Z[1]-rn],Da=[0,0];Fn&&(Da=Er,Er=[0,0]);const ca=Vt.metrics.isDoubleResolution?2:1,_r=(Vt.metrics.left-Jt)*Vt.scale-Ei+Er[0],Ci=(-Vt.metrics.top-Jt)*Vt.scale+Er[1],lr=_r+wt.w/ca*Vt.scale/ln,br=Ci+wt.h/ca*Vt.scale/ln,xr=new R(_r,Ci),Xr=new R(lr,Ci),Ra=new R(_r,br),ur=new R(lr,br);if(Fn){const cr=new R(-Ei,Ei- -17),dr=-Math.PI/2,qi=12-Ei,fi=new R(22-qi,-(Vt.imageName?qi:0)),us=new R(...Da);xr._rotateAround(dr,cr)._add(fi)._add(us),Xr._rotateAround(dr,cr)._add(fi)._add(us),Ra._rotateAround(dr,cr)._add(fi)._add(us),ur._rotateAround(dr,cr)._add(fi)._add(us)}if(yt){const cr=Math.sin(yt),dr=Math.cos(yt),qi=[dr,-cr,cr,dr];xr._matMult(qi),Xr._matMult(qi),Ra._matMult(qi),ur._matMult(qi)}const da=new R(0,0),Qi=new R(0,0);zt.push({tl:xr,tr:Xr,bl:Ra,br:ur,tex:wt,writingMode:Pe.writingMode,glyphOffset:Ji,sectionIndex:Vt.sectionIndex,isSDF:un,pixelOffsetTL:da,pixelOffsetBR:Qi,minFontScaleX:0,minFontScaleY:0})}return zt}(0,l,k,g,_,x,h,u.allowVerticalPlacement),me=u.textSizeData;let xe=null;me.kind==="source"?(xe=[co*g.layout.get("text-size").evaluate(x,{})],xe[0]>ll&&Je(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):me.kind==="composite"&&(xe=[co*K.compositeTextSizes[0].evaluate(x,{},J),co*K.compositeTextSizes[1].evaluate(x,{},J)],(xe[0]>ll||xe[1]>ll)&&Je(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,ie,xe,k,_,x,D,i,E.lineStartIndex,E.lineLength,q,J);for(const Ne of V)j[Ne]=u.text.placedSymbolArray.length-1;return 4*ie.length}function Aw(u){for(const i in u)return u[i];return null}function vE(u,i,l,h){const g=u.compareText;if(i in g){const _=g[i];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<l)return!0}else g[i]=[];return g[i].push(h),!1}const Ew=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class by{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=Ew[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[k]=new Uint32Array(i,4,1);return new by(k,x,_,i)}constructor(i,l=64,h=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const _=Ew.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,k=i*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-k%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+k+E,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+k+E),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+k+E,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=l,h}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return xy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:k}=this,E=[0,_.length-1,0],D=[];for(;E.length;){const V=E.pop()||0,j=E.pop()||0,q=E.pop()||0;if(j-q<=k){for(let me=q;me<=j;me++){const xe=x[2*me],Ne=x[2*me+1];xe>=i&&xe<=h&&Ne>=l&&Ne<=g&&D.push(_[me])}continue}const K=q+j>>1,J=x[2*K],ie=x[2*K+1];J>=i&&J<=h&&ie>=l&&ie<=g&&D.push(_[K]),(V===0?i<=J:l<=ie)&&(E.push(q),E.push(K-1),E.push(1-V)),(V===0?h>=J:g>=ie)&&(E.push(K+1),E.push(j),E.push(1-V))}return D}within(i,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,k=[0,g.length-1,0],E=[],D=h*h;for(;k.length;){const V=k.pop()||0,j=k.pop()||0,q=k.pop()||0;if(j-q<=x){for(let me=q;me<=j;me++)Dw(_[2*me],_[2*me+1],i,l)<=D&&E.push(g[me]);continue}const K=q+j>>1,J=_[2*K],ie=_[2*K+1];Dw(J,ie,i,l)<=D&&E.push(g[K]),(V===0?i-h<=J:l-h<=ie)&&(k.push(q),k.push(K-1),k.push(1-V)),(V===0?i+h>=J:l+h>=ie)&&(k.push(K+1),k.push(j),k.push(1-V))}return E}}function xy(u,i,l,h,g,_){if(g-h<=l)return;const x=h+g>>1;Mw(u,i,x,h,g,_),xy(u,i,l,h,x-1,1-_),xy(u,i,l,x+1,g,1-_)}function Mw(u,i,l,h,g,_){for(;g>h;){if(g-h>600){const D=g-h+1,V=l-h+1,j=Math.log(D),q=.5*Math.exp(2*j/3),K=.5*Math.sqrt(j*q*(D-q)/D)*(V-D/2<0?-1:1);Mw(u,i,l,Math.max(h,Math.floor(l-V*q/D+K)),Math.min(g,Math.floor(l+(D-V)*q/D+K)),_)}const x=i[2*l+_];let k=h,E=g;for(df(u,i,h,l),i[2*g+_]>x&&df(u,i,h,g);k<E;){for(df(u,i,k,E),k++,E--;i[2*k+_]<x;)k++;for(;i[2*E+_]>x;)E--}i[2*h+_]===x?df(u,i,h,E):(E++,df(u,i,E,g)),E<=l&&(h=E+1),l<=E&&(g=E-1)}}function df(u,i,l,h){wy(u,l,h),wy(i,2*l,2*h),wy(i,2*l+1,2*h+1)}function wy(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}function Dw(u,i,l,h){const g=u-l,_=i-h;return g*g+_*_}var Sy;d.cw=void 0,(Sy=d.cw||(d.cw={})).create="create",Sy.load="load",Sy.fullLoad="fullLoad";let Lp=null,hf=[];const Cy=1e3/60,ky="loadTime",Ty="fullLoadTime",yE={mark(u){performance.mark(u)},frame(u){const i=u;Lp!=null&&hf.push(i-Lp),Lp=i},clearMetrics(){Lp=null,hf=[],performance.clearMeasures(ky),performance.clearMeasures(Ty);for(const u in d.cw)performance.clearMarks(d.cw[u])},getPerformanceMetrics(){performance.measure(ky,d.cw.create,d.cw.load),performance.measure(Ty,d.cw.create,d.cw.fullLoad);const u=performance.getEntriesByName(ky)[0].duration,i=performance.getEntriesByName(Ty)[0].duration,l=hf.length,h=1/(hf.reduce((_,x)=>_+x,0)/l/1e3),g=hf.filter(_=>_>Cy).reduce((_,x)=>_+(x-Cy)/Cy,0);return{loadTime:u,fullLoadTime:i,fps:h,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};d.$=Ie,d.A=Q,d.B=function([u,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:u*Math.cos(i)*Math.sin(l),y:u*Math.sin(i)*Math.sin(l),z:u*Math.cos(l)}},d.C=la,d.D=Qt,d.E=Ct,d.F=mi,d.G=Oc,d.H=function(u){if(Lt==null){const i=u.navigator?u.navigator.userAgent:null;Lt=!!u.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Lt},d.I=oy,d.J=class{constructor(u,i){this.target=u,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new lE(()=>this.process()),this.subscription=vn(this.target,"message",l=>this.receive(l),!1),this.globalScope=ct(self)?u:window}registerMessageHandler(u,i){this.messageHandlers[u]=i}sendAsync(u,i){return new Promise((l,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=i?vn(i.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[g];const E={id:g,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},uE):null;this.resolveRejects[g]={resolve:E=>{_==null||_.unsubscribe(),l(E)},reject:E=>{_==null||_.unsubscribe(),h(E)}};const x=[],k=Object.assign(Object.assign({},u),{id:g,sourceMapId:this.mapId,origin:location.origin,data:su(u.data,x)});this.target.postMessage(k,{transfer:x})})}receive(u){const i=u.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(ct(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),i=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(u,i)}processTask(u,i){return a(this,void 0,void 0,function*(){if(i.type==="<response>"){const g=this.resolveRejects[u];return delete this.resolveRejects[u],g?void(i.error?g.reject(rl(i.error)):g.resolve(rl(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=rl(i.data),h=new AbortController;this.abortControllers[u]=h;try{const g=yield this.messageHandlers[i.type](i.sourceMapId,l,h);this.completeTask(u,null,g)}catch(g){this.completeTask(u,g)}})}completeTask(u,i,l){const h=[];delete this.abortControllers[u];const g={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?su(i):null,data:su(l,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.K=fe,d.L=function(){var u=new Q(16);return Q!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},d.M=function(u,i,l){var h,g,_,x,k,E,D,V,j,q,K,J,ie=l[0],me=l[1],xe=l[2];return i===u?(u[12]=i[0]*ie+i[4]*me+i[8]*xe+i[12],u[13]=i[1]*ie+i[5]*me+i[9]*xe+i[13],u[14]=i[2]*ie+i[6]*me+i[10]*xe+i[14],u[15]=i[3]*ie+i[7]*me+i[11]*xe+i[15]):(g=i[1],_=i[2],x=i[3],k=i[4],E=i[5],D=i[6],V=i[7],j=i[8],q=i[9],K=i[10],J=i[11],u[0]=h=i[0],u[1]=g,u[2]=_,u[3]=x,u[4]=k,u[5]=E,u[6]=D,u[7]=V,u[8]=j,u[9]=q,u[10]=K,u[11]=J,u[12]=h*ie+k*me+j*xe+i[12],u[13]=g*ie+E*me+q*xe+i[13],u[14]=_*ie+D*me+K*xe+i[14],u[15]=x*ie+V*me+J*xe+i[15]),u},d.N=function(u,i,l){var h=l[0],g=l[1],_=l[2];return u[0]=i[0]*h,u[1]=i[1]*h,u[2]=i[2]*h,u[3]=i[3]*h,u[4]=i[4]*g,u[5]=i[5]*g,u[6]=i[6]*g,u[7]=i[7]*g,u[8]=i[8]*_,u[9]=i[9]*_,u[10]=i[10]*_,u[11]=i[11]*_,u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},d.O=function(u,i,l){var h=i[0],g=i[1],_=i[2],x=i[3],k=i[4],E=i[5],D=i[6],V=i[7],j=i[8],q=i[9],K=i[10],J=i[11],ie=i[12],me=i[13],xe=i[14],Ne=i[15],Pe=l[0],Z=l[1],de=l[2],Ee=l[3];return u[0]=Pe*h+Z*k+de*j+Ee*ie,u[1]=Pe*g+Z*E+de*q+Ee*me,u[2]=Pe*_+Z*D+de*K+Ee*xe,u[3]=Pe*x+Z*V+de*J+Ee*Ne,u[4]=(Pe=l[4])*h+(Z=l[5])*k+(de=l[6])*j+(Ee=l[7])*ie,u[5]=Pe*g+Z*E+de*q+Ee*me,u[6]=Pe*_+Z*D+de*K+Ee*xe,u[7]=Pe*x+Z*V+de*J+Ee*Ne,u[8]=(Pe=l[8])*h+(Z=l[9])*k+(de=l[10])*j+(Ee=l[11])*ie,u[9]=Pe*g+Z*E+de*q+Ee*me,u[10]=Pe*_+Z*D+de*K+Ee*xe,u[11]=Pe*x+Z*V+de*J+Ee*Ne,u[12]=(Pe=l[12])*h+(Z=l[13])*k+(de=l[14])*j+(Ee=l[15])*ie,u[13]=Pe*g+Z*E+de*q+Ee*me,u[14]=Pe*_+Z*D+de*K+Ee*xe,u[15]=Pe*x+Z*V+de*J+Ee*Ne,u},d.P=R,d.Q=function(u,i){const l={};for(let h=0;h<i.length;h++){const g=i[h];g in u&&(l[g]=u[g])}return l},d.R=ua,d.S=ul,d.T=qv,d.U=uw,d.V=lw,d.W=H,d.X=Y,d.Y=Ht,d.Z=Ma,d._=a,d.a=se,d.a$=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u[3]=i[3]*l,u},d.a0=cf,d.a1=_u,d.a2=25,d.a3=vy,d.a4=u=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(l=>{i.onloadstart=()=>{l(i)};for(const h of u){const g=window.document.createElement("source");rt(h)||(i.crossOrigin="Anonymous"),g.src=h,i.appendChild(g)}})},d.a5=Ft,d.a6=function(){return re++},d.a7=ve,d.a8=Xc,d.a9=Ts,d.aA=or,d.aB=Qe,d.aC=function(u,i,l,h,g=!1){if(!l[0]&&!l[1])return[0,0];const _=g?h==="map"?-u.bearingInRadians:0:h==="viewport"?u.bearingInRadians:0;if(_){const x=Math.sin(_),k=Math.cos(_);l=[l[0]*k-l[1]*x,l[0]*x+l[1]*k]}return[g?l[0]:Qe(i,l[0],u.zoom),g?l[1]:Qe(i,l[1],u.zoom)]},d.aE=cy,d.aF=_y,d.aG=uy,d.aH=by,d.aI=Ai,d.aJ=Sp,d.aK=tt,d.aL=Nn,d.aM=ai,d.aN=Ye,d.aO=Rn,d.aP=dw,d.aQ=be,d.aR=ae,d.aS=function(u){var i=new Q(3);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i},d.aT=function(u,i,l){return u[0]=i[0]-l[0],u[1]=i[1]-l[1],u[2]=i[2]-l[2],u},d.aU=function(u,i){var l=i[0],h=i[1],g=i[2],_=l*l+h*h+g*g;return _>0&&(_=1/Math.sqrt(_)),u[0]=i[0]*_,u[1]=i[1]*_,u[2]=i[2]*_,u},d.aV=je,d.aW=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]},d.aX=function(u,i,l){return u[0]=i[0]*l[0],u[1]=i[1]*l[1],u[2]=i[2]*l[2],u[3]=i[3]*l[3],u},d.aY=pe,d.aZ=function(u,i,l){const h=i[0]*l[0]+i[1]*l[1]+i[2]*l[2];return h===0?null:(-(u[0]*l[0]+u[1]*l[1]+u[2]*l[2])-l[3])/h},d.a_=Fe,d.aa=gu,d.ab=pw,d.ac=function(u){const i={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,g,_)=>{const x=g||_;return i[h]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},d.ad=En,d.ae=function(u){return Math.pow(2,u)},d.af=oe,d.ag=st,d.ah=85.051129,d.ai=cw,d.aj=function(u){return Math.log(u)/Math.LN2},d.ak=function(u){var i=u[0],l=u[1];return i*i+l*l},d.al=function(u,i){const l=[];for(const h in u)h in i||l.push(h);return l},d.am=function(u,i){let l=0,h=0;if(u.kind==="constant")h=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=u,k=g?st(Or.interpolationFactor(g,i,_,x),0,1):0;u.kind==="camera"?h=la.number(u.minSize,u.maxSize,k):l=k}return{uSizeT:l,uSize:h}},d.ao=function(u,{uSize:i,uSizeT:l},{lowerSize:h,upperSize:g}){return u.kind==="source"?h/co:u.kind==="composite"?la.number(h/co,g/co,l):i},d.ap=function(u,i){var l=i[0],h=i[1],g=i[2],_=i[3],x=i[4],k=i[5],E=i[6],D=i[7],V=i[8],j=i[9],q=i[10],K=i[11],J=i[12],ie=i[13],me=i[14],xe=i[15],Ne=l*k-h*x,Pe=l*E-g*x,Z=l*D-_*x,de=h*E-g*k,Ee=h*D-_*k,it=g*D-_*E,At=V*ie-j*J,dt=V*me-q*J,yt=V*xe-K*J,zt=j*me-q*ie,Mt=j*xe-K*ie,Vt=q*xe-K*me,wt=Ne*Vt-Pe*Mt+Z*zt+de*yt-Ee*dt+it*At;return wt?(u[0]=(k*Vt-E*Mt+D*zt)*(wt=1/wt),u[1]=(g*Mt-h*Vt-_*zt)*wt,u[2]=(ie*it-me*Ee+xe*de)*wt,u[3]=(q*Ee-j*it-K*de)*wt,u[4]=(E*yt-x*Vt-D*dt)*wt,u[5]=(l*Vt-g*yt+_*dt)*wt,u[6]=(me*Z-J*it-xe*Pe)*wt,u[7]=(V*it-q*Z+K*Pe)*wt,u[8]=(x*Mt-k*yt+D*At)*wt,u[9]=(h*yt-l*Mt-_*At)*wt,u[10]=(J*Ee-ie*Z+xe*Ne)*wt,u[11]=(j*Z-V*Ee-K*Ne)*wt,u[12]=(k*dt-x*zt-E*At)*wt,u[13]=(l*zt-h*dt+g*At)*wt,u[14]=(ie*Pe-J*de-me*Ne)*wt,u[15]=(V*de-j*Pe+q*Ne)*wt,u):null},d.aq=ze,d.ar=function(u){return Math.hypot(u[0],u[1])},d.as=function(u){return u[0]=0,u[1]=0,u},d.at=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u},d.au=dy,d.av=Ke,d.aw=function(u,i,l,h){const g=i.y-u.y,_=i.x-u.x,x=h.y-l.y,k=h.x-l.x,E=x*_-k*g;if(E===0)return null;const D=(k*(u.y-l.y)-x*(u.x-l.x))/E;return new R(u.x+D*_,u.y+D*g)},d.ax=yw,d.ay=nx,d.az=function(u){let i=1/0,l=1/0,h=-1/0,g=-1/0;for(const _ of u)i=Math.min(i,_.x),l=Math.min(l,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return[i,l,h,g]},d.b=It,d.b$=FA,d.b0=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]+u[3]},d.b1=fw,d.b2=Jc,d.b3=function(u,i,l,h,g){var _,x=1/Math.tan(i/2);return u[0]=x/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=x,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,g!=null&&g!==1/0?(u[10]=(g+h)*(_=1/(h-g)),u[14]=2*g*h*_):(u[10]=-1,u[14]=-2*h),u},d.b4=function(u){var i=new Q(16);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],i[4]=u[4],i[5]=u[5],i[6]=u[6],i[7]=u[7],i[8]=u[8],i[9]=u[9],i[10]=u[10],i[11]=u[11],i[12]=u[12],i[13]=u[13],i[14]=u[14],i[15]=u[15],i},d.b5=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),_=i[0],x=i[1],k=i[2],E=i[3],D=i[4],V=i[5],j=i[6],q=i[7];return i!==u&&(u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=_*g+D*h,u[1]=x*g+V*h,u[2]=k*g+j*h,u[3]=E*g+q*h,u[4]=D*g-_*h,u[5]=V*g-x*h,u[6]=j*g-k*h,u[7]=q*g-E*h,u},d.b6=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),_=i[4],x=i[5],k=i[6],E=i[7],D=i[8],V=i[9],j=i[10],q=i[11];return i!==u&&(u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[4]=_*g+D*h,u[5]=x*g+V*h,u[6]=k*g+j*h,u[7]=E*g+q*h,u[8]=D*g-_*h,u[9]=V*g-x*h,u[10]=j*g-k*h,u[11]=q*g-E*h,u},d.b7=function(){const u=new Float32Array(16);return oe(u),u},d.b8=function(){const u=new Float64Array(16);return oe(u),u},d.b9=function(){return new Float64Array(16)},d.bA=function(u){return u[0]=0,u[1]=0,u[2]=0,u},d.bB=function(u,i,l,h){const g=Math.sqrt(u*u+i*i),_=Math.sqrt(l*l+h*h);u/=g,i/=g,l/=_,h/=_;const x=Math.acos(u*l+i*h);return-i*l+u*h>0?x:-x},d.bC=function(u,i){const l=jt(u,2*Math.PI),h=jt(i,2*Math.PI);return Math.min(Math.abs(l-h),Math.abs(l-h+2*Math.PI),Math.abs(l-h-2*Math.PI))},d.bD=function(){const u={},i=Oe.$version;for(const l in Oe.$root){const h=Oe.$root[l];if(h.required){let g=null;g=l==="version"?i:h.type==="array"?[]:{},g!=null&&(u[l]=g)}}return u},d.bE=Vh,d.bF=$e,d.bG=function u(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let h=0;h<i.length;h++)if(!u(i[h],l[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const h in i)if(!u(i[h],l[h]))return!1;return!0}return i===l},d.bH=function(u){u=u.slice();const i=Object.create(null);for(let l=0;l<u.length;l++)i[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=hn(u[l],i[u[l].ref]));return u},d.bI=function(u){if(u.type==="custom")return new oE(u);switch(u.type){case"background":return new rE(u);case"circle":return new JI(u);case"color-relief":return new rA(u);case"fill":return new _A(u);case"fill-extrusion":return new PA(u);case"heatmap":return new eA(u);case"hillshade":return new nA(u);case"line":return new zA(u);case"raster":return new sE(u);case"symbol":return new Ap(u)}},d.bJ=Ze,d.bK=function(u,i){if(!u)return[{command:"setStyle",args:[i]}];let l=[];try{if(!Yt(u.version,i.version))return[{command:"setStyle",args:[i]}];Yt(u.center,i.center)||l.push({command:"setCenter",args:[i.center]}),Yt(u.state,i.state)||l.push({command:"setGlobalState",args:[i.state]}),Yt(u.centerAltitude,i.centerAltitude)||l.push({command:"setCenterAltitude",args:[i.centerAltitude]}),Yt(u.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),Yt(u.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),Yt(u.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),Yt(u.roll,i.roll)||l.push({command:"setRoll",args:[i.roll]}),Yt(u.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),Yt(u.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),Yt(u.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),Yt(u.light,i.light)||l.push({command:"setLight",args:[i.light]}),Yt(u.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),Yt(u.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),Yt(u.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const h={},g=[];(function(x,k,E,D){let V;for(V in k=k||{},x=x||{})Object.prototype.hasOwnProperty.call(x,V)&&(Object.prototype.hasOwnProperty.call(k,V)||ui(V,E,D));for(V in k)Object.prototype.hasOwnProperty.call(k,V)&&(Object.prototype.hasOwnProperty.call(x,V)?Yt(x[V],k[V])||(x[V].type==="geojson"&&k[V].type==="geojson"&&qn(x,k,V)?on(E,{command:"setGeoJSONSourceData",args:[V,k[V].data]}):Qn(V,k,E,D)):gn(V,k,E))})(u.sources,i.sources,g,h);const _=[];u.layers&&u.layers.forEach(x=>{"source"in x&&h[x.source]?l.push({command:"removeLayer",args:[x.id]}):_.push(x)}),l=l.concat(g),function(x,k,E){k=k||[];const D=(x=x||[]).map($n),V=k.map($n),j=x.reduce(ir,{}),q=k.reduce(ir,{}),K=D.slice(),J=Object.create(null);let ie,me,xe,Ne,Pe;for(let Z=0,de=0;Z<D.length;Z++)ie=D[Z],Object.prototype.hasOwnProperty.call(q,ie)?de++:(on(E,{command:"removeLayer",args:[ie]}),K.splice(K.indexOf(ie,de),1));for(let Z=0,de=0;Z<V.length;Z++)ie=V[V.length-1-Z],K[K.length-1-Z]!==ie&&(Object.prototype.hasOwnProperty.call(j,ie)?(on(E,{command:"removeLayer",args:[ie]}),K.splice(K.lastIndexOf(ie,K.length-de),1)):de++,Ne=K[K.length-Z],on(E,{command:"addLayer",args:[q[ie],Ne]}),K.splice(K.length-Z,0,ie),J[ie]=!0);for(let Z=0;Z<V.length;Z++)if(ie=V[Z],me=j[ie],xe=q[ie],!J[ie]&&!Yt(me,xe))if(Yt(me.source,xe.source)&&Yt(me["source-layer"],xe["source-layer"])&&Yt(me.type,xe.type)){for(Pe in pn(me.layout,xe.layout,E,ie,null,"setLayoutProperty"),pn(me.paint,xe.paint,E,ie,null,"setPaintProperty"),Yt(me.filter,xe.filter)||on(E,{command:"setFilter",args:[ie,xe.filter]}),Yt(me.minzoom,xe.minzoom)&&Yt(me.maxzoom,xe.maxzoom)||on(E,{command:"setLayerZoomRange",args:[ie,xe.minzoom,xe.maxzoom]}),me)Object.prototype.hasOwnProperty.call(me,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?pn(me[Pe],xe[Pe],E,ie,Pe.slice(6),"setPaintProperty"):Yt(me[Pe],xe[Pe])||on(E,{command:"setLayerProperty",args:[ie,Pe,xe[Pe]]}));for(Pe in xe)Object.prototype.hasOwnProperty.call(xe,Pe)&&!Object.prototype.hasOwnProperty.call(me,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?pn(me[Pe],xe[Pe],E,ie,Pe.slice(6),"setPaintProperty"):Yt(me[Pe],xe[Pe])||on(E,{command:"setLayerProperty",args:[ie,Pe,xe[Pe]]}))}else on(E,{command:"removeLayer",args:[ie]}),Ne=K[K.lastIndexOf(ie)+1],on(E,{command:"addLayer",args:[xe,Ne]})}(_,i.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[i]}]}return l},d.bL=function(u){const i=[],l=u.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},d.bM=ue,d.bN=Le,d.bO=class extends hi{constructor(u,i){super(u,i),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},d.bP=yp,d.bQ=class extends hi{constructor(u,i){super(u,i),this.current=Fv}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let i=1;i<16;i++)if(u[i]!==this.current[i]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},d.bR=Xi,d.bS=class extends hi{constructor(u,i){super(u,i),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},d.bT=class extends hi{constructor(u,i){super(u,i),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},d.bU=ce,d.bV=function(u,i){var l=Math.sin(i),h=Math.cos(i);return u[0]=h,u[1]=l,u[2]=0,u[3]=-l,u[4]=h,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},d.bW=function(u,i,l){var h=i[0],g=i[1],_=i[2];return u[0]=h*l[0]+g*l[3]+_*l[6],u[1]=h*l[1]+g*l[4]+_*l[7],u[2]=h*l[2]+g*l[5]+_*l[8],u},d.bX=function(u,i,l,h,g,_,x){var k=1/(i-l),E=1/(h-g),D=1/(_-x);return u[0]=-2*k,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*E,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*D,u[11]=0,u[12]=(i+l)*k,u[13]=(g+h)*E,u[14]=(x+_)*D,u[15]=1,u},d.bY=class extends hi{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(4*u.length);for(let l=0;l<u.length;l++)i[4*l]=u[l].r,i[4*l+1]=u[l].g,i[4*l+2]=u[l].b,i[4*l+3]=u[l].a;this.gl.uniform4fv(this.location,i)}}},d.bZ=class extends hi{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(u);this.gl.uniform1fv(this.location,i)}}},d.b_=class extends m{},d.ba=function(u,i,l){const h=new Float64Array(4);return ft(h,u,i-90,l),h},d.bb=function(u,i,l,h){var g,_,x,k,E,D=i[0],V=i[1],j=i[2],q=i[3],K=l[0],J=l[1],ie=l[2],me=l[3];return(_=D*K+V*J+j*ie+q*me)<0&&(_=-_,K=-K,J=-J,ie=-ie,me=-me),1-_>te?(g=Math.acos(_),x=Math.sin(g),k=Math.sin((1-h)*g)/x,E=Math.sin(h*g)/x):(k=1-h,E=h),u[0]=k*D+E*K,u[1]=k*V+E*J,u[2]=k*j+E*ie,u[3]=k*q+E*me,u},d.bc=function(u){const i=new Float64Array(9);var l,h,g,_,x,k,E,D,V,j,q,K,J,ie,me,xe,Ne,Pe;j=(g=(h=u)[0])*(E=g+g),q=(_=h[1])*E,J=(x=h[2])*E,ie=x*(D=_+_),xe=(k=h[3])*E,Ne=k*D,Pe=k*(V=x+x),(l=i)[0]=1-(K=_*D)-(me=x*V),l[3]=q-Pe,l[6]=J+Ne,l[1]=q+Pe,l[4]=1-j-me,l[7]=ie-xe,l[2]=J-Ne,l[5]=ie+xe,l[8]=1-j-K;const Z=Rn(-Math.asin(st(i[2],-1,1)));let de,Ee;return Math.hypot(i[5],i[8])<.001?(de=0,Ee=-Rn(Math.atan2(i[3],i[4]))):(de=Rn(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Ee=Rn(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:de,pitch:Z+90,bearing:Ee}},d.bd=function(u,i){return u.roll==i.roll&&u.pitch==i.pitch&&u.bearing==i.bearing},d.be=zn,d.bf=jr,d.bg=Kc,d.bh=nf,d.bi=Zc,d.bj=Tt,d.bk=xt,d.bl=wn,d.bm=function(u,i,l,h,g){return Tt(h,g,st((u-i)/(l-i),0,1))},d.bn=jt,d.bo=function(){return new Float64Array(3)},d.bp=function(u,i,l,h){return u[0]=i[0]+l[0]*h,u[1]=i[1]+l[1]*h,u[2]=i[2]+l[2]*h,u},d.bq=ft,d.br=function(u,i,l){var h=l[0],g=l[1],_=l[2],x=i[0],k=i[1],E=i[2],D=g*E-_*k,V=_*x-h*E,j=h*k-g*x,q=g*j-_*V,K=_*D-h*j,J=h*V-g*D,ie=2*l[3];return V*=ie,j*=ie,K*=2,J*=2,u[0]=x+(D*=ie)+(q*=2),u[1]=k+V+K,u[2]=E+j+J,u},d.bs=function(u,i,l){const h=(g=[u[0],u[1],u[2],i[0],i[1],i[2],l[0],l[1],l[2]])[0]*((V=g[8])*(x=g[4])-(k=g[5])*(D=g[7]))+g[1]*(-V*(_=g[3])+k*(E=g[6]))+g[2]*(D*_-x*E);var g,_,x,k,E,D,V;if(h===0)return null;const j=je([],[i[0],i[1],i[2]],[l[0],l[1],l[2]]),q=je([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),K=je([],[u[0],u[1],u[2]],[i[0],i[1],i[2]]),J=be([],j,-u[3]);return ae(J,J,be([],q,-i[3])),ae(J,J,be([],K,-l[3])),be(J,J,1/h),J},d.bt=py,d.bu=function(){return new Float64Array(4)},d.bv=function(u,i,l,h){var g=[],_=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],_[0]=g[0]*Math.cos(h)-g[1]*Math.sin(h),_[1]=g[0]*Math.sin(h)+g[1]*Math.cos(h),_[2]=g[2],u[0]=_[0]+l[0],u[1]=_[1]+l[1],u[2]=_[2]+l[2],u},d.bw=function(u,i,l,h){var g=[],_=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],_[0]=g[0],_[1]=g[1]*Math.cos(h)-g[2]*Math.sin(h),_[2]=g[1]*Math.sin(h)+g[2]*Math.cos(h),u[0]=_[0]+l[0],u[1]=_[1]+l[1],u[2]=_[2]+l[2],u},d.bx=function(u,i,l,h){var g=[],_=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],_[0]=g[2]*Math.sin(h)+g[0]*Math.cos(h),_[1]=g[1],_[2]=g[2]*Math.cos(h)-g[0]*Math.sin(h),u[0]=_[0]+l[0],u[1]=_[1]+l[1],u[2]=_[2]+l[2],u},d.by=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),_=i[0],x=i[1],k=i[2],E=i[3],D=i[8],V=i[9],j=i[10],q=i[11];return i!==u&&(u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=_*g-D*h,u[1]=x*g-V*h,u[2]=k*g-j*h,u[3]=E*g-q*h,u[8]=_*h+D*g,u[9]=x*h+V*g,u[10]=k*h+j*g,u[11]=E*h+q*g,u},d.bz=function(u,i){const l=jt(u,360),h=jt(i,360),g=h-l,_=h>l?g-360:g+360;return Math.abs(g)<Math.abs(_)?g:_},d.c=He,d.c0=class extends y{},d.c1=Hv,d.c2=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},d.c3=hx,d.c4=function(u,i,l){var h=i[0],g=i[1],_=i[2],x=l[3]*h+l[7]*g+l[11]*_+l[15];return u[0]=(l[0]*h+l[4]*g+l[8]*_+l[12])/(x=x||1),u[1]=(l[1]*h+l[5]*g+l[9]*_+l[13])/x,u[2]=(l[2]*h+l[6]*g+l[10]*_+l[14])/x,u},d.c5=class extends Uh{},d.c6=class extends N{},d.c7=function(u,i){return u[0]===i[0]&&u[1]===i[1]&&u[2]===i[2]&&u[3]===i[3]&&u[4]===i[4]&&u[5]===i[5]&&u[6]===i[6]&&u[7]===i[7]&&u[8]===i[8]&&u[9]===i[9]&&u[10]===i[10]&&u[11]===i[11]&&u[12]===i[12]&&u[13]===i[13]&&u[14]===i[14]&&u[15]===i[15]},d.c8=function(u,i){var l=u[0],h=u[1],g=u[2],_=u[3],x=u[4],k=u[5],E=u[6],D=u[7],V=u[8],j=u[9],q=u[10],K=u[11],J=u[12],ie=u[13],me=u[14],xe=u[15],Ne=i[0],Pe=i[1],Z=i[2],de=i[3],Ee=i[4],it=i[5],At=i[6],dt=i[7],yt=i[8],zt=i[9],Mt=i[10],Vt=i[11],wt=i[12],Jt=i[13],un=i[14],ln=i[15];return Math.abs(l-Ne)<=te*Math.max(1,Math.abs(l),Math.abs(Ne))&&Math.abs(h-Pe)<=te*Math.max(1,Math.abs(h),Math.abs(Pe))&&Math.abs(g-Z)<=te*Math.max(1,Math.abs(g),Math.abs(Z))&&Math.abs(_-de)<=te*Math.max(1,Math.abs(_),Math.abs(de))&&Math.abs(x-Ee)<=te*Math.max(1,Math.abs(x),Math.abs(Ee))&&Math.abs(k-it)<=te*Math.max(1,Math.abs(k),Math.abs(it))&&Math.abs(E-At)<=te*Math.max(1,Math.abs(E),Math.abs(At))&&Math.abs(D-dt)<=te*Math.max(1,Math.abs(D),Math.abs(dt))&&Math.abs(V-yt)<=te*Math.max(1,Math.abs(V),Math.abs(yt))&&Math.abs(j-zt)<=te*Math.max(1,Math.abs(j),Math.abs(zt))&&Math.abs(q-Mt)<=te*Math.max(1,Math.abs(q),Math.abs(Mt))&&Math.abs(K-Vt)<=te*Math.max(1,Math.abs(K),Math.abs(Vt))&&Math.abs(J-wt)<=te*Math.max(1,Math.abs(J),Math.abs(wt))&&Math.abs(ie-Jt)<=te*Math.max(1,Math.abs(ie),Math.abs(Jt))&&Math.abs(me-un)<=te*Math.max(1,Math.abs(me),Math.abs(un))&&Math.abs(xe-ln)<=te*Math.max(1,Math.abs(xe),Math.abs(ln))},d.c9=function(u,i){return u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},d.cA=function(u){delete se.REGISTERED_PROTOCOLS[u]},d.cB=function(u,i){const l={};for(let g=0;g<u.length;g++){const _=i&&i[u[g].id]||Rc(u[g]);i&&(i[u[g].id]=_);let x=l[_];x||(x=l[_]=[]),x.push(u[g])}const h=[];for(const g in l)h.push(l[g]);return h},d.cC=Kt,d.cD=mw,d.cE=gw,d.cF=qx,d.cG=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Ie/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const i=u.bucket.layers[0],l=i.layout,h=i._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new mi(u.bucket.zoom+1),u.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new mi(u.bucket.zoom+1),u.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new mi(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=u.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new mi(D),u.canonical),h["text-size"].possiblyEvaluate(new mi(V),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=u.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new mi(D),u.canonical),h["icon-size"].possiblyEvaluate(new mi(V),u.canonical)]}const _=l.get("text-line-height")*or,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",k=l.get("text-keep-upright"),E=l.get("text-size");for(const D of u.bucket.features){const V=l.get("text-font").evaluate(D,{},u.canonical).join(","),j=E.evaluate(D,{},u.canonical),q=g.layoutTextSize.evaluate(D,{},u.canonical),K=g.layoutIconSize.evaluate(D,{},u.canonical),J={horizontal:{},vertical:void 0},ie=D.text;let me,xe=[0,0];if(ie){const Z=ie.toString(),de=l.get("text-letter-spacing").evaluate(D,{},u.canonical)*or,Ee=dp(Z)?de:0,it=l.get("text-anchor").evaluate(D,{},u.canonical),At=Pw(i,D,u.canonical);if(!At){const Mt=l.get("text-radial-offset").evaluate(D,{},u.canonical);xe=Mt?Tw(it,[Mt*or,yy]):l.get("text-offset").evaluate(D,{},u.canonical).map(Vt=>Vt*or)}let dt=x?"center":l.get("text-justify").evaluate(D,{},u.canonical);const yt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(D,{},u.canonical)*or:1/0,zt=()=>{u.bucket.allowVerticalPlacement&&Bh(Z)&&(J.vertical=Tp(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,_,it,"left",Ee,xe,d.an.vertical,!0,q,j))};if(!x&&At){const Mt=new Set;if(dt==="auto")for(let wt=0;wt<At.values.length;wt+=2)Mt.add(_y(At.values[wt]));else Mt.add(dt);let Vt=!1;for(const wt of Mt)if(!J.horizontal[wt])if(Vt)J.horizontal[wt]=J.horizontal[0];else{const Jt=Tp(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,_,"center",wt,Ee,xe,d.an.horizontal,!1,q,j);Jt&&(J.horizontal[wt]=Jt,Vt=Jt.positionedLines.length===1)}zt()}else{dt==="auto"&&(dt=_y(it));const Mt=Tp(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,_,it,dt,Ee,xe,d.an.horizontal,!1,q,j);Mt&&(J.horizontal[dt]=Mt),zt(),Bh(Z)&&x&&k&&(J.vertical=Tp(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,_,it,dt,Ee,xe,d.an.vertical,!1,q,j))}}let Ne=!1;if(D.icon&&D.icon.name){const Z=u.imageMap[D.icon.name];Z&&(me=QA(u.imagePositions[D.icon.name],l.get("icon-offset").evaluate(D,{},u.canonical),l.get("icon-anchor").evaluate(D,{},u.canonical)),Ne=!!Z.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Ne:u.bucket.sdfIcons!==Ne&&Je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Z.pixelRatio!==u.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Pe=Aw(J.horizontal)||J.vertical;u.bucket.iconsInText=!!Pe&&Pe.iconsInText,(Pe||me)&&gE(u.bucket,D,J,me,u.imageMap,g,q,K,xe,Ne,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},d.cH=iy,d.cI=Xv,d.cJ=ny,d.cK=af,d.cL=sy,d.cM=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},d.cN=function(u,i,l,h,g){return a(this,void 0,void 0,function*(){if(Y())try{return yield Ht(u,i,l,h,g)}catch{}return function(_,x,k,E,D){const V=_.width,j=_.height;en&&cn||(en=new OffscreenCanvas(V,j),cn=en.getContext("2d",{willReadFrequently:!0})),en.width=V,en.height=j,cn.drawImage(_,0,0,V,j);const q=cn.getImageData(x,k,E,D);return cn.clearRect(0,0,V,j),q.data}(u,i,l,h,g)})},d.cO=px,d.cP=b,d.cQ=T,d.cR=Dx,d.cS=Gx,d.cT=Ac,d.cU=Is,d.ca=u=>u.type==="symbol",d.cb=u=>u.type==="circle",d.cc=u=>u.type==="heatmap",d.cd=u=>u.type==="line",d.ce=u=>u.type==="fill",d.cf=u=>u.type==="fill-extrusion",d.cg=u=>u.type==="hillshade",d.ch=u=>u.type==="color-relief",d.ci=u=>u.type==="raster",d.cj=u=>u.type==="background",d.ck=u=>u.type==="custom",d.cl=Re,d.cm=function(u,i,l){const h=Se(i.x-l.x,i.y-l.y),g=Se(u.x-l.x,u.y-l.y);var _,x;return Rn(Math.atan2(h[0]*g[1]-h[1]*g[0],(_=h)[0]*(x=g)[0]+_[1]*x[1]))},d.cn=vt,d.co=function(u,i){return Yi[i]&&(u instanceof MouseEvent||u instanceof WheelEvent)},d.cp=function(u,i){return Ni[i]&&"touches"in u},d.cq=function(u){return Ni[u]||Yi[u]},d.cr=function(u,i,l){var h=i[0],g=i[1];return u[0]=l[0]*h+l[4]*g+l[12],u[1]=l[1]*h+l[5]*g+l[13],u},d.cs=function(u,i){const{x:l,y:h}=cf.fromLngLat(i);return!(u<0||u>25||h<0||h>=1||l<0||l>=1)},d.ct=function(u,i){return u[0]=i[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=i[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},d.cu=class extends Es{},d.cv=yE,d.cx=function(u){return u.message===Ui},d.cy=Ce,d.cz=function(u,i){se.REGISTERED_PROTOCOLS[u]=i},d.d=rt,d.e=St,d.f=u=>a(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.g=le,d.h=u=>new Promise((i,l)=>{const h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=sn})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(u)],{type:"image/png"});h.src=u.byteLength?URL.createObjectURL(g):sn}),d.i=ct,d.j=(u,i)=>We(St(u,{type:"json"}),i),d.k=Xe,d.l=pt,d.m=We,d.n=(u,i)=>We(St(u,{type:"arrayBuffer"}),i),d.o=function(u){return new sy(u).readFields(NA,[])},d.p=Hx,d.q=Xh,d.r=$r,d.s=vn,d.t=jh,d.u=Bn,d.v=Oe,d.w=Je,d.x=Rv,d.y=ru,d.z=nl}),c("worker",["./shared"],function(d){class a{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,le){for(const Ce of se){this._layerConfigs[Ce.id]=Ce;const $e=this._layers[Ce.id]=d.bI(Ce);$e._featureFilter=d.a9($e.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of le)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const fe=d.cB(Object.values(this._layerConfigs),this.keyCache);for(const Ce of fe){const $e=Ce.map(Xe=>this._layers[Xe.id]),We=$e[0];if(We.visibility==="none")continue;const rt=We.source||"";let qe=this.familiesBySource[rt];qe||(qe=this.familiesBySource[rt]={});const bt=We.sourceLayer||"_geojsonTileLayer";let pt=qe[bt];pt||(pt=qe[bt]=[]),pt.push($e)}}}class b{constructor(se){const le={},fe=[];for(const rt in se){const qe=se[rt],bt=le[rt]={};for(const pt in qe){const Xe=qe[+pt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Ct={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};fe.push(Ct),bt[pt]={rect:Ct,metrics:Xe.metrics}}}const{w:Ce,h:$e}=d.p(fe),We=new d.q({width:Ce||1,height:$e||1});for(const rt in se){const qe=se[rt];for(const bt in qe){const pt=qe[+bt];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const Xe=le[rt][bt].rect;d.q.copy(pt.bitmap,We,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},pt.bitmap)}}this.image=We,this.positions=le}}d.cC("GlyphAtlas",b);class C{constructor(se){this.tileID=new d.Z(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[],this.globalState=se.globalState}parse(se,le,fe,Ce,$e){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new d.a7;const We=new d.cD(Object.keys(se.layers).sort()),rt=new d.cE(this.tileID,this.promoteId);rt.bucketLayerIDs=[];const qe={},bt={featureIndex:rt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe,subdivisionGranularity:$e},pt=le.familiesBySource[this.source];for(const pn in pt){const $n=se.layers[pn];if(!$n)continue;$n.version===1&&d.w(`Vector tile source "${this.source}" layer "${pn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ir=We.encode(pn),Ft=[];for(let mr=0;mr<$n.length;mr++){const yi=$n.feature(mr),Ss=rt.getId(yi,pn);Ft.push({feature:yi,id:Ss,index:mr,sourceLayerIndex:ir})}for(const mr of pt[pn]){const yi=mr[0];yi.source!==this.source&&d.w(`layer.source = ${yi.source} does not equal this.source = ${this.source}`),yi.minzoom&&this.zoom<Math.floor(yi.minzoom)||yi.maxzoom&&this.zoom>=yi.maxzoom||yi.visibility!=="none"&&(w(mr,this.zoom,fe),(qe[yi.id]=yi.createBucket({index:rt.bucketLayerIDs.length,layers:mr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ir,sourceID:this.source,globalState:this.globalState})).populate(Ft,bt,this.tileID.canonical),rt.bucketLayerIDs.push(mr.map(Ss=>Ss.id)))}}const Xe=d.bM(bt.glyphDependencies,pn=>Object.keys(pn).map(Number));this.inFlightDependencies.forEach(pn=>pn==null?void 0:pn.abort()),this.inFlightDependencies=[];let Ct=Promise.resolve({});if(Object.keys(Xe).length){const pn=new AbortController;this.inFlightDependencies.push(pn),Ct=Ce.sendAsync({type:"GG",data:{stacks:Xe,source:this.source,tileID:this.tileID,type:"glyphs"}},pn)}const Oe=Object.keys(bt.iconDependencies);let qt=Promise.resolve({});if(Oe.length){const pn=new AbortController;this.inFlightDependencies.push(pn),qt=Ce.sendAsync({type:"GI",data:{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"}},pn)}const hn=Object.keys(bt.patternDependencies);let Yt=Promise.resolve({});if(hn.length){const pn=new AbortController;this.inFlightDependencies.push(pn),Yt=Ce.sendAsync({type:"GI",data:{icons:hn,source:this.source,tileID:this.tileID,type:"patterns"}},pn)}const[on,gn,ui]=yield Promise.all([Ct,qt,Yt]),Qn=new b(on),qn=new d.cF(gn,ui);for(const pn in qe){const $n=qe[pn];$n instanceof d.a8?(w($n.layers,this.zoom,fe),d.cG({bucket:$n,glyphMap:on,glyphPositions:Qn.positions,imageMap:gn,imagePositions:qn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:bt.subdivisionGranularity})):$n.hasPattern&&($n instanceof d.cH||$n instanceof d.cI||$n instanceof d.cJ)&&(w($n.layers,this.zoom,fe),$n.addFeatures(bt,this.tileID.canonical,qn.patternPositions))}return this.status="done",{buckets:Object.values(qe).filter(pn=>!pn.isEmpty()),featureIndex:rt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qn.image,imageAtlas:qn,glyphMap:this.returnDependencies?on:null,iconMap:this.returnDependencies?gn:null,glyphPositions:this.returnDependencies?Qn.positions:null}})}}function w(He,se,le){const fe=new d.F(se);for(const Ce of He)Ce.recalculate(fe,le)}class T{constructor(se,le,fe){this.actor=se,this.layerIndex=le,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,le){return d._(this,void 0,void 0,function*(){const fe=yield d.n(se.request,le);try{return{vectorTile:new d.cK.VectorTile(new d.cL(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(Ce){const $e=new Uint8Array(fe.data);let We=`Unable to parse the tile at ${se.request.url}, `;throw We+=$e[0]===31&&$e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.message}`,new Error(We)}})}loadTile(se){return d._(this,void 0,void 0,function*(){const le=se.uid,fe=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.cM(se.request),Ce=new C(se);this.loading[le]=Ce;const $e=new AbortController;Ce.abort=$e;try{const We=yield this.loadVectorTile(se,$e);if(delete this.loading[le],!We)return null;const rt=We.rawData,qe={};We.expires&&(qe.expires=We.expires),We.cacheControl&&(qe.cacheControl=We.cacheControl);const bt={};if(fe){const Xe=fe.finish();Xe&&(bt.resourceTiming=JSON.parse(JSON.stringify(Xe)))}Ce.vectorTile=We.vectorTile;const pt=Ce.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[le]=Ce,this.fetching[le]={rawTileData:rt,cacheControl:qe,resourceTiming:bt};try{const Xe=yield pt;return d.e({rawTileData:rt.slice(0)},Xe,qe,bt)}finally{delete this.fetching[le]}}catch(We){throw delete this.loading[le],Ce.status="done",this.loaded[le]=Ce,We}})}reloadTile(se){return d._(this,void 0,void 0,function*(){const le=se.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[le];if(fe.showCollisionBoxes=se.showCollisionBoxes,fe.globalState=se.globalState,fe.status==="parsing"){const Ce=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let $e;if(this.fetching[le]){const{rawTileData:We,cacheControl:rt,resourceTiming:qe}=this.fetching[le];delete this.fetching[le],$e=d.e({rawTileData:We.slice(0)},Ce,rt,qe)}else $e=Ce;return $e}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return d._(this,void 0,void 0,function*(){const le=this.loading,fe=se.uid;le&&le[fe]&&le[fe].abort&&(le[fe].abort.abort(),delete le[fe])})}removeTile(se){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class A{constructor(){this.loaded={}}loadTile(se){return d._(this,void 0,void 0,function*(){const{uid:le,encoding:fe,rawImageData:Ce,redFactor:$e,greenFactor:We,blueFactor:rt,baseShift:qe}=se,bt=Ce.width+2,pt=Ce.height+2,Xe=d.b(Ce)?new d.R({width:bt,height:pt},yield d.cN(Ce,-1,-1,bt,pt)):Ce,Ct=new d.cO(le,Xe,fe,$e,We,rt,qe);return this.loaded=this.loaded||{},this.loaded[le]=Ct,Ct})}removeTile(se){const le=this.loaded,fe=se.uid;le&&le[fe]&&delete le[fe]}}var P,R,O=function(){if(R)return P;function He(le,fe){if(le.length!==0){se(le[0],fe);for(var Ce=1;Ce<le.length;Ce++)se(le[Ce],!fe)}}function se(le,fe){for(var Ce=0,$e=0,We=0,rt=le.length,qe=rt-1;We<rt;qe=We++){var bt=(le[We][0]-le[qe][0])*(le[qe][1]+le[We][1]),pt=Ce+bt;$e+=Math.abs(Ce)>=Math.abs(bt)?Ce-pt+bt:bt-pt+Ce,Ce=pt}Ce+$e>=0!=!!fe&&le.reverse()}return R=1,P=function le(fe,Ce){var $e,We=fe&&fe.type;if(We==="FeatureCollection")for($e=0;$e<fe.features.length;$e++)le(fe.features[$e],Ce);else if(We==="GeometryCollection")for($e=0;$e<fe.geometries.length;$e++)le(fe.geometries[$e],Ce);else if(We==="Feature")le(fe.geometry,Ce);else if(We==="Polygon")He(fe.coordinates,Ce);else if(We==="MultiPolygon")for($e=0;$e<fe.coordinates.length;$e++)He(fe.coordinates[$e],Ce);return fe}}(),z=d.cP(O);const $=d.cK.VectorTileFeature.prototype.toGeoJSON;class F{constructor(se){this._feature=se,this.extent=d.$,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const le of this._feature.geometry)se.push([new d.P(le[0],le[1])]);return se}{const se=[];for(const le of this._feature.geometry){const fe=[];for(const Ce of le)fe.push(new d.P(Ce[0],Ce[1]));se.push(fe)}return se}}toGeoJSON(se,le,fe){return $.call(this,se,le,fe)}}class H{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.$,this.length=se.length,this._features=se}feature(se){return new F(this._features[se])}}var Y,te,Q,ce={exports:{}},oe=function(){if(Q)return ce.exports;Q=1;var He=d.cS(),se=function(){if(te)return Y;te=1;var pt=d.cQ(),Xe=d.cR().VectorTileFeature;function Ct(qt,hn){this.options=hn||{},this.features=qt,this.length=qt.length}function Oe(qt,hn){this.id=typeof qt.id=="number"?qt.id:void 0,this.type=qt.type,this.rawGeometry=qt.type===1?[qt.geometry]:qt.geometry,this.properties=qt.tags,this.extent=hn||4096}return Y=Ct,Ct.prototype.feature=function(qt){return new Oe(this.features[qt],this.options.extent)},Oe.prototype.loadGeometry=function(){var qt=this.rawGeometry;this.geometry=[];for(var hn=0;hn<qt.length;hn++){for(var Yt=qt[hn],on=[],gn=0;gn<Yt.length;gn++)on.push(new pt(Yt[gn][0],Yt[gn][1]));this.geometry.push(on)}return this.geometry},Oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var qt=this.geometry,hn=1/0,Yt=-1/0,on=1/0,gn=-1/0,ui=0;ui<qt.length;ui++)for(var Qn=qt[ui],qn=0;qn<Qn.length;qn++){var pn=Qn[qn];hn=Math.min(hn,pn.x),Yt=Math.max(Yt,pn.x),on=Math.min(on,pn.y),gn=Math.max(gn,pn.y)}return[hn,on,Yt,gn]},Oe.prototype.toGeoJSON=Xe.prototype.toGeoJSON,Y}();function le(pt){var Xe=new He;return function(Ct,Oe){for(var qt in Ct.layers)Oe.writeMessage(3,fe,Ct.layers[qt])}(pt,Xe),Xe.finish()}function fe(pt,Xe){var Ct;Xe.writeVarintField(15,pt.version||1),Xe.writeStringField(1,pt.name||""),Xe.writeVarintField(5,pt.extent||4096);var Oe={keys:[],values:[],keycache:{},valuecache:{}};for(Ct=0;Ct<pt.length;Ct++)Oe.feature=pt.feature(Ct),Xe.writeMessage(2,Ce,Oe);var qt=Oe.keys;for(Ct=0;Ct<qt.length;Ct++)Xe.writeStringField(3,qt[Ct]);var hn=Oe.values;for(Ct=0;Ct<hn.length;Ct++)Xe.writeMessage(4,bt,hn[Ct])}function Ce(pt,Xe){var Ct=pt.feature;Ct.id!==void 0&&Xe.writeVarintField(1,Ct.id),Xe.writeMessage(2,$e,pt),Xe.writeVarintField(3,Ct.type),Xe.writeMessage(4,qe,Ct)}function $e(pt,Xe){var Ct=pt.feature,Oe=pt.keys,qt=pt.values,hn=pt.keycache,Yt=pt.valuecache;for(var on in Ct.properties){var gn=Ct.properties[on],ui=hn[on];if(gn!==null){ui===void 0&&(Oe.push(on),hn[on]=ui=Oe.length-1),Xe.writeVarint(ui);var Qn=typeof gn;Qn!=="string"&&Qn!=="boolean"&&Qn!=="number"&&(gn=JSON.stringify(gn));var qn=Qn+":"+gn,pn=Yt[qn];pn===void 0&&(qt.push(gn),Yt[qn]=pn=qt.length-1),Xe.writeVarint(pn)}}}function We(pt,Xe){return(Xe<<3)+(7&pt)}function rt(pt){return pt<<1^pt>>31}function qe(pt,Xe){for(var Ct=pt.loadGeometry(),Oe=pt.type,qt=0,hn=0,Yt=Ct.length,on=0;on<Yt;on++){var gn=Ct[on],ui=1;Oe===1&&(ui=gn.length),Xe.writeVarint(We(1,ui));for(var Qn=Oe===3?gn.length-1:gn.length,qn=0;qn<Qn;qn++){qn===1&&Oe!==1&&Xe.writeVarint(We(2,Qn-1));var pn=gn[qn].x-qt,$n=gn[qn].y-hn;Xe.writeVarint(rt(pn)),Xe.writeVarint(rt($n)),qt+=pn,hn+=$n}Oe===3&&Xe.writeVarint(We(7,1))}}function bt(pt,Xe){var Ct=typeof pt;Ct==="string"?Xe.writeStringField(1,pt):Ct==="boolean"?Xe.writeBooleanField(7,pt):Ct==="number"&&(pt%1!=0?Xe.writeDoubleField(3,pt):pt<0?Xe.writeSVarintField(6,pt):Xe.writeVarintField(5,pt))}return ce.exports=le,ce.exports.fromVectorTileJs=le,ce.exports.fromGeojsonVt=function(pt,Xe){Xe=Xe||{};var Ct={};for(var Oe in pt)Ct[Oe]=new se(pt[Oe].features,Xe),Ct[Oe].name=Oe,Ct[Oe].version=Xe.version,Ct[Oe].extent=Xe.extent;return le({layers:Ct})},ce.exports.GeoJSONWrapper=se,ce.exports}(),he=d.cP(oe);const pe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:He=>He},_e=Math.fround||(ae=new Float32Array(1),He=>(ae[0]=+He,ae[0]));var ae;class be{constructor(se){this.options=Object.assign(Object.create(pe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:le,minZoom:fe,maxZoom:Ce}=this.options;le&&console.time("total time");const $e=`prepare ${se.length} points`;le&&console.time($e),this.points=se;const We=[];for(let qe=0;qe<se.length;qe++){const bt=se[qe];if(!bt.geometry)continue;const[pt,Xe]=bt.geometry.coordinates,Ct=_e(Fe(pt)),Oe=_e(Ke(Xe));We.push(Ct,Oe,1/0,qe,-1,1),this.options.reduce&&We.push(0)}let rt=this.trees[Ce+1]=this._createTree(We);le&&console.timeEnd($e);for(let qe=Ce;qe>=fe;qe--){const bt=+Date.now();rt=this.trees[qe]=this._createTree(this._cluster(rt,qe)),le&&console.log("z%d: %d clusters in %dms",qe,rt.numItems,+Date.now()-bt)}return le&&console.timeEnd("total time"),this}getClusters(se,le){let fe=((se[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,se[1]));let $e=se[2]===180?180:((se[2]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)fe=-180,$e=180;else if(fe>$e){const Xe=this.getClusters([fe,Ce,180,We],le),Ct=this.getClusters([-180,Ce,$e,We],le);return Xe.concat(Ct)}const rt=this.trees[this._limitZoom(le)],qe=rt.range(Fe(fe),Ke(We),Fe($e),Ke(Ce)),bt=rt.data,pt=[];for(const Xe of qe){const Ct=this.stride*Xe;pt.push(bt[Ct+5]>1?je(bt,Ct,this.clusterProps):this.points[bt[Ct+3]])}return pt}getChildren(se){const le=this._getOriginId(se),fe=this._getOriginZoom(se),Ce="No cluster with the specified id.",$e=this.trees[fe];if(!$e)throw new Error(Ce);const We=$e.data;if(le*this.stride>=We.length)throw new Error(Ce);const rt=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),qe=$e.within(We[le*this.stride],We[le*this.stride+1],rt),bt=[];for(const pt of qe){const Xe=pt*this.stride;We[Xe+4]===se&&bt.push(We[Xe+5]>1?je(We,Xe,this.clusterProps):this.points[We[Xe+3]])}if(bt.length===0)throw new Error(Ce);return bt}getLeaves(se,le,fe){const Ce=[];return this._appendLeaves(Ce,se,le=le||10,fe=fe||0,0),Ce}getTile(se,le,fe){const Ce=this.trees[this._limitZoom(se)],$e=Math.pow(2,se),{extent:We,radius:rt}=this.options,qe=rt/We,bt=(fe-qe)/$e,pt=(fe+1+qe)/$e,Xe={features:[]};return this._addTileFeatures(Ce.range((le-qe)/$e,bt,(le+1+qe)/$e,pt),Ce.data,le,fe,$e,Xe),le===0&&this._addTileFeatures(Ce.range(1-qe/$e,bt,1,pt),Ce.data,$e,fe,$e,Xe),le===$e-1&&this._addTileFeatures(Ce.range(0,bt,qe/$e,pt),Ce.data,-1,fe,$e,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom(se){let le=this._getOriginZoom(se)-1;for(;le<=this.options.maxZoom;){const fe=this.getChildren(se);if(le++,fe.length!==1)break;se=fe[0].properties.cluster_id}return le}_appendLeaves(se,le,fe,Ce,$e){const We=this.getChildren(le);for(const rt of We){const qe=rt.properties;if(qe&&qe.cluster?$e+qe.point_count<=Ce?$e+=qe.point_count:$e=this._appendLeaves(se,qe.cluster_id,fe,Ce,$e):$e<Ce?$e++:se.push(rt),se.length===fe)break}return $e}_createTree(se){const le=new d.aH(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<se.length;fe+=this.stride)le.add(se[fe],se[fe+1]);return le.finish(),le.data=se,le}_addTileFeatures(se,le,fe,Ce,$e,We){for(const rt of se){const qe=rt*this.stride,bt=le[qe+5]>1;let pt,Xe,Ct;if(bt)pt=Ve(le,qe,this.clusterProps),Xe=le[qe],Ct=le[qe+1];else{const hn=this.points[le[qe+3]];pt=hn.properties;const[Yt,on]=hn.geometry.coordinates;Xe=Fe(Yt),Ct=Ke(on)}const Oe={type:1,geometry:[[Math.round(this.options.extent*(Xe*$e-fe)),Math.round(this.options.extent*(Ct*$e-Ce))]],tags:pt};let qt;qt=bt||this.options.generateId?le[qe+3]:this.points[le[qe+3]].id,qt!==void 0&&(Oe.id=qt),We.features.push(Oe)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,le){const{radius:fe,extent:Ce,reduce:$e,minPoints:We}=this.options,rt=fe/(Ce*Math.pow(2,le)),qe=se.data,bt=[],pt=this.stride;for(let Xe=0;Xe<qe.length;Xe+=pt){if(qe[Xe+2]<=le)continue;qe[Xe+2]=le;const Ct=qe[Xe],Oe=qe[Xe+1],qt=se.within(qe[Xe],qe[Xe+1],rt),hn=qe[Xe+5];let Yt=hn;for(const on of qt){const gn=on*pt;qe[gn+2]>le&&(Yt+=qe[gn+5])}if(Yt>hn&&Yt>=We){let on,gn=Ct*hn,ui=Oe*hn,Qn=-1;const qn=(Xe/pt<<5)+(le+1)+this.points.length;for(const pn of qt){const $n=pn*pt;if(qe[$n+2]<=le)continue;qe[$n+2]=le;const ir=qe[$n+5];gn+=qe[$n]*ir,ui+=qe[$n+1]*ir,qe[$n+4]=qn,$e&&(on||(on=this._map(qe,Xe,!0),Qn=this.clusterProps.length,this.clusterProps.push(on)),$e(on,this._map(qe,$n)))}qe[Xe+4]=qn,bt.push(gn/Yt,ui/Yt,1/0,qn,-1,Yt),$e&&bt.push(Qn)}else{for(let on=0;on<pt;on++)bt.push(qe[Xe+on]);if(Yt>1)for(const on of qt){const gn=on*pt;if(!(qe[gn+2]<=le)){qe[gn+2]=le;for(let ui=0;ui<pt;ui++)bt.push(qe[gn+ui])}}}}return bt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,le,fe){if(se[le+5]>1){const We=this.clusterProps[se[le+6]];return fe?Object.assign({},We):We}const Ce=this.points[se[le+3]].properties,$e=this.options.map(Ce);return fe&&$e===Ce?Object.assign({},$e):$e}}function je(He,se,le){return{type:"Feature",id:He[se+3],properties:Ve(He,se,le),geometry:{type:"Point",coordinates:[(fe=He[se],360*(fe-.5)),mt(He[se+1])]}};var fe}function Ve(He,se,le){const fe=He[se+5],Ce=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,$e=He[se+6],We=$e===-1?{}:Object.assign({},le[$e]);return Object.assign(We,{cluster:!0,cluster_id:He[se+3],point_count:fe,point_count_abbreviated:Ce})}function Fe(He){return He/360+.5}function Ke(He){const se=Math.sin(He*Math.PI/180),le=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return le<0?0:le>1?1:le}function mt(He){const se=(180-360*He)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function ft(He,se,le,fe){let Ce=fe;const $e=se+(le-se>>1);let We,rt=le-se;const qe=He[se],bt=He[se+1],pt=He[le],Xe=He[le+1];for(let Ct=se+3;Ct<le;Ct+=3){const Oe=ze(He[Ct],He[Ct+1],qe,bt,pt,Xe);if(Oe>Ce)We=Ct,Ce=Oe;else if(Oe===Ce){const qt=Math.abs(Ct-$e);qt<rt&&(We=Ct,rt=qt)}}Ce>fe&&(We-se>3&&ft(He,se,We,fe),He[We+2]=Ce,le-We>3&&ft(He,We,le,fe))}function ze(He,se,le,fe,Ce,$e){let We=Ce-le,rt=$e-fe;if(We!==0||rt!==0){const qe=((He-le)*We+(se-fe)*rt)/(We*We+rt*rt);qe>1?(le=Ce,fe=$e):qe>0&&(le+=We*qe,fe+=rt*qe)}return We=He-le,rt=se-fe,We*We+rt*rt}function Se(He,se,le,fe){const Ce={id:He??null,type:se,geometry:le,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Ie(Ce,le);else if(se==="Polygon")Ie(Ce,le[0]);else if(se==="MultiLineString")for(const $e of le)Ie(Ce,$e);else if(se==="MultiPolygon")for(const $e of le)Ie(Ce,$e[0]);return Ce}function Ie(He,se){for(let le=0;le<se.length;le+=3)He.minX=Math.min(He.minX,se[le]),He.minY=Math.min(He.minY,se[le+1]),He.maxX=Math.max(He.maxX,se[le]),He.maxY=Math.max(He.maxY,se[le+1])}function Qe(He,se,le,fe){if(!se.geometry)return;const Ce=se.geometry.coordinates;if(Ce&&Ce.length===0)return;const $e=se.geometry.type,We=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let rt=[],qe=se.id;if(le.promoteId?qe=se.properties[le.promoteId]:le.generateId&&(qe=fe||0),$e==="Point")jt(Ce,rt);else if($e==="MultiPoint")for(const bt of Ce)jt(bt,rt);else if($e==="LineString")Tt(Ce,rt,We,!1);else if($e==="MultiLineString"){if(le.lineMetrics){for(const bt of Ce)rt=[],Tt(bt,rt,We,!1),He.push(Se(qe,"LineString",rt,se.properties));return}xt(Ce,rt,We,!1)}else if($e==="Polygon")xt(Ce,rt,We,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(const bt of se.geometry.geometries)Qe(He,{id:qe,geometry:bt,properties:se.properties},le,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of Ce){const pt=[];xt(bt,pt,We,!0),rt.push(pt)}}He.push(Se(qe,$e,rt,se.properties))}function jt(He,se){se.push(Re(He[0]),vt(He[1]),0)}function Tt(He,se,le,fe){let Ce,$e,We=0;for(let qe=0;qe<He.length;qe++){const bt=Re(He[qe][0]),pt=vt(He[qe][1]);se.push(bt,pt,0),qe>0&&(We+=fe?(Ce*pt-bt*$e)/2:Math.sqrt(Math.pow(bt-Ce,2)+Math.pow(pt-$e,2))),Ce=bt,$e=pt}const rt=se.length-3;se[2]=1,ft(se,0,rt,le),se[rt+2]=1,se.size=Math.abs(We),se.start=0,se.end=se.size}function xt(He,se,le,fe){for(let Ce=0;Ce<He.length;Ce++){const $e=[];Tt(He[Ce],$e,le,fe),se.push($e)}}function Re(He){return He/360+.5}function vt(He){const se=Math.sin(He*Math.PI/180),le=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return le<0?0:le>1?1:le}function st(He,se,le,fe,Ce,$e,We,rt){if(fe/=se,$e>=(le/=se)&&We<fe)return He;if(We<le||$e>=fe)return null;const qe=[];for(const bt of He){const pt=bt.geometry;let Xe=bt.type;const Ct=Ce===0?bt.minX:bt.minY,Oe=Ce===0?bt.maxX:bt.maxY;if(Ct>=le&&Oe<fe){qe.push(bt);continue}if(Oe<le||Ct>=fe)continue;let qt=[];if(Xe==="Point"||Xe==="MultiPoint")Ye(pt,qt,le,fe,Ce);else if(Xe==="LineString")St(pt,qt,le,fe,Ce,!1,rt.lineMetrics);else if(Xe==="MultiLineString")ue(pt,qt,le,fe,Ce,!1);else if(Xe==="Polygon")ue(pt,qt,le,fe,Ce,!0);else if(Xe==="MultiPolygon")for(const hn of pt){const Yt=[];ue(hn,Yt,le,fe,Ce,!0),Yt.length&&qt.push(Yt)}if(qt.length){if(rt.lineMetrics&&Xe==="LineString"){for(const hn of qt)qe.push(Se(bt.id,Xe,hn,bt.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(qt.length===1?(Xe="LineString",qt=qt[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=qt.length===3?"Point":"MultiPoint"),qe.push(Se(bt.id,Xe,qt,bt.tags))}}return qe.length?qe:null}function Ye(He,se,le,fe,Ce){for(let $e=0;$e<He.length;$e+=3){const We=He[$e+Ce];We>=le&&We<=fe&&Le(se,He[$e],He[$e+1],He[$e+2])}}function St(He,se,le,fe,Ce,$e,We){let rt=re(He);const qe=Ce===0?Ze:ut;let bt,pt,Xe=He.start;for(let Yt=0;Yt<He.length-3;Yt+=3){const on=He[Yt],gn=He[Yt+1],ui=He[Yt+2],Qn=He[Yt+3],qn=He[Yt+4],pn=Ce===0?on:gn,$n=Ce===0?Qn:qn;let ir=!1;We&&(bt=Math.sqrt(Math.pow(on-Qn,2)+Math.pow(gn-qn,2))),pn<le?$n>le&&(pt=qe(rt,on,gn,Qn,qn,le),We&&(rt.start=Xe+bt*pt)):pn>fe?$n<fe&&(pt=qe(rt,on,gn,Qn,qn,fe),We&&(rt.start=Xe+bt*pt)):Le(rt,on,gn,ui),$n<le&&pn>=le&&(pt=qe(rt,on,gn,Qn,qn,le),ir=!0),$n>fe&&pn<=fe&&(pt=qe(rt,on,gn,Qn,qn,fe),ir=!0),!$e&&ir&&(We&&(rt.end=Xe+bt*pt),se.push(rt),rt=re(He)),We&&(Xe+=bt)}let Ct=He.length-3;const Oe=He[Ct],qt=He[Ct+1],hn=Ce===0?Oe:qt;hn>=le&&hn<=fe&&Le(rt,Oe,qt,He[Ct+2]),Ct=rt.length-3,$e&&Ct>=3&&(rt[Ct]!==rt[0]||rt[Ct+1]!==rt[1])&&Le(rt,rt[0],rt[1],rt[2]),rt.length&&se.push(rt)}function re(He){const se=[];return se.size=He.size,se.start=He.start,se.end=He.end,se}function ue(He,se,le,fe,Ce,$e){for(const We of He)St(We,se,le,fe,Ce,$e,!1)}function Le(He,se,le,fe){He.push(se,le,fe)}function Ze(He,se,le,fe,Ce,$e){const We=($e-se)/(fe-se);return Le(He,$e,le+(Ce-le)*We,1),We}function ut(He,se,le,fe,Ce,$e){const We=($e-le)/(Ce-le);return Le(He,se+(fe-se)*We,$e,1),We}function Je(He,se){const le=[];for(let fe=0;fe<He.length;fe++){const Ce=He[fe],$e=Ce.type;let We;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")We=Pt(Ce.geometry,se);else if($e==="MultiLineString"||$e==="Polygon"){We=[];for(const rt of Ce.geometry)We.push(Pt(rt,se))}else if($e==="MultiPolygon"){We=[];for(const rt of Ce.geometry){const qe=[];for(const bt of rt)qe.push(Pt(bt,se));We.push(qe)}}le.push(Se(Ce.id,$e,We,Ce.tags))}return le}function Pt(He,se){const le=[];le.size=He.size,He.start!==void 0&&(le.start=He.start,le.end=He.end);for(let fe=0;fe<He.length;fe+=3)le.push(He[fe]+se,He[fe+1],He[fe+2]);return le}function ct(He,se){if(He.transformed)return He;const le=1<<He.z,fe=He.x,Ce=He.y;for(const $e of He.features){const We=$e.geometry,rt=$e.type;if($e.geometry=[],rt===1)for(let qe=0;qe<We.length;qe+=2)$e.geometry.push(Lt(We[qe],We[qe+1],se,le,fe,Ce));else for(let qe=0;qe<We.length;qe++){const bt=[];for(let pt=0;pt<We[qe].length;pt+=2)bt.push(Lt(We[qe][pt],We[qe][pt+1],se,le,fe,Ce));$e.geometry.push(bt)}}return He.transformed=!0,He}function Lt(He,se,le,fe,Ce,$e){return[Math.round(le*(He*fe-Ce)),Math.round(le*(se*fe-$e))]}function It(He,se,le,fe,Ce){const $e=se===Ce.maxZoom?0:Ce.tolerance/((1<<se)*Ce.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:He.length,source:null,x:le,y:fe,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const rt of He)sn(We,rt,$e,Ce);return We}function sn(He,se,le,fe){const Ce=se.geometry,$e=se.type,We=[];if(He.minX=Math.min(He.minX,se.minX),He.minY=Math.min(He.minY,se.minY),He.maxX=Math.max(He.maxX,se.maxX),He.maxY=Math.max(He.maxY,se.maxY),$e==="Point"||$e==="MultiPoint")for(let rt=0;rt<Ce.length;rt+=3)We.push(Ce[rt],Ce[rt+1]),He.numPoints++,He.numSimplified++;else if($e==="LineString")Ht(We,Ce,He,le,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(let rt=0;rt<Ce.length;rt++)Ht(We,Ce[rt],He,le,$e==="Polygon",rt===0);else if($e==="MultiPolygon")for(let rt=0;rt<Ce.length;rt++){const qe=Ce[rt];for(let bt=0;bt<qe.length;bt++)Ht(We,qe[bt],He,le,!0,bt===0)}if(We.length){let rt=se.tags||null;if($e==="LineString"&&fe.lineMetrics){rt={};for(const bt in se.tags)rt[bt]=se.tags[bt];rt.mapbox_clip_start=Ce.start/Ce.size,rt.mapbox_clip_end=Ce.end/Ce.size}const qe={geometry:We,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:rt};se.id!==null&&(qe.id=se.id),He.features.push(qe)}}function Ht(He,se,le,fe,Ce,$e){const We=fe*fe;if(fe>0&&se.size<(Ce?We:fe))return void(le.numPoints+=se.length/3);const rt=[];for(let qe=0;qe<se.length;qe+=3)(fe===0||se[qe+2]>We)&&(le.numSimplified++,rt.push(se[qe],se[qe+1])),le.numPoints++;Ce&&function(qe,bt){let pt=0;for(let Xe=0,Ct=qe.length,Oe=Ct-2;Xe<Ct;Oe=Xe,Xe+=2)pt+=(qe[Xe]-qe[Oe])*(qe[Xe+1]+qe[Oe+1]);if(pt>0===bt)for(let Xe=0,Ct=qe.length;Xe<Ct/2;Xe+=2){const Oe=qe[Xe],qt=qe[Xe+1];qe[Xe]=qe[Ct-2-Xe],qe[Xe+1]=qe[Ct-1-Xe],qe[Ct-2-Xe]=Oe,qe[Ct-1-Xe]=qt}}(rt,$e),He.push(rt)}const en={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class cn{constructor(se,le){const fe=(le=this.options=function($e,We){for(const rt in We)$e[rt]=We[rt];return $e}(Object.create(en),le)).debug;if(fe&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ce=function($e,We){const rt=[];if($e.type==="FeatureCollection")for(let qe=0;qe<$e.features.length;qe++)Qe(rt,$e.features[qe],We,qe);else Qe(rt,$e.type==="Feature"?$e:{geometry:$e},We);return rt}(se,le);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function($e,We){const rt=We.buffer/We.extent;let qe=$e;const bt=st($e,1,-1-rt,rt,0,-1,2,We),pt=st($e,1,1-rt,2+rt,0,-1,2,We);return(bt||pt)&&(qe=st($e,1,-rt,1+rt,0,-1,2,We)||[],bt&&(qe=Je(bt,1).concat(qe)),pt&&(qe=qe.concat(Je(pt,-1)))),qe}(Ce,le),Ce.length&&this.splitTile(Ce,0,0,0),fe&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,le,fe,Ce,$e,We,rt){const qe=[se,le,fe,Ce],bt=this.options,pt=bt.debug;for(;qe.length;){Ce=qe.pop(),fe=qe.pop(),le=qe.pop(),se=qe.pop();const Xe=1<<le,Ct=vn(le,fe,Ce);let Oe=this.tiles[Ct];if(!Oe&&(pt>1&&console.time("creation"),Oe=this.tiles[Ct]=It(se,le,fe,Ce,bt),this.tileCoords.push({z:le,x:fe,y:Ce}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,fe,Ce,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));const ir=`z${le}`;this.stats[ir]=(this.stats[ir]||0)+1,this.total++}if(Oe.source=se,$e==null){if(le===bt.indexMaxZoom||Oe.numPoints<=bt.indexMaxPoints)continue}else{if(le===bt.maxZoom||le===$e)continue;if($e!=null){const ir=$e-le;if(fe!==We>>ir||Ce!==rt>>ir)continue}}if(Oe.source=null,se.length===0)continue;pt>1&&console.time("clipping");const qt=.5*bt.buffer/bt.extent,hn=.5-qt,Yt=.5+qt,on=1+qt;let gn=null,ui=null,Qn=null,qn=null,pn=st(se,Xe,fe-qt,fe+Yt,0,Oe.minX,Oe.maxX,bt),$n=st(se,Xe,fe+hn,fe+on,0,Oe.minX,Oe.maxX,bt);se=null,pn&&(gn=st(pn,Xe,Ce-qt,Ce+Yt,1,Oe.minY,Oe.maxY,bt),ui=st(pn,Xe,Ce+hn,Ce+on,1,Oe.minY,Oe.maxY,bt),pn=null),$n&&(Qn=st($n,Xe,Ce-qt,Ce+Yt,1,Oe.minY,Oe.maxY,bt),qn=st($n,Xe,Ce+hn,Ce+on,1,Oe.minY,Oe.maxY,bt),$n=null),pt>1&&console.timeEnd("clipping"),qe.push(gn||[],le+1,2*fe,2*Ce),qe.push(ui||[],le+1,2*fe,2*Ce+1),qe.push(Qn||[],le+1,2*fe+1,2*Ce),qe.push(qn||[],le+1,2*fe+1,2*Ce+1)}}getTile(se,le,fe){se=+se,le=+le,fe=+fe;const Ce=this.options,{extent:$e,debug:We}=Ce;if(se<0||se>24)return null;const rt=1<<se,qe=vn(se,le=le+rt&rt-1,fe);if(this.tiles[qe])return ct(this.tiles[qe],$e);We>1&&console.log("drilling down to z%d-%d-%d",se,le,fe);let bt,pt=se,Xe=le,Ct=fe;for(;!bt&&pt>0;)pt--,Xe>>=1,Ct>>=1,bt=this.tiles[vn(pt,Xe,Ct)];return bt&&bt.source?(We>1&&(console.log("found parent tile z%d-%d-%d",pt,Xe,Ct),console.time("drilling down")),this.splitTile(bt.source,pt,Xe,Ct,se,le,fe),We>1&&console.timeEnd("drilling down"),this.tiles[qe]?ct(this.tiles[qe],$e):null):null}}function vn(He,se,le){return 32*((1<<He)*le+se)+He}function En(He,se){return se?He.properties[se]:He.id}function Rn(He,se){if(He==null)return!0;if(He.type==="Feature")return En(He,se)!=null;if(He.type==="FeatureCollection"){const le=new Set;for(const fe of He.features){const Ce=En(fe,se);if(Ce==null||le.has(Ce))return!1;le.add(Ce)}return!0}return!1}function Ni(He,se){const le=new Map;if(He!=null)if(He.type==="Feature")le.set(En(He,se),He);else for(const fe of He.features)le.set(En(fe,se),fe);return le}class Yi extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,le){return d._(this,void 0,void 0,function*(){const fe=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ce=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!Ce)return null;const $e=new H(Ce.features);let We=he($e);return We.byteOffset===0&&We.byteLength===We.buffer.byteLength||(We=new Uint8Array(We)),{vectorTile:$e,rawData:We.buffer}})}loadData(se){return d._(this,void 0,void 0,function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const fe=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.cM(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new be(function({superclusterOptions:We,clusterProperties:rt}){if(!rt||!We)return We;const qe={},bt={},pt={accumulated:null,zoom:0},Xe={properties:null},Ct=Object.keys(rt);for(const Oe of Ct){const[qt,hn]=rt[Oe],Yt=d.cT(hn),on=d.cT(typeof qt=="string"?[qt,["accumulated"],["get",Oe]]:qt);qe[Oe]=Yt.value,bt[Oe]=on.value}return We.map=Oe=>{Xe.properties=Oe;const qt={};for(const hn of Ct)qt[hn]=qe[hn].evaluate(pt,Xe);return qt},We.reduce=(Oe,qt)=>{Xe.properties=qt;for(const hn of Ct)pt.accumulated=Oe[hn],Oe[hn]=bt[hn].evaluate(pt,Xe)},We}(se)).load((yield this._pendingData).features):(Ce=yield this._pendingData,new cn(Ce,se.geojsonVtOptions)),this.loaded={};const $e={};if(fe){const We=fe.finish();We&&($e.resourceTiming={},$e.resourceTiming[se.source]=JSON.parse(JSON.stringify(We)))}return $e}catch($e){if(delete this._pendingRequest,d.cx($e))return{abandoned:!0};throw $e}var Ce})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const le=this.loaded;return le&&le[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,le){return d._(this,void 0,void 0,function*(){let fe=yield this.loadGeoJSON(se,le);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(z(fe,!0),se.filter){const Ce=d.cT(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map(We=>`${We.key}: ${We.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(We=>Ce.value.evaluate({zoom:0},We))}}return fe})}loadGeoJSON(se,le){return d._(this,void 0,void 0,function*(){const{promoteId:fe}=se;if(se.request){const Ce=yield d.j(se.request,le);return this._dataUpdateable=Rn(Ce.data,fe)?Ni(Ce.data,fe):void 0,Ce.data}if(typeof se.data=="string")try{const Ce=JSON.parse(se.data);return this._dataUpdateable=Rn(Ce,fe)?Ni(Ce,fe):void 0,Ce}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ce,$e,We){var rt,qe,bt,pt;if($e.removeAll&&Ce.clear(),$e.remove)for(const Xe of $e.remove)Ce.delete(Xe);if($e.add)for(const Xe of $e.add){const Ct=En(Xe,We);Ct!=null&&Ce.set(Ct,Xe)}if($e.update)for(const Xe of $e.update){let Ct=Ce.get(Xe.id);if(Ct==null)continue;const Oe=!Xe.removeAllProperties&&(((rt=Xe.removeProperties)===null||rt===void 0?void 0:rt.length)>0||((qe=Xe.addOrUpdateProperties)===null||qe===void 0?void 0:qe.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||Oe)&&(Ct=Object.assign({},Ct),Ce.set(Xe.id,Ct),Oe&&(Ct.properties=Object.assign({},Ct.properties))),Xe.newGeometry&&(Ct.geometry=Xe.newGeometry),Xe.removeAllProperties)Ct.properties={};else if(((bt=Xe.removeProperties)===null||bt===void 0?void 0:bt.length)>0)for(const qt of Xe.removeProperties)Object.prototype.hasOwnProperty.call(Ct.properties,qt)&&delete Ct.properties[qt];if(((pt=Xe.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0)for(const{key:qt,value:hn}of Xe.addOrUpdateProperties)Ct.properties[qt]=hn}}(this._dataUpdateable,se.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class Ui{constructor(se){this.self=se,this.actor=new d.J(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(le,fe)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=fe},this.self.addProtocol=d.cz,this.self.removeProtocol=d.cA,this.self.registerRTLTextPlugin=le=>{d.cU.setMethods(le)},this.actor.registerMessageHandler("LDT",(le,fe)=>this._getDEMWorkerSource(le,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RDT",(le,fe)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(le,fe.source).removeTile(fe)})),this.actor.registerMessageHandler("GCEZ",(le,fe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterExpansionZoom(fe)})),this.actor.registerMessageHandler("GCC",(le,fe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterChildren(fe)})),this.actor.registerMessageHandler("GCL",(le,fe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterLeaves(fe)})),this.actor.registerMessageHandler("LD",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).loadData(fe)),this.actor.registerMessageHandler("GD",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).getData()),this.actor.registerMessageHandler("LT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).reloadTile(fe)),this.actor.registerMessageHandler("AT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).abortTile(fe)),this.actor.registerMessageHandler("RMT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).removeTile(fe)),this.actor.registerMessageHandler("RS",(le,fe)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[le]||!this.workerSources[le][fe.type]||!this.workerSources[le][fe.type][fe.source])return;const Ce=this.workerSources[le][fe.type][fe.source];delete this.workerSources[le][fe.type][fe.source],Ce.removeSource!==void 0&&Ce.removeSource(fe)})),this.actor.registerMessageHandler("RM",le=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le]})),this.actor.registerMessageHandler("SR",(le,fe)=>d._(this,void 0,void 0,function*(){this.referrer=fe})),this.actor.registerMessageHandler("SRPS",(le,fe)=>this._syncRTLPluginState(le,fe)),this.actor.registerMessageHandler("IS",(le,fe)=>d._(this,void 0,void 0,function*(){this.self.importScripts(fe)})),this.actor.registerMessageHandler("SI",(le,fe)=>this._setImages(le,fe)),this.actor.registerMessageHandler("UL",(le,fe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(le).update(fe.layers,fe.removedIds)})),this.actor.registerMessageHandler("SL",(le,fe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(le).replace(fe)}))}_setImages(se,le){return d._(this,void 0,void 0,function*(){this.availableImages[se]=le;for(const fe in this.workerSources[se]){const Ce=this.workerSources[se][fe];for(const $e in Ce)Ce[$e].availableImages=le}})}_syncRTLPluginState(se,le){return d._(this,void 0,void 0,function*(){return yield d.cU.syncState(le,this.self.importScripts)})}_getAvailableImages(se){let le=this.availableImages[se];return le||(le=[]),le}_getLayerIndex(se){let le=this.layerIndexes[se];return le||(le=this.layerIndexes[se]=new a),le}_getWorkerSource(se,le,fe){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][le]||(this.workerSources[se][le]={}),!this.workerSources[se][le][fe]){const Ce={sendAsync:($e,We)=>($e.targetMapId=se,this.actor.sendAsync($e,We))};switch(le){case"vector":this.workerSources[se][le][fe]=new T(Ce,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][le][fe]=new Yi(Ce,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][le][fe]=new this.externalWorkerSourceTypes[le](Ce,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][le][fe]}_getDEMWorkerSource(se,le){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][le]||(this.demWorkerSources[se][le]=new A),this.demWorkerSources[se][le]}}return d.i(self)&&(self.worker=new Ui(self)),Ui}),c("index",["exports","./shared"],function(d,a){var b="5.6.0";function C(){var v=new a.A(4);return a.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let w,T;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(v,t,o){const m=requestAnimationFrame(y=>{p(),t(y)}),{unsubscribe:p}=a.s(v.signal,"abort",()=>{p(),cancelAnimationFrame(m),o(a.c())},!1)},frameAsync(v){return new Promise((t,o)=>{this.frame(v,t,o)})},getImageData(v,t=0){return this.getImageCanvasContext(v).getImageData(-t,-t,v.width+2*t,v.height+2*t)},getImageCanvasContext(v){const t=window.document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return t.width=v.width,t.height=v.height,o.drawImage(v,0,0,v.width,v.height),o},resolveURL:v=>(w||(w=document.createElement("a")),w.href=v,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(T==null&&(T=matchMedia("(prefers-reduced-motion: reduce)")),T.matches)}};class P{static testProp(t){if(!P.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in P.docStyle)return t[o];return t[0]}static create(t,o,m){const p=window.document.createElement(t);return o!==void 0&&(p.className=o),m&&m.appendChild(p),p}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(t,o){t.style[P.transformProp]=o}static addEventListener(t,o,m,p={}){t.addEventListener(o,m,"passive"in p?p:p.capture)}static removeEventListener(t,o,m,p={}){t.removeEventListener(o,m,"passive"in p?p:p.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(t){const o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}static getPoint(t,o,m){const p=o.boundingClientRect;return new a.P((m.clientX-p.left)/o.x-t.clientLeft,(m.clientY-p.top)/o.y-t.clientTop)}static mousePos(t,o){const m=P.getScale(t);return P.getPoint(t,m,o)}static touchPos(t,o){const m=[],p=P.getScale(t);for(let y=0;y<o.length;y++)m.push(P.getPoint(t,p,o[y]));return m}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const o=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),m=o.querySelectorAll("script");for(const p of m)p.remove();return P.clean(o),o.innerHTML}static isPossiblyDangerous(t,o){const m=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!m.includes("javascript:")&&!m.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const o=t.children;for(const m of o)P.removeAttributes(m),P.clean(m)}static removeAttributes(t){for(const{name:o,value:m}of t.attributes)P.isPossiblyDangerous(o,m)&&t.removeAttribute(o)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!$&&z&&(F?H(v):O=v)}};let O,z,$=!1,F=!1;function H(v){const t=v.createTexture();v.bindTexture(v.TEXTURE_2D,t);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,z),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(t),$=!0}var Y;typeof document<"u"&&(z=document.createElement("img"),z.onload=()=>{O&&H(O),O=null,F=!0},z.onerror=()=>{$=!0,O=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let t,o,m,p;v.resetRequestQueue=()=>{t=[],o=0,m=0,p={}},v.addThrottleControl=M=>{const L=m++;return p[L]=M,L},v.removeThrottleControl=M=>{delete p[M],S()},v.getImage=(M,L,B=!0)=>new Promise((G,N)=>{R.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),a.e(M,{type:"image"}),t.push({abortController:L,requestParameters:M,supportImageRefresh:B,state:"queued",onError:W=>{N(W)},onSuccess:W=>{G(W)}}),S()});const y=M=>a._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:L,supportImageRefresh:B,onError:G,onSuccess:N,abortController:W}=M,ee=B===!1&&!a.i(self)&&!a.g(L.url)&&(!L.headers||Object.keys(L.headers).reduce((ye,we)=>ye&&we==="accept",!0));o++;const ve=ee?I(L,W):a.m(L,W);try{const ye=yield ve;delete M.abortController,M.state="completed",ye.data instanceof HTMLImageElement||a.b(ye.data)?N(ye):ye.data&&N({data:yield(ge=ye.data,typeof createImageBitmap=="function"?a.f(ge):a.h(ge)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete M.abortController,G(ye)}finally{o--,S()}var ge}),S=()=>{const M=(()=>{for(const L of Object.keys(p))if(p[L]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=o;L<M&&t.length>0;L++){const B=t.shift();B.abortController.signal.aborted?L--:y(B)}},I=(M,L)=>new Promise((B,G)=>{const N=new Image,W=M.url,ee=M.credentials;ee&&ee==="include"?N.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!a.d(W))&&(N.crossOrigin="anonymous"),L.signal.addEventListener("abort",()=>{N.src="",G(a.c())}),N.fetchPriority="high",N.onload=()=>{N.onerror=N.onload=null,B({data:N})},N.onerror=()=>{N.onerror=N.onload=null,L.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},N.src=W})}(Y||(Y={})),Y.resetRequestQueue();class te{constructor(t){this._transformRequestFn=t}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Q(v){const t=[];if(typeof v=="string")t.push({id:"default",url:v});else if(v&&v.length>0){const o=[];for(const{id:m,url:p}of v){const y=`${m}${p}`;o.indexOf(y)===-1&&(o.push(y),t.push({id:m,url:p}))}}return t}function ce(v,t,o){try{const m=new URL(v);return m.pathname+=`${t}${o}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function oe(v){const{userImage:t}=v;return!!(t&&t.render&&t.render())&&(v.data.replace(new Uint8Array(t.data.buffer)),!0)}class he extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,promiseResolve:m}of this.requestors)m(this._getImagesForIds(o));this.requestors=[]}}getImage(t){const o=this.images[t];if(o&&!o.data&&o.spriteData){const m=o.spriteData;o.data=new a.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),o.spriteData=null}return o}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let m=!0;const p=o.data||o.spriteData;return this._validateStretch(o.stretchX,p&&p.width)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchX" value`))),m=!1),this._validateStretch(o.stretchY,p&&p.height)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchY" value`))),m=!1),this._validateContent(o.content,o)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "content" value`))),m=!1),m}_validateStretch(t,o){if(!t)return!0;let m=0;for(const p of t){if(p[0]<m||p[1]<p[0]||o<p[1])return!1;m=p[1]}return!0}_validateContent(t,o){if(!t)return!0;if(t.length!==4)return!1;const m=o.spriteData,p=m&&m.width||o.data.width,y=m&&m.height||o.data.height;return!(t[0]<0||p<t[0]||t[1]<0||y<t[1]||t[2]<0||p<t[2]||t[3]<0||y<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,o,m=!0){const p=this.getImage(t);if(m&&(p.data.width!==o.data.width||p.data.height!==o.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=p.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((o,m)=>{let p=!0;if(!this.isLoaded())for(const y of t)this.images[y]||(p=!1);this.isLoaded()||p?o(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:o})})}_getImagesForIds(t){const o={};for(const m of t){let p=this.getImage(m);p||(this.fire(new a.l("styleimagemissing",{id:m})),p=this.getImage(m)),p?o[m]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:a.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],m=this.getImage(t);if(!m)return null;if(o&&o.position.version===m.version)return o.position;if(o)o.position.version=m.version;else{const p={w:m.data.width+2,h:m.data.height+2,x:0,y:0},y=new a.I(p,m);this.patterns[t]={bin:p,position:y}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const y in this.patterns)t.push(this.patterns[y].bin);const{w:o,h:m}=a.p(t),p=this.atlasImage;p.resize({width:o||1,height:m||1});for(const y in this.patterns){const{bin:S}=this.patterns[y],I=S.x+1,M=S.y+1,L=this.getImage(y).data,B=L.width,G=L.height;a.R.copy(L,p,{x:0,y:0},{x:I,y:M},{width:B,height:G}),a.R.copy(L,p,{x:0,y:G-1},{x:I,y:M-1},{width:B,height:1}),a.R.copy(L,p,{x:0,y:0},{x:I,y:M+G},{width:B,height:1}),a.R.copy(L,p,{x:B-1,y:0},{x:I-1,y:M},{width:1,height:G}),a.R.copy(L,p,{x:0,y:0},{x:I+B,y:M},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const m=this.getImage(o);m||a.w(`Image with ID: "${o}" was not found`),oe(m)&&this.updateImage(o,m)}}}const pe=1e20;function _e(v,t,o,m,p,y,S,I,M){for(let L=t;L<t+m;L++)ae(v,o*y+L,y,p,S,I,M);for(let L=o;L<o+p;L++)ae(v,L*y+t,1,m,S,I,M)}function ae(v,t,o,m,p,y,S){y[0]=0,S[0]=-1e20,S[1]=pe,p[0]=v[t];for(let I=1,M=0,L=0;I<m;I++){p[I]=v[t+I*o];const B=I*I;do{const G=y[M];L=(p[I]-p[G]+B-G*G)/(I-G)/2}while(L<=S[M]&&--M>-1);M++,y[M]=I,S[M]=L,S[M+1]=pe}for(let I=0,M=0;I<m;I++){for(;S[M+1]<I;)M++;const L=y[M],B=I-L;v[t+I*o]=p[L]+B*B}}class be{constructor(t,o){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return a._(this,void 0,void 0,function*(){const o=[];for(const y in t)for(const S of t[y])o.push(this._getAndCacheGlyphsPromise(y,S));const m=yield Promise.all(o),p={};for(const{stack:y,id:S,glyph:I}of m)p[y]||(p[y]={}),p[y][S]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return p})}_getAndCacheGlyphsPromise(t,o){return a._(this,void 0,void 0,function*(){let m=this.entries[t];m||(m=this.entries[t]={glyphs:{},requests:{},ranges:{}});let p=m.glyphs[o];if(p!==void 0)return{stack:t,id:o,glyph:p};if(p=this._tinySDF(m,t,o),p)return m.glyphs[o]=p,{stack:t,id:o,glyph:p};const y=Math.floor(o/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[y])return{stack:t,id:o,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[y]){const I=be.loadGlyphRange(t,y,this.url,this.requestManager);m.requests[y]=I}const S=yield m.requests[y];for(const I in S)this._doesCharSupportLocalGlyph(+I)||(m.glyphs[+I]=S[+I]);return m.ranges[y]=!0,{stack:t,id:o,glyph:S[o]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))||a.u["CJK Unified Ideographs"](t)||a.u["Hangul Syllables"](t)||a.u.Hiragana(t)||a.u.Katakana(t)||a.u["CJK Symbols and Punctuation"](t)||a.u["Halfwidth and Fullwidth Forms"](t))}_tinySDF(t,o,m){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(m))return;let y=t.tinySDF;if(!y){let I="400";/bold/i.test(o)?I="900":/medium/i.test(o)?I="500":/light/i.test(o)&&(I="200"),y=t.tinySDF=new be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:I})}const S=y.draw(String.fromCharCode(m));return{id:m,bitmap:new a.q({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}be.loadGlyphRange=function(v,t,o,m){return a._(this,void 0,void 0,function*(){const p=256*t,y=p+255,S=m.transformRequest(o.replace("{fontstack}",v).replace("{range}",`${p}-${y}`),"Glyphs"),I=yield a.n(S,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${t}, ${p}-${y}`);const M={};for(const L of a.o(I.data))M[L.id]=L;return M})},be.TinySDF=class{constructor({fontSize:v=24,buffer:t=3,radius:o=8,cutoff:m=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:S="normal"}={}){this.buffer=t,this.cutoff=m,this.radius=o;const I=this.size=v+4*t,M=this._createCanvas(I),L=this.ctx=M.getContext("2d",{willReadFrequently:!0});L.font=`${S} ${y} ${v}px ${p}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(v){const t=document.createElement("canvas");return t.width=t.height=v,t}draw(v){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:m,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(v),S=Math.ceil(o),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-p))),M=Math.min(this.size-this.buffer,S+Math.ceil(m)),L=I+2*this.buffer,B=M+2*this.buffer,G=Math.max(L*B,0),N=new Uint8ClampedArray(G),W={data:N,width:L,height:B,glyphWidth:I,glyphHeight:M,glyphTop:S,glyphLeft:0,glyphAdvance:t};if(I===0||M===0)return W;const{ctx:ee,buffer:ve,gridInner:ge,gridOuter:ye}=this;ee.clearRect(ve,ve,I,M),ee.fillText(v,ve,ve+S);const we=ee.getImageData(ve,ve,I,M);ye.fill(pe,0,G),ge.fill(0,0,G);for(let Ae=0;Ae<M;Ae++)for(let ke=0;ke<I;ke++){const De=we.data[4*(Ae*I+ke)+3]/255;if(De===0)continue;const Be=(Ae+ve)*L+ke+ve;if(De===1)ye[Be]=0,ge[Be]=pe;else{const Te=.5-De;ye[Be]=Te>0?Te*Te:0,ge[Be]=Te<0?Te*Te:0}}_e(ye,0,0,L,B,L,this.f,this.v,this.z),_e(ge,ve,ve,I,M,L,this.f,this.v,this.z);for(let Ae=0;Ae<G;Ae++){const ke=Math.sqrt(ye[Ae])-Math.sqrt(ge[Ae]);N[Ae]=Math.round(255-255*(ke/this.radius+this.cutoff))}return W}};class je{constructor(){this.specification=a.v.light.position}possiblyEvaluate(t,o){return a.B(t.expression.evaluate(o))}interpolate(t,o,m){return{x:a.C.number(t.x,o.x,m),y:a.C.number(t.y,o.y,m),z:a.C.number(t.z,o.z,m)}}}let Ve;class Fe extends a.E{constructor(t){super(),Ve=Ve||new a.r({anchor:new a.D(a.v.light.anchor),position:new je,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(Ve),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(a.x,t,o))for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m){return(!m||m.validate!==!1)&&a.y(this,t.call(a.z,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Ke=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class mt extends a.E{constructor(t){super(),this._transitionable=new a.t(Ke),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(t,o={}){if(!this._validate(a.G,t,o)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m={}){return(m==null?void 0:m.validate)!==!1&&a.y(this,t.call(a.z,a.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class ft{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const m=t.join(",")+String(o);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(t,o)),this.dashEntry[m]}getDashRanges(t,o,m){const p=[];let y=t.length%2==1?-t[t.length-1]*m:0,S=t[0]*m,I=!0;p.push({left:y,right:S,isDash:I,zeroLength:t[0]===0});let M=t[0];for(let L=1;L<t.length;L++){I=!I;const B=t[L];y=M*m,M+=B,S=M*m,p.push({left:y,right:S,isDash:I,zeroLength:B===0})}return p}addRoundDash(t,o,m){const p=o/2;for(let y=-m;y<=m;y++){const S=this.width*(this.nextRow+m+y);let I=0,M=t[I];for(let L=0;L<this.width;L++){L/M.right>1&&(M=t[++I]);const B=Math.abs(L-M.left),G=Math.abs(L-M.right),N=Math.min(B,G);let W;const ee=y/m*(p+1);if(M.isDash){const ve=p-Math.abs(ee);W=Math.sqrt(N*N+ve*ve)}else W=p-Math.sqrt(N*N+ee*ee);this.data[S+L]=Math.max(0,Math.min(255,W+128))}}}addRegularDash(t){for(let I=t.length-1;I>=0;--I){const M=t[I],L=t[I+1];M.zeroLength?t.splice(I,1):L&&L.isDash===M.isDash&&(L.left=M.left,t.splice(I,1))}const o=t[0],m=t[t.length-1];o.isDash===m.isDash&&(o.left=m.left-this.width,m.right=o.right+this.width);const p=this.width*this.nextRow;let y=0,S=t[y];for(let I=0;I<this.width;I++){I/S.right>1&&(S=t[++y]);const M=Math.abs(I-S.left),L=Math.abs(I-S.right),B=Math.min(M,L);this.data[p+I]=Math.max(0,Math.min(255,(S.isDash?B:-B)+128))}}addDash(t,o){const m=o?7:0,p=2*m+1;if(this.nextRow+p>this.height)return a.w("LineAtlas out of space"),null;let y=0;for(let I=0;I<t.length;I++)y+=t[I];if(y!==0){const I=this.width/y,M=this.getDashRanges(t,this.width,I);o?this.addRoundDash(M,I,m):this.addRegularDash(M)}const S={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:y};return this.nextRow+=p,this.dirty=!0,S}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const ze="maplibre_preloaded_worker_pool";class Se{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Se.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ze]}numActive(){return Object.keys(this.active).length}}const Ie=Math.floor(A.hardwareConcurrency/2);let Qe,jt;function Tt(){return Qe||(Qe=new Se),Qe}Se.workerCount=a.H(globalThis)?Math.max(Math.min(Ie,3),1):1;class xt{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o;const m=this.workerPool.acquire(o);for(let p=0;p<m.length;p++){const y=new a.J(m[p],o);y.name=`Worker ${p}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o){const m=[];for(const p of this.actors)m.push(p.sendAsync({type:t,data:o}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,o){for(const m of this.actors)m.registerMessageHandler(t,o)}}function Re(){return jt||(jt=new xt(Tt(),a.K),jt.registerMessageHandler("GR",(v,t,o)=>a.m(t,o))),jt}function vt(v,t){const o=a.L();return a.M(o,o,[1,1,0]),a.N(o,o,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?a.O(o,o,v.calculatePosMatrix(t.toUnwrapped())):o}function st(v,t,o,m,p,y,S){var I;const M=function(N,W,ee){if(N)for(const ve of N){const ge=W[ve];if(ge&&ge.source===ee&&ge.type==="fill-extrusion")return!0}else for(const ve in W){const ge=W[ve];if(ge.source===ee&&ge.type==="fill-extrusion")return!0}return!1}((I=p==null?void 0:p.layers)!==null&&I!==void 0?I:null,t,v.id),L=y.maxPitchScaleFactor(),B=v.tilesIn(m,L,M);B.sort(Ye);const G=[];for(const N of B)G.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(t,o,v._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,p,y,L,vt(v.transform,N.tileID),S?(W,ee)=>S(N.tileID,W,ee):void 0)});return function(N,W){for(const ee in N)for(const ve of N[ee])St(ve,W);return N}(function(N){const W={},ee={};for(const ve of N){const ge=ve.queryResults,ye=ve.wrappedTileID,we=ee[ye]=ee[ye]||{};for(const Ae in ge){const ke=ge[Ae],De=we[Ae]=we[Ae]||{},Be=W[Ae]=W[Ae]||[];for(const Te of ke)De[Te.featureIndex]||(De[Te.featureIndex]=!0,Be.push(Te))}}return W}(G),v)}function Ye(v,t){const o=v.tileID,m=t.tileID;return o.overscaledZ-m.overscaledZ||o.canonical.y-m.canonical.y||o.wrap-m.wrap||o.canonical.x-m.canonical.x}function St(v,t){const o=v.feature,m=t.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=m}function re(v,t,o){return a._(this,void 0,void 0,function*(){let m=v;if(v.url?m=(yield a.j(t.transformRequest(v.url,"Source"),o)).data:yield A.frameAsync(o),!m)return null;const p=a.Q(a.e(m,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(p.vectorLayerIds=m.vector_layers.map(y=>y.id)),p})}class ue{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof a.S?new a.S(t.lng,t.lat):a.S.convert(t),this}setSouthWest(t){return this._sw=t instanceof a.S?new a.S(t.lng,t.lat):a.S.convert(t),this}extend(t){const o=this._sw,m=this._ne;let p,y;if(t instanceof a.S)p=t,y=t;else{if(!(t instanceof ue))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(ue.convert(t)):this.extend(a.S.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(a.S.convert(t)):this;if(p=t._sw,y=t._ne,!p||!y)return this}return o||m?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),m.lng=Math.max(y.lng,m.lng),m.lat=Math.max(y.lat,m.lat)):(this._sw=new a.S(p.lng,p.lat),this._ne=new a.S(y.lng,y.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:m}=a.S.convert(t);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&p}static convert(t){return t instanceof ue?t:t&&new ue(t)}static fromLngLat(t,o=0){const m=360*o/40075017,p=m/Math.cos(Math.PI/180*t.lat);return new ue(new a.S(t.lng-p,t.lat-m),new a.S(t.lng+p,t.lat+m))}adjustAntiMeridian(){const t=new a.S(this._sw.lng,this._sw.lat),o=new a.S(this._ne.lng,this._ne.lat);return new ue(t,t.lng>o.lng?new a.S(o.lng+360,o.lat):o)}}class Le{constructor(t,o,m){this.bounds=ue.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=m||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),m=Math.floor(a.V(this.bounds.getWest())*o),p=Math.floor(a.U(this.bounds.getNorth())*o),y=Math.ceil(a.V(this.bounds.getEast())*o),S=Math.ceil(a.U(this.bounds.getSouth())*o);return t.x>=m&&t.x<y&&t.y>=p&&t.y<S}}class Ze extends a.E{constructor(t,o,m,p){if(super(),this.id=t,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(o,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield re(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(a.e(this,t),t.bounds&&(this.tileBounds=new Le(t.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new a.k(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(o,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};m.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((y,S)=>{t.reloadPromise={resolve:y,reject:S}})}else t.actor=this.dispatcher.getActor(),p="LT";t.abortController=new AbortController;try{const y=yield t.actor.sendAsync({type:p,data:m},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,y)}catch(y){if(delete t.abortController,t.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,o){if(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),t.reloadPromise){const m=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(m.resolve).catch(m.reject)}}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ut extends a.E{constructor(t,o,m,p){super(),this.id=t,this.dispatcher=m,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},o),a.e(this,a.Q(o,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(t=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield re(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(a.e(this,o),o.bounds&&(this.tileBounds=new Le(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(o){this._tileJSONRequest=null,this.fire(new a.k(o))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return a.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const m=yield Y.getImage(this.map._requestManager.transformRequest(o,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&t.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const p=this.map.painter.context,y=p.gl,S=m.data;t.texture=this.map.painter.getTileTexture(S.width),t.texture?t.texture.update(S,{useMipmap:!0}):(t.texture=new a.T(p,S,y.RGBA,{useMipmap:!0}),t.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(m){if(delete t.abortController,t.aborted)t.state="unloaded";else if(m)throw t.state="errored",m}})}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class Je extends ut{constructor(t,o,m,p){super(t,o,m,p),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(o,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const p=yield Y.getImage(m,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){const y=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const S=a.b(y)&&a.W()?y:yield this.readImageNow(y),I={type:this.type,uid:t.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const M=yield t.actor.sendAsync({type:"LDT",data:I});t.dem=M,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}})}readImageNow(t){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.X()){const o=t.width+2,m=t.height+2;try{return new a.R({width:o,height:m},yield a.Y(t,-1,-1,o,m))}catch{}}return A.getImageData(t,1)})}_getNeighboringTiles(t){const o=t.canonical,m=Math.pow(2,o.z),p=(o.x-1+m)%m,y=o.x===0?t.wrap-1:t.wrap,S=(o.x+1+m)%m,I=o.x+1===m?t.wrap+1:t.wrap,M={};return M[new a.Z(t.overscaledZ,y,o.z,p,o.y).key]={backfilled:!1},M[new a.Z(t.overscaledZ,I,o.z,S,o.y).key]={backfilled:!1},o.y>0&&(M[new a.Z(t.overscaledZ,y,o.z,p,o.y-1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,I,o.z,S,o.y-1).key]={backfilled:!1}),o.y+1<m&&(M[new a.Z(t.overscaledZ,y,o.z,p,o.y+1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,I,o.z,S,o.y+1).key]={backfilled:!1}),M}unloadTile(t){return a._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class Pt extends a.E{constructor(t,o,m,p){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(p),this._data=o.data,this._options=a.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(o.clusterMaxZoom),minPoints:Math.max(2,o.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(t){return t*(a.$/this.tileSize)}_getClusterMaxZoom(t){const o=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${o}"`),o}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return a._(this,void 0,void 0,function*(){const t=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}getCoordinatesFromGeometry(t){return t.type==="GeometryCollection"?t.geometries.map(o=>o.coordinates).flat(1/0):t.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const t=new ue,o=yield this.getData();let m;switch(o.type){case"FeatureCollection":m=o.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":m=this.getCoordinatesFromGeometry(o.geometry);break;default:m=this.getCoordinatesFromGeometry(o)}if(m.length==0)return t;for(let p=0;p<m.length-1;p+=2)t.extend([m[p],m[p+1]]);return t})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,o,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:o,offset:m}})}_updateWorkerData(t){return a._(this,void 0,void 0,function*(){const o=a.e({type:this.type},this.workerOptions);t?o.dataDiff=t:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const m=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let p=null;m.resourceTiming&&m.resourceTiming[this.id]&&(p=m.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&a.e(y,{resourceTiming:p}),this.fire(new a.l("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(m))}})}loaded(){return this._pendingLoads===0}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.actor?"RT":"LT";t.actor=this.actor;const m={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};t.abortController=new AbortController;const p=yield this.actor.sendAsync({type:o,data:m},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(p,this.map.painter,o==="RT")})}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ct extends a.E{constructor(t,o,m,p){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=m,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=o}load(t){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield Y.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,t&&(this.coordinates=t),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new a.k(o))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const o=t.map(a.a0.fromLngLat);var m;return this.tileID=function(p){const y=a.a1.fromPoints(p),S=y.width(),I=y.height(),M=Math.max(S,I),L=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),B=Math.pow(2,L);return new a.a3(L,Math.floor((y.minX+y.maxX)/2*B),Math.floor((y.minY+y.maxY)/2*B))}(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.texture||(this.texture=new a.T(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:o,minY:m,maxX:p,maxY:y}=a.a1.fromPoints(t),S={};for(let I=0;I<=a.a2;I++){const M=Math.pow(2,I),L=Math.floor(o*M),B=Math.floor(m*M),G=Math.floor(p*M),N=Math.floor(y*M);S[I]={minTileX:L,minTileY:B,maxTileX:G,maxTileY:N}}return S}}class Lt extends ct{constructor(t,o,m,p){super(t,o,m,p),this.roundZoom=!0,this.type="video",this.options=o}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield a.a4(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new a.k(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new a.k(new a.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class It extends ct{constructor(t,o,m,p){super(t,o,m,p),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(S=>typeof S!="number"))||this.fire(new a.k(new a.a5(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a5(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new a.k(new a.a5(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a5(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a5(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,m=o.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(o,this.canvas,m.RGBA,{premultiply:!0});let p=!1;for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const sn={},Ht=v=>{switch(v){case"geojson":return Pt;case"image":return ct;case"raster":return ut;case"raster-dem":return Je;case"vector":return Ze;case"video":return Lt;case"canvas":return It}return sn[v]},en="RTLPluginLoaded";class cn extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Re()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return a._(this,arguments,void 0,function*(o,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(en))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let vn=null;function En(){return vn||(vn=new cn),vn}class Rn{constructor(t,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=a.a6(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const o=t+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,o,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(p,y){const S={};if(!y)return S;for(const I of p){const M=I.layerIds.map(L=>y.getLayer(L)).filter(Boolean);if(M.length!==0){I.layers=M,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(L=>M.filter(B=>B.id===L)[0]));for(const L of M)S[L.id]=I}}return S}(t.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof a.a8){if(this.hasSymbolBuckets=!0,!m)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof a.a8&&y.hasRTLText){this.hasRTLText=!0,En().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(y))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new a.a7}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const m in this.buckets){const p=this.buckets[m];p.uploadPending()&&p.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,m,p,y,S,I,M,L,B,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:y,scale:S,tileSize:this.tileSize,pixelPosMatrix:B,transform:M,params:I,queryPadding:this.queryPadding*L,getElevation:G},t,o,m):{}}querySourceFeatures(t,o){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const p=m.loadVTLayers(),y=o&&o.sourceLayer?o.sourceLayer:"",S=p._geojsonTileLayer||p[y];if(!S)return;const I=a.a9(o&&o.filter),{z:M,x:L,y:B}=this.tileID.canonical,G={z:M,x:L,y:B};for(let N=0;N<S.length;N++){const W=S.feature(N);if(I.needGeometry){const ge=a.aa(W,!0);if(!I.filter(new a.F(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!I.filter(new a.F(this.tileID.overscaledZ),W))continue;const ee=m.getId(W,y),ve=new a.ab(W,M,L,B,ee);ve.tile=G,t.push(ve)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const m=a.ac(t.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const m=Date.now();let p=!1;if(this.expirationTime>m)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const y=this.expirationTime-o;y?this.expirationTime=m+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!o.style.hasLayer(p))continue;const y=this.buckets[p],S=y.layers[0].sourceLayer||"_geojsonTileLayer",I=m[S],M=t[S];if(!I||!M||Object.keys(M).length===0)continue;y.update(M,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=o&&o.style&&o.style.getLayer(p);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=A.now()+t}setDependencies(t,o){const m={};for(const p of o)m[p]=!0;this.dependencies[t]=m}hasDependency(t,o){for(const m of t){const p=this.dependencies[m];if(p){for(const y of o)if(p[y])return!0}}return!1}}class Ni{constructor(t,o){this.max=t,this.onRemove=o,this.reset()}reset(){for(const t in this.data)for(const o of this.data[t])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(t,o,m){const p=t.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const y={value:o,timeout:void 0};if(m!==void 0&&(y.timeout=setTimeout(()=>{this.remove(t,y)},m)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const o=this.data[t].shift();return o.timeout&&clearTimeout(o.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),o.value}getByKey(t){const o=this.data[t];return o?o[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,o){if(!this.has(t))return this;const m=t.wrapped().key,p=o===void 0?0:this.data[m].indexOf(o),y=this.data[m][p];return this.data[m].splice(p,1),y.timeout&&clearTimeout(y.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(y.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(t){const o=[];for(const m in this.data)for(const p of this.data[m])t(p.value)||o.push(p);for(const m of o)this.remove(m.value.tileID,m)}}class Yi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,m){const p=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][p]=this.stateChanges[t][p]||{},a.e(this.stateChanges[t][p],m),this.deletedStates[t]===null){this.deletedStates[t]={};for(const y in this.state[t])y!==p&&(this.deletedStates[t][y]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][p]===null){this.deletedStates[t][p]={};for(const y in this.state[t][p])m[y]||(this.deletedStates[t][p][y]=null)}else for(const y in m)this.deletedStates[t]&&this.deletedStates[t][p]&&this.deletedStates[t][p][y]===null&&delete this.deletedStates[t][p][y]}removeFeatureState(t,o,m){if(this.deletedStates[t]===null)return;const p=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},m&&o!==void 0)this.deletedStates[t][p]!==null&&(this.deletedStates[t][p]=this.deletedStates[t][p]||{},this.deletedStates[t][p][m]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][p])for(m in this.deletedStates[t][p]={},this.stateChanges[t][p])this.deletedStates[t][p][m]=null;else this.deletedStates[t][p]=null;else this.deletedStates[t]=null}getState(t,o){const m=String(o),p=a.e({},(this.state[t]||{})[m],(this.stateChanges[t]||{})[m]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const y=this.deletedStates[t][o];if(y===null)return{};for(const S in y)delete p[S]}return p}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const m={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const S in this.stateChanges[p])this.state[p][S]||(this.state[p][S]={}),a.e(this.state[p][S],this.stateChanges[p][S]),y[S]=this.state[p][S];m[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(this.deletedStates[p]===null)for(const S in this.state[p])y[S]={},this.state[p][S]={};else for(const S in this.deletedStates[p]){if(this.deletedStates[p][S]===null)this.state[p][S]={};else for(const I of Object.keys(this.deletedStates[p][S]))delete this.state[p][S][I];y[S]=this.state[p][S]}m[p]=m[p]||{},a.e(m[p],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const p in t)t[p].setFeatureState(m,o)}}const Ui=89.25;function He(v,t){const o=a.ag(t.lat,-85.051129,a.ah);return new a.P(a.V(t.lng)*v,a.U(o)*v)}function se(v,t){return new a.a0(t.x/v,t.y/v).toLngLat()}function le(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-v.pitch)),Math.tan(a.ad(Ui-v.pitch)))}function fe(v,t){const o=v.canonical,m=t/a.ae(o.z),p=o.x+Math.pow(2,o.z)*v.wrap,y=a.af(new Float64Array(16));return a.M(y,y,[p*m,o.y*m,0]),a.N(y,y,[m/a.$,m/a.$,1]),y}function Ce(v,t,o,m,p){const y=a.a0.fromLngLat(v,t),S=p*a.ai(1,v.lat),I=S*Math.cos(a.ad(o)),M=Math.sqrt(S*S-I*I),L=M*Math.sin(a.ad(-m)),B=M*Math.cos(a.ad(-m));return new a.a0(y.x+L,y.y+B,y.z+I)}function $e(v,t,o){const m=t.intersectsFrustum(v);if(!o||m===0)return m;const p=t.intersectsPlane(o);return p===0?0:m===2&&p===2?2:1}function We(v,t,o){let m=0;const p=(o-t)/10;for(let y=0;y<10;y++)m+=p*Math.pow(Math.cos(t+(y+.5)/10*(o-t)),v);return m}function rt(v,t){return function(o,m,p,y,S){const I=2*((v-1)/a.aj(Math.cos(a.ad(Ui-S))/Math.cos(a.ad(Ui)))-1),M=Math.acos(p/y),L=2*We(I-1,0,a.ad(S/2)),B=Math.min(a.ad(Ui),M+a.ad(S/2)),G=We(I-1,Math.min(B,M-a.ad(S/2)),B),N=Math.atan(m/p),W=Math.hypot(m,p);let ee=o;return ee+=a.aj(y/W/Math.max(.5,Math.cos(a.ad(S/2)))),ee+=I*a.aj(Math.cos(N))/2,ee-=a.aj(Math.max(1,G/L/t))/2,ee}}const qe=rt(9.314,3);function bt(v,t){const o=(t.roundZoom?Math.round:Math.floor)(v.zoom+a.aj(v.tileSize/t.tileSize));return Math.max(0,o)}function pt(v,t){const o=v.getCameraFrustum(),m=v.getClippingPlane(),p=v.screenPointToMercatorCoordinate(v.getCameraPoint()),y=a.a0.fromLngLat(v.center,v.elevation);p.z=y.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const S=v.getCoveringTilesDetailsProvider(),I=S.allowVariableZoom(v,t),M=bt(v,t),L=t.minzoom||0,B=t.maxzoom!==void 0?t.maxzoom:v.maxZoom,G=Math.min(Math.max(0,M),B),N=Math.pow(2,G),W=[N*p.x,N*p.y,0],ee=[N*y.x,N*y.y,0],ve=Math.hypot(y.x-p.x,y.y-p.y),ge=Math.abs(y.z-p.z),ye=Math.hypot(ve,ge),we=De=>({zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Ae=[],ke=[];if(v.renderWorldCopies&&S.allowWorldCopies())for(let De=1;De<=3;De++)Ae.push(we(-De)),Ae.push(we(De));for(Ae.push(we(0));Ae.length>0;){const De=Ae.pop(),Be=De.x,Te=De.y;let Ge=De.fullyVisible;const at={x:Be,y:Te,z:De.zoom},tt=S.getTileBoundingVolume(at,De.wrap,v.elevation,t);if(!Ge){const $t=$e(o,tt,m);if($t===0)continue;Ge=$t===2}const nt=S.distanceToTile2d(p.x,p.y,at,tt);let ot=M;I&&(ot=(t.calculateTileZoom||qe)(v.zoom+a.aj(v.tileSize/t.tileSize),nt,ge,ye,v.fov)),ot=(t.roundZoom?Math.round:Math.floor)(ot),ot=Math.max(0,ot);const Nt=Math.min(ot,B);if(De.wrap=S.getWrap(y,at,De.wrap),De.zoom>=Nt){if(De.zoom<L)continue;const $t=G-De.zoom,Et=W[0]-.5-(Be<<$t),Xt=W[1]-.5-(Te<<$t),kn=t.reparseOverscaled?Math.max(De.zoom,ot):De.zoom;ke.push({tileID:new a.Z(De.zoom===B?kn:De.zoom,De.wrap,De.zoom,Be,Te),distanceSq:a.ak([ee[0]-.5-Be,ee[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(Et*Et+Xt*Xt)})}else for(let $t=0;$t<4;$t++)Ae.push({zoom:De.zoom+1,x:(Be<<1)+$t%2,y:(Te<<1)+($t>>1),wrap:De.wrap,fullyVisible:Ge})}return ke.sort((De,Be)=>De.distanceSq-Be.distanceSq).map(De=>De.tileID)}const Xe=a.a1.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Ct extends a.E{constructor(t,o,m){super(),this.id=t,this.dispatcher=m,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,y,S,I)=>{const M=new(Ht(y.type))(p,y,S,I);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(t,o,m,this),this._tiles={},this._cache=new Ni(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Yi,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const o=this._tiles[t];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o,m){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,o,m)}catch(p){t.state="errored",p.status!==404?this._source.fire(new a.k(p,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new a.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const m=this._tiles[o];m.upload(t),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(Oe).map(t=>t.key)}getRenderableIds(t){const o=[];for(const m in this._tiles)this._isIdRenderable(m,t)&&o.push(this._tiles[m]);return t?o.sort((m,p)=>{const y=m.tileID,S=p.tileID,I=new a.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),M=new a.P(S.canonical.x,S.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-S.overscaledZ||M.y-I.y||M.x-I.x}).map(m=>m.tileID.key):o.map(m=>m.tileID).sort(Oe).map(m=>m.key)}hasRenderableParent(t){const o=this.findLoadedParent(t,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(t,o){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(o||!this._tiles[t].holdingForFade())}reload(t){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)t?this._reloadTile(o,"expired"):this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(t,o){return a._(this,void 0,void 0,function*(){const m=this._tiles[t];m&&(m.state!=="loading"&&(m.state=o),yield this._loadTile(m,t,o))})}_tileLoaded(t,o,m){t.timeAdded=A.now(),m==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const o=this.getRenderableIds();for(let p=0;p<o.length;p++){const y=o[p];if(t.neighboringTiles&&t.neighboringTiles[y]){const S=this.getTileByID(y);m(t,S),m(S,t)}}function m(p,y){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let S=y.tileID.canonical.x-p.tileID.canonical.x;const I=y.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),L=y.tileID.key;S===0&&I===0||Math.abs(I)>1||(Math.abs(S)>1&&(Math.abs(S+M)===1?S+=M:Math.abs(S-M)===1&&(S-=M)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,S,I),p.neighboringTiles&&p.neighboringTiles[L]&&(p.neighboringTiles[L].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,o,m,p){for(const y in this._tiles){let S=this._tiles[y];if(p[y]||!S.hasData()||S.tileID.overscaledZ<=o||S.tileID.overscaledZ>m)continue;let I=S.tileID;for(;S&&S.tileID.overscaledZ>o+1;){const L=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[L.key],S&&S.hasData()&&(I=L)}let M=I;for(;M.overscaledZ>o;)if(M=M.scaledTo(M.overscaledZ-1),t[M.key]||t[M.canonical.key]){p[I.key]=I;break}}}findLoadedParent(t,o){if(t.key in this._loadedParentTiles){const m=this._loadedParentTiles[t.key];return m&&m.tileID.overscaledZ>=o?m:null}for(let m=t.overscaledZ-1;m>=o;m--){const p=t.scaledTo(m),y=this._getLoadedTile(p);if(y)return y}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const o=this._tiles[t.key];return o&&o.hasData()?o:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,m=Math.ceil(t.height/this._source.tileSize)+1,p=Math.floor(o*m*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(y)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,o){const m={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+o),m[y.tileID.key]=y}this._tiles=m;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(t,o,m,p,y,S){const I={},M={},L=Object.keys(t),B=A.now();for(const G of L){const N=t[G],W=this._tiles[G];if(!W||W.fadeEndTime!==0&&W.fadeEndTime<=B)continue;const ee=this.findLoadedParent(N,o),ve=this.findLoadedSibling(N),ge=ee||ve||null;ge&&(this._addTile(ge.tileID),I[ge.tileID.key]=ge.tileID),M[G]=N}this._retainLoadedChildren(M,p,m,t);for(const G in I)t[G]||(this._coveredTiles[G]=!0,t[G]=I[G]);if(S){const G={},N={};for(const W of y)this._tiles[W.key].hasData()?G[W.key]=W:N[W.key]=W;for(const W in N){const ee=N[W].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(G[ee[0].key]=t[ee[0].key]=ee[0],G[ee[1].key]=t[ee[1].key]=ee[1],G[ee[2].key]=t[ee[2].key]=ee[2],G[ee[3].key]=t[ee[3].key]=ee[3],delete N[W])}for(const W in N){const ee=N[W],ve=this.findLoadedParent(ee,this._source.minzoom),ge=this.findLoadedSibling(ee),ye=ve||ge||null;if(ye){G[ye.tileID.key]=t[ye.tileID.key]=ye.tileID;for(const we in G)G[we].isChildOf(ye.tileID)&&delete G[we]}}for(const W in this._tiles)G[W]||(this._coveredTiles[W]=!0)}}update(t,o){if(!this._sourceLoaded||this._paused)return;let m;this.transform=t,this.terrain=o,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new a.Z(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(m=pt(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(B=>this._source.hasTile(B)))):m=[];const p=bt(t,this._source),y=Math.max(p-Ct.maxOverzooming,this._source.minzoom),S=Math.max(p+Ct.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const G of m)if(G.canonical.z>this._source.minzoom){const N=G.scaledTo(G.canonical.z-1);B[N.key]=N;const W=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));B[W.key]=W}m=m.concat(Object.values(B))}const I=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(m,p);qt(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,S,p,m,o);for(const B in M)this._tiles[B].clearFadeHold();const L=a.al(this._tiles,M);for(const B of L){const G=this._tiles[B];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){var m;const p={},y={},S=Math.max(o-Ct.maxOverzooming,this._source.minzoom),I=Math.max(o+Ct.maxUnderzooming,this._source.minzoom),M={};for(const L of t){const B=this._addTile(L);p[L.key]=L,B.hasData()||o<this._source.maxzoom&&(M[L.key]=L)}this._retainLoadedChildren(M,o,I,p);for(const L of t){let B=this._tiles[L.key];if(B.hasData())continue;if(o+1>this._source.maxzoom){const N=L.children(this._source.maxzoom)[0],W=this.getTile(N);if(W&&W.hasData()){p[N.key]=N;continue}}else{const N=L.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let G=B.wasRequested();for(let N=L.overscaledZ-1;N>=S;--N){const W=L.scaledTo(N);if(y[W.key])break;if(y[W.key]=!0,B=this.getTile(W),!B&&G&&(B=this._addTile(W)),B){const ee=B.hasData();if((ee||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||G)&&(p[W.key]=W),G=B.wasRequested(),ee)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const o=[];let m,p=this._tiles[t].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){m=this._loadedParentTiles[p.key];break}o.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(m=this._getLoadedTile(y),m)break;p=y}for(const y of o)this._loadedParentTiles[y]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const o=this._tiles[t].tileID,m=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=m}}_addTile(t){let o=this._tiles[t.key];if(o)return o;o=this._cache.getAndRemove(t),o&&(this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,o)));const m=o;return o||(o=new Rn(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,t.key,o.state)),o.uses++,this._tiles[t.key]=o,m||this._source.fire(new a.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const m=o.getExpiryTimeout();m&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},m))}refreshTiles(t){for(const o in this._tiles)(this._isIdRenderable(o)||this._tiles[o].state=="errored")&&t.some(m=>m.equals(this._tiles[o].tileID.canonical))&&this._reloadTile(o,"expired")}_removeTile(t){const o=this._tiles[t];o&&(o.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(t){const o=t.sourceDataType;t.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&o==="content"&&(this.reload(t.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,o,m){const p=[],y=this.transform;if(!y)return p;const S=y.getCoveringTilesDetailsProvider().allowWorldCopies(),I=m?y.getCameraQueryGeometry(t):t,M=W=>y.screenPointToMercatorCoordinate(W,this.terrain),L=this.transformBbox(t,M,!S),B=this.transformBbox(I,M,!S),G=this.getIds(),N=a.a1.fromPoints(B);for(let W=0;W<G.length;W++){const ee=this._tiles[G[W]];if(ee.holdingForFade())continue;const ve=S?[ee.tileID]:[ee.tileID.unwrapTo(-1),ee.tileID.unwrapTo(0)],ge=Math.pow(2,y.zoom-ee.tileID.overscaledZ),ye=o*ee.queryPadding*a.$/ee.tileSize/ge;for(const we of ve){const Ae=N.map(ke=>we.getTilePoint(new a.a0(ke.x,ke.y)));if(Ae.expandBy(ye),Ae.intersects(Xe)){const ke=L.map(Be=>we.getTilePoint(Be)),De=B.map(Be=>we.getTilePoint(Be));p.push({tile:ee,tileID:S?we:we.unwrapTo(0),queryGeometry:ke,cameraQueryGeometry:De,scale:ge})}}}return p}transformBbox(t,o,m){let p=t.map(o);if(m){const y=a.a1.fromPoints(t);y.shrinkBy(.001*Math.min(y.width(),y.height()));const S=y.map(o);a.a1.fromPoints(p).covers(S)||(p=p.map(I=>I.x>.5?new a.a0(I.x-1,I.y,I.z):I))}return p}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map(m=>this._tiles[m].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(qt(this._source.type)){const t=A.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=t)return!0}return!1}setFeatureState(t,o,m){this._state.updateState(t=t||"_geojsonTileLayer",o,m)}removeFeatureState(t,o,m){this._state.removeFeatureState(t=t||"_geojsonTileLayer",o,m)}getFeatureState(t,o){return this._state.getState(t=t||"_geojsonTileLayer",o)}setDependencies(t,o,m){const p=this._tiles[t];p&&p.setDependencies(o,m)}reloadTilesForDependencies(t,o){for(const m in this._tiles)this._tiles[m].hasDependency(t,o)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(t,o))}}function Oe(v,t){const o=Math.abs(2*v.wrap)-+(v.wrap<0),m=Math.abs(2*t.wrap)-+(t.wrap<0);return v.overscaledZ-t.overscaledZ||m-o||t.canonical.y-v.canonical.y||t.canonical.x-v.canonical.x}function qt(v){return v==="raster"||v==="image"||v==="video"}Ct.maxOverzooming=10,Ct.maxUnderzooming=3;class hn{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=a.ag(t,0,1);let o=1,m=this._distances[o];const p=t*this.paddedLength+this.padding;for(;m<p&&o<this._distances.length;)m=this._distances[++o];const y=o-1,S=this._distances[y],I=m-S,M=I>0?(p-S)/I:0;return this.points[y].mult(1-M).add(this.points[o].mult(M))}}function Yt(v,t){let o=!0;return v==="always"||v!=="never"&&t!=="never"||(o=!1),o}class on{constructor(t,o,m){const p=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(t/m),this.yCellCount=Math.ceil(o/m);for(let S=0;S<this.xCellCount*this.yCellCount;S++)p.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,m,p,y){this._forEachCell(o,m,p,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(m),this.bboxes.push(p),this.bboxes.push(y)}insertCircle(t,o,m,p){this._forEachCell(o-p,m-p,o+p,m+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(m),this.circles.push(p)}_insertBoxCell(t,o,m,p,y,S){this.boxCells[y].push(S)}_insertCircleCell(t,o,m,p,y,S){this.circleCells[y].push(S)}_query(t,o,m,p,y,S,I){if(m<0||t>this.width||p<0||o>this.height)return[];const M=[];if(t<=0&&o<=0&&this.width<=m&&this.height<=p){if(y)return[{key:null,x1:t,y1:o,x2:m,y2:p}];for(let L=0;L<this.boxKeys.length;L++)M.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const B=this.circles[3*L],G=this.circles[3*L+1],N=this.circles[3*L+2];M.push({key:this.circleKeys[L],x1:B-N,y1:G-N,x2:B+N,y2:G+N})}}else this._forEachCell(t,o,m,p,this._queryCell,M,{hitTest:y,overlapMode:S,seenUids:{box:{},circle:{}}},I);return M}query(t,o,m,p){return this._query(t,o,m,p,!1,null)}hitTest(t,o,m,p,y,S){return this._query(t,o,m,p,!0,y,S).length>0}hitTestCircle(t,o,m,p,y){const S=t-m,I=t+m,M=o-m,L=o+m;if(I<0||S>this.width||L<0||M>this.height)return!1;const B=[];return this._forEachCell(S,M,I,L,this._queryCellCircle,B,{hitTest:!0,overlapMode:p,circle:{x:t,y:o,radius:m},seenUids:{box:{},circle:{}}},y),B.length>0}_queryCell(t,o,m,p,y,S,I,M){const{seenUids:L,hitTest:B,overlapMode:G}=I,N=this.boxCells[y];if(N!==null){const ee=this.bboxes;for(const ve of N)if(!L.box[ve]){L.box[ve]=!0;const ge=4*ve,ye=this.boxKeys[ve];if(t<=ee[ge+2]&&o<=ee[ge+3]&&m>=ee[ge+0]&&p>=ee[ge+1]&&(!M||M(ye))&&(!B||!Yt(G,ye.overlapMode))&&(S.push({key:ye,x1:ee[ge],y1:ee[ge+1],x2:ee[ge+2],y2:ee[ge+3]}),B))return!0}}const W=this.circleCells[y];if(W!==null){const ee=this.circles;for(const ve of W)if(!L.circle[ve]){L.circle[ve]=!0;const ge=3*ve,ye=this.circleKeys[ve];if(this._circleAndRectCollide(ee[ge],ee[ge+1],ee[ge+2],t,o,m,p)&&(!M||M(ye))&&(!B||!Yt(G,ye.overlapMode))){const we=ee[ge],Ae=ee[ge+1],ke=ee[ge+2];if(S.push({key:ye,x1:we-ke,y1:Ae-ke,x2:we+ke,y2:Ae+ke}),B)return!0}}}return!1}_queryCellCircle(t,o,m,p,y,S,I,M){const{circle:L,seenUids:B,overlapMode:G}=I,N=this.boxCells[y];if(N!==null){const ee=this.bboxes;for(const ve of N)if(!B.box[ve]){B.box[ve]=!0;const ge=4*ve,ye=this.boxKeys[ve];if(this._circleAndRectCollide(L.x,L.y,L.radius,ee[ge+0],ee[ge+1],ee[ge+2],ee[ge+3])&&(!M||M(ye))&&!Yt(G,ye.overlapMode))return S.push(!0),!0}}const W=this.circleCells[y];if(W!==null){const ee=this.circles;for(const ve of W)if(!B.circle[ve]){B.circle[ve]=!0;const ge=3*ve,ye=this.circleKeys[ve];if(this._circlesCollide(ee[ge],ee[ge+1],ee[ge+2],L.x,L.y,L.radius)&&(!M||M(ye))&&!Yt(G,ye.overlapMode))return S.push(!0),!0}}}_forEachCell(t,o,m,p,y,S,I,M){const L=this._convertToXCellCoord(t),B=this._convertToYCellCoord(o),G=this._convertToXCellCoord(m),N=this._convertToYCellCoord(p);for(let W=L;W<=G;W++)for(let ee=B;ee<=N;ee++)if(y.call(this,t,o,m,p,this.xCellCount*ee+W,S,I,M))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,m,p,y,S){const I=p-t,M=y-o,L=m+S;return L*L>I*I+M*M}_circleAndRectCollide(t,o,m,p,y,S,I){const M=(S-p)/2,L=Math.abs(t-(p+M));if(L>M+m)return!1;const B=(I-y)/2,G=Math.abs(o-(y+B));if(G>B+m)return!1;if(L<=M||G<=B)return!0;const N=L-M,W=G-B;return N*N+W*W<=m*m}}function gn(v,t,o){const m=a.L();if(!v){const{vecSouth:G,vecEast:N}=Qn(t),W=C();W[0]=N[0],W[1]=N[1],W[2]=G[0],W[3]=G[1],p=W,(B=(S=(y=W)[0])*(L=y[3])-(M=y[2])*(I=y[1]))&&(p[0]=L*(B=1/B),p[1]=-I*B,p[2]=-M*B,p[3]=S*B),m[0]=W[0],m[1]=W[1],m[4]=W[2],m[5]=W[3]}var p,y,S,I,M,L,B;return a.N(m,m,[1/o,1/o,1]),m}function ui(v,t,o,m){if(v){const p=a.L();if(!t){const{vecSouth:y,vecEast:S}=Qn(o);p[0]=S[0],p[1]=S[1],p[4]=y[0],p[5]=y[1]}return a.N(p,p,[m,m,1]),p}return o.pixelsToClipSpaceMatrix}function Qn(v){const t=Math.cos(v.rollInRadians),o=Math.sin(v.rollInRadians),m=Math.cos(v.pitchInRadians),p=Math.cos(v.bearingInRadians),y=Math.sin(v.bearingInRadians),S=a.aq();S[0]=-p*m*o-y*t,S[1]=-y*m*o+p*t;const I=a.ar(S);I<1e-9?a.as(S):a.at(S,S,1/I);const M=a.aq();M[0]=p*m*t-y*o,M[1]=y*m*t+p*o;const L=a.ar(M);return L<1e-9?a.as(M):a.at(M,M,1/L),{vecEast:M,vecSouth:S}}function qn(v,t,o,m){let p;m?(p=[v,t,m(v,t),1],a.av(p,p,o)):(p=[v,t,0,1],Xs(p,p,o));const y=p[3];return{point:new a.P(p[0]/y,p[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function pn(v,t){return .5+v/t*.5}function $n(v,t){return v.x>=-t[0]&&v.x<=t[0]&&v.y>=-t[1]&&v.y<=t[1]}function ir(v,t,o,m,p,y,S,I,M,L,B,G,N){const W=o?v.textSizeData:v.iconSizeData,ee=a.am(W,t.transform.zoom),ve=[256/t.width*2+1,256/t.height*2+1],ge=o?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ge.clear();const ye=v.lineVertexArray,we=o?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ae=t.transform.width/t.transform.height;let ke=!1;for(let De=0;De<we.length;De++){const Be=we.get(De);if(Be.hidden||Be.writingMode===a.an.vertical&&!ke){ts(Be.numGlyphs,ge);continue}ke=!1;const Te=new a.P(Be.anchorX,Be.anchorY),Ge={getElevation:N,pitchedLabelPlaneMatrix:m,lineVertexArray:ye,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:Te,unwrappedTileID:M,width:L,height:B,translation:G},at=In(Be.anchorX,Be.anchorY,Ge);if(!$n(at.point,ve)){ts(Be.numGlyphs,ge);continue}const tt=pn(t.transform.cameraToCenterDistance,at.signedDistanceFromCamera),nt=a.ao(W,ee,Be),ot=y?nt*t.transform.getPitchedTextCorrection(Be.anchorX,Be.anchorY,M)/tt:nt*tt,Nt=yi({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:p,symbol:Be,fontSize:ot,flip:!1,keepUpright:S,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ae,rotateToLine:I});ke=Nt.useVertical,(Nt.notEnoughRoom||ke||Nt.needsFlipping&&yi({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:p,symbol:Be,fontSize:ot,flip:!0,keepUpright:S,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ae,rotateToLine:I}).notEnoughRoom)&&ts(Be.numGlyphs,ge)}o?v.text.dynamicLayoutVertexBuffer.updateData(ge):v.icon.dynamicLayoutVertexBuffer.updateData(ge)}function Ft(v,t,o,m,p,y,S,I){const M=y.glyphStartIndex+y.numGlyphs,L=y.lineStartIndex,B=y.lineStartIndex+y.lineLength,G=t.getoffsetX(y.glyphStartIndex),N=t.getoffsetX(M-1),W=Ua(v*G,o,m,p,y.segment,L,B,I,S);if(!W)return null;const ee=Ua(v*N,o,m,p,y.segment,L,B,I,S);return ee?I.projectionCache.anyProjectionOccluded?null:{first:W,last:ee}:null}function mr(v,t,o,m){return v===a.an.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*m?{useVertical:!0}:(v===a.an.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function yi(v){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:o,symbol:m,fontSize:p,flip:y,keepUpright:S,glyphOffsetArray:I,dynamicLayoutVertexArray:M,aspectRatio:L,rotateToLine:B}=v,G=p/24,N=m.lineOffsetX*G,W=m.lineOffsetY*G;let ee;if(m.numGlyphs>1){const ve=m.glyphStartIndex+m.numGlyphs,ge=m.lineStartIndex,ye=m.lineStartIndex+m.lineLength,we=Ft(G,I,N,W,y,m,B,t);if(!we)return{notEnoughRoom:!0};const Ae=Pn(we.first.point.x,we.first.point.y,t,o),ke=Pn(we.last.point.x,we.last.point.y,t,o);if(S&&!y){const De=mr(m.writingMode,Ae,ke,L);if(De)return De}ee=[we.first];for(let De=m.glyphStartIndex+1;De<ve-1;De++){const Be=Ua(G*I.getoffsetX(De),N,W,y,m.segment,ge,ye,t,B);if(!Be)return{notEnoughRoom:!0};ee.push(Be)}ee.push(we.last)}else{if(S&&!y){const ge=Ut(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,ye=m.lineStartIndex+m.segment+1,we=new a.P(t.lineVertexArray.getx(ye),t.lineVertexArray.gety(ye)),Ae=Ut(we.x,we.y,t),ke=Ae.signedDistanceFromCamera>0?Ae.point:Ss(t.tileAnchorPoint,we,ge,1,t),De=Pn(ge.x,ge.y,t,o),Be=Pn(ke.x,ke.y,t,o),Te=mr(m.writingMode,De,Be,L);if(Te)return Te}const ve=Ua(G*I.getoffsetX(m.glyphStartIndex),N,W,y,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,t,B);if(!ve||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[ve]}for(const ve of ee)a.au(M,ve.point,ve.angle);return{}}function Ss(v,t,o,m,p){const y=v.add(v.sub(t)._unit()),S=Ut(y.x,y.y,p).point,I=o.sub(S);return o.add(I._mult(m/I.mag()))}function Ys(v,t,o){const m=t.projectionCache;if(m.projections[v])return m.projections[v];const p=new a.P(t.lineVertexArray.getx(v),t.lineVertexArray.gety(v)),y=Ut(p.x,p.y,t);if(y.signedDistanceFromCamera>0)return m.projections[v]=y.point,m.anyProjectionOccluded=m.anyProjectionOccluded||y.isOccluded,y.point;const S=v-o.direction;return Ss(o.distanceFromAnchor===0?t.tileAnchorPoint:new a.P(t.lineVertexArray.getx(S),t.lineVertexArray.gety(S)),p,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,t)}function Ut(v,t,o){const m=v+o.translation[0],p=t+o.translation[1];let y;return o.pitchWithMap?(y=qn(m,p,o.pitchedLabelPlaneMatrix,o.getElevation),y.isOccluded=!1):(y=o.transform.projectTileCoordinates(m,p,o.unwrappedTileID,o.getElevation),y.point.x=(.5*y.point.x+.5)*o.width,y.point.y=(.5*-y.point.y+.5)*o.height),y}function Pn(v,t,o,m){if(o.pitchWithMap){const p=[v,t,0,1];return a.av(p,p,m),o.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],o.unwrappedTileID,o.getElevation).point}return{x:v/o.width*2-1,y:t/o.height*2-1}}function In(v,t,o){return o.transform.projectTileCoordinates(v,t,o.unwrappedTileID,o.getElevation)}function sa(v,t,o){return v._unit()._perp()._mult(t*o)}function uc(v,t,o,m,p,y,S,I,M){if(I.projectionCache.offsets[v])return I.projectionCache.offsets[v];const L=o.add(t);if(v+M.direction<m||v+M.direction>=p)return I.projectionCache.offsets[v]=L,L;const B=Ys(v+M.direction,I,M),G=sa(B.sub(o),S,M.direction),N=o.add(G),W=B.add(G);return I.projectionCache.offsets[v]=a.aw(y,L,N,W)||L,I.projectionCache.offsets[v]}function Ua(v,t,o,m,p,y,S,I,M){const L=m?v-t:v+t;let B=L>0?1:-1,G=0;m&&(B*=-1,G=Math.PI),B<0&&(G+=Math.PI);let N,W=B>0?y+p:y+p+1;I.projectionCache.cachedAnchorPoint?N=I.projectionCache.cachedAnchorPoint:(N=Ut(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=N);let ee,ve,ge=N,ye=N,we=0,Ae=0;const ke=Math.abs(L),De=[];let Be;for(;we+Ae<=ke;){if(W+=B,W<y||W>=S)return null;we+=Ae,ye=ge,ve=ee;const at={absOffsetX:ke,direction:B,distanceFromAnchor:we,previousVertex:ye};if(ge=Ys(W,I,at),o===0)De.push(ye),Be=ge.sub(ye);else{let tt;const nt=ge.sub(ye);tt=nt.mag()===0?sa(Ys(W+B,I,at).sub(ge),o,B):sa(nt,o,B),ve||(ve=ye.add(tt)),ee=uc(W,tt,ge,y,S,ve,o,I,at),De.push(ve),Be=ee.sub(ve)}Ae=Be.mag()}const Te=Be._mult((ke-we)/Ae)._add(ve||ye),Ge=G+Math.atan2(ge.y-ye.y,ge.x-ye.x);return De.push(Te),{point:Te,angle:M?Ge:0,path:De}}const An=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ts(v,t){for(let o=0;o<v;o++){const m=t.length;t.resize(m+4),t.float32.set(An,3*m)}}function Xs(v,t,o){const m=t[0],p=t[1];return v[0]=o[0]*m+o[4]*p+o[12],v[1]=o[1]*m+o[5]*p+o[13],v[3]=o[3]*m+o[7]*p+o[15],v}const Fi=100;class Rl{constructor(t,o=new on(t.width+200,t.height+200,25),m=new on(t.width+200,t.height+200,25)){this.transform=t,this.grid=o,this.ignoredGrid=m,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Fi,this.screenBottomBoundary=t.height+Fi,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,m,p,y,S,I,M,L,B,G,N){const W=this.projectAndGetPerspectiveRatio(t.anchorPointX+M[0],t.anchorPointY+M[1],y,B,N),ee=m*W.perspectiveRatio;let ve;if(S||I)ve=this._projectCollisionBox(t,ee,p,y,S,I,M,W,B,G,N);else{const Be=W.x+(G?G.x*ee:0),Te=W.y+(G?G.y*ee:0);ve={allPointsOccluded:!1,box:[Be+t.x1*ee,Te+t.y1*ee,Be+t.x2*ee,Te+t.y2*ee]}}const[ge,ye,we,Ae]=ve.box,ke=S?ve.allPointsOccluded:W.isOccluded;let De=ke;return De||(De=W.perspectiveRatio<this.perspectiveRatioCutoff),De||(De=!this.isInsideGrid(ge,ye,we,Ae)),De||o!=="always"&&this.grid.hitTest(ge,ye,we,Ae,o,L)?{box:[ge,ye,we,Ae],placeable:!1,offscreen:!1,occluded:ke}:{box:[ge,ye,we,Ae],placeable:!0,offscreen:this.isOffscreen(ge,ye,we,Ae),occluded:ke}}placeCollisionCircles(t,o,m,p,y,S,I,M,L,B,G,N,W,ee){const ve=[],ge=new a.P(o.anchorX,o.anchorY),ye=this.getPerspectiveRatio(ge.x,ge.y,S,ee),we=(L?y*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,S)/ye:y*ye)/a.aA,Ae={getElevation:ee,pitchedLabelPlaneMatrix:I,lineVertexArray:m,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:W},ke=Ft(we,p,o.lineOffsetX*we,o.lineOffsetY*we,!1,o,!1,Ae);let De=!1,Be=!1,Te=!0;if(ke){const Ge=.5*G*ye+N,at=new a.P(-100,-100),tt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),nt=new hn,ot=ke.first,Nt=ke.last;let $t=[];for(let kn=ot.path.length-1;kn>=1;kn--)$t.push(ot.path[kn]);for(let kn=1;kn<Nt.path.length;kn++)$t.push(Nt.path[kn]);const Et=2.5*Ge;if(L){const kn=this.projectPathToScreenSpace($t,Ae);$t=kn.some(Kn=>Kn.signedDistanceFromCamera<=0)?[]:kn.map(Kn=>Kn.point)}let Xt=[];if($t.length>0){const kn=$t[0].clone(),Kn=$t[0].clone();for(let wi=1;wi<$t.length;wi++)kn.x=Math.min(kn.x,$t[wi].x),kn.y=Math.min(kn.y,$t[wi].y),Kn.x=Math.max(Kn.x,$t[wi].x),Kn.y=Math.max(Kn.y,$t[wi].y);Xt=kn.x>=at.x&&Kn.x<=tt.x&&kn.y>=at.y&&Kn.y<=tt.y?[$t]:Kn.x<at.x||kn.x>tt.x||Kn.y<at.y||kn.y>tt.y?[]:a.ax([$t],at.x,at.y,tt.x,tt.y)}for(const kn of Xt){nt.reset(kn,.25*Ge);let Kn=0;Kn=nt.length<=.5*Ge?1:Math.ceil(nt.paddedLength/Et)+1;for(let wi=0;wi<Kn;wi++){const ni=wi/Math.max(Kn-1,1),Si=nt.lerp(ni),ai=Si.x+Fi,ii=Si.y+Fi;ve.push(ai,ii,Ge,0);const si=ai-Ge,gr=ii-Ge,Nn=ai+Ge,sr=ii+Ge;if(Te=Te&&this.isOffscreen(si,gr,Nn,sr),Be=Be||this.isInsideGrid(si,gr,Nn,sr),t!=="always"&&this.grid.hitTestCircle(ai,ii,Ge,t,B)&&(De=!0,!M))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!M&&De||!Be||ye<this.perspectiveRatioCutoff?[]:ve,offscreen:Te,collisionDetected:De}}projectPathToScreenSpace(t,o){const m=function(p,y){const S=a.L();return a.ap(S,y.pitchedLabelPlaneMatrix),p.map(I=>{const M=qn(I.x,I.y,S,y.getElevation),L=y.transform.projectTileCoordinates(M.point.x,M.point.y,y.unwrappedTileID,y.getElevation);return L.point.x=(.5*L.point.x+.5)*y.width,L.point.y=(.5*-L.point.y+.5)*y.height,L})}(t,o);return function(p){let y=0,S=0,I=0,M=0;for(let L=0;L<p.length;L++)p[L].isOccluded?(I=L+1,M=0):(M++,M>S&&(S=M,y=I));return p.slice(y,y+S)}(m)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[],m=new a.a1;for(const G of t){const N=new a.P(G.x+Fi,G.y+Fi);m.extend(N),o.push(N)}const{minX:p,minY:y,maxX:S,maxY:I}=m,M=this.grid.query(p,y,S,I).concat(this.ignoredGrid.query(p,y,S,I)),L={},B={};for(const G of M){const N=G.key;if(L[N.bucketInstanceId]===void 0&&(L[N.bucketInstanceId]={}),L[N.bucketInstanceId][N.featureIndex])continue;const W=[new a.P(G.x1,G.y1),new a.P(G.x2,G.y1),new a.P(G.x2,G.y2),new a.P(G.x1,G.y2)];a.ay(o,W)&&(L[N.bucketInstanceId][N.featureIndex]=!0,B[N.bucketInstanceId]===void 0&&(B[N.bucketInstanceId]=[]),B[N.bucketInstanceId].push(N.featureIndex))}return B}insertCollisionBox(t,o,m,p,y,S){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:y,collisionGroupID:S,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,m,p,y,S){const I=m?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:y,collisionGroupID:S,overlapMode:o};for(let L=0;L<t.length;L+=4)I.insertCircle(M,t[L],t[L+1],t[L+2])}projectAndGetPerspectiveRatio(t,o,m,p,y){if(y){let S;p?(S=[t,o,p(t,o),1],a.av(S,S,y)):(S=[t,o,0,1],Xs(S,S,y));const I=S[3];return{x:(S[0]/I+1)/2*this.transform.width+Fi,y:(-S[1]/I+1)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const S=this.transform.projectTileCoordinates(t,o,m,p);return{x:(S.point.x+1)/2*this.transform.width+Fi,y:(1-S.point.y)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5,isOccluded:S.isOccluded,signedDistanceFromCamera:S.signedDistanceFromCamera}}}getPerspectiveRatio(t,o,m,p){const y=this.transform.projectTileCoordinates(t,o,m,p);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(t,o,m,p){return m<Fi||t>=this.screenRightBoundary||p<Fi||o>this.screenBottomBoundary}isInsideGrid(t,o,m,p){return m>=0&&t<this.gridRightBoundary&&p>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=a.af([]);return a.M(t,t,[-100,-100,0]),t}_projectCollisionBox(t,o,m,p,y,S,I,M,L,B,G){let N=1,W=0,ee=0,ve=1;const ge=t.anchorPointX+I[0],ye=t.anchorPointY+I[1];if(S&&!y){const $t=this.projectAndGetPerspectiveRatio(ge+1,ye,p,L,G),Et=$t.x-M.x,Xt=Math.atan(($t.y-M.y)/Et)+(Et<0?Math.PI:0),kn=Math.sin(Xt),Kn=Math.cos(Xt);N=Kn,W=kn,ee=-kn,ve=Kn}else if(!S&&y){const $t=Qn(this.transform);N=$t.vecEast[0],W=$t.vecEast[1],ee=$t.vecSouth[0],ve=$t.vecSouth[1]}let we=M.x,Ae=M.y,ke=o;y&&(we=ge,Ae=ye,ke=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),ke*=this.transform.getPitchedTextCorrection(ge,ye,p),B||(ke*=a.ag(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(we+=N*B.x*ke+ee*B.y*ke,Ae+=W*B.x*ke+ve*B.y*ke);const De=t.x1*ke,Be=t.x2*ke,Te=(De+Be)/2,Ge=t.y1*ke,at=t.y2*ke,tt=(Ge+at)/2,nt=[{offsetX:De,offsetY:Ge},{offsetX:Te,offsetY:Ge},{offsetX:Be,offsetY:Ge},{offsetX:Be,offsetY:tt},{offsetX:Be,offsetY:at},{offsetX:Te,offsetY:at},{offsetX:De,offsetY:at},{offsetX:De,offsetY:tt}];let ot=[];for(const{offsetX:$t,offsetY:Et}of nt)ot.push(new a.P(we+N*$t+ee*Et,Ae+W*$t+ve*Et));let Nt=!1;if(y){const $t=ot.map(Et=>this.projectAndGetPerspectiveRatio(Et.x,Et.y,p,L,G));Nt=$t.some(Et=>!Et.isOccluded),ot=$t.map(Et=>new a.P(Et.x,Et.y))}else Nt=!0;return{box:a.az(ot),allPointsOccluded:!Nt}}}class Ll{constructor(t,o,m,p){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):p&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class ns{constructor(t,o,m,p,y){this.text=new Ll(t?t.text:null,o,m,y),this.icon=new Ll(t?t.icon:null,o,p,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zl{constructor(t,o,m){this.text=t,this.icon=o,this.skipFade=m}}class oa{constructor(t,o,m,p,y){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=m,this.bucketIndex=p,this.tileID=y}}class _i{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:m=>m.collisionGroupID===o}}return this.collisionGroups[t]}}function km(v,t,o,m,p){const{horizontalAlign:y,verticalAlign:S}=a.aG(v);return new a.P(-(y-.5)*t+m[0]*p,-(S-.5)*o+m[1]*p)}class Vl{constructor(t,o,m,p,y){this.transform=t.clone(),this.terrain=o,this.collisionIndex=new Rl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new _i(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const o=this.terrain;return o?(m,p)=>o.getElevation(t,m,p):null}getBucketParts(t,o,m,p){const y=m.getBucket(o),S=m.latestFeatureIndex;if(!y||!S||o.id!==y.layerIds[0])return;const I=m.collisionBoxArray,M=y.layers[0].layout,L=y.layers[0].paint,B=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),G=m.tileSize/a.$,N=m.tileID.toUnwrapped(),W=M.get("text-rotation-alignment")==="map",ee=a.aB(m,1,this.transform.zoom),ve=a.aC(this.collisionIndex.transform,m,L.get("text-translate"),L.get("text-translate-anchor")),ge=a.aC(this.collisionIndex.transform,m,L.get("icon-translate"),L.get("icon-translate-anchor")),ye=gn(W,this.transform,ee);this.retainedQueryData[y.bucketInstanceId]=new oa(y.bucketInstanceId,S,y.sourceLayerIndex,y.index,m.tileID);const we={bucket:y,layout:M,translationText:ve,translationIcon:ge,unwrappedTileID:N,pitchedLabelPlaneMatrix:ye,scale:B,textPixelRatio:G,holdingForFade:m.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:a.am(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(p)for(const Ae of y.sortKeyRanges){const{sortKey:ke,symbolInstanceStart:De,symbolInstanceEnd:Be}=Ae;t.push({sortKey:ke,symbolInstanceStart:De,symbolInstanceEnd:Be,parameters:we})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:we})}attemptAnchorPlacement(t,o,m,p,y,S,I,M,L,B,G,N,W,ee,ve,ge,ye,we,Ae,ke){const De=a.aD[t.textAnchor],Be=[t.textOffset0,t.textOffset1],Te=km(De,m,p,Be,y),Ge=this.collisionIndex.placeCollisionBox(o,N,M,L,B,I,S,ge,G.predicate,Ae,Te,ke);if((!we||this.collisionIndex.placeCollisionBox(we,N,M,L,B,I,S,ye,G.predicate,Ae,Te,ke).placeable)&&Ge.placeable){let at;if(this.prevPlacement&&this.prevPlacement.variableOffsets[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID].text&&(at=this.prevPlacement.variableOffsets[W.crossTileID].anchor),W.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[W.crossTileID]={textOffset:Be,width:m,height:p,anchor:De,textBoxScale:y,prevAnchor:at},this.markUsedJustification(ee,De,W,ve),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,ve,W),this.placedOrientations[W.crossTileID]=ve),{shift:Te,placedGlyphBoxes:Ge}}}placeLayerBucketPart(t,o,m){const{bucket:p,layout:y,translationText:S,translationIcon:I,unwrappedTileID:M,pitchedLabelPlaneMatrix:L,textPixelRatio:B,holdingForFade:G,collisionBoxArray:N,partiallyEvaluatedTextSize:W,collisionGroup:ee}=t.parameters,ve=y.get("text-optional"),ge=y.get("icon-optional"),ye=a.aE(y,"text-overlap","text-allow-overlap"),we=ye==="always",Ae=a.aE(y,"icon-overlap","icon-allow-overlap"),ke=Ae==="always",De=y.get("text-rotation-alignment")==="map",Be=y.get("text-pitch-alignment")==="map",Te=y.get("icon-text-fit")!=="none",Ge=y.get("symbol-z-order")==="viewport-y",at=we&&(ke||!p.hasIconData()||ge),tt=ke&&(we||!p.hasTextData()||ve);!p.collisionArrays&&N&&p.deserializeCollisionBoxes(N);const nt=this.retainedQueryData[p.bucketInstanceId].tileID,ot=this._getTerrainElevationFunc(nt),Nt=this.transform.getFastPathSimpleProjectionMatrix(nt),$t=(Et,Xt,kn)=>{var Kn,wi;if(o[Et.crossTileID])return;if(G)return void(this.placements[Et.crossTileID]=new zl(!1,!1,!1));let ni=!1,Si=!1,ai=!0,ii=null,si={box:null,placeable:!1,offscreen:null,occluded:!1},gr={placeable:!1},Nn=null,sr=null,vr=null,Ms=0,Ds=0,Rs=0;Xt.textFeatureIndex?Ms=Xt.textFeatureIndex:Et.useRuntimeCollisionCircles&&(Ms=Et.featureIndex),Xt.verticalTextFeatureIndex&&(Ds=Xt.verticalTextFeatureIndex);const Ka=Xt.textBox;if(Ka){const Yr=Bi=>{let hi=a.an.horizontal;if(p.allowVerticalPlacement&&!Bi&&this.prevPlacement){const jr=this.prevPlacement.placedOrientations[Et.crossTileID];jr&&(this.placedOrientations[Et.crossTileID]=jr,hi=jr,this.markUsedOrientation(p,hi,Et))}return hi},Ea=(Bi,hi)=>{if(p.allowVerticalPlacement&&Et.numVerticalGlyphVertices>0&&Xt.verticalTextBox){for(const jr of p.writingModes)if(jr===a.an.vertical?(si=hi(),gr=si):si=Bi(),si&&si.placeable)break}else si=Bi()},Ls=Et.textAnchorOffsetStartIndex,uo=Et.textAnchorOffsetEndIndex;if(uo===Ls){const Bi=(hi,jr)=>{const Xi=this.collisionIndex.placeCollisionBox(hi,ye,B,nt,M,Be,De,S,ee.predicate,ot,void 0,Nt);return Xi&&Xi.placeable&&(this.markUsedOrientation(p,jr,Et),this.placedOrientations[Et.crossTileID]=jr),Xi};Ea(()=>Bi(Ka,a.an.horizontal),()=>{const hi=Xt.verticalTextBox;return p.allowVerticalPlacement&&Et.numVerticalGlyphVertices>0&&hi?Bi(hi,a.an.vertical):{box:null,offscreen:null}}),Yr(si&&si.placeable)}else{let Bi=a.aD[(wi=(Kn=this.prevPlacement)===null||Kn===void 0?void 0:Kn.variableOffsets[Et.crossTileID])===null||wi===void 0?void 0:wi.anchor];const hi=(Xi,yp,Fv)=>{const qh=Xi.x2-Xi.x1,fu=Xi.y2-Xi.y1,sl=Et.textBoxScale,os=Te&&Ae==="never"?yp:null;let yr=null,ls=ye==="never"?1:2,Wh="never";Bi&&ls++;for(let zs=0;zs<ls;zs++){for(let Zh=Ls;Zh<uo;Zh++){const Kh=p.textAnchorOffsets.get(Zh);if(Bi&&Kh.textAnchor!==Bi)continue;const mu=this.attemptAnchorPlacement(Kh,Xi,qh,fu,sl,De,Be,B,nt,M,ee,Wh,Et,p,Fv,S,I,os,ot);if(mu&&(yr=mu.placedGlyphBoxes,yr&&yr.placeable))return ni=!0,ii=mu.shift,yr}Bi?Bi=null:Wh=ye}return m&&!yr&&(yr={box:this.collisionIndex.placeCollisionBox(Ka,"always",B,nt,M,Be,De,S,ee.predicate,ot,void 0,Nt).box,offscreen:!1,placeable:!1,occluded:!1}),yr};Ea(()=>hi(Ka,Xt.iconBox,a.an.horizontal),()=>{const Xi=Xt.verticalTextBox;return p.allowVerticalPlacement&&(!si||!si.placeable)&&Et.numVerticalGlyphVertices>0&&Xi?hi(Xi,Xt.verticalIconBox,a.an.vertical):{box:null,occluded:!0,offscreen:null}}),si&&(ni=si.placeable,ai=si.offscreen);const jr=Yr(si&&si.placeable);if(!ni&&this.prevPlacement){const Xi=this.prevPlacement.variableOffsets[Et.crossTileID];Xi&&(this.variableOffsets[Et.crossTileID]=Xi,this.markUsedJustification(p,Xi.anchor,Et,jr))}}}if(Nn=si,ni=Nn&&Nn.placeable,ai=Nn&&Nn.offscreen,Et.useRuntimeCollisionCircles){const Yr=p.text.placedSymbolArray.get(Et.centerJustifiedTextSymbolIndex),Ea=a.ao(p.textSizeData,W,Yr),Ls=y.get("text-padding");sr=this.collisionIndex.placeCollisionCircles(ye,Yr,p.lineVertexArray,p.glyphOffsetArray,Ea,M,L,m,Be,ee.predicate,Et.collisionCircleDiameter,Ls,S,ot),sr.circles.length&&sr.collisionDetected&&!m&&a.w("Collisions detected, but collision boxes are not shown"),ni=we||sr.circles.length>0&&!sr.collisionDetected,ai=ai&&sr.offscreen}if(Xt.iconFeatureIndex&&(Rs=Xt.iconFeatureIndex),Xt.iconBox){const Yr=Ea=>this.collisionIndex.placeCollisionBox(Ea,Ae,B,nt,M,Be,De,I,ee.predicate,ot,Te&&ii?ii:void 0,Nt);gr&&gr.placeable&&Xt.verticalIconBox?(vr=Yr(Xt.verticalIconBox),Si=vr.placeable):(vr=Yr(Xt.iconBox),Si=vr.placeable),ai=ai&&vr.offscreen}const du=ve||Et.numHorizontalGlyphVertices===0&&Et.numVerticalGlyphVertices===0,hu=ge||Et.numIconVertices===0;du||hu?hu?du||(Si=Si&&ni):ni=Si&&ni:Si=ni=Si&&ni;const al=Si&&vr.placeable;if(ni&&Nn.placeable&&this.collisionIndex.insertCollisionBox(Nn.box,ye,y.get("text-ignore-placement"),p.bucketInstanceId,gr&&gr.placeable&&Ds?Ds:Ms,ee.ID),al&&this.collisionIndex.insertCollisionBox(vr.box,Ae,y.get("icon-ignore-placement"),p.bucketInstanceId,Rs,ee.ID),sr&&ni&&this.collisionIndex.insertCollisionCircles(sr.circles,ye,y.get("text-ignore-placement"),p.bucketInstanceId,Ms,ee.ID),m&&this.storeCollisionData(p.bucketInstanceId,kn,Xt,Nn,vr,sr),Et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Et.crossTileID]=new zl((ni||at)&&!(Nn!=null&&Nn.occluded),(Si||tt)&&!(vr!=null&&vr.occluded),ai||p.justReloaded),o[Et.crossTileID]=!0};if(Ge){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Et=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Xt=Et.length-1;Xt>=0;--Xt){const kn=Et[Xt];$t(p.symbolInstances.get(kn),p.collisionArrays[kn],kn)}}else for(let Et=t.symbolInstanceStart;Et<t.symbolInstanceEnd;Et++)$t(p.symbolInstances.get(Et),p.collisionArrays[Et],Et);p.justReloaded=!1}storeCollisionData(t,o,m,p,y,S){if(m.textBox||m.iconBox){let I,M;this.collisionBoxArrays.has(t)?I=this.collisionBoxArrays.get(t):(I=new Map,this.collisionBoxArrays.set(t,I)),I.has(o)?M=I.get(o):(M={text:null,icon:null},I.set(o,M)),m.textBox&&(M.text=p.box),m.iconBox&&(M.icon=y.box)}if(S){let I=this.collisionCircleArrays[t];I===void 0&&(I=this.collisionCircleArrays[t]=[]);for(let M=0;M<S.circles.length;M+=4)I.push(S.circles[M+0]-Fi),I.push(S.circles[M+1]-Fi),I.push(S.circles[M+2]),I.push(S.collisionDetected?1:0)}}markUsedJustification(t,o,m,p){let y;y=p===a.an.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[a.aF(o)];const S=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const I of S)I>=0&&(t.text.placedSymbolArray.get(I).crossTileID=y>=0&&I!==y?0:m.crossTileID)}markUsedOrientation(t,o,m){const p=o===a.an.horizontal||o===a.an.horizontalOnly?o:0,y=o===a.an.vertical?o:0,S=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const I of S)t.text.placedSymbolArray.get(I).placedOrientation=p;m.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let m=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const p=o?o.symbolFadeChange(t):1,y=o?o.opacities:{},S=o?o.variableOffsets:{},I=o?o.placedOrientations:{};for(const M in this.placements){const L=this.placements[M],B=y[M];B?(this.opacities[M]=new ns(B,p,L.text,L.icon),m=m||L.text!==B.text.placed||L.icon!==B.icon.placed):(this.opacities[M]=new ns(null,p,L.text,L.icon,L.skipFade),m=m||L.text||L.icon)}for(const M in y){const L=y[M];if(!this.opacities[M]){const B=new ns(L,p,!1,!1);B.isHidden()||(this.opacities[M]=B,m=m||L.text.placed||L.icon.placed)}}for(const M in S)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=S[M]);for(const M in I)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=I[M]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const m={};for(const p of o){const y=p.getBucket(t);y&&p.latestFeatureIndex&&t.id===y.layerIds[0]&&this.updateBucketOpacities(y,p.tileID,m,p.collisionBoxArray)}}updateBucketOpacities(t,o,m,p){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const y=t.layers[0],S=y.layout,I=new ns(null,0,!1,!1,!0),M=S.get("text-allow-overlap"),L=S.get("icon-allow-overlap"),B=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=S.get("text-rotation-alignment")==="map",N=S.get("text-pitch-alignment")==="map",W=S.get("icon-text-fit")!=="none",ee=new ns(null,0,M&&(L||!t.hasIconData()||S.get("icon-optional")),L&&(M||!t.hasTextData()||S.get("text-optional")),!0);!t.collisionArrays&&p&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(p);const ve=(ye,we,Ae)=>{for(let ke=0;ke<we/4;ke++)ye.opacityVertexArray.emplaceBack(Ae);ye.hasVisibleVertices=ye.hasVisibleVertices||Ae!==Bl},ge=this.collisionBoxArrays.get(t.bucketInstanceId);for(let ye=0;ye<t.symbolInstances.length;ye++){const we=t.symbolInstances.get(ye),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:ke,crossTileID:De}=we;let Be=this.opacities[De];m[De]?Be=I:Be||(Be=ee,this.opacities[De]=Be),m[De]=!0;const Te=we.numIconVertices>0,Ge=this.placedOrientations[we.crossTileID],at=Ge===a.an.vertical,tt=Ge===a.an.horizontal||Ge===a.an.horizontalOnly;if(Ae>0||ke>0){const ot=Em(Be.text);ve(t.text,Ae,at?Bl:ot),ve(t.text,ke,tt?Bl:ot);const Nt=Be.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(Xt=>{Xt>=0&&(t.text.placedSymbolArray.get(Xt).hidden=Nt||at?1:0)}),we.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=Nt||tt?1:0);const $t=this.variableOffsets[we.crossTileID];$t&&this.markUsedJustification(t,$t.anchor,we,Ge);const Et=this.placedOrientations[we.crossTileID];Et&&(this.markUsedJustification(t,"left",we,Et),this.markUsedOrientation(t,Et,we))}if(Te){const ot=Em(Be.icon),Nt=!(W&&we.verticalPlacedIconSymbolIndex&&at);we.placedIconSymbolIndex>=0&&(ve(t.icon,we.numIconVertices,Nt?ot:Bl),t.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Be.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(ve(t.icon,we.numVerticalIconVertices,Nt?Bl:ot),t.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Be.icon.isHidden())}const nt=ge&&ge.has(ye)?ge.get(ye):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const ot=t.collisionArrays[ye];if(ot){let Nt=new a.P(0,0);if(ot.textBox||ot.verticalTextBox){let $t=!0;if(B){const Et=this.variableOffsets[De];Et?(Nt=km(Et.anchor,Et.width,Et.height,Et.textOffset,Et.textBoxScale),G&&Nt._rotate(N?-this.transform.bearingInRadians:this.transform.bearingInRadians)):$t=!1}if(ot.textBox||ot.verticalTextBox){let Et;ot.textBox&&(Et=at),ot.verticalTextBox&&(Et=tt),cc(t.textCollisionBox.collisionVertexArray,Be.text.placed,!$t||Et,nt.text,Nt.x,Nt.y)}}if(ot.iconBox||ot.verticalIconBox){const $t=!!(!tt&&ot.verticalIconBox);let Et;ot.iconBox&&(Et=$t),ot.verticalIconBox&&(Et=!$t),cc(t.iconCollisionBox.collisionVertexArray,Be.icon.placed,Et,nt.icon,W?Nt.x:0,W?Nt.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const m=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*m>t}setStale(){this.stale=!0}}function cc(v,t,o,m,p,y){m&&m.length!==0||(m=[0,0,0,0]);const S=m[0]-Fi,I=m[1]-Fi,M=m[2]-Fi,L=m[3]-Fi;v.emplaceBack(t?1:0,o?1:0,p||0,y||0,S,I),v.emplaceBack(t?1:0,o?1:0,p||0,y||0,M,I),v.emplaceBack(t?1:0,o?1:0,p||0,y||0,M,L),v.emplaceBack(t?1:0,o?1:0,p||0,y||0,S,L)}const Js=Math.pow(2,25),Cs=Math.pow(2,24),Tm=Math.pow(2,17),Pm=Math.pow(2,16),Im=Math.pow(2,9),Ro=Math.pow(2,8),Am=Math.pow(2,1);function Em(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const t=v.placed?1:0,o=Math.floor(127*v.opacity);return o*Js+t*Cs+o*Tm+t*Pm+o*Im+t*Ro+o*Am+t}const Bl=0;class fv{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,m,p,y){const S=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(S,p,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((I,M)=>I.sortKey-M.sortKey));this._currentPartIndex<S.length;)if(o.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,y())return!0;return!1}}class Mm{constructor(t,o,m,p,y,S,I,M){this.placement=new Vl(t,o,S,I,M),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(t,o,m){const p=A.now(),y=()=>!this._forceFullPlacement&&A.now()-p>2;for(;this._currentPlacementIndex>=0;){const S=o[t[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=I)&&(!S.maxzoom||S.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new fv(S)),this._inProgressLayer.continuePlacement(m[S.source],this.placement,this._showCollisionBoxes,S,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Lo=512/a.$/2;class th{constructor(t,o,m){this.tileID=t,this.bucketInstanceId=m,this._symbolsByKey={};const p=new Map;for(let y=0;y<o.length;y++){const S=o.get(y),I=S.key,M=p.get(I);M?M.push(S):p.set(I,[S])}for(const[y,S]of p){const I={positions:S.map(M=>({x:Math.floor(M.anchorX*Lo),y:Math.floor(M.anchorY*Lo)})),crossTileIDs:S.map(M=>M.crossTileID)};if(I.positions.length>128){const M=new a.aH(I.positions.length,16,Uint16Array);for(const{x:L,y:B}of I.positions)M.add(L,B);M.finish(),delete I.positions,I.index=M}this._symbolsByKey[y]=I}}getScaledCoordinates(t,o){const{x:m,y:p,z:y}=this.tileID.canonical,{x:S,y:I,z:M}=o.canonical,L=Lo/Math.pow(2,M-y),B=(I*a.$+t.anchorY)*L,G=p*a.$*Lo;return{x:Math.floor((S*a.$+t.anchorX)*L-m*a.$*Lo),y:Math.floor(B-G)}}findMatches(t,o,m){const p=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let y=0;y<t.length;y++){const S=t.get(y);if(S.crossTileID)continue;const I=this._symbolsByKey[S.key];if(!I)continue;const M=this.getScaledCoordinates(S,o);if(I.index){const L=I.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(const B of L){const G=I.crossTileIDs[B];if(!m[G]){m[G]=!0,S.crossTileID=G;break}}}else if(I.positions)for(let L=0;L<I.positions.length;L++){const B=I.positions[L],G=I.crossTileIDs[L];if(Math.abs(B.x-M.x)<=p&&Math.abs(B.y-M.y)<=p&&!m[G]){m[G]=!0,S.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class nh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Dm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const m in this.indexes){const p=this.indexes[m],y={};for(const S in p){const I=p[S];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+o),y[I.tileID.key]=I}this.indexes[m]=y}this.lng=t}addBucket(t,o,m){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let y=0;y<o.symbolInstances.length;y++)o.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const p=this.usedCrossTileIDs[t.overscaledZ];for(const y in this.indexes){const S=this.indexes[y];if(Number(y)>t.overscaledZ)for(const I in S){const M=S[I];M.tileID.isChildOf(t)&&M.findMatches(o.symbolInstances,t,p)}else{const I=S[t.scaledTo(Number(y)).key];I&&I.findMatches(o.symbolInstances,t,p)}}for(let y=0;y<o.symbolInstances.length;y++){const S=o.symbolInstances.get(y);S.crossTileID||(S.crossTileID=m.generate(),p[S.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new th(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const m of o.getCrossTileIDsLists())for(const p of m)delete this.usedCrossTileIDs[t][p]}removeStaleBuckets(t){let o=!1;for(const m in this.indexes){const p=this.indexes[m];for(const y in p)t[p[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,p[y]),delete p[y],o=!0)}return o}}class dc{constructor(){this.layerIndexes={},this.crossTileIDs=new nh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,m){let p=this.layerIndexes[t.id];p===void 0&&(p=this.layerIndexes[t.id]=new Dm);let y=!1;const S={};p.handleWrapJump(m);for(const I of o){const M=I.getBucket(t);M&&t.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(I.tileID,M,this.crossTileIDs)&&(y=!0),S[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(S)&&(y=!0),y}pruneUnusedLayers(t){const o={};t.forEach(m=>{o[m]=!0});for(const m in this.layerIndexes)o[m]||delete this.layerIndexes[m]}}var hc="void main() {fragColor=vec4(1.0);}";const Ga={prelude:Ln(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ln("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ln("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ln(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ln(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ln(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ln(hc,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ln(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ln(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ln("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ln("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ln(hc,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ln(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ln(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ln(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ln(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ln(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ln(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ln(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ln(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ln(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ln(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ln(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ln("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ln("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ln("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ln("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ln(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ln("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ln(v,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=t.match(/in ([\w]+) ([\w]+)/g),p=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=y?y.concat(p):p,I={};return{fragmentSource:v=v.replace(o,(M,L,B,G,N)=>(I[N]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${N}
in ${B} ${G} ${N};
#else
uniform ${B} ${G} u_${N};
#endif
`:`
#ifdef HAS_UNIFORM_u_${N}
    ${B} ${G} ${N} = u_${N};
#endif
`)),vertexSource:t=t.replace(o,(M,L,B,G,N)=>{const W=G==="float"?"vec2":"vec4",ee=N.match(/color/)?"color":W;return I[N]?L==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${B} ${W} a_${N};
out ${B} ${G} ${N};
#else
uniform ${B} ${G} u_${N};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = a_${N};
#else
    ${B} ${G} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = unpack_mix_${ee}(a_${N}, u_${N}_t);
#else
    ${B} ${G} ${N} = u_${N};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
in ${B} ${W} a_${N};
#else
uniform ${B} ${G} u_${N};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${B} ${G} ${N} = a_${N};
#else
    ${B} ${G} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${B} ${G} ${N} = unpack_mix_${ee}(a_${N}, u_${N}_t);
#else
    ${B} ${G} ${N} = u_${N};
#endif
`}),staticAttributes:m,staticUniforms:S}}class is{constructor(t,o,m){this.vertexBuffer=t,this.indexBuffer=o,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var rs=a.aI([{name:"a_pos",type:"Int16",components:2}]);const Qs="#define PROJECTION_MERCATOR",ih="mercator";class rh{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ih}get shaderDefine(){return Qs}get shaderPreludeCode(){return Ga.projectionMercator}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,o,m,p,y){if(this._cachedMesh)return this._cachedMesh;const S=new a.aK;S.emplaceBack(0,0),S.emplaceBack(a.$,0),S.emplaceBack(0,a.$),S.emplaceBack(a.$,a.$);const I=t.createVertexBuffer(S,rs.members),M=a.aL.simpleSegment(0,0,4,2),L=new a.aM;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3);const B=t.createIndexBuffer(L);return this._cachedMesh=new is(I,B,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class _a{constructor(t=0,o=0,m=0,p=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(m)||m<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=m,this.right=p}interpolate(t,o,m){return o.top!=null&&t.top!=null&&(this.top=a.C.number(t.top,o.top,m)),o.bottom!=null&&t.bottom!=null&&(this.bottom=a.C.number(t.bottom,o.bottom,m)),o.left!=null&&t.left!=null&&(this.left=a.C.number(t.left,o.left,m)),o.right!=null&&t.right!=null&&(this.right=a.C.number(t.right,o.right,m)),this}getCenter(t,o){const m=a.ag((this.left+t-this.right)/2,0,t),p=a.ag((this.top+o-this.bottom)/2,0,o);return new a.P(m,p)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new _a(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function as(v,t){if(!v.renderWorldCopies||v.lngRange)return;const o=t.lng-v.center.lng;t.lng+=o>180?-360:o<-180?360:0}function zn(v){return Math.max(0,Math.floor(v))}class Ol{constructor(t,o,m,p,y,S){this._callbacks=t,this._tileSize=512,this._renderWorldCopies=S===void 0||!!S,this._minZoom=o||0,this._maxZoom=m||22,this._minPitch=p??0,this._maxPitch=y??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=zn(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new _a,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,o,m){this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=zn(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new _a(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!m&&t.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const o=a.aN(t,-180,180)*Math.PI/180;var m,p,y,S,I,M,L,B,G;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=C(),m=this._rotationMatrix,y=-this._bearingInRadians,S=(p=this._rotationMatrix)[0],I=p[1],M=p[2],L=p[3],B=Math.sin(y),G=Math.cos(y),m[0]=S*G+M*B,m[1]=I*G+L*B,m[2]=S*-B+M*G,m[3]=I*-B+L*G)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const o=a.ag(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const o=t/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aO(this._fovInRadians)}setFov(t){t=a.ag(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=a.ad(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const o=this.getConstrained(this._center,t).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=a.ae(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,o){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,m){this._unmodified=!1,this._edgeInsets.interpolate(t,o,m),this._constrain(),this._calcMatrices()}resize(t,o,m=!0){this._width=t,this._height=o,m&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new ue([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.ah])}getConstrained(t,o){return this._callbacks.getConstrained(t,o)}getCameraQueryGeometry(t,o){if(o.length===1)return[o[0],t];{const{minX:m,minY:p,maxX:y,maxY:S}=a.a1.fromPoints(o).extend(t);return[new a.P(m,p),new a.P(y,p),new a.P(y,S),new a.P(m,S),new a.P(m,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:o,zoom:m}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(m),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=a.af(new Float64Array(16));a.N(t,t,[this._width/2,-this._height/2,1]),a.M(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=a.af(new Float64Array(16)),a.N(t,t,[1,-1,1]),a.M(t,t,[-1,-1,0]),a.N(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,o,m,p){const y=m!==void 0?m:this.bearing,S=p=p!==void 0?p:this.pitch,I=a.a0.fromLngLat(t,o),M=-Math.cos(a.ad(S)),L=Math.sin(a.ad(S)),B=L*Math.sin(a.ad(y)),G=-L*Math.cos(a.ad(y));let N=this.elevation;const W=o-N;let ee;M*W>=0||Math.abs(M)<.1?(ee=1e4,N=o+ee*M):ee=-W/M;let ve,ge,ye=a.aP(1,I.y),we=0;do{if(we+=1,we>10)break;ge=ee/ye,ve=new a.a0(I.x+B*ge,I.y+G*ge),ye=1/ve.meterInMercatorCoordinateUnits()}while(Math.abs(ee-ge*ye)>1e-12);return{center:ve.toLngLat(),elevation:N,zoom:a.aj(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const o=a.ai(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/o,p=a.a0.fromLngLat(this.center,this.elevation),y=Ce(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=t;const S=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),a.aP(y.z,p.y),this.bearing,this.pitch);this._elevation=S.elevation,this._center=S.center,this.setZoom(S.zoom)}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=a.ai(1,this.center.lat)*this.worldSize;return Ce(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const o=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/o,t.canonical.y/o,1/o/a.$,1/o/a.$]}}class fc{constructor(t,o){this.min=t,this.max=o,this.center=a.aQ([],a.aR([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],m=a.aS(this.min),p=a.aS(this.max);for(let y=0;y<o.length;y++)m[y]=o[y]?this.min[y]:this.center[y],p[y]=o[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new fc(m,p)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let o=!0;for(let m=0;m<t.planes.length;m++){const p=this.intersectsPlane(t.planes[m]);if(p===0)return 0;p===1&&(o=!1)}return o?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let o=t[3],m=t[3];for(let p=0;p<3;p++)t[p]>0?(o+=t[p]*this.min[p],m+=t[p]*this.max[p]):(m+=t[p]*this.min[p],o+=t[p]*this.max[p]);return o>=0?2:m<0?0:1}}class ah{distanceToTile2d(t,o,m,p){const y=p.distanceX([t,o]),S=p.distanceY([t,o]);return Math.hypot(y,S)}getWrap(t,o,m){return m}getTileBoundingVolume(t,o,m,p){var y,S;let I=m,M=m;if(p!=null&&p.terrain){const B=new a.Z(t.z,o,t.z,t.x,t.y),G=p.terrain.getMinMaxElevation(B);I=(y=G.minElevation)!==null&&y!==void 0?y:m,M=(S=G.maxElevation)!==null&&S!==void 0?S:m}const L=1<<t.z;return new fc([o+t.x/L,t.y/L,I],[o+(t.x+1)/L,(t.y+1)/L,M])}allowVariableZoom(t,o){const m=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,p=a.ag(78.5-m/2,0,60);return!!o.terrain||t.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class Pr{constructor(t,o,m){this.points=t,this.planes=o,this.aabb=m}static fromInvProjectionMatrix(t,o=1,m=0,p,y){const S=y?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,m),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(N=>function(W,ee,ve,ge){const ye=a.av([],W,ee),we=1/ye[3]/ve*ge;return a.aX(ye,ye,[we,we,1/ye[3],we])}(N,t,o,I));p&&function(N,W,ee,ve){const ge=ve?4:0,ye=ve?0:4;let we=0;const Ae=[],ke=[];for(let Te=0;Te<4;Te++){const Ge=a.aT([],N[Te+ye],N[Te+ge]),at=a.aY(Ge);a.aQ(Ge,Ge,1/at),Ae.push(at),ke.push(Ge)}for(let Te=0;Te<4;Te++){const Ge=a.aZ(N[Te+ge],ke[Te],ee);we=Ge!==null&&Ge>=0?Math.max(we,Ge):Math.max(we,Ae[Te])}const De=function(Te,Ge){const at=a.aT([],Te[Ge[0]],Te[Ge[1]]),tt=a.aT([],Te[Ge[2]],Te[Ge[1]]),nt=[0,0,0,0];return a.aU(nt,a.aV([],at,tt)),nt[3]=-a.aW(nt,Te[Ge[0]]),nt}(N,W),Be=function(Te,Ge){const at=a.a_(Te),tt=a.a$([],Te,1/at),nt=a.aT([],Ge,a.aQ([],tt,a.aW(Ge,tt))),ot=a.a_(nt);if(ot>0){const Nt=Math.sqrt(1-tt[3]*tt[3]),$t=a.aQ([],tt,-tt[3]),Et=a.aR([],$t,a.aQ([],nt,Nt/ot));return a.b0(Ge,Et)}return null}(ee,De);if(Be!==null){const Te=Be/a.aW(ke[0],De);we=Math.min(we,Te)}for(let Te=0;Te<4;Te++){const Ge=Math.min(we,Ae[Te]);N[Te+ye]=[N[Te+ge][0]+ke[Te][0]*Ge,N[Te+ge][1]+ke[Te][1]*Ge,N[Te+ge][2]+ke[Te][2]*Ge,1]}}(M,S[0],p,y);const L=S.map(N=>{const W=a.aT([],M[N[0]],M[N[1]]),ee=a.aT([],M[N[2]],M[N[1]]),ve=a.aU([],a.aV([],W,ee)),ge=-a.aW(ve,M[N[1]]);return ve.concat(ge)}),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],G=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const N of M)for(let W=0;W<3;W++)B[W]=Math.min(B[W],N[W]),G[W]=Math.max(G[W],N[W]);return new Pr(M,L,new fc(B,G))}}class Gi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,o){}constructor(t,o,m,p,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ol({calcMatrices:()=>{this._calcMatrices()},getConstrained:(S,I)=>this.getConstrained(S,I)},t,o,m,p,y),this._coveringTilesDetailsProvider=new ah}clone(){const t=new Gi;return t.apply(this),t}apply(t,o,m){this._helper.apply(t,o,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const o=[new a.b1(0,t)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),S=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),I=Math.floor(Math.min(m.x,p.x,y.x,S.x)),M=Math.floor(Math.max(m.x,p.x,y.x,S.x)),L=1;for(let B=I-L;B<=M+L;B++)B!==0&&o.push(new a.b1(B,t))}return o}getCameraFrustum(){return Pr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const o=this.screenPointToLocation(this.centerPoint,t),m=t?t.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(t,o){const m=a.ai(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(o,m),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),S=a.a0.fromLngLat(t),I=new a.a0(S.x-(p.x-y.x),S.y-(p.y-y.y));this.setCenter(I==null?void 0:I.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,o){return o?this.coordinatePoint(a.a0.fromLngLat(t),o.getElevationForLngLatZoom(t,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a0.fromLngLat(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,o){const m=o||0,p=[t.x,t.y,0,1],y=[t.x,t.y,1,1];a.av(p,p,this._pixelMatrixInverse),a.av(y,y,this._pixelMatrixInverse);const S=p[3],I=y[3],M=p[1]/S,L=y[1]/I,B=p[2]/S,G=y[2]/I,N=B===G?0:(m-B)/(G-B);return new a.a0(a.C.number(p[0]/S,y[0]/I,N)/this.worldSize,a.C.number(M,L,N)/this.worldSize,m)}coordinatePoint(t,o=0,m=this._pixelMatrix){const p=[t.x*this.worldSize,t.y*this.worldSize,o,1];return a.av(p,p,m),new a.P(p[0]/p[3],p[1]/p[3])}getBounds(){const t=Math.max(0,this._helper._height/2-le(this));return new ue().extend(this.screenPointToLocation(new a.P(0,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(t,o){return o?o.pointCoordinate(t)!=null:t.y>this.height/2-le(this)}calculatePosMatrix(t,o=!1,m){var p;const y=(p=t.key)!==null&&p!==void 0?p:a.b2(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),S=o?this._alignedPosMatrixCache:this._posMatrixCache;if(S.has(y)){const L=S.get(y);return m?L.f32:L.f64}const I=fe(t,this.worldSize);a.O(I,o?this._alignedProjMatrix:this._viewProjMatrix,I);const M={f64:I,f32:new Float32Array(I)};return S.set(y,M),m?M.f32:M.f64}calculateFogMatrix(t){const o=t.key,m=this._fogMatrixCacheF32;if(m.has(o))return m.get(o);const p=fe(t,this.worldSize);return a.O(p,this._fogMatrix,p),m.set(o,new Float32Array(p)),m.get(o)}getConstrained(t,o){o=a.ag(+o,this.minZoom,this.maxZoom);const m={center:new a.S(t.lng,t.lat),zoom:o};let p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);const y=this.tileSize*a.ae(m.zoom);let S=0,I=y,M=0,L=y,B=0,G=0;const{x:N,y:W}=this.size;if(this._helper._latRange){const Ae=this._helper._latRange;S=a.U(Ae[1])*y,I=a.U(Ae[0])*y,I-S<W&&(B=W/(I-S))}p&&(M=a.aN(a.V(p[0])*y,0,y),L=a.aN(a.V(p[1])*y,0,y),L<M&&(L+=y),L-M<N&&(G=N/(L-M)));const{x:ee,y:ve}=He(y,t);let ge,ye;const we=Math.max(G||0,B||0);if(we){const Ae=new a.P(G?(L+M)/2:ee,B?(I+S)/2:ve);return m.center=se(y,Ae).wrap(),m.zoom+=a.aj(we),m}if(this._helper._latRange){const Ae=W/2;ve-Ae<S&&(ye=S+Ae),ve+Ae>I&&(ye=I-Ae)}if(p){const Ae=(M+L)/2;let ke=ee;this._helper._renderWorldCopies&&(ke=a.aN(ee,Ae-y/2,Ae+y/2));const De=N/2;ke-De<M&&(ge=M+De),ke+De>L&&(ge=L-De)}if(ge!==void 0||ye!==void 0){const Ae=new a.P(ge??ee,ye??ve);m.center=se(y,Ae).wrap()}return m}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}_calculateNearFarZIfNeeded(t,o,m){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=t-p*this._helper._pixelPerMeter/Math.cos(o),S=p<0?y:t,I=Math.PI/2+this.pitchInRadians,M=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+m.y/this.height),L=Math.sin(M)*S/Math.sin(a.ag(Math.PI-I-M,.01,Math.PI-.01)),B=le(this),G=Math.atan(B/this._helper.cameraToCenterDistance),N=a.ad(.75),W=G>N?2*G*(.5+m.y/(2*B)):N,ee=Math.sin(W)*S/Math.sin(a.ag(Math.PI-I-W,.01,Math.PI-.01)),ve=Math.min(L,ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*ve+S),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,o=He(this.worldSize,this.center),m=o.x,p=o.y;this._helper._pixelPerMeter=a.ai(1,this.center.lat)*this.worldSize;const y=a.ad(Math.min(this.pitch,Ui)),S=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y));let I;this._calculateNearFarZIfNeeded(S,y,t),I=new Float64Array(16),a.b3(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ap(this._invProjMatrix,I),I[8]=2*-t.x/this._helper._width,I[9]=2*t.y/this._helper._height,this._projectionMatrix=a.b4(I),a.N(I,I,[1,-1,1]),a.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),a.b5(I,I,-this.rollInRadians),a.b6(I,I,this.pitchInRadians),a.b5(I,I,-this.bearingInRadians),a.M(I,I,[-m,-p,0]),this._mercatorMatrix=a.N([],I,[this.worldSize,this.worldSize,this.worldSize]),a.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),a.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=a.ap([],I);const M=[0,0,-1,1];a.av(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),a.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,S,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-m,-p,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const L=this._helper._width%2/2,B=this._helper._height%2/2,G=Math.cos(this.bearingInRadians),N=Math.sin(-this.bearingInRadians),W=m-Math.round(m)+G*L+N*B,ee=p-Math.round(p)+G*B+N*L,ve=new Float64Array(I);if(a.M(ve,ve,[W>.5?W-1:W,ee>.5?ee-1:ee,0]),this._alignedProjMatrix=ve,I=a.ap(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new a.P(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.av(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=a.ai(1,this.center.lat)*this.worldSize;return Ce(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,o){const m=a.a0.fromLngLat(t),p=[m.x*this.worldSize,m.y*this.worldSize,o,1];return a.av(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(t){const{overscaledTileID:o,aligned:m,applyTerrainMatrix:p}=t,y=this._helper.getMercatorTileCoordinates(o),S=o?this.calculatePosMatrix(o,m,!0):null;let I;return I=o&&o.terrainRttPosMatrix32f&&p?o.terrainRttPosMatrix32f:S||a.b7(),{mainMatrix:I,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,o,m){return 1}transformLightDirection(t){return a.aS(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,o,m,p){const y=this.calculatePosMatrix(m);let S;p?(S=[t,o,p(t,o),1],a.av(S,S,y)):(S=[t,o,0,1],Xs(S,S,y));const I=S[3];return{point:new a.P(S[0]/I,S[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(t){for(const o of t)this.calculatePosMatrix(o)}getMatrixForModel(t,o){const m=a.a0.fromLngLat(t,o),p=m.meterInMercatorCoordinateUnits(),y=a.b8();return a.M(y,y,[m.x,m.y,m.z]),a.b5(y,y,Math.PI),a.b6(y,y,Math.PI/2),a.N(y,y,[-p,p,p]),y}getProjectionDataForCustomLayer(t=!0){const o=new a.Z(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:t}),p=fe(o,this.worldSize);a.O(p,this._viewProjMatrix,p),m.tileMercatorCoords=[0,0,1,1];const y=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],S=a.b9();return a.N(S,p,y),m.fallbackMatrix=S,m.mainMatrix=S,m}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Ir(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function rr(v){if(v.useSlerp)if(v.k<1){const t=a.ba(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),o=a.ba(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),m=new Float64Array(4);a.bb(m,t,o,v.k);const p=a.bc(m);v.tr.setRoll(p.roll),v.tr.setPitch(p.pitch),v.tr.setBearing(p.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(a.C.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(a.C.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(a.C.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function bi(v,t,o,m,p){const y=p.padding,S=He(p.worldSize,o.getNorthWest()),I=He(p.worldSize,o.getNorthEast()),M=He(p.worldSize,o.getSouthEast()),L=He(p.worldSize,o.getSouthWest()),B=a.ad(-m),G=S.rotate(B),N=I.rotate(B),W=M.rotate(B),ee=L.rotate(B),ve=new a.P(Math.max(G.x,N.x,ee.x,W.x),Math.max(G.y,N.y,ee.y,W.y)),ge=new a.P(Math.min(G.x,N.x,ee.x,W.x),Math.min(G.y,N.y,ee.y,W.y)),ye=ve.sub(ge),we=(p.width-(y.left+y.right+t.left+t.right))/ye.x,Ae=(p.height-(y.top+y.bottom+t.top+t.bottom))/ye.y;if(Ae<0||we<0)return void Ir();const ke=Math.min(a.aj(p.scale*Math.min(we,Ae)),v.maxZoom),De=a.P.convert(v.offset),Be=new a.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(a.ad(m)),Te=De.add(Be).mult(p.scale/a.ae(ke));return{center:se(p.worldSize,S.add(M).div(2).sub(Te)),zoom:ke,bearing:m}}class mc{get useGlobeControls(){return!1}handlePanInertia(t,o){return{easingOffset:t,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(t,o){t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta),t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta)}handleMapControlsPan(t,o,m){t.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(m,t.around)}cameraForBoxAndBearing(t,o,m,p,y){return bi(t,o,m,p,y)}handleJumpToCenterZoom(t,o){t.zoom!==(o.zoom!==void 0?+o.zoom:t.zoom)&&t.setZoom(+o.zoom),o.center!==void 0&&t.setCenter(a.S.convert(o.center))}handleEaseTo(t,o){const m=t.zoom,p=t.padding,y={roll:t.roll,pitch:t.pitch,bearing:t.bearing},S={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},I=o.zoom!==void 0,M=!t.isPaddingEqual(o.padding);let L=!1;const B=I?+o.zoom:t.zoom;let G=t.centerPoint.add(o.offsetAsPoint);const N=t.screenPointToLocation(G),{center:W,zoom:ee}=t.getConstrained(a.S.convert(o.center||N),B??m);as(t,W);const ve=He(t.worldSize,N),ge=He(t.worldSize,W).sub(ve),ye=a.ae(ee-m);return L=ee!==m,{easeFunc:we=>{if(L&&t.setZoom(a.C.number(m,ee,we)),a.bd(y,S)||rr({startEulerAngles:y,endEulerAngles:S,tr:t,k:we,useSlerp:y.roll!=S.roll}),M&&(t.interpolatePadding(p,o.padding,we),G=t.centerPoint.add(o.offsetAsPoint)),o.around)t.setLocationAtPoint(o.around,o.aroundPoint);else{const Ae=a.ae(t.zoom-m),ke=ee>m?Math.min(2,ye):Math.max(.5,ye),De=Math.pow(ke,1-we),Be=se(t.worldSize,ve.add(ge.mult(we*De)).mult(Ae));t.setLocationAtPoint(t.renderWorldCopies?Be.wrap():Be,G)}},isZooming:L,elevationCenter:W}}handleFlyTo(t,o){const m=o.zoom!==void 0,p=t.zoom,y=t.getConstrained(a.S.convert(o.center||o.locationAtOffset),m?+o.zoom:p),S=y.center,I=y.zoom;as(t,S);const M=He(t.worldSize,o.locationAtOffset),L=He(t.worldSize,S).sub(M),B=L.mag(),G=a.ae(I-p);let N;if(o.minZoom!==void 0){const W=Math.min(+o.minZoom,p,I),ee=t.getConstrained(S,W).zoom;N=a.ae(ee-p)}return{easeFunc:(W,ee,ve,ge)=>{t.setZoom(W===1?I:p+a.aj(ee));const ye=W===1?S:se(t.worldSize,M.add(L.mult(ve)).mult(ee));t.setLocationAtPoint(t.renderWorldCopies?ye.wrap():ye,ge)},scaleOfZoom:G,targetCenter:S,scaleOfMinZoom:N,pixelPathLength:B}}}class jn{constructor(t,o,m){this.blendFunction=t,this.blendColor=o,this.mask=m}}jn.Replace=[1,0],jn.disabled=new jn(jn.Replace,a.be.transparent,[!1,!1,!1,!1]),jn.unblended=new jn(jn.Replace,a.be.transparent,[!0,!0,!0,!0]),jn.alphaBlended=new jn([1,771],a.be.transparent,[!0,!0,!0,!0]);const Wr=2305;class wn{constructor(t,o,m){this.enable=t,this.mode=o,this.frontFace=m}}wn.disabled=new wn(!1,1029,Wr),wn.backCCW=new wn(!0,1029,Wr),wn.frontCCW=new wn(!0,1028,Wr);class Cn{constructor(t,o,m){this.func=t,this.mask=o,this.range=m}}Cn.ReadOnly=!1,Cn.ReadWrite=!0,Cn.disabled=new Cn(519,Cn.ReadOnly,[0,1]);const eo=7680;class mn{constructor(t,o,m,p,y,S){this.test=t,this.ref=o,this.mask=m,this.fail=p,this.depthFail=y,this.pass=S}}mn.disabled=new mn({func:519,mask:0},0,0,eo,eo,eo);const to=new WeakMap;function Br(v){var t;if(to.has(v))return to.get(v);{const o=(t=v.getParameter(v.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return to.set(v,o),o}}class zo{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const o=t.context,m=o.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const p=new a.aK;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const y=new a.aM;y.emplaceBack(0,1,2),this._fullscreenTriangle=new is(o.createVertexBuffer(p,rs.members),o.createIndexBuffer(y),a.aL.simpleSegment(0,0,p.length,y.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(m.TEXTURE1);const S=m.createTexture();m.bindTexture(m.TEXTURE_2D,S),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(S),Br(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,o){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,o=t.gl;t.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,o){const m=this._cachedRenderContext.context,p=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:a.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,p.TRIANGLES,Cn.disabled,mn.disabled,jn.unblended,wn.disabled,((y,S)=>({u_input:y,u_output_expected:S}))(t,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Br(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const y=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Br(t)){const o=t.clientWaitSync(this._readbackQueue.sync,0,0);if(o===t.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=zo._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let o=0;return o+=t[0]/256,o+=t[1]/65536,o+=t[2]/16777216,t[3]<127&&(o=-o),o/128}}const ba=a.$/128;function sh(v,t){const o=v.granularity!==void 0?Math.max(v.granularity,1):1,m=o+(v.generateBorders?2:0),p=o+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),y=m+1,S=p+1,I=v.generateBorders?-1:0,M=v.generateBorders||v.extendToNorthPole?-1:0,L=o+(v.generateBorders?1:0),B=o+(v.generateBorders||v.extendToSouthPole?1:0),G=y*S,N=m*p*6,W=y*S>65536;if(W&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ee=W||t==="32bit",ve=new Int16Array(2*G);let ge=0;for(let Ae=M;Ae<=B;Ae++)for(let ke=I;ke<=L;ke++){let De=ke/o*a.$;ke===-1&&(De=-64),ke===o+1&&(De=a.$+ba);let Be=Ae/o*a.$;Ae===-1&&(Be=v.extendToNorthPole?a.bg:-64),Ae===o+1&&(Be=v.extendToSouthPole?a.bh:a.$+ba),ve[ge++]=De,ve[ge++]=Be}const ye=ee?new Uint32Array(N):new Uint16Array(N);let we=0;for(let Ae=0;Ae<p;Ae++)for(let ke=0;ke<m;ke++){const De=ke+1+Ae*y,Be=ke+(Ae+1)*y,Te=ke+1+(Ae+1)*y;ye[we++]=ke+Ae*y,ye[we++]=Be,ye[we++]=De,ye[we++]=De,ye[we++]=Be,ye[we++]=Te}return{vertices:ve.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:ee}}const Ha=new a.aJ({fill:new a.bi(128,2),line:new a.bi(512,0),tile:new a.bi(128,32),stencil:new a.bi(128,1),circle:3});class Rm{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ga.projectionGlobe}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return Ha}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new zo(t));const o=a.U(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(o,m),y=A.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=y);const S=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bk(S))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,o,m,p,y){const S=(y==="stencil"?Ha.stencil:Ha.tile).getGranularityForZoomLevel(o.z);return this._getMesh(t,{granularity:S,generateBorders:m,extendToNorthPole:o.y===0&&p,extendToSouthPole:o.y===(1<<o.z)-1&&p})}_getMesh(t,o){const m=this._getMeshKey(o);if(m in this._tileMeshCache)return this._tileMeshCache[m];const p=function(y,S){const I=sh(S,"16bit"),M=a.aK.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),L=a.aM.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new is(y.createVertexBuffer(M,rs.members),y.createIndexBuffer(L),a.aL.simpleSegment(0,0,M.length,L.length))}(t,o);return this._tileMeshCache[m]=p,p}recalculate(t){}hasTransition(){const t=A.now();let o=!1;return o=o||(t-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const Lm=new a.r({type:new a.D(a.v.projection.type)});class Fl extends a.E{constructor(t){super(),this._transitionable=new a.t(Lm),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new rh,this._verticalPerspectiveProjection=new Rm}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof a.bl){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,o,m,p,y){return this.currentProjection.getMeshFromTileID(t,o,m,p,y)}setProjection(t){this._transitionable.setValue("type",(t==null?void 0:t.type)||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function $l(v){const t=Vo(v.worldSize,v.center.lat);return 2*Math.PI*t}function Pa(v,t,o,m,p){const y=1/(1<<p),S=t/a.$*y+m*y,I=a.bn((v/a.$*y+o*y)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI,L=Math.cos(M),B=new Float64Array(3);return B[0]=Math.sin(I)*L,B[1]=Math.sin(M),B[2]=Math.cos(I)*L,B}function ar(v){return function(t,o){const m=Math.cos(o),p=new Float64Array(3);return p[0]=Math.sin(t)*m,p[1]=Math.sin(o),p[2]=Math.cos(t)*m,p}(v.lng*Math.PI/180,v.lat*Math.PI/180)}function Vo(v,t){return v/(2*Math.PI)/Math.cos(t*Math.PI/180)}function jl(v){const t=Math.asin(v[1])/Math.PI*180,o=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(o>1e-6){const m=v[0]/o,p=Math.acos(v[2]/o),y=(m>0?p:-p)/Math.PI*180;return new a.S(a.aN(y,-180,180),t)}return new a.S(0,t)}function Bo(v){return Math.cos(v*Math.PI/180)}function Hi(v,t){const o=Bo(v),m=Bo(t);return a.aj(m/o)}function Nl(v,t){const o=v.rotate(t.bearingInRadians),m=t.zoom+Hi(t.center.lat,0),p=a.bj(1/Bo(t.center.lat),1/Bo(Math.min(Math.abs(t.center.lat),60)),a.bm(m,7,3,0,1)),y=360/$l({worldSize:t.worldSize,center:{lat:t.center.lat}});return new a.S(t.center.lng-o.x*y*p,a.ag(t.center.lat+o.y*y,-85.051129,a.ah))}function Oo(v){const t=.5*v,o=Math.sin(t),m=Math.cos(t);return Math.log(o+m)-Math.log(m-o)}function Fo(v,t,o,m){const p=v.lat+o*m;if(Math.abs(o)>1){const y=(Math.sign(v.lat+o)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,S=Math.abs(v.lat+o)*Math.PI/180,I=Oo(y+m*(S-y)),M=Oo(y),L=Oo(S);return new a.S(v.lng+t*((I-M)/(L-M)),p)}return new a.S(v.lng+t*m,p)}class mv{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,o,m,p){const y=`${t.z}_${t.x}_${t.y}_${p!=null&&p.terrain?"t":""}`,S=this._cache.get(y);if(S)return S;const I=this._cachePrevious.get(y);if(I)return this._cache.set(y,I),I;const M=this._boundingVolumeFactory(t,o,m,p);return this._cache.set(y,M),this._hadAnyChanges=!0,M}}class ks{constructor(t,o,m,p){this.min=m,this.max=p,this.points=t,this.planes=o}static fromAabb(t,o){const m=[];for(let p=0;p<8;p++)m.push([1&~p?t[0]:o[0],(p>>1&1)==1?o[1]:t[1],(p>>2&1)==1?o[2]:t[2]]);return new ks(m,[[-1,0,0,o[0]],[1,0,0,-t[0]],[0,-1,0,o[1]],[0,1,0,-t[1]],[0,0,-1,o[2]],[0,0,1,-t[2]]],t,o)}static fromCenterSizeAngles(t,o,m){const p=a.bq([],m[0],m[1],m[2]),y=a.br([],[o[0],0,0],p),S=a.br([],[0,o[1],0],p),I=a.br([],[0,0,o[2]],p),M=[...t],L=[...t];for(let G=0;G<8;G++)for(let N=0;N<3;N++){const W=t[N]+y[N]*(1&~G?-1:1)+S[N]*((G>>1&1)==1?1:-1)+I[N]*((G>>2&1)==1?1:-1);M[N]=Math.min(M[N],W),L[N]=Math.max(L[N],W)}const B=[];for(let G=0;G<8;G++){const N=[...t];a.aR(N,N,a.aQ([],y,1&~G?-1:1)),a.aR(N,N,a.aQ([],S,(G>>1&1)==1?1:-1)),a.aR(N,N,a.aQ([],I,(G>>2&1)==1?1:-1)),B.push(N)}return new ks(B,[[...y,-a.aW(y,B[0])],[...S,-a.aW(S,B[0])],[...I,-a.aW(I,B[0])],[-y[0],-y[1],-y[2],-a.aW(y,B[7])],[-S[0],-S[1],-S[2],-a.aW(S,B[7])],[-I[0],-I[1],-I[2],-a.aW(I,B[7])]],M,L)}intersectsFrustum(t){let o=!0;const m=this.points.length,p=this.planes.length,y=t.planes.length,S=t.points.length;for(let I=0;I<y;I++){const M=t.planes[I];let L=0;for(let B=0;B<m;B++){const G=this.points[B];M[0]*G[0]+M[1]*G[1]+M[2]*G[2]+M[3]>=0&&L++}if(L===0)return 0;L<m&&(o=!1)}if(o)return 2;for(let I=0;I<p;I++){const M=this.planes[I];let L=0;for(let B=0;B<S;B++){const G=t.points[B];M[0]*G[0]+M[1]*G[1]+M[2]*G[2]+M[3]>=0&&L++}if(L===0)return 0}return 1}intersectsPlane(t){const o=this.points.length;let m=0;for(let p=0;p<o;p++){const y=this.points[p];t[0]*y[0]+t[1]*y[1]+t[2]*y[2]+t[3]>=0&&m++}return m===o?2:m===0?0:1}}function Ul(v,t,o){const m=v-t;return m<0?-m:Math.max(0,m-o)}function oh(v,t,o,m,p){const y=v-o;let S;return S=y<0?Math.min(-y,1+y-p):y>1?Math.min(Math.max(y-p,0),1-y):0,Math.max(S,Ul(t,m,p))}class pv{constructor(){this._boundingVolumeCache=new mv(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,o,m,p){const y=1<<m.z,S=1/y,I=m.x/y,M=m.y/y;let L=2;return L=Math.min(L,oh(t,o,I,M,S)),L=Math.min(L,oh(t,o,I+.5,-M-S,S)),L=Math.min(L,oh(t,o,I+.5,2-M-S,S)),L}getWrap(t,o,m){const p=1<<o.z,y=1/p,S=o.x/p,I=Ul(t.x,S,y),M=Ul(t.x,S-1,y),L=Ul(t.x,S+1,y),B=Math.min(I,M,L);return B===L?1:B===M?-1:0}allowVariableZoom(t,o){return bt(t,o)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,o,m,p){return this._boundingVolumeCache.getTileBoundingVolume(t,o,m,p)}_computeTileBoundingVolume(t,o,m,p){var y,S;let I=m,M=m;if(p!=null&&p.terrain){const L=new a.Z(t.z,o,t.z,t.x,t.y),B=p.terrain.getMinMaxElevation(L);I=(y=B.minElevation)!==null&&y!==void 0?y:m,M=(S=B.maxElevation)!==null&&S!==void 0?S:m}if(I/=a.bt,M/=a.bt,I+=1,M+=1,t.z<=0)return ks.fromAabb([-M,-M,-M],[M,M,M]);if(t.z===1)return ks.fromAabb([t.x===0?-M:0,t.y===0?0:-M,-M],[t.x===0?0:M,t.y===0?M:0,M]);{const L=[Pa(0,0,t.x,t.y,t.z),Pa(a.$,0,t.x,t.y,t.z),Pa(a.$,a.$,t.x,t.y,t.z),Pa(0,a.$,t.x,t.y,t.z)],B=[];for(const nt of L)B.push(a.aQ([],nt,M));if(M!==I)for(const nt of L)B.push(a.aQ([],nt,I));t.y===0&&B.push([0,1,0]),t.y===(1<<t.z)-1&&B.push([0,-1,0]);const G=[1,1,1],N=[-1,-1,-1];for(const nt of B)for(let ot=0;ot<3;ot++)G[ot]=Math.min(G[ot],nt[ot]),N[ot]=Math.max(N[ot],nt[ot]);const W=Pa(a.$/2,a.$/2,t.x,t.y,t.z),ee=a.aV([],[0,1,0],W);a.aU(ee,ee);const ve=a.aV([],W,ee);a.aU(ve,ve);const ge=a.aV([],L[2],L[1]);a.aU(ge,ge);const ye=a.aV([],L[0],L[3]);a.aU(ye,ye),B.push(a.aQ([],W,M)),t.y>=(1<<t.z)/2&&B.push(a.aQ([],Pa(a.$/2,0,t.x,t.y,t.z),M)),t.y<(1<<t.z)/2&&B.push(a.aQ([],Pa(a.$/2,a.$,t.x,t.y,t.z),M));const we=Or(W,B),Ae=Or(ve,B),ke=[-W[0],-W[1],-W[2],we.max],De=[W[0],W[1],W[2],-we.min],Be=[-ve[0],-ve[1],-ve[2],Ae.max],Te=[ve[0],ve[1],ve[2],-Ae.min],Ge=[...ge,0],at=[...ye,0],tt=[];return t.y===0?tt.push(a.bs(at,Ge,ke),a.bs(at,Ge,De)):tt.push(a.bs(Be,Ge,ke),a.bs(Be,Ge,De),a.bs(Be,at,ke),a.bs(Be,at,De)),t.y===(1<<t.z)-1?tt.push(a.bs(at,Ge,ke),a.bs(at,Ge,De)):tt.push(a.bs(Te,Ge,ke),a.bs(Te,Ge,De),a.bs(Te,at,ke),a.bs(Te,at,De)),new ks(tt,[ke,De,Be,Te,Ge,at],G,N)}}}function Or(v,t){let o=1/0,m=-1/0;for(const p of t){const y=a.aW(v,p);o=Math.min(o,y),m=Math.max(m,y)}return{min:o,max:m}}class $o{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o){this._helper.resize(t,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(){this._cachedClippingPlane=a.bu(),this._projectionMatrix=a.b8(),this._globeViewProjMatrix32f=a.b7(),this._globeViewProjMatrixNoCorrection=a.b8(),this._globeViewProjMatrixNoCorrectionInverted=a.b8(),this._globeProjMatrixInverted=a.b8(),this._cameraPosition=a.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ol({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,o)=>this.getConstrained(t,o)}),this._coveringTilesDetailsProvider=new pv}clone(){const t=new $o;return t.apply(this),t}apply(t,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=a.bo();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:o,applyGlobeMatrix:m}=t,p=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const o=this.pitchInRadians,m=this.cameraToCenterDistance/t,p=Math.sin(o)*m,y=Math.cos(o)*m+1,S=1/Math.sqrt(p*p+y*y)*1;let I=-p,M=y;const L=Math.sqrt(I*I+M*M);I/=L,M/=L;const B=[0,I,M];a.bv(B,B,[0,0,0],-this.bearingInRadians),a.bw(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),a.bx(B,B,[0,0,0],this.center.lng*Math.PI/180);const G=1/a.aY(B);return a.aQ(B,B,G),[...B,-S*G]}isLocationOccluded(t){return!this.isSurfacePointVisible(ar(t))}transformLightDirection(t){const o=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,p=Math.cos(m),y=[Math.sin(o)*p,Math.sin(m),Math.cos(o)*p],S=[y[2],0,-y[0]],I=[0,0,0];a.aV(I,S,y),a.aU(S,S),a.aU(I,I);const M=[0,0,0];return a.aU(M,[S[0]*t[0]+I[0]*t[1]+y[0]*t[2],S[1]*t[0]+I[1]*t[1]+y[1]*t[2],S[2]*t[0]+I[2]*t[1]+y[2]*t[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,o,m){const p=function(I,M,L){const B=1/(1<<L.z);return new a.a0(I/a.$*B+L.x*B,M/a.$*B+L.y*B)}(t,o,m.canonical),y=(S=p.y,[a.bn(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI]);var S;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(t,o,m,p){const y=m.canonical,S=Pa(t,o,y.x,y.y,y.z),I=1+(p?p(t,o):0)/a.bt,M=[S[0]*I,S[1]*I,S[2]*I,1];a.av(M,M,this._globeViewProjMatrixNoCorrection);const L=this._cachedClippingPlane,B=L[0]*S[0]+L[1]*S[1]+L[2]*S[2]+L[3]<0;return{point:new a.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=Vo(this.worldSize,this.center.lat),o=a.b9(),m=a.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),a.b3(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;o[8]=2*-p.x/this._helper._width,o[9]=2*p.y/this._helper._height,this._projectionMatrix=a.b4(o),this._globeProjMatrixInverted=a.b9(),a.ap(this._globeProjMatrixInverted,o),a.M(o,o,[0,0,-this.cameraToCenterDistance]),a.b5(o,o,this.rollInRadians),a.b6(o,o,-this.pitchInRadians),a.b5(o,o,this.bearingInRadians),a.M(o,o,[0,0,-t]);const y=a.bo();y[0]=t,y[1]=t,y[2]=t,a.b6(m,o,this.center.lat*Math.PI/180),a.by(m,m,-this.center.lng*Math.PI/180),a.N(m,m,y),this._globeViewProjMatrixNoCorrection=m,a.b6(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.by(o,o,-this.center.lng*Math.PI/180),a.N(o,o,y),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),a.ap(this._globeViewProjMatrixNoCorrectionInverted,m);const S=a.bo();this._cameraPosition=a.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/t,a.bv(this._cameraPosition,this._cameraPosition,S,-this.rollInRadians),a.bw(this._cameraPosition,this._cameraPosition,S,this.pitchInRadians),a.bv(this._cameraPosition,this._cameraPosition,S,-this.bearingInRadians),a.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bw(this._cameraPosition,this._cameraPosition,S,-this.center.lat*Math.PI/180),a.bx(this._cameraPosition,this._cameraPosition,S,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const I=a.b4(this._globeViewProjMatrixNoCorrectionInverted);a.N(I,I,[1,1,-1]),this._cachedFrustum=Pr.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){a.w("calculateFogMatrix is not supported on globe projection.");const o=a.b9();return a.af(o),o}getVisibleUnwrappedCoordinates(t){return[new a.b1(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=ar(t);a.aQ(m,m,1+o/a.bt);const p=a.bu();return a.av(p,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(t){}getBounds(){const t=.5*this.width,o=.5*this.height,m=[new a.P(0,0),new a.P(t,0),new a.P(this.width,0),new a.P(this.width,o),new a.P(this.width,this.height),new a.P(t,this.height),new a.P(0,this.height),new a.P(0,o)],p=[];for(const G of m)p.push(this.unprojectScreenPoint(G));let y=0,S=0,I=0,M=0;const L=this.center;for(const G of p){const N=a.bz(L.lng,G.lng),W=a.bz(L.lat,G.lat);N<S&&(S=N),N>y&&(y=N),W<M&&(M=W),W>I&&(I=W)}const B=[L.lng+S,L.lat+M,L.lng+y,L.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new ue(B)}getConstrained(t,o){const m=a.ag(t.lat,-85.051129,a.ah),p=a.ag(+o,this.minZoom+Hi(0,m),this.maxZoom);return{center:new a.S(t.lng,m),zoom:p}}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}setLocationAtPoint(t,o){const m=ar(this.unprojectScreenPoint(o)),p=ar(t),y=a.bo();a.bA(y);const S=a.bo();a.bx(S,m,y,-this.center.lng*Math.PI/180),a.bw(S,S,y,this.center.lat*Math.PI/180);const I=p[0]*p[0]+p[2]*p[2],M=S[0]*S[0];if(I<M)return;const L=Math.sqrt(I-M),B=-L,G=a.bB(p[0],p[2],S[0],L),N=a.bB(p[0],p[2],S[0],B),W=a.bo();a.bx(W,p,y,-G);const ee=a.bB(W[1],W[2],S[1],S[2]),ve=a.bo();a.bx(ve,p,y,-N);const ge=a.bB(ve[1],ve[2],S[1],S[2]),ye=.5*Math.PI,we=ee>=-ye&&ee<=ye,Ae=ge>=-ye&&ge<=ye;let ke,De;if(we&&Ae){const at=this.center.lng*Math.PI/180,tt=this.center.lat*Math.PI/180;a.bC(G,at)+a.bC(ee,tt)<a.bC(N,at)+a.bC(ge,tt)?(ke=G,De=ee):(ke=N,De=ge)}else if(we)ke=G,De=ee;else{if(!Ae)return;ke=N,De=ge}const Be=ke/Math.PI*180,Te=De/Math.PI*180,Ge=this.center.lat;this.setCenter(new a.S(Be,a.ag(Te,-90,90))),this.setZoom(this.zoom+Hi(Ge,this.center.lat))}locationToScreenPoint(t,o){const m=ar(t);if(o){const p=o.getElevationForLngLatZoom(t,this._helper._tileZoom);a.aQ(m,m,1+p/a.bt)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(t){const o=a.bu();return a.av(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new a.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m)return m}return a.a0.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(t,o){const m=this._cameraPosition,p=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(m,p)}getRayDirectionFromPixel(t){const o=a.bu();o[0]=t.x/this.width*2-1,o[1]=-1*(t.y/this.height*2-1),o[2]=1,o[3]=1,a.av(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const m=a.bo();m[0]=o[0]-this._cameraPosition[0],m[1]=o[1]-this._cameraPosition[1],m[2]=o[2]-this._cameraPosition[2];const p=a.bo();return a.aU(p,m),p}isSurfacePointVisible(t){const o=this._cachedClippingPlane;return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const o=a.bu();return a.av(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(t,o){const m=a.aW(t,o),p=a.bo(),y=a.bo();a.aQ(y,o,m),a.aT(p,t,y);const S=1-a.aW(p,p);if(S<0)return null;const I=a.aW(t,t)-1,M=-m+(m<0?1:-1)*Math.sqrt(S),L=I/M,B=M;return{tMin:Math.min(L,B),tMax:Math.max(L,B)}}unprojectScreenPoint(t){const o=this._cameraPosition,m=this.getRayDirectionFromPixel(t),p=this.rayPlanetIntersection(o,m);if(p){const B=a.bo();a.aR(B,o,[m[0]*p.tMin,m[1]*p.tMin,m[2]*p.tMin]);const G=a.bo();return a.aU(G,B),jl(G)}const y=this._cachedClippingPlane,S=y[0]*m[0]+y[1]*m[1]+y[2]*m[2],I=-a.b0(y,o)/S,M=a.bo();if(I>0)a.aR(M,o,[m[0]*I,m[1]*I,m[2]*I]);else{const B=a.bo();a.aR(B,o,[2*m[0],2*m[1],2*m[2]]);const G=a.b0(this._cachedClippingPlane,B);a.aT(M,B,[this._cachedClippingPlane[0]*G,this._cachedClippingPlane[1]*G,this._cachedClippingPlane[2]*G])}const L=function(B){const G=a.bo();return G[0]=B[0]*-B[3],G[1]=B[1]*-B[3],G[2]=B[2]*-B[3],{center:G,radius:Math.sqrt(1-B[3]*B[3])}}(y);return jl(function(B,G,N){const W=a.bo();a.aT(W,N,B);const ee=a.bo();return a.bp(ee,B,W,G/a.a_(W)),ee}(L.center,L.radius,M))}getMatrixForModel(t,o){const m=a.S.convert(t),p=1/a.bt,y=a.b8();return a.by(y,y,m.lng/180*Math.PI),a.b6(y,y,-m.lat/180*Math.PI),a.M(y,y,[0,0,1+o/a.bt]),a.b6(y,y,.5*Math.PI),a.N(y,y,[p,p,p]),y}getProjectionDataForCustomLayer(t=!0){const o=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:t});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(t){}}class la{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,o){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ol({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,o)=>this.getConstrained(t,o)}),this._globeness=1,this._mercatorTransform=new Gi,this._verticalPerspectiveTransform=new $o}clone(){const t=new la;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const o=this._mercatorTransform.getProjectionData(t),m=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:o.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return a.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,o,m){const p=this._mercatorTransform.getPitchedTextCorrection(t,o,m),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,o,m);return a.bj(p,y,this._globeness)}projectTileCoordinates(t,o,m,p){return this.currentTransform.projectTileCoordinates(t,o,m,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){return this.currentTransform.lngLatToCameraDepth(t,o)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}getConstrained(t,o){return this.currentTransform.getConstrained(t,o)}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}setLocationAtPoint(t,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,o){return this.currentTransform.locationToScreenPoint(t,o)}screenPointToMercatorCoordinate(t,o){return this.currentTransform.screenPointToMercatorCoordinate(t,o)}screenPointToLocation(t,o){return this.currentTransform.screenPointToLocation(t,o)}isPointOnMapSurface(t,o){return this.currentTransform.isPointOnMapSurface(t,o)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,o){return this.currentTransform.getMatrixForModel(t,o)}getProjectionDataForCustomLayer(t=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return o;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return m.fallbackMatrix=o.mainMatrix,m}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Zr{get useGlobeControls(){return!0}handlePanInertia(t,o){const m=Nl(t,o);return Math.abs(m.lng-o.center.lng)>180&&(m.lng=o.center.lng+179.5*Math.sign(m.lng-o.center.lng)),{easingCenter:m,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,o){const m=t.around,p=o.screenPointToLocation(m);t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta);const y=o.zoom;t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta);const S=o.zoom-y;if(S===0)return;const I=a.bz(o.center.lng,p.lng),M=I/(Math.abs(I/180)+1),L=a.bz(o.center.lat,p.lat),B=o.getRayDirectionFromPixel(m),G=o.cameraPosition,N=-1*a.aW(G,B),W=a.bo();a.aR(W,G,[B[0]*N,B[1]*N,B[2]*N]);const ee=a.aY(W)-1,ve=Math.exp(.5*-Math.max(ee-.3,0)),ge=Vo(o.worldSize,o.center.lat)/Math.min(o.width,o.height),ye=a.bm(ge,.9,.5,1,.25),we=(1-a.ae(-S))*Math.min(ve,ye),Ae=o.center.lat,ke=o.zoom,De=new a.S(o.center.lng+M*we,a.ag(o.center.lat+L*we,-85.051129,a.ah));o.setLocationAtPoint(p,m);const Be=o.center,Te=a.bm(Math.abs(I),45,85,0,1),Ge=a.bm(ge,.75,.35,0,1),at=Math.pow(Math.max(Te,Ge),.25),tt=a.bz(Be.lng,De.lng),nt=a.bz(Be.lat,De.lat);o.setCenter(new a.S(Be.lng+tt*at,Be.lat+nt*at).wrap()),o.setZoom(ke+Hi(Ae,o.center.lat))}handleMapControlsPan(t,o,m){if(!t.panDelta)return;const p=o.center.lat,y=o.zoom;o.setCenter(Nl(t.panDelta,o).wrap()),o.setZoom(y+Hi(p,o.center.lat))}cameraForBoxAndBearing(t,o,m,p,y){const S=bi(t,o,m,p,y),I=o.left/y.width*2-1,M=(y.width-o.right)/y.width*2-1,L=o.top/y.height*-2+1,B=(y.height-o.bottom)/y.height*-2+1,G=a.bz(m.getWest(),m.getEast())<0,N=G?m.getEast():m.getWest(),W=G?m.getWest():m.getEast(),ee=Math.max(m.getNorth(),m.getSouth()),ve=Math.min(m.getNorth(),m.getSouth()),ge=N+.5*a.bz(N,W),ye=ee+.5*a.bz(ee,ve),we=y.clone();we.setCenter(S.center),we.setBearing(S.bearing),we.setPitch(0),we.setRoll(0),we.setZoom(S.zoom);const Ae=we.modelViewProjectionMatrix,ke=[ar(m.getNorthWest()),ar(m.getNorthEast()),ar(m.getSouthWest()),ar(m.getSouthEast()),ar(new a.S(W,ye)),ar(new a.S(N,ye)),ar(new a.S(ge,ee)),ar(new a.S(ge,ve))],De=ar(S.center);let Be=Number.POSITIVE_INFINITY;for(const Te of ke)I<0&&(Be=Zr.getLesserNonNegativeNonNull(Be,Zr.solveVectorScale(Te,De,Ae,"x",I))),M>0&&(Be=Zr.getLesserNonNegativeNonNull(Be,Zr.solveVectorScale(Te,De,Ae,"x",M))),L>0&&(Be=Zr.getLesserNonNegativeNonNull(Be,Zr.solveVectorScale(Te,De,Ae,"y",L))),B<0&&(Be=Zr.getLesserNonNegativeNonNull(Be,Zr.solveVectorScale(Te,De,Ae,"y",B)));if(Number.isFinite(Be)&&Be!==0)return S.zoom=we.zoom+a.aj(Be),S;Ir()}handleJumpToCenterZoom(t,o){const m=t.center.lat,p=t.getConstrained(o.center?a.S.convert(o.center):t.center,t.zoom).center;t.setCenter(p.wrap());const y=o.zoom!==void 0?+o.zoom:t.zoom+Hi(m,p.lat);t.zoom!==y&&t.setZoom(y)}handleEaseTo(t,o){const m=t.zoom,p=t.center,y=t.padding,S={roll:t.roll,pitch:t.pitch,bearing:t.bearing},I={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},M=o.zoom!==void 0,L=!t.isPaddingEqual(o.padding);let B=!1;const G=o.center?a.S.convert(o.center):p,N=t.getConstrained(G,m).center;as(t,N);const W=t.clone();W.setCenter(N),W.setZoom(M?+o.zoom:m+Hi(p.lat,G.lat)),W.setBearing(o.bearing);const ee=new a.P(a.ag(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),a.ag(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));W.setLocationAtPoint(N,ee);const ve=(o.offset&&o.offsetAsPoint.mag())>0?W.center:N,ge=M?+o.zoom:m+Hi(p.lat,ve.lat),ye=m+Hi(p.lat,0),we=ge+Hi(ve.lat,0),Ae=a.bz(p.lng,ve.lng),ke=a.bz(p.lat,ve.lat),De=a.ae(we-ye);return B=ge!==m,{easeFunc:Be=>{if(a.bd(S,I)||rr({startEulerAngles:S,endEulerAngles:I,tr:t,k:Be,useSlerp:S.roll!=I.roll}),L&&t.interpolatePadding(y,o.padding,Be),o.around)a.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(o.around,o.aroundPoint);else{const Te=we>ye?Math.min(2,De):Math.max(.5,De),Ge=Math.pow(Te,1-Be),at=Fo(p,Ae,ke,Be*Ge);t.setCenter(at.wrap())}if(B){const Te=a.C.number(ye,we,Be)+Hi(0,t.center.lat);t.setZoom(Te)}},isZooming:B,elevationCenter:ve}}handleFlyTo(t,o){const m=o.zoom!==void 0,p=t.center,y=t.zoom,S=t.padding,I=!t.isPaddingEqual(o.padding),M=t.getConstrained(a.S.convert(o.center||o.locationAtOffset),y).center,L=m?+o.zoom:t.zoom+Hi(t.center.lat,M.lat),B=t.clone();B.setCenter(M),B.setZoom(L),B.setBearing(o.bearing);const G=new a.P(a.ag(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),a.ag(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));B.setLocationAtPoint(M,G);const N=B.center;as(t,N);const W=function(ke,De,Be){const Te=ar(De),Ge=ar(Be),at=a.aW(Te,Ge),tt=Math.acos(at),nt=$l(ke);return tt/(2*Math.PI)*nt}(t,p,N),ee=y+Hi(p.lat,0),ve=L+Hi(N.lat,0),ge=a.ae(ve-ee);let ye;if(typeof o.minZoom=="number"){const ke=+o.minZoom+Hi(N.lat,0),De=Math.min(ke,ee,ve)+Hi(0,N.lat),Be=t.getConstrained(N,De).zoom+Hi(N.lat,0);ye=a.ae(Be-ee)}const we=a.bz(p.lng,N.lng),Ae=a.bz(p.lat,N.lat);return{easeFunc:(ke,De,Be,Te)=>{const Ge=Fo(p,we,Ae,Be);I&&t.interpolatePadding(S,o.padding,ke);const at=ke===1?N:Ge;t.setCenter(at.wrap());const tt=ee+a.aj(De);t.setZoom(ke===1?L:tt+Hi(0,at.lat))},scaleOfZoom:ge,targetCenter:N,scaleOfMinZoom:ye,pixelPathLength:W}}static solveVectorScale(t,o,m,p,y){const S=p==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],I=[m[3],m[7],m[11],m[15]],M=t[0]*S[0]+t[1]*S[1]+t[2]*S[2],L=t[0]*I[0]+t[1]*I[1]+t[2]*I[2],B=o[0]*S[0]+o[1]*S[1]+o[2]*S[2],G=o[0]*I[0]+o[1]*I[1]+o[2]*I[2];return B+y*L===M+y*G||I[3]*(M-B)+S[3]*(G-L)+M*G==B*L?null:(B+S[3]-y*G-y*I[3])/(B-M-y*G+y*L)}static getLesserNonNegativeNonNull(t,o){return o!==null&&o>=0&&o<t?o:t}}class lh{constructor(t){this._globe=t,this._mercatorCameraHelper=new mc,this._verticalPerspectiveCameraHelper=new Zr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,o){return this.currentHelper.handlePanInertia(t,o)}handleMapControlsRollPitchBearingZoom(t,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,o)}handleMapControlsPan(t,o,m){this.currentHelper.handleMapControlsPan(t,o,m)}cameraForBoxAndBearing(t,o,m,p,y){return this.currentHelper.cameraForBoxAndBearing(t,o,m,p,y)}handleJumpToCenterZoom(t,o){this.currentHelper.handleJumpToCenterZoom(t,o)}handleEaseTo(t,o){return this.currentHelper.handleEaseTo(t,o)}handleFlyTo(t,o){return this.currentHelper.handleFlyTo(t,o)}}const Gl=(v,t)=>a.y(v,t&&t.filter(o=>o.identifier!=="source.canvas")),jo=a.bD();class uh extends a.E{constructor(t,o={}){super(),this._rtlPluginLoaded=()=>{for(const m in this.sourceCaches){const p=this.sourceCaches[m].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[m].reload()}},this.map=t,this.dispatcher=new xt(Tt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(m,p)=>this.getGlyphs(m,p)),this.dispatcher.registerMessageHandler("GI",(m,p)=>this.getImages(m,p)),this.imageManager=new he,this.imageManager.setEventedParent(this),this.glyphManager=new be(t._requestManager,o.localIdeographFontFamily),this.lineAtlas=new ft(256,512),this.crossTileSymbolIndex=new dc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bF()),En().on(en,this._rtlPluginLoaded),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const p=this.sourceCaches[m.sourceId];if(!p)return;const y=p.getSource();if(y&&y.vectorLayerIds)for(const S in this._layers){const I=this._layers[S];I.source===y.id&&this._validateLayer(I)}})}setGlobalStateProperty(t,o){var m,p,y;this._checkLoaded();const S=o===null?(y=(p=(m=this.stylesheet.state)===null||m===void 0?void 0:m[t])===null||p===void 0?void 0:p.default)!==null&&y!==void 0?y:null:o;if(a.bG(S,this._globalState[t]))return this;this._globalState[t]=S;const I=this._findGlobalStateAffectedSources([t]);for(const M in this.sourceCaches)I.has(M)&&(this._reloadSource(M),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const o=[];for(const p in t)!a.bG(this._globalState[p],t[p].default)&&(o.push(p),this._globalState[p]=t[p].default);const m=this._findGlobalStateAffectedSources(o);for(const p in this.sourceCaches)m.has(p)&&(this._reloadSource(p),this._changed=!0)}_findGlobalStateAffectedSources(t){if(t.length===0)return new Set;const o=new Set;for(const m in this._layers){const p=this._layers[m],y=p.getLayoutAffectingGlobalStateRefs();for(const S of t)y.has(S)&&o.add(p.source)}return o}loadURL(t,o={},m){this.fire(new a.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const p=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;a.j(p,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,o,m)}).catch(S=>{this._loadStyleRequest=null,S&&!y.signal.aborted&&this.fire(new a.k(S))})}loadJSON(t,o={},m){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(t,o,m)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(jo,{validate:!1})}_load(t,o,m){var p,y,S;const I=o.transformStyle?o.transformStyle(m,t):t;if(!o.validate||!Gl(this,a.z(I))){this._loaded=!0,this.stylesheet=I;for(const M in I.sources)this.addSource(M,I.sources[M],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new Fe(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new mt(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.setGlobalState((S=this.stylesheet.state)!==null&&S!==void 0?S:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const t=a.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of t){const m=a.bI(o);m.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=m}}_loadSprite(t,o=!1,m=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,S,I,M){return a._(this,void 0,void 0,function*(){const L=Q(y),B=I>1?"@2x":"",G={},N={};for(const{id:W,url:ee}of L){const ve=S.transformRequest(ce(ee,B,".json"),"SpriteJSON");G[W]=a.j(ve,M);const ge=S.transformRequest(ce(ee,B,".png"),"SpriteImage");N[W]=Y.getImage(ge,M)}return yield Promise.all([...Object.values(G),...Object.values(N)]),function(W,ee){return a._(this,void 0,void 0,function*(){const ve={};for(const ge in W){ve[ge]={};const ye=A.getImageCanvasContext((yield ee[ge]).data),we=(yield W[ge]).data;for(const Ae in we){const{width:ke,height:De,x:Be,y:Te,sdf:Ge,pixelRatio:at,stretchX:tt,stretchY:nt,content:ot,textFitWidth:Nt,textFitHeight:$t}=we[Ae];ve[ge][Ae]={data:null,pixelRatio:at,sdf:Ge,stretchX:tt,stretchY:nt,content:ot,textFitWidth:Nt,textFitHeight:$t,spriteData:{width:ke,height:De,x:Be,y:Te,context:ye}}}}return ve})}(G,N)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const S in y){this._spritesImagesIds[S]=[];const I=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(M=>!(M in y)):[];for(const M of I)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in y[S]){const L=S==="default"?M:`${S}:${M}`;this._spritesImagesIds[S].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,y[S][M],!1):this.imageManager.addImage(L,y[S][M]),o&&(this._changedImages[L]=!0)}}}).catch(y=>{this._spriteRequest=null,p=y,this.fire(new a.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),m&&m(p)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(t){const o=this.sourceCaches[t.source];if(!o)return;const m=t.sourceLayer;if(!m)return;const p=o.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.k(new Error(`Source layer "${m}" does not exist on source "${p.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,o=!1){const m=this._serializedAllLayers();if(!t||t.length===0)return Object.values(o?a.bJ(m):m);const p=[];for(const y of t)if(m[y]){const S=o?a.bJ(m[y]):m[y];p.push(S)}return p}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const o=Object.keys(this._layers);for(const m of o){const p=this._layers[m];p.type!=="custom"&&(t[m]=p.serialize())}return t}hasTransitions(){var t,o,m;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(o){const p=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(p.length||y.length)&&this._updateWorkerLayers(p,y);for(const S in this._updatedSources){const I=this._updatedSources[S];if(I==="reload")this._reloadSource(S);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const m={};for(const p in this.sourceCaches){const y=this.sourceCaches[p];m[p]=y.used,y.used=!1}for(const p of this._order){const y=this._layers[p];y.recalculate(t,this._availableImages),!y.isHidden(t.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const p in m){const y=this.sourceCaches[p];!!m[p]!=!!y.used&&y.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,o&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,o={}){var m;this._checkLoaded();const p=this.serialize();if(t=o.transformStyle?o.transformStyle(p,t):t,((m=o.validate)===null||m===void 0||m)&&Gl(this,a.z(t)))return!1;(t=a.bJ(t)).layers=a.bH(t.layers);const y=a.bK(p,t),S=this._getOperationsToPerform(y);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const I of S.operations)I();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const o=[],m=[];for(const p of t)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":o.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":o.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":o.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":o.push(()=>this.setGlobalState.apply(this,p.args));break;case"setTransition":o.push(()=>{});break;default:m.push(p.command)}return{operations:o,unimplemented:m}}addImage(t,o){if(this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,m={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(a.z.source,`sources.${t}`,o,null,m))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const p=this.sourceCaches[t]=new Ct(t,o,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:t})),p.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===t)return this.fire(new a.k(new Error(`Source "${t}" cannot be removed while layer "${m}" is using it.`)));const o=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],o.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const m=this.sourceCaches[t].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(o),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,o,m={}){this._checkLoaded();const p=t.id;if(this.getLayer(p))return void this.fire(new a.k(new Error(`Layer "${p}" already exists on this map.`)));let y;if(t.type==="custom"){if(Gl(this,a.bL(t)))return;y=a.bI(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(p,t.source),t=a.bJ(t),t=a.e(t,{source:p})),this._validate(a.z.layer,`layers.${p}`,t,{arrayIndex:-1},m))return;y=a.bI(t),this._validateLayer(y),y.setEventedParent(this,{layer:{id:p}})}const S=o?this._order.indexOf(o):this._order.length;if(o&&S===-1)this.fire(new a.k(new Error(`Cannot add layer "${p}" before non-existing layer "${o}".`)));else{if(this._order.splice(S,0,p),this._layerOrderChanged=!0,this._layers[p]=y,this._removedLayers[p]&&y.source&&y.type!=="custom"){const I=this._removedLayers[p];delete this._removedLayers[p],I.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new a.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const m=this._order.indexOf(t);this._order.splice(m,1);const p=o?this._order.indexOf(o):this._order.length;o&&p===-1?this.fire(new a.k(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(p,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const m=this._order.indexOf(t);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,m){this._checkLoaded();const p=this.getLayer(t);p?p.minzoom===o&&p.maxzoom===m||(o!=null&&(p.minzoom=o),m!=null&&(p.maxzoom=m),this._updateLayer(p)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,m={}){this._checkLoaded();const p=this.getLayer(t);if(p){if(!a.bG(p.filter,o))return o==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(a.z.filter,`layers.${p.id}.filter`,o,null,m)||(p.setFilter(a.bJ(o)),this._updateLayer(p)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return a.bJ(this.getLayer(t).filter)}setLayoutProperty(t,o,m,p={}){this._checkLoaded();const y=this.getLayer(t);y?a.bG(y.getLayoutProperty(o),m)||(y.setLayoutProperty(o,m,p),this._updateLayer(y)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const m=this.getLayer(t);if(m)return m.getLayoutProperty(o);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,m,p={}){this._checkLoaded();const y=this.getLayer(t);y?a.bG(y.getPaintProperty(o),m)||(y.setPaintProperty(o,m,p)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const m=t.source,p=t.sourceLayer,y=this.sourceCaches[m];if(y===void 0)return void this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)));const S=y.getSource().type;S==="geojson"&&p?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||p?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(p,t.id,o)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const m=t.source,p=this.sourceCaches[m];if(p===void 0)return void this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)));const y=p.getSource().type,S=y==="vector"?t.sourceLayer:void 0;y!=="vector"||S?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(S,t.id,o):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,m=t.sourceLayer,p=this.sourceCaches[o];if(p!==void 0)return p.getSource().type!=="vector"||m?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(m,t.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=a.bM(this.sourceCaches,y=>y.serialize()),o=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,p=this.stylesheet;return a.bN({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:t,layers:o,terrain:m},y=>y!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=S=>this._layers[S].type==="fill-extrusion",m={},p=[];for(let S=this._order.length-1;S>=0;S--){const I=this._order[S];if(o(I)){m[I]=S;for(const M of t){const L=M[I];if(L)for(const B of L)p.push(B)}}}p.sort((S,I)=>I.intersectionZ-S.intersectionZ);const y=[];for(let S=this._order.length-1;S>=0;S--){const I=this._order[S];if(o(I))for(let M=p.length-1;M>=0;M--){const L=p[M].feature;if(m[L.layer.id]<S)break;y.push(L),p.pop()}else for(const M of t){const L=M[I];if(L)for(const B of L)y.push(B.feature)}}return y}queryRenderedFeatures(t,o,m){o&&o.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",o.filter,null,o);const p={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const L of o.layers){const B=this._layers[L];if(!B)return this.fire(new a.k(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];p[B.source]=!0}}const y=[];o.availableImages=this._availableImages;const S=this._serializedAllLayers(),I=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,M=Object.assign(Object.assign({},o),{layers:I});for(const L in this.sourceCaches)o.layers&&!p[L]||y.push(st(this.sourceCaches[L],this._layers,S,t,M,m,this.map.terrain?(B,G,N)=>this.map.terrain.getElevation(B,G,N):void 0));return this.placement&&y.push(function(L,B,G,N,W,ee,ve){const ge={},ye=ee.queryRenderedSymbols(N),we=[];for(const Ae of Object.keys(ye).map(Number))we.push(ve[Ae]);we.sort(Ye);for(const Ae of we){const ke=Ae.featureIndex.lookupSymbolFeatures(ye[Ae.bucketInstanceId],B,Ae.bucketIndex,Ae.sourceLayerIndex,W.filter,W.layers,W.availableImages,L);for(const De in ke){const Be=ge[De]=ge[De]||[],Te=ke[De];Te.sort((Ge,at)=>{const tt=Ae.featureSortOrder;if(tt){const nt=tt.indexOf(Ge.featureIndex);return tt.indexOf(at.featureIndex)-nt}return at.featureIndex-Ge.featureIndex});for(const Ge of Te)Be.push(Ge)}}return function(Ae,ke,De){for(const Be in Ae)for(const Te of Ae[Be])St(Te,De[ke[Be].source]);return Ae}(ge,L,G)}(this._layers,S,this.sourceCaches,t,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(t,o){o&&o.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",o.filter,null,o);const m=this.sourceCaches[t];return m?function(p,y){const S=p.getRenderableIds().map(L=>p.getTileByID(L)),I=[],M={};for(let L=0;L<S.length;L++){const B=S[L],G=B.tileID.canonical.key;M[G]||(M[G]=!0,B.querySourceFeatures(I,y))}return I}(m,o):[]}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const m=this.light.getLight();let p=!1;for(const S in t)if(!a.bG(t[S],m[S])){p=!0;break}if(!p)return;const y={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(y)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,o={}){this._checkLoaded();const m=this.getSky();let p=!1;if(!t&&!m)return;if(t&&!m)p=!0;else if(!t&&m)p=!0;else for(const S in t)if(!a.bG(t[S],m[S])){p=!0;break}if(!p)return;const y={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,o),this.sky.updateTransitions(y)}_setProjectionInternal(t){const o=function(m){if(Array.isArray(m)){const p=new Fl({type:m});return{projection:p,transform:new la,cameraHelper:new lh(p)}}switch(m){case"mercator":return{projection:new rh,transform:new Gi,cameraHelper:new mc};case"globe":{const p=new Fl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new la,cameraHelper:new lh(p)}}case"vertical-perspective":return{projection:new Rm,transform:new $o,cameraHelper:new Zr};default:return a.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new rh,transform:new Gi,cameraHelper:new mc}}}(t);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const m in this.sourceCaches)this.sourceCaches[m].reload()}_validate(t,o,m,p,y={}){return(!y||y.validate!==!1)&&Gl(this,t.call(a.z,a.e({key:o,style:this.serialize(),value:m,styleSpec:a.v},p)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),En().off(en,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const m=this.sourceCaches[o];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const o in this.sourceCaches)this.sourceCaches[o].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,o,m,p,y=!1){let S=!1,I=!1;const M={};for(const L of this._order){const B=this._layers[L];if(B.type!=="symbol")continue;if(!M[B.source]){const N=this.sourceCaches[B.source];M[B.source]=N.getRenderableIds(!0).map(W=>N.getTileByID(W)).sort((W,ee)=>ee.tileID.overscaledZ-W.tileID.overscaledZ||(W.tileID.isLessThan(ee.tileID)?-1:1))}const G=this.crossTileSymbolIndex.addLayer(B,M[B.source],t.center.lng);S=S||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),t.zoom))&&(this.pauseablePlacement=new Mm(t,this.map.terrain,this._order,y,o,m,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),I=!0),S&&this.pauseablePlacement.placement.setStale()),I||S)for(const L of this._order){const B=this._layers[L];B.type==="symbol"&&this.placement.updateLayerOpacities(B,M[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,o){return a._(this,void 0,void 0,function*(){const m=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,o.icons),m})}getGlyphs(t,o){return a._(this,void 0,void 0,function*(){const m=yield this.glyphManager.getGlyphs(o.stacks),p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,o={}){this._checkLoaded(),t&&this._validate(a.z.glyphs,"glyphs",t,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,o,m={},p){this._checkLoaded();const y=[{id:t,url:o}],S=[...Q(this.stylesheet.sprite),...y];this._validate(a.z.sprite,"sprite",S,null,m)||(this.stylesheet.sprite=S,this._loadSprite(y,!0,p))}removeSprite(t){this._checkLoaded();const o=Q(this.stylesheet.sprite);if(o.find(m=>m.id===t)){if(this._spritesImagesIds[t])for(const m of this._spritesImagesIds[t])this.imageManager.removeImage(m),this._changedImages[m]=!0;o.splice(o.findIndex(m=>m.id===t),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Q(this.stylesheet.sprite)}setSprite(t,o={},m){this._checkLoaded(),t&&this._validate(a.z.sprite,"sprite",t,null,o)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,m):(this._unloadSprite(),m&&m(null)))}}var gv=a.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class vv{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,m,p,y,S,I,M,L){this.context=t;let B=this.boundPaintVertexBuffers.length!==p.length;for(let G=0;!B&&G<p.length;G++)this.boundPaintVertexBuffers[G]!==p[G]&&(B=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==m||B||this.boundIndexBuffer!==y||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==L?this.freshBind(o,m,p,y,S,I,M,L):(t.bindVertexArray.set(this.vao),I&&I.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),L&&L.bind())}freshBind(t,o,m,p,y,S,I,M){const L=t.numAttributes,B=this.context,G=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=p,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=M,o.enableAttributes(G,t);for(const N of m)N.enableAttributes(G,t);S&&S.enableAttributes(G,t),I&&I.enableAttributes(G,t),M&&M.enableAttributes(G,t),o.bind(),o.setVertexAttribPointers(G,t,y);for(const N of m)N.bind(),N.setVertexAttribPointers(G,t,y);S&&(S.bind(),S.setVertexAttribPointers(G,t,y)),p&&p.bind(),I&&(I.bind(),I.setVertexAttribPointers(G,t,y)),M&&(M.bind(),M.setVertexAttribPointers(G,t,y)),B.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const yv=(v,t,o,m,p)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:t,u_fog_color:o?o.properties.get("fog-color"):a.be.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:o?o.calculateFogBlendOpacity(m):0,u_horizon_color:o?o.properties.get("horizon-color"):a.be.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),_v={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function pc(v){const t=[];for(let o=0;o<v.length;o++){if(v[o]===null)continue;const m=v[o].split(" ");t.push(m.pop())}return t}class gc{constructor(t,o,m,p,y,S,I,M,L=[]){const B=t.gl;this.program=B.createProgram();const G=pc(o.staticAttributes),N=m?m.getBinderAttributes():[],W=G.concat(N),ee=Ga.prelude.staticUniforms?pc(Ga.prelude.staticUniforms):[],ve=I.staticUniforms?pc(I.staticUniforms):[],ge=o.staticUniforms?pc(o.staticUniforms):[],ye=m?m.getBinderUniforms():[],we=ee.concat(ve).concat(ge).concat(ye),Ae=[];for(const tt of we)Ae.indexOf(tt)<0&&Ae.push(tt);const ke=m?m.defines():[];Br(B)&&ke.unshift("#version 300 es"),y&&ke.push("#define OVERDRAW_INSPECTOR;"),S&&ke.push("#define TERRAIN3D;"),M&&ke.push(M),L&&ke.push(...L);let De=ke.concat(Ga.prelude.fragmentSource,I.fragmentSource,o.fragmentSource).join(`
`),Be=ke.concat(Ga.prelude.vertexSource,I.vertexSource,o.vertexSource).join(`
`);Br(B)||(De=function(tt){return tt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(De),Be=function(tt){return tt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Be));const Te=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Te,De),B.compileShader(Te),!B.getShaderParameter(Te,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(Te)}`);B.attachShader(this.program,Te);const Ge=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Ge,Be),B.compileShader(Ge),!B.getShaderParameter(Ge,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(Ge)}`);B.attachShader(this.program,Ge),this.attributes={};const at={};this.numAttributes=W.length;for(let tt=0;tt<this.numAttributes;tt++)W[tt]&&(B.bindAttribLocation(this.program,tt,W[tt]),this.attributes[W[tt]]=tt);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(Ge),B.deleteShader(Te);for(let tt=0;tt<Ae.length;tt++){const nt=Ae[tt];if(nt&&!at[nt]){const ot=B.getUniformLocation(this.program,nt);ot&&(at[nt]=ot)}}this.fixedUniforms=p(t,at),this.terrainUniforms=((tt,nt)=>({u_depth:new a.bO(tt,nt.u_depth),u_terrain:new a.bO(tt,nt.u_terrain),u_terrain_dim:new a.bf(tt,nt.u_terrain_dim),u_terrain_matrix:new a.bQ(tt,nt.u_terrain_matrix),u_terrain_unpack:new a.bR(tt,nt.u_terrain_unpack),u_terrain_exaggeration:new a.bf(tt,nt.u_terrain_exaggeration)}))(t,at),this.projectionUniforms=((tt,nt)=>({u_projection_matrix:new a.bQ(tt,nt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bR(tt,nt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bR(tt,nt.u_projection_clipping_plane),u_projection_transition:new a.bf(tt,nt.u_projection_transition),u_projection_fallback_matrix:new a.bQ(tt,nt.u_projection_fallback_matrix)}))(t,at),this.binderUniforms=m?m.getUniforms(t,at):[]}draw(t,o,m,p,y,S,I,M,L,B,G,N,W,ee,ve,ge,ye,we,Ae){const ke=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(m),t.setStencilMode(p),t.setColorMode(y),t.setCullFace(S),M){t.activeTexture.set(ke.TEXTURE2),ke.bindTexture(ke.TEXTURE_2D,M.depthTexture),t.activeTexture.set(ke.TEXTURE3),ke.bindTexture(ke.TEXTURE_2D,M.texture);for(const Be in this.terrainUniforms)this.terrainUniforms[Be].set(M[Be])}if(L)for(const Be in L)this.projectionUniforms[_v[Be]].set(L[Be]);if(I)for(const Be in this.fixedUniforms)this.fixedUniforms[Be].set(I[Be]);ge&&ge.setUniforms(t,this.binderUniforms,ee,{zoom:ve});let De=0;switch(o){case ke.LINES:De=2;break;case ke.TRIANGLES:De=3;break;case ke.LINE_STRIP:De=1}for(const Be of W.get()){const Te=Be.vaos||(Be.vaos={});(Te[B]||(Te[B]=new vv)).bind(t,this,G,ge?ge.getPaintVertexBuffers():[],N,Be.vertexOffset,ye,we,Ae),ke.drawElements(o,Be.primitiveLength*De,ke.UNSIGNED_SHORT,Be.primitiveOffset*De*2)}}}function vc(v,t,o){const m=1/a.aB(o,1,t.transform.tileZoom),p=Math.pow(2,o.tileID.overscaledZ),y=o.tileSize*Math.pow(2,t.transform.tileZoom)/p,S=y*(o.tileID.canonical.x+o.tileID.wrap*p),I=y*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[m,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[S>>16,I>>16],u_pixel_coord_lower:[65535&S,65535&I]}}const Hl=(v,t,o,m)=>{const p=v.style.light,y=p.properties.get("position"),S=[y.x,y.y,y.z],I=a.bU();p.properties.get("anchor")==="viewport"&&a.bV(I,v.transform.bearingInRadians),a.bW(S,S,I);const M=v.transform.transformLightDirection(S),L=p.properties.get("color");return{u_lightpos:S,u_lightpos_globe:M,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+t,u_opacity:o,u_fill_translate:m}},ch=(v,t,o,m,p,y,S)=>a.e(Hl(v,t,o,m),vc(y,v,S),{u_height_factor:-Math.pow(2,p.overscaledZ)/S.tileSize/8}),yc=(v,t,o,m)=>a.e(vc(t,v,o),{u_fill_translate:m}),qa=(v,t)=>({u_world:v,u_fill_translate:t}),bv=(v,t,o,m,p)=>a.e(yc(v,t,o,p),{u_world:m}),dh=(v,t,o,m,p)=>{const y=v.transform;let S,I,M=0;if(o.paint.get("circle-pitch-alignment")==="map"){const L=a.aB(t,1,y.zoom);S=!0,I=[L,L],M=L/(a.$*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*p}else S=!1,I=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+S,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:M,u_translate:m}},ql=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),Wl=v=>({u_viewport_size:[v.width,v.height]}),zm=(v,t=1)=>({u_color:v,u_overlay:0,u_overlay_scale:t}),Zl=(v,t,o,m)=>{const p=a.aB(v,1,t)/(a.$*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:a.aB(v,1,t),u_intensity:o,u_globe_extrude_scale:p}},Vm=(v,t,o,m)=>{const p=a.L();a.bX(p,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:p,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:o,u_color_ramp:m,u_opacity:t.paint.get("heatmap-opacity")}},No=(v,t,o)=>{const m=o.paint.get("hillshade-accent-color");let p;switch(o.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const y=o.getIlluminationProperties();for(let S=0;S<y.directionRadians.length;S++)o.paint.get("hillshade-illumination-anchor")==="viewport"&&(y.directionRadians[S]+=v.transform.bearingInRadians);return{u_image:0,u_latrange:Bm(0,t.tileID),u_exaggeration:o.paint.get("hillshade-exaggeration"),u_altitudes:y.altitudeRadians,u_azimuths:y.directionRadians,u_accent:m,u_method:p,u_highlights:y.highlightColor,u_shadows:y.shadowColor}},xv=(v,t)=>{const o=t.stride,m=a.L();return a.bX(m,0,a.$,-8192,0,0,1),a.M(m,m,[0,-8192,0]),{u_matrix:m,u_image:1,u_dimension:[o,o],u_zoom:v.overscaledZ,u_unpack:t.getUnpackVector()}};function Bm(v,t){const o=Math.pow(2,t.canonical.z),m=t.canonical.y;return[new a.a0(0,m/o).toLngLat().lat,new a.a0(0,(m+1)/o).toLngLat().lat]}const wv=(v,t)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:v.paint.get("color-relief-opacity")}),_c=(v,t,o,m)=>{const p=v.transform;return{u_translation:mh(v,t,o),u_ratio:m/a.aB(t,1,p.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},hh=(v,t,o,m,p)=>a.e(_c(v,t,o,m),{u_image:0,u_image_height:p}),Om=(v,t,o,m,p)=>{const y=v.transform,S=fh(t,y);return{u_translation:mh(v,t,o),u_texsize:t.imageAtlasTexture.size,u_ratio:m/a.aB(t,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Fm=(v,t,o,m,p,y)=>{const S=v.lineAtlas,I=fh(t,v.transform),M=o.layout.get("line-cap")==="round",L=S.getDash(p.from,M),B=S.getDash(p.to,M),G=L.width*y.fromScale,N=B.width*y.toScale;return a.e(_c(v,t,o,m),{u_patternscale_a:[I/G,-L.height/2],u_patternscale_b:[I/N,-B.height/2],u_sdfgamma:S.width/(256*Math.min(G,N)*v.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:B.y,u_mix:y.t})};function fh(v,t){return 1/a.aB(v,1,t.tileZoom)}function mh(v,t,o){return a.aC(v.transform,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const no=(v,t,o,m,p)=>{return{u_tl_parent:v,u_scale_parent:t,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(S=m.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:$m(m.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var y,S};function $m(v){v*=Math.PI/180;const t=Math.sin(v),o=Math.cos(v);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const ph=(v,t,o,m,p,y,S,I,M,L,B,G,N)=>{const W=S.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:W.width/W.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:M,u_is_text:+B,u_pitch_with_map:+m,u_is_along_line:p,u_is_variable_anchor:y,u_texsize:G,u_texture:0,u_translation:L,u_pitched_scale:N}},Uo=(v,t,o,m,p,y,S,I,M,L,B,G,N,W)=>{const ee=S.transform;return a.e(ph(v,t,o,m,p,y,S,I,M,L,B,G,W),{u_gamma_scale:m?Math.cos(ee.pitch*Math.PI/180)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},Sv=(v,t,o,m,p,y,S,I,M,L,B,G,N)=>a.e(Uo(v,t,o,m,p,y,S,I,M,L,!0,B,0,N),{u_texsize_icon:G,u_texture_icon:1}),bc=(v,t)=>({u_opacity:v,u_color:t}),Cv=(v,t,o,m,p)=>a.e(function(y,S,I,M){const L=I.imageManager.getPattern(y.from.toString()),B=I.imageManager.getPattern(y.to.toString()),{width:G,height:N}=I.imageManager.getPixelSize(),W=Math.pow(2,M.tileID.overscaledZ),ee=M.tileSize*Math.pow(2,I.transform.tileZoom)/W,ve=ee*(M.tileID.canonical.x+M.tileID.wrap*W),ge=ee*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[G,N],u_mix:S.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/a.aB(M,1,I.transform.tileZoom),u_pixel_coord_upper:[ve>>16,ge>>16],u_pixel_coord_lower:[65535&ve,65535&ge]}}(o,p,t,m),{u_opacity:v}),jm=(v,t)=>{},Nm={fillExtrusion:(v,t)=>({u_lightpos:new a.bS(v,t.u_lightpos),u_lightpos_globe:new a.bS(v,t.u_lightpos_globe),u_lightintensity:new a.bf(v,t.u_lightintensity),u_lightcolor:new a.bS(v,t.u_lightcolor),u_vertical_gradient:new a.bf(v,t.u_vertical_gradient),u_opacity:new a.bf(v,t.u_opacity),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillExtrusionPattern:(v,t)=>({u_lightpos:new a.bS(v,t.u_lightpos),u_lightpos_globe:new a.bS(v,t.u_lightpos_globe),u_lightintensity:new a.bf(v,t.u_lightintensity),u_lightcolor:new a.bS(v,t.u_lightcolor),u_vertical_gradient:new a.bf(v,t.u_vertical_gradient),u_height_factor:new a.bf(v,t.u_height_factor),u_opacity:new a.bf(v,t.u_opacity),u_fill_translate:new a.bT(v,t.u_fill_translate),u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade)}),fill:(v,t)=>({u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillPattern:(v,t)=>({u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillOutline:(v,t)=>({u_world:new a.bT(v,t.u_world),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillOutlinePattern:(v,t)=>({u_world:new a.bT(v,t.u_world),u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade),u_fill_translate:new a.bT(v,t.u_fill_translate)}),circle:(v,t)=>({u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_scale_with_map:new a.bO(v,t.u_scale_with_map),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_extrude_scale:new a.bT(v,t.u_extrude_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_globe_extrude_scale:new a.bf(v,t.u_globe_extrude_scale),u_translate:new a.bT(v,t.u_translate)}),collisionBox:(v,t)=>({u_pixel_extrude_scale:new a.bT(v,t.u_pixel_extrude_scale)}),collisionCircle:(v,t)=>({u_viewport_size:new a.bT(v,t.u_viewport_size)}),debug:(v,t)=>({u_color:new a.bP(v,t.u_color),u_overlay:new a.bO(v,t.u_overlay),u_overlay_scale:new a.bf(v,t.u_overlay_scale)}),depth:jm,clippingMask:jm,heatmap:(v,t)=>({u_extrude_scale:new a.bf(v,t.u_extrude_scale),u_intensity:new a.bf(v,t.u_intensity),u_globe_extrude_scale:new a.bf(v,t.u_globe_extrude_scale)}),heatmapTexture:(v,t)=>({u_matrix:new a.bQ(v,t.u_matrix),u_world:new a.bT(v,t.u_world),u_image:new a.bO(v,t.u_image),u_color_ramp:new a.bO(v,t.u_color_ramp),u_opacity:new a.bf(v,t.u_opacity)}),hillshade:(v,t)=>({u_image:new a.bO(v,t.u_image),u_latrange:new a.bT(v,t.u_latrange),u_exaggeration:new a.bf(v,t.u_exaggeration),u_altitudes:new a.bZ(v,t.u_altitudes),u_azimuths:new a.bZ(v,t.u_azimuths),u_accent:new a.bP(v,t.u_accent),u_method:new a.bO(v,t.u_method),u_shadows:new a.bY(v,t.u_shadows),u_highlights:new a.bY(v,t.u_highlights)}),hillshadePrepare:(v,t)=>({u_matrix:new a.bQ(v,t.u_matrix),u_image:new a.bO(v,t.u_image),u_dimension:new a.bT(v,t.u_dimension),u_zoom:new a.bf(v,t.u_zoom),u_unpack:new a.bR(v,t.u_unpack)}),colorRelief:(v,t)=>({u_image:new a.bO(v,t.u_image),u_unpack:new a.bR(v,t.u_unpack),u_dimension:new a.bT(v,t.u_dimension),u_elevation_stops:new a.bO(v,t.u_elevation_stops),u_color_stops:new a.bO(v,t.u_color_stops),u_opacity:new a.bf(v,t.u_opacity)}),line:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels)}),lineGradient:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_image:new a.bO(v,t.u_image),u_image_height:new a.bf(v,t.u_image_height)}),linePattern:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_texsize:new a.bT(v,t.u_texsize),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_image:new a.bO(v,t.u_image),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade)}),lineSDF:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_patternscale_a:new a.bT(v,t.u_patternscale_a),u_patternscale_b:new a.bT(v,t.u_patternscale_b),u_sdfgamma:new a.bf(v,t.u_sdfgamma),u_image:new a.bO(v,t.u_image),u_tex_y_a:new a.bf(v,t.u_tex_y_a),u_tex_y_b:new a.bf(v,t.u_tex_y_b),u_mix:new a.bf(v,t.u_mix)}),raster:(v,t)=>({u_tl_parent:new a.bT(v,t.u_tl_parent),u_scale_parent:new a.bf(v,t.u_scale_parent),u_buffer_scale:new a.bf(v,t.u_buffer_scale),u_fade_t:new a.bf(v,t.u_fade_t),u_opacity:new a.bf(v,t.u_opacity),u_image0:new a.bO(v,t.u_image0),u_image1:new a.bO(v,t.u_image1),u_brightness_low:new a.bf(v,t.u_brightness_low),u_brightness_high:new a.bf(v,t.u_brightness_high),u_saturation_factor:new a.bf(v,t.u_saturation_factor),u_contrast_factor:new a.bf(v,t.u_contrast_factor),u_spin_weights:new a.bS(v,t.u_spin_weights),u_coords_top:new a.bR(v,t.u_coords_top),u_coords_bottom:new a.bR(v,t.u_coords_bottom)}),symbolIcon:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texture:new a.bO(v,t.u_texture),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),symbolSDF:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texture:new a.bO(v,t.u_texture),u_gamma_scale:new a.bf(v,t.u_gamma_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_is_halo:new a.bO(v,t.u_is_halo),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),symbolTextAndIcon:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texsize_icon:new a.bT(v,t.u_texsize_icon),u_texture:new a.bO(v,t.u_texture),u_texture_icon:new a.bO(v,t.u_texture_icon),u_gamma_scale:new a.bf(v,t.u_gamma_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_is_halo:new a.bO(v,t.u_is_halo),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),background:(v,t)=>({u_opacity:new a.bf(v,t.u_opacity),u_color:new a.bP(v,t.u_color)}),backgroundPattern:(v,t)=>({u_opacity:new a.bf(v,t.u_opacity),u_image:new a.bO(v,t.u_image),u_pattern_tl_a:new a.bT(v,t.u_pattern_tl_a),u_pattern_br_a:new a.bT(v,t.u_pattern_br_a),u_pattern_tl_b:new a.bT(v,t.u_pattern_tl_b),u_pattern_br_b:new a.bT(v,t.u_pattern_br_b),u_texsize:new a.bT(v,t.u_texsize),u_mix:new a.bf(v,t.u_mix),u_pattern_size_a:new a.bT(v,t.u_pattern_size_a),u_pattern_size_b:new a.bT(v,t.u_pattern_size_b),u_scale_a:new a.bf(v,t.u_scale_a),u_scale_b:new a.bf(v,t.u_scale_b),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bf(v,t.u_tile_units_to_pixels)}),terrain:(v,t)=>({u_texture:new a.bO(v,t.u_texture),u_ele_delta:new a.bf(v,t.u_ele_delta),u_fog_matrix:new a.bQ(v,t.u_fog_matrix),u_fog_color:new a.bP(v,t.u_fog_color),u_fog_ground_blend:new a.bf(v,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bf(v,t.u_fog_ground_blend_opacity),u_horizon_color:new a.bP(v,t.u_horizon_color),u_horizon_fog_blend:new a.bf(v,t.u_horizon_fog_blend),u_is_globe_mode:new a.bf(v,t.u_is_globe_mode)}),terrainDepth:(v,t)=>({u_ele_delta:new a.bf(v,t.u_ele_delta)}),terrainCoords:(v,t)=>({u_texture:new a.bO(v,t.u_texture),u_terrain_coords_id:new a.bf(v,t.u_terrain_coords_id),u_ele_delta:new a.bf(v,t.u_ele_delta)}),projectionErrorMeasurement:(v,t)=>({u_input:new a.bf(v,t.u_input),u_output_expected:new a.bf(v,t.u_output_expected)}),atmosphere:(v,t)=>({u_sun_pos:new a.bS(v,t.u_sun_pos),u_atmosphere_blend:new a.bf(v,t.u_atmosphere_blend),u_globe_position:new a.bS(v,t.u_globe_position),u_globe_radius:new a.bf(v,t.u_globe_radius),u_inv_proj_matrix:new a.bQ(v,t.u_inv_proj_matrix)}),sky:(v,t)=>({u_sky_color:new a.bP(v,t.u_sky_color),u_horizon_color:new a.bP(v,t.u_horizon_color),u_horizon:new a.bT(v,t.u_horizon),u_horizon_normal:new a.bT(v,t.u_horizon_normal),u_sky_horizon_blend:new a.bf(v,t.u_sky_horizon_blend),u_sky_blend:new a.bf(v,t.u_sky_blend)})};class Um{constructor(t,o,m){this.context=t;const p=t.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Gm={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class gh{constructor(t,o,m,p){this.length=o.length,this.attributes=m,this.itemSize=o.bytesPerElement,this.dynamicDraw=p,this.context=t;const y=t.gl;this.buffer=y.createBuffer(),t.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let m=0;m<this.attributes.length;m++){const p=o.attributes[this.attributes[m].name];p!==void 0&&t.enableVertexAttribArray(p)}}setVertexAttribPointers(t,o,m){for(let p=0;p<this.attributes.length;p++){const y=this.attributes[p],S=o.attributes[y.name];S!==void 0&&t.vertexAttribPointer(S,y.components,t[Gm[y.type]],!1,this.itemSize,y.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Zn{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xc extends Zn{getDefault(){return a.be.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ss extends Zn{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class vh extends Zn{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class yh extends Zn{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class _h extends Zn{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Hm extends Zn{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class bh extends Zn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class io extends Zn{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class xh extends Zn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class kv extends Zn{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Tv extends Zn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class Pv extends Zn{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Iv extends Zn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class qm extends Zn{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Av extends Zn{getDefault(){return a.be.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Wm extends Zn{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class wc extends Zn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class Sc extends Zn{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Cc extends Zn{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class wh extends Zn{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ro extends Zn{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Kl extends Zn{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Go extends Zn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class xa extends Zn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Zm extends Zn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Km extends Zn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Sh extends Zn{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ao extends Zn{getDefault(){return null}set(t){var o;if(t===this.current&&!this.dirty)return;const m=this.gl;Br(m)?m.bindVertexArray(t):(o=m.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class kc extends Zn{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Tc extends Zn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Yl extends Zn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ho extends Zn{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class Ym extends Ho{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class qo extends Ho{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Wo extends Ho{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const Ch="Framebuffer is not complete";class kh{constructor(t,o,m,p,y){this.context=t,this.width=o,this.height=m;const S=t.gl,I=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Ym(t,I),p)this.depthAttachment=y?new Wo(t,I):new qo(t,I);else if(y)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error(Ch)}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const m=this.depthAttachment.get();m&&t.deleteRenderbuffer(m)}t.deleteFramebuffer(this.framebuffer)}}class Vn{constructor(t){var o,m;if(this.gl=t,this.clearColor=new xc(this),this.clearDepth=new ss(this),this.clearStencil=new vh(this),this.colorMask=new yh(this),this.depthMask=new _h(this),this.stencilMask=new Hm(this),this.stencilFunc=new bh(this),this.stencilOp=new io(this),this.stencilTest=new xh(this),this.depthRange=new kv(this),this.depthTest=new Tv(this),this.depthFunc=new Pv(this),this.blend=new Iv(this),this.blendFunc=new qm(this),this.blendColor=new Av(this),this.blendEquation=new Wm(this),this.cullFace=new wc(this),this.cullFaceSide=new Sc(this),this.frontFace=new Cc(this),this.program=new wh(this),this.activeTexture=new ro(this),this.viewport=new Kl(this),this.bindFramebuffer=new Go(this),this.bindRenderbuffer=new xa(this),this.bindTexture=new Zm(this),this.bindVertexBuffer=new Km(this),this.bindElementBuffer=new Sh(this),this.bindVertexArray=new ao(this),this.pixelStoreUnpack=new kc(this),this.pixelStoreUnpackPremultiplyAlpha=new Tc(this),this.pixelStoreUnpackFlipY=new Yl(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Br(t)){this.HALF_FLOAT=t.HALF_FLOAT;const p=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=t.RGBA16F)!==null&&o!==void 0?o:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(m=t.RGB16F)!==null&&m!==void 0?m:p==null?void 0:p.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const p=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new Um(this,t,o)}createVertexBuffer(t,o,m){return new gh(this,t,o,m)}createRenderbuffer(t,o,m){const p=this.gl,y=p.createRenderbuffer();return this.bindRenderbuffer.set(y),p.renderbufferStorage(p.RENDERBUFFER,t,o,m),this.bindRenderbuffer.set(null),y}createFramebuffer(t,o,m,p){return new kh(this,t,o,m,p)}clear({color:t,depth:o,stencil:m}){const p=this.gl;let y=0;t&&(y|=p.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(y|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),m!==void 0&&(y|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),p.clear(y)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){a.bG(t.blendFunction,jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Br(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var o;return Br(this.gl)?this.gl.deleteVertexArray(t):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let so;function Xm(v,t,o,m,p){const y=v.context,S=v.transform,I=y.gl,M=v.useProgram("collisionBox"),L=[];let B=0,G=0;for(let ye=0;ye<m.length;ye++){const we=m[ye],Ae=t.getTile(we).getBucket(o);if(!Ae)continue;const ke=p?Ae.textCollisionBox:Ae.iconCollisionBox,De=Ae.collisionCircleArray;De.length>0&&(L.push({circleArray:De,circleOffset:G,coord:we}),B+=De.length/4,G=B),ke&&M.draw(y,I.LINES,Cn.disabled,mn.disabled,v.colorModeForRenderPass(),wn.disabled,ql(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),S.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,null,v.transform.zoom,null,null,ke.collisionVertexBuffer)}if(!p||!L.length)return;const N=v.useProgram("collisionCircle"),W=new a.b_;W.resize(4*B),W._trim();let ee=0;for(const ye of L)for(let we=0;we<ye.circleArray.length/4;we++){const Ae=4*we,ke=ye.circleArray[Ae+0],De=ye.circleArray[Ae+1],Be=ye.circleArray[Ae+2],Te=ye.circleArray[Ae+3];W.emplace(ee++,ke,De,Be,Te,0),W.emplace(ee++,ke,De,Be,Te,1),W.emplace(ee++,ke,De,Be,Te,2),W.emplace(ee++,ke,De,Be,Te,3)}(!so||so.length<2*B)&&(so=function(ye){const we=2*ye,Ae=new a.c0;Ae.resize(we),Ae._trim();for(let ke=0;ke<we;ke++){const De=6*ke;Ae.uint16[De+0]=4*ke+0,Ae.uint16[De+1]=4*ke+1,Ae.uint16[De+2]=4*ke+2,Ae.uint16[De+3]=4*ke+2,Ae.uint16[De+4]=4*ke+3,Ae.uint16[De+5]=4*ke+0}return Ae}(B));const ve=y.createIndexBuffer(so,!0),ge=y.createVertexBuffer(W,a.b$.members,!0);for(const ye of L){const we=Wl(v.transform);N.draw(y,I.TRIANGLES,Cn.disabled,mn.disabled,v.colorModeForRenderPass(),wn.disabled,we,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye.coord),null,o.id,ge,ve,a.aL.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,v.transform.zoom,null,null,null)}ge.destroy(),ve.destroy()}const Jm=a.af(new Float32Array(16));function Xl(v,t,o,m,p,y){const{horizontalAlign:S,verticalAlign:I}=a.aG(v);return new a.P((-(S-.5)*t/p+m[0])*y,(-(I-.5)*o/p+m[1])*y)}function Ev(v,t,o,m,p,y){const S=t.tileAnchorPoint.add(new a.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let I=m.mult(y);o||(I=I.rotate(-p));const M=S.add(I);return qn(M.x,M.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(o){const I=Ut(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(v),M=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return v.add(m.rotate(M))}return v.add(m)}function Mv(v,t,o,m,p,y,S,I,M,L,B,G){const N=v.text.placedSymbolArray,W=v.text.dynamicLayoutVertexArray,ee=v.icon.dynamicLayoutVertexArray,ve={};W.clear();for(let ge=0;ge<N.length;ge++){const ye=N.get(ge),we=ye.hidden||!ye.crossTileID||v.allowVerticalPlacement&&!ye.placedOrientation?null:m[ye.crossTileID];if(we){const Ae=new a.P(ye.anchorX,ye.anchorY),ke={getElevation:G,width:p.width,height:p.height,pitchedLabelPlaneMatrix:y,pitchWithMap:o,transform:p,tileAnchorPoint:Ae,translation:L,unwrappedTileID:B},De=o?In(Ae.x,Ae.y,ke):Ut(Ae.x,Ae.y,ke),Be=pn(p.cameraToCenterDistance,De.signedDistanceFromCamera);let Te=a.ao(v.textSizeData,I,ye)*Be/a.aA;o&&(Te*=v.tilePixelRatio/S);const{width:Ge,height:at,anchor:tt,textOffset:nt,textBoxScale:ot}=we,Nt=Xl(tt,Ge,at,nt,ot,Te),$t=p.getPitchedTextCorrection(Ae.x+L[0],Ae.y+L[1],B),Et=Ev(De.point,ke,t,Nt,-p.bearingInRadians,$t),Xt=v.allowVerticalPlacement&&ye.placedOrientation===a.an.vertical?Math.PI/2:0;for(let kn=0;kn<ye.numGlyphs;kn++)a.au(W,Et,Xt);M&&ye.associatedIconIndex>=0&&(ve[ye.associatedIconIndex]={shiftedAnchor:Et,angle:Xt})}else ts(ye.numGlyphs,W)}if(M){ee.clear();const ge=v.icon.placedSymbolArray;for(let ye=0;ye<ge.length;ye++){const we=ge.get(ye);if(we.hidden)ts(we.numGlyphs,ee);else{const Ae=ve[ye];if(Ae)for(let ke=0;ke<we.numGlyphs;ke++)a.au(ee,Ae.shiftedAnchor,Ae.angle);else ts(we.numGlyphs,ee)}}v.icon.dynamicLayoutVertexBuffer.updateData(ee)}v.text.dynamicLayoutVertexBuffer.updateData(W)}function Qm(v,t,o){return o.iconsInText&&t?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function ep(v,t,o,m,p,y,S,I,M,L,B,G,N){const W=v.context,ee=W.gl,ve=v.transform,ge=I==="map",ye=M==="map",we=I!=="viewport"&&o.layout.get("symbol-placement")!=="point",Ae=ge&&!ye&&!we,ke=!o.layout.get("symbol-sort-key").isConstant();let De=!1;const Be=v.getDepthModeForSublayer(0,Cn.ReadOnly),Te=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],at=ve.getCircleRadiusCorrection();for(const tt of m){const nt=t.getTile(tt),ot=nt.getBucket(o);if(!ot)continue;const Nt=p?ot.text:ot.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const $t=Nt.programConfigurations.get(o.id),Et=p||ot.sdfIcons,Xt=p?ot.textSizeData:ot.iconSizeData,kn=ye||ve.pitch!==0,Kn=v.useProgram(Qm(Et,p,ot),$t),wi=a.am(Xt,ve.zoom),ni=v.style.map.terrain&&v.style.map.terrain.getTerrainData(tt);let Si,ai,ii,si,gr=[0,0],Nn=null;if(p)ai=nt.glyphAtlasTexture,ii=ee.LINEAR,Si=nt.glyphAtlasTexture.size,ot.iconsInText&&(gr=nt.imageAtlasTexture.size,Nn=nt.imageAtlasTexture,si=kn||v.options.rotating||v.options.zooming||Xt.kind==="composite"||Xt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const Bi=o.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;ai=nt.imageAtlasTexture,ii=Et||v.options.rotating||v.options.zooming||Bi||kn?ee.LINEAR:ee.NEAREST,Si=nt.imageAtlasTexture.size}const sr=a.aB(nt,1,v.transform.zoom),vr=gn(ge,v.transform,sr),Ms=a.L();a.ap(Ms,vr);const Ds=ui(ye,ge,v.transform,sr),Rs=a.aC(ve,nt,y,S),Ka=ve.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),du=Te&&ot.hasTextData(),hu=o.layout.get("icon-text-fit")!=="none"&&du&&ot.hasIconData();if(we){const Bi=v.style.map.terrain?(jr,Xi)=>v.style.map.terrain.getElevation(tt,jr,Xi):null,hi=o.layout.get("text-rotation-alignment")==="map";ir(ot,v,p,vr,Ms,ye,L,hi,tt.toUnwrapped(),ve.width,ve.height,Rs,Bi)}const al=p&&Te||hu,Yr=we||al?Jm:ye?vr:v.transform.clipSpaceToPixelsMatrix,Ea=Et&&o.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ls;Ls=Et?ot.iconsInText?Sv(Xt.kind,wi,Ae,ye,we,al,v,Yr,Ds,Rs,Si,gr,at):Uo(Xt.kind,wi,Ae,ye,we,al,v,Yr,Ds,Rs,p,Si,0,at):ph(Xt.kind,wi,Ae,ye,we,al,v,Yr,Ds,Rs,p,Si,at);const uo={program:Kn,buffers:Nt,uniformValues:Ls,projectionData:Ka,atlasTexture:ai,atlasTextureIcon:Nn,atlasInterpolation:ii,atlasInterpolationIcon:si,isSDF:Et,hasHalo:Ea};if(ke&&ot.canOverlap){De=!0;const Bi=Nt.segments.get();for(const hi of Bi)Ge.push({segments:new a.aL([hi]),sortKey:hi.sortKey,state:uo,terrainData:ni})}else Ge.push({segments:Nt.segments,sortKey:0,state:uo,terrainData:ni})}De&&Ge.sort((tt,nt)=>tt.sortKey-nt.sortKey);for(const tt of Ge){const nt=tt.state;if(W.activeTexture.set(ee.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,ee.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(W.activeTexture.set(ee.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),nt.isSDF){const ot=nt.uniformValues;nt.hasHalo&&(ot.u_is_halo=1,Pc(nt.buffers,tt.segments,o,v,nt.program,Be,B,G,ot,nt.projectionData,tt.terrainData)),ot.u_is_halo=0}Pc(nt.buffers,tt.segments,o,v,nt.program,Be,B,G,nt.uniformValues,nt.projectionData,tt.terrainData)}}function Pc(v,t,o,m,p,y,S,I,M,L,B){const G=m.context;p.draw(G,G.gl.TRIANGLES,y,S,I,wn.backCCW,M,B,L,o.id,v.layoutVertexBuffer,v.indexBuffer,t,o.paint,m.transform.zoom,v.programConfigurations.get(o.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Ic(v,t,o,m,p){const y=v.context,S=y.gl,I=mn.disabled,M=new jn([S.ONE,S.ONE],a.be.transparent,[!0,!0,!0,!0]),L=t.getBucket(o);if(!L)return;const B=m.key;let G=o.heatmapFbos.get(B);G||(G=Jl(y,t.tileSize,t.tileSize),o.heatmapFbos.set(B,G)),y.bindFramebuffer.set(G.framebuffer),y.viewport.set([0,0,t.tileSize,t.tileSize]),y.clear({color:a.be.transparent});const N=L.programConfigurations.get(o.id),W=v.useProgram("heatmap",N,!p),ee=v.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ve=v.style.map.terrain.getTerrainData(m);W.draw(y,S.TRIANGLES,Cn.disabled,I,M,wn.disabled,Zl(t,v.transform.zoom,o.paint.get("heatmap-intensity"),1),ve,ee,o.id,L.layoutVertexBuffer,L.indexBuffer,L.segments,o.paint,v.transform.zoom,N)}function Ac(v,t,o,m,p){const y=v.context,S=y.gl,I=v.transform;y.setColorMode(v.colorModeForRenderPass());const M=Ec(y,t),L=o.key,B=t.heatmapFbos.get(L);if(!B)return;y.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,B.colorAttachment.get()),y.activeTexture.set(S.TEXTURE1),M.bind(S.LINEAR,S.CLAMP_TO_EDGE);const G=I.getProjectionData({overscaledTileID:o,applyTerrainMatrix:p,applyGlobeMatrix:!m});v.useProgram("heatmapTexture").draw(y,S.TRIANGLES,Cn.disabled,mn.disabled,v.colorModeForRenderPass(),wn.disabled,Vm(v,t,0,1),null,G,t.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,t.paint,I.zoom),B.destroy(),t.heatmapFbos.delete(L)}function Jl(v,t,o){var m,p;const y=v.gl,S=y.createTexture();y.bindTexture(y.TEXTURE_2D,S),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const I=(m=v.HALF_FLOAT)!==null&&m!==void 0?m:y.UNSIGNED_BYTE,M=(p=v.RGBA16F)!==null&&p!==void 0?p:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,t,o,0,y.RGBA,I,null);const L=v.createFramebuffer(t,o,!1,!1);return L.colorAttachment.set(S),L}function Ec(v,t){return t.colorRampTexture||(t.colorRampTexture=new a.T(v,t.colorRamp,v.gl.RGBA)),t.colorRampTexture}function Th(v,t,o,m,p){if(!o||!m||!m.imageAtlas)return;const y=m.imageAtlas.patternPositions;let S=y[o.to.toString()],I=y[o.from.toString()];if(!S&&I&&(S=I),!I&&S&&(I=S),!S||!I){const M=p.getPaintProperty(t);S=y[M],I=y[M]}S&&I&&v.setConstantPatternPositions(S,I)}function Ql(v,t,o,m,p,y,S,I){const M=v.context.gl,L="fill-pattern",B=o.paint.get(L),G=B&&B.constantOr(1),N=o.getCrossfadeParameters();let W,ee,ve,ge,ye;const we=v.transform,Ae=o.paint.get("fill-translate"),ke=o.paint.get("fill-translate-anchor");S?(ee=G&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=M.LINES):(ee=G?"fillPattern":"fill",W=M.TRIANGLES);const De=B.constantOr(null);for(const Be of m){const Te=t.getTile(Be);if(G&&!Te.patternsLoaded())continue;const Ge=Te.getBucket(o);if(!Ge)continue;const at=Ge.programConfigurations.get(o.id),tt=v.useProgram(ee,at),nt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Be);G&&(v.context.activeTexture.set(M.TEXTURE0),Te.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),at.updatePaintBuffers(N)),Th(at,L,De,Te,o);const ot=we.getProjectionData({overscaledTileID:Be,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),Nt=a.aC(we,Te,Ae,ke);if(S){ge=Ge.indexBuffer2,ye=Ge.segments2;const Et=[M.drawingBufferWidth,M.drawingBufferHeight];ve=ee==="fillOutlinePattern"&&G?bv(v,N,Te,Et,Nt):qa(Et,Nt)}else ge=Ge.indexBuffer,ye=Ge.segments,ve=G?yc(v,N,Te,Nt):{u_fill_translate:Nt};const $t=v.stencilModeForClipping(Be);tt.draw(v.context,W,p,$t,y,wn.backCCW,ve,nt,ot,o.id,Ge.layoutVertexBuffer,ge,ye,o.paint,v.transform.zoom,at)}}function Zo(v,t,o,m,p,y,S,I){const M=v.context,L=M.gl,B="fill-extrusion-pattern",G=o.paint.get(B),N=G.constantOr(1),W=o.getCrossfadeParameters(),ee=o.paint.get("fill-extrusion-opacity"),ve=G.constantOr(null),ge=v.transform;for(const ye of m){const we=t.getTile(ye),Ae=we.getBucket(o);if(!Ae)continue;const ke=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye),De=Ae.programConfigurations.get(o.id),Be=v.useProgram(N?"fillExtrusionPattern":"fillExtrusion",De);N&&(v.context.activeTexture.set(L.TEXTURE0),we.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),De.updatePaintBuffers(W));const Te=ge.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!I,applyTerrainMatrix:!0});Th(De,B,ve,we,o);const Ge=a.aC(ge,we,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),at=o.paint.get("fill-extrusion-vertical-gradient"),tt=N?ch(v,at,ee,Ge,ye,W,we):Hl(v,at,ee,Ge);Be.draw(M,M.gl.TRIANGLES,p,y,S,wn.backCCW,tt,ke,Te,o.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,o.paint,v.transform.zoom,De,v.style.map.terrain&&Ae.centroidVertexBuffer)}}function Ko(v,t,o,m,p,y,S,I,M){var L;const B=v.style.projection,G=v.context,N=v.transform,W=G.gl,ee=[`#define NUM_ILLUMINATION_SOURCES ${o.paint.get("hillshade-highlight-color").values.length}`],ve=v.useProgram("hillshade",null,!1,ee),ge=!v.options.moving;for(const ye of m){const we=t.getTile(ye),Ae=we.fbo;if(!Ae)continue;const ke=B.getMeshFromTileID(G,ye.canonical,I,!0,"raster"),De=(L=v.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(ye);G.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,Ae.colorAttachment.get());const Be=N.getProjectionData({overscaledTileID:ye,aligned:ge,applyGlobeMatrix:!M,applyTerrainMatrix:!0});ve.draw(G,W.TRIANGLES,y,p[ye.overscaledZ],S,wn.backCCW,No(v,we,o),De,Be,o.id,ke.vertexBuffer,ke.indexBuffer,ke.segments)}}function eu(v,t,o,m,p,y,S,I,M){var L;const B=v.style.projection,G=v.context,N=v.transform,W=G.gl,ee=v.useProgram("colorRelief"),ve=!v.options.moving;let ge=!0;for(const ye of m){const we=t.getTile(ye),Ae=we.dem;if(ge){const at=W.getParameter(W.MAX_TEXTURE_SIZE),{elevationTexture:tt,colorTexture:nt}=o.getColorRampTextures(G,at,Ae.getUnpackVector());G.activeTexture.set(W.TEXTURE1),tt.bind(W.NEAREST,W.CLAMP_TO_EDGE),G.activeTexture.set(W.TEXTURE4),nt.bind(W.LINEAR,W.CLAMP_TO_EDGE),ge=!1}if(!Ae||!Ae.data)continue;const ke=Ae.stride,De=Ae.getPixels();if(G.activeTexture.set(W.TEXTURE0),G.pixelStoreUnpackPremultiplyAlpha.set(!1),we.demTexture=we.demTexture||v.getTileTexture(ke),we.demTexture){const at=we.demTexture;at.update(De,{premultiply:!1}),at.bind(W.LINEAR,W.CLAMP_TO_EDGE)}else we.demTexture=new a.T(G,De,W.RGBA,{premultiply:!1}),we.demTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const Be=B.getMeshFromTileID(G,ye.canonical,I,!0,"raster"),Te=(L=v.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(ye),Ge=N.getProjectionData({overscaledTileID:ye,aligned:ve,applyGlobeMatrix:!M,applyTerrainMatrix:!0});ee.draw(G,W.TRIANGLES,y,p[ye.overscaledZ],S,wn.backCCW,wv(o,we.dem),Te,Ge,o.id,Be.vertexBuffer,Be.indexBuffer,Be.segments)}}const Ph=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Ts(v,t,o,m,p,y,S,I,M=!1,L=!1){const B=m[m.length-1].overscaledZ,G=v.context,N=G.gl,W=v.useProgram("raster"),ee=v.transform,ve=v.style.projection,ge=v.colorModeForRenderPass(),ye=!v.options.moving;for(const we of m){const Ae=v.getDepthModeForSublayer(we.overscaledZ-B,o.paint.get("raster-opacity")===1?Cn.ReadWrite:Cn.ReadOnly,N.LESS),ke=t.getTile(we);ke.registerFadeDuration(o.paint.get("raster-fade-duration"));const De=t.findLoadedParent(we,0),Be=t.findLoadedSibling(we),Te=Dv(ke,De||Be||null,t,o,v.transform,v.style.map.terrain);let Ge,at;const tt=o.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;G.activeTexture.set(N.TEXTURE0),ke.texture.bind(tt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(N.TEXTURE1),De?(De.texture.bind(tt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,De.tileID.overscaledZ-ke.tileID.overscaledZ),at=[ke.tileID.canonical.x*Ge%1,ke.tileID.canonical.y*Ge%1]):ke.texture.bind(tt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),ke.texture.useMipmap&&G.extTextureFilterAnisotropic&&v.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);const nt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),ot=ee.getProjectionData({overscaledTileID:we,aligned:ye,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),Nt=no(at||[0,0],Ge||1,Te,o,I),$t=ve.getMeshFromTileID(G,we.canonical,y,S,"raster");W.draw(G,N.TRIANGLES,Ae,p?p[we.overscaledZ]:mn.disabled,ge,M?wn.frontCCW:wn.backCCW,Nt,nt,ot,o.id,$t.vertexBuffer,$t.indexBuffer,$t.segments)}}function Dv(v,t,o,m,p,y){const S=m.paint.get("raster-fade-duration");if(!y&&S>0){const I=A.now(),M=(I-v.timeAdded)/S,L=t?(I-t.timeAdded)/S:-1,B=o.getSource(),G=bt(p,{tileSize:B.tileSize,roundZoom:B.roundZoom}),N=!t||Math.abs(t.tileID.overscaledZ-G)>Math.abs(v.tileID.overscaledZ-G),W=N&&v.refreshedUponExpiration?1:a.ag(N?M:1-L,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),t?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}const tp=new a.be(1,0,0,1),Mc=new a.be(0,1,0,1),Ih=new a.be(0,0,1,1),np=new a.be(1,0,1,1),ip=new a.be(0,1,1,1);function tu(v,t,o,m){Rc(v,0,t+o/2,v.transform.width,o,m)}function Dc(v,t,o,m){Rc(v,t-o/2,0,o,v.transform.height,m)}function Rc(v,t,o,m,p,y){const S=v.context,I=S.gl;I.enable(I.SCISSOR_TEST),I.scissor(t*v.pixelRatio,o*v.pixelRatio,m*v.pixelRatio,p*v.pixelRatio),S.clear({color:y}),I.disable(I.SCISSOR_TEST)}function rp(v,t,o){const m=v.context,p=m.gl,y=v.useProgram("debug"),S=Cn.disabled,I=mn.disabled,M=v.colorModeForRenderPass(),L="$debug",B=v.style.map.terrain&&v.style.map.terrain.getTerrainData(o);m.activeTexture.set(p.TEXTURE0);const G=t.getTileByID(o.key).latestRawTileData,N=Math.floor((G&&G.byteLength||0)/1024),W=t.getTile(o).tileSize,ee=512/Math.min(W,512)*(o.overscaledZ/v.transform.zoom)*.5;let ve=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ve+=` => ${o.overscaledZ}`),function(ye,we){ye.initDebugOverlayCanvas();const Ae=ye.debugOverlayCanvas,ke=ye.context.gl,De=ye.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,Ae.width,Ae.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(we,5,5),De.strokeText(we,5,5),ye.debugOverlayTexture.update(Ae),ye.debugOverlayTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)}(v,`${ve} ${N}kB`);const ge=v.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(m,p.TRIANGLES,S,I,jn.alphaBlended,wn.disabled,zm(a.be.transparent,ee),null,ge,L,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),y.draw(m,p.LINE_STRIP,S,I,M,wn.disabled,zm(a.be.red),B,ge,L,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Ii(v,t,o,m){const{isRenderingGlobe:p}=m,y=v.context,S=y.gl,I=v.transform,M=v.colorModeForRenderPass(),L=v.getDepthModeFor3D(),B=v.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,v.width,v.height]);for(const G of o){const N=t.getTerrainMesh(G.tileID),W=v.renderToTexture.getTexture(G),ee=t.getTerrainData(G.tileID);y.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,W.texture);const ve=t.getMeshFrameDelta(I.zoom),ge=I.calculateFogMatrix(G.tileID.toUnwrapped()),ye=yv(ve,ge,v.style.sky,I.pitch,p),we=I.getProjectionData({overscaledTileID:G.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(y,S.TRIANGLES,L,mn.disabled,M,wn.backCCW,ye,ee,we,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}}function Ps(v,t){if(!t.mesh){const o=new a.aK;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const m=new a.aM;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),t.mesh=new is(v.createVertexBuffer(o,rs.members),v.createIndexBuffer(m),a.aL.simpleSegment(0,0,o.length,m.length))}return t.mesh}class wa{constructor(t,o){this.context=new Vn(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ct.maxUnderzooming+Ct.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dc}resize(t,o,m){if(this.width=Math.floor(t*m),this.height=Math.floor(o*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const t=this.context,o=new a.aK;o.emplaceBack(0,0),o.emplaceBack(a.$,0),o.emplaceBack(0,a.$),o.emplaceBack(a.$,a.$),this.tileExtentBuffer=t.createVertexBuffer(o,rs.members),this.tileExtentSegments=a.aL.simpleSegment(0,0,4,2);const m=new a.aK;m.emplaceBack(0,0),m.emplaceBack(a.$,0),m.emplaceBack(0,a.$),m.emplaceBack(a.$,a.$),this.debugBuffer=t.createVertexBuffer(m,rs.members),this.debugSegments=a.aL.simpleSegment(0,0,4,5);const p=new a.c5;p.emplaceBack(0,0,0,0),p.emplaceBack(a.$,0,a.$,0),p.emplaceBack(0,a.$,0,a.$),p.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=t.createVertexBuffer(p,gv.members),this.rasterBoundsSegments=a.aL.simpleSegment(0,0,4,2);const y=new a.aK;y.emplaceBack(0,0),y.emplaceBack(a.$,0),y.emplaceBack(0,a.$),y.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(y,rs.members),this.rasterBoundsSegmentsPosOnly=a.aL.simpleSegment(0,0,4,5);const S=new a.aK;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(S,rs.members),this.viewportSegments=a.aL.simpleSegment(0,0,4,2);const I=new a.c6;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(I);const M=new a.aM;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(M);const L=this.context.gl;this.stencilClearMode=new mn({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.tileExtentMesh=new is(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=a.L();a.bX(m,0,this.width,this.height,0,0,1),a.N(m,m,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const p={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(t,o.TRIANGLES,Cn.disabled,this.stencilClearMode,jn.disabled,wn.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o,m){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source,this.nextStencilID+o.length>256&&this.clearStencil();const p=this.context;p.setColorMode(jn.disabled),p.setDepthMode(Cn.disabled);const y={};for(const S of o)y[S.key]=this.nextStencilID++;this._renderTileMasks(y,o,m,!0),this._renderTileMasks(y,o,m,!1),this._tileClippingMaskIDs=y}_renderTileMasks(t,o,m,p){const y=this.context,S=y.gl,I=this.style.projection,M=this.transform,L=this.useProgram("clippingMask");for(const B of o){const G=t[B.key],N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),W=I.getMeshFromTileID(this.context,B.canonical,p,!0,"stencil"),ee=M.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!m,applyTerrainMatrix:!0});L.draw(y,S.TRIANGLES,Cn.disabled,new mn({func:S.ALWAYS,mask:0},G,255,S.KEEP,S.KEEP,S.REPLACE),jn.disabled,m?wn.disabled:wn.backCCW,null,N,ee,"$clipping",W.vertexBuffer,W.indexBuffer,W.segments)}}_renderTilesDepthBuffer(){const t=this.context,o=t.gl,m=this.style.projection,p=this.transform,y=this.useProgram("depth"),S=this.getDepthModeFor3D(),I=pt(p,{tileSize:p.tileSize});for(const M of I){const L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),B=m.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),G=p.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(t,o.TRIANGLES,S,mn.disabled,jn.disabled,wn.backCCW,null,L,G,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new mn({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new mn({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const o=this.context.gl,m=t.sort((S,I)=>I.overscaledZ-S.overscaledZ),p=m[m.length-1].overscaledZ,y=m[0].overscaledZ-p+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const S={};for(let I=0;I<y;I++)S[I+p]=new mn({func:o.GEQUAL,mask:255},I+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=y,[S,m]}return[{[p]:mn.disabled},m]}stencilConfigForOverlapTwoPass(t){const o=this.context.gl,m=t.sort((S,I)=>I.overscaledZ-S.overscaledZ),p=m[m.length-1].overscaledZ,y=m[0].overscaledZ-p+1;if(this.clearStencil(),y>1){const S={},I={};for(let M=0;M<y;M++)S[M+p]=new mn({func:o.GREATER,mask:255},y+1+M,255,o.KEEP,o.KEEP,o.REPLACE),I[M+p]=new mn({func:o.GREATER,mask:255},1+M,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*y+1,[S,I,m]}return this.nextStencilID=3,[{[p]:new mn({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[p]:new mn({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},m]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new jn([t.CONSTANT_COLOR,t.ONE],new a.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?jn.unblended:jn.alphaBlended}getDepthModeForSublayer(t,o,m){if(!this.opaquePassEnabledForLayer())return Cn.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Cn(m||this.context.gl.LEQUAL,o,[p,p])}getDepthModeFor3D(){return new Cn(this.context.gl.LEQUAL,Cn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){var m,p;this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const y=this.style._order,S=this.style.sourceCaches,I={},M={},L={},B={isRenderingToTexture:!1,isRenderingGlobe:((m=t.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const N in S){const W=S[N];W.used&&W.prepare(this.context),I[N]=W.getVisibleCoordinates(!1),M[N]=I[N].slice().reverse(),L[N]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<y.length;N++)if(this.style._layers[y[N]].is3D()){this.opaquePassCutoff=N;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const N of y){const W=this.style._layers[N];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const ee=M[W.source];(W.type==="custom"||ee.length)&&this.renderLayer(this,S[W.source],W,ee,B)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:N=>this.useProgram(N)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?a.be.black:a.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(N,W){const ee=N.context,ve=ee.gl,ge=((Be,Te,Ge)=>{const at=Math.cos(Te.rollInRadians),tt=Math.sin(Te.rollInRadians),nt=le(Te),ot=Te.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Be.properties.get("sky-color"),u_horizon_color:Be.properties.get("horizon-color"),u_horizon:[(Te.width/2-nt*tt)*Ge,(Te.height/2+nt*at)*Ge],u_horizon_normal:[-tt,at],u_sky_horizon_blend:Be.properties.get("sky-horizon-blend")*Te.height/2*Ge,u_sky_blend:ot}})(W,N.style.map.transform,N.pixelRatio),ye=new Cn(ve.LEQUAL,Cn.ReadWrite,[0,1]),we=mn.disabled,Ae=N.colorModeForRenderPass(),ke=N.useProgram("sky"),De=Ps(ee,W);ke.draw(ee,ve.TRIANGLES,ye,we,Ae,wn.disabled,ge,null,void 0,"sky",De.vertexBuffer,De.indexBuffer,De.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const N=this.style._layers[y[this.currentLayer]],W=S[N.source],ee=I[N.source];this._renderTileClippingMasks(N,ee,!1),this.renderLayer(this,W,N,ee,B)}this.renderPass="translucent";let G=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const N=this.style._layers[y[this.currentLayer]],W=S[N.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(N,B))continue;this.opaquePassEnabledForLayer()||G||(G=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ee=(N.type==="symbol"?L:M)[N.source];this._renderTileClippingMasks(N,I[N.source],!!this.renderToTexture),this.renderLayer(this,W,N,ee,B)}if(B.isRenderingGlobe&&function(N,W,ee){const ve=N.context,ge=ve.gl,ye=N.useProgram("atmosphere"),we=new Cn(ge.LEQUAL,Cn.ReadOnly,[0,1]),Ae=N.transform,ke=function(ot,Nt){const $t=ot.properties.get("position"),Et=[-$t.x,-$t.y,-$t.z],Xt=a.af(new Float64Array(16));return ot.properties.get("anchor")==="map"&&(a.b5(Xt,Xt,Nt.rollInRadians),a.b6(Xt,Xt,-Nt.pitchInRadians),a.b5(Xt,Xt,Nt.bearingInRadians),a.b6(Xt,Xt,Nt.center.lat*Math.PI/180),a.by(Xt,Xt,-Nt.center.lng*Math.PI/180)),a.c4(Et,Et,Xt),Et}(ee,N.transform),De=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Be=W.properties.get("atmosphere-blend")*De.projectionTransition;if(Be===0)return;const Te=Vo(Ae.worldSize,Ae.center.lat),Ge=Ae.inverseProjectionMatrix,at=new Float64Array(4);at[3]=1,a.av(at,at,Ae.modelViewProjectionMatrix),at[0]/=at[3],at[1]/=at[3],at[2]/=at[3],at[3]=1,a.av(at,at,Ge),at[0]/=at[3],at[1]/=at[3],at[2]/=at[3],at[3]=1;const tt=((ot,Nt,$t,Et,Xt)=>({u_sun_pos:ot,u_atmosphere_blend:Nt,u_globe_position:$t,u_globe_radius:Et,u_inv_proj_matrix:Xt}))(ke,Be,[at[0],at[1],at[2]],Te,Ge),nt=Ps(ve,W);ye.draw(ve,ge.TRIANGLES,we,mn.disabled,jn.alphaBlended,wn.disabled,tt,null,null,"atmosphere",nt.vertexBuffer,nt.indexBuffer,nt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const N=function(W,ee){let ve=null;const ge=Object.values(W._layers).flatMap(ke=>ke.source&&!ke.isHidden(ee)?[W.sourceCaches[ke.source]]:[]),ye=ge.filter(ke=>ke.getSource().type==="vector"),we=ge.filter(ke=>ke.getSource().type!=="vector"),Ae=ke=>{(!ve||ve.getSource().maxzoom<ke.getSource().maxzoom)&&(ve=ke)};return ye.forEach(ke=>Ae(ke)),ve||we.forEach(ke=>Ae(ke)),ve}(this.style,this.transform.zoom);N&&function(W,ee,ve){for(let ge=0;ge<ve.length;ge++)rp(W,ee,ve[ge])}(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){const W=N.transform.padding;tu(N,N.transform.height-(W.top||0),3,tp),tu(N,W.bottom||0,3,Mc),Dc(N,W.left||0,3,Ih),Dc(N,N.transform.width-(W.right||0),3,np);const ee=N.transform.centerPoint;(function(ve,ge,ye,we){Rc(ve,ge-1,ye-10,2,20,we),Rc(ve,ge-10,ye-1,20,2,we)})(N,ee.x,N.transform.height-ee.y,ip)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=t?!a.c7(o,m):!a.c8(o,m)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(a.c9(o,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,S){const I=y.context,M=I.gl,L=y.transform,B=jn.unblended,G=new Cn(M.LEQUAL,Cn.ReadWrite,[0,1]),N=S.sourceCache.getRenderableTiles(),W=y.useProgram("terrainDepth");I.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),I.clear({color:a.be.transparent,depth:1});for(const ee of N){const ve=S.getTerrainMesh(ee.tileID),ge=S.getTerrainData(ee.tileID),ye=L.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),we={u_ele_delta:S.getMeshFrameDelta(L.zoom)};W.draw(I,M.TRIANGLES,G,mn.disabled,B,wn.backCCW,we,ge,ye,"terrain",ve.vertexBuffer,ve.indexBuffer,ve.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,S){const I=y.context,M=I.gl,L=y.transform,B=jn.unblended,G=new Cn(M.LEQUAL,Cn.ReadWrite,[0,1]),N=S.getCoordsTexture(),W=S.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainCoords");I.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),I.clear({color:a.be.transparent,depth:1}),S.coordsIndex=[];for(const ve of W){const ge=S.getTerrainMesh(ve.tileID),ye=S.getTerrainData(ve.tileID);I.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,N.texture);const we={u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(L.zoom)},Ae=L.getProjectionData({overscaledTileID:ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ee.draw(I,M.TRIANGLES,G,mn.disabled,B,wn.backCCW,we,ye,Ae,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),S.coordsIndex.push(ve.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(t,o,m,p,y){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(p||[]).length)&&(this.id=m.id,a.ca(m)?function(S,I,M,L,B,G){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:N}=G,W=mn.disabled,ee=S.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ve,ge,ye,we,Ae,ke,De,Be,Te){const Ge=ge.transform,at=ge.style.map.terrain,tt=Ae==="map",nt=ke==="map";for(const ot of ve){const Nt=we.getTile(ot),$t=Nt.getBucket(ye);if(!$t||!$t.text||!$t.text.segments.get().length)continue;const Et=a.am($t.textSizeData,Ge.zoom),Xt=a.aB(Nt,1,ge.transform.zoom),kn=gn(tt,ge.transform,Xt),Kn=ye.layout.get("icon-text-fit")!=="none"&&$t.hasIconData();if(Et){const wi=Math.pow(2,Ge.zoom-Nt.tileID.overscaledZ),ni=at?(Si,ai)=>at.getElevation(ot,Si,ai):null;Mv($t,tt,nt,Te,Ge,kn,wi,Et,Kn,a.aC(Ge,Nt,De,Be),ot.toUnwrapped(),ni)}}}(L,S,M,I,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),B),M.paint.get("icon-opacity").constantOr(1)!==0&&ep(S,I,M,L,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),W,ee,N),M.paint.get("text-opacity").constantOr(1)!==0&&ep(S,I,M,L,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),W,ee,N),I.map.showCollisionBoxes&&(Xm(S,I,M,L,!0),Xm(S,I,M,L,!1))}(t,o,m,p,this.style.placement.variableOffsets,y):a.cb(m)?function(S,I,M,L,B){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:G}=B,N=M.paint.get("circle-opacity"),W=M.paint.get("circle-stroke-width"),ee=M.paint.get("circle-stroke-opacity"),ve=!M.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&(W.constantOr(1)===0||ee.constantOr(1)===0))return;const ge=S.context,ye=ge.gl,we=S.transform,Ae=S.getDepthModeForSublayer(0,Cn.ReadOnly),ke=mn.disabled,De=S.colorModeForRenderPass(),Be=[],Te=we.getCircleRadiusCorrection();for(let Ge=0;Ge<L.length;Ge++){const at=L[Ge],tt=I.getTile(at),nt=tt.getBucket(M);if(!nt)continue;const ot=M.paint.get("circle-translate"),Nt=M.paint.get("circle-translate-anchor"),$t=a.aC(we,tt,ot,Nt),Et=nt.programConfigurations.get(M.id),Xt=S.useProgram("circle",Et),kn=nt.layoutVertexBuffer,Kn=nt.indexBuffer,wi=S.style.map.terrain&&S.style.map.terrain.getTerrainData(at),ni={programConfiguration:Et,program:Xt,layoutVertexBuffer:kn,indexBuffer:Kn,uniformValues:dh(S,tt,M,$t,Te),terrainData:wi,projectionData:we.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!G,applyTerrainMatrix:!0})};if(ve){const Si=nt.segments.get();for(const ai of Si)Be.push({segments:new a.aL([ai]),sortKey:ai.sortKey,state:ni})}else Be.push({segments:nt.segments,sortKey:0,state:ni})}ve&&Be.sort((Ge,at)=>Ge.sortKey-at.sortKey);for(const Ge of Be){const{programConfiguration:at,program:tt,layoutVertexBuffer:nt,indexBuffer:ot,uniformValues:Nt,terrainData:$t,projectionData:Et}=Ge.state;tt.draw(ge,ye.TRIANGLES,Ae,ke,De,wn.backCCW,Nt,$t,Et,M.id,nt,ot,Ge.segments,M.paint,S.transform.zoom,at)}}(t,o,m,p,y):a.cc(m)?function(S,I,M,L,B){if(M.paint.get("heatmap-opacity")===0)return;const G=S.context,{isRenderingToTexture:N,isRenderingGlobe:W}=B;if(S.style.map.terrain){for(const ee of L){const ve=I.getTile(ee);I.hasRenderableParent(ee)||(S.renderPass==="offscreen"?Ic(S,ve,M,ee,W):S.renderPass==="translucent"&&Ac(S,M,ee,N,W))}G.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?function(ee,ve,ge,ye){const we=ee.context,Ae=we.gl,ke=ee.transform,De=mn.disabled,Be=new jn([Ae.ONE,Ae.ONE],a.be.transparent,[!0,!0,!0,!0]);(function(Te,Ge,at){const tt=Te.gl;Te.activeTexture.set(tt.TEXTURE1),Te.viewport.set([0,0,Ge.width/4,Ge.height/4]);let nt=at.heatmapFbos.get(a.c1);nt?(tt.bindTexture(tt.TEXTURE_2D,nt.colorAttachment.get()),Te.bindFramebuffer.set(nt.framebuffer)):(nt=Jl(Te,Ge.width/4,Ge.height/4),at.heatmapFbos.set(a.c1,nt))})(we,ee,ge),we.clear({color:a.be.transparent});for(let Te=0;Te<ye.length;Te++){const Ge=ye[Te];if(ve.hasRenderableParent(Ge))continue;const at=ve.getTile(Ge),tt=at.getBucket(ge);if(!tt)continue;const nt=tt.programConfigurations.get(ge.id),ot=ee.useProgram("heatmap",nt),Nt=ke.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),$t=ke.getCircleRadiusCorrection();ot.draw(we,Ae.TRIANGLES,Cn.disabled,De,Be,wn.backCCW,Zl(at,ke.zoom,ge.paint.get("heatmap-intensity"),$t),null,Nt,ge.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,ge.paint,ke.zoom,nt)}we.viewport.set([0,0,ee.width,ee.height])}(S,I,M,L):S.renderPass==="translucent"&&function(ee,ve){const ge=ee.context,ye=ge.gl;ge.setColorMode(ee.colorModeForRenderPass());const we=ve.heatmapFbos.get(a.c1);we&&(ge.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,we.colorAttachment.get()),ge.activeTexture.set(ye.TEXTURE1),Ec(ge,ve).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(ge,ye.TRIANGLES,Cn.disabled,mn.disabled,ee.colorModeForRenderPass(),wn.disabled,Vm(ee,ve,0,1),null,null,ve.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,ve.paint,ee.transform.zoom))}(S,M)}(t,o,m,p,y):a.cd(m)?function(S,I,M,L,B){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:G}=B,N=M.paint.get("line-opacity"),W=M.paint.get("line-width");if(N.constantOr(1)===0||W.constantOr(1)===0)return;const ee=S.getDepthModeForSublayer(0,Cn.ReadOnly),ve=S.colorModeForRenderPass(),ge=M.paint.get("line-dasharray"),ye=M.paint.get("line-pattern"),we=ye.constantOr(1),Ae=M.paint.get("line-gradient"),ke=M.getCrossfadeParameters(),De=we?"linePattern":ge?"lineSDF":Ae?"lineGradient":"line",Be=S.context,Te=Be.gl,Ge=S.transform;let at=!0;for(const tt of L){const nt=I.getTile(tt);if(we&&!nt.patternsLoaded())continue;const ot=nt.getBucket(M);if(!ot)continue;const Nt=ot.programConfigurations.get(M.id),$t=S.context.program.get(),Et=S.useProgram(De,Nt),Xt=at||Et.program!==$t,kn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(tt),Kn=ye.constantOr(null);if(Kn&&nt.imageAtlas){const ii=nt.imageAtlas,si=ii.patternPositions[Kn.to.toString()],gr=ii.patternPositions[Kn.from.toString()];si&&gr&&Nt.setConstantPatternPositions(si,gr)}const wi=Ge.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),ni=Ge.getPixelScale(),Si=we?Om(S,nt,M,ni,ke):ge?Fm(S,nt,M,ni,ge,ke):Ae?hh(S,nt,M,ni,ot.lineClipsArray.length):_c(S,nt,M,ni);if(we)Be.activeTexture.set(Te.TEXTURE0),nt.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),Nt.updatePaintBuffers(ke);else if(ge&&(Xt||S.lineAtlas.dirty))Be.activeTexture.set(Te.TEXTURE0),S.lineAtlas.bind(Be);else if(Ae){const ii=ot.gradients[M.id];let si=ii.texture;if(M.gradientVersion!==ii.version){let gr=256;if(M.stepInterpolant){const Nn=I.getSource().maxzoom,sr=tt.canonical.z===Nn?Math.ceil(1<<S.transform.maxZoom-tt.canonical.z):1;gr=a.ag(a.c2(ot.maxLineLength/a.$*1024*sr),256,Be.maxTextureSize)}ii.gradient=a.c3({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:gr,image:ii.gradient||void 0,clips:ot.lineClipsArray}),ii.texture?ii.texture.update(ii.gradient):ii.texture=new a.T(Be,ii.gradient,Te.RGBA),ii.version=M.gradientVersion,si=ii.texture}Be.activeTexture.set(Te.TEXTURE0),si.bind(M.stepInterpolant?Te.NEAREST:Te.LINEAR,Te.CLAMP_TO_EDGE)}const ai=S.stencilModeForClipping(tt);Et.draw(Be,Te.TRIANGLES,ee,ai,ve,wn.disabled,Si,kn,wi,M.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,M.paint,S.transform.zoom,Nt,ot.layoutVertexBuffer2),at=!1}}(t,o,m,p,y):a.ce(m)?function(S,I,M,L,B){const G=M.paint.get("fill-color"),N=M.paint.get("fill-opacity");if(N.constantOr(1)===0)return;const{isRenderingToTexture:W}=B,ee=S.colorModeForRenderPass(),ve=M.paint.get("fill-pattern"),ge=S.opaquePassEnabledForLayer()&&!ve.constantOr(1)&&G.constantOr(a.be.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===ge){const ye=S.getDepthModeForSublayer(1,S.renderPass==="opaque"?Cn.ReadWrite:Cn.ReadOnly);Ql(S,I,M,L,ye,ee,!1,W)}if(S.renderPass==="translucent"&&M.paint.get("fill-antialias")){const ye=S.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Cn.ReadOnly);Ql(S,I,M,L,ye,ee,!0,W)}}(t,o,m,p,y):a.cf(m)?function(S,I,M,L,B){const G=M.paint.get("fill-extrusion-opacity");if(G===0)return;const{isRenderingToTexture:N}=B;if(S.renderPass==="translucent"){const W=new Cn(S.context.gl.LEQUAL,Cn.ReadWrite,S.depthRangeFor3D);if(G!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Zo(S,I,M,L,W,mn.disabled,jn.disabled,N),Zo(S,I,M,L,W,S.stencilModeFor3D(),S.colorModeForRenderPass(),N);else{const ee=S.colorModeForRenderPass();Zo(S,I,M,L,W,mn.disabled,ee,N)}}}(t,o,m,p,y):a.cg(m)?function(S,I,M,L,B){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const{isRenderingToTexture:G}=B,N=S.context,W=S.style.projection.useSubdivision,ee=S.getDepthModeForSublayer(0,Cn.ReadOnly),ve=S.colorModeForRenderPass();if(S.renderPass==="offscreen")(function(ge,ye,we,Ae,ke,De,Be){const Te=ge.context,Ge=Te.gl;for(const at of we){const tt=ye.getTile(at),nt=tt.dem;if(!nt||!nt.data||!tt.needsHillshadePrepare)continue;const ot=nt.dim,Nt=nt.stride,$t=nt.getPixels();if(Te.activeTexture.set(Ge.TEXTURE1),Te.pixelStoreUnpackPremultiplyAlpha.set(!1),tt.demTexture=tt.demTexture||ge.getTileTexture(Nt),tt.demTexture){const Xt=tt.demTexture;Xt.update($t,{premultiply:!1}),Xt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else tt.demTexture=new a.T(Te,$t,Ge.RGBA,{premultiply:!1}),tt.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);Te.activeTexture.set(Ge.TEXTURE0);let Et=tt.fbo;if(!Et){const Xt=new a.T(Te,{width:ot,height:ot,data:null},Ge.RGBA);Xt.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),Et=tt.fbo=Te.createFramebuffer(ot,ot,!0,!1),Et.colorAttachment.set(Xt.texture)}Te.bindFramebuffer.set(Et.framebuffer),Te.viewport.set([0,0,ot,ot]),ge.useProgram("hillshadePrepare").draw(Te,Ge.TRIANGLES,ke,De,Be,wn.disabled,xv(tt.tileID,nt),null,null,Ae.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),tt.needsHillshadePrepare=!1}})(S,I,L,M,ee,mn.disabled,ve),N.viewport.set([0,0,S.width,S.height]);else if(S.renderPass==="translucent")if(W){const[ge,ye,we]=S.stencilConfigForOverlapTwoPass(L);Ko(S,I,M,we,ge,ee,ve,!1,G),Ko(S,I,M,we,ye,ee,ve,!0,G)}else{const[ge,ye]=S.getStencilConfigForOverlapAndUpdateStencilID(L);Ko(S,I,M,ye,ge,ee,ve,!1,G)}}(t,o,m,p,y):a.ch(m)?function(S,I,M,L,B){if(S.renderPass!=="translucent"||!L.length)return;const{isRenderingToTexture:G}=B,N=S.style.projection.useSubdivision,W=S.getDepthModeForSublayer(0,Cn.ReadOnly),ee=S.colorModeForRenderPass();if(N){const[ve,ge,ye]=S.stencilConfigForOverlapTwoPass(L);eu(S,I,M,ye,ve,W,ee,!1,G),eu(S,I,M,ye,ge,W,ee,!0,G)}else{const[ve,ge]=S.getStencilConfigForOverlapAndUpdateStencilID(L);eu(S,I,M,ge,ve,W,ee,!1,G)}}(t,o,m,p,y):a.ci(m)?function(S,I,M,L,B){if(S.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!L.length)return;const{isRenderingToTexture:G}=B,N=I.getSource(),W=S.style.projection.useSubdivision;if(N instanceof ct)Ts(S,I,M,L,null,!1,!1,N.tileCoords,N.flippedWindingOrder,G);else if(W){const[ee,ve,ge]=S.stencilConfigForOverlapTwoPass(L);Ts(S,I,M,ge,ee,!1,!0,Ph,!1,G),Ts(S,I,M,ge,ve,!0,!0,Ph,!1,G)}else{const[ee,ve]=S.getStencilConfigForOverlapAndUpdateStencilID(L);Ts(S,I,M,ve,ee,!1,!0,Ph,!1,G)}}(t,o,m,p,y):a.cj(m)?function(S,I,M,L,B){const G=M.paint.get("background-color"),N=M.paint.get("background-opacity");if(N===0)return;const{isRenderingToTexture:W}=B,ee=S.context,ve=ee.gl,ge=S.style.projection,ye=S.transform,we=ye.tileSize,Ae=M.paint.get("background-pattern");if(S.isPatternMissing(Ae))return;const ke=!Ae&&G.a===1&&N===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==ke)return;const De=mn.disabled,Be=S.getDepthModeForSublayer(0,ke==="opaque"?Cn.ReadWrite:Cn.ReadOnly),Te=S.colorModeForRenderPass(),Ge=S.useProgram(Ae?"backgroundPattern":"background"),at=L||pt(ye,{tileSize:we,terrain:S.style.map.terrain});Ae&&(ee.activeTexture.set(ve.TEXTURE0),S.imageManager.bind(S.context));const tt=M.getCrossfadeParameters();for(const nt of at){const ot=ye.getProjectionData({overscaledTileID:nt,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Nt=Ae?Cv(N,S,Ae,{tileID:nt,tileSize:we},tt):bc(N,G),$t=S.style.map.terrain&&S.style.map.terrain.getTerrainData(nt),Et=ge.getMeshFromTileID(ee,nt.canonical,!1,!0,"raster");Ge.draw(ee,ve.TRIANGLES,Be,De,Te,wn.backCCW,Nt,$t,ot,M.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}(t,0,m,p,y):a.ck(m)&&function(S,I,M,L){const{isRenderingGlobe:B}=L,G=S.context,N=M.implementation,W=S.style.projection,ee=S.transform,ve=ee.getProjectionDataForCustomLayer(B),ge={farZ:ee.farZ,nearZ:ee.nearZ,fov:ee.fov*Math.PI/180,modelViewProjectionMatrix:ee.modelViewProjectionMatrix,projectionMatrix:ee.projectionMatrix,shaderData:{variantName:W.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${W.shaderPreludeCode.vertexSource}`,define:W.shaderDefine},defaultProjectionData:ve},ye=N.renderingMode?N.renderingMode:"2d";if(S.renderPass==="offscreen"){const we=N.prerender;we&&(S.setCustomLayerDefaults(),G.setColorMode(S.colorModeForRenderPass()),we.call(N,G.gl,ge),G.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),G.setColorMode(S.colorModeForRenderPass()),G.setStencilMode(mn.disabled);const we=ye==="3d"?S.getDepthModeFor3D():S.getDepthModeForSublayer(0,Cn.ReadOnly);G.setDepthMode(we),N.render(G.gl,ge),G.setDirty(),S.setBaseState(),G.bindFramebuffer.set(null)}}(t,0,m,y))}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),m=this.imageManager.getPattern(t.to.toString());return!o||!m}useProgram(t,o,m=!1,p=[]){this.cache=this.cache||{};const y=!!this.style.map.terrain,S=this.style.projection,I=m?Ga.projectionMercator:S.shaderPreludeCode,M=m?Qs:S.shaderDefine,L=t+(o?o.cacheKey:"")+`/${m?ih:S.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[L]||(this.cache[L]=new gc(this.context,Ga[t],o,Nm[t],this._showOverdrawInspector,y,I,M,p)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:o}=this.context.gl;return this.width!==t||this.height!==o}}function Lc(v,t){let o,m=!1,p=null,y=null;const S=()=>{p=null,m&&(v.apply(y,o),p=setTimeout(S,t),m=!1)};return(...I)=>(m=!0,y=this,o=I,p||S(),p)}class nu{constructor(t){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let m;return o.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(m=p)}),(m&&m[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:m,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const m=o.join("/");let p=m;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${m}`);let y=window.location.hash.replace(p,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let S=window.location.href.replace(/(#.+)?$/,y);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Lc(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const o=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,p=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,p),S=Math.round(o.lng*y)/y,I=Math.round(o.lat*y)/y,M=this._map.getBearing(),L=this._map.getPitch();let B="";if(B+=t?`/${S}/${I}/${m}`:`${m}/${I}/${S}`,(M||L)&&(B+="/"+Math.round(10*M)/10),L&&(B+=`/${Math.round(L)}`),this._hashName){const G=this._hashName;let N=!1;const W=window.location.hash.slice(1).split("&").map(ee=>{const ve=ee.split("=")[0];return ve===G?(N=!0,`${ve}=${B}`):ee}).filter(ee=>ee);return N||W.push(`${G}=${B}`),`#${W.join("&")}`}return`#${B}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new a.S(+t[2],+t[1])}catch{return!1}const o=+t[0],m=+(t[3]||0),p=+(t[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&m>=-180&&m<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const Yo={linearity:.3,easing:a.cl(0,0,.3,1)},Xo=a.e({deceleration:2500,maxSpeed:1400},Yo),Ah=a.e({deceleration:20,maxSpeed:1400},Yo),iu=a.e({deceleration:1e3,maxSpeed:360},Yo),Eh=a.e({deceleration:1e3,maxSpeed:90},Yo),ap=a.e({deceleration:1e3,maxSpeed:360},Yo);class sp{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=A.now();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)o.zoom+=y.zoomDelta||0,o.bearing+=y.bearingDelta||0,o.pitch+=y.pitchDelta||0,o.roll+=y.rollDelta||0,y.panDelta&&o.pan._add(y.panDelta),y.around&&(o.around=y.around),y.pinchAround&&(o.pinchAround=y.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(o.pan.mag()){const y=Qo(o.pan.mag(),m,a.e({},Xo,t||{})),S=o.pan.mult(y.amount/o.pan.mag()),I=this._map.cameraHelper.handlePanInertia(S,this._map.transform);p.center=I.easingCenter,p.offset=I.easingOffset,Jo(p,y)}if(o.zoom){const y=Qo(o.zoom,m,Ah);p.zoom=this._map.transform.zoom+y.amount,Jo(p,y)}if(o.bearing){const y=Qo(o.bearing,m,iu);p.bearing=this._map.transform.bearing+a.ag(y.amount,-179,179),Jo(p,y)}if(o.pitch){const y=Qo(o.pitch,m,Eh);p.pitch=this._map.transform.pitch+y.amount,Jo(p,y)}if(o.roll){const y=Qo(o.roll,m,ap);p.roll=this._map.transform.roll+a.ag(y.amount,-179,179),Jo(p,y)}if(p.zoom||p.bearing){const y=o.pinchAround===void 0?o.around:o.pinchAround;p.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),a.e(p,{noMoveStart:!0})}}function Jo(v,t){(!v.duration||v.duration<t.duration)&&(v.duration=t.duration,v.easing=t.easing)}function Qo(v,t,o){const{maxSpeed:m,linearity:p,deceleration:y}=o,S=a.ag(v*p/(t/1e3),-m,m),I=Math.abs(S)/(y*p);return{easing:o.easing,duration:1e3*I,amount:S*(I/2)}}class Kr extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m,p={}){m=m instanceof MouseEvent?m:new MouseEvent(t,m);const y=P.mousePos(o.getCanvas(),m),S=o.unproject(y);super(t,a.e({point:y,lngLat:S,originalEvent:m},p)),this._defaultPrevented=!1,this.target=o}}class Ia extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){const p=t==="touchend"?m.changedTouches:m.touches,y=P.touchPos(o.getCanvasContainer(),p),S=y.map(M=>o.unproject(M)),I=y.reduce((M,L,B,G)=>M.add(L.div(G.length)),new a.P(0,0));super(t,{points:y,point:I,lngLats:S,lngLat:o.unproject(I),originalEvent:m}),this._defaultPrevented=!1}}class Mh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){super(t,{originalEvent:m}),this._defaultPrevented=!1}}class op{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Mh(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Kr(t.type,this._map,t))}mouseup(t){this._map.fire(new Kr(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Kr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Kr(t.type,this._map,t))}mouseover(t){this._map.fire(new Kr(t.type,this._map,t))}mouseout(t){this._map.fire(new Kr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Ia(t.type,this._map,t))}touchmove(t){this._map.fire(new Ia(t.type,this._map,t))}touchend(t){this._map.fire(new Ia(t.type,this._map,t))}touchcancel(t){this._map.fire(new Ia(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lp{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Kr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Kr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Kr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class el{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(a.P.convert(t),this._map.terrain)}}class Dh{constructor(t,o){this._map=t,this._tr=new el(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(P.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const m=o;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=m,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const y=Math.min(p.x,m.x),S=Math.max(p.x,m.x),I=Math.min(p.y,m.y),M=Math.max(p.y,m.y);P.setTransform(this._box,`translate(${y}px,${I}px)`),this._box.style.width=S-y+"px",this._box.style.height=M-I+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const m=this._startPos,p=o;if(this.reset(),P.suppressClick(),m.x!==p.x||m.y!==p.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:t})),{cameraAnimation:y=>y.fitScreenCoordinates(m,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new a.l(t,{originalEvent:o}))}}function zc(v,t){if(v.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${t.length}`);const o={};for(let m=0;m<v.length;m++)o[v[m].identifier]=t[m];return o}class up{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),m.length===this.numTouches&&(this.centroid=function(p){const y=new a.P(0,0);for(const S of p)y._add(S);return y.div(p.length)}(o),this.touches=zc(m,o)))}touchmove(t,o,m){if(this.aborted||!this.centroid)return;const p=zc(m,o);for(const y in this.touches){const S=p[y];(!S||S.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(t,o,m){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Vc{constructor(t){this.singleTap=new up(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,m){this.singleTap.touchstart(t,o,m)}touchmove(t,o,m){this.singleTap.touchmove(t,o,m)}touchend(t,o,m){const p=this.singleTap.touchend(t,o,m);if(p){const y=t.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(p)<30;if(y&&S||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Bc{constructor(t){this._tr=new el(t),this._zoomIn=new Vc({numTouches:1,numTaps:2}),this._zoomOut=new Vc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,m){this._zoomIn.touchstart(t,o,m),this._zoomOut.touchstart(t,o,m)}touchmove(t,o,m){this._zoomIn.touchmove(t,o,m),this._zoomOut.touchmove(t,o,m)}touchend(t,o,m){const p=this._zoomIn.touchend(t,o,m),y=this._zoomOut.touchend(t,o,m),S=this._tr;return p?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(p)},{originalEvent:t})}):y?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(y)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tl{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const o=this._moveFunction(...t);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(t,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,o){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const p=Array.isArray(o)?o[0]:o;return!this._moved&&p.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(m,p))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&P.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Sa=0,Aa=2,cp={[Sa]:1,[Aa]:2};class Fr{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const o=P.mouseButton(t);this._eventButton=o}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(o,m){const p=cp[m];return o.buttons===void 0||(o.buttons&p)!==p}(t,this._eventButton)}isValidEndEvent(t){return P.mouseButton(t)===this._eventButton}}class nl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class Rv{constructor(t=new Fr({checkCorrectEvent:()=>!0}),o=new nl){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(t,o,m){return t instanceof MouseEvent?o(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?m(t):void 0}startMove(t){this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(t){this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}const Oc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=t=>{t.preventDefault()}};class Lv{constructor(t,o){this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,o,m){return this._calculateTransform(t,o,m)}touchmove(t,o,m){if(this._active){if(!this._shouldBePrevented(m.length))return t.preventDefault(),this._calculateTransform(t,o,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,o,m){this._calculateTransform(t,o,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,m){m.length>0&&(this._active=!0);const p=zc(m,o),y=new a.P(0,0),S=new a.P(0,0);let I=0;for(const L in p){const B=p[L],G=this._touches[L];G&&(y._add(B),S._add(B.sub(G)),I++,p[L]=B)}if(this._touches=p,this._shouldBePrevented(I)||!S.mag())return;const M=S.div(I);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(I),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,o,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,m){if(!this._firstTwoTouches)return;t.preventDefault();const[p,y]=this._firstTwoTouches,S=ru(m,o,p),I=ru(m,o,y);if(!S||!I)return;const M=this._aroundCenter?null:S.add(I).div(2);return this._move([S,I],M,t)}touchend(t,o,m){if(!this._firstTwoTouches)return;const[p,y]=this._firstTwoTouches,S=ru(m,o,p),I=ru(m,o,y);S&&I||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ru(v,t,o){for(let m=0;m<v.length;m++)if(v[m].identifier===o)return t[m]}function il(v,t){return Math.log(v/t)/Math.LN2}class Wa extends Rh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const m=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(il(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:il(this._distance,m),pinchAround:o}}}function Kt(v,t){return 180*v.angleWith(t)/Math.PI}class Lh extends Rh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o,m){const p=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Kt(this._vector,p),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,m=Kt(t,this._startVector);return Math.abs(m)<o}}function au(v){return Math.abs(v.y)>Math.abs(v.x)}class zh extends Rh{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,m){super.touchstart(t,o,m),this._currentTouchCount=m.length}_start(t){this._lastPoints=t,au(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=t[0].sub(this._lastPoints[0]),y=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,y,m.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(p.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,m){if(this._valid!==void 0)return this._valid;const p=t.mag()>=2,y=o.mag()>=2;if(!p&&!y)return;if(!p||!y)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const S=t.y>0==o.y>0;return au(t)&&au(o)&&S}}const su={panStep:100,bearingStep:15,pitchStep:10};class rl{constructor(t){this._tr=new el(t);const o=su;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,m=0,p=0,y=0,S=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?m=-1:(t.preventDefault(),y=-1);break;case 39:t.shiftKey?m=1:(t.preventDefault(),y=1);break;case 38:t.shiftKey?p=1:(t.preventDefault(),S=-1);break;case 40:t.shiftKey?p=-1:(t.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(m=0,p=0),{cameraAnimation:I=>{const M=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Vh,zoom:o?Math.round(M.zoom)+o*(t.shiftKey?2:1):M.zoom,bearing:M.bearing+m*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-y*this._panStep,-S*this._panStep],center:M.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Vh(v){return v*(2-v)}const Bn=4.000244140625,Bh=1/450;class dp{constructor(t,o){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=t,this._tr=new el(t),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bh}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const m=A.now(),p=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,o!==0&&o%Bn==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(p*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=P.mousePos(this._map.getCanvas(),t),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(a.S.convert(m.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Bn?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&M!==0&&(M=1/M);const L=typeof this._targetZoom!="number"?t.scale:a.ae(this._targetZoom);this._targetZoom=t.getConstrained(t.getCameraLngLat(),a.aj(L*M)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,m=this._startZoom,p=this._easing;let y,S=!1;if(this._type==="wheel"&&m&&p){const I=A.now()-this._lastWheelEventTime,M=Math.min((I+5)/200,1),L=p(M);y=a.C.number(m,o,L),M<1?this._frameId||(this._frameId=!0):S=!0}else y=o,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!S,zoomDelta:y-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=a.cn;if(this._prevEase){const m=this._prevEase,p=(A.now()-m.start)/m.duration,y=m.easing(p+.01)-m.easing(p),S=.27/Math.sqrt(y*y+1e-4)*.01,I=Math.sqrt(.0729-S*S);o=a.cl(S,I,.25,1)}return this._prevEase={start:A.now(),duration:t,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Fc{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zv{constructor(t){this._tr=new el(t),this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vv{constructor(){this._tap=new Vc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,o,m){if(!this._swipePoint)if(this._tapTime){const p=o[0],y=t.timeStamp-this._tapTime<500,S=this._tapPoint.dist(p)<30;y&&S?m.length>0&&(this._swipePoint=p,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(t,o,m)}touchmove(t,o,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const p=o[0],y=p.y-this._swipePoint.y;return this._swipePoint=p,t.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(t,o,m)}touchend(t,o,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const p=this._tap.touchend(t,o,m);p&&(this._tapTime=t.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oh{constructor(t,o,m){this._el=t,this._mousePan=o,this._touchPan=m}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $c{constructor(t,o,m,p){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=o,this._mousePitch=m,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Fh{constructor(t,o,m,p){this._el=t,this._touchZoom=o,this._touchRotate=m,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class hp{constructor(t,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",t);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=o,this._container.appendChild(p);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=m,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,o){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:t,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ou=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class Bv extends a.l{}function $h(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class Is{constructor(t,o){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,y)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=p.type==="renderFrame"?void 0:p,I={needsRenderFrame:!1},M={},L={};for(const{handlerName:N,handler:W,allowed:ee}of this._handlers){if(!W.isEnabled())continue;let ve;if(this._blockedByActive(L,ee,N))W.reset();else if(W[y||p.type]){if(a.co(p,y||p.type)){const ge=P.mousePos(this._map.getCanvas(),p);ve=W[y||p.type](p,ge)}else if(a.cp(p,y||p.type)){const ge=this._getMapTouches(p.touches),ye=P.touchPos(this._map.getCanvas(),ge);ve=W[y||p.type](p,ye,ge)}else a.cq(y||p.type)||(ve=W[y||p.type](p));this.mergeHandlerResult(I,M,ve,N,S),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()}(ve||W.isActive())&&(L[N]=W)}const B={};for(const N in this._previousActiveHandlers)L[N]||(B[N]=S);this._previousActiveHandlers=L,(Object.keys(B).length||$h(I))&&(this._changes.push([I,M,B]),this._triggerRenderFrame()),(Object.keys(L).length||$h(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=I;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sp(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,y,S]of this._listeners)P.addEventListener(p,y,p===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[t,o,m]of this._listeners)P.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(t){const o=this._map,m=o.getCanvasContainer();this._add("mapEvent",new op(o,t));const p=o.boxZoom=new Dh(o,t);this._add("boxZoom",p),t.interactive&&t.boxZoom&&p.enable();const y=o.cooperativeGestures=new hp(o,t.cooperativeGestures);this._add("cooperativeGestures",y),t.cooperativeGestures&&y.enable();const S=new Bc(o),I=new zv(o);o.doubleClickZoom=new Fc(I,S),this._add("tapZoom",S),this._add("clickZoom",I),t.interactive&&t.doubleClickZoom&&o.doubleClickZoom.enable();const M=new Vv;this._add("tapDragZoom",M);const L=o.touchPitch=new zh(o);this._add("touchPitch",L),t.interactive&&t.touchPitch&&o.touchPitch.enable(t.touchPitch);const B=()=>o.project(o.getCenter()),G=function({enable:ke,clickTolerance:De,aroundCenter:Be=!0,minPixelCenterThreshold:Te=100,rotateDegreesPerPixelMoved:Ge=.8},at){const tt=new Fr({checkCorrectEvent:nt=>P.mouseButton(nt)===0&&nt.ctrlKey||P.mouseButton(nt)===2&&!nt.ctrlKey});return new tl({clickTolerance:De,move:(nt,ot)=>{const Nt=at();if(Be&&Math.abs(Nt.y-nt.y)>Te)return{bearingDelta:a.cm(new a.P(nt.x,ot.y),ot,Nt)};let $t=(ot.x-nt.x)*Ge;return Be&&ot.y<Nt.y&&($t=-$t),{bearingDelta:$t}},moveStateManager:tt,enable:ke,assignEvents:Oc})}(t,B),N=function({enable:ke,clickTolerance:De,pitchDegreesPerPixelMoved:Be=-.5}){const Te=new Fr({checkCorrectEvent:Ge=>P.mouseButton(Ge)===0&&Ge.ctrlKey||P.mouseButton(Ge)===2});return new tl({clickTolerance:De,move:(Ge,at)=>({pitchDelta:(at.y-Ge.y)*Be}),moveStateManager:Te,enable:ke,assignEvents:Oc})}(t),W=function({enable:ke,clickTolerance:De,rollDegreesPerPixelMoved:Be=.3},Te){const Ge=new Fr({checkCorrectEvent:at=>P.mouseButton(at)===2&&at.ctrlKey});return new tl({clickTolerance:De,move:(at,tt)=>{const nt=Te();let ot=(tt.x-at.x)*Be;return tt.y<nt.y&&(ot=-ot),{rollDelta:ot}},moveStateManager:Ge,enable:ke,assignEvents:Oc})}(t,B);o.dragRotate=new $c(t,G,N,W),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",N,["mouseRotate","mouseRoll"]),this._add("mouseRoll",W,["mousePitch"]),t.interactive&&t.dragRotate&&o.dragRotate.enable();const ee=function({enable:ke,clickTolerance:De}){const Be=new Fr({checkCorrectEvent:Te=>P.mouseButton(Te)===0&&!Te.ctrlKey});return new tl({clickTolerance:De,move:(Te,Ge)=>({around:Ge,panDelta:Ge.sub(Te)}),activateOnStart:!0,moveStateManager:Be,enable:ke,assignEvents:Oc})}(t),ve=new Lv(t,o);o.dragPan=new Oh(m,ee,ve),this._add("mousePan",ee),this._add("touchPan",ve,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&o.dragPan.enable(t.dragPan);const ge=new Lh,ye=new Wa;o.touchZoomRotate=new Fh(m,ye,ge,M),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&o.touchZoomRotate.enable(t.touchZoomRotate);const we=o.scrollZoom=new dp(o,()=>this._triggerRenderFrame());this._add("scrollZoom",we,["mousePan"]),t.interactive&&t.scrollZoom&&o.scrollZoom.enable(t.scrollZoom);const Ae=o.keyboard=new rl(o);this._add("keyboard",Ae),t.interactive&&t.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new lp(o))}_add(t,o,m){this._handlers.push({handlerName:t,handler:o,allowed:m}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ou(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,m){for(const p in t)if(p!==m&&(!o||o.indexOf(p)<0))return!0;return!1}_getMapTouches(t){const o=[];for(const m of t)this._el.contains(m.target)&&o.push(m);return o}mergeHandlerResult(t,o,m,p,y){if(!m)return;a.e(t,m);const S={handlerName:p,originalEvent:m.originalEvent||y};m.zoomDelta!==void 0&&(o.zoom=S),m.panDelta!==void 0&&(o.drag=S),m.rollDelta!==void 0&&(o.roll=S),m.pitchDelta!==void 0&&(o.pitch=S),m.bearingDelta!==void 0&&(o.rotate=S)}_applyChanges(){const t={},o={},m={};for(const[p,y,S]of this._changes)p.panDelta&&(t.panDelta=(t.panDelta||new a.P(0,0))._add(p.panDelta)),p.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(t.rollDelta=(t.rollDelta||0)+p.rollDelta),p.around!==void 0&&(t.around=p.around),p.pinchAround!==void 0&&(t.pinchAround=p.pinchAround),p.noInertia&&(t.noInertia=p.noInertia),a.e(o,y),a.e(m,S);this._updateMapTransform(t,o,m),this._changes=[]}_updateMapTransform(t,o,m){const p=this._map,y=p._getTransformForUpdate(),S=p.terrain;if(!($h(t)||S&&this._terrainMovement))return this._fireEvents(o,m,!0);p._stop(!0);let{panDelta:I,zoomDelta:M,bearingDelta:L,pitchDelta:B,rollDelta:G,around:N,pinchAround:W}=t;W!==void 0&&(N=W),N=N||p.transform.centerPoint,S&&!y.isPointOnMapSurface(N)&&(N=y.centerPoint);const ee={panDelta:I,zoomDelta:M,rollDelta:G,pitchDelta:B,bearingDelta:L,around:N};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(N)&&(N=y.centerPoint);const ve=N.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(I?N.sub(I):N);S?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,y),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(I))):this._map.cameraHelper.handleMapControlsPan(ee,y,ve):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ee,y,ve))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,y),this._map.cameraHelper.handleMapControlsPan(ee,y,ve)),p._applyUpdatedTransform(y),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,m,!0)}_fireEvents(t,o,m){const p=ou(this._eventsInProgress),y=ou(t),S={};for(const G in t){const{originalEvent:N}=t[G];this._eventsInProgress[G]||(S[`${G}start`]=N),this._eventsInProgress[G]=t[G]}!p&&y&&this._fireEvent("movestart",y.originalEvent);for(const G in S)this._fireEvent(G,S[G]);y&&this._fireEvent("move",y.originalEvent);for(const G in t){const{originalEvent:N}=t[G];this._fireEvent(G,N)}const I={};let M;for(const G in this._eventsInProgress){const{handlerName:N,originalEvent:W}=this._eventsInProgress[G];this._handlersById[N].isActive()||(delete this._eventsInProgress[G],M=o[N]||W,I[`${G}end`]=M)}for(const G in I)this._fireEvent(G,I[G]);const L=ou(this._eventsInProgress),B=(p||y)&&!L;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const G=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&G.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(G)}if(m&&B){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=W=>W!==0&&-this._bearingSnap<W&&W<this._bearingSnap;!G||!G.essential&&A.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:M})),N(this._map.getBearing())&&this._map.resetNorth()):(N(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new a.l(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Bv("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class mi extends a.E{constructor(t,o,m){super(),this._renderFrameCallback=()=>{const p=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=m.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(t,o){t.apply(this.transform),this.transform=t,this.cameraHelper=o}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,o){return this.jumpTo({elevation:t},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,o,m){return t=a.P.convert(t).mult(-1),this.panTo(this.transform.center,a.e({offset:t},o),m)}panTo(t,o,m){return this.easeTo(a.e({center:t},o),m)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,m){return this.easeTo(a.e({zoom:t},o),m)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,o){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)).fire(new a.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,m){return this.easeTo(a.e({bearing:t},o),m)}resetNorth(t,o){return this.rotateTo(0,a.e({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}getRoll(){return this.transform.roll}setRoll(t,o){return this.jumpTo({roll:t},o),this}cameraForBounds(t,o){t=ue.convert(t).adjustAntiMeridian();const m=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),m,o)}_cameraForBoxAndBearing(t,o,m,p){const y={top:0,bottom:0,right:0,left:0};if(typeof(p=a.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const L=p.padding;p.padding={top:L,bottom:L,right:L,left:L}}const S=a.e(y,p.padding);p.padding=S;const I=this.transform,M=new ue(t,o);return this.cameraHelper.cameraForBoxAndBearing(p,S,M,m,I)}fitBounds(t,o,m){return this._fitInternal(this.cameraForBounds(t,o),o,m)}fitScreenCoordinates(t,o,m,p,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(t)),this.transform.screenPointToLocation(a.P.convert(o)),m,p),p,y)}_fitInternal(t,o,m){return t?(delete(o=a.e(t,o)).padding,o.linear?this.easeTo(o,m):this.flyTo(o,m)):this}jumpTo(t,o){this.stop();const m=this._getTransformForUpdate();let p=!1,y=!1,S=!1;const I=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,t);const M=m.zoom!==I;return"elevation"in t&&m.elevation!==+t.elevation&&m.setElevation(+t.elevation),"bearing"in t&&m.bearing!==+t.bearing&&(p=!0,m.setBearing(+t.bearing)),"pitch"in t&&m.pitch!==+t.pitch&&(y=!0,m.setPitch(+t.pitch)),"roll"in t&&m.roll!==+t.roll&&(S=!0,m.setRoll(+t.roll)),t.padding==null||m.isPaddingEqual(t.padding)||m.setPadding(t.padding),this._applyUpdatedTransform(m),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)),M&&this.fire(new a.l("zoomstart",o)).fire(new a.l("zoom",o)).fire(new a.l("zoomend",o)),p&&this.fire(new a.l("rotatestart",o)).fire(new a.l("rotate",o)).fire(new a.l("rotateend",o)),y&&this.fire(new a.l("pitchstart",o)).fire(new a.l("pitch",o)).fire(new a.l("pitchend",o)),S&&this.fire(new a.l("rollstart",o)).fire(new a.l("roll",o)).fire(new a.l("rollend",o)),this.fire(new a.l("moveend",o))}calculateCameraOptionsFromTo(t,o,m,p=0){const y=a.a0.fromLngLat(t,o),S=a.a0.fromLngLat(m,p),I=S.x-y.x,M=S.y-y.y,L=S.z-y.z,B=Math.hypot(I,M,L);if(B===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(I,M),N=a.aj(this.transform.cameraToCenterDistance/B/this.transform.tileSize),W=180*Math.atan2(I,-M)/Math.PI;let ee=180*Math.acos(G/B)/Math.PI;return ee=L<0?90-ee:90+ee,{center:S.toLngLat(),elevation:p,zoom:N,pitch:ee,bearing:W}}calculateCameraOptionsFromCameraLngLatAltRotation(t,o,m,p,y){const S=this.transform.calculateCenterFromCameraLngLatAlt(t,o,m,p);return{center:S.center,elevation:S.elevation,zoom:S.zoom,bearing:m,pitch:p,roll:y}}easeTo(t,o){this._stop(!1,t.easeId),((t=a.e({offset:[0,0],duration:500,easing:a.cn},t)).animate===!1||!t.essential&&A.prefersReducedMotion)&&(t.duration=0);const m=this._getTransformForUpdate(),p=this.getBearing(),y=m.pitch,S=m.roll,I="bearing"in t?this._normalizeBearing(t.bearing,p):p,M="pitch"in t?+t.pitch:y,L="roll"in t?this._normalizeBearing(t.roll,S):S,B="padding"in t?t.padding:m.padding,G=a.P.convert(t.offset);let N,W;t.around&&(N=a.S.convert(t.around),W=m.locationToScreenPoint(N));const ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ve=this.cameraHelper.handleEaseTo(m,{bearing:I,pitch:M,roll:L,padding:B,around:N,aroundPoint:W,offsetAsPoint:G,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||p!==I,this._pitching=this._pitching||M!==y,this._rolling=this._rolling||L!==S,this._padding=!m.isPaddingEqual(B),this._zooming=this._zooming||ve.isZooming,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,ee),this.terrain&&this._prepareElevation(ve.elevationCenter),this._ease(ge=>{ve.easeFunc(ge),this.terrain&&!t.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(m),this._fireMoveEvents(o)},ge=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o,ge)},t),this}_prepareEase(t,o,m={}){this._moving=!0,o||m.moving||this.fire(new a.l("movestart",t)),this._zooming&&!m.zooming&&this.fire(new a.l("zoomstart",t)),this._rotating&&!m.rotating&&this.fire(new a.l("rotatestart",t)),this._pitching&&!m.pitching&&this.fire(new a.l("pitchstart",t)),this._rolling&&!m.rolling&&this.fire(new a.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&o!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(m-(o-(m*t+this._elevationStart))/(1-t)),this._elevationTarget=o}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const o=t.getCameraLngLat(),m=t.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(o,t.zoom):0;if(m<p){const y=this.calculateCameraOptionsFromTo(o,p,t.center,t.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(t){const o=[];if(o.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&o.push(p=>this.transformCameraUpdate(p)),!o.length)return;const m=t.clone();for(const p of o){const y=m.clone(),{center:S,zoom:I,roll:M,pitch:L,bearing:B,elevation:G}=p(y);S&&y.setCenter(S),G!==void 0&&y.setElevation(G),I!==void 0&&y.setZoom(I),M!==void 0&&y.setRoll(M),L!==void 0&&y.setPitch(L),B!==void 0&&y.setBearing(B),m.apply(y)}this.transform.apply(m)}_fireMoveEvents(t){this.fire(new a.l("move",t)),this._zooming&&this.fire(new a.l("zoom",t)),this._rotating&&this.fire(new a.l("rotate",t)),this._pitching&&this.fire(new a.l("pitch",t)),this._rolling&&this.fire(new a.l("roll",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const m=this._zooming,p=this._rotating,y=this._pitching,S=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new a.l("zoomend",t)),p&&this.fire(new a.l("rotateend",t)),y&&this.fire(new a.l("pitchend",t)),S&&this.fire(new a.l("rollend",t)),this.fire(new a.l("moveend",t))}flyTo(t,o){if(!t.essential&&A.prefersReducedMotion){const ot=a.Q(t,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(ot,o)}this.stop(),t=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cn},t);const m=this._getTransformForUpdate(),p=m.bearing,y=m.pitch,S=m.roll,I=m.padding,M="bearing"in t?this._normalizeBearing(t.bearing,p):p,L="pitch"in t?+t.pitch:y,B="roll"in t?this._normalizeBearing(t.roll,S):S,G="padding"in t?t.padding:m.padding,N=a.P.convert(t.offset);let W=m.centerPoint.add(N);const ee=m.screenPointToLocation(W),ve=this.cameraHelper.handleFlyTo(m,{bearing:M,pitch:L,roll:B,padding:G,locationAtOffset:ee,offsetAsPoint:N,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let ge=t.curve;const ye=Math.max(m.width,m.height),we=ye/ve.scaleOfZoom,Ae=ve.pixelPathLength;typeof ve.scaleOfMinZoom=="number"&&(ge=Math.sqrt(ye/ve.scaleOfMinZoom/Ae*2));const ke=ge*ge;function De(ot){const Nt=(we*we-ye*ye+(ot?-1:1)*ke*ke*Ae*Ae)/(2*(ot?we:ye)*ke*Ae);return Math.log(Math.sqrt(Nt*Nt+1)-Nt)}function Be(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Te(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const Ge=De(!1);let at=function(ot){return Te(Ge)/Te(Ge+ge*ot)},tt=function(ot){return ye*((Te(Ge)*(Be(Nt=Ge+ge*ot)/Te(Nt))-Be(Ge))/ke)/Ae;var Nt},nt=(De(!0)-Ge)/ge;if(Math.abs(Ae)<2e-6||!isFinite(nt)){if(Math.abs(ye-we)<1e-6)return this.easeTo(t,o);const ot=we<ye?-1:1;nt=Math.abs(Math.log(we/ye))/ge,tt=()=>0,at=Nt=>Math.exp(ot*ge*Nt)}return t.duration="duration"in t?+t.duration:1e3*nt/("screenSpeed"in t?+t.screenSpeed/ge:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=p!==M,this._pitching=L!==y,this._rolling=B!==S,this._padding=!m.isPaddingEqual(G),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(ve.targetCenter),this._ease(ot=>{const Nt=ot*nt,$t=1/at(Nt),Et=tt(Nt);this._rotating&&m.setBearing(a.C.number(p,M,ot)),this._pitching&&m.setPitch(a.C.number(y,L,ot)),this._rolling&&m.setRoll(a.C.number(S,B,ot)),this._padding&&(m.interpolatePadding(I,G,ot),W=m.centerPoint.add(N)),ve.easeFunc(ot,$t,Et,W),this.terrain&&!t.freezeElevation&&this._updateElevation(ot),this._applyUpdatedTransform(m),this._fireMoveEvents(o)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,o)}return t||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(t,o,m){m.animate===!1||m.duration===0?(t(1),o()):(this._easeStart=A.now(),this._easeOptions=m,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,o){t=a.aN(t,-180,180);const m=Math.abs(t-o);return Math.abs(t-360-o)<m&&(t-=360),Math.abs(t+360-o)<m&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(t),this.transform.tileZoom):null}}const lu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class jc{constructor(t=lu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const m=this._map._getUIString(`AttributionControl.${o}`);t.title=m,t.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const o=this._map.style.sourceCaches;for(const p in o){const y=o[p];if(y.used||y.usedForTerrain){const S=y.getSource();S.attribution&&t.indexOf(S.attribution)<0&&t.push(S.attribution)}}t=t.filter(p=>String(p).trim()),t.sort((p,y)=>p.length-y.length),t=t.filter((p,y)=>{for(let S=y+1;S<t.length;S++)if(t[S].indexOf(p)>=0)return!1;return!0});const m=t.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,t.length?(this._innerContainer.innerHTML=P.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class jh{constructor(t={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const m=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const o=P.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class fp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,m=o?this._queue.concat(o):this._queue;for(const p of m)if(p.id===t)return void(p.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const m of o)if(!m.cancelled&&(m.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mp=a.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Ov extends a.E{constructor(t){super(),this._lastTilesetChange=A.now(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,o){this.sourceCache.update(t,o),this._renderableTilesKeys=[];const m={};for(const p of pt(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))m[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),a.bX(p.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[p.key]=new Rn(p,this.tileSize),this._lastTilesetChange=A.now());for(const p in this._tiles)m[p]||delete this._tiles[p]}freeRtt(t){for(const o in this._tiles){const m=this._tiles[o];(!t||m.tileID.equals(t)||m.tileID.isChildOf(t)||t.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,o){return o?this._getTerrainCoordsForTileRanges(t,o):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const o={};for(const m of this._renderableTilesKeys){const p=this._tiles[m].tileID,y=t.clone(),S=a.b9();if(p.canonical.equals(t.canonical))a.bX(S,0,a.$,a.$,0,0,1);else if(p.canonical.isChildOf(t.canonical)){const I=p.canonical.z-t.canonical.z,M=p.canonical.x-(p.canonical.x>>I<<I),L=p.canonical.y-(p.canonical.y>>I<<I),B=a.$>>I;a.bX(S,0,B,B,0,0,1),a.M(S,S,[-M*B,-L*B,0])}else{if(!t.canonical.isChildOf(p.canonical))continue;{const I=t.canonical.z-p.canonical.z,M=t.canonical.x-(t.canonical.x>>I<<I),L=t.canonical.y-(t.canonical.y>>I<<I),B=a.$>>I;a.bX(S,0,a.$,a.$,0,0,1),a.M(S,S,[M*B,L*B,0]),a.N(S,S,[1/2**I,1/2**I,0])}}y.terrainRttPosMatrix32f=new Float32Array(S),o[m]=y}return o}_getTerrainCoordsForTileRanges(t,o){const m={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID;if(!this._isWithinTileRanges(y,o))continue;const S=t.clone(),I=a.b9();if(y.canonical.z===t.canonical.z){const M=t.canonical.x-y.canonical.x,L=t.canonical.y-y.canonical.y;a.bX(I,0,a.$,a.$,0,0,1),a.M(I,I,[M*a.$,L*a.$,0])}else if(y.canonical.z>t.canonical.z){const M=y.canonical.z-t.canonical.z,L=y.canonical.x-(y.canonical.x>>M<<M),B=y.canonical.y-(y.canonical.y>>M<<M),G=t.canonical.x-(y.canonical.x>>M),N=t.canonical.y-(y.canonical.y>>M),W=a.$>>M;a.bX(I,0,W,W,0,0,1),a.M(I,I,[-L*W+G*a.$,-B*W+N*a.$,0])}else{const M=t.canonical.z-y.canonical.z,L=t.canonical.x-(t.canonical.x>>M<<M),B=t.canonical.y-(t.canonical.y>>M<<M),G=(t.canonical.x>>M)-y.canonical.x,N=(t.canonical.y>>M)-y.canonical.y,W=a.$<<M;a.bX(I,0,W,W,0,0,1),a.M(I,I,[L*a.$+G*W,B*a.$+N*W,0])}S.terrainRttPosMatrix32f=new Float32Array(I),m[p]=S}return m}getSourceTile(t,o){const m=this.sourceCache._source;let p=t.overscaledZ-this.deltaZoom;if(p>m.maxzoom&&(p=m.maxzoom),p<m.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(p).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!y||!y.dem)&&o)for(;p>=m.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(t.scaledTo(p--).key);return y}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,o){return o[t.canonical.z]&&t.canonical.x>=o[t.canonical.z].minTileX&&t.canonical.x<=o[t.canonical.z].maxTileX&&t.canonical.y>=o[t.canonical.z].minTileY&&t.canonical.y<=o[t.canonical.z].maxTileY}}class Za{constructor(t,o,m){this._meshCache={},this.painter=t,this.sourceCache=new Ov(o),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,o,m,p=a.$){var y;if(!(o>=0&&o<p&&m>=0&&m<p))return 0;const S=this.getTerrainData(t),I=(y=S.tile)===null||y===void 0?void 0:y.dem;if(!I)return 0;const M=a.cr([],[o/p*a.$,m/p*a.$],S.u_terrain_matrix),L=[M[0]*I.dim,M[1]*I.dim],B=Math.floor(L[0]),G=Math.floor(L[1]),N=L[0]-B,W=L[1]-G;return I.get(B,G)*(1-N)*(1-W)+I.get(B+1,G)*N*(1-W)+I.get(B,G+1)*(1-N)*W+I.get(B+1,G+1)*N*W}getElevationForLngLatZoom(t,o){if(!a.cs(o,t.wrap()))return 0;const{tileID:m,mercatorX:p,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(t,o);return this.getElevation(m,p%a.$,y%a.$,a.$)}getElevation(t,o,m,p=a.$){return this.getDEMElevation(t,o,m,p)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const p=this.painter.context,y=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(p,y,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(p,new a.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.af([])}const o=this.sourceCache.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const p=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new a.T(p,o.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),o.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const m=o&&o+o.tileID.key+t.key;if(m&&!this._demMatrixCache[m]){const p=this.sourceCache.sourceCache._source.maxzoom;let y=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=p?y=t.canonical.z-p:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=t.canonical.x-(t.canonical.x>>y<<y),I=t.canonical.y-(t.canonical.y>>y<<y),M=a.ct(new Float64Array(16),[1/(a.$<<y),1/(a.$<<y),0]);a.M(M,M,[S*a.$,I*a.$,0]),this._demMatrixCache[t.key]={matrix:M,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(t){const o=this.painter,m=o.width/devicePixelRatio,p=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(o.context,{width:m,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(o.context,{width:m,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(m,p,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,m,p))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,S=0;y<this._coordsTextureSize;y++)for(let I=0;I<this._coordsTextureSize;I++,S+=4)o[S+0]=255&I,o[S+1]=255&y,o[S+2]=I>>8<<4|y>>8,o[S+3]=0;const m=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),p=new a.T(t,m,t.gl.RGBA,{premultiply:!1});return p.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),m=this.painter.context,p=m.gl,y=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(y,I-S-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null);const M=o[0]+(o[2]>>4<<8),L=o[1]+((15&o[2])<<8),B=this.coordsIndex[255-o[3]],G=B&&this.sourceCache.getTileByID(B);if(!G)return null;const N=this._coordsTextureSize,W=(1<<G.tileID.canonical.z)*N;return new a.a0((G.tileID.canonical.x*N+M)/W+G.tileID.wrap,(G.tileID.canonical.y*N+L)/W,this.getElevation(G.tileID,M,L,N))}depthAtPoint(t){const o=new Uint8Array(4),m=this.painter.context,p=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(t){var o;const m=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,p=m&&t.canonical.y===0,y=m&&t.canonical.y===(1<<t.canonical.z)-1,S=`m_${p?"n":""}_${y?"s":""}`;if(this._meshCache[S])return this._meshCache[S];const I=this.painter.context,M=new a.cu,L=new a.aM,B=this.meshSize,G=a.$/B,N=B*B;for(let Te=0;Te<=B;Te++)for(let Ge=0;Ge<=B;Ge++)M.emplaceBack(Ge*G,Te*G,0);for(let Te=0;Te<N;Te+=B+1)for(let Ge=0;Ge<B;Ge++)L.emplaceBack(Ge+Te,B+Ge+Te+1,B+Ge+Te+2),L.emplaceBack(Ge+Te,B+Ge+Te+2,Ge+Te+1);const W=M.length,ee=W+(B+1),ve=(B+1)*B,ge=p?a.bg:0,ye=p?0:1,we=y?a.bh:a.$,Ae=y?0:1;for(let Te=0;Te<=B;Te++)M.emplaceBack(Te*G,ge,ye);for(let Te=0;Te<=B;Te++)M.emplaceBack(Te*G,we,Ae);for(let Te=0;Te<B;Te++)L.emplaceBack(ve+Te,ee+Te,ee+Te+1),L.emplaceBack(ve+Te,ee+Te+1,ve+Te+1),L.emplaceBack(0+Te,W+Te+1,W+Te),L.emplaceBack(0+Te,0+Te+1,W+Te+1);const ke=M.length,De=ke+2*(B+1);for(const Te of[0,1])for(let Ge=0;Ge<=B;Ge++)for(const at of[0,1])M.emplaceBack(Te*a.$,Ge*G,at);for(let Te=0;Te<2*B;Te+=2)L.emplaceBack(ke+Te,ke+Te+1,ke+Te+3),L.emplaceBack(ke+Te,ke+Te+3,ke+Te+2),L.emplaceBack(De+Te,De+Te+3,De+Te+1),L.emplaceBack(De+Te,De+Te+2,De+Te+3);const Be=new is(I.createVertexBuffer(M,mp.members),I.createIndexBuffer(L),a.aL.simpleSegment(0,0,M.length,L.length));return this._meshCache[S]=Be,Be}getMeshFrameDelta(t){return 2*Math.PI*a.bt/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,o){var m;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(t,o);return(m=this.getMinMaxElevation(p).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,m={minElevation:null,maxElevation:null};return o&&o.dem&&(m.minElevation=o.dem.min*this.exaggeration,m.maxElevation=o.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(t,o){const m=a.a0.fromLngLat(t.wrap()),p=(1<<o)*a.$,y=m.x*p,S=m.y*p,I=Math.floor(y/a.$),M=Math.floor(S/a.$);return{tileID:new a.Z(o,0,o,I,M),mercatorX:y,mercatorY:S}}}class Nc{constructor(t,o,m){this._context=t,this._size=o,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(m.texture),{id:t,fbo:o,texture:m,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>t.id!==o),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}const Qt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class dn{constructor(t,o){this.painter=t,this.terrain=o,this.pool=new Nc(t.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(m=>!t._layers[m].isHidden(o)),this._coordsAscending={};for(const m in t.sourceCaches){this._coordsAscending[m]={};const p=t.sourceCaches[m].getVisibleCoordinates(),y=t.sourceCaches[m].getSource(),S=y instanceof ct?y.terrainTileRanges:null;for(const I of p){const M=this.terrain.sourceCache.getTerrainCoords(I,S);for(const L in M)this._coordsAscending[m][L]||(this._coordsAscending[m][L]=[]),this._coordsAscending[m][L].push(M[L])}}this._coordsAscendingStr={};for(const m of t._order){const p=t._layers[m],y=p.source;if(Qt[p.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(const S in this._coordsAscending[y])this._coordsAscendingStr[y][S]=this._coordsAscending[y][S].map(I=>I.key).sort().join()}}for(const m of this._renderableTiles)for(const p in this._coordsAscendingStr){const y=this._coordsAscendingStr[p][m.tileID.key];y&&y!==m.rttCoords[p]&&(m.rtt=[])}}renderLayer(t,o){if(t.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),p=t.type,y=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Qt[p]&&(this._prevType&&Qt[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(t.id),!S))return!0;if(Qt[this._prevType]||Qt[p]&&S){this._prevType=p;const I=this._stacks.length-1,M=this._stacks[I]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(Ii(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[I]){const G=this.pool.getObjectForId(L.rtt[I].id);if(G.stamp===L.rtt[I].stamp){this.pool.useObject(G);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),L.rtt[I]={id:B.id,stamp:B.stamp},y.context.bindFramebuffer.set(B.fbo.framebuffer),y.context.clear({color:a.be.transparent,stencil:0}),y.currentStencilSource=void 0;for(let G=0;G<M.length;G++){const N=y.style._layers[M[G]],W=N.source?this._coordsAscending[N.source][L.tileID.key]:[L.tileID];y.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),y._renderTileClippingMasks(N,W,!0),y.renderLayer(y,y.style.sourceCaches[N.source],N,W,m),N.source&&(L.rttCoords[N.source]=this._coordsAscendingStr[N.source][L.tileID.key])}}return Ii(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),Qt[p]}return!1}}const Uc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Nh=b,uu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:lu,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},$r={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class pp{constructor(t,o,m=!1){this.mousedown=y=>{this.startMove(y,P.mousePos(this.element,y)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,P.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHanlder.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const p=new Rv;this._rotatePitchHanlder=new tl({clickTolerance:3,move:(y,S)=>{const I=o.getBoundingClientRect(),M=new a.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:a.cm(new a.P(y.x,S.y),S,M),pitchDelta:m?-.5*(S.y-y.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=t,P.addEventListener(o,"mousedown",this.mousedown),P.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(o,"touchcancel",this.reset)}startMove(t,o){this._rotatePitchHanlder.dragStart(t,o),P.disableDrag()}move(t,o){const m=this.map,{bearingDelta:p,pitchDelta:y}=this._rotatePitchHanlder.dragMove(t,o)||{};p&&m.setBearing(m.getBearing()+p),y&&m.setPitch(m.getPitch()+y)}off(){const t=this.element;P.removeEventListener(t,"mousedown",this.mousedown),P.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let pr;function gp(v,t,o,m=!1){if(m||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return v==null?void 0:v.wrap();const p=new a.S(v.lng,v.lat);if(v=new a.S(v.lng,v.lat),t){const y=new a.S(v.lng-360,v.lat),S=new a.S(v.lng+360,v.lat),I=o.locationToScreenPoint(v).distSqr(t);o.locationToScreenPoint(y).distSqr(t)<I?v=y:o.locationToScreenPoint(S).distSqr(t)<I&&(v=S)}for(;Math.abs(v.lng-o.center.lng)>180;){const y=o.locationToScreenPoint(v);if(y.x>=0&&y.y>=0&&y.x<=o.width&&y.y<=o.height)break;v.lng>o.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(v))?v:p}const oo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xi(v,t,o){const m=v.classList;for(const p in oo)m.remove(`maplibregl-${o}-anchor-${p}`);m.add(`maplibregl-${o}-anchor-${t}`)}class Ai extends a.E{constructor(t){if(super(),this._onKeyPress=o=>{const m=o.code,p=o.charCode||o.keyCode;m!=="Space"&&m!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=o=>{const m=o.originalEvent.target,p=this._element;this._popup&&(m===p||p.contains(m))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=gp(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${oo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${p}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=a.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const o=P.createNS("http://www.w3.org/2000/svg","svg"),m=41,p=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${m}px`),o.setAttributeNS(null,"width",`${p}px`),o.setAttributeNS(null,"viewBox",`0 0 ${p} ${m}`);const y=P.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const S=P.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const I=P.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of M){const we=P.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",ye.rx),we.setAttributeNS(null,"ry",ye.ry),I.appendChild(we)}const L=P.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const B=P.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(B);const G=P.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const N=P.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(N);const W=P.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(6.0, 7.0)"),W.setAttributeNS(null,"fill","#FFFFFF");const ee=P.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ve=P.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#000000"),ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962");const ge=P.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ve),ee.appendChild(ge),S.appendChild(I),S.appendChild(L),S.appendChild(G),S.appendChild(W),S.appendChild(ee),o.appendChild(S),o.setAttributeNS(null,"height",m*this._scale+"px"),o.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(o),this._offset=a.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),xi(this._element,this._anchor,"marker"),t&&t.className)for(const o of t.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=a.S.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const p=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var o,m;const p=(o=this._map)===null||o===void 0?void 0:o.terrain,y=this._map.transform.isLocationOccluded(this._lngLat);if(!p||y){const W=y?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==W&&(this._element.style.opacity=W))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const S=this._map,I=S.terrain.depthAtPoint(this._pos),M=S.terrain.getElevationForLngLatZoom(this._lngLat,S.transform.tileZoom);if(S.transform.lngLatToCameraDepth(this._lngLat,M)-I<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/S.transform.pixelsPerMeter,B=Math.sin(S.getPitch()*Math.PI/180)*L,G=S.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),N=S.transform.lngLatToCameraDepth(this._lngLat,M+B)-G>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=a.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,o){return(this._opacity===void 0||t===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const vp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let As=0,Es=!1;const Uh={maxWidth:100,unit:"metric"};function Gc(v,t,o){const m=o&&o.maxWidth||100,p=v._container.clientHeight/2,y=v._container.clientWidth/2,S=v.unproject([y-m/2,p]),I=v.unproject([y+m/2,p]),M=Math.round(v.project(I).x-v.project(S).x),L=Math.min(m,M,v._container.clientWidth),B=S.distanceTo(I);if(o&&o.unit==="imperial"){const G=3.2808*B;G>5280?lo(t,L,G/5280,v._getUIString("ScaleControl.Miles")):lo(t,L,G,v._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?lo(t,L,B/1852,v._getUIString("ScaleControl.NauticalMiles")):B>=1e3?lo(t,L,B/1e3,v._getUIString("ScaleControl.Kilometers")):lo(t,L,B,v._getUIString("ScaleControl.Meters"))}function lo(v,t,o,m){const p=function(y){const S=Math.pow(10,`${Math.floor(y)}`.length-1);let I=y/S;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(M){const L=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*L)/L}(I),S*I}(o);v.style.width=t*(p/o)+"px",v.innerHTML=`${p}&nbsp;${m}`}const cu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Gh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hc(v){if(v){if(typeof v=="number"){const t=Math.round(Math.abs(v)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,v),"top-left":new a.P(t,t),"top-right":new a.P(-t,t),bottom:new a.P(0,-v),"bottom-left":new a.P(t,-t),"bottom-right":new a.P(-t,-t),left:new a.P(v,0),right:new a.P(-v,0)}}if(v instanceof a.P||Array.isArray(v)){const t=a.P.convert(v);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:a.P.convert(v.center||[0,0]),top:a.P.convert(v.top||[0,0]),"top-left":a.P.convert(v["top-left"]||[0,0]),"top-right":a.P.convert(v["top-right"]||[0,0]),bottom:a.P.convert(v.bottom||[0,0]),"bottom-left":a.P.convert(v["bottom-left"]||[0,0]),"bottom-right":a.P.convert(v["bottom-right"]||[0,0]),left:a.P.convert(v.left||[0,0]),right:a.P.convert(v.right||[0,0])}}return Hc(new a.P(0,0))}const Hh=b;d.AJAXError=a.cy,d.Event=a.l,d.Evented=a.E,d.LngLat=a.S,d.MercatorCoordinate=a.a0,d.Point=a.P,d.addProtocol=a.cz,d.config=a.a,d.removeProtocol=a.cA,d.AttributionControl=jc,d.BoxZoomHandler=Dh,d.CanvasSource=It,d.CooperativeGesturesHandler=hp,d.DoubleClickZoomHandler=Fc,d.DragPanHandler=Oh,d.DragRotateHandler=$c,d.EdgeInsets=_a,d.FullscreenControl=class extends a.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var t;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=o==null?void 0:o.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=Pt,d.GeolocateControl=class extends a.E{constructor(v){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const o=new a.S(t.coords.longitude,t.coords.latitude),m=t.coords.accuracy,p=this._map.getBearing(),y=a.e({bearing:p},this.options.fitBoundsOptions),S=ue.fromLngLat(o,m);this._map.fitBounds(S,y,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const o=new a.S(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Es)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ai({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ai({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},vp,v)}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(t=!1){if(pr!==void 0&&!t)return pr;if(window.navigator.permissions===void 0)return pr=!!window.navigator.geolocation,pr;try{pr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{pr=!!window.navigator.geolocation}return pr})}().then(t=>this._finishSetupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,As=0,Es=!1}_isOutOfMapMaxBounds(v){const t=this._map.getMaxBounds(),o=v.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),t=v.getSouthEast(),o=v.getNorthEast(),m=t.distanceTo(o),p=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":As--,Es=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),As++,As>1?(v={maximumAge:6e5,timeout:0},Es=!0):(v=this.options.positionOptions,Es=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const t=(v=this._map.getProjection())===null||v===void 0?void 0:v.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((v=this._map.getProjection())===null||v===void 0?void 0:v.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},d.Hash=nu,d.ImageSource=ct,d.KeyboardHandler=rl,d.LngLatBounds=ue,d.LogoControl=jh,d.Map=class extends mi{constructor(v){var t,o;a.cv.mark(a.cw.create);const m=Object.assign(Object.assign(Object.assign({},uu),v),{canvasContextAttributes:Object.assign(Object.assign({},uu.canvasContextAttributes),v.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new Gi,y=new mc;if(m.minZoom!==void 0&&p.setMinZoom(m.minZoom),m.maxZoom!==void 0&&p.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&p.setMinPitch(m.minPitch),m.maxPitch!==void 0&&p.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&p.setRenderWorldCopies(m.renderWorldCopies),super(p,y,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new fp,this._controls=[],this._mapId=a.a6(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Uc),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this.transformCameraUpdate=m.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Y.addThrottleControl(()=>this.isMoving()),this._requestManager=new te(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const M=Lc(L=>{this._trackResize&&!this._removed&&(this.resize(L),this.redraw())},50);this._resizeObserver=new ResizeObserver(L=>{I?M(L):I=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Is(this,m),this._hash=m.hash&&new nu(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,a.e({},m.fitBoundsOptions,{duration:0}))));const S=typeof m.style=="string"||((o=(t=m.style)===null||t===void 0?void 0:t.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,S),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new jc(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new jh,m.logoPosition),this.on("style.load",()=>{if(S||this._resizeTransform(),this.transform.unmodified){const I=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new a.l(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new a.l(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new a.l("sourcedataabort",I))})}_getMapId(){return this._mapId}setGlobalStateProperty(v,t){return this.style.setGlobalStateProperty(v,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(v,t){if(t===void 0&&(t=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=v.onAdd(this);this._controls.push(v);const m=this._controlPositions[t];return t.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(v);return t>-1&&this._controls.splice(t,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,t,o,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,t,o,m)}resize(v,t=!0){const[o,m]=this._containerDimensions(),p=this._getClampedPixelRatio(o,m);if(this._resizeCanvas(o,m,p),this.painter.resize(o,m,p),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const I=this._getClampedPixelRatio(o,m);this._resizeCanvas(o,m,I),this.painter.resize(o,m,I)}this._resizeTransform(t);const y=!this._moving;return y&&(this.stop(),this.fire(new a.l("movestart",v)).fire(new a.l("move",v))),this.fire(new a.l("resize",v)),y&&this.fire(new a.l("moveend",v)),this}_resizeTransform(v=!0){var t;const[o,m]=this._containerDimensions();this.transform.resize(o,m,v),(t=this._requestedCameraState)===null||t===void 0||t.resize(o,m,v)}_getClampedPixelRatio(v,t){const{0:o,1:m}=this._maxCanvasSize,p=this.getPixelRatio(),y=v*p,S=t*p;return Math.min(y>o?o/y:1,S>m?m/S:1)*p}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(ue.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.setMinZoom(v),this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.setMaxZoom(v),this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}project(v){return this.transform.locationToScreenPoint(a.S.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(a.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,t,o){if(v==="mouseenter"||v==="mouseover"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:y=>{const S=t.filter(M=>this.getLayer(M)),I=S.length!==0?this.queryRenderedFeatures(y.point,{layers:S}):[];I.length?m||(m=!0,o.call(this,new Kr(v,this,y.originalEvent,{features:I}))):m=!1},mouseout:()=>{m=!1}}}}if(v==="mouseleave"||v==="mouseout"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:S=>{const I=t.filter(M=>this.getLayer(M));(I.length!==0?this.queryRenderedFeatures(S.point,{layers:I}):[]).length?m=!0:m&&(m=!1,o.call(this,new Kr(v,this,S.originalEvent)))},mouseout:S=>{m&&(m=!1,o.call(this,new Kr(v,this,S.originalEvent)))}}}}{const m=p=>{const y=t.filter(I=>this.getLayer(I)),S=y.length!==0?this.queryRenderedFeatures(p.point,{layers:y}):[];S.length&&(p.features=S,o.call(this,p),delete p.features)};return{layers:t,listener:o,delegates:{[v]:m}}}}_saveDelegatedListener(v,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(t)}_removeDelegatedListener(v,t,o){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const m=this._delegatedListeners[v];for(let p=0;p<m.length;p++){const y=m[p];if(y.listener===o&&y.layers.length===t.length&&y.layers.every(S=>t.includes(S))){for(const S in y.delegates)this.off(S,y.delegates[S]);return void m.splice(p,1)}}}on(v,t,o){if(o===void 0)return super.on(v,t);const m=typeof t=="string"?[t]:t,p=this._createDelegatedListener(v,m,o);this._saveDelegatedListener(v,p);for(const y in p.delegates)this.on(y,p.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(v,m,o)}}}once(v,t,o){if(o===void 0)return super.once(v,t);const m=typeof t=="string"?[t]:t,p=this._createDelegatedListener(v,m,o);for(const y in p.delegates){const S=p.delegates[y];p.delegates[y]=(...I)=>{this._removeDelegatedListener(v,m,o),S(...I)}}this._saveDelegatedListener(v,p);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(v,t,o){return o===void 0?super.off(v,t):(this._removeDelegatedListener(v,typeof t=="string"?[t]:t,o),this)}queryRenderedFeatures(v,t){if(!this.style)return[];let o;const m=v instanceof a.P||Array.isArray(v),p=m?v:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(m?{}:v)||{},p instanceof a.P||typeof p[0]=="number")o=[a.P.convert(p)];else{const y=a.P.convert(p[0]),S=a.P.convert(p[1]);o=[y,new a.P(S.x,y.y),S,new a.P(y.x,S.y),y]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(v,t){return this.style.querySourceFeatures(v,t)}setStyle(v,t){return(t=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(v,t))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const t=this._locale[v];if(t==null)throw new Error(`Missing UI string '${v}'`);return t}_updateStyle(v,t){var o,m;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,t));const p=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new uh(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,t,p):this.style.loadJSON(v,t,p),this):((m=(o=this.style)===null||o===void 0?void 0:o.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new uh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,t){if(typeof v=="string"){const o=this._requestManager.transformRequest(v,"Style");a.j(o,new AbortController).then(m=>{this._updateDiff(m.data,t)}).catch(m=>{m&&this.fire(new a.k(m))})}else typeof v=="object"&&this._updateDiff(v,t)}_updateDiff(v,t){try{this.style.setState(v,t)&&this._update(!0)}catch(o){a.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(v,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(v,t){return this._lazyInitEmptyStyle(),this.style.addSource(v,t),this._update(!0)}isSourceLoaded(v){const t=this.style&&this.style.sourceCaches[v];if(t!==void 0)return t.loaded();this.fire(new a.k(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const t=this.style.sourceCaches[v.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&t.reload();for(const o in this.style._layers){const m=this.style._layers[o];m.type==="hillshade"&&m.source===v.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===v.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Za(this.painter,t,v),this.painter.renderToTexture=new dn(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var m;o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=o.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:v})),this}getTerrain(){var v,t;return(t=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const t in v){const o=v[t]._tiles;for(const m in o){const p=o[m];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,t,o){if(o){const m=this.getSource(o);if(!m)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);m.calculateTileZoom=rt(Math.max(1,v),Math.max(1,t))}else for(const m in this.style.sourceCaches)this.style.sourceCaches[m].getSource().calculateTileZoom=rt(Math.max(1,v),Math.max(1,t));return this._update(!0),this}refreshTiles(v,t){const o=this.style.sourceCaches[v];if(!o)throw new Error(`There is no source cache with ID "${v}", cannot refresh tile`);t===void 0?o.reload(!0):o.refreshTiles(t.map(m=>new a.a3(m.z,m.x,m.y)))}addImage(v,t,o={}){const{pixelRatio:m=1,sdf:p=!1,stretchX:y,stretchY:S,content:I,textFitWidth:M,textFitHeight:L}=o;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||a.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:G,data:N}=t,W=t;return this.style.addImage(v,{data:new a.R({width:B,height:G},new Uint8Array(N)),pixelRatio:m,stretchX:y,stretchY:S,content:I,textFitWidth:M,textFitHeight:L,sdf:p,version:0,userImage:W}),W.onAdd&&W.onAdd(this,v),this}}{const{width:B,height:G,data:N}=A.getImageData(t);this.style.addImage(v,{data:new a.R({width:B,height:G},N),pixelRatio:m,stretchX:y,stretchY:S,content:I,textFitWidth:M,textFitHeight:L,sdf:p,version:0})}}updateImage(v,t){const o=this.style.getImage(v);if(!o)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=t instanceof HTMLImageElement||a.b(t)?A.getImageData(t):t,{width:p,height:y,data:S}=m;if(p===void 0||y===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==o.data.width||y!==o.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(t instanceof HTMLImageElement||a.b(t));return o.data.replace(S,I),this.style.updateImage(v,o),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return Y.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,t){return this._lazyInitEmptyStyle(),this.style.addLayer(v,t),this._update(!0)}moveLayer(v,t){return this.style.moveLayer(v,t),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,t,o){return this.style.setLayerZoomRange(v,t,o),this._update(!0)}setFilter(v,t,o={}){return this.style.setFilter(v,t,o),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,t,o,m={}){return this.style.setPaintProperty(v,t,o,m),this._update(!0)}getPaintProperty(v,t){return this.style.getPaintProperty(v,t)}setLayoutProperty(v,t,o,m={}){return this.style.setLayoutProperty(v,t,o,m),this._update(!0)}getLayoutProperty(v,t){return this.style.getLayoutProperty(v,t)}setGlyphs(v,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,t,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,t,o,m=>{m||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,t,o=>{o||this._update(!0)}),this}setLight(v,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,t){return this.style.setFeatureState(v,t),this._update()}removeFeatureState(v,t){return this.style.removeFeatureState(v,t),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,t=0;return this._container&&(v=this._container.clientWidth||400,t=this._container.clientHeight||300),[v,t]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const t=this._canvasContainer=P.create("div","maplibregl-canvas-container",v);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),m=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],m);const p=this._controlContainer=P.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{y[S]=P.create("div",`maplibregl-ctrl-${S} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,t,o){this._canvas.width=Math.floor(o*v),this._canvas.height=Math.floor(o*t),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{t={requestedAttributes:v},m&&(t.statusMessage=m.statusMessage,t.type=m.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!o){const m="Failed to initialize WebGL";throw t?(t.message=m,new Error(JSON.stringify(t))):new Error(m)}this.painter=new wa(o,this.transform),R.testSupport(o)}migrateProjection(v,t){super.migrateProjection(v,t),this.painter.transform=v,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var t,o,m,p,y;const S=this._idleTriggered?this._fadeDuration:0,I=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,N=A.now();this.style.zoomHistory.update(G,N);const W=new a.F(G,{now:N,fadeDuration:S,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ee=W.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(M=!0,this._crossFadingFactor=ee),this.style.update(W)}const L=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==I;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||L)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,L),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cv.mark(a.cw.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,a.cv.mark(a.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Y.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cv.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frame(this._frameRequest,v=>{a.cv.frame(v),this._frameRequest=null;try{this._render(v)}catch(t){if(!a.cx(t)&&!function(o){return o.message===Ch}(t))throw t}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Nh}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},d.MapMouseEvent=Kr,d.MapTouchEvent=Ia,d.MapWheelEvent=Mh,d.Marker=Ai,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const t=this._map.getZoom(),o=t===this._map.getMaxZoom(),m=t===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,o)=>{const m=this._map._getUIString(`NavigationControl.${o}`);t.title=m,t.setAttribute("aria-label",m)},this.options=a.e({},$r,v),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new pp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,t){const o=P.create("button",v,this._container);return o.type="button",o.addEventListener("click",t),o}},d.Popup=class extends a.E{constructor(v){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=gp(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const o=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const p=Hc(this.options.offset);if(!m){const S=this._container.offsetWidth,I=this._container.offsetHeight;let M;M=o.y+p.bottom.y<I?["top"]:o.y>this._map.transform.height-I?["bottom"]:[],o.x<S/2?M.push("left"):o.x>this._map.transform.width-S/2&&M.push("right"),m=M.length===0?"bottom":M.join("-")}let y=o.add(p[m]);this.options.subpixelPositioning||(y=y.round()),P.setTransform(this._container,`${oo[m]} translate(${y.x}px,${y.y}px)`),xi(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(cu),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=a.S.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const t=document.createDocumentFragment(),o=document.createElement("body");let m;for(o.innerHTML=v;m=o.firstChild,m;)t.appendChild(m);return this.setDOMContent(t)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Gh);v&&v.focus()}},d.RasterDEMTileSource=Je,d.RasterTileSource=ut,d.ScaleControl=class{constructor(v){this._onMove=()=>{Gc(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Gc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Uh),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=dp,d.Style=uh,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=zh,d.TwoFingersTouchRotateHandler=Lh,d.TwoFingersTouchZoomHandler=Wa,d.TwoFingersTouchZoomRotateHandler=Fh,d.VectorTileSource=Ze,d.VideoSource=Lt,d.addSourceType=(v,t)=>a._(void 0,void 0,void 0,function*(){if(Ht(v))throw new Error(`A source type called "${v}" already exists.`);((o,m)=>{sn[o]=m})(v,t)}),d.clearPrewarmedResources=function(){const v=Qe;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(ze),Qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.createTileMesh=sh,d.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return En().getRTLTextPluginStatus()},d.getVersion=function(){return Hh},d.getWorkerCount=function(){return Se.workerCount},d.getWorkerUrl=function(){return a.a.WORKER_URL},d.importScriptInWorkers=function(v){return Re().broadcast("IS",v)},d.prewarm=function(){Tt().acquire(ze)},d.setMaxParallelImageRequests=function(v){a.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,t){return En().setRTLTextPlugin(v,t)},d.setWorkerCount=function(v){Se.workerCount=v},d.setWorkerUrl=function(v){a.a.WORKER_URL=v}});var f=r;return f})}(ag)),ag.exports}var EN=AN();const _C=kI(EN),MN={__name:"NewRidePage",setup(e){const n=et(""),r=et(""),s=et(""),c=et(""),f=et(!1),d=et(null);let a=null;zi(()=>{const C=new _C.Map({container:d.value,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[10.4515,51.1657],zoom:6});C.on("click",function(w){n.value=w.lngLat.lat,r.value=w.lngLat.lng,a?a.setLngLat([w.lngLat.lng,w.lngLat.lat]):a=new _C.Marker().setLngLat([w.lngLat.lng,w.lngLat.lat]).addTo(C)})});const b=async()=>{c.value="",f.value=!1;const{data:{user:C}}=await Wn.auth.getUser();if(!C){c.value="Nicht eingeloggt.";return}if(!n.value||!r.value){c.value="Bitte wähle einen Startpunkt auf der Karte.";return}if(!s.value||parseInt(s.value,10)<=1){c.value="Bitte gib mindestens 2 Kilometer ein.";return}const w=`SRID=4326;POINT(${r.value} ${n.value})`,{error:T}=await Wn.from("rides").insert([{user_id:C.id,km:parseInt(s.value,10),StartPoint:w}]);T?c.value=T.message:(f.value=!0,n.value="",r.value="",s.value="",a&&(a.remove(),a=null))};return(C,w)=>{const T=Rt("v-card-title"),A=Rt("v-text-field"),P=Rt("v-col"),R=Rt("v-row"),O=Rt("v-btn"),z=Rt("v-form"),$=Rt("v-alert"),F=Rt("v-card-text"),H=Rt("v-card"),Y=Rt("v-container"),te=Rt("v-main");return yn(),Gn(te,null,{default:kt(()=>[U(Y,{fluid:""},{default:kt(()=>[U(H,{class:"pa-4",elevation:"4"},{default:kt(()=>[U(T,{class:"text-h5"},{default:kt(()=>w[3]||(w[3]=[nn("Neue Fahrt eintragen")])),_:1,__:[3]}),U(F,null,{default:kt(()=>[X("div",{ref_key:"mapContainer",ref:d,style:{height:"400px",width:"100%"},class:"mb-4"},null,512),U(z,{onSubmit:wl(b,["prevent"])},{default:kt(()=>[U(R,null,{default:kt(()=>[U(P,{cols:"12",md:"6"},{default:kt(()=>[U(A,{modelValue:n.value,"onUpdate:modelValue":w[0]||(w[0]=Q=>n.value=Q),label:"Startpunkt (Latitude)",type:"number",step:"any",readonly:"","prepend-inner-icon":"mdi-map-marker-latitude"},null,8,["modelValue"])]),_:1}),U(P,{cols:"12",md:"6"},{default:kt(()=>[U(A,{modelValue:r.value,"onUpdate:modelValue":w[1]||(w[1]=Q=>r.value=Q),label:"Startpunkt (Longitude)",type:"number",step:"any",readonly:"","prepend-inner-icon":"mdi-map-marker-longitude"},null,8,["modelValue"])]),_:1})]),_:1}),U(A,{modelValue:s.value,"onUpdate:modelValue":w[2]||(w[2]=Q=>s.value=Q),label:"Kilometer",type:"number",min:"0",step:"1",required:"","prepend-inner-icon":"mdi-road-variant"},null,8,["modelValue"]),U(O,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:kt(()=>w[4]||(w[4]=[nn("Speichern")])),_:1,__:[4]})]),_:1}),c.value?(yn(),Gn($,{key:0,type:"error",dense:"",class:"mt-4"},{default:kt(()=>[nn(ei(c.value),1)]),_:1})):Hr("",!0),f.value?(yn(),Gn($,{key:1,type:"success",dense:"",class:"mt-4"},{default:kt(()=>w[5]||(w[5]=[nn("Fahrt gespeichert!")])),_:1,__:[5]})):Hr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},DN={class:"ml-2"},RN={key:2},LN={__name:"MyTeamPage",setup(e){const n=oc(),r=et(!0),s=et(null),c=et([]),f=et("");async function d(){r.value=!0;const{data:{user:C}}=await Wn.auth.getUser();if(!C){r.value=!1;return}const{data:w}=await Wn.from("members").select("team_id").eq("user_id",C.id).single();if(!(w!=null&&w.team_id)){r.value=!1;return}const{data:T}=await Wn.from("teams").select("id, name").eq("id",w.team_id).single();s.value=T;const{data:A,error:P}=await Wn.functions.invoke("Get-team-Members",{body:{teamId:T.id}});P?(c.value=[],f.value=`Fehler beim Laden der Mitglieder: ${P.message||P}`):(c.value=A.members,f.value=""),r.value=!1}function a(){n.push("/teams")}function b(){n.push("/invite-member")}return zi(d),(C,w)=>{const T=Rt("v-card-title"),A=Rt("v-progress-circular"),P=Rt("v-btn"),R=Rt("v-alert"),O=Rt("v-list-item-title"),z=Rt("v-list-item-subtitle"),$=Rt("v-list-item-content"),F=Rt("v-list-item"),H=Rt("v-list"),Y=Rt("v-card-text"),te=Rt("v-card"),Q=Rt("v-container"),ce=Rt("v-main");return yn(),Gn(ce,null,{default:kt(()=>[U(Q,{fluid:""},{default:kt(()=>[U(te,{class:"pa-4",elevation:"4"},{default:kt(()=>[s.value?(yn(),Gn(T,{key:0,class:"text-h5"},{default:kt(()=>[w[0]||(w[0]=nn(" Dein Team: ")),X("strong",DN,ei(s.value.name),1)]),_:1,__:[0]})):(yn(),Gn(T,{key:1,class:"text-h5"},{default:kt(()=>w[1]||(w[1]=[nn(" Mein Team ")])),_:1,__:[1]})),U(Y,null,{default:kt(()=>[r.value?(yn(),Gn(A,{key:0,indeterminate:"",color:"primary"})):s.value?(yn(),za("div",RN,[w[5]||(w[5]=X("h3",{class:"text-h6 mb-2"},"Mitglieder",-1)),f.value?(yn(),Gn(R,{key:0,type:"error",dense:"",border:"start",class:"mb-4"},{default:kt(()=>[nn(ei(f.value),1)]),_:1})):Hr("",!0),U(H,{dense:""},{default:kt(()=>[(yn(!0),za(Wt,null,Ub(c.value,oe=>(yn(),Gn(F,{key:oe.user_id},{default:kt(()=>[U($,null,{default:kt(()=>[U(O,null,{default:kt(()=>{var he;return[nn(ei(((he=oe.profiles)==null?void 0:he.username)||"-"),1)]}),_:2},1024),U(z,null,{default:kt(()=>[nn("User-ID: "+ei(oe.user_id),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),U(P,{color:"primary",class:"mt-4",onClick:b},{default:kt(()=>w[4]||(w[4]=[nn("Mitglied einladen")])),_:1,__:[4]})])):(yn(),Gn(R,{key:1,type:"info",border:"start",dense:""},{default:kt(()=>[w[3]||(w[3]=nn(" Du bist in keinem Team. ")),U(P,{color:"primary",small:"",class:"ml-4",onClick:a},{default:kt(()=>w[2]||(w[2]=[nn("Zu den Teams")])),_:1,__:[2]})]),_:1,__:[3]}))]),_:1})]),_:1})]),_:1})]),_:1})}}},zN=[{path:"/",component:lN},{path:"/login",component:cN},{path:"/register",component:SN},{path:"/teams",component:bN},{path:"/create-team",component:xN},{path:"/profile",component:PN},{path:"/rides/new",component:MN},{path:"/my-team",component:LN},{path:"/join-team/:teamId",component:()=>Ku(()=>import("./JoinTeamPage-UrJfss1x.js"),[])},{path:"/invite-member",component:()=>Ku(()=>import("./InviteMemberPage-BySCWEr1.js"),[])}],Mu=J$({history:P$("/fahrrad_kilometer_tracker/"),routes:zN});Mu.beforeEach(async(e,n,r)=>{if(e.path==="/"){const{data:{session:s}}=await Wn.auth.getSession();r(s?"/teams":"/login")}else r()});async function VN(){Wn.auth.onAuthStateChange((r,s)=>{(r==="SIGNED_IN"||r==="TOKEN_REFRESHED")&&Mu.currentRoute.value.path==="/login"&&Mu.replace("/teams"),r==="SIGNED_OUT"&&Mu.replace("/login")});const{data:{session:e}}=await Wn.auth.getSession();!e&&Mu.currentRoute.value.path!=="/login"&&Mu.replace("/login");const n=AT({components:O5,directives:Y5,theme:{defaultTheme:"customTheme",themes:{customTheme:{dark:!1,colors:{primary:"#42b883",secondary:"#2d323c",accent:"#FF7043",error:"#e74c3c",success:"#27ae60",background:"#23272f",surface:"#2d323c"}}}}});ZD(oN).use(Mu).use(n).mount("#app")}VN();export{Rt as a,oc as b,Gn as c,yn as d,U as e,nn as f,za as g,X as h,Hr as i,wl as j,zi as o,et as r,Wn as s,ei as t,BN as u,kt as w};
