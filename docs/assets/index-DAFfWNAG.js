(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=r(c);fetch(c.href,f)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ib(e){const n=Object.create(null);for(const r of e.split(","))n[r]=1;return r=>r in n}const pi={},Cd=[],js=()=>{},ME=()=>!1,Ag=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ab=e=>e.startsWith("onUpdate:"),Cr=Object.assign,Eb=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},DE=Object.prototype.hasOwnProperty,li=(e,n)=>DE.call(e,n),bn=Array.isArray,Td=e=>Eg(e)==="[object Map]",xk=e=>Eg(e)==="[object Set]",In=e=>typeof e=="function",Oi=e=>typeof e=="string",Il=e=>typeof e=="symbol",Ii=e=>e!==null&&typeof e=="object",wk=e=>(Ii(e)||In(e))&&In(e.then)&&In(e.catch),Sk=Object.prototype.toString,Eg=e=>Sk.call(e),RE=e=>Eg(e).slice(8,-1),kk=e=>Eg(e)==="[object Object]",Mb=e=>Oi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,kf=Ib(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mg=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},LE=/-(\w)/g,va=Mg(e=>e.replace(LE,(n,r)=>r?r.toUpperCase():"")),zE=/\B([A-Z])/g,Xu=Mg(e=>e.replace(zE,"-$1").toLowerCase()),Ws=Mg(e=>e.charAt(0).toUpperCase()+e.slice(1)),E_=Mg(e=>e?`on${Ws(e)}`:""),Sl=(e,n)=>!Object.is(e,n),Qp=(e,...n)=>{for(let r=0;r<e.length;r++)e[r](...n)},dy=(e,n,r,s=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:s,value:r})},hy=e=>{const n=parseFloat(e);return isNaN(n)?e:n},VE=e=>{const n=Oi(e)?Number(e):NaN;return isNaN(n)?e:n};let $w;const Dg=()=>$w||($w=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bt(e){if(bn(e)){const n={};for(let r=0;r<e.length;r++){const s=e[r],c=Oi(s)?$E(s):Bt(s);if(c)for(const f in c)n[f]=c[f]}return n}else if(Oi(e)||Ii(e))return e}const BE=/;(?![^(]*\))/g,OE=/:([^]+)/,FE=/\/\*[^]*?\*\//g;function $E(e){const n={};return e.replace(FE,"").split(BE).forEach(r=>{if(r){const s=r.split(OE);s.length>1&&(n[s[0].trim()]=s[1].trim())}}),n}function vt(e){let n="";if(Oi(e))n=e;else if(bn(e))for(let r=0;r<e.length;r++){const s=vt(e[r]);s&&(n+=s+" ")}else if(Ii(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}function jE(e){if(!e)return null;let{class:n,style:r}=e;return n&&!Oi(n)&&(e.class=vt(n)),r&&(e.style=Bt(r)),e}const NE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",UE=Ib(NE);function Ck(e){return!!e||e===""}const Tk=e=>!!(e&&e.__v_isRef===!0),yn=e=>Oi(e)?e:e==null?"":bn(e)||Ii(e)&&(e.toString===Sk||!In(e.toString))?Tk(e)?yn(e.value):JSON.stringify(e,Pk,2):String(e),Pk=(e,n)=>Tk(n)?Pk(e,n.value):Td(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[s,c],f)=>(r[M_(s,f)+" =>"]=c,r),{})}:xk(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>M_(r))}:Il(n)?M_(n):Ii(n)&&!bn(n)&&!kk(n)?String(n):n,M_=(e,n="")=>{var r;return Il(e)?`Symbol(${(r=e.description)!=null?r:n})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qr;class Ik{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Qr,!n&&Qr&&(this.index=(Qr.scopes||(Qr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=Qr;try{return Qr=this,n()}finally{Qr=r}}}on(){++this._on===1&&(this.prevScope=Qr,Qr=this)}off(){this._on>0&&--this._on===0&&(Qr=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(this.effects.length=0,r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function Md(e){return new Ik(e)}function Ak(){return Qr}function fr(e,n=!1){Qr&&Qr.cleanups.push(e)}let Pi;const D_=new WeakSet;class Ek{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Qr&&Qr.active&&Qr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,D_.has(this)&&(D_.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Dk(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jw(this),Rk(this);const n=Pi,r=ps;Pi=this,ps=!0;try{return this.fn()}finally{Lk(this),Pi=n,ps=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Lb(n);this.deps=this.depsTail=void 0,jw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?D_.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fy(this)&&this.run()}get dirty(){return fy(this)}}let Mk=0,Cf,Tf;function Dk(e,n=!1){if(e.flags|=8,n){e.next=Tf,Tf=e;return}e.next=Cf,Cf=e}function Db(){Mk++}function Rb(){if(--Mk>0)return;if(Tf){let n=Tf;for(Tf=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let e;for(;Cf;){let n=Cf;for(Cf=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(s){e||(e=s)}n=r}}if(e)throw e}function Rk(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Lk(e){let n,r=e.depsTail,s=r;for(;s;){const c=s.prevDep;s.version===-1?(s===r&&(r=c),Lb(s),GE(s)):n=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=c}e.deps=n,e.depsTail=r}function fy(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(zk(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function zk(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Bf)||(e.globalVersion=Bf,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!fy(e))))return;e.flags|=2;const n=e.dep,r=Pi,s=ps;Pi=e,ps=!0;try{Rk(e);const c=e.fn(e._value);(n.version===0||Sl(c,e._value))&&(e.flags|=128,e._value=c,n.version++)}catch(c){throw n.version++,c}finally{Pi=r,ps=s,Lk(e),e.flags&=-3}}function Lb(e,n=!1){const{dep:r,prevSub:s,nextSub:c}=e;if(s&&(s.nextSub=c,e.prevSub=void 0),c&&(c.prevSub=s,e.nextSub=void 0),r.subs===e&&(r.subs=s,!s&&r.computed)){r.computed.flags&=-5;for(let f=r.computed.deps;f;f=f.nextDep)Lb(f,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function GE(e){const{prevDep:n,nextDep:r}=e;n&&(n.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=n,e.nextDep=void 0)}let ps=!0;const Vk=[];function xo(){Vk.push(ps),ps=!1}function wo(){const e=Vk.pop();ps=e===void 0?!0:e}function jw(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const r=Pi;Pi=void 0;try{n()}finally{Pi=r}}}let Bf=0;class qE{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zb{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!Pi||!ps||Pi===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Pi)r=this.activeLink=new qE(Pi,this),Pi.deps?(r.prevDep=Pi.depsTail,Pi.depsTail.nextDep=r,Pi.depsTail=r):Pi.deps=Pi.depsTail=r,Bk(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const s=r.nextDep;s.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=s),r.prevDep=Pi.depsTail,r.nextDep=void 0,Pi.depsTail.nextDep=r,Pi.depsTail=r,Pi.deps===r&&(Pi.deps=s)}return r}trigger(n){this.version++,Bf++,this.notify(n)}notify(n){Db();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Rb()}}}function Bk(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let s=n.deps;s;s=s.nextDep)Bk(s)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const og=new WeakMap,Ou=Symbol(""),my=Symbol(""),Of=Symbol("");function ea(e,n,r){if(ps&&Pi){let s=og.get(e);s||og.set(e,s=new Map);let c=s.get(r);c||(s.set(r,c=new zb),c.map=s,c.key=r),c.track()}}function yo(e,n,r,s,c,f){const d=og.get(e);if(!d){Bf++;return}const a=b=>{b&&b.trigger()};if(Db(),n==="clear")d.forEach(a);else{const b=bn(e),k=b&&Mb(r);if(b&&r==="length"){const S=Number(s);d.forEach((T,A)=>{(A==="length"||A===Of||!Il(A)&&A>=S)&&a(T)})}else switch((r!==void 0||d.has(void 0))&&a(d.get(r)),k&&a(d.get(Of)),n){case"add":b?k&&a(d.get("length")):(a(d.get(Ou)),Td(e)&&a(d.get(my)));break;case"delete":b||(a(d.get(Ou)),Td(e)&&a(d.get(my)));break;case"set":Td(e)&&a(d.get(Ou));break}}Rb()}function HE(e,n){const r=og.get(e);return r&&r.get(n)}function ad(e){const n=mn(e);return n===e?n:(ea(n,"iterate",Of),Xa(e)?n:n.map(qr))}function Rg(e){return ea(e=mn(e),"iterate",Of),e}const WE={__proto__:null,[Symbol.iterator](){return R_(this,Symbol.iterator,qr)},concat(...e){return ad(this).concat(...e.map(n=>bn(n)?ad(n):n))},entries(){return R_(this,"entries",e=>(e[1]=qr(e[1]),e))},every(e,n){return fo(this,"every",e,n,void 0,arguments)},filter(e,n){return fo(this,"filter",e,n,r=>r.map(qr),arguments)},find(e,n){return fo(this,"find",e,n,qr,arguments)},findIndex(e,n){return fo(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return fo(this,"findLast",e,n,qr,arguments)},findLastIndex(e,n){return fo(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return fo(this,"forEach",e,n,void 0,arguments)},includes(...e){return L_(this,"includes",e)},indexOf(...e){return L_(this,"indexOf",e)},join(e){return ad(this).join(e)},lastIndexOf(...e){return L_(this,"lastIndexOf",e)},map(e,n){return fo(this,"map",e,n,void 0,arguments)},pop(){return mf(this,"pop")},push(...e){return mf(this,"push",e)},reduce(e,...n){return Nw(this,"reduce",e,n)},reduceRight(e,...n){return Nw(this,"reduceRight",e,n)},shift(){return mf(this,"shift")},some(e,n){return fo(this,"some",e,n,void 0,arguments)},splice(...e){return mf(this,"splice",e)},toReversed(){return ad(this).toReversed()},toSorted(e){return ad(this).toSorted(e)},toSpliced(...e){return ad(this).toSpliced(...e)},unshift(...e){return mf(this,"unshift",e)},values(){return R_(this,"values",qr)}};function R_(e,n,r){const s=Rg(e),c=s[n]();return s!==e&&!Xa(e)&&(c._next=c.next,c.next=()=>{const f=c._next();return f.value&&(f.value=r(f.value)),f}),c}const ZE=Array.prototype;function fo(e,n,r,s,c,f){const d=Rg(e),a=d!==e&&!Xa(e),b=d[n];if(b!==ZE[n]){const T=b.apply(e,f);return a?qr(T):T}let k=r;d!==e&&(a?k=function(T,A){return r.call(this,qr(T),A,e)}:r.length>2&&(k=function(T,A){return r.call(this,T,A,e)}));const S=b.call(d,k,s);return a&&c?c(S):S}function Nw(e,n,r,s){const c=Rg(e);let f=r;return c!==e&&(Xa(e)?r.length>3&&(f=function(d,a,b){return r.call(this,d,a,b,e)}):f=function(d,a,b){return r.call(this,d,qr(a),b,e)}),c[n](f,...s)}function L_(e,n,r){const s=mn(e);ea(s,"iterate",Of);const c=s[n](...r);return(c===-1||c===!1)&&Ob(r[0])?(r[0]=mn(r[0]),s[n](...r)):c}function mf(e,n,r=[]){xo(),Db();const s=mn(e)[n].apply(e,r);return Rb(),wo(),s}const KE=Ib("__proto__,__v_isRef,__isVue"),Ok=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Il));function YE(e){Il(e)||(e=String(e));const n=mn(this);return ea(n,"has",e),n.hasOwnProperty(e)}class Fk{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,s){if(r==="__v_skip")return n.__v_skip;const c=this._isReadonly,f=this._isShallow;if(r==="__v_isReactive")return!c;if(r==="__v_isReadonly")return c;if(r==="__v_isShallow")return f;if(r==="__v_raw")return s===(c?f?sM:Uk:f?Nk:jk).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(s)?n:void 0;const d=bn(n);if(!c){let b;if(d&&(b=WE[r]))return b;if(r==="hasOwnProperty")return YE}const a=Reflect.get(n,r,er(n)?n:s);return(Il(r)?Ok.has(r):KE(r))||(c||ea(n,"get",r),f)?a:er(a)?d&&Mb(r)?a:a.value:Ii(a)?c?Gd(a):Sr(a):a}}class $k extends Fk{constructor(n=!1){super(!1,n)}set(n,r,s,c){let f=n[r];if(!this._isShallow){const b=kl(f);if(!Xa(s)&&!kl(s)&&(f=mn(f),s=mn(s)),!bn(n)&&er(f)&&!er(s))return b?!1:(f.value=s,!0)}const d=bn(n)&&Mb(r)?Number(r)<n.length:li(n,r),a=Reflect.set(n,r,s,er(n)?n:c);return n===mn(c)&&(d?Sl(s,f)&&yo(n,"set",r,s):yo(n,"add",r,s)),a}deleteProperty(n,r){const s=li(n,r);n[r];const c=Reflect.deleteProperty(n,r);return c&&s&&yo(n,"delete",r,void 0),c}has(n,r){const s=Reflect.has(n,r);return(!Il(r)||!Ok.has(r))&&ea(n,"has",r),s}ownKeys(n){return ea(n,"iterate",bn(n)?"length":Ou),Reflect.ownKeys(n)}}class XE extends Fk{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const JE=new $k,QE=new XE,eM=new $k(!0);const py=e=>e,Bp=e=>Reflect.getPrototypeOf(e);function tM(e,n,r){return function(...s){const c=this.__v_raw,f=mn(c),d=Td(f),a=e==="entries"||e===Symbol.iterator&&d,b=e==="keys"&&d,k=c[e](...s),S=r?py:n?lg:qr;return!n&&ea(f,"iterate",b?my:Ou),{next(){const{value:T,done:A}=k.next();return A?{value:T,done:A}:{value:a?[S(T[0]),S(T[1])]:S(T),done:A}},[Symbol.iterator](){return this}}}}function Op(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function nM(e,n){const r={get(c){const f=this.__v_raw,d=mn(f),a=mn(c);e||(Sl(c,a)&&ea(d,"get",c),ea(d,"get",a));const{has:b}=Bp(d),k=n?py:e?lg:qr;if(b.call(d,c))return k(f.get(c));if(b.call(d,a))return k(f.get(a));f!==d&&f.get(c)},get size(){const c=this.__v_raw;return!e&&ea(mn(c),"iterate",Ou),Reflect.get(c,"size",c)},has(c){const f=this.__v_raw,d=mn(f),a=mn(c);return e||(Sl(c,a)&&ea(d,"has",c),ea(d,"has",a)),c===a?f.has(c):f.has(c)||f.has(a)},forEach(c,f){const d=this,a=d.__v_raw,b=mn(a),k=n?py:e?lg:qr;return!e&&ea(b,"iterate",Ou),a.forEach((S,T)=>c.call(f,k(S),k(T),d))}};return Cr(r,e?{add:Op("add"),set:Op("set"),delete:Op("delete"),clear:Op("clear")}:{add(c){!n&&!Xa(c)&&!kl(c)&&(c=mn(c));const f=mn(this);return Bp(f).has.call(f,c)||(f.add(c),yo(f,"add",c,c)),this},set(c,f){!n&&!Xa(f)&&!kl(f)&&(f=mn(f));const d=mn(this),{has:a,get:b}=Bp(d);let k=a.call(d,c);k||(c=mn(c),k=a.call(d,c));const S=b.call(d,c);return d.set(c,f),k?Sl(f,S)&&yo(d,"set",c,f):yo(d,"add",c,f),this},delete(c){const f=mn(this),{has:d,get:a}=Bp(f);let b=d.call(f,c);b||(c=mn(c),b=d.call(f,c)),a&&a.call(f,c);const k=f.delete(c);return b&&yo(f,"delete",c,void 0),k},clear(){const c=mn(this),f=c.size!==0,d=c.clear();return f&&yo(c,"clear",void 0,void 0),d}}),["keys","values","entries",Symbol.iterator].forEach(c=>{r[c]=tM(c,e,n)}),r}function Vb(e,n){const r=nM(e,n);return(s,c,f)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?s:Reflect.get(li(r,c)&&c in s?r:s,c,f)}const iM={get:Vb(!1,!1)},rM={get:Vb(!1,!0)},aM={get:Vb(!0,!1)};const jk=new WeakMap,Nk=new WeakMap,Uk=new WeakMap,sM=new WeakMap;function oM(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lM(e){return e.__v_skip||!Object.isExtensible(e)?0:oM(RE(e))}function Sr(e){return kl(e)?e:Bb(e,!1,JE,iM,jk)}function Gk(e){return Bb(e,!1,eM,rM,Nk)}function Gd(e){return Bb(e,!0,QE,aM,Uk)}function Bb(e,n,r,s,c){if(!Ii(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const f=lM(e);if(f===0)return e;const d=c.get(e);if(d)return d;const a=new Proxy(e,f===2?s:r);return c.set(e,a),a}function Pd(e){return kl(e)?Pd(e.__v_raw):!!(e&&e.__v_isReactive)}function kl(e){return!!(e&&e.__v_isReadonly)}function Xa(e){return!!(e&&e.__v_isShallow)}function Ob(e){return e?!!e.__v_raw:!1}function mn(e){const n=e&&e.__v_raw;return n?mn(n):e}function qk(e){return!li(e,"__v_skip")&&Object.isExtensible(e)&&dy(e,"__v_skip",!0),e}const qr=e=>Ii(e)?Sr(e):e,lg=e=>Ii(e)?Gd(e):e;function er(e){return e?e.__v_isRef===!0:!1}function Xe(e){return Hk(e,!1)}function Rt(e){return Hk(e,!0)}function Hk(e,n){return er(e)?e:new uM(e,n)}class uM{constructor(n,r){this.dep=new zb,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:mn(n),this._value=r?n:qr(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,s=this.__v_isShallow||Xa(n)||kl(n);n=s?n:mn(n),Sl(n,r)&&(this._rawValue=n,this._value=s?n:qr(n),this.dep.trigger())}}function kr(e){return er(e)?e.value:e}function Us(e){return In(e)?e():kr(e)}const cM={get:(e,n,r)=>n==="__v_raw"?e:kr(Reflect.get(e,n,r)),set:(e,n,r,s)=>{const c=e[n];return er(c)&&!er(r)?(c.value=r,!0):Reflect.set(e,n,r,s)}};function Wk(e){return Pd(e)?e:new Proxy(e,cM)}function qd(e){const n=bn(e)?new Array(e.length):{};for(const r in e)n[r]=Zk(e,r);return n}class dM{constructor(n,r,s){this._object=n,this._key=r,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return HE(mn(this._object),this._key)}}class hM{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Me(e,n,r){return er(e)?e:In(e)?new hM(e):Ii(e)&&arguments.length>1?Zk(e,n,r):Xe(e)}function Zk(e,n,r){const s=e[n];return er(s)?s:new dM(e,n,r)}class fM{constructor(n,r,s){this.fn=n,this.setter=r,this._value=void 0,this.dep=new zb(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bf-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Pi!==this)return Dk(this,!0),!0}get value(){const n=this.dep.track();return zk(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function mM(e,n,r=!1){let s,c;return In(e)?s=e:(s=e.get,c=e.set),new fM(s,c,r)}const Fp={},ug=new WeakMap;let Eu;function pM(e,n=!1,r=Eu){if(r){let s=ug.get(r);s||ug.set(r,s=[]),s.push(e)}}function gM(e,n,r=pi){const{immediate:s,deep:c,once:f,scheduler:d,augmentJob:a,call:b}=r,k=H=>c?H:Xa(H)||c===!1||c===0?bo(H,1):bo(H);let S,T,A,P,R=!1,B=!1;if(er(e)?(T=()=>e.value,R=Xa(e)):Pd(e)?(T=()=>k(e),R=!0):bn(e)?(B=!0,R=e.some(H=>Pd(H)||Xa(H)),T=()=>e.map(H=>{if(er(H))return H.value;if(Pd(H))return k(H);if(In(H))return b?b(H,2):H()})):In(e)?n?T=b?()=>b(e,2):e:T=()=>{if(A){xo();try{A()}finally{wo()}}const H=Eu;Eu=S;try{return b?b(e,3,[P]):e(P)}finally{Eu=H}}:T=js,n&&c){const H=T,ee=c===!0?1/0:c;T=()=>bo(H(),ee)}const L=Ak(),$=()=>{S.stop(),L&&L.active&&Eb(L.effects,S)};if(f&&n){const H=n;n=(...ee)=>{H(...ee),$()}}let j=B?new Array(e.length).fill(Fp):Fp;const q=H=>{if(!(!(S.flags&1)||!S.dirty&&!H))if(n){const ee=S.run();if(c||R||(B?ee.some((Q,oe)=>Sl(Q,j[oe])):Sl(ee,j))){A&&A();const Q=Eu;Eu=S;try{const oe=[ee,j===Fp?void 0:B&&j[0]===Fp?[]:j,P];j=ee,b?b(n,3,oe):n(...oe)}finally{Eu=Q}}}else S.run()};return a&&a(q),S=new Ek(T),S.scheduler=d?()=>d(q,!1):q,P=H=>pM(H,!1,S),A=S.onStop=()=>{const H=ug.get(S);if(H){if(b)b(H,4);else for(const ee of H)ee();ug.delete(S)}},n?s?q(!0):j=S.run():d?d(q.bind(null,!0),!0):S.run(),$.pause=S.pause.bind(S),$.resume=S.resume.bind(S),$.stop=$,$}function bo(e,n=1/0,r){if(n<=0||!Ii(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),n--,er(e))bo(e.value,n,r);else if(bn(e))for(let s=0;s<e.length;s++)bo(e[s],n,r);else if(xk(e)||Td(e))e.forEach(s=>{bo(s,n,r)});else if(kk(e)){for(const s in e)bo(e[s],n,r);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&bo(e[s],n,r)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lm(e,n,r,s){try{return s?e(...s):e()}catch(c){Lg(c,n,r)}}function gs(e,n,r,s){if(In(e)){const c=lm(e,n,r,s);return c&&wk(c)&&c.catch(f=>{Lg(f,n,r)}),c}if(bn(e)){const c=[];for(let f=0;f<e.length;f++)c.push(gs(e[f],n,r,s));return c}}function Lg(e,n,r,s=!0){const c=n?n.vnode:null,{errorHandler:f,throwUnhandledErrorInProduction:d}=n&&n.appContext.config||pi;if(n){let a=n.parent;const b=n.proxy,k=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const S=a.ec;if(S){for(let T=0;T<S.length;T++)if(S[T](e,b,k)===!1)return}a=a.parent}if(f){xo(),lm(f,null,10,[e,b,k]),wo();return}}vM(e,r,c,s,d)}function vM(e,n,r,s=!0,c=!1){if(c)throw e;console.error(e)}const ga=[];let Fs=-1;const Id=[];let pl=null,yd=0;const Kk=Promise.resolve();let cg=null;function zn(e){const n=cg||Kk;return e?n.then(this?e.bind(this):e):n}function _M(e){let n=Fs+1,r=ga.length;for(;n<r;){const s=n+r>>>1,c=ga[s],f=Ff(c);f<e||f===e&&c.flags&2?n=s+1:r=s}return n}function Fb(e){if(!(e.flags&1)){const n=Ff(e),r=ga[ga.length-1];!r||!(e.flags&2)&&n>=Ff(r)?ga.push(e):ga.splice(_M(n),0,e),e.flags|=1,Yk()}}function Yk(){cg||(cg=Kk.then(Jk))}function yM(e){bn(e)?Id.push(...e):pl&&e.id===-1?pl.splice(yd+1,0,e):e.flags&1||(Id.push(e),e.flags|=1),Yk()}function Uw(e,n,r=Fs+1){for(;r<ga.length;r++){const s=ga[r];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ga.splice(r,1),r--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Xk(e){if(Id.length){const n=[...new Set(Id)].sort((r,s)=>Ff(r)-Ff(s));if(Id.length=0,pl){pl.push(...n);return}for(pl=n,yd=0;yd<pl.length;yd++){const r=pl[yd];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}pl=null,yd=0}}const Ff=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Jk(e){try{for(Fs=0;Fs<ga.length;Fs++){const n=ga[Fs];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),lm(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Fs<ga.length;Fs++){const n=ga[Fs];n&&(n.flags&=-2)}Fs=-1,ga.length=0,Xk(),cg=null,(ga.length||Id.length)&&Jk()}}let Ta=null,Qk=null;function dg(e){const n=Ta;return Ta=e,Qk=e&&e.type.__scopeId||null,n}function Ue(e,n=Ta,r){if(!n||e._n)return e;const s=(...c)=>{s._d&&i1(-1);const f=dg(n);let d;try{d=e(...c)}finally{dg(f),s._d&&i1(1)}return d};return s._n=!0,s._c=!0,s._d=!0,s}function Ri(e,n){if(Ta===null)return e;const r=Fg(Ta),s=e.dirs||(e.dirs=[]);for(let c=0;c<n.length;c++){let[f,d,a,b=pi]=n[c];f&&(In(f)&&(f={mounted:f,updated:f}),f.deep&&bo(d),s.push({dir:f,instance:r,value:d,oldValue:void 0,arg:a,modifiers:b}))}return e}function ku(e,n,r,s){const c=e.dirs,f=n&&n.dirs;for(let d=0;d<c.length;d++){const a=c[d];f&&(a.oldValue=f[d].value);let b=a.dir[s];b&&(xo(),gs(b,r,8,[e.el,a,e,n]),wo())}}const eC=Symbol("_vte"),tC=e=>e.__isTeleport,Pf=e=>e&&(e.disabled||e.disabled===""),Gw=e=>e&&(e.defer||e.defer===""),qw=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Hw=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,gy=(e,n)=>{const r=e&&e.to;return Oi(r)?n?n(r):null:r},nC={name:"Teleport",__isTeleport:!0,process(e,n,r,s,c,f,d,a,b,k){const{mc:S,pc:T,pbc:A,o:{insert:P,querySelector:R,createText:B,createComment:L}}=k,$=Pf(n.props);let{shapeFlag:j,children:q,dynamicChildren:H}=n;if(e==null){const ee=n.el=B(""),Q=n.anchor=B("");P(ee,r,s),P(Q,r,s);const oe=(ce,he)=>{j&16&&(c&&c.isCE&&(c.ce._teleportTarget=ce),S(q,ce,he,c,f,d,a,b))},le=()=>{const ce=n.target=gy(n.props,R),he=iC(ce,n,B,P);ce&&(d!=="svg"&&qw(ce)?d="svg":d!=="mathml"&&Hw(ce)&&(d="mathml"),$||(oe(ce,he),eg(n,!1)))};$&&(oe(r,Q),eg(n,!0)),Gw(n.props)?(n.el.__isMounted=!1,pa(()=>{le(),delete n.el.__isMounted},f)):le()}else{if(Gw(n.props)&&e.el.__isMounted===!1){pa(()=>{nC.process(e,n,r,s,c,f,d,a,b,k)},f);return}n.el=e.el,n.targetStart=e.targetStart;const ee=n.anchor=e.anchor,Q=n.target=e.target,oe=n.targetAnchor=e.targetAnchor,le=Pf(e.props),ce=le?r:Q,he=le?ee:oe;if(d==="svg"||qw(Q)?d="svg":(d==="mathml"||Hw(Q))&&(d="mathml"),H?(A(e.dynamicChildren,H,ce,c,f,d,a),Hb(e,n,!0)):b||T(e,n,ce,he,c,f,d,a,!1),$)le?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):$p(n,r,ee,k,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const ve=n.target=gy(n.props,R);ve&&$p(n,ve,null,k,0)}else le&&$p(n,Q,oe,k,1);eg(n,$)}},remove(e,n,r,{um:s,o:{remove:c}},f){const{shapeFlag:d,children:a,anchor:b,targetStart:k,targetAnchor:S,target:T,props:A}=e;if(T&&(c(k),c(S)),f&&c(b),d&16){const P=f||!Pf(A);for(let R=0;R<a.length;R++){const B=a[R];s(B,n,r,P,!!B.dynamicChildren)}}},move:$p,hydrate:bM};function $p(e,n,r,{o:{insert:s},m:c},f=2){f===0&&s(e.targetAnchor,n,r);const{el:d,anchor:a,shapeFlag:b,children:k,props:S}=e,T=f===2;if(T&&s(d,n,r),(!T||Pf(S))&&b&16)for(let A=0;A<k.length;A++)c(k[A],n,r,2);T&&s(a,n,r)}function bM(e,n,r,s,c,f,{o:{nextSibling:d,parentNode:a,querySelector:b,insert:k,createText:S}},T){const A=n.target=gy(n.props,b);if(A){const P=Pf(n.props),R=A._lpa||A.firstChild;if(n.shapeFlag&16)if(P)n.anchor=T(d(e),n,a(e),r,s,c,f),n.targetStart=R,n.targetAnchor=R&&d(R);else{n.anchor=d(e);let B=R;for(;B;){if(B&&B.nodeType===8){if(B.data==="teleport start anchor")n.targetStart=B;else if(B.data==="teleport anchor"){n.targetAnchor=B,A._lpa=n.targetAnchor&&d(n.targetAnchor);break}}B=d(B)}n.targetAnchor||iC(A,n,S,k),T(R&&d(R),n,A,r,s,c,f)}eg(n,P)}return n.anchor&&d(n.anchor)}const xM=nC;function eg(e,n){const r=e.ctx;if(r&&r.ut){let s,c;for(n?(s=e.el,c=e.anchor):(s=e.targetStart,c=e.targetAnchor);s&&s!==c;)s.nodeType===1&&s.setAttribute("data-v-owner",r.uid),s=s.nextSibling;r.ut()}}function iC(e,n,r,s){const c=n.targetStart=r(""),f=n.targetAnchor=r("");return c[eC]=f,e&&(s(c,e),s(f,e)),f}const gl=Symbol("_leaveCb"),jp=Symbol("_enterCb");function rC(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return gi(()=>{e.isMounted=!0}),Or(()=>{e.isUnmounting=!0}),e}const Ya=[Function,Array],aC={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ya,onEnter:Ya,onAfterEnter:Ya,onEnterCancelled:Ya,onBeforeLeave:Ya,onLeave:Ya,onAfterLeave:Ya,onLeaveCancelled:Ya,onBeforeAppear:Ya,onAppear:Ya,onAfterAppear:Ya,onAppearCancelled:Ya},sC=e=>{const n=e.subTree;return n.component?sC(n.component):n},wM={name:"BaseTransition",props:aC,setup(e,{slots:n}){const r=Og(),s=rC();return()=>{const c=n.default&&$b(n.default(),!0);if(!c||!c.length)return;const f=oC(c),d=mn(e),{mode:a}=d;if(s.isLeaving)return z_(f);const b=Ww(f);if(!b)return z_(f);let k=$f(b,d,s,r,T=>k=T);b.type!==ta&&Nu(b,k);let S=r.subTree&&Ww(r.subTree);if(S&&S.type!==ta&&!Ru(b,S)&&sC(r).type!==ta){let T=$f(S,d,s,r);if(Nu(S,T),a==="out-in"&&b.type!==ta)return s.isLeaving=!0,T.afterLeave=()=>{s.isLeaving=!1,r.job.flags&8||r.update(),delete T.afterLeave,S=void 0},z_(f);a==="in-out"&&b.type!==ta?T.delayLeave=(A,P,R)=>{const B=lC(s,S);B[String(S.key)]=S,A[gl]=()=>{P(),A[gl]=void 0,delete k.delayedLeave,S=void 0},k.delayedLeave=()=>{R(),delete k.delayedLeave,S=void 0}}:S=void 0}else S&&(S=void 0);return f}}};function oC(e){let n=e[0];if(e.length>1){for(const r of e)if(r.type!==ta){n=r;break}}return n}const SM=wM;function lC(e,n){const{leavingVNodes:r}=e;let s=r.get(n.type);return s||(s=Object.create(null),r.set(n.type,s)),s}function $f(e,n,r,s,c){const{appear:f,mode:d,persisted:a=!1,onBeforeEnter:b,onEnter:k,onAfterEnter:S,onEnterCancelled:T,onBeforeLeave:A,onLeave:P,onAfterLeave:R,onLeaveCancelled:B,onBeforeAppear:L,onAppear:$,onAfterAppear:j,onAppearCancelled:q}=n,H=String(e.key),ee=lC(r,e),Q=(ce,he)=>{ce&&gs(ce,s,9,he)},oe=(ce,he)=>{const ve=he[1];Q(ce,he),bn(ce)?ce.every(ie=>ie.length<=1)&&ve():ce.length<=1&&ve()},le={mode:d,persisted:a,beforeEnter(ce){let he=b;if(!r.isMounted)if(f)he=L||b;else return;ce[gl]&&ce[gl](!0);const ve=ee[H];ve&&Ru(e,ve)&&ve.el[gl]&&ve.el[gl](),Q(he,[ce])},enter(ce){let he=k,ve=S,ie=T;if(!r.isMounted)if(f)he=$||k,ve=j||S,ie=q||T;else return;let be=!1;const Be=ce[jp]=De=>{be||(be=!0,De?Q(ie,[ce]):Q(ve,[ce]),le.delayedLeave&&le.delayedLeave(),ce[jp]=void 0)};he?oe(he,[ce,Be]):Be()},leave(ce,he){const ve=String(e.key);if(ce[jp]&&ce[jp](!0),r.isUnmounting)return he();Q(A,[ce]);let ie=!1;const be=ce[gl]=Be=>{ie||(ie=!0,he(),Be?Q(B,[ce]):Q(R,[ce]),ce[gl]=void 0,ee[ve]===e&&delete ee[ve])};ee[ve]=e,P?oe(P,[ce,be]):be()},clone(ce){const he=$f(ce,n,r,s,c);return c&&c(he),he}};return le}function z_(e){if(zg(e))return e=So(e),e.children=null,e}function Ww(e){if(!zg(e))return tC(e.type)&&e.children?oC(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:n,children:r}=e;if(r){if(n&16)return r[0];if(n&32&&In(r.default))return r.default()}}function Nu(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Nu(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function $b(e,n=!1,r){let s=[],c=0;for(let f=0;f<e.length;f++){let d=e[f];const a=r==null?d.key:String(r)+String(d.key!=null?d.key:f);d.type===Ht?(d.patchFlag&128&&c++,s=s.concat($b(d.children,n,a))):(n||d.type!==ta)&&s.push(a!=null?So(d,{key:a}):d)}if(c>1)for(let f=0;f<s.length;f++)s[f].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function jb(e,n){return In(e)?Cr({name:e.name},n,{setup:e}):e}function _a(){const e=Og();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function uC(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function If(e,n,r,s,c=!1){if(bn(e)){e.forEach((R,B)=>If(R,n&&(bn(n)?n[B]:n),r,s,c));return}if(Af(s)&&!c){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&If(e,n,r,s.component.subTree);return}const f=s.shapeFlag&4?Fg(s.component):s.el,d=c?null:f,{i:a,r:b}=e,k=n&&n.r,S=a.refs===pi?a.refs={}:a.refs,T=a.setupState,A=mn(T),P=T===pi?()=>!1:R=>li(A,R);if(k!=null&&k!==b&&(Oi(k)?(S[k]=null,P(k)&&(T[k]=null)):er(k)&&(k.value=null)),In(b))lm(b,a,12,[d,S]);else{const R=Oi(b),B=er(b);if(R||B){const L=()=>{if(e.f){const $=R?P(b)?T[b]:S[b]:b.value;c?bn($)&&Eb($,f):bn($)?$.includes(f)||$.push(f):R?(S[b]=[f],P(b)&&(T[b]=S[b])):(b.value=[f],e.k&&(S[e.k]=b.value))}else R?(S[b]=d,P(b)&&(T[b]=d)):B&&(b.value=d,e.k&&(S[e.k]=d))};d?(L.id=-1,pa(L,r)):L()}}}Dg().requestIdleCallback;Dg().cancelIdleCallback;const Af=e=>!!e.type.__asyncLoader,zg=e=>e.type.__isKeepAlive;function cC(e,n){dC(e,"a",n)}function Nb(e,n){dC(e,"da",n)}function dC(e,n,r=Hr){const s=e.__wdc||(e.__wdc=()=>{let c=r;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(Vg(n,s,r),r){let c=r.parent;for(;c&&c.parent;)zg(c.parent.vnode)&&kM(s,n,r,c),c=c.parent}}function kM(e,n,r,s){const c=Vg(n,e,s,!0);um(()=>{Eb(s[n],c)},r)}function Vg(e,n,r=Hr,s=!1){if(r){const c=r[e]||(r[e]=[]),f=n.__weh||(n.__weh=(...d)=>{xo();const a=dm(r),b=gs(n,r,e,d);return a(),wo(),b});return s?c.unshift(f):c.push(f),f}}const Po=e=>(n,r=Hr)=>{(!Uf||e==="sp")&&Vg(e,(...s)=>n(...s),r)},Hd=Po("bm"),gi=Po("m"),hC=Po("bu"),Ub=Po("u"),Or=Po("bum"),um=Po("um"),CM=Po("sp"),TM=Po("rtg"),PM=Po("rtc");function IM(e,n=Hr){Vg("ec",e,n)}const fC="components";function Tt(e,n){return mC(fC,e,!0,n)||e}const AM=Symbol.for("v-ndc");function EM(e){return Oi(e)&&mC(fC,e,!1)||e}function mC(e,n,r=!0,s=!1){const c=Ta||Hr;if(c){const f=c.type;{const a=mD(f,!1);if(a&&(a===n||a===va(n)||a===Ws(va(n))))return f}const d=Zw(c[e]||f[e],n)||Zw(c.appContext[e],n);return!d&&s?f:d}}function Zw(e,n){return e&&(e[n]||e[va(n)]||e[Ws(va(n))])}function Dd(e,n,r,s){let c;const f=r,d=bn(e);if(d||Oi(e)){const a=d&&Pd(e);let b=!1,k=!1;a&&(b=!Xa(e),k=kl(e),e=Rg(e)),c=new Array(e.length);for(let S=0,T=e.length;S<T;S++)c[S]=n(b?k?lg(qr(e[S])):qr(e[S]):e[S],S,void 0,f)}else if(typeof e=="number"){c=new Array(e);for(let a=0;a<e;a++)c[a]=n(a+1,a,void 0,f)}else if(Ii(e))if(e[Symbol.iterator])c=Array.from(e,(a,b)=>n(a,b,void 0,f));else{const a=Object.keys(e);c=new Array(a.length);for(let b=0,k=a.length;b<k;b++){const S=a[b];c[b]=n(e[S],S,b,f)}}else c=[];return c}const vy=e=>e?RC(e)?Fg(e):vy(e.parent):null,Ef=Cr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vy(e.parent),$root:e=>vy(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>gC(e),$forceUpdate:e=>e.f||(e.f=()=>{Fb(e.update)}),$nextTick:e=>e.n||(e.n=zn.bind(e.proxy)),$watch:e=>XM.bind(e)}),V_=(e,n)=>e!==pi&&!e.__isScriptSetup&&li(e,n),MM={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:s,data:c,props:f,accessCache:d,type:a,appContext:b}=e;let k;if(n[0]!=="$"){const P=d[n];if(P!==void 0)switch(P){case 1:return s[n];case 2:return c[n];case 4:return r[n];case 3:return f[n]}else{if(V_(s,n))return d[n]=1,s[n];if(c!==pi&&li(c,n))return d[n]=2,c[n];if((k=e.propsOptions[0])&&li(k,n))return d[n]=3,f[n];if(r!==pi&&li(r,n))return d[n]=4,r[n];_y&&(d[n]=0)}}const S=Ef[n];let T,A;if(S)return n==="$attrs"&&ea(e.attrs,"get",""),S(e);if((T=a.__cssModules)&&(T=T[n]))return T;if(r!==pi&&li(r,n))return d[n]=4,r[n];if(A=b.config.globalProperties,li(A,n))return A[n]},set({_:e},n,r){const{data:s,setupState:c,ctx:f}=e;return V_(c,n)?(c[n]=r,!0):s!==pi&&li(s,n)?(s[n]=r,!0):li(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(f[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:s,appContext:c,propsOptions:f}},d){let a;return!!r[d]||e!==pi&&li(e,d)||V_(n,d)||(a=f[0])&&li(a,d)||li(s,d)||li(Ef,d)||li(c.config.globalProperties,d)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:li(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};function Kw(e){return bn(e)?e.reduce((n,r)=>(n[r]=null,n),{}):e}let _y=!0;function DM(e){const n=gC(e),r=e.proxy,s=e.ctx;_y=!1,n.beforeCreate&&Yw(n.beforeCreate,e,"bc");const{data:c,computed:f,methods:d,watch:a,provide:b,inject:k,created:S,beforeMount:T,mounted:A,beforeUpdate:P,updated:R,activated:B,deactivated:L,beforeDestroy:$,beforeUnmount:j,destroyed:q,unmounted:H,render:ee,renderTracked:Q,renderTriggered:oe,errorCaptured:le,serverPrefetch:ce,expose:he,inheritAttrs:ve,components:ie,directives:be,filters:Be}=n;if(k&&RM(k,s,null),d)for(const Ze in d){const mt=d[Ze];In(mt)&&(s[Ze]=mt.bind(r))}if(c){const Ze=c.call(r,r);Ii(Ze)&&(e.data=Sr(Ze))}if(_y=!0,f)for(const Ze in f){const mt=f[Ze],pt=In(mt)?mt.bind(r,r):In(mt.get)?mt.get.bind(r,r):js,Ve=!In(mt)&&In(mt.set)?mt.set.bind(r):js,Se=te({get:pt,set:Ve});Object.defineProperty(s,Ze,{enumerable:!0,configurable:!0,get:()=>Se.value,set:Ee=>Se.value=Ee})}if(a)for(const Ze in a)pC(a[Ze],s,r,Ze);if(b){const Ze=In(b)?b.call(r):b;Reflect.ownKeys(Ze).forEach(mt=>{ri(mt,Ze[mt])})}S&&Yw(S,e,"c");function Fe(Ze,mt){bn(mt)?mt.forEach(pt=>Ze(pt.bind(r))):mt&&Ze(mt.bind(r))}if(Fe(Hd,T),Fe(gi,A),Fe(hC,P),Fe(Ub,R),Fe(cC,B),Fe(Nb,L),Fe(IM,le),Fe(PM,Q),Fe(TM,oe),Fe(Or,j),Fe(um,H),Fe(CM,ce),bn(he))if(he.length){const Ze=e.exposed||(e.exposed={});he.forEach(mt=>{Object.defineProperty(Ze,mt,{get:()=>r[mt],set:pt=>r[mt]=pt})})}else e.exposed||(e.exposed={});ee&&e.render===js&&(e.render=ee),ve!=null&&(e.inheritAttrs=ve),ie&&(e.components=ie),be&&(e.directives=be),ce&&uC(e)}function RM(e,n,r=js){bn(e)&&(e=yy(e));for(const s in e){const c=e[s];let f;Ii(c)?"default"in c?f=xn(c.from||s,c.default,!0):f=xn(c.from||s):f=xn(c),er(f)?Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get:()=>f.value,set:d=>f.value=d}):n[s]=f}}function Yw(e,n,r){gs(bn(e)?e.map(s=>s.bind(n.proxy)):e.bind(n.proxy),n,r)}function pC(e,n,r,s){let c=s.includes(".")?PC(r,s):()=>r[s];if(Oi(e)){const f=n[e];In(f)&&Ot(c,f)}else if(In(e))Ot(c,e.bind(r));else if(Ii(e))if(bn(e))e.forEach(f=>pC(f,n,r,s));else{const f=In(e.handler)?e.handler.bind(r):n[e.handler];In(f)&&Ot(c,f,e)}}function gC(e){const n=e.type,{mixins:r,extends:s}=n,{mixins:c,optionsCache:f,config:{optionMergeStrategies:d}}=e.appContext,a=f.get(n);let b;return a?b=a:!c.length&&!r&&!s?b=n:(b={},c.length&&c.forEach(k=>hg(b,k,d,!0)),hg(b,n,d)),Ii(n)&&f.set(n,b),b}function hg(e,n,r,s=!1){const{mixins:c,extends:f}=n;f&&hg(e,f,r,!0),c&&c.forEach(d=>hg(e,d,r,!0));for(const d in n)if(!(s&&d==="expose")){const a=LM[d]||r&&r[d];e[d]=a?a(e[d],n[d]):n[d]}return e}const LM={data:Xw,props:Jw,emits:Jw,methods:xf,computed:xf,beforeCreate:fa,created:fa,beforeMount:fa,mounted:fa,beforeUpdate:fa,updated:fa,beforeDestroy:fa,beforeUnmount:fa,destroyed:fa,unmounted:fa,activated:fa,deactivated:fa,errorCaptured:fa,serverPrefetch:fa,components:xf,directives:xf,watch:VM,provide:Xw,inject:zM};function Xw(e,n){return n?e?function(){return Cr(In(e)?e.call(this,this):e,In(n)?n.call(this,this):n)}:n:e}function zM(e,n){return xf(yy(e),yy(n))}function yy(e){if(bn(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function fa(e,n){return e?[...new Set([].concat(e,n))]:n}function xf(e,n){return e?Cr(Object.create(null),e,n):n}function Jw(e,n){return e?bn(e)&&bn(n)?[...new Set([...e,...n])]:Cr(Object.create(null),Kw(e),Kw(n??{})):n}function VM(e,n){if(!e)return n;if(!n)return e;const r=Cr(Object.create(null),e);for(const s in n)r[s]=fa(e[s],n[s]);return r}function vC(){return{app:null,config:{isNativeTag:ME,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BM=0;function OM(e,n){return function(s,c=null){In(s)||(s=Cr({},s)),c!=null&&!Ii(c)&&(c=null);const f=vC(),d=new WeakSet,a=[];let b=!1;const k=f.app={_uid:BM++,_component:s,_props:c,_container:null,_context:f,_instance:null,version:gD,get config(){return f.config},set config(S){},use(S,...T){return d.has(S)||(S&&In(S.install)?(d.add(S),S.install(k,...T)):In(S)&&(d.add(S),S(k,...T))),k},mixin(S){return f.mixins.includes(S)||f.mixins.push(S),k},component(S,T){return T?(f.components[S]=T,k):f.components[S]},directive(S,T){return T?(f.directives[S]=T,k):f.directives[S]},mount(S,T,A){if(!b){const P=k._ceVNode||F(s,c);return P.appContext=f,A===!0?A="svg":A===!1&&(A=void 0),e(P,S,A),b=!0,k._container=S,S.__vue_app__=k,Fg(P.component)}},onUnmount(S){a.push(S)},unmount(){b&&(gs(a,k._instance,16),e(null,k._container),delete k._container.__vue_app__)},provide(S,T){return f.provides[S]=T,k},runWithContext(S){const T=Ad;Ad=k;try{return S()}finally{Ad=T}}};return k}}let Ad=null;function ri(e,n){if(Hr){let r=Hr.provides;const s=Hr.parent&&Hr.parent.provides;s===r&&(r=Hr.provides=Object.create(s)),r[e]=n}}function xn(e,n,r=!1){const s=Hr||Ta;if(s||Ad){let c=Ad?Ad._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(c&&e in c)return c[e];if(arguments.length>1)return r&&In(n)?n.call(s&&s.proxy):n}}const _C={},yC=()=>Object.create(_C),bC=e=>Object.getPrototypeOf(e)===_C;function FM(e,n,r,s=!1){const c={},f=yC();e.propsDefaults=Object.create(null),xC(e,n,c,f);for(const d in e.propsOptions[0])d in c||(c[d]=void 0);r?e.props=s?c:Gk(c):e.type.props?e.props=c:e.props=f,e.attrs=f}function $M(e,n,r,s){const{props:c,attrs:f,vnode:{patchFlag:d}}=e,a=mn(c),[b]=e.propsOptions;let k=!1;if((s||d>0)&&!(d&16)){if(d&8){const S=e.vnode.dynamicProps;for(let T=0;T<S.length;T++){let A=S[T];if(Bg(e.emitsOptions,A))continue;const P=n[A];if(b)if(li(f,A))P!==f[A]&&(f[A]=P,k=!0);else{const R=va(A);c[R]=by(b,a,R,P,e,!1)}else P!==f[A]&&(f[A]=P,k=!0)}}}else{xC(e,n,c,f)&&(k=!0);let S;for(const T in a)(!n||!li(n,T)&&((S=Xu(T))===T||!li(n,S)))&&(b?r&&(r[T]!==void 0||r[S]!==void 0)&&(c[T]=by(b,a,T,void 0,e,!0)):delete c[T]);if(f!==a)for(const T in f)(!n||!li(n,T))&&(delete f[T],k=!0)}k&&yo(e.attrs,"set","")}function xC(e,n,r,s){const[c,f]=e.propsOptions;let d=!1,a;if(n)for(let b in n){if(kf(b))continue;const k=n[b];let S;c&&li(c,S=va(b))?!f||!f.includes(S)?r[S]=k:(a||(a={}))[S]=k:Bg(e.emitsOptions,b)||(!(b in s)||k!==s[b])&&(s[b]=k,d=!0)}if(f){const b=mn(r),k=a||pi;for(let S=0;S<f.length;S++){const T=f[S];r[T]=by(c,b,T,k[T],e,!li(k,T))}}return d}function by(e,n,r,s,c,f){const d=e[r];if(d!=null){const a=li(d,"default");if(a&&s===void 0){const b=d.default;if(d.type!==Function&&!d.skipFactory&&In(b)){const{propsDefaults:k}=c;if(r in k)s=k[r];else{const S=dm(c);s=k[r]=b.call(null,n),S()}}else s=b;c.ce&&c.ce._setProp(r,s)}d[0]&&(f&&!a?s=!1:d[1]&&(s===""||s===Xu(r))&&(s=!0))}return s}const jM=new WeakMap;function wC(e,n,r=!1){const s=r?jM:n.propsCache,c=s.get(e);if(c)return c;const f=e.props,d={},a=[];let b=!1;if(!In(e)){const S=T=>{b=!0;const[A,P]=wC(T,n,!0);Cr(d,A),P&&a.push(...P)};!r&&n.mixins.length&&n.mixins.forEach(S),e.extends&&S(e.extends),e.mixins&&e.mixins.forEach(S)}if(!f&&!b)return Ii(e)&&s.set(e,Cd),Cd;if(bn(f))for(let S=0;S<f.length;S++){const T=va(f[S]);Qw(T)&&(d[T]=pi)}else if(f)for(const S in f){const T=va(S);if(Qw(T)){const A=f[S],P=d[T]=bn(A)||In(A)?{type:A}:Cr({},A),R=P.type;let B=!1,L=!0;if(bn(R))for(let $=0;$<R.length;++$){const j=R[$],q=In(j)&&j.name;if(q==="Boolean"){B=!0;break}else q==="String"&&(L=!1)}else B=In(R)&&R.name==="Boolean";P[0]=B,P[1]=L,(B||li(P,"default"))&&a.push(T)}}const k=[d,a];return Ii(e)&&s.set(e,k),k}function Qw(e){return e[0]!=="$"&&!kf(e)}const Gb=e=>e[0]==="_"||e==="$stable",qb=e=>bn(e)?e.map($s):[$s(e)],NM=(e,n,r)=>{if(n._n)return n;const s=Ue((...c)=>qb(n(...c)),r);return s._c=!1,s},SC=(e,n,r)=>{const s=e._ctx;for(const c in e){if(Gb(c))continue;const f=e[c];if(In(f))n[c]=NM(c,f,s);else if(f!=null){const d=qb(f);n[c]=()=>d}}},kC=(e,n)=>{const r=qb(n);e.slots.default=()=>r},CC=(e,n,r)=>{for(const s in n)(r||!Gb(s))&&(e[s]=n[s])},UM=(e,n,r)=>{const s=e.slots=yC();if(e.vnode.shapeFlag&32){const c=n.__;c&&dy(s,"__",c,!0);const f=n._;f?(CC(s,n,r),r&&dy(s,"_",f,!0)):SC(n,s)}else n&&kC(e,n)},GM=(e,n,r)=>{const{vnode:s,slots:c}=e;let f=!0,d=pi;if(s.shapeFlag&32){const a=n._;a?r&&a===1?f=!1:CC(c,n,r):(f=!n.$stable,SC(n,c)),d=n}else n&&(kC(e,n),d={default:1});if(f)for(const a in c)!Gb(a)&&d[a]==null&&delete c[a]},pa=rD;function qM(e){return HM(e)}function HM(e,n){const r=Dg();r.__VUE__=!0;const{insert:s,remove:c,patchProp:f,createElement:d,createText:a,createComment:b,setText:k,setElementText:S,parentNode:T,nextSibling:A,setScopeId:P=js,insertStaticContent:R}=e,B=(ae,de,ze,Ye=null,ct=null,et=null,It=void 0,dt=null,Lt=!!de.dynamicChildren)=>{if(ae===de)return;ae&&!Ru(ae,de)&&(Ye=Le(ae),Ee(ae,ct,et,!0),ae=null),de.patchFlag===-2&&(Lt=!1,de.dynamicChildren=null);const{type:At,ref:sn,shapeFlag:Wt}=de;switch(At){case cm:L(ae,de,ze,Ye);break;case ta:$(ae,de,ze,Ye);break;case O_:ae==null&&j(de,ze,Ye,It);break;case Ht:ie(ae,de,ze,Ye,ct,et,It,dt,Lt);break;default:Wt&1?ee(ae,de,ze,Ye,ct,et,It,dt,Lt):Wt&6?be(ae,de,ze,Ye,ct,et,It,dt,Lt):(Wt&64||Wt&128)&&At.process(ae,de,ze,Ye,ct,et,It,dt,Lt,Je)}sn!=null&&ct?If(sn,ae&&ae.ref,et,de||ae,!de):sn==null&&ae&&ae.ref!=null&&If(ae.ref,null,et,ae,!0)},L=(ae,de,ze,Ye)=>{if(ae==null)s(de.el=a(de.children),ze,Ye);else{const ct=de.el=ae.el;de.children!==ae.children&&k(ct,de.children)}},$=(ae,de,ze,Ye)=>{ae==null?s(de.el=b(de.children||""),ze,Ye):de.el=ae.el},j=(ae,de,ze,Ye)=>{[ae.el,ae.anchor]=R(ae.children,de,ze,Ye,ae.el,ae.anchor)},q=({el:ae,anchor:de},ze,Ye)=>{let ct;for(;ae&&ae!==de;)ct=A(ae),s(ae,ze,Ye),ae=ct;s(de,ze,Ye)},H=({el:ae,anchor:de})=>{let ze;for(;ae&&ae!==de;)ze=A(ae),c(ae),ae=ze;c(de)},ee=(ae,de,ze,Ye,ct,et,It,dt,Lt)=>{de.type==="svg"?It="svg":de.type==="math"&&(It="mathml"),ae==null?Q(de,ze,Ye,ct,et,It,dt,Lt):ce(ae,de,ct,et,It,dt,Lt)},Q=(ae,de,ze,Ye,ct,et,It,dt)=>{let Lt,At;const{props:sn,shapeFlag:Wt,transition:tn,dirs:dn}=ae;if(Lt=ae.el=d(ae.type,et,sn&&sn.is,sn),Wt&8?S(Lt,ae.children):Wt&16&&le(ae.children,Lt,null,Ye,ct,B_(ae,et),It,dt),dn&&ku(ae,null,Ye,"created"),oe(Lt,ae,ae.scopeId,It,Ye),sn){for(const Dn in sn)Dn!=="value"&&!kf(Dn)&&f(Lt,Dn,null,sn[Dn],et,Ye);"value"in sn&&f(Lt,"value",null,sn.value,et),(At=sn.onVnodeBeforeMount)&&Bs(At,Ye,ae)}dn&&ku(ae,null,Ye,"beforeMount");const _n=WM(ct,tn);_n&&tn.beforeEnter(Lt),s(Lt,de,ze),((At=sn&&sn.onVnodeMounted)||_n||dn)&&pa(()=>{At&&Bs(At,Ye,ae),_n&&tn.enter(Lt),dn&&ku(ae,null,Ye,"mounted")},ct)},oe=(ae,de,ze,Ye,ct)=>{if(ze&&P(ae,ze),Ye)for(let et=0;et<Ye.length;et++)P(ae,Ye[et]);if(ct){let et=ct.subTree;if(de===et||AC(et.type)&&(et.ssContent===de||et.ssFallback===de)){const It=ct.vnode;oe(ae,It,It.scopeId,It.slotScopeIds,ct.parent)}}},le=(ae,de,ze,Ye,ct,et,It,dt,Lt=0)=>{for(let At=Lt;At<ae.length;At++){const sn=ae[At]=dt?vl(ae[At]):$s(ae[At]);B(null,sn,de,ze,Ye,ct,et,It,dt)}},ce=(ae,de,ze,Ye,ct,et,It)=>{const dt=de.el=ae.el;let{patchFlag:Lt,dynamicChildren:At,dirs:sn}=de;Lt|=ae.patchFlag&16;const Wt=ae.props||pi,tn=de.props||pi;let dn;if(ze&&Cu(ze,!1),(dn=tn.onVnodeBeforeUpdate)&&Bs(dn,ze,de,ae),sn&&ku(de,ae,ze,"beforeUpdate"),ze&&Cu(ze,!0),(Wt.innerHTML&&tn.innerHTML==null||Wt.textContent&&tn.textContent==null)&&S(dt,""),At?he(ae.dynamicChildren,At,dt,ze,Ye,B_(de,ct),et):It||mt(ae,de,dt,null,ze,Ye,B_(de,ct),et,!1),Lt>0){if(Lt&16)ve(dt,Wt,tn,ze,ct);else if(Lt&2&&Wt.class!==tn.class&&f(dt,"class",null,tn.class,ct),Lt&4&&f(dt,"style",Wt.style,tn.style,ct),Lt&8){const _n=de.dynamicProps;for(let Dn=0;Dn<_n.length;Dn++){const Vn=_n[Dn],Ni=Wt[Vn],Yi=tn[Vn];(Yi!==Ni||Vn==="value")&&f(dt,Vn,Ni,Yi,ct,ze)}}Lt&1&&ae.children!==de.children&&S(dt,de.children)}else!It&&At==null&&ve(dt,Wt,tn,ze,ct);((dn=tn.onVnodeUpdated)||sn)&&pa(()=>{dn&&Bs(dn,ze,de,ae),sn&&ku(de,ae,ze,"updated")},Ye)},he=(ae,de,ze,Ye,ct,et,It)=>{for(let dt=0;dt<de.length;dt++){const Lt=ae[dt],At=de[dt],sn=Lt.el&&(Lt.type===Ht||!Ru(Lt,At)||Lt.shapeFlag&198)?T(Lt.el):ze;B(Lt,At,sn,null,Ye,ct,et,It,!0)}},ve=(ae,de,ze,Ye,ct)=>{if(de!==ze){if(de!==pi)for(const et in de)!kf(et)&&!(et in ze)&&f(ae,et,de[et],null,ct,Ye);for(const et in ze){if(kf(et))continue;const It=ze[et],dt=de[et];It!==dt&&et!=="value"&&f(ae,et,dt,It,ct,Ye)}"value"in ze&&f(ae,"value",de.value,ze.value,ct)}},ie=(ae,de,ze,Ye,ct,et,It,dt,Lt)=>{const At=de.el=ae?ae.el:a(""),sn=de.anchor=ae?ae.anchor:a("");let{patchFlag:Wt,dynamicChildren:tn,slotScopeIds:dn}=de;dn&&(dt=dt?dt.concat(dn):dn),ae==null?(s(At,ze,Ye),s(sn,ze,Ye),le(de.children||[],ze,sn,ct,et,It,dt,Lt)):Wt>0&&Wt&64&&tn&&ae.dynamicChildren?(he(ae.dynamicChildren,tn,ze,ct,et,It,dt),(de.key!=null||ct&&de===ct.subTree)&&Hb(ae,de,!0)):mt(ae,de,ze,sn,ct,et,It,dt,Lt)},be=(ae,de,ze,Ye,ct,et,It,dt,Lt)=>{de.slotScopeIds=dt,ae==null?de.shapeFlag&512?ct.ctx.activate(de,ze,Ye,It,Lt):Be(de,ze,Ye,ct,et,It,Lt):De(ae,de,Lt)},Be=(ae,de,ze,Ye,ct,et,It)=>{const dt=ae.component=uD(ae,Ye,ct);if(zg(ae)&&(dt.ctx.renderer=Je),cD(dt,!1,It),dt.asyncDep){if(ct&&ct.registerDep(dt,Fe,It),!ae.el){const Lt=dt.subTree=F(ta);$(null,Lt,de,ze)}}else Fe(dt,ae,de,ze,ct,et,It)},De=(ae,de,ze)=>{const Ye=de.component=ae.component;if(nD(ae,de,ze))if(Ye.asyncDep&&!Ye.asyncResolved){Ze(Ye,de,ze);return}else Ye.next=de,Ye.update();else de.el=ae.el,Ye.vnode=de},Fe=(ae,de,ze,Ye,ct,et,It)=>{const dt=()=>{if(ae.isMounted){let{next:Wt,bu:tn,u:dn,parent:_n,vnode:Dn}=ae;{const He=TC(ae);if(He){Wt&&(Wt.el=Dn.el,Ze(ae,Wt,It)),He.asyncDep.then(()=>{ae.isUnmounted||dt()});return}}let Vn=Wt,Ni;Cu(ae,!1),Wt?(Wt.el=Dn.el,Ze(ae,Wt,It)):Wt=Dn,tn&&Qp(tn),(Ni=Wt.props&&Wt.props.onVnodeBeforeUpdate)&&Bs(Ni,_n,Wt,Dn),Cu(ae,!0);const Yi=t1(ae),Ui=ae.subTree;ae.subTree=Yi,B(Ui,Yi,T(Ui.el),Le(Ui),ae,ct,et),Wt.el=Yi.el,Vn===null&&iD(ae,Yi.el),dn&&pa(dn,ct),(Ni=Wt.props&&Wt.props.onVnodeUpdated)&&pa(()=>Bs(Ni,_n,Wt,Dn),ct)}else{let Wt;const{el:tn,props:dn}=de,{bm:_n,m:Dn,parent:Vn,root:Ni,type:Yi}=ae,Ui=Af(de);Cu(ae,!1),_n&&Qp(_n),!Ui&&(Wt=dn&&dn.onVnodeBeforeMount)&&Bs(Wt,Vn,de),Cu(ae,!0);{Ni.ce&&Ni.ce._def.shadowRoot!==!1&&Ni.ce._injectChildStyle(Yi);const He=ae.subTree=t1(ae);B(null,He,ze,Ye,ae,ct,et),de.el=He.el}if(Dn&&pa(Dn,ct),!Ui&&(Wt=dn&&dn.onVnodeMounted)){const He=de;pa(()=>Bs(Wt,Vn,He),ct)}(de.shapeFlag&256||Vn&&Af(Vn.vnode)&&Vn.vnode.shapeFlag&256)&&ae.a&&pa(ae.a,ct),ae.isMounted=!0,de=ze=Ye=null}};ae.scope.on();const Lt=ae.effect=new Ek(dt);ae.scope.off();const At=ae.update=Lt.run.bind(Lt),sn=ae.job=Lt.runIfDirty.bind(Lt);sn.i=ae,sn.id=ae.uid,Lt.scheduler=()=>Fb(sn),Cu(ae,!0),At()},Ze=(ae,de,ze)=>{de.component=ae;const Ye=ae.vnode.props;ae.vnode=de,ae.next=null,$M(ae,de.props,Ye,ze),GM(ae,de.children,ze),xo(),Uw(ae),wo()},mt=(ae,de,ze,Ye,ct,et,It,dt,Lt=!1)=>{const At=ae&&ae.children,sn=ae?ae.shapeFlag:0,Wt=de.children,{patchFlag:tn,shapeFlag:dn}=de;if(tn>0){if(tn&128){Ve(At,Wt,ze,Ye,ct,et,It,dt,Lt);return}else if(tn&256){pt(At,Wt,ze,Ye,ct,et,It,dt,Lt);return}}dn&8?(sn&16&&wt(At,ct,et),Wt!==At&&S(ze,Wt)):sn&16?dn&16?Ve(At,Wt,ze,Ye,ct,et,It,dt,Lt):wt(At,ct,et,!0):(sn&8&&S(ze,""),dn&16&&le(Wt,ze,Ye,ct,et,It,dt,Lt))},pt=(ae,de,ze,Ye,ct,et,It,dt,Lt)=>{ae=ae||Cd,de=de||Cd;const At=ae.length,sn=de.length,Wt=Math.min(At,sn);let tn;for(tn=0;tn<Wt;tn++){const dn=de[tn]=Lt?vl(de[tn]):$s(de[tn]);B(ae[tn],dn,ze,null,ct,et,It,dt,Lt)}At>sn?wt(ae,ct,et,!0,!1,Wt):le(de,ze,Ye,ct,et,It,dt,Lt,Wt)},Ve=(ae,de,ze,Ye,ct,et,It,dt,Lt)=>{let At=0;const sn=de.length;let Wt=ae.length-1,tn=sn-1;for(;At<=Wt&&At<=tn;){const dn=ae[At],_n=de[At]=Lt?vl(de[At]):$s(de[At]);if(Ru(dn,_n))B(dn,_n,ze,null,ct,et,It,dt,Lt);else break;At++}for(;At<=Wt&&At<=tn;){const dn=ae[Wt],_n=de[tn]=Lt?vl(de[tn]):$s(de[tn]);if(Ru(dn,_n))B(dn,_n,ze,null,ct,et,It,dt,Lt);else break;Wt--,tn--}if(At>Wt){if(At<=tn){const dn=tn+1,_n=dn<sn?de[dn].el:Ye;for(;At<=tn;)B(null,de[At]=Lt?vl(de[At]):$s(de[At]),ze,_n,ct,et,It,dt,Lt),At++}}else if(At>tn)for(;At<=Wt;)Ee(ae[At],ct,et,!0),At++;else{const dn=At,_n=At,Dn=new Map;for(At=_n;At<=tn;At++){const me=de[At]=Lt?vl(de[At]):$s(de[At]);me.key!=null&&Dn.set(me.key,At)}let Vn,Ni=0;const Yi=tn-_n+1;let Ui=!1,He=0;const se=new Array(Yi);for(At=0;At<Yi;At++)se[At]=0;for(At=dn;At<=Wt;At++){const me=ae[At];if(Ni>=Yi){Ee(me,ct,et,!0);continue}let ke;if(me.key!=null)ke=Dn.get(me.key);else for(Vn=_n;Vn<=tn;Vn++)if(se[Vn-_n]===0&&Ru(me,de[Vn])){ke=Vn;break}ke===void 0?Ee(me,ct,et,!0):(se[ke-_n]=At+1,ke>=He?He=ke:Ui=!0,B(me,de[ke],ze,null,ct,et,It,dt,Lt),Ni++)}const ue=Ui?ZM(se):Cd;for(Vn=ue.length-1,At=Yi-1;At>=0;At--){const me=_n+At,ke=de[me],je=me+1<sn?de[me+1].el:Ye;se[At]===0?B(null,ke,ze,je,ct,et,It,dt,Lt):Ui&&(Vn<0||At!==ue[Vn]?Se(ke,ze,je,2):Vn--)}}},Se=(ae,de,ze,Ye,ct=null)=>{const{el:et,type:It,transition:dt,children:Lt,shapeFlag:At}=ae;if(At&6){Se(ae.component.subTree,de,ze,Ye);return}if(At&128){ae.suspense.move(de,ze,Ye);return}if(At&64){It.move(ae,de,ze,Je);return}if(It===Ht){s(et,de,ze);for(let Wt=0;Wt<Lt.length;Wt++)Se(Lt[Wt],de,ze,Ye);s(ae.anchor,de,ze);return}if(It===O_){q(ae,de,ze);return}if(Ye!==2&&At&1&&dt)if(Ye===0)dt.beforeEnter(et),s(et,de,ze),pa(()=>dt.enter(et),ct);else{const{leave:Wt,delayLeave:tn,afterLeave:dn}=dt,_n=()=>{ae.ctx.isUnmounted?c(et):s(et,de,ze)},Dn=()=>{Wt(et,()=>{_n(),dn&&dn()})};tn?tn(et,_n,Dn):Dn()}else s(et,de,ze)},Ee=(ae,de,ze,Ye=!1,ct=!1)=>{const{type:et,props:It,ref:dt,children:Lt,dynamicChildren:At,shapeFlag:sn,patchFlag:Wt,dirs:tn,cacheIndex:dn}=ae;if(Wt===-2&&(ct=!1),dt!=null&&(xo(),If(dt,null,ze,ae,!0),wo()),dn!=null&&(de.renderCache[dn]=void 0),sn&256){de.ctx.deactivate(ae);return}const _n=sn&1&&tn,Dn=!Af(ae);let Vn;if(Dn&&(Vn=It&&It.onVnodeBeforeUnmount)&&Bs(Vn,de,ae),sn&6)kt(ae.component,ze,Ye);else{if(sn&128){ae.suspense.unmount(ze,Ye);return}_n&&ku(ae,null,de,"beforeUnmount"),sn&64?ae.type.remove(ae,de,ze,Je,Ye):At&&!At.hasOnce&&(et!==Ht||Wt>0&&Wt&64)?wt(At,de,ze,!1,!0):(et===Ht&&Wt&384||!ct&&sn&16)&&wt(Lt,de,ze),Ye&&tt(ae)}(Dn&&(Vn=It&&It.onVnodeUnmounted)||_n)&&pa(()=>{Vn&&Bs(Vn,de,ae),_n&&ku(ae,null,de,"unmounted")},ze)},tt=ae=>{const{type:de,el:ze,anchor:Ye,transition:ct}=ae;if(de===Ht){Nt(ze,Ye);return}if(de===O_){H(ae);return}const et=()=>{c(ze),ct&&!ct.persisted&&ct.afterLeave&&ct.afterLeave()};if(ae.shapeFlag&1&&ct&&!ct.persisted){const{leave:It,delayLeave:dt}=ct,Lt=()=>It(ze,et);dt?dt(ae.el,et,Lt):Lt()}else et()},Nt=(ae,de)=>{let ze;for(;ae!==de;)ze=A(ae),c(ae),ae=ze;c(de)},kt=(ae,de,ze)=>{const{bum:Ye,scope:ct,job:et,subTree:It,um:dt,m:Lt,a:At,parent:sn,slots:{__:Wt}}=ae;e1(Lt),e1(At),Ye&&Qp(Ye),sn&&bn(Wt)&&Wt.forEach(tn=>{sn.renderCache[tn]=void 0}),ct.stop(),et&&(et.flags|=8,Ee(It,ae,de,ze)),dt&&pa(dt,de),pa(()=>{ae.isUnmounted=!0},de),de&&de.pendingBranch&&!de.isUnmounted&&ae.asyncDep&&!ae.asyncResolved&&ae.suspenseId===de.pendingId&&(de.deps--,de.deps===0&&de.resolve())},wt=(ae,de,ze,Ye=!1,ct=!1,et=0)=>{for(let It=et;It<ae.length;It++)Ee(ae[It],de,ze,Ye,ct)},Le=ae=>{if(ae.shapeFlag&6)return Le(ae.component.subTree);if(ae.shapeFlag&128)return ae.suspense.next();const de=A(ae.anchor||ae.el),ze=de&&de[eC];return ze?A(ze):de};let _t=!1;const ot=(ae,de,ze)=>{ae==null?de._vnode&&Ee(de._vnode,null,null,!0):B(de._vnode||null,ae,de,null,null,null,ze),de._vnode=ae,_t||(_t=!0,Uw(),Xk(),_t=!1)},Je={p:B,um:Ee,m:Se,r:tt,mt:Be,mc:le,pc:mt,pbc:he,n:Le,o:e};return{render:ot,hydrate:void 0,createApp:OM(ot)}}function B_({type:e,props:n},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function Cu({effect:e,job:n},r){r?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function WM(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Hb(e,n,r=!1){const s=e.children,c=n.children;if(bn(s)&&bn(c))for(let f=0;f<s.length;f++){const d=s[f];let a=c[f];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=c[f]=vl(c[f]),a.el=d.el),!r&&a.patchFlag!==-2&&Hb(d,a)),a.type===cm&&(a.el=d.el),a.type===ta&&!a.el&&(a.el=d.el)}}function ZM(e){const n=e.slice(),r=[0];let s,c,f,d,a;const b=e.length;for(s=0;s<b;s++){const k=e[s];if(k!==0){if(c=r[r.length-1],e[c]<k){n[s]=c,r.push(s);continue}for(f=0,d=r.length-1;f<d;)a=f+d>>1,e[r[a]]<k?f=a+1:d=a;k<e[r[f]]&&(f>0&&(n[s]=r[f-1]),r[f]=s)}}for(f=r.length,d=r[f-1];f-- >0;)r[f]=d,d=n[d];return r}function TC(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:TC(n)}function e1(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const KM=Symbol.for("v-scx"),YM=()=>xn(KM);function Li(e,n){return Wb(e,null,n)}function Ot(e,n,r){return Wb(e,n,r)}function Wb(e,n,r=pi){const{immediate:s,deep:c,flush:f,once:d}=r,a=Cr({},r),b=n&&s||!n&&f!=="post";let k;if(Uf){if(f==="sync"){const P=YM();k=P.__watcherHandles||(P.__watcherHandles=[])}else if(!b){const P=()=>{};return P.stop=js,P.resume=js,P.pause=js,P}}const S=Hr;a.call=(P,R,B)=>gs(P,S,R,B);let T=!1;f==="post"?a.scheduler=P=>{pa(P,S&&S.suspense)}:f!=="sync"&&(T=!0,a.scheduler=(P,R)=>{R?P():Fb(P)}),a.augmentJob=P=>{n&&(P.flags|=4),T&&(P.flags|=2,S&&(P.id=S.uid,P.i=S))};const A=gM(e,n,a);return Uf&&(k?k.push(A):b&&A()),A}function XM(e,n,r){const s=this.proxy,c=Oi(e)?e.includes(".")?PC(s,e):()=>s[e]:e.bind(s,s);let f;In(n)?f=n:(f=n.handler,r=n);const d=dm(this),a=Wb(c,f.bind(s),r);return d(),a}function PC(e,n){const r=n.split(".");return()=>{let s=e;for(let c=0;c<r.length&&s;c++)s=s[r[c]];return s}}const JM=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${va(n)}Modifiers`]||e[`${Xu(n)}Modifiers`];function QM(e,n,...r){if(e.isUnmounted)return;const s=e.vnode.props||pi;let c=r;const f=n.startsWith("update:"),d=f&&JM(s,n.slice(7));d&&(d.trim&&(c=r.map(S=>Oi(S)?S.trim():S)),d.number&&(c=r.map(hy)));let a,b=s[a=E_(n)]||s[a=E_(va(n))];!b&&f&&(b=s[a=E_(Xu(n))]),b&&gs(b,e,6,c);const k=s[a+"Once"];if(k){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,gs(k,e,6,c)}}function IC(e,n,r=!1){const s=n.emitsCache,c=s.get(e);if(c!==void 0)return c;const f=e.emits;let d={},a=!1;if(!In(e)){const b=k=>{const S=IC(k,n,!0);S&&(a=!0,Cr(d,S))};!r&&n.mixins.length&&n.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}return!f&&!a?(Ii(e)&&s.set(e,null),null):(bn(f)?f.forEach(b=>d[b]=null):Cr(d,f),Ii(e)&&s.set(e,d),d)}function Bg(e,n){return!e||!Ag(n)?!1:(n=n.slice(2).replace(/Once$/,""),li(e,n[0].toLowerCase()+n.slice(1))||li(e,Xu(n))||li(e,n))}function t1(e){const{type:n,vnode:r,proxy:s,withProxy:c,propsOptions:[f],slots:d,attrs:a,emit:b,render:k,renderCache:S,props:T,data:A,setupState:P,ctx:R,inheritAttrs:B}=e,L=dg(e);let $,j;try{if(r.shapeFlag&4){const H=c||s,ee=H;$=$s(k.call(ee,H,S,T,P,A,R)),j=a}else{const H=n;$=$s(H.length>1?H(T,{attrs:a,slots:d,emit:b}):H(T,null)),j=n.props?a:eD(a)}}catch(H){Mf.length=0,Lg(H,e,1),$=F(ta)}let q=$;if(j&&B!==!1){const H=Object.keys(j),{shapeFlag:ee}=q;H.length&&ee&7&&(f&&H.some(Ab)&&(j=tD(j,f)),q=So(q,j,!1,!0))}return r.dirs&&(q=So(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(r.dirs):r.dirs),r.transition&&Nu(q,r.transition),$=q,dg(L),$}const eD=e=>{let n;for(const r in e)(r==="class"||r==="style"||Ag(r))&&((n||(n={}))[r]=e[r]);return n},tD=(e,n)=>{const r={};for(const s in e)(!Ab(s)||!(s.slice(9)in n))&&(r[s]=e[s]);return r};function nD(e,n,r){const{props:s,children:c,component:f}=e,{props:d,children:a,patchFlag:b}=n,k=f.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&b>=0){if(b&1024)return!0;if(b&16)return s?n1(s,d,k):!!d;if(b&8){const S=n.dynamicProps;for(let T=0;T<S.length;T++){const A=S[T];if(d[A]!==s[A]&&!Bg(k,A))return!0}}}else return(c||a)&&(!a||!a.$stable)?!0:s===d?!1:s?d?n1(s,d,k):!0:!!d;return!1}function n1(e,n,r){const s=Object.keys(n);if(s.length!==Object.keys(e).length)return!0;for(let c=0;c<s.length;c++){const f=s[c];if(n[f]!==e[f]&&!Bg(r,f))return!0}return!1}function iD({vnode:e,parent:n},r){for(;n;){const s=n.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=n.vnode).el=r,n=n.parent;else break}}const AC=e=>e.__isSuspense;function rD(e,n){n&&n.pendingBranch?bn(e)?n.effects.push(...e):n.effects.push(e):yM(e)}const Ht=Symbol.for("v-fgt"),cm=Symbol.for("v-txt"),ta=Symbol.for("v-cmt"),O_=Symbol.for("v-stc"),Mf=[];let Ba=null;function on(e=!1){Mf.push(Ba=e?null:[])}function aD(){Mf.pop(),Ba=Mf[Mf.length-1]||null}let jf=1;function i1(e,n=!1){jf+=e,e<0&&Ba&&n&&(Ba.hasOnce=!0)}function EC(e){return e.dynamicChildren=jf>0?Ba||Cd:null,aD(),jf>0&&Ba&&Ba.push(e),e}function hr(e,n,r,s,c,f){return EC(Y(e,n,r,s,c,f,!0))}function Pn(e,n,r,s,c){return EC(F(e,n,r,s,c,!0))}function Nf(e){return e?e.__v_isVNode===!0:!1}function Ru(e,n){return e.type===n.type&&e.key===n.key}const MC=({key:e})=>e??null,tg=({ref:e,ref_key:n,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Oi(e)||er(e)||In(e)?{i:Ta,r:e,k:n,f:!!r}:e:null);function Y(e,n=null,r=null,s=0,c=null,f=e===Ht?0:1,d=!1,a=!1){const b={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&MC(n),ref:n&&tg(n),scopeId:Qk,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:s,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:Ta};return a?(Zb(b,r),f&128&&e.normalize(b)):r&&(b.shapeFlag|=Oi(r)?8:16),jf>0&&!d&&Ba&&(b.patchFlag>0||f&6)&&b.patchFlag!==32&&Ba.push(b),b}const F=sD;function sD(e,n=null,r=null,s=0,c=null,f=!1){if((!e||e===AM)&&(e=ta),Nf(e)){const a=So(e,n,!0);return r&&Zb(a,r),jf>0&&!f&&Ba&&(a.shapeFlag&6?Ba[Ba.indexOf(e)]=a:Ba.push(a)),a.patchFlag=-2,a}if(pD(e)&&(e=e.__vccOpts),n){n=DC(n);let{class:a,style:b}=n;a&&!Oi(a)&&(n.class=vt(a)),Ii(b)&&(Ob(b)&&!bn(b)&&(b=Cr({},b)),n.style=Bt(b))}const d=Oi(e)?1:AC(e)?128:tC(e)?64:Ii(e)?4:In(e)?2:0;return Y(e,n,r,s,c,d,f,!0)}function DC(e){return e?Ob(e)||bC(e)?Cr({},e):e:null}function So(e,n,r=!1,s=!1){const{props:c,ref:f,patchFlag:d,children:a,transition:b}=e,k=n?ut(c||{},n):c,S={__v_isVNode:!0,__v_skip:!0,type:e.type,props:k,key:k&&MC(k),ref:n&&n.ref?r&&f?bn(f)?f.concat(tg(n)):[f,tg(n)]:tg(n):f,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Ht?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:b,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&So(e.ssContent),ssFallback:e.ssFallback&&So(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return b&&s&&Nu(S,b.clone(S)),S}function Ft(e=" ",n=0){return F(cm,null,e,n)}function Lr(e="",n=!1){return n?(on(),Pn(ta,null,e)):F(ta,null,e)}function $s(e){return e==null||typeof e=="boolean"?F(ta):bn(e)?F(Ht,null,e.slice()):Nf(e)?vl(e):F(cm,null,String(e))}function vl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:So(e)}function Zb(e,n){let r=0;const{shapeFlag:s}=e;if(n==null)n=null;else if(bn(n))r=16;else if(typeof n=="object")if(s&65){const c=n.default;c&&(c._c&&(c._d=!1),Zb(e,c()),c._c&&(c._d=!0));return}else{r=32;const c=n._;!c&&!bC(n)?n._ctx=Ta:c===3&&Ta&&(Ta.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else In(n)?(n={default:n,_ctx:Ta},r=32):(n=String(n),s&64?(r=16,n=[Ft(n)]):r=8);e.children=n,e.shapeFlag|=r}function ut(...e){const n={};for(let r=0;r<e.length;r++){const s=e[r];for(const c in s)if(c==="class")n.class!==s.class&&(n.class=vt([n.class,s.class]));else if(c==="style")n.style=Bt([n.style,s.style]);else if(Ag(c)){const f=n[c],d=s[c];d&&f!==d&&!(bn(f)&&f.includes(d))&&(n[c]=f?[].concat(f,d):d)}else c!==""&&(n[c]=s[c])}return n}function Bs(e,n,r,s=null){gs(e,n,7,[r,s])}const oD=vC();let lD=0;function uD(e,n,r){const s=e.type,c=(n?n.appContext:e.appContext)||oD,f={uid:lD++,vnode:e,type:s,parent:n,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ik(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(c.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wC(s,c),emitsOptions:IC(s,c),emit:null,emitted:null,propsDefaults:pi,inheritAttrs:s.inheritAttrs,ctx:pi,data:pi,props:pi,attrs:pi,slots:pi,refs:pi,setupState:pi,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=n?n.root:f,f.emit=QM.bind(null,f),e.ce&&e.ce(f),f}let Hr=null;const Og=()=>Hr||Ta;let fg,xy;{const e=Dg(),n=(r,s)=>{let c;return(c=e[r])||(c=e[r]=[]),c.push(s),f=>{c.length>1?c.forEach(d=>d(f)):c[0](f)}};fg=n("__VUE_INSTANCE_SETTERS__",r=>Hr=r),xy=n("__VUE_SSR_SETTERS__",r=>Uf=r)}const dm=e=>{const n=Hr;return fg(e),e.scope.on(),()=>{e.scope.off(),fg(n)}},r1=()=>{Hr&&Hr.scope.off(),fg(null)};function RC(e){return e.vnode.shapeFlag&4}let Uf=!1;function cD(e,n=!1,r=!1){n&&xy(n);const{props:s,children:c}=e.vnode,f=RC(e);FM(e,s,f,n),UM(e,c,r||n);const d=f?dD(e,n):void 0;return n&&xy(!1),d}function dD(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,MM);const{setup:s}=r;if(s){xo();const c=e.setupContext=s.length>1?fD(e):null,f=dm(e),d=lm(s,e,0,[e.props,c]),a=wk(d);if(wo(),f(),(a||e.sp)&&!Af(e)&&uC(e),a){if(d.then(r1,r1),n)return d.then(b=>{a1(e,b)}).catch(b=>{Lg(b,e,0)});e.asyncDep=d}else a1(e,d)}else LC(e)}function a1(e,n,r){In(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Ii(n)&&(e.setupState=Wk(n)),LC(e)}function LC(e,n,r){const s=e.type;e.render||(e.render=s.render||js);{const c=dm(e);xo();try{DM(e)}finally{wo(),c()}}}const hD={get(e,n){return ea(e,"get",""),e[n]}};function fD(e){const n=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,hD),slots:e.slots,emit:e.emit,expose:n}}function Fg(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Wk(qk(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in Ef)return Ef[r](e)},has(n,r){return r in n||r in Ef}})):e.proxy}function mD(e,n=!0){return In(e)?e.displayName||e.name:e.name||n&&e.__name}function pD(e){return In(e)&&"__vccOpts"in e}const te=(e,n)=>mM(e,n,Uf);function bs(e,n,r){const s=arguments.length;return s===2?Ii(n)&&!bn(n)?Nf(n)?F(e,null,[n]):F(e,n):F(e,null,n):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&Nf(r)&&(r=[r]),F(e,n,r))}const gD="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wy;const s1=typeof window<"u"&&window.trustedTypes;if(s1)try{wy=s1.createPolicy("vue",{createHTML:e=>e})}catch{}const zC=wy?e=>wy.createHTML(e):e=>e,vD="http://www.w3.org/2000/svg",_D="http://www.w3.org/1998/Math/MathML",vo=typeof document<"u"?document:null,o1=vo&&vo.createElement("template"),yD={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,s)=>{const c=n==="svg"?vo.createElementNS(vD,e):n==="mathml"?vo.createElementNS(_D,e):r?vo.createElement(e,{is:r}):vo.createElement(e);return e==="select"&&s&&s.multiple!=null&&c.setAttribute("multiple",s.multiple),c},createText:e=>vo.createTextNode(e),createComment:e=>vo.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vo.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,s,c,f){const d=r?r.previousSibling:n.lastChild;if(c&&(c===f||c.nextSibling))for(;n.insertBefore(c.cloneNode(!0),r),!(c===f||!(c=c.nextSibling)););else{o1.innerHTML=zC(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=o1.content;if(s==="svg"||s==="mathml"){const b=a.firstChild;for(;b.firstChild;)a.appendChild(b.firstChild);a.removeChild(b)}n.insertBefore(a,r)}return[d?d.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},dl="transition",pf="animation",Rd=Symbol("_vtc"),VC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},BC=Cr({},aC,VC),bD=e=>(e.displayName="Transition",e.props=BC,e),Cl=bD((e,{slots:n})=>bs(SM,OC(e),n)),Tu=(e,n=[])=>{bn(e)?e.forEach(r=>r(...n)):e&&e(...n)},l1=e=>e?bn(e)?e.some(n=>n.length>1):e.length>1:!1;function OC(e){const n={};for(const ie in e)ie in VC||(n[ie]=e[ie]);if(e.css===!1)return n;const{name:r="v",type:s,duration:c,enterFromClass:f=`${r}-enter-from`,enterActiveClass:d=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:b=f,appearActiveClass:k=d,appearToClass:S=a,leaveFromClass:T=`${r}-leave-from`,leaveActiveClass:A=`${r}-leave-active`,leaveToClass:P=`${r}-leave-to`}=e,R=xD(c),B=R&&R[0],L=R&&R[1],{onBeforeEnter:$,onEnter:j,onEnterCancelled:q,onLeave:H,onLeaveCancelled:ee,onBeforeAppear:Q=$,onAppear:oe=j,onAppearCancelled:le=q}=n,ce=(ie,be,Be,De)=>{ie._enterCancelled=De,fl(ie,be?S:a),fl(ie,be?k:d),Be&&Be()},he=(ie,be)=>{ie._isLeaving=!1,fl(ie,T),fl(ie,P),fl(ie,A),be&&be()},ve=ie=>(be,Be)=>{const De=ie?oe:j,Fe=()=>ce(be,ie,Be);Tu(De,[be,Fe]),u1(()=>{fl(be,ie?b:f),Os(be,ie?S:a),l1(De)||c1(be,s,B,Fe)})};return Cr(n,{onBeforeEnter(ie){Tu($,[ie]),Os(ie,f),Os(ie,d)},onBeforeAppear(ie){Tu(Q,[ie]),Os(ie,b),Os(ie,k)},onEnter:ve(!1),onAppear:ve(!0),onLeave(ie,be){ie._isLeaving=!0;const Be=()=>he(ie,be);Os(ie,T),ie._enterCancelled?(Os(ie,A),Sy()):(Sy(),Os(ie,A)),u1(()=>{ie._isLeaving&&(fl(ie,T),Os(ie,P),l1(H)||c1(ie,s,L,Be))}),Tu(H,[ie,Be])},onEnterCancelled(ie){ce(ie,!1,void 0,!0),Tu(q,[ie])},onAppearCancelled(ie){ce(ie,!0,void 0,!0),Tu(le,[ie])},onLeaveCancelled(ie){he(ie),Tu(ee,[ie])}})}function xD(e){if(e==null)return null;if(Ii(e))return[F_(e.enter),F_(e.leave)];{const n=F_(e);return[n,n]}}function F_(e){return VE(e)}function Os(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Rd]||(e[Rd]=new Set)).add(n)}function fl(e,n){n.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const r=e[Rd];r&&(r.delete(n),r.size||(e[Rd]=void 0))}function u1(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let wD=0;function c1(e,n,r,s){const c=e._endId=++wD,f=()=>{c===e._endId&&s()};if(r!=null)return setTimeout(f,r);const{type:d,timeout:a,propCount:b}=FC(e,n);if(!d)return s();const k=d+"end";let S=0;const T=()=>{e.removeEventListener(k,A),f()},A=P=>{P.target===e&&++S>=b&&T()};setTimeout(()=>{S<b&&T()},a+1),e.addEventListener(k,A)}function FC(e,n){const r=window.getComputedStyle(e),s=R=>(r[R]||"").split(", "),c=s(`${dl}Delay`),f=s(`${dl}Duration`),d=d1(c,f),a=s(`${pf}Delay`),b=s(`${pf}Duration`),k=d1(a,b);let S=null,T=0,A=0;n===dl?d>0&&(S=dl,T=d,A=f.length):n===pf?k>0&&(S=pf,T=k,A=b.length):(T=Math.max(d,k),S=T>0?d>k?dl:pf:null,A=S?S===dl?f.length:b.length:0);const P=S===dl&&/\b(transform|all)(,|$)/.test(s(`${dl}Property`).toString());return{type:S,timeout:T,propCount:A,hasTransform:P}}function d1(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,s)=>h1(r)+h1(e[s])))}function h1(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Sy(){return document.body.offsetHeight}function SD(e,n,r){const s=e[Rd];s&&(n=(n?[n,...s]:[...s]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}const mg=Symbol("_vod"),$C=Symbol("_vsh"),xs={beforeMount(e,{value:n},{transition:r}){e[mg]=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):gf(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:s}){!n!=!r&&(s?n?(s.beforeEnter(e),gf(e,!0),s.enter(e)):s.leave(e,()=>{gf(e,!1)}):gf(e,n))},beforeUnmount(e,{value:n}){gf(e,n)}};function gf(e,n){e.style.display=n?e[mg]:"none",e[$C]=!n}const kD=Symbol(""),CD=/(^|;)\s*display\s*:/;function TD(e,n,r){const s=e.style,c=Oi(r);let f=!1;if(r&&!c){if(n)if(Oi(n))for(const d of n.split(";")){const a=d.slice(0,d.indexOf(":")).trim();r[a]==null&&ng(s,a,"")}else for(const d in n)r[d]==null&&ng(s,d,"");for(const d in r)d==="display"&&(f=!0),ng(s,d,r[d])}else if(c){if(n!==r){const d=s[kD];d&&(r+=";"+d),s.cssText=r,f=CD.test(r)}}else n&&e.removeAttribute("style");mg in e&&(e[mg]=f?s.display:"",e[$C]&&(s.display="none"))}const f1=/\s*!important$/;function ng(e,n,r){if(bn(r))r.forEach(s=>ng(e,n,s));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const s=PD(e,n);f1.test(r)?e.setProperty(Xu(s),r.replace(f1,""),"important"):e[s]=r}}const m1=["Webkit","Moz","ms"],$_={};function PD(e,n){const r=$_[n];if(r)return r;let s=va(n);if(s!=="filter"&&s in e)return $_[n]=s;s=Ws(s);for(let c=0;c<m1.length;c++){const f=m1[c]+s;if(f in e)return $_[n]=f}return n}const p1="http://www.w3.org/1999/xlink";function g1(e,n,r,s,c,f=UE(n)){s&&n.startsWith("xlink:")?r==null?e.removeAttributeNS(p1,n.slice(6,n.length)):e.setAttributeNS(p1,n,r):r==null||f&&!Ck(r)?e.removeAttribute(n):e.setAttribute(n,f?"":Il(r)?String(r):r)}function v1(e,n,r,s,c){if(n==="innerHTML"||n==="textContent"){r!=null&&(e[n]=n==="innerHTML"?zC(r):r);return}const f=e.tagName;if(n==="value"&&f!=="PROGRESS"&&!f.includes("-")){const a=f==="OPTION"?e.getAttribute("value")||"":e.value,b=r==null?e.type==="checkbox"?"on":"":String(r);(a!==b||!("_value"in e))&&(e.value=b),r==null&&e.removeAttribute(n),e._value=r;return}let d=!1;if(r===""||r==null){const a=typeof e[n];a==="boolean"?r=Ck(r):r==null&&a==="string"?(r="",d=!0):a==="number"&&(r=0,d=!0)}try{e[n]=r}catch{}d&&e.removeAttribute(c||n)}function bd(e,n,r,s){e.addEventListener(n,r,s)}function ID(e,n,r,s){e.removeEventListener(n,r,s)}const _1=Symbol("_vei");function AD(e,n,r,s,c=null){const f=e[_1]||(e[_1]={}),d=f[n];if(s&&d)d.value=s;else{const[a,b]=ED(n);if(s){const k=f[n]=RD(s,c);bd(e,a,k,b)}else d&&(ID(e,a,d,b),f[n]=void 0)}}const y1=/(?:Once|Passive|Capture)$/;function ED(e){let n;if(y1.test(e)){n={};let s;for(;s=e.match(y1);)e=e.slice(0,e.length-s[0].length),n[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xu(e.slice(2)),n]}let j_=0;const MD=Promise.resolve(),DD=()=>j_||(MD.then(()=>j_=0),j_=Date.now());function RD(e,n){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;gs(LD(s,r.value),n,5,[s])};return r.value=e,r.attached=DD(),r}function LD(e,n){if(bn(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(s=>c=>!c._stopped&&s&&s(c))}else return n}const b1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zD=(e,n,r,s,c,f)=>{const d=c==="svg";n==="class"?SD(e,s,d):n==="style"?TD(e,r,s):Ag(n)?Ab(n)||AD(e,n,r,s,f):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):VD(e,n,s,d))?(v1(e,n,s),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&g1(e,n,s,d,f,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!Oi(s))?v1(e,va(n),s,f,n):(n==="true-value"?e._trueValue=s:n==="false-value"&&(e._falseValue=s),g1(e,n,s,d))};function VD(e,n,r,s){if(s)return!!(n==="innerHTML"||n==="textContent"||n in e&&b1(n)&&In(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const c=e.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return b1(n)&&Oi(r)?!1:n in e}const jC=new WeakMap,NC=new WeakMap,pg=Symbol("_moveCb"),x1=Symbol("_enterCb"),BD=e=>(delete e.props.mode,e),OD=BD({name:"TransitionGroup",props:Cr({},BC,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=Og(),s=rC();let c,f;return Ub(()=>{if(!c.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!ND(c[0].el,r.vnode.el,d)){c=[];return}c.forEach(FD),c.forEach($D);const a=c.filter(jD);Sy(),a.forEach(b=>{const k=b.el,S=k.style;Os(k,d),S.transform=S.webkitTransform=S.transitionDuration="";const T=k[pg]=A=>{A&&A.target!==k||(!A||/transform$/.test(A.propertyName))&&(k.removeEventListener("transitionend",T),k[pg]=null,fl(k,d))};k.addEventListener("transitionend",T)}),c=[]}),()=>{const d=mn(e),a=OC(d);let b=d.tag||Ht;if(c=[],f)for(let k=0;k<f.length;k++){const S=f[k];S.el&&S.el instanceof Element&&(c.push(S),Nu(S,$f(S,a,s,r)),jC.set(S,S.el.getBoundingClientRect()))}f=n.default?$b(n.default()):[];for(let k=0;k<f.length;k++){const S=f[k];S.key!=null&&Nu(S,$f(S,a,s,r))}return F(b,null,f)}}}),Kb=OD;function FD(e){const n=e.el;n[pg]&&n[pg](),n[x1]&&n[x1]()}function $D(e){NC.set(e,e.el.getBoundingClientRect())}function jD(e){const n=jC.get(e),r=NC.get(e),s=n.left-r.left,c=n.top-r.top;if(s||c){const f=e.el.style;return f.transform=f.webkitTransform=`translate(${s}px,${c}px)`,f.transitionDuration="0s",e}}function ND(e,n,r){const s=e.cloneNode(),c=e[Rd];c&&c.forEach(a=>{a.split(/\s+/).forEach(b=>b&&s.classList.remove(b))}),r.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const f=n.nodeType===1?n:n.parentNode;f.appendChild(s);const{hasTransform:d}=FC(s);return f.removeChild(s),d}const w1=e=>{const n=e.props["onUpdate:modelValue"]||!1;return bn(n)?r=>Qp(n,r):n};function UD(e){e.target.composing=!0}function S1(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const N_=Symbol("_assign"),GD={created(e,{modifiers:{lazy:n,trim:r,number:s}},c){e[N_]=w1(c);const f=s||c.props&&c.props.type==="number";bd(e,n?"change":"input",d=>{if(d.target.composing)return;let a=e.value;r&&(a=a.trim()),f&&(a=hy(a)),e[N_](a)}),r&&bd(e,"change",()=>{e.value=e.value.trim()}),n||(bd(e,"compositionstart",UD),bd(e,"compositionend",S1),bd(e,"change",S1))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:r,modifiers:{lazy:s,trim:c,number:f}},d){if(e[N_]=w1(d),e.composing)return;const a=(f||e.type==="number")&&!/^0\d/.test(e.value)?hy(e.value):e.value,b=n??"";a!==b&&(document.activeElement===e&&e.type!=="range"&&(s&&n===r||c&&e.value.trim()===b)||(e.value=b))}},qD=["ctrl","shift","alt","meta"],HD={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>qD.some(r=>e[`${r}Key`]&&!n.includes(r))},wl=(e,n)=>{const r=e._withMods||(e._withMods={}),s=n.join(".");return r[s]||(r[s]=(c,...f)=>{for(let d=0;d<n.length;d++){const a=HD[n[d]];if(a&&a(c,n))return}return e(c,...f)})},WD=Cr({patchProp:zD},yD);let k1;function UC(){return k1||(k1=qM(WD))}const GC=(...e)=>{UC().render(...e)},ZD=(...e)=>{const n=UC().createApp(...e),{mount:r}=n;return n.mount=s=>{const c=YD(s);if(!c)return;const f=n._component;!In(f)&&!f.render&&!f.template&&(f.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const d=r(c,!1,KD(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),d},n};function KD(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function YD(e){return Oi(e)?document.querySelector(e):e}function ra(e,n){let r;function s(){r=Md(),r.run(()=>n.length?n(()=>{r==null||r.stop(),s()}):n())}Ot(e,c=>{c&&!r?s():c||(r==null||r.stop(),r=void 0)},{immediate:!0}),fr(()=>{r==null||r.stop()})}const Xn=typeof window<"u",Yb=Xn&&"IntersectionObserver"in window,XD=Xn&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),C1=Xn&&"EyeDropper"in window,JD=Xn&&"matchMedia"in window&&typeof window.matchMedia=="function";function T1(e,n,r){QD(e,n),n.set(e,r)}function QD(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function P1(e,n,r){return e.set(qC(e,n),r),r}function mo(e,n){return e.get(qC(e,n))}function qC(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function HC(e,n,r){const s=n.length-1;if(s<0)return e===void 0?r:e;for(let c=0;c<s;c++){if(e==null)return r;e=e[n[c]]}return e==null||e[n[s]]===void 0?r:e[n[s]]}function zr(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date&&e.getTime()!==n.getTime()||e!==Object(e)||n!==Object(n))return!1;const r=Object.keys(e);return r.length!==Object.keys(n).length?!1:r.every(s=>zr(e[s],n[s]))}function Uu(e,n,r){return e==null||!n||typeof n!="string"?r:e[n]!==void 0?e[n]:(n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),HC(e,n.split("."),r))}function Wi(e,n,r){if(n===!0)return e===void 0?r:e;if(n==null||typeof n=="boolean")return r;if(e!==Object(e)){if(typeof n!="function")return r;const c=n(e,r);return typeof c>"u"?r:c}if(typeof n=="string")return Uu(e,n,r);if(Array.isArray(n))return HC(e,n,r);if(typeof n!="function")return r;const s=n(e,r);return typeof s>"u"?r:s}function Oa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(r,s)=>n+s)}function qt(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const r=Number(e);return isNaN(r)?String(e):isFinite(r)?`${r}${n}`:void 0}function Gf(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function I1(e){let n;return e!==null&&typeof e=="object"&&((n=Object.getPrototypeOf(e))===Object.prototype||n===null)}function Xb(e){if(e&&"$el"in e){const n=e.$el;return(n==null?void 0:n.nodeType)===Node.TEXT_NODE?n.nextElementSibling:n}return e}const ky=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),Cy=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function WC(e){return Object.keys(e)}function zu(e,n){return n.every(r=>e.hasOwnProperty(r))}function Io(e,n){const r={};for(const s of n)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}function Ty(e,n,r){const s=Object.create(null),c=Object.create(null);for(const f in e)n.some(d=>d instanceof RegExp?d.test(f):d===f)?s[f]=e[f]:c[f]=e[f];return[s,c]}function di(e,n){const r={...e};return n.forEach(s=>delete r[s]),r}const ZC=/^on[^a-z]/,Jb=e=>ZC.test(e),eR=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],tR=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function nR(e){return e.isComposing&&tR.includes(e.key)}function Al(e){const[n,r]=Ty(e,[ZC]),s=di(n,eR),[c,f]=Ty(r,["class","style","id",/^data-/]);return Object.assign(c,n),Object.assign(f,s),[c,f]}function Di(e){return e==null?[]:Array.isArray(e)?e:[e]}function KC(e,n){let r=0;const s=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];clearTimeout(r),r=setTimeout(()=>e(...f),kr(n))};return s.clear=()=>{clearTimeout(r)},s.immediate=e,s}function ci(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(n,Math.min(r,e))}function A1(e){const n=e.toString().trim();return n.includes(".")?n.length-n.indexOf(".")-1:0}function E1(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+r.repeat(Math.max(0,n-e.length))}function M1(e,n){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,n-e.length))+e}function iR(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=[];let s=0;for(;s<e.length;)r.push(e.substr(s,n)),s+=n;return r}function D1(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<n)return`${e} B`;const r=n===1024?["Ki","Mi","Gi"]:["k","M","G"];let s=-1;for(;Math.abs(e)>=n&&s<r.length-1;)e/=n,++s;return`${e.toFixed(1)} ${r[s]}B`}function na(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s={};for(const c in e)s[c]=e[c];for(const c in n){const f=e[c],d=n[c];if(I1(f)&&I1(d)){s[c]=na(f,d,r);continue}if(r&&Array.isArray(f)&&Array.isArray(d)){s[c]=r(f,d);continue}s[c]=d}return s}function YC(e){return e.map(n=>n.type===Ht?YC(n.children):n).flat()}function Fu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Fu.cache.has(e))return Fu.cache.get(e);const n=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Fu.cache.set(e,n),n}Fu.cache=new Map;function Sd(e,n){if(!n||typeof n!="object")return[];if(Array.isArray(n))return n.map(r=>Sd(e,r)).flat(1);if(n.suspense)return Sd(e,n.ssContent);if(Array.isArray(n.children))return n.children.map(r=>Sd(e,r)).flat(1);if(n.component){if(Object.getOwnPropertySymbols(n.component.provides).includes(e))return[n.component];if(n.component.subTree)return Sd(e,n.component.subTree).flat(1)}return[]}var sd=new WeakMap,Pu=new WeakMap;class XC{constructor(n){T1(this,sd,[]),T1(this,Pu,0),this.size=n}get isFull(){return mo(sd,this).length===this.size}push(n){mo(sd,this)[mo(Pu,this)]=n,P1(Pu,this,(mo(Pu,this)+1)%this.size)}values(){return mo(sd,this).slice(mo(Pu,this)).concat(mo(sd,this).slice(0,mo(Pu,this)))}clear(){mo(sd,this).length=0,P1(Pu,this,0)}}function rR(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function Qb(e){const n=Sr({});Li(()=>{const s=e();for(const c in s)n[c]=s[c]},{flush:"sync"});const r={};for(const s in n)r[s]=Me(()=>n[s]);return r}function gg(e,n){return e.includes(n)}function JC(e){return e[2].toLowerCase()+e.slice(3)}const Vr=()=>[Function,Array];function R1(e,n){return n="on"+Ws(n),!!(e[n]||e[`${n}Once`]||e[`${n}Capture`]||e[`${n}OnceCapture`]||e[`${n}CaptureOnce`])}function $g(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(Array.isArray(e))for(const c of e)c(...r);else typeof e=="function"&&e(...r)}function qf(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(s=>`${s}${n?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(r)]}function QC(e,n,r){let s,c=e.indexOf(document.activeElement);const f=n==="next"?1:-1;do c+=f,s=e[c];while((!s||s.offsetParent==null||!((r==null?void 0:r(s))??!0))&&c<e.length&&c>=0);return s}function $u(e,n){var s,c,f,d;const r=qf(e);if(n==null)(e===document.activeElement||!e.contains(document.activeElement))&&((s=r[0])==null||s.focus());else if(n==="first")(c=r[0])==null||c.focus();else if(n==="last")(f=r.at(-1))==null||f.focus();else if(typeof n=="number")(d=r[n])==null||d.focus();else{const a=QC(r,n);a?a.focus():$u(e,n==="next"?"first":"last")}}function Np(e){return e==null||typeof e=="string"&&e.trim()===""}function eT(){}function Ld(e,n){if(!(Xn&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${n})`)))return null;try{return!!e&&e.matches(n)}catch{return null}}function jg(e){return e.some(n=>Nf(n)?n.type===ta?!1:n.type!==Ht||jg(n.children):!0)?e:null}function U_(e,n,r){return(e==null?void 0:e(n))??(r==null?void 0:r(n))}function aR(e,n){if(!Xn||e===0)return n(),()=>{};const r=window.setTimeout(n,e);return()=>window.clearTimeout(r)}function sR(e,n){const r=e.clientX,s=e.clientY,c=n.getBoundingClientRect(),f=c.left,d=c.top,a=c.right,b=c.bottom;return r>=f&&r<=a&&s>=d&&s<=b}function vg(){const e=Rt(),n=r=>{e.value=r};return Object.defineProperty(n,"value",{enumerable:!0,get:()=>e.value,set:r=>e.value=r}),Object.defineProperty(n,"el",{enumerable:!0,get:()=>Xb(e.value)}),n}function zd(e){const n=e.key.length===1,r=!e.ctrlKey&&!e.metaKey&&!e.altKey;return n&&r}function Py(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function Iy(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function oR(e,n,r){const s=new RegExp(`[\\d\\-${Iy(r)}]`),c=e.split("").filter(d=>s.test(d)).filter((d,a,b)=>a===0&&/[-]/.test(d)||d===r&&a===b.indexOf(d)||/\d/.test(d)).join("");if(n===0)return c.split(r)[0];const f=new RegExp(`${Iy(r)}\\d`);if(n!==null&&f.test(c)){const d=c.split(r);return[d[0],d[1].substring(0,n)].join(r)}return c}function lR(e){const n={};for(const r in e)n[va(r)]=e[r];return n}function uR(e){const n=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(r=>{let[s,c]=r;return n.includes(s)?!!c:c!==void 0}))}const tT=["top","bottom"],cR=["start","end","left","right"];function Ay(e,n){let[r,s]=e.split(" ");return s||(s=gg(tT,r)?"start":gg(cR,r)?"top":"center"),{side:Ey(r,n),align:Ey(s,n)}}function Ey(e,n){return e==="start"?n?"right":"left":e==="end"?n?"left":"right":e}function G_(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function q_(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function L1(e){return{side:e.align,align:e.side}}function z1(e){return gg(tT,e.side)?"y":"x"}class Ns{constructor(n){let{x:r,y:s,width:c,height:f}=n;this.x=r,this.y=s,this.width=c,this.height=f}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function V1(e,n){return{x:{before:Math.max(0,n.left-e.left),after:Math.max(0,e.right-n.right)},y:{before:Math.max(0,n.top-e.top),after:Math.max(0,e.bottom-n.bottom)}}}function nT(e){return Array.isArray(e)?new Ns({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function dR(e){if(e===document.documentElement)return visualViewport?new Ns({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Ns({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const n=e.getBoundingClientRect();return new Ns({x:n.x,y:n.y,width:e.clientWidth,height:e.clientHeight})}}function e0(e){const n=e.getBoundingClientRect(),r=getComputedStyle(e),s=r.transform;if(s){let c,f,d,a,b;if(s.startsWith("matrix3d("))c=s.slice(9,-1).split(/, /),f=Number(c[0]),d=Number(c[5]),a=Number(c[12]),b=Number(c[13]);else if(s.startsWith("matrix("))c=s.slice(7,-1).split(/, /),f=Number(c[0]),d=Number(c[3]),a=Number(c[4]),b=Number(c[5]);else return new Ns(n);const k=r.transformOrigin,S=n.x-a-(1-f)*parseFloat(k),T=n.y-b-(1-d)*parseFloat(k.slice(k.indexOf(" ")+1)),A=f?n.width/f:e.offsetWidth+1,P=d?n.height/d:e.offsetHeight+1;return new Ns({x:S,y:T,width:A,height:P})}else return new Ns(n)}function Vu(e,n,r){if(typeof e.animate>"u")return{finished:Promise.resolve()};let s;try{s=e.animate(n,r)}catch{return{finished:Promise.resolve()}}return typeof s.finished>"u"&&(s.finished=new Promise(c=>{s.onfinish=()=>{c(s)}})),s}const ig=new WeakMap;function hR(e,n){Object.keys(n).forEach(r=>{if(Jb(r)){const s=JC(r),c=ig.get(e);if(n[r]==null)c==null||c.forEach(f=>{const[d,a]=f;d===s&&(e.removeEventListener(s,a),c.delete(f))});else if(!c||![...c].some(f=>f[0]===s&&f[1]===n[r])){e.addEventListener(s,n[r]);const f=c||new Set;f.add([s,n[r]]),ig.has(e)||ig.set(e,f)}}else n[r]==null?e.removeAttribute(r):e.setAttribute(r,n[r])})}function fR(e,n){Object.keys(n).forEach(r=>{if(Jb(r)){const s=JC(r),c=ig.get(e);c==null||c.forEach(f=>{const[d,a]=f;d===s&&(e.removeEventListener(s,a),c.delete(f))})}else e.removeAttribute(r)})}const od=2.4,B1=.2126729,O1=.7151522,F1=.072175,mR=.55,pR=.58,gR=.57,vR=.62,Up=.03,$1=1.45,_R=5e-4,yR=1.25,bR=1.25,j1=.078,N1=12.82051282051282,Gp=.06,U1=.001;function G1(e,n){const r=(e.r/255)**od,s=(e.g/255)**od,c=(e.b/255)**od,f=(n.r/255)**od,d=(n.g/255)**od,a=(n.b/255)**od;let b=r*B1+s*O1+c*F1,k=f*B1+d*O1+a*F1;if(b<=Up&&(b+=(Up-b)**$1),k<=Up&&(k+=(Up-k)**$1),Math.abs(k-b)<_R)return 0;let S;if(k>b){const T=(k**mR-b**pR)*yR;S=T<U1?0:T<j1?T-T*N1*Gp:T-Gp}else{const T=(k**vR-b**gR)*bR;S=T>-U1?0:T>-j1?T-T*N1*Gp:T+Gp}return S*100}function iT(e,n){n=Array.isArray(n)?n.slice(0,-1).map(r=>`'${r}'`).join(", ")+` or '${n.at(-1)}'`:`'${n}'`}const _g=.20689655172413793,xR=e=>e>_g**3?Math.cbrt(e):e/(3*_g**2)+4/29,wR=e=>e>_g?e**3:3*_g**2*(e-4/29);function rT(e){const n=xR,r=n(e[1]);return[116*r-16,500*(n(e[0]/.95047)-r),200*(r-n(e[2]/1.08883))]}function aT(e){const n=wR,r=(e[0]+16)/116;return[n(r+e[1]/500)*.95047,n(r),n(r-e[2]/200)*1.08883]}const SR=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],kR=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,CR=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],TR=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function sT(e){const n=Array(3),r=kR,s=SR;for(let c=0;c<3;++c)n[c]=Math.round(ci(r(s[c][0]*e[0]+s[c][1]*e[1]+s[c][2]*e[2]))*255);return{r:n[0],g:n[1],b:n[2]}}function t0(e){let{r:n,g:r,b:s}=e;const c=[0,0,0],f=TR,d=CR;n=f(n/255),r=f(r/255),s=f(s/255);for(let a=0;a<3;++a)c[a]=d[a][0]*n+d[a][1]*r+d[a][2]*s;return c}function My(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function PR(e){return My(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const q1=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,IR={rgb:(e,n,r,s)=>({r:e,g:n,b:r,a:s}),rgba:(e,n,r,s)=>({r:e,g:n,b:r,a:s}),hsl:(e,n,r,s)=>H1({h:e,s:n,l:r,a:s}),hsla:(e,n,r,s)=>H1({h:e,s:n,l:r,a:s}),hsv:(e,n,r,s)=>Gs({h:e,s:n,v:r,a:s}),hsva:(e,n,r,s)=>Gs({h:e,s:n,v:r,a:s})};function Fa(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&q1.test(e)){const{groups:n}=e.match(q1),{fn:r,values:s}=n,c=s.split(/,\s*|\s*\/\s*|\s+/).map((f,d)=>f.endsWith("%")||d>0&&d<3&&["hsl","hsla","hsv","hsva"].includes(r)?parseFloat(f)/100:parseFloat(f));return IR[r](...c)}else if(typeof e=="string"){let n=e.startsWith("#")?e.slice(1):e;return[3,4].includes(n.length)?n=n.split("").map(r=>r+r).join(""):[6,8].includes(n.length),cT(n)}else if(typeof e=="object"){if(zu(e,["r","g","b"]))return e;if(zu(e,["h","s","l"]))return Gs(n0(e));if(zu(e,["h","s","v"]))return Gs(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Gs(e){const{h:n,s:r,v:s,a:c}=e,f=a=>{const b=(a+n/60)%6;return s-s*r*Math.max(Math.min(b,4-b,1),0)},d=[f(5),f(3),f(1)].map(a=>Math.round(a*255));return{r:d[0],g:d[1],b:d[2],a:c}}function H1(e){return Gs(n0(e))}function hm(e){if(!e)return{h:0,s:1,v:1,a:1};const n=e.r/255,r=e.g/255,s=e.b/255,c=Math.max(n,r,s),f=Math.min(n,r,s);let d=0;c!==f&&(c===n?d=60*(0+(r-s)/(c-f)):c===r?d=60*(2+(s-n)/(c-f)):c===s&&(d=60*(4+(n-r)/(c-f)))),d<0&&(d=d+360);const a=c===0?0:(c-f)/c,b=[d,a,c];return{h:b[0],s:b[1],v:b[2],a:e.a}}function Dy(e){const{h:n,s:r,v:s,a:c}=e,f=s-s*r/2,d=f===1||f===0?0:(s-f)/Math.min(f,1-f);return{h:n,s:d,l:f,a:c}}function n0(e){const{h:n,s:r,l:s,a:c}=e,f=s+r*Math.min(s,1-s),d=f===0?0:2-2*s/f;return{h:n,s:d,v:f,a:c}}function oT(e){let{r:n,g:r,b:s,a:c}=e;return c===void 0?`rgb(${n}, ${r}, ${s})`:`rgba(${n}, ${r}, ${s}, ${c})`}function lT(e){return oT(Gs(e))}function qp(e){const n=Math.round(e).toString(16);return("00".substr(0,2-n.length)+n).toUpperCase()}function uT(e){let{r:n,g:r,b:s,a:c}=e;return`#${[qp(n),qp(r),qp(s),c!==void 0?qp(Math.round(c*255)):""].join("")}`}function cT(e){e=ER(e);let[n,r,s,c]=iR(e,2).map(f=>parseInt(f,16));return c=c===void 0?c:c/255,{r:n,g:r,b:s,a:c}}function AR(e){const n=cT(e);return hm(n)}function dT(e){return uT(Gs(e))}function ER(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(n=>n+n).join("")),e.length!==6&&(e=E1(E1(e,6),8,"F")),e}function MR(e,n){const r=rT(t0(e));return r[0]=r[0]+n*10,sT(aT(r))}function DR(e,n){const r=rT(t0(e));return r[0]=r[0]-n*10,sT(aT(r))}function Ry(e){const n=Fa(e);return t0(n)[1]}function RR(e,n){const r=Ry(e),s=Ry(n),c=Math.max(r,s),f=Math.min(r,s);return(c+.05)/(f+.05)}function hT(e){const n=Math.abs(G1(Fa(0),Fa(e)));return Math.abs(G1(Fa(16777215),Fa(e)))>Math.min(n,50)?"#fff":"#000"}function Ge(e,n){return r=>Object.keys(e).reduce((s,c)=>{const d=typeof e[c]=="object"&&e[c]!=null&&!Array.isArray(e[c])?e[c]:{type:e[c]};return r&&c in r?s[c]={...d,default:r[c]}:s[c]=d,n&&!s[c].source&&(s[c].source=n),s},{})}const Kt=Ge({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function ji(e,n){const r=Og();if(!r)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return r}function Zs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const n=ji(e).type;return Fu((n==null?void 0:n.aliasName)||(n==null?void 0:n.name))}function LR(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ji("injectSelf");const{provides:r}=n;if(r&&e in r)return r[e]}const Vd=Symbol.for("vuetify:defaults");function zR(e){return Xe(e)}function i0(){const e=xn(Vd);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function zi(e,n){const r=i0(),s=Xe(e),c=te(()=>{if(kr(n==null?void 0:n.disabled))return r.value;const d=kr(n==null?void 0:n.scoped),a=kr(n==null?void 0:n.reset),b=kr(n==null?void 0:n.root);if(s.value==null&&!(d||a||b))return r.value;let k=na(s.value,{prev:r.value});if(d)return k;if(a||b){const S=Number(a||1/0);for(let T=0;T<=S&&!(!k||!("prev"in k));T++)k=k.prev;return k&&typeof b=="string"&&b in k&&(k=na(na(k,{prev:k}),k[b])),k}return k.prev?na(k.prev,k):k});return ri(Vd,c),c}function VR(e,n){return e.props&&(typeof e.props[n]<"u"||typeof e.props[Fu(n)]<"u")}function BR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i0();const s=ji("useDefaults");if(n=n??s.type.name??s.type.__name,!n)throw new Error("[Vuetify] Could not determine component name");const c=te(()=>{var b;return(b=r.value)==null?void 0:b[e._as??n]}),f=new Proxy(e,{get(b,k){var P,R,B,L;const S=Reflect.get(b,k);if(k==="class"||k==="style")return[(P=c.value)==null?void 0:P[k],S].filter($=>$!=null);if(VR(s.vnode,k))return S;const T=(R=c.value)==null?void 0:R[k];if(T!==void 0)return T;const A=(L=(B=r.value)==null?void 0:B.global)==null?void 0:L[k];return A!==void 0?A:S}}),d=Rt();Li(()=>{if(c.value){const b=Object.entries(c.value).filter(k=>{let[S]=k;return S.startsWith(S[0].toUpperCase())});d.value=b.length?Object.fromEntries(b):void 0}else d.value=void 0});function a(){const b=LR(Vd,s);ri(Vd,te(()=>d.value?na((b==null?void 0:b.value)??{},d.value):b==null?void 0:b.value))}return{props:f,provideSubDefaults:a}}function ja(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=Ge(e.props??{},e.name)();const n=Object.keys(e.props).filter(r=>r!=="class"&&r!=="style");e.filterProps=function(s){return Io(s,n)},e.props._as=String,e.setup=function(s,c){const f=i0();if(!f.value)return e._setup(s,c);const{props:d,provideSubDefaults:a}=BR(s,s._as??e.name,f),b=e._setup(d,c);return a(),b}}return e}function ft(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n=>(e?ja:jb)(n)}function OR(e,n){return n.props=e,n}function Ao(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",r=arguments.length>2?arguments[2]:void 0;return ft()({name:r??Ws(va(e.replace(/__/g,"-"))),props:{tag:{type:String,default:n},...Kt()},setup(s,c){let{slots:f}=c;return()=>{var d;return bs(s.tag,{class:[e,s.class],style:s.style},(d=f.default)==null?void 0:d.call(f))}}})}function fT(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const n=e.getRootNode();return n!==document&&n.getRootNode({composed:!0})!==document?null:n}const Hf="cubic-bezier(0.4, 0, 0.2, 1)",FR="cubic-bezier(0.0, 0, 0.2, 1)",$R="cubic-bezier(0.4, 0, 1, 1)";function W1(e,n,r){return Object.keys(e).filter(s=>Jb(s)&&s.endsWith(n)).reduce((s,c)=>(s[c.slice(0,-n.length)]=f=>e[c](f,r(f)),s),{})}function r0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(n?jR(e):a0(e))return e;e=e.parentElement}return document.scrollingElement}function yg(e,n){const r=[];if(n&&e&&!n.contains(e))return r;for(;e&&(a0(e)&&r.push(e),e!==n);)e=e.parentElement;return r}function a0(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return n.overflowY==="scroll"||n.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function jR(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return["scroll","auto"].includes(n.overflowY)}function NR(e){let{depth:n,isLast:r,isLastGroup:s,leafLinks:c,separateRoots:f,parentIndentLines:d,variant:a}=e;if(!d||!n)return{leaf:void 0,node:void 0,children:d};if(a==="simple")return{leaf:[...d,"line"],node:[...d,"line"],children:[...d,"line"]};const b=r&&(!s||f||n>1);return{leaf:[...d,b?"last-leaf":"leaf",...c?["leaf-link"]:[]],node:[...d,b?"last-leaf":"leaf"],children:[...d,b?"none":"line"]}}function UR(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function bt(e){const n=ji("useRender");n.render=e}function nn(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T=>T,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:T=>T;const f=ji("useProxiedModel"),d=Xe(e[n]!==void 0?e[n]:r),a=Fu(n),k=te(a!==n?()=>{var T,A,P,R;return e[n],!!(((T=f.vnode.props)!=null&&T.hasOwnProperty(n)||(A=f.vnode.props)!=null&&A.hasOwnProperty(a))&&((P=f.vnode.props)!=null&&P.hasOwnProperty(`onUpdate:${n}`)||(R=f.vnode.props)!=null&&R.hasOwnProperty(`onUpdate:${a}`)))}:()=>{var T,A;return e[n],!!((T=f.vnode.props)!=null&&T.hasOwnProperty(n)&&((A=f.vnode.props)!=null&&A.hasOwnProperty(`onUpdate:${n}`)))});ra(()=>!k.value,()=>{Ot(()=>e[n],T=>{d.value=T})});const S=te({get(){const T=e[n];return s(k.value?T:d.value)},set(T){const A=c(T),P=mn(k.value?e[n]:d.value);P===A||s(P)===T||(d.value=A,f==null||f.emit(`update:${n}`,A))}});return Object.defineProperty(S,"externalValue",{get:()=>k.value?e[n]:d.value}),S}const GR={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"}},Z1="$vuetify.",K1=(e,n)=>e.replace(/\{(\d+)\}/g,(r,s)=>String(n[Number(s)])),mT=(e,n,r)=>function(s){for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];if(!s.startsWith(Z1))return K1(s,f);const a=s.replace(Z1,""),b=e.value&&r.value[e.value],k=n.value&&r.value[n.value];let S=Uu(b,a,null);return S||(`${s}${e.value}`,S=Uu(k,a,null)),S||(S=s),typeof S!="string"&&(S=s),K1(S,f)};function s0(e,n){return(r,s)=>new Intl.NumberFormat([e.value,n.value],s).format(r)}function pT(e,n){return s0(e,n)(.1).includes(",")?",":"."}function H_(e,n,r){const s=nn(e,n,e[n]??r.value);return s.value=e[n]??r.value,Ot(r,c=>{e[n]==null&&(s.value=r.value)}),s}function gT(e){return n=>{const r=H_(n,"locale",e.current),s=H_(n,"fallback",e.fallback),c=H_(n,"messages",e.messages);return{name:"vuetify",current:r,fallback:s,messages:c,decimalSeparator:Me(()=>pT(r,s)),t:mT(r,s,c),n:s0(r,s),provide:gT({current:r,fallback:s,messages:c})}}}function qR(e){const n=Rt((e==null?void 0:e.locale)??"en"),r=Rt((e==null?void 0:e.fallback)??"en"),s=Xe({en:GR,...e==null?void 0:e.messages});return{name:"vuetify",current:n,fallback:r,messages:s,decimalSeparator:Me(()=>(e==null?void 0:e.decimalSeparator)??pT(n,r)),t:mT(n,r,s),n:s0(n,r),provide:gT({current:n,fallback:r,messages:s})}}const Bd=Symbol.for("vuetify:locale");function HR(e){return e.name!=null}function WR(e){const n=e!=null&&e.adapter&&HR(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:qR(e),r=YR(n,e);return{...n,...r}}function vi(){const e=xn(Bd);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function ZR(e){const n=xn(Bd);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");const r=n.provide(e),s=XR(r,n.rtl,e),c={...r,...s};return ri(Bd,c),c}function KR(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function YR(e,n){const r=Xe((n==null?void 0:n.rtl)??KR()),s=te(()=>r.value[e.current.value]??!1);return{isRtl:s,rtl:r,rtlClasses:Me(()=>`v-locale--is-${s.value?"rtl":"ltr"}`)}}function XR(e,n,r){const s=te(()=>r.rtl??n.value[e.current.value]??!1);return{isRtl:s,rtl:n,rtlClasses:Me(()=>`v-locale--is-${s.value?"rtl":"ltr"}`)}}function tr(){const e=xn(Bd);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function fm(e){const n=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(n):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(n):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(n):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(n):return{firstDay:6,firstWeekSize:1};case n==="MV":return{firstDay:5,firstWeekSize:1};case n==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function JR(e,n,r){var S;const s=[];let c=[];const f=vT(e),d=_T(e),a=r??((S=fm(n))==null?void 0:S.firstDay)??0,b=(f.getDay()-a+7)%7,k=(d.getDay()-a+7)%7;for(let T=0;T<b;T++){const A=new Date(f);A.setDate(A.getDate()-(b-T)),c.push(A)}for(let T=1;T<=d.getDate();T++){const A=new Date(e.getFullYear(),e.getMonth(),T);c.push(A),c.length===7&&(s.push(c),c=[])}for(let T=1;T<7-k;T++){const A=new Date(d);A.setDate(A.getDate()+T),c.push(A)}return c.length>0&&s.push(c),s}function Ly(e,n,r){var f;const s=r??((f=fm(n))==null?void 0:f.firstDay)??0,c=new Date(e);for(;c.getDay()!==s;)c.setDate(c.getDate()-1);return c}function QR(e,n){var c;const r=new Date(e),s=((((c=fm(n))==null?void 0:c.firstDay)??0)+6)%7;for(;r.getDay()!==s;)r.setDate(r.getDate()+1);return r}function vT(e){return new Date(e.getFullYear(),e.getMonth(),1)}function _T(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function eL(e){const n=e.split("-").map(Number);return new Date(n[0],n[1]-1,n[2])}const tL=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function yT(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let n;if(tL.test(e))return eL(e);if(n=Date.parse(e),!isNaN(n))return new Date(n)}return null}const Y1=new Date(2e3,0,2);function nL(e,n,r){var c;const s=n??((c=fm(e))==null?void 0:c.firstDay)??0;return Oa(7).map(f=>{const d=new Date(Y1);return d.setDate(Y1.getDate()+s+f),new Intl.DateTimeFormat(e,{weekday:r??"narrow"}).format(d)})}function iL(e,n,r,s){const c=yT(e)??new Date,f=s==null?void 0:s[n];if(typeof f=="function")return f(c,n,r);let d={};switch(n){case"fullDate":d={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":d={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const a=c.getDate(),b=new Intl.DateTimeFormat(r,{month:"long"}).format(c);return`${a} ${b}`;case"normalDateWithWeekday":d={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":d={month:"short",day:"numeric"};break;case"year":d={year:"numeric"};break;case"month":d={month:"long"};break;case"monthShort":d={month:"short"};break;case"monthAndYear":d={month:"long",year:"numeric"};break;case"monthAndDate":d={month:"long",day:"numeric"};break;case"weekday":d={weekday:"long"};break;case"weekdayShort":d={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(r).format(c.getDate());case"hours12h":d={hour:"numeric",hour12:!0};break;case"hours24h":d={hour:"numeric",hour12:!1};break;case"minutes":d={minute:"numeric"};break;case"seconds":d={second:"numeric"};break;case"fullTime":d={hour:"numeric",minute:"numeric"};break;case"fullTime12h":d={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":d={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":d={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":d={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");case"keyboardDateTime12h":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");case"keyboardDateTime24h":return d={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(r,d).format(c).replace(/, /g," ");default:d=f??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(r,d).format(c)}function rL(e,n){const r=e.toJsDate(n),s=r.getFullYear(),c=M1(String(r.getMonth()+1),2,"0"),f=M1(String(r.getDate()),2,"0");return`${s}-${c}-${f}`}function aL(e){const[n,r,s]=e.split("-").map(Number);return new Date(n,r-1,s)}function sL(e,n){const r=new Date(e);return r.setMinutes(r.getMinutes()+n),r}function oL(e,n){const r=new Date(e);return r.setHours(r.getHours()+n),r}function rg(e,n){const r=new Date(e);return r.setDate(r.getDate()+n),r}function lL(e,n){const r=new Date(e);return r.setDate(r.getDate()+n*7),r}function uL(e,n){const r=new Date(e);return r.setDate(1),r.setMonth(r.getMonth()+n),r}function zy(e){return e.getFullYear()}function cL(e){return e.getMonth()}function dL(e,n,r,s){const c=fm(n),f=r??(c==null?void 0:c.firstDay)??0,d=s??(c==null?void 0:c.firstWeekSize)??1;function a(P){const R=new Date(P,0,1);return 7-Vy(R,Ly(R,n,f),"days")}let b=zy(e);const k=rg(Ly(e,n,f),6);b<zy(k)&&a(b+1)>=d&&b++;const S=new Date(b,0,1),T=a(b),A=T>=d?rg(S,T-7):rg(S,T);return 1+Vy(bT(e),xg(A),"weeks")}function hL(e){return e.getDate()}function fL(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function mL(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function pL(e){return e.getHours()}function gL(e){return e.getMinutes()}function vL(e){return new Date(e.getFullYear(),0,1)}function _L(e){return new Date(e.getFullYear(),11,31)}function yL(e,n){return bg(e,n[0])&&wL(e,n[1])}function bL(e){const n=new Date(e);return n instanceof Date&&!isNaN(n.getTime())}function bg(e,n){return e.getTime()>n.getTime()}function xL(e,n){return bg(xg(e),xg(n))}function wL(e,n){return e.getTime()<n.getTime()}function X1(e,n){return e.getTime()===n.getTime()}function SL(e,n){return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function kL(e,n){return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function CL(e,n){return e.getFullYear()===n.getFullYear()}function Vy(e,n,r){const s=new Date(e),c=new Date(n);switch(r){case"years":return s.getFullYear()-c.getFullYear();case"quarters":return Math.floor((s.getMonth()-c.getMonth()+(s.getFullYear()-c.getFullYear())*12)/4);case"months":return s.getMonth()-c.getMonth()+(s.getFullYear()-c.getFullYear())*12;case"weeks":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60*24));case"hours":return Math.floor((s.getTime()-c.getTime())/(1e3*60*60));case"minutes":return Math.floor((s.getTime()-c.getTime())/(1e3*60));case"seconds":return Math.floor((s.getTime()-c.getTime())/1e3);default:return s.getTime()-c.getTime()}}function TL(e,n){const r=new Date(e);return r.setHours(n),r}function PL(e,n){const r=new Date(e);return r.setMinutes(n),r}function IL(e,n){const r=new Date(e);return r.setMonth(n),r}function AL(e,n){const r=new Date(e);return r.setDate(n),r}function EL(e,n){const r=new Date(e);return r.setFullYear(n),r}function xg(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function bT(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class ML{constructor(n){this.locale=n.locale,this.formats=n.formats}date(n){return yT(n)}toJsDate(n){return n}toISO(n){return rL(this,n)}parseISO(n){return aL(n)}addMinutes(n,r){return sL(n,r)}addHours(n,r){return oL(n,r)}addDays(n,r){return rg(n,r)}addWeeks(n,r){return lL(n,r)}addMonths(n,r){return uL(n,r)}getWeekArray(n,r){const s=r!==void 0?Number(r):void 0;return JR(n,this.locale,s)}startOfWeek(n,r){const s=r!==void 0?Number(r):void 0;return Ly(n,this.locale,s)}endOfWeek(n){return QR(n,this.locale)}startOfMonth(n){return vT(n)}endOfMonth(n){return _T(n)}format(n,r){return iL(n,r,this.locale,this.formats)}isEqual(n,r){return X1(n,r)}isValid(n){return bL(n)}isWithinRange(n,r){return yL(n,r)}isAfter(n,r){return bg(n,r)}isAfterDay(n,r){return xL(n,r)}isBefore(n,r){return!bg(n,r)&&!X1(n,r)}isSameDay(n,r){return SL(n,r)}isSameMonth(n,r){return kL(n,r)}isSameYear(n,r){return CL(n,r)}setMinutes(n,r){return PL(n,r)}setHours(n,r){return TL(n,r)}setMonth(n,r){return IL(n,r)}setDate(n,r){return AL(n,r)}setYear(n,r){return EL(n,r)}getDiff(n,r,s){return Vy(n,r,s)}getWeekdays(n,r){const s=n!==void 0?Number(n):void 0;return nL(this.locale,s,r)}getYear(n){return zy(n)}getMonth(n){return cL(n)}getWeek(n,r,s){const c=r!==void 0?Number(r):void 0;return dL(n,this.locale,c,s)}getDate(n){return hL(n)}getNextMonth(n){return fL(n)}getPreviousMonth(n){return mL(n)}getHours(n){return pL(n)}getMinutes(n){return gL(n)}startOfDay(n){return xg(n)}endOfDay(n){return bT(n)}startOfYear(n){return vL(n)}endOfYear(n){return _L(n)}}const xT=Symbol.for("vuetify:date-options"),J1=Symbol.for("vuetify:date-adapter");function DL(e,n){const r=na({adapter:ML,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:r,instance:wT(r,n)}}function RL(e,n,r){const s=e.getDiff(e.endOfDay(r??n),e.startOfDay(n),"days"),c=[n];for(let f=1;f<s;f++){const d=e.addDays(n,f);c.push(d)}return r&&c.push(e.endOfDay(r)),c}function wT(e,n){const r=Sr(typeof e.adapter=="function"?new e.adapter({locale:e.locale[n.current.value]??n.current.value,formats:e.formats}):e.adapter);return Ot(n.current,s=>{r.locale=e.locale[s]??s??r.locale}),r}function mm(){const e=xn(xT);if(!e)throw new Error("[Vuetify] Could not find injected date options");const n=vi();return wT(e,n)}const Ng=["sm","md","lg","xl","xxl"],By=Symbol.for("vuetify:display"),Q1={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},LL=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q1;return na(Q1,e)};function eS(e){return Xn&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function tS(e){return Xn&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function nS(e){const n=Xn&&!e?window.navigator.userAgent:"ssr";function r(R){return!!n.match(R)}const s=r(/android/i),c=r(/iphone|ipad|ipod/i),f=r(/cordova/i),d=r(/electron/i),a=r(/chrome/i),b=r(/edge/i),k=r(/firefox/i),S=r(/opera/i),T=r(/win/i),A=r(/mac/i),P=r(/linux/i);return{android:s,ios:c,cordova:f,electron:d,chrome:a,edge:b,firefox:k,opera:S,win:T,mac:A,linux:P,touch:XD,ssr:n==="ssr"}}function zL(e,n){const{thresholds:r,mobileBreakpoint:s}=LL(e),c=Rt(tS(n)),f=Rt(nS(n)),d=Sr({}),a=Rt(eS(n));function b(){c.value=tS(),a.value=eS()}function k(){b(),f.value=nS()}return Li(()=>{const S=a.value<r.sm,T=a.value<r.md&&!S,A=a.value<r.lg&&!(T||S),P=a.value<r.xl&&!(A||T||S),R=a.value<r.xxl&&!(P||A||T||S),B=a.value>=r.xxl,L=S?"xs":T?"sm":A?"md":P?"lg":R?"xl":"xxl",$=typeof s=="number"?s:r[s],j=a.value<$;d.xs=S,d.sm=T,d.md=A,d.lg=P,d.xl=R,d.xxl=B,d.smAndUp=!S,d.mdAndUp=!(S||T),d.lgAndUp=!(S||T||A),d.xlAndUp=!(S||T||A||P),d.smAndDown=!(A||P||R||B),d.mdAndDown=!(P||R||B),d.lgAndDown=!(R||B),d.xlAndDown=!B,d.name=L,d.height=c.value,d.width=a.value,d.mobile=j,d.mobileBreakpoint=s,d.platform=f.value,d.thresholds=r}),Xn&&(window.addEventListener("resize",b,{passive:!0}),fr(()=>{window.removeEventListener("resize",b)},!0)),{...qd(d),update:k,ssr:!!n}}const Ju=Ge({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Qa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=xn(By);if(!r)throw new Error("Could not find Vuetify display injection");const s=te(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?r.width.value<e.mobileBreakpoint:e.mobileBreakpoint?r.width.value<r.thresholds.value[e.mobileBreakpoint]:e.mobile===null?r.mobile.value:!1),c=Me(()=>n?{[`${n}--mobile`]:s.value}:{});return{...r,displayClasses:c,mobile:s}}const ST=Symbol.for("vuetify:goto");function kT(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5}}}function VL(e){return o0(e)??(document.scrollingElement||document.body)}function o0(e){return typeof e=="string"?document.querySelector(e):Xb(e)}function W_(e,n,r){if(typeof e=="number")return n&&r?-e:e;let s=o0(e),c=0;for(;s;)c+=n?s.offsetLeft:s.offsetTop,s=s.offsetParent;return c}function BL(e,n){return{rtl:n.isRtl,options:na(kT(),e)}}async function iS(e,n,r,s){const c=r?"scrollLeft":"scrollTop",f=na((s==null?void 0:s.options)??kT(),n),d=s==null?void 0:s.rtl.value,a=(typeof e=="number"?e:o0(e))??0,b=f.container==="parent"&&a instanceof HTMLElement?a.parentElement:VL(f.container),k=typeof f.easing=="function"?f.easing:f.patterns[f.easing];if(!k)throw new TypeError(`Easing function "${f.easing}" not found.`);let S;if(typeof a=="number")S=W_(a,r,d);else if(S=W_(a,r,d)-W_(b,r,d),f.layout){const R=window.getComputedStyle(a).getPropertyValue("--v-layout-top");R&&(S-=parseInt(R,10))}S+=f.offset,S=FL(b,S,!!d,!!r);const T=b[c]??0;if(S===T)return Promise.resolve(S);const A=performance.now();return new Promise(P=>requestAnimationFrame(function R(B){const $=(B-A)/f.duration,j=Math.floor(T+(S-T)*k(ci($,0,1)));if(b[c]=j,$>=1&&Math.abs(j-b[c])<10)return P(S);if($>2)return P(b[c]);requestAnimationFrame(R)}))}function OL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=xn(ST),{isRtl:r}=tr();if(!n)throw new Error("[Vuetify] Could not find injected goto instance");const s={...n,rtl:Me(()=>n.rtl.value||r.value)};async function c(f,d){return iS(f,na(e,d),!1,s)}return c.horizontal=async(f,d)=>iS(f,na(e,d),!0,s),c}function FL(e,n,r,s){const{scrollWidth:c,scrollHeight:f}=e,[d,a]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let b,k;return s?r?(b=-(c-d),k=0):(b=0,k=c-d):(b=0,k=f+-a),ci(n,b,k)}const $L={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace"},jL={component:e=>bs(u0,{...e,class:"mdi"})},an=[String,Function,Object,Array],Oy=Symbol.for("vuetify:icons"),Ug=Ge({icon:{type:an},tag:{type:[String,Object,Function],required:!0}},"icon"),Fy=ft()({name:"VComponentIcon",props:Ug(),setup(e,n){let{slots:r}=n;return()=>{const s=e.icon;return F(e.tag,null,{default:()=>{var c;return[e.icon?F(s,null,null):(c=r.default)==null?void 0:c.call(r)]}})}}}),l0=ja({name:"VSvgIcon",inheritAttrs:!1,props:Ug(),setup(e,n){let{attrs:r}=n;return()=>F(e.tag,ut(r,{style:null}),{default:()=>[Y("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(s=>Array.isArray(s)?Y("path",{d:s[0],"fill-opacity":s[1]},null):Y("path",{d:s},null)):Y("path",{d:e.icon},null)])]})}}),NL=ja({name:"VLigatureIcon",props:Ug(),setup(e){return()=>F(e.tag,null,{default:()=>[e.icon]})}}),u0=ja({name:"VClassIcon",props:Ug(),setup(e){return()=>F(e.tag,{class:vt(e.icon)},null)}});function UL(){return{svg:{component:l0},class:{component:u0}}}function GL(e){const n=UL(),r=(e==null?void 0:e.defaultSet)??"mdi";return r==="mdi"&&!n.mdi&&(n.mdi=jL),na({defaultSet:r,sets:n,aliases:{...$L,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const qL=e=>{const n=xn(Oy);if(!n)throw new Error("Missing Vuetify Icons provide!");return{iconData:te(()=>{var b;const s=Us(e);if(!s)return{component:Fy};let c=s;if(typeof c=="string"&&(c=c.trim(),c.startsWith("$")&&(c=(b=n.aliases)==null?void 0:b[c.slice(1)])),Array.isArray(c))return{component:l0,icon:c};if(typeof c!="string")return{component:Fy,icon:c};const f=Object.keys(n.sets).find(k=>typeof c=="string"&&c.startsWith(`${k}:`)),d=f?c.slice(f.length+1):c;return{component:n.sets[f??n.defaultSet].component,icon:d}})}},Wf=Symbol.for("vuetify:theme"),Hn=Ge({theme:String},"theme");function rS(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function HL(){var s,c;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rS();const n=rS();if(!e)return{...n,isDisabled:!0};const r={};for(const[f,d]of Object.entries(e.themes??{})){const a=d.dark||f==="dark"?(s=n.themes)==null?void 0:s.dark:(c=n.themes)==null?void 0:c.light;r[f]=na(a,d)}return na(n,{...e,themes:r})}function Iu(e,n,r,s){e.push(`${YL(n,s)} {
`,...r.map(c=>`  ${c};
`),`}
`)}function aS(e,n){const r=e.dark?2:1,s=e.dark?1:2,c=[];for(const[f,d]of Object.entries(e.colors)){const a=Fa(d);c.push(`--${n}theme-${f}: ${a.r},${a.g},${a.b}`),f.startsWith("on-")||c.push(`--${n}theme-${f}-overlay-multiplier: ${Ry(d)>.18?r:s}`)}for(const[f,d]of Object.entries(e.variables)){const a=typeof d=="string"&&d.startsWith("#")?Fa(d):void 0,b=a?`${a.r}, ${a.g}, ${a.b}`:void 0;c.push(`--${n}${f}: ${b??d}`)}return c}function WL(e,n,r){const s={};if(r)for(const c of["lighten","darken"]){const f=c==="lighten"?MR:DR;for(const d of Oa(r[c],1))s[`${e}-${c}-${d}`]=uT(f(Fa(n),d))}return s}function ZL(e,n){if(!n)return{};let r={};for(const s of n.colors){const c=e[s];c&&(r={...r,...WL(s,c,n)})}return r}function KL(e){const n={};for(const r of Object.keys(e)){if(r.startsWith("on-")||e[`on-${r}`])continue;const s=`on-${r}`,c=Fa(e[r]);n[s]=hT(c)}return n}function YL(e,n){if(!n)return e;const r=`:where(${n})`;return e===":root"?r:`${r} ${e}`}function XL(e,n,r){const s=JL(e,n);s&&(s.innerHTML=r)}function JL(e,n){if(!Xn)return null;let r=document.getElementById(e);return r||(r=document.createElement("style"),r.id=e,r.type="text/css",n&&r.setAttribute("nonce",n),document.head.appendChild(r)),r}function QL(e){const n=HL(e),r=Rt(n.defaultTheme),s=Xe(n.themes),c=Rt("light"),f=te({get(){return r.value==="system"?c.value:r.value},set(L){r.value=L}}),d=te(()=>{const L={};for(const[$,j]of Object.entries(s.value)){const q={...j.colors,...ZL(j.colors,n.variations)};L[$]={...j,colors:{...q,...KL(q)}}}return L}),a=Me(()=>d.value[f.value]),b=te(()=>{var q;const L=[],$=n.unimportant?"":" !important",j=n.scoped?n.prefix:"";(q=a.value)!=null&&q.dark&&Iu(L,":root",["color-scheme: dark"],n.scope),Iu(L,":root",aS(a.value,n.prefix),n.scope);for(const[H,ee]of Object.entries(d.value))Iu(L,`.${n.prefix}theme--${H}`,[`color-scheme: ${ee.dark?"dark":"normal"}`,...aS(ee,n.prefix)],n.scope);if(n.utilities){const H=[],ee=[],Q=new Set(Object.values(d.value).flatMap(oe=>Object.keys(oe.colors)));for(const oe of Q)oe.startsWith("on-")?Iu(ee,`.${oe}`,[`color: rgb(var(--${n.prefix}theme-${oe}))${$}`],n.scope):(Iu(H,`.${j}bg-${oe}`,[`--${n.prefix}theme-overlay-multiplier: var(--${n.prefix}theme-${oe}-overlay-multiplier)`,`background-color: rgb(var(--${n.prefix}theme-${oe}))${$}`,`color: rgb(var(--${n.prefix}theme-on-${oe}))${$}`],n.scope),Iu(ee,`.${j}text-${oe}`,[`color: rgb(var(--${n.prefix}theme-${oe}))${$}`],n.scope),Iu(ee,`.${j}border-${oe}`,[`--${n.prefix}border-color: var(--${n.prefix}theme-${oe})`],n.scope));L.push(...H,...ee)}return L.map((H,ee)=>ee===0?H:`    ${H}`).join("")}),k=Me(()=>n.isDisabled?void 0:`${n.prefix}theme--${f.value}`),S=Me(()=>Object.keys(d.value));if(JD){let $=function(){c.value=L.matches?"dark":"light"};const L=window.matchMedia("(prefers-color-scheme: dark)");$(),L.addEventListener("change",$,{passive:!0}),Ak()&&fr(()=>{L.removeEventListener("change",$)})}function T(L){if(n.isDisabled)return;const $=L._context.provides.usehead;if($){let j=function(){return{style:[{textContent:b.value,id:n.stylesheetId,nonce:n.cspNonce||!1}]}};if($.push){const q=$.push(j);Xn&&Ot(b,()=>{q.patch(j)})}else Xn?($.addHeadObjs(Me(j)),Li(()=>$.updateDOM())):$.addHeadObjs(j())}else{let j=function(){XL(n.stylesheetId,n.cspNonce,b.value)};Xn?Ot(b,j,{immediate:!0}):j()}}function A(L){S.value.includes(L)&&(f.value=L)}function P(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S.value;const $=L.indexOf(f.value),j=$===-1?0:($+1)%L.length;A(L[j])}function R(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];P(L)}const B=new Proxy(f,{get(L,$){return Reflect.get(L,$)},set(L,$,j){return $==="value"&&iT(`theme.global.name.value = ${j}`,`theme.change('${j}')`),Reflect.set(L,$,j)}});return{install:T,change:A,cycle:P,toggle:R,isDisabled:n.isDisabled,name:f,themes:s,current:a,computedThemes:d,prefix:n.prefix,themeClasses:k,styles:b,global:{name:B,current:a}}}function Qn(e){ji("provideTheme");const n=xn(Wf,null);if(!n)throw new Error("Could not find Vuetify theme injection");const r=Me(()=>e.theme??n.name.value),s=Me(()=>n.themes.value[r.value]),c=Me(()=>n.isDisabled?void 0:`${n.prefix}theme--${r.value}`),f={...n,name:r,current:s,themeClasses:c};return ri(Wf,f),f}function c0(){ji("useTheme");const e=xn(Wf,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function vs(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const r=vg(),s=Xe();if(Xn){const c=new ResizeObserver(f=>{e==null||e(f,c),f.length&&(n==="content"?s.value=f[0].contentRect:s.value=f[0].target.getBoundingClientRect())});Or(()=>{c.disconnect()}),Ot(()=>r.el,(f,d)=>{d&&(c.unobserve(d),s.value=void 0),f&&c.observe(f)},{flush:"post"})}return{resizeRef:r,contentRect:Gd(s)}}const Zf=Symbol.for("vuetify:layout"),CT=Symbol.for("vuetify:layout-item"),sS=1e3,TT=Ge({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Qu=Ge({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function PT(){const e=xn(Zf);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function ec(e){const n=xn(Zf);if(!n)throw new Error("[Vuetify] Could not find injected layout");const r=e.id??`layout-item-${_a()}`,s=ji("useLayoutItem");ri(CT,{id:r});const c=Rt(!1);Nb(()=>c.value=!0),cC(()=>c.value=!1);const{layoutItemStyles:f,layoutItemScrimStyles:d}=n.register(s,{...e,active:te(()=>c.value?!1:e.active.value),id:r});return Or(()=>n.unregister(r)),{layoutItemStyles:f,layoutRect:n.layoutRect,layoutItemScrimStyles:d}}const ez=(e,n,r,s)=>{let c={top:0,left:0,right:0,bottom:0};const f=[{id:"",layer:{...c}}];for(const d of e){const a=n.get(d),b=r.get(d),k=s.get(d);if(!a||!b||!k)continue;const S={...c,[a.value]:parseInt(c[a.value],10)+(k.value?parseInt(b.value,10):0)};f.push({id:d,layer:S}),c=S}return f};function IT(e){const n=xn(Zf,null),r=te(()=>n?n.rootZIndex.value-100:sS),s=Xe([]),c=Sr(new Map),f=Sr(new Map),d=Sr(new Map),a=Sr(new Map),b=Sr(new Map),{resizeRef:k,contentRect:S}=vs(),T=te(()=>{const Q=new Map,oe=e.overlaps??[];for(const le of oe.filter(ce=>ce.includes(":"))){const[ce,he]=le.split(":");if(!s.value.includes(ce)||!s.value.includes(he))continue;const ve=c.get(ce),ie=c.get(he),be=f.get(ce),Be=f.get(he);!ve||!ie||!be||!Be||(Q.set(he,{position:ve.value,amount:parseInt(be.value,10)}),Q.set(ce,{position:ie.value,amount:-parseInt(Be.value,10)}))}return Q}),A=te(()=>{const Q=[...new Set([...d.values()].map(le=>le.value))].sort((le,ce)=>le-ce),oe=[];for(const le of Q){const ce=s.value.filter(he=>{var ve;return((ve=d.get(he))==null?void 0:ve.value)===le});oe.push(...ce)}return ez(oe,c,f,a)}),P=te(()=>!Array.from(b.values()).some(Q=>Q.value)),R=te(()=>A.value[A.value.length-1].layer),B=Me(()=>({"--v-layout-left":qt(R.value.left),"--v-layout-right":qt(R.value.right),"--v-layout-top":qt(R.value.top),"--v-layout-bottom":qt(R.value.bottom),...P.value?void 0:{transition:"none"}})),L=te(()=>A.value.slice(1).map((Q,oe)=>{let{id:le}=Q;const{layer:ce}=A.value[oe],he=f.get(le),ve=c.get(le);return{id:le,...ce,size:Number(he.value),position:ve.value}})),$=Q=>L.value.find(oe=>oe.id===Q),j=ji("createLayout"),q=Rt(!1);gi(()=>{q.value=!0}),ri(Zf,{register:(Q,oe)=>{let{id:le,order:ce,position:he,layoutSize:ve,elementSize:ie,active:be,disableTransitions:Be,absolute:De}=oe;d.set(le,ce),c.set(le,he),f.set(le,ve),a.set(le,be),Be&&b.set(le,Be);const Ze=Sd(CT,j==null?void 0:j.vnode).indexOf(Q);Ze>-1?s.value.splice(Ze,0,le):s.value.push(le);const mt=te(()=>L.value.findIndex(Ee=>Ee.id===le)),pt=te(()=>r.value+A.value.length*2-mt.value*2),Ve=te(()=>{const Ee=he.value==="left"||he.value==="right",tt=he.value==="right",Nt=he.value==="bottom",kt=ie.value??ve.value,wt=kt===0?"%":"px",Le={[he.value]:0,zIndex:pt.value,transform:`translate${Ee?"X":"Y"}(${(be.value?0:-(kt===0?100:kt))*(tt||Nt?-1:1)}${wt})`,position:De.value||r.value!==sS?"absolute":"fixed",...P.value?void 0:{transition:"none"}};if(!q.value)return Le;const _t=L.value[mt.value];if(!_t)throw new Error(`[Vuetify] Could not find layout item "${le}"`);const ot=T.value.get(le);return ot&&(_t[ot.position]+=ot.amount),{...Le,height:Ee?`calc(100% - ${_t.top}px - ${_t.bottom}px)`:ie.value?`${ie.value}px`:void 0,left:tt?void 0:`${_t.left}px`,right:tt?`${_t.right}px`:void 0,top:he.value!=="bottom"?`${_t.top}px`:void 0,bottom:he.value!=="top"?`${_t.bottom}px`:void 0,width:Ee?ie.value?`${ie.value}px`:void 0:`calc(100% - ${_t.left}px - ${_t.right}px)`}}),Se=te(()=>({zIndex:pt.value-1}));return{layoutItemStyles:Ve,layoutItemScrimStyles:Se,zIndex:pt}},unregister:Q=>{d.delete(Q),c.delete(Q),f.delete(Q),a.delete(Q),b.delete(Q),s.value=s.value.filter(oe=>oe!==Q)},mainRect:R,mainStyles:B,getLayoutItem:$,items:L,layoutRect:S,rootZIndex:r});const H=Me(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),ee=Me(()=>({zIndex:n?r.value:void 0,position:n?"relative":void 0,overflow:n?"hidden":void 0}));return{layoutClasses:H,layoutStyles:ee,getLayoutItem:$,items:L,layoutRect:S,layoutRef:k}}function AT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:n,...r}=e,s=na(n,r),{aliases:c={},components:f={},directives:d={}}=s,a=Md();return a.run(()=>{const b=zR(s.defaults),k=zL(s.display,s.ssr),S=QL(s.theme),T=GL(s.icons),A=WR(s.locale),P=DL(s.date,A),R=BL(s.goTo,A);function B($){for(const q in d)$.directive(q,d[q]);for(const q in f)$.component(q,f[q]);for(const q in c)$.component(q,ja({...c[q],name:q,aliasName:c[q].name}));const j=Md();if(j.run(()=>{S.install($)}),$.onUnmount(()=>j.stop()),$.provide(Vd,b),$.provide(By,k),$.provide(Wf,S),$.provide(Oy,T),$.provide(Bd,A),$.provide(xT,P.options),$.provide(J1,P.instance),$.provide(ST,R),Xn&&s.ssr)if($.$nuxt)$.$nuxt.hook("app:suspense:resolve",()=>{k.update()});else{const{mount:q}=$;$.mount=function(){const H=q(...arguments);return zn(()=>k.update()),$.mount=q,H}}$.mixin({computed:{$vuetify(){return Sr({defaults:ld.call(this,Vd),display:ld.call(this,By),theme:ld.call(this,Wf),icons:ld.call(this,Oy),locale:ld.call(this,Bd),date:ld.call(this,J1)})}}})}function L(){a.stop()}return{install:B,unmount:L,defaults:b,display:k,theme:S,icons:T,locale:A,date:P,goTo:R}})}const tz="3.9.0";AT.version=tz;function ld(e){var s,c;const n=this.$,r=((s=n.parent)==null?void 0:s.provides)??((c=n.vnode.appContext)==null?void 0:c.provides);if(r&&e in r)return r[e]}const nz=Ge({...Kt(),...TT({fullHeight:!0}),...Hn()},"VApp"),iz=ft()({name:"VApp",props:nz(),setup(e,n){let{slots:r}=n;const s=Qn(e),{layoutClasses:c,getLayoutItem:f,items:d,layoutRef:a}=IT(e),{rtlClasses:b}=tr();return bt(()=>{var k;return Y("div",{ref:a,class:vt(["v-application",s.themeClasses.value,c.value,b.value,e.class]),style:Bt([e.style])},[Y("div",{class:"v-application__wrap"},[(k=r.default)==null?void 0:k.call(r)])])}),{getLayoutItem:f,items:d,theme:s}}}),wn=Ge({tag:{type:[String,Object,Function],default:"div"}},"tag"),ET=Ge({text:String,...Kt(),...wn()},"VToolbarTitle"),d0=ft()({name:"VToolbarTitle",props:ET(),setup(e,n){let{slots:r}=n;return bt(()=>{const s=!!(r.default||r.text||e.text);return F(e.tag,{class:vt(["v-toolbar-title",e.class]),style:Bt(e.style)},{default:()=>{var c;return[s&&Y("div",{class:"v-toolbar-title__placeholder"},[r.text?r.text():e.text,(c=r.default)==null?void 0:c.call(r)])]}})}),{}}}),rz=Ge({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Na(e,n,r){return ft()({name:e,props:rz({mode:r,origin:n}),setup(s,c){let{slots:f}=c;const d={onBeforeEnter(a){s.origin&&(a.style.transformOrigin=s.origin)},onLeave(a){if(s.leaveAbsolute){const{offsetTop:b,offsetLeft:k,offsetWidth:S,offsetHeight:T}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${b}px`,a.style.left=`${k}px`,a.style.width=`${S}px`,a.style.height=`${T}px`}s.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(s.leaveAbsolute&&(a!=null&&a._transitionInitialStyles)){const{position:b,top:k,left:S,width:T,height:A}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=b||"",a.style.top=k||"",a.style.left=S||"",a.style.width=T||"",a.style.height=A||""}}};return()=>{const a=s.group?Kb:Cl;return bs(a,{name:s.disabled?"":e,css:!s.disabled,...s.group?void 0:{mode:s.mode},...s.disabled?{}:d},f.default)}}})}function MT(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return ft()({name:e,props:{mode:{type:String,default:r},disabled:Boolean,group:Boolean},setup(s,c){let{slots:f}=c;const d=s.group?Kb:Cl;return()=>bs(d,{name:s.disabled?"":e,css:!s.disabled,...s.disabled?{}:n},f.default)}})}function DT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",s=va(`offset-${r}`);return{onBeforeEnter(d){d._parent=d.parentNode,d._initialStyle={transition:d.style.transition,overflow:d.style.overflow,[r]:d.style[r]}},onEnter(d){const a=d._initialStyle;if(!a)return;d.style.setProperty("transition","none","important"),d.style.overflow="hidden";const b=`${d[s]}px`;d.style[r]="0",d.offsetHeight,d.style.transition=a.transition,e&&d._parent&&d._parent.classList.add(e),requestAnimationFrame(()=>{d.style[r]=b})},onAfterEnter:f,onEnterCancelled:f,onLeave(d){d._initialStyle={transition:"",overflow:d.style.overflow,[r]:d.style[r]},d.style.overflow="hidden",d.style[r]=`${d[s]}px`,d.offsetHeight,requestAnimationFrame(()=>d.style[r]="0")},onAfterLeave:c,onLeaveCancelled:c};function c(d){e&&d._parent&&d._parent.classList.remove(e),f(d)}function f(d){if(!d._initialStyle)return;const a=d._initialStyle[r];d.style.overflow=d._initialStyle.overflow,a!=null&&(d.style[r]=a),delete d._initialStyle}}const az=Ge({target:[Object,Array]},"v-dialog-transition"),Z_=new WeakMap,Gg=ft()({name:"VDialogTransition",props:az(),setup(e,n){let{slots:r}=n;const s={onBeforeEnter(c){c.style.pointerEvents="none",c.style.visibility="hidden"},async onEnter(c,f){var P;await new Promise(R=>requestAnimationFrame(R)),await new Promise(R=>requestAnimationFrame(R)),c.style.visibility="";const d=lS(e.target,c),{x:a,y:b,sx:k,sy:S,speed:T}=d;Z_.set(c,d);const A=Vu(c,[{transform:`translate(${a}px, ${b}px) scale(${k}, ${S})`,opacity:0},{}],{duration:225*T,easing:FR});(P=oS(c))==null||P.forEach(R=>{Vu(R,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*T,easing:Hf})}),A.finished.then(()=>f())},onAfterEnter(c){c.style.removeProperty("pointer-events")},onBeforeLeave(c){c.style.pointerEvents="none"},async onLeave(c,f){var P;await new Promise(R=>requestAnimationFrame(R));let d;!Z_.has(c)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?d=lS(e.target,c):d=Z_.get(c);const{x:a,y:b,sx:k,sy:S,speed:T}=d;Vu(c,[{},{transform:`translate(${a}px, ${b}px) scale(${k}, ${S})`,opacity:0}],{duration:125*T,easing:$R}).finished.then(()=>f()),(P=oS(c))==null||P.forEach(R=>{Vu(R,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*T,easing:Hf})})},onAfterLeave(c){c.style.removeProperty("pointer-events")}};return()=>e.target?F(Cl,ut({name:"dialog-transition"},s,{css:!1}),r):F(Cl,{name:"dialog-transition"},r)}});function oS(e){var r;const n=(r=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:r.children;return n&&[...n]}function lS(e,n){const r=nT(e),s=e0(n),[c,f]=getComputedStyle(n).transformOrigin.split(" ").map($=>parseFloat($)),[d,a]=getComputedStyle(n).getPropertyValue("--v-overlay-anchor-origin").split(" ");let b=r.left+r.width/2;d==="left"||a==="left"?b-=r.width/2:(d==="right"||a==="right")&&(b+=r.width/2);let k=r.top+r.height/2;d==="top"||a==="top"?k-=r.height/2:(d==="bottom"||a==="bottom")&&(k+=r.height/2);const S=r.width/s.width,T=r.height/s.height,A=Math.max(1,S,T),P=S/A||0,R=T/A||0,B=s.width*s.height/(window.innerWidth*window.innerHeight),L=B>.12?Math.min(1.5,(B-.12)*10+1):1;return{x:b-(c+s.left),y:k-(f+s.top),sx:P,sy:R,speed:L}}const sz=Na("fab-transition","center center","out-in"),oz=Na("dialog-bottom-transition"),lz=Na("dialog-top-transition"),Kf=Na("fade-transition"),h0=Na("scale-transition"),uz=Na("scroll-x-transition"),cz=Na("scroll-x-reverse-transition"),dz=Na("scroll-y-transition"),hz=Na("scroll-y-reverse-transition"),fz=Na("slide-x-transition"),mz=Na("slide-x-reverse-transition"),f0=Na("slide-y-transition"),pz=Na("slide-y-reverse-transition"),qg=MT("expand-transition",DT()),m0=MT("expand-x-transition",DT("",!0)),gz=Ge({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),kn=ft(!1)({name:"VDefaultsProvider",props:gz(),setup(e,n){let{slots:r}=n;const{defaults:s,disabled:c,reset:f,root:d,scoped:a}=qd(e);return zi(s,{reset:f,root:d,scoped:a,disabled:c}),()=>{var b;return(b=r.default)==null?void 0:b.call(r)}}}),Zi=Ge({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Ki(e){return{dimensionStyles:te(()=>{const r={},s=qt(e.height),c=qt(e.maxHeight),f=qt(e.maxWidth),d=qt(e.minHeight),a=qt(e.minWidth),b=qt(e.width);return s!=null&&(r.height=s),c!=null&&(r.maxHeight=c),f!=null&&(r.maxWidth=f),d!=null&&(r.minHeight=d),a!=null&&(r.minWidth=a),b!=null&&(r.width=b),r})}}function vz(e){return{aspectStyles:te(()=>{const n=Number(e.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const RT=Ge({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Kt(),...Zi()},"VResponsive"),$y=ft()({name:"VResponsive",props:RT(),setup(e,n){let{slots:r}=n;const{aspectStyles:s}=vz(e),{dimensionStyles:c}=Ki(e);return bt(()=>{var f;return Y("div",{class:vt(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Bt([c.value,e.style])},[Y("div",{class:"v-responsive__sizer",style:Bt(s.value)},null),(f=r.additional)==null?void 0:f.call(r),r.default&&Y("div",{class:vt(["v-responsive__content",e.contentClass])},[r.default()])])}),{}}});function p0(e){return Qb(()=>{const n=Us(e),r=[],s={};if(n.background)if(My(n.background)){if(s.backgroundColor=n.background,!n.text&&PR(n.background)){const c=Fa(n.background);if(c.a==null||c.a===1){const f=hT(c);s.color=f,s.caretColor=f}}}else r.push(`bg-${n.background}`);return n.text&&(My(n.text)?(s.color=n.text,s.caretColor=n.text):r.push(`text-${n.text}`)),{colorClasses:r,colorStyles:s}})}function Br(e){const{colorClasses:n,colorStyles:r}=p0(()=>({text:Us(e)}));return{textColorClasses:n,textColorStyles:r}}function ti(e){const{colorClasses:n,colorStyles:r}=p0(()=>({background:Us(e)}));return{backgroundColorClasses:n,backgroundColorStyles:r}}const _i=Ge({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Vi(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{roundedClasses:te(()=>{const s=er(e)?e.value:e.rounded,c=er(e)?e.value:e.tile,f=[];if(s===!0||s==="")f.push(`${n}--rounded`);else if(typeof s=="string"||s===0)for(const d of String(s).split(" "))f.push(`rounded-${d}`);else(c||s===!1)&&f.push("rounded-0");return f})}}const ws=Ge({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),ia=(e,n)=>{let{slots:r}=n;const{transition:s,disabled:c,group:f,...d}=e,{component:a=f?Kb:Cl,...b}=Gf(s)?s:{};let k;return Gf(s)?k=ut(b,uR({disabled:c,group:f}),d):k=ut({name:c||!s?"":s},d),bs(a,k,r)};function _z(e,n){if(!Yb)return;const r=n.modifiers||{},s=n.value,{handler:c,options:f}=typeof s=="object"?s:{handler:s,options:{}},d=new IntersectionObserver(function(){var T;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=arguments.length>1?arguments[1]:void 0;const k=(T=e._observe)==null?void 0:T[n.instance.$.uid];if(!k)return;const S=a.some(A=>A.isIntersecting);c&&(!r.quiet||k.init)&&(!r.once||S||k.init)&&c(S,a,b),S&&r.once?LT(e,n):k.init=!0},f);e._observe=Object(e._observe),e._observe[n.instance.$.uid]={init:!1,observer:d},d.observe(e)}function LT(e,n){var s;const r=(s=e._observe)==null?void 0:s[n.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[n.instance.$.uid])}const ko={mounted:_z,unmounted:LT},zT=Ge({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...RT(),...Kt(),..._i(),...ws()},"VImg"),Co=ft()({name:"VImg",directives:{vIntersect:ko},props:zT(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{roundedClasses:d}=Vi(e),a=ji("VImg"),b=Rt(""),k=Xe(),S=Rt(e.eager?"loading":"idle"),T=Rt(),A=Rt(),P=te(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),R=te(()=>P.value.aspect||T.value/A.value||0);Ot(()=>e.src,()=>{B(S.value!=="idle")}),Ot(R,(ie,be)=>{!ie&&be&&k.value&&H(k.value)}),Hd(()=>B());function B(ie){if(!(e.eager&&ie)&&!(Yb&&!ie&&!e.eager)){if(S.value="loading",P.value.lazySrc){const be=new Image;be.src=P.value.lazySrc,H(be,null)}P.value.src&&zn(()=>{var be;r("loadstart",((be=k.value)==null?void 0:be.currentSrc)||P.value.src),setTimeout(()=>{var Be;if(!a.isUnmounted)if((Be=k.value)!=null&&Be.complete){if(k.value.naturalWidth||$(),S.value==="error")return;R.value||H(k.value,null),S.value==="loading"&&L()}else R.value||H(k.value),j()})})}}function L(){var ie;a.isUnmounted||(j(),H(k.value),S.value="loaded",r("load",((ie=k.value)==null?void 0:ie.currentSrc)||P.value.src))}function $(){var ie;a.isUnmounted||(S.value="error",r("error",((ie=k.value)==null?void 0:ie.currentSrc)||P.value.src))}function j(){const ie=k.value;ie&&(b.value=ie.currentSrc||ie.src)}let q=-1;Or(()=>{clearTimeout(q)});function H(ie){let be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const Be=()=>{if(clearTimeout(q),a.isUnmounted)return;const{naturalHeight:De,naturalWidth:Fe}=ie;De||Fe?(T.value=Fe,A.value=De):!ie.complete&&S.value==="loading"&&be!=null?q=window.setTimeout(Be,be):(ie.currentSrc.endsWith(".svg")||ie.currentSrc.startsWith("data:image/svg+xml"))&&(T.value=1,A.value=1)};Be()}const ee=Me(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),Q=()=>{var Be;if(!P.value.src||S.value==="idle")return null;const ie=Y("img",{class:vt(["v-img__img",ee.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:P.value.src,srcset:P.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:k,onLoad:L,onError:$},null),be=(Be=s.sources)==null?void 0:Be.call(s);return F(ia,{transition:e.transition,appear:!0},{default:()=>[Ri(be?Y("picture",{class:"v-img__picture"},[be,ie]):ie,[[xs,S.value==="loaded"]])]})},oe=()=>F(ia,{transition:e.transition},{default:()=>[P.value.lazySrc&&S.value!=="loaded"&&Y("img",{class:vt(["v-img__img","v-img__img--preload",ee.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:P.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),le=()=>s.placeholder?F(ia,{transition:e.transition,appear:!0},{default:()=>[(S.value==="loading"||S.value==="error"&&!s.error)&&Y("div",{class:"v-img__placeholder"},[s.placeholder()])]}):null,ce=()=>s.error?F(ia,{transition:e.transition,appear:!0},{default:()=>[S.value==="error"&&Y("div",{class:"v-img__error"},[s.error()])]}):null,he=()=>e.gradient?Y("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,ve=Rt(!1);{const ie=Ot(R,be=>{be&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{ve.value=!0})}),ie())})}return bt(()=>{const ie=$y.filterProps(e);return Ri(F($y,ut({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!ve.value},c.value,d.value,e.class],style:[{width:qt(e.width==="auto"?T.value:e.width)},f.value,e.style]},ie,{aspectRatio:R.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>Y(Ht,null,[F(Q,null,null),F(oe,null,null),F(he,null,null),F(le,null,null),F(ce,null,null)]),default:s.default}),[[ko,{handler:B,options:e.options},null,{once:!0}]])}),{currentSrc:b,image:k,state:S,naturalWidth:T,naturalHeight:A}}}),ya=Ge({border:[Boolean,Number,String]},"border");function Pa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{borderClasses:te(()=>{const s=e.border;return s===!0||s===""?`${n}--border`:typeof s=="string"||s===0?String(s).split(" ").map(c=>`border-${c}`):[]})}}const nr=Ge({elevation:{type:[Number,String],validator(e){const n=parseInt(e);return!isNaN(n)&&n>=0&&n<=24}}},"elevation");function Tr(e){return{elevationClasses:Me(()=>{const r=er(e)?e.value:e.elevation;return r==null?[]:[`elevation-${r}`]})}}const yz=[null,"prominent","default","comfortable","compact"],VT=Ge({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>yz.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ya(),...Kt(),...nr(),..._i(),...wn({tag:"header"}),...Hn()},"VToolbar"),jy=ft()({name:"VToolbar",props:VT(),setup(e,n){var P;let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color),{borderClasses:f}=Pa(e),{elevationClasses:d}=Tr(e),{roundedClasses:a}=Vi(e),{themeClasses:b}=Qn(e),{rtlClasses:k}=tr(),S=Rt(e.extended===null?!!((P=r.extension)!=null&&P.call(r)):e.extended),T=te(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),A=te(()=>S.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return zi({VBtn:{variant:"text"}}),bt(()=>{var $;const R=!!(e.title||r.title),B=!!(r.image||e.image),L=($=r.extension)==null?void 0:$.call(r);return S.value=e.extended===null?!!L:e.extended,F(e.tag,{class:vt(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},s.value,f.value,d.value,a.value,b.value,k.value,e.class]),style:Bt([c.value,e.style])},{default:()=>[B&&Y("div",{key:"image",class:"v-toolbar__image"},[r.image?F(kn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):F(Co,{key:"image-img",cover:!0,src:e.image},null)]),F(kn,{defaults:{VTabs:{height:qt(T.value)}}},{default:()=>{var j,q,H;return[Y("div",{class:"v-toolbar__content",style:{height:qt(T.value)}},[r.prepend&&Y("div",{class:"v-toolbar__prepend"},[(j=r.prepend)==null?void 0:j.call(r)]),R&&F(d0,{key:"title",text:e.title},{text:r.title}),(q=r.default)==null?void 0:q.call(r),r.append&&Y("div",{class:"v-toolbar__append"},[(H=r.append)==null?void 0:H.call(r)])])]}}),F(kn,{defaults:{VTabs:{height:qt(A.value)}}},{default:()=>[F(qg,null,{default:()=>[S.value&&Y("div",{class:"v-toolbar__extension",style:{height:qt(A.value)}},[L])]})]})]})}),{contentHeight:T,extensionHeight:A}}}),bz=Ge({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function xz(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:r}=n;let s=0,c=0;const f=Xe(null),d=Rt(0),a=Rt(0),b=Rt(0),k=Rt(!1),S=Rt(!1),T=te(()=>Number(e.scrollThreshold)),A=te(()=>ci((T.value-d.value)/T.value||0)),P=()=>{const R=f.value;if(!R||r&&!r.value)return;s=d.value,d.value="window"in R?R.pageYOffset:R.scrollTop;const B=R instanceof Window?document.documentElement.scrollHeight:R.scrollHeight;if(c!==B){c=B;return}S.value=d.value<s,b.value=Math.abs(d.value-T.value)};return Ot(S,()=>{a.value=a.value||d.value}),Ot(k,()=>{a.value=0}),gi(()=>{Ot(()=>e.scrollTarget,R=>{var L;const B=R?document.querySelector(R):window;B&&B!==f.value&&((L=f.value)==null||L.removeEventListener("scroll",P),f.value=B,f.value.addEventListener("scroll",P,{passive:!0}))},{immediate:!0})}),Or(()=>{var R;(R=f.value)==null||R.removeEventListener("scroll",P)}),r&&Ot(r,P,{immediate:!0}),{scrollThreshold:T,currentScroll:d,currentThreshold:b,isScrollActive:k,scrollRatio:A,isScrollingUp:S,savedScroll:a}}function tc(){const e=Rt(!1);return gi(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Me(()=>e.value?void 0:{transition:"none !important"}),isBooted:Gd(e)}}const wz=Ge({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...VT(),...Qu(),...bz(),height:{type:[Number,String],default:64}},"VAppBar"),Sz=ft()({name:"VAppBar",props:wz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Xe(),c=nn(e,"modelValue"),f=te(()=>{var q;const j=new Set(((q=e.scrollBehavior)==null?void 0:q.split(" "))??[]);return{hide:j.has("hide"),fullyHide:j.has("fully-hide"),inverted:j.has("inverted"),collapse:j.has("collapse"),elevate:j.has("elevate"),fadeImage:j.has("fade-image")}}),d=te(()=>{const j=f.value;return j.hide||j.fullyHide||j.inverted||j.collapse||j.elevate||j.fadeImage||!c.value}),{currentScroll:a,scrollThreshold:b,isScrollingUp:k,scrollRatio:S}=xz(e,{canScroll:d}),T=Me(()=>f.value.hide||f.value.fullyHide),A=te(()=>e.collapse||f.value.collapse&&(f.value.inverted?S.value>0:S.value===0)),P=te(()=>e.flat||f.value.fullyHide&&!c.value||f.value.elevate&&(f.value.inverted?a.value>0:a.value===0)),R=te(()=>f.value.fadeImage?f.value.inverted?1-S.value:S.value:void 0),B=te(()=>{var H,ee;if(f.value.hide&&f.value.inverted)return 0;const j=((H=s.value)==null?void 0:H.contentHeight)??0,q=((ee=s.value)==null?void 0:ee.extensionHeight)??0;return T.value?a.value<b.value||f.value.fullyHide?j+q:j:j+q});ra(()=>!!e.scrollBehavior,()=>{Li(()=>{T.value?f.value.inverted?c.value=a.value>b.value:c.value=k.value||a.value<b.value:c.value=!0})});const{ssrBootStyles:L}=tc(),{layoutItemStyles:$}=ec({id:e.name,order:te(()=>parseInt(e.order,10)),position:Me(()=>e.location),layoutSize:B,elementSize:Rt(void 0),active:c,absolute:Me(()=>e.absolute)});return bt(()=>{const j=jy.filterProps(e);return F(jy,ut({ref:s,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...$.value,"--v-toolbar-image-opacity":R.value,height:void 0,...L.value},e.style]},j,{collapse:A.value,flat:P.value}),r)}),{}}}),kz=[null,"default","comfortable","compact"],mr=Ge({density:{type:String,default:"default",validator:e=>kz.includes(e)}},"density");function sa(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{densityClasses:Me(()=>`${n}--density-${e.density}`)}}const Cz=["elevated","flat","tonal","outlined","text","plain"];function El(e,n){return Y(Ht,null,[e&&Y("span",{key:"overlay",class:vt(`${n}__overlay`)},null),Y("span",{key:"underlay",class:vt(`${n}__underlay`)},null)])}const es=Ge({color:String,variant:{type:String,default:"elevated",validator:e=>Cz.includes(e)}},"variant");function nc(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=Me(()=>{const{variant:f}=Us(e);return`${n}--variant-${f}`}),{colorClasses:s,colorStyles:c}=p0(()=>{const{variant:f,color:d}=Us(e);return{[["elevated","flat"].includes(f)?"background":"text"]:d}});return{colorClasses:s,colorStyles:c,variantClasses:r}}const BT=Ge({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...ya(),...Kt(),...mr(),...nr(),..._i(),...wn(),...Hn(),...es()},"VBtnGroup"),Ny=ft()({name:"VBtnGroup",props:BT(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{densityClasses:c}=sa(e),{borderClasses:f}=Pa(e),{elevationClasses:d}=Tr(e),{roundedClasses:a}=Vi(e);zi({VBtn:{height:Me(()=>e.direction==="horizontal"?"auto":null),baseColor:Me(()=>e.baseColor),color:Me(()=>e.color),density:Me(()=>e.density),flat:!0,variant:Me(()=>e.variant)}}),bt(()=>F(e.tag,{class:vt(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},s.value,f.value,c.value,d.value,a.value,e.class]),style:Bt(e.style)},r))}}),ic=Ge({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),rc=Ge({value:null,disabled:Boolean,selectedClass:String},"group-item");function ac(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=ji("useGroupItem");if(!s)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const c=_a();ri(Symbol.for(`${n.description}:id`),c);const f=xn(n,null);if(!f){if(!r)return f;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${n.description}`)}const d=Me(()=>e.value),a=te(()=>!!(f.disabled.value||e.disabled));f.register({id:c,value:d,disabled:a},s),Or(()=>{f.unregister(c)});const b=te(()=>f.isSelected(c)),k=te(()=>f.items.value[0].id===c),S=te(()=>f.items.value[f.items.value.length-1].id===c),T=te(()=>b.value&&[f.selectedClass.value,e.selectedClass]);return Ot(b,A=>{s.emit("group:selected",{value:A})},{flush:"sync"}),{id:c,isSelected:b,isFirst:k,isLast:S,toggle:()=>f.select(c,!b.value),select:A=>f.select(c,A),selectedClass:T,value:d,disabled:a,group:f}}function Ml(e,n){let r=!1;const s=Sr([]),c=nn(e,"modelValue",[],A=>A==null?[]:OT(s,Di(A)),A=>{const P=Pz(s,A);return e.multiple?P:P[0]}),f=ji("useGroup");function d(A,P){const R=A,B=Symbol.for(`${n.description}:id`),$=Sd(B,f==null?void 0:f.vnode).indexOf(P);kr(R.value)==null&&(R.value=$,R.useIndexAsValue=!0),$>-1?s.splice($,0,R):s.push(R)}function a(A){if(r)return;b();const P=s.findIndex(R=>R.id===A);s.splice(P,1)}function b(){const A=s.find(P=>!P.disabled);A&&e.mandatory==="force"&&!c.value.length&&(c.value=[A.id])}gi(()=>{b()}),Or(()=>{r=!0}),Ub(()=>{for(let A=0;A<s.length;A++)s[A].useIndexAsValue&&(s[A].value=A)});function k(A,P){const R=s.find(B=>B.id===A);if(!(P&&(R!=null&&R.disabled)))if(e.multiple){const B=c.value.slice(),L=B.findIndex(j=>j===A),$=~L;if(P=P??!$,$&&e.mandatory&&B.length<=1||!$&&e.max!=null&&B.length+1>e.max)return;L<0&&P?B.push(A):L>=0&&!P&&B.splice(L,1),c.value=B}else{const B=c.value.includes(A);if(e.mandatory&&B||!B&&!P)return;c.value=P??!B?[A]:[]}}function S(A){if(e.multiple,c.value.length){const P=c.value[0],R=s.findIndex($=>$.id===P);let B=(R+A)%s.length,L=s[B];for(;L.disabled&&B!==R;)B=(B+A)%s.length,L=s[B];if(L.disabled)return;c.value=[s[B].id]}else{const P=s.find(R=>!R.disabled);P&&(c.value=[P.id])}}const T={register:d,unregister:a,selected:c,select:k,disabled:Me(()=>e.disabled),prev:()=>S(s.length-1),next:()=>S(1),isSelected:A=>c.value.includes(A),selectedClass:Me(()=>e.selectedClass),items:Me(()=>s),getItemIndex:A=>Tz(s,A)};return ri(n,T),T}function Tz(e,n){const r=OT(e,[n]);return r.length?e.findIndex(s=>s.id===r[0]):-1}function OT(e,n){const r=[];return n.forEach(s=>{const c=e.find(d=>zr(s,d.value)),f=e[s];(c==null?void 0:c.value)!=null?r.push(c.id):f!=null&&r.push(f.id)}),r}function Pz(e,n){const r=[];return n.forEach(s=>{const c=e.findIndex(f=>f.id===s);if(~c){const f=e[c];r.push(f.value!=null?f.value:c)}}),r}const g0=Symbol.for("vuetify:v-btn-toggle"),Iz=Ge({...BT(),...ic()},"VBtnToggle"),Az=ft()({name:"VBtnToggle",props:Iz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{isSelected:s,next:c,prev:f,select:d,selected:a}=Ml(e,g0);return bt(()=>{const b=Ny.filterProps(e);return F(Ny,ut({class:["v-btn-toggle",e.class]},b,{style:e.style}),{default:()=>{var k;return[(k=r.default)==null?void 0:k.call(r,{isSelected:s,next:c,prev:f,select:d,selected:a})]}})}),{next:c,prev:f,select:d}}}),Ez=["x-small","small","default","large","x-large"],Ks=Ge({size:{type:[String,Number],default:"default"}},"size");function Wd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return Qb(()=>{const r=e.size;let s,c;return gg(Ez,r)?s=`${n}--size-${r}`:r&&(c={width:qt(r),height:qt(r)}),{sizeClasses:s,sizeStyles:c}})}const Mz=Ge({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:an,opacity:[String,Number],...Kt(),...Ks(),...wn({tag:"i"}),...Hn()},"VIcon"),Jn=ft()({name:"VIcon",props:Mz(),setup(e,n){let{attrs:r,slots:s}=n;const c=Rt(),{themeClasses:f}=c0(),{iconData:d}=qL(()=>c.value||e.icon),{sizeClasses:a}=Wd(e),{textColorClasses:b,textColorStyles:k}=Br(()=>e.color);return bt(()=>{var A,P;const S=(A=s.default)==null?void 0:A.call(s);S&&(c.value=(P=YC(S).filter(R=>R.type===cm&&R.children&&typeof R.children=="string")[0])==null?void 0:P.children);const T=!!(r.onClick||r.onClickOnce);return F(d.value.component,{tag:e.tag,icon:d.value.icon,class:vt(["v-icon","notranslate",f.value,a.value,b.value,{"v-icon--clickable":T,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Bt([{"--v-icon-opacity":e.opacity},a.value?void 0:{fontSize:qt(e.size),height:qt(e.size),width:qt(e.size)},k.value,e.style]),role:T?"button":void 0,"aria-hidden":!T,tabindex:T?e.disabled?-1:0:void 0},{default:()=>[S]})}),{}}});function pm(e,n){const r=Xe(),s=Rt(!1);if(Yb){const c=new IntersectionObserver(f=>{s.value=!!f.find(d=>d.isIntersecting)},n);fr(()=>{c.disconnect()}),Ot(r,(f,d)=>{d&&(c.unobserve(d),s.value=!1),f&&c.observe(f)},{flush:"post"})}return{intersectionRef:r,isIntersecting:s}}const Dz=Ge({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Kt(),...Ks(),...wn({tag:"div"}),...Hn()},"VProgressCircular"),Gu=ft()({name:"VProgressCircular",props:Dz(),setup(e,n){let{slots:r}=n;const s=20,c=2*Math.PI*s,f=Xe(),{themeClasses:d}=Qn(e),{sizeClasses:a,sizeStyles:b}=Wd(e),{textColorClasses:k,textColorStyles:S}=Br(()=>e.color),{textColorClasses:T,textColorStyles:A}=Br(()=>e.bgColor),{intersectionRef:P,isIntersecting:R}=pm(),{resizeRef:B,contentRect:L}=vs(),$=Me(()=>ci(parseFloat(e.modelValue),0,100)),j=Me(()=>Number(e.width)),q=Me(()=>b.value?Number(e.size):L.value?L.value.width:Math.max(j.value,32)),H=Me(()=>s/(1-j.value/q.value)*2),ee=Me(()=>j.value/q.value*H.value),Q=Me(()=>qt((100-$.value)/100*c));return Li(()=>{P.value=f.value,B.value=f.value}),bt(()=>F(e.tag,{ref:f,class:vt(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":R.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},d.value,a.value,k.value,e.class]),style:Bt([b.value,S.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:$.value},{default:()=>[Y("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${H.value} ${H.value}`},[Y("circle",{class:vt(["v-progress-circular__underlay",T.value]),style:Bt(A.value),fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":ee.value,"stroke-dasharray":c,"stroke-dashoffset":0},null),Y("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":ee.value,"stroke-dasharray":c,"stroke-dashoffset":Q.value},null)]),r.default&&Y("div",{class:"v-progress-circular__content"},[r.default({value:$.value})])]})),{}}}),uS={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Eo=Ge({location:String},"location");function sc(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2?arguments[2]:void 0;const{isRtl:s}=tr();return{locationStyles:te(()=>{if(!e.location)return{};const{side:f,align:d}=Ay(e.location.split(" ").length>1?e.location:`${e.location} center`,s.value);function a(k){return r?r(k):0}const b={};return f!=="center"&&(n?b[uS[f]]=`calc(100% - ${a(f)}px)`:b[f]=0),d!=="center"?n?b[uS[d]]=`calc(100% - ${a(d)}px)`:b[d]=0:(f==="center"?b.top=b.left="50%":b[{top:"left",bottom:"left",left:"top",right:"top"}[f]]="50%",b.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[f]),b})}}const Rz=Ge({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Kt(),...Eo({location:"top"}),..._i(),...wn(),...Hn()},"VProgressLinear"),Hg=ft()({name:"VProgressLinear",props:Rz(),emits:{"update:modelValue":e=>!0},setup(e,n){var ve;let{slots:r}=n;const s=nn(e,"modelValue"),{isRtl:c,rtlClasses:f}=tr(),{themeClasses:d}=Qn(e),{locationStyles:a}=sc(e),{textColorClasses:b,textColorStyles:k}=Br(()=>e.color),{backgroundColorClasses:S,backgroundColorStyles:T}=ti(()=>e.bgColor||e.color),{backgroundColorClasses:A,backgroundColorStyles:P}=ti(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:R,backgroundColorStyles:B}=ti(()=>e.color),{roundedClasses:L}=Vi(e),{intersectionRef:$,isIntersecting:j}=pm(),q=te(()=>parseFloat(e.max)),H=te(()=>parseFloat(e.height)),ee=te(()=>ci(parseFloat(e.bufferValue)/q.value*100,0,100)),Q=te(()=>ci(parseFloat(s.value)/q.value*100,0,100)),oe=te(()=>c.value!==e.reverse),le=te(()=>e.indeterminate?"fade-transition":"slide-x-transition"),ce=Xn&&((ve=window.matchMedia)==null?void 0:ve.call(window,"(forced-colors: active)").matches);function he(ie){if(!$.value)return;const{left:be,right:Be,width:De}=$.value.getBoundingClientRect(),Fe=oe.value?De-ie.clientX+(Be-De):ie.clientX-be;s.value=Math.round(Fe/De*q.value)}return bt(()=>F(e.tag,{ref:$,class:vt(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&j.value,"v-progress-linear--reverse":oe.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},L.value,d.value,f.value,e.class]),style:Bt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?qt(H.value):0,"--v-progress-linear-height":qt(H.value),...e.absolute?a.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(s.value),q.value),onClick:e.clickable&&he},{default:()=>[e.stream&&Y("div",{key:"stream",class:vt(["v-progress-linear__stream",b.value]),style:{...k.value,[oe.value?"left":"right"]:qt(-H.value),borderTop:`${qt(H.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${qt(H.value/4)})`,width:qt(100-ee.value,"%"),"--v-progress-linear-stream-to":qt(H.value*(oe.value?1:-1))}},null),Y("div",{class:vt(["v-progress-linear__background",ce?void 0:S.value]),style:Bt([T.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),Y("div",{class:vt(["v-progress-linear__buffer",ce?void 0:A.value]),style:Bt([P.value,{opacity:parseFloat(e.bufferOpacity),width:qt(ee.value,"%")}])},null),F(Cl,{name:le.value},{default:()=>[e.indeterminate?Y("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(ie=>Y("div",{key:ie,class:vt(["v-progress-linear__indeterminate",ie,ce?void 0:R.value]),style:Bt(B.value)},null))]):Y("div",{class:vt(["v-progress-linear__determinate",ce?void 0:R.value]),style:Bt([B.value,{width:qt(Q.value,"%")}])},null)]}),r.default&&Y("div",{class:"v-progress-linear__content"},[r.default({value:Q.value,buffer:ee.value})])]})),{}}}),Wg=Ge({loading:[Boolean,String]},"loader");function gm(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{loaderClasses:Me(()=>({[`${n}--loading`]:e.loading}))}}function vm(e,n){var s;let{slots:r}=n;return Y("div",{class:vt(`${e.name}__loader`)},[((s=r.default)==null?void 0:s.call(r,{color:e.color,isActive:e.active}))||F(Hg,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const Lz=["static","relative","fixed","absolute","sticky"],Zd=Ge({position:{type:String,validator:e=>Lz.includes(e)}},"position");function Kd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();return{positionClasses:Me(()=>e.position?`${n}--${e.position}`:void 0)}}function zz(){const e=ji("useRoute");return te(()=>{var n;return(n=e==null?void 0:e.proxy)==null?void 0:n.$route})}function FT(){var e,n;return(n=(e=ji("useRouter"))==null?void 0:e.proxy)==null?void 0:n.$router}function _m(e,n){var S,T;const r=EM("RouterLink"),s=Me(()=>!!(e.href||e.to)),c=te(()=>(s==null?void 0:s.value)||R1(n,"click")||R1(e,"click"));if(typeof r=="string"||!("useLink"in r)){const A=Me(()=>e.href);return{isLink:s,isClickable:c,href:A,linkProps:Sr({href:A})}}const f=r.useLink({to:Me(()=>e.to||""),replace:Me(()=>e.replace)}),d=te(()=>e.to?f:void 0),a=zz(),b=te(()=>{var A,P,R;return d.value?e.exact?a.value?((R=d.value.isExactActive)==null?void 0:R.value)&&zr(d.value.route.value.query,a.value.query):((P=d.value.isExactActive)==null?void 0:P.value)??!1:((A=d.value.isActive)==null?void 0:A.value)??!1:!1}),k=te(()=>{var A;return e.to?(A=d.value)==null?void 0:A.route.value.href:e.href});return{isLink:s,isClickable:c,isActive:b,route:(S=d.value)==null?void 0:S.route,navigate:(T=d.value)==null?void 0:T.navigate,href:k,linkProps:Sr({href:k,"aria-current":Me(()=>b.value?"page":void 0)})}}const ym=Ge({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let K_=!1;function Vz(e,n){let r=!1,s,c;Xn&&(e!=null&&e.beforeEach)&&(zn(()=>{window.addEventListener("popstate",f),s=e.beforeEach((d,a,b)=>{K_?r?n(b):b():setTimeout(()=>r?n(b):b()),K_=!0}),c=e==null?void 0:e.afterEach(()=>{K_=!1})}),fr(()=>{window.removeEventListener("popstate",f),s==null||s(),c==null||c()}));function f(d){var a;(a=d.state)!=null&&a.replaced||(r=!0,setTimeout(()=>r=!1))}}function Bz(e,n){Ot(()=>{var r;return(r=e.isActive)==null?void 0:r.value},r=>{e.isLink.value&&r!=null&&n&&zn(()=>{n(r)})},{immediate:!0})}const Uy=Symbol("rippleStop"),Oz=80;function cS(e,n){e.style.transform=n,e.style.webkitTransform=n}function Gy(e){return e.constructor.name==="TouchEvent"}function $T(e){return e.constructor.name==="KeyboardEvent"}const Fz=function(e,n){var T;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=0,c=0;if(!$T(e)){const A=n.getBoundingClientRect(),P=Gy(e)?e.touches[e.touches.length-1]:e;s=P.clientX-A.left,c=P.clientY-A.top}let f=0,d=.3;(T=n._ripple)!=null&&T.circle?(d=.15,f=n.clientWidth/2,f=r.center?f:f+Math.sqrt((s-f)**2+(c-f)**2)/4):f=Math.sqrt(n.clientWidth**2+n.clientHeight**2)/2;const a=`${(n.clientWidth-f*2)/2}px`,b=`${(n.clientHeight-f*2)/2}px`,k=r.center?a:`${s-f}px`,S=r.center?b:`${c-f}px`;return{radius:f,scale:d,x:k,y:S,centerX:a,centerY:b}},wg={show(e,n){var P;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((P=n==null?void 0:n._ripple)!=null&&P.enabled))return;const s=document.createElement("span"),c=document.createElement("span");s.appendChild(c),s.className="v-ripple__container",r.class&&(s.className+=` ${r.class}`);const{radius:f,scale:d,x:a,y:b,centerX:k,centerY:S}=Fz(e,n,r),T=`${f*2}px`;c.className="v-ripple__animation",c.style.width=T,c.style.height=T,n.appendChild(s);const A=window.getComputedStyle(n);A&&A.position==="static"&&(n.style.position="relative",n.dataset.previousPosition="static"),c.classList.add("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--visible"),cS(c,`translate(${a}, ${b}) scale3d(${d},${d},${d})`),c.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{c.classList.remove("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--in"),cS(c,`translate(${k}, ${S}) scale3d(1,1,1)`)})})},hide(e){var f;if(!((f=e==null?void 0:e._ripple)!=null&&f.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const r=n[n.length-1];if(r.dataset.isHiding)return;r.dataset.isHiding="true";const s=performance.now()-Number(r.dataset.activated),c=Math.max(250-s,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),setTimeout(()=>{var a;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((a=r.parentNode)==null?void 0:a.parentNode)===e&&e.removeChild(r.parentNode)},300)},c)}};function jT(e){return typeof e>"u"||!!e}function Yf(e){const n={},r=e.currentTarget;if(!(!(r!=null&&r._ripple)||r._ripple.touched||e[Uy])){if(e[Uy]=!0,Gy(e))r._ripple.touched=!0,r._ripple.isTouch=!0;else if(r._ripple.isTouch)return;if(n.center=r._ripple.centered||$T(e),r._ripple.class&&(n.class=r._ripple.class),Gy(e)){if(r._ripple.showTimerCommit)return;r._ripple.showTimerCommit=()=>{wg.show(e,r,n)},r._ripple.showTimer=window.setTimeout(()=>{var s;(s=r==null?void 0:r._ripple)!=null&&s.showTimerCommit&&(r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null)},Oz)}else wg.show(e,r,n)}}function dS(e){e[Uy]=!0}function Va(e){const n=e.currentTarget;if(n!=null&&n._ripple){if(window.clearTimeout(n._ripple.showTimer),e.type==="touchend"&&n._ripple.showTimerCommit){n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null,n._ripple.showTimer=window.setTimeout(()=>{Va(e)});return}window.setTimeout(()=>{n._ripple&&(n._ripple.touched=!1)}),wg.hide(n)}}function NT(e){const n=e.currentTarget;n!=null&&n._ripple&&(n._ripple.showTimerCommit&&(n._ripple.showTimerCommit=null),window.clearTimeout(n._ripple.showTimer))}let Xf=!1;function hS(e,n){!Xf&&n.includes(e.keyCode)&&(Xf=!0,Yf(e))}function UT(e){Xf=!1,Va(e)}function GT(e){Xf&&(Xf=!1,Va(e))}function qT(e,n,r){const{value:s,modifiers:c}=n,f=jT(s);f||wg.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=f,e._ripple.centered=c.center,e._ripple.circle=c.circle;const d=Gf(s)?s:{};d.class&&(e._ripple.class=d.class);const a=d.keys??[ky.enter,ky.space];if(e._ripple.keyDownHandler=b=>hS(b,a),f&&!r){if(c.stop){e.addEventListener("touchstart",dS,{passive:!0}),e.addEventListener("mousedown",dS);return}e.addEventListener("touchstart",Yf,{passive:!0}),e.addEventListener("touchend",Va,{passive:!0}),e.addEventListener("touchmove",NT,{passive:!0}),e.addEventListener("touchcancel",Va),e.addEventListener("mousedown",Yf),e.addEventListener("mouseup",Va),e.addEventListener("mouseleave",Va),e.addEventListener("keydown",b=>hS(b,a)),e.addEventListener("keyup",UT),e.addEventListener("blur",GT),e.addEventListener("dragstart",Va,{passive:!0})}else!f&&r&&HT(e)}function HT(e){var n;e.removeEventListener("mousedown",Yf),e.removeEventListener("touchstart",Yf),e.removeEventListener("touchend",Va),e.removeEventListener("touchmove",NT),e.removeEventListener("touchcancel",Va),e.removeEventListener("mouseup",Va),e.removeEventListener("mouseleave",Va),(n=e._ripple)!=null&&n.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",UT),e.removeEventListener("dragstart",Va),e.removeEventListener("blur",GT)}function $z(e,n){qT(e,n,!1)}function jz(e){HT(e),delete e._ripple}function Nz(e,n){if(n.value===n.oldValue)return;const r=jT(n.oldValue);qT(e,n,r)}const aa={mounted:$z,unmounted:jz,updated:Nz},Zg=Ge({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:g0},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:an,appendIcon:an,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...ya(),...Kt(),...mr(),...Zi(),...nr(),...rc(),...Wg(),...Eo(),...Zd(),..._i(),...ym(),...Ks(),...wn({tag:"button"}),...Hn(),...es({variant:"elevated"})},"VBtn"),Ln=ft()({name:"VBtn",props:Zg(),emits:{"group:selected":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Qn(e),{borderClasses:f}=Pa(e),{densityClasses:d}=sa(e),{dimensionStyles:a}=Ki(e),{elevationClasses:b}=Tr(e),{loaderClasses:k}=gm(e),{locationStyles:S}=sc(e),{positionClasses:T}=Kd(e),{roundedClasses:A}=Vi(e),{sizeClasses:P,sizeStyles:R}=Wd(e),B=ac(e,e.symbol,!1),L=_m(e,r),$=te(()=>{var ve;return e.active!==void 0?e.active:L.isLink.value?(ve=L.isActive)==null?void 0:ve.value:B==null?void 0:B.isSelected.value}),j=Me(()=>$.value?e.activeColor??e.color:e.color),q=te(()=>{var ie,be;return{color:(B==null?void 0:B.isSelected.value)&&(!L.isLink.value||((ie=L.isActive)==null?void 0:ie.value))||!B||((be=L.isActive)==null?void 0:be.value)?j.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:H,colorStyles:ee,variantClasses:Q}=nc(q),oe=te(()=>(B==null?void 0:B.disabled.value)||e.disabled),le=Me(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),ce=te(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function he(ve){var ie;oe.value||L.isLink.value&&(ve.metaKey||ve.ctrlKey||ve.shiftKey||ve.button!==0||r.target==="_blank")||((ie=L.navigate)==null||ie.call(L,ve),B==null||B.toggle())}return Bz(L,B==null?void 0:B.select),bt(()=>{const ve=L.isLink.value?"a":e.tag,ie=!!(e.prependIcon||s.prepend),be=!!(e.appendIcon||s.append),Be=!!(e.icon&&e.icon!==!0);return Ri(F(ve,ut({type:ve==="a"?void 0:"button",class:["v-btn",B==null?void 0:B.selectedClass.value,{"v-btn--active":$.value,"v-btn--block":e.block,"v-btn--disabled":oe.value,"v-btn--elevated":le.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},c.value,f.value,H.value,d.value,b.value,k.value,T.value,A.value,P.value,Q.value,e.class],style:[ee.value,a.value,S.value,R.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:oe.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:he,value:ce.value},L.linkProps),{default:()=>{var De;return[El(!0,"v-btn"),!e.icon&&ie&&Y("span",{key:"prepend",class:"v-btn__prepend"},[s.prepend?F(kn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},s.prepend):F(Jn,{key:"prepend-icon",icon:e.prependIcon},null)]),Y("span",{class:"v-btn__content","data-no-activator":""},[!s.default&&Be?F(Jn,{key:"content-icon",icon:e.icon},null):F(kn,{key:"content-defaults",disabled:!Be,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var Fe;return[((Fe=s.default)==null?void 0:Fe.call(s))??yn(e.text)]}})]),!e.icon&&be&&Y("span",{key:"append",class:"v-btn__append"},[s.append?F(kn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},s.append):F(Jn,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&Y("span",{key:"loader",class:"v-btn__loader"},[((De=s.loader)==null?void 0:De.call(s))??F(Gu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[aa,!oe.value&&e.ripple,"",{center:!!e.icon}]])}),{group:B}}}),Uz=Ge({...Zg({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Gz=ft()({name:"VAppBarNavIcon",props:Uz(),setup(e,n){let{slots:r}=n;return bt(()=>F(Ln,ut(e,{class:["v-app-bar-nav-icon"]}),r)),{}}}),qz=ft()({name:"VAppBarTitle",props:ET(),setup(e,n){let{slots:r}=n;return bt(()=>F(d0,ut(e,{class:"v-app-bar-title"}),r)),{}}}),WT=Ao("v-alert-title"),Hz=Ge({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Wz(e,n){return{iconSize:te(()=>{const s=new Map(e.iconSizes),c=e.iconSize??n()??"default";return s.has(c)?s.get(c):c})}}const Zz=["success","info","warning","error"],Kz=Ge({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:an,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Zz.includes(e)},...Kt(),...mr(),...Zi(),...nr(),...Hz(),...Eo(),...Zd(),..._i(),...wn(),...Hn(),...es({variant:"flat"})},"VAlert"),Yz=ft()({name:"VAlert",props:Kz(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=nn(e,"modelValue"),f=Me(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:d}=Wz(e,()=>e.prominent?44:28),{themeClasses:a}=Qn(e),{colorClasses:b,colorStyles:k,variantClasses:S}=nc(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:T}=sa(e),{dimensionStyles:A}=Ki(e),{elevationClasses:P}=Tr(e),{locationStyles:R}=sc(e),{positionClasses:B}=Kd(e),{roundedClasses:L}=Vi(e),{textColorClasses:$,textColorStyles:j}=Br(()=>e.borderColor),{t:q}=vi(),H=Me(()=>({"aria-label":q(e.closeLabel),onClick(ee){c.value=!1,r("click:close",ee)}}));return()=>{const ee=!!(s.prepend||f.value),Q=!!(s.title||e.title),oe=!!(s.close||e.closable),le={density:e.density,icon:f.value,size:d.value};return c.value&&F(e.tag,{class:vt(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},a.value,b.value,T.value,P.value,B.value,L.value,S.value,e.class]),style:Bt([k.value,A.value,R.value,e.style]),role:"alert"},{default:()=>{var ce,he;return[El(!1,"v-alert"),e.border&&Y("div",{key:"border",class:vt(["v-alert__border",$.value]),style:Bt(j.value)},null),ee&&Y("div",{key:"prepend",class:"v-alert__prepend"},[s.prepend?F(kn,{key:"prepend-defaults",disabled:!f.value,defaults:{VIcon:{...le}}},s.prepend):F(Jn,ut({key:"prepend-icon"},le),null)]),Y("div",{class:"v-alert__content"},[Q&&F(WT,{key:"title"},{default:()=>{var ve;return[((ve=s.title)==null?void 0:ve.call(s))??e.title]}}),((ce=s.text)==null?void 0:ce.call(s))??e.text,(he=s.default)==null?void 0:he.call(s)]),s.append&&Y("div",{key:"append",class:"v-alert__append"},[s.append()]),oe&&Y("div",{key:"close",class:"v-alert__close"},[s.close?F(kn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var ve;return[(ve=s.close)==null?void 0:ve.call(s,{props:H.value})]}}):F(Ln,ut({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},H.value),null)])]}})}}}),Xz=Ge({start:Boolean,end:Boolean,icon:an,image:String,text:String,...ya(),...Kt(),...mr(),..._i(),...Ks(),...wn(),...Hn(),...es({variant:"flat"})},"VAvatar"),Ja=ft()({name:"VAvatar",props:Xz(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{borderClasses:c}=Pa(e),{colorClasses:f,colorStyles:d,variantClasses:a}=nc(e),{densityClasses:b}=sa(e),{roundedClasses:k}=Vi(e),{sizeClasses:S,sizeStyles:T}=Wd(e);return bt(()=>F(e.tag,{class:vt(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},s.value,c.value,f.value,b.value,k.value,S.value,a.value,e.class]),style:Bt([d.value,T.value,e.style])},{default:()=>[r.default?F(kn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[r.default()]}):e.image?F(Co,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?F(Jn,{key:"icon",icon:e.icon},null):e.text,El(!1,"v-avatar")]})),{}}}),Jz=Ge({text:String,onClick:Vr(),...Kt(),...Hn()},"VLabel"),Yd=ft()({name:"VLabel",props:Jz(),setup(e,n){let{slots:r}=n;return bt(()=>{var s;return Y("label",{class:vt(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Bt(e.style),onClick:e.onClick},[e.text,(s=r.default)==null?void 0:s.call(r)])}),{}}}),ZT=Symbol.for("vuetify:selection-control-group"),v0=Ge({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:an,trueIcon:an,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:zr},...Kt(),...mr(),...Hn()},"SelectionControlGroup"),Qz=Ge({...v0({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),KT=ft()({name:"VSelectionControlGroup",props:Qz(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),c=_a(),f=Me(()=>e.id||`v-selection-control-group-${c}`),d=Me(()=>e.name||f.value),a=new Set;return ri(ZT,{modelValue:s,forceUpdate:()=>{a.forEach(b=>b())},onForceUpdate:b=>{a.add(b),fr(()=>{a.delete(b)})}}),zi({[e.defaultsTarget]:{color:Me(()=>e.color),disabled:Me(()=>e.disabled),density:Me(()=>e.density),error:Me(()=>e.error),inline:Me(()=>e.inline),modelValue:s,multiple:Me(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),name:d,falseIcon:Me(()=>e.falseIcon),trueIcon:Me(()=>e.trueIcon),readonly:Me(()=>e.readonly),ripple:Me(()=>e.ripple),type:Me(()=>e.type),valueComparator:Me(()=>e.valueComparator)}}),bt(()=>{var b;return Y("div",{class:vt(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Bt(e.style),role:e.type==="radio"?"radiogroup":void 0},[(b=r.default)==null?void 0:b.call(r)])}),{}}}),Kg=Ge({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Kt(),...v0()},"VSelectionControl");function eV(e){const n=xn(ZT,void 0),{densityClasses:r}=sa(e),s=nn(e,"modelValue"),c=te(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),f=te(()=>e.falseValue!==void 0?e.falseValue:!1),d=te(()=>!!e.multiple||e.multiple==null&&Array.isArray(s.value)),a=te({get(){const P=n?n.modelValue.value:s.value;return d.value?Di(P).some(R=>e.valueComparator(R,c.value)):e.valueComparator(P,c.value)},set(P){if(e.readonly)return;const R=P?c.value:f.value;let B=R;d.value&&(B=P?[...Di(s.value),R]:Di(s.value).filter(L=>!e.valueComparator(L,c.value))),n?n.modelValue.value=B:s.value=B}}),{textColorClasses:b,textColorStyles:k}=Br(()=>{if(!(e.error||e.disabled))return a.value?e.color:e.baseColor}),{backgroundColorClasses:S,backgroundColorStyles:T}=ti(()=>a.value&&!e.error&&!e.disabled?e.color:e.baseColor),A=te(()=>a.value?e.trueIcon:e.falseIcon);return{group:n,densityClasses:r,trueValue:c,falseValue:f,model:a,textColorClasses:b,textColorStyles:k,backgroundColorClasses:S,backgroundColorStyles:T,icon:A}}const Tl=ft()({name:"VSelectionControl",directives:{vRipple:aa},inheritAttrs:!1,props:Kg(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{group:c,densityClasses:f,icon:d,model:a,textColorClasses:b,textColorStyles:k,backgroundColorClasses:S,backgroundColorStyles:T,trueValue:A}=eV(e),P=_a(),R=Rt(!1),B=Rt(!1),L=Xe(),$=Me(()=>e.id||`input-${P}`),j=Me(()=>!e.disabled&&!e.readonly);c==null||c.onForceUpdate(()=>{L.value&&(L.value.checked=a.value)});function q(oe){j.value&&(R.value=!0,Ld(oe.target,":focus-visible")!==!1&&(B.value=!0))}function H(){R.value=!1,B.value=!1}function ee(oe){oe.stopPropagation()}function Q(oe){if(!j.value){L.value&&(L.value.checked=a.value);return}e.readonly&&c&&zn(()=>c.forceUpdate()),a.value=oe.target.checked}return bt(()=>{var ve,ie;const oe=s.label?s.label({label:e.label,props:{for:$.value}}):e.label,[le,ce]=Al(r),he=Y("input",ut({ref:L,checked:a.value,disabled:!!e.disabled,id:$.value,onBlur:H,onFocus:q,onInput:Q,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:A.value,name:e.name,"aria-checked":e.type==="checkbox"?a.value:void 0},ce),null);return Y("div",ut({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":R.value,"v-selection-control--focus-visible":B.value,"v-selection-control--inline":e.inline},f.value,e.class]},le,{style:e.style}),[Y("div",{class:vt(["v-selection-control__wrapper",b.value]),style:Bt(k.value)},[(ve=s.default)==null?void 0:ve.call(s,{backgroundColorClasses:S,backgroundColorStyles:T}),Ri(Y("div",{class:vt(["v-selection-control__input"])},[((ie=s.input)==null?void 0:ie.call(s,{model:a,textColorClasses:b,textColorStyles:k,backgroundColorClasses:S,backgroundColorStyles:T,inputNode:he,icon:d.value,props:{onFocus:q,onBlur:H,id:$.value}}))??Y(Ht,null,[d.value&&F(Jn,{key:"icon",icon:d.value},null),he])]),[[aa,e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),oe&&F(Yd,{for:$.value,onClick:ee},{default:()=>[oe]})])}),{isFocused:R,input:L}}}),YT=Ge({indeterminate:Boolean,indeterminateIcon:{type:an,default:"$checkboxIndeterminate"},...Kg({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),qs=ft()({name:"VCheckboxBtn",props:YT(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"indeterminate"),c=nn(e,"modelValue");function f(b){s.value&&(s.value=!1)}const d=Me(()=>s.value?e.indeterminateIcon:e.falseIcon),a=Me(()=>s.value?e.indeterminateIcon:e.trueIcon);return bt(()=>{const b=di(Tl.filterProps(e),["modelValue"]);return F(Tl,ut(b,{modelValue:c.value,"onUpdate:modelValue":[k=>c.value=k,f],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:d.value,trueIcon:a.value,"aria-checked":s.value?"mixed":void 0}),r)}),{}}});function XT(e){const{t:n}=vi();function r(s){let{name:c,color:f,...d}=s;const a={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[c],b=e[`onClick:${c}`];function k(T){T.key!=="Enter"&&T.key!==" "||(T.preventDefault(),T.stopPropagation(),$g(b,new PointerEvent("click",T)))}const S=b&&a?n(`$vuetify.input.${a}`,e.label??""):void 0;return F(Jn,ut({icon:e[`${c}Icon`],"aria-label":S,onClick:b,onKeydown:k,color:f},d),null)}return{InputIcon:r}}const tV=Ge({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Kt(),...ws({transition:{component:f0,leaveAbsolute:!0,group:!0}})},"VMessages"),JT=ft()({name:"VMessages",props:tV(),setup(e,n){let{slots:r}=n;const s=te(()=>Di(e.messages)),{textColorClasses:c,textColorStyles:f}=Br(()=>e.color);return bt(()=>F(ia,{transition:e.transition,tag:"div",class:vt(["v-messages",c.value,e.class]),style:Bt([f.value,e.style])},{default:()=>[e.active&&s.value.map((d,a)=>Y("div",{class:"v-messages__message",key:`${a}-${s.value}`},[r.message?r.message({message:d}):d]))]})),{}}}),bm=Ge({focused:Boolean,"onUpdate:focused":Vr()},"focus");function Mo(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs();const r=nn(e,"focused"),s=Me(()=>({[`${n}--focused`]:r.value}));function c(){r.value=!0}function f(){r.value=!1}return{focusClasses:s,isFocused:r,focus:c,blur:f}}const QT=Symbol.for("vuetify:form"),nV=Ge({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function iV(e){const n=nn(e,"modelValue"),r=Me(()=>e.disabled),s=Me(()=>e.readonly),c=Rt(!1),f=Xe([]),d=Xe([]);async function a(){const S=[];let T=!0;d.value=[],c.value=!0;for(const A of f.value){const P=await A.validate();if(P.length>0&&(T=!1,S.push({id:A.id,errorMessages:P})),!T&&e.fastFail)break}return d.value=S,c.value=!1,{valid:T,errors:d.value}}function b(){f.value.forEach(S=>S.reset())}function k(){f.value.forEach(S=>S.resetValidation())}return Ot(f,()=>{let S=0,T=0;const A=[];for(const P of f.value)P.isValid===!1?(T++,A.push({id:P.id,errorMessages:P.errorMessages})):P.isValid===!0&&S++;d.value=A,n.value=T>0?!1:S===f.value.length?!0:null},{deep:!0,flush:"post"}),ri(QT,{register:S=>{let{id:T,vm:A,validate:P,reset:R,resetValidation:B}=S;f.value.some(L=>L.id===T),f.value.push({id:T,validate:P,reset:R,resetValidation:B,vm:qk(A),isValid:null,errorMessages:[]})},unregister:S=>{f.value=f.value.filter(T=>T.id!==S)},update:(S,T,A)=>{const P=f.value.find(R=>R.id===S);P&&(P.isValid=T,P.errorMessages=A)},isDisabled:r,isReadonly:s,isValidating:c,isValid:n,items:f,validateOn:Me(()=>e.validateOn)}),{errors:d,isDisabled:r,isReadonly:s,isValidating:c,isValid:n,items:f,validate:a,reset:b,resetValidation:k}}function xm(e){const n=xn(QT,null);return{...n,isReadonly:te(()=>!!((e==null?void 0:e.readonly)??(n==null?void 0:n.isReadonly.value))),isDisabled:te(()=>!!((e==null?void 0:e.disabled)??(n==null?void 0:n.isDisabled.value)))}}const rV=Symbol.for("vuetify:rules");function aV(e){const n=xn(rV,null);return n?n(e):Me(e)}const eP=Ge({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...bm()},"validation");function tP(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zs(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_a();const s=nn(e,"modelValue"),c=te(()=>e.validationValue===void 0?s.value:e.validationValue),f=xm(e),d=aV(()=>e.rules),a=Xe([]),b=Rt(!0),k=te(()=>!!(Di(s.value===""?null:s.value).length||Di(c.value===""?null:c.value).length)),S=te(()=>{var H;return(H=e.errorMessages)!=null&&H.length?Di(e.errorMessages).concat(a.value).slice(0,Math.max(0,Number(e.maxErrors))):a.value}),T=te(()=>{var Q;let H=(e.validateOn??((Q=f.validateOn)==null?void 0:Q.value))||"input";H==="lazy"&&(H="input lazy"),H==="eager"&&(H="input eager");const ee=new Set((H==null?void 0:H.split(" "))??[]);return{input:ee.has("input"),blur:ee.has("blur")||ee.has("input")||ee.has("invalid-input"),invalidInput:ee.has("invalid-input"),lazy:ee.has("lazy"),eager:ee.has("eager")}}),A=te(()=>{var H;return e.error||(H=e.errorMessages)!=null&&H.length?!1:e.rules.length?b.value?a.value.length||T.value.lazy?null:!0:!a.value.length:!0}),P=Rt(!1),R=te(()=>({[`${n}--error`]:A.value===!1,[`${n}--dirty`]:k.value,[`${n}--disabled`]:f.isDisabled.value,[`${n}--readonly`]:f.isReadonly.value})),B=ji("validation"),L=te(()=>e.name??kr(r));Hd(()=>{var H;(H=f.register)==null||H.call(f,{id:L.value,vm:B,validate:q,reset:$,resetValidation:j})}),Or(()=>{var H;(H=f.unregister)==null||H.call(f,L.value)}),gi(async()=>{var H;T.value.lazy||await q(!T.value.eager),(H=f.update)==null||H.call(f,L.value,A.value,S.value)}),ra(()=>T.value.input||T.value.invalidInput&&A.value===!1,()=>{Ot(c,()=>{if(c.value!=null)q();else if(e.focused){const H=Ot(()=>e.focused,ee=>{ee||q(),H()})}})}),ra(()=>T.value.blur,()=>{Ot(()=>e.focused,H=>{H||q()})}),Ot([A,S],()=>{var H;(H=f.update)==null||H.call(f,L.value,A.value,S.value)});async function $(){s.value=null,await zn(),await j()}async function j(){b.value=!0,T.value.lazy?a.value=[]:await q(!T.value.eager)}async function q(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ee=[];P.value=!0;for(const Q of d.value){if(ee.length>=Number(e.maxErrors??1))break;const le=await(typeof Q=="function"?Q:()=>Q)(c.value);if(le!==!0){if(le!==!1&&typeof le!="string"){console.warn(`${le} is not a valid value. Rule functions must return boolean true or a string.`);continue}ee.push(le||"")}}return a.value=ee,P.value=!1,b.value=H,a.value}return{errorMessages:S,isDirty:k,isDisabled:f.isDisabled,isReadonly:f.isReadonly,isPristine:b,isValid:A,isValidating:P,reset:$,resetValidation:j,validate:q,validationClasses:R}}const Do=Ge({id:String,appendIcon:an,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:an,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Vr(),"onClick:append":Vr(),...Kt(),...mr(),...Io(Zi(),["maxWidth","minWidth","width"]),...Hn(),...eP()},"VInput"),Wr=ft()({name:"VInput",props:{...Do()},emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s,emit:c}=n;const{densityClasses:f}=sa(e),{dimensionStyles:d}=Ki(e),{themeClasses:a}=Qn(e),{rtlClasses:b}=tr(),{InputIcon:k}=XT(e),S=_a(),T=te(()=>e.id||`input-${S}`),A=te(()=>`${T.value}-messages`),{errorMessages:P,isDirty:R,isDisabled:B,isReadonly:L,isPristine:$,isValid:j,isValidating:q,reset:H,resetValidation:ee,validate:Q,validationClasses:oe}=tP(e,"v-input",T),le=te(()=>({id:T,messagesId:A,isDirty:R,isDisabled:B,isReadonly:L,isPristine:$,isValid:j,isValidating:q,reset:H,resetValidation:ee,validate:Q})),ce=Me(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),he=Me(()=>{if(e.iconColor)return e.iconColor===!0?ce.value:e.iconColor}),ve=te(()=>{var ie;return(ie=e.errorMessages)!=null&&ie.length||!$.value&&P.value.length?P.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return bt(()=>{var Fe,Ze,mt,pt;const ie=!!(s.prepend||e.prependIcon),be=!!(s.append||e.appendIcon),Be=ve.value.length>0,De=!e.hideDetails||e.hideDetails==="auto"&&(Be||!!s.details);return Y("div",{class:vt(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},f.value,a.value,b.value,oe.value,e.class]),style:Bt([d.value,e.style])},[ie&&Y("div",{key:"prepend",class:"v-input__prepend"},[(Fe=s.prepend)==null?void 0:Fe.call(s,le.value),e.prependIcon&&F(k,{key:"prepend-icon",name:"prepend",color:he.value},null)]),s.default&&Y("div",{class:"v-input__control"},[(Ze=s.default)==null?void 0:Ze.call(s,le.value)]),be&&Y("div",{key:"append",class:"v-input__append"},[e.appendIcon&&F(k,{key:"append-icon",name:"append",color:he.value},null),(mt=s.append)==null?void 0:mt.call(s,le.value)]),De&&Y("div",{id:A.value,class:"v-input__details",role:"alert","aria-live":"polite"},[F(JT,{active:Be,messages:ve.value},{message:s.message}),(pt=s.details)==null?void 0:pt.call(s,le.value)])])}),{reset:H,resetValidation:ee,validate:Q,isValid:j,errorMessages:P}}}),Y_=Symbol("Forwarded refs");function X_(e,n){let r=e;for(;r;){const s=Reflect.getOwnPropertyDescriptor(r,n);if(s)return s;r=Object.getPrototypeOf(r)}}function Pr(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e[Y_]=r,new Proxy(e,{get(c,f){if(Reflect.has(c,f))return Reflect.get(c,f);if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const d of r)if(d.value&&Reflect.has(d.value,f)){const a=Reflect.get(d.value,f);return typeof a=="function"?a.bind(d.value):a}}},has(c,f){if(Reflect.has(c,f))return!0;if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const d of r)if(d.value&&Reflect.has(d.value,f))return!0;return!1},set(c,f,d){if(Reflect.has(c,f))return Reflect.set(c,f,d);if(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))return!1;for(const a of r)if(a.value&&Reflect.has(a.value,f))return Reflect.set(a.value,f,d);return!1},getOwnPropertyDescriptor(c,f){var a;const d=Reflect.getOwnPropertyDescriptor(c,f);if(d)return d;if(!(typeof f=="symbol"||f.startsWith("$")||f.startsWith("__"))){for(const b of r){if(!b.value)continue;const k=X_(b.value,f)??("_"in b.value?X_((a=b.value._)==null?void 0:a.setupState,f):void 0);if(k)return k}for(const b of r){const k=b.value&&b.value[Y_];if(!k)continue;const S=k.slice();for(;S.length;){const T=S.shift(),A=X_(T.value,f);if(A)return A;const P=T.value&&T.value[Y_];P&&S.push(...P)}}}}})}const sV=Ge({...Do(),...di(YT(),["inline"])},"VCheckbox"),oV=ft()({name:"VCheckbox",inheritAttrs:!1,props:sV(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=nn(e,"modelValue"),{isFocused:f,focus:d,blur:a}=Mo(e),b=Xe(),k=_a();return bt(()=>{const[S,T]=Al(r),A=Wr.filterProps(e),P=qs.filterProps(e);return F(Wr,ut({ref:b,class:["v-checkbox",e.class]},S,A,{modelValue:c.value,"onUpdate:modelValue":R=>c.value=R,id:e.id||`checkbox-${k}`,focused:f.value,style:e.style}),{...s,default:R=>{let{id:B,messagesId:L,isDisabled:$,isReadonly:j,isValid:q}=R;return F(qs,ut(P,{id:B.value,"aria-describedby":L.value,disabled:$.value,readonly:j.value},T,{error:q.value===!1,modelValue:c.value,"onUpdate:modelValue":H=>c.value=H,onFocus:d,onBlur:a}),s)}})}),Pr({},b)}});function lV(e){let{selectedElement:n,containerElement:r,isRtl:s,isHorizontal:c}=e;const f=Jf(c,r),d=nP(c,s,r),a=Jf(c,n),b=iP(c,n),k=a*.4;return d>b?b-k:d+f<b+a?b-f+a+k:d}function uV(e){let{selectedElement:n,containerElement:r,isHorizontal:s}=e;const c=Jf(s,r),f=iP(s,n),d=Jf(s,n);return f-c/2+d/2}function fS(e,n){const r=e?"scrollWidth":"scrollHeight";return(n==null?void 0:n[r])||0}function cV(e,n){const r=e?"clientWidth":"clientHeight";return(n==null?void 0:n[r])||0}function nP(e,n,r){if(!r)return 0;const{scrollLeft:s,offsetWidth:c,scrollWidth:f}=r;return e?n?f-c+s:s:r.scrollTop}function Jf(e,n){const r=e?"offsetWidth":"offsetHeight";return(n==null?void 0:n[r])||0}function iP(e,n){const r=e?"offsetLeft":"offsetTop";return(n==null?void 0:n[r])||0}const rP=Symbol.for("vuetify:v-slide-group"),_0=Ge({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:rP},nextIcon:{type:an,default:"$next"},prevIcon:{type:an,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Kt(),...Ju({mobile:null}),...wn(),...ic({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Qf=ft()({name:"VSlideGroup",props:_0(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{isRtl:s}=tr(),{displayClasses:c,mobile:f}=Qa(e),d=Ml(e,e.symbol),a=Rt(!1),b=Rt(0),k=Rt(0),S=Rt(0),T=te(()=>e.direction==="horizontal"),{resizeRef:A,contentRect:P}=vs(),{resizeRef:R,contentRect:B}=vs(),L=OL(),$=te(()=>({container:A.el,duration:200,easing:"easeOutQuart"})),j=te(()=>d.selected.value.length?d.items.value.findIndex(Se=>Se.id===d.selected.value[0]):-1),q=te(()=>d.selected.value.length?d.items.value.findIndex(Se=>Se.id===d.selected.value[d.selected.value.length-1]):-1);if(Xn){let Se=-1;Ot(()=>[d.selected.value,P.value,B.value,T.value],()=>{cancelAnimationFrame(Se),Se=requestAnimationFrame(()=>{if(P.value&&B.value){const Ee=T.value?"width":"height";k.value=P.value[Ee],S.value=B.value[Ee],a.value=k.value+1<S.value}if(j.value>=0&&R.el){const Ee=R.el.children[q.value];ee(Ee,e.centerActive)}})})}const H=Rt(!1);function ee(Se,Ee){let tt=0;Ee?tt=uV({containerElement:A.el,isHorizontal:T.value,selectedElement:Se}):tt=lV({containerElement:A.el,isHorizontal:T.value,isRtl:s.value,selectedElement:Se}),Q(tt)}function Q(Se){if(!Xn||!A.el)return;const Ee=Jf(T.value,A.el),tt=nP(T.value,s.value,A.el);if(!(fS(T.value,A.el)<=Ee||Math.abs(Se-tt)<16)){if(T.value&&s.value&&A.el){const{scrollWidth:kt,offsetWidth:wt}=A.el;Se=kt-wt-Se}T.value?L.horizontal(Se,$.value):L(Se,$.value)}}function oe(Se){const{scrollTop:Ee,scrollLeft:tt}=Se.target;b.value=T.value?tt:Ee}function le(Se){if(H.value=!0,!(!a.value||!R.el)){for(const Ee of Se.composedPath())for(const tt of R.el.children)if(tt===Ee){ee(tt);return}}}function ce(Se){H.value=!1}let he=!1;function ve(Se){var Ee;!he&&!H.value&&!(Se.relatedTarget&&((Ee=R.el)!=null&&Ee.contains(Se.relatedTarget)))&&De(),he=!1}function ie(){he=!0}function be(Se){if(!R.el)return;function Ee(tt){Se.preventDefault(),De(tt)}T.value?Se.key==="ArrowRight"?Ee(s.value?"prev":"next"):Se.key==="ArrowLeft"&&Ee(s.value?"next":"prev"):Se.key==="ArrowDown"?Ee("next"):Se.key==="ArrowUp"&&Ee("prev"),Se.key==="Home"?Ee("first"):Se.key==="End"&&Ee("last")}function Be(Se,Ee){if(!Se)return;let tt=Se;do tt=tt==null?void 0:tt[Ee==="next"?"nextElementSibling":"previousElementSibling"];while(tt!=null&&tt.hasAttribute("disabled"));return tt}function De(Se){if(!R.el)return;let Ee;if(!Se)Ee=qf(R.el)[0];else if(Se==="next"){if(Ee=Be(R.el.querySelector(":focus"),Se),!Ee)return De("first")}else if(Se==="prev"){if(Ee=Be(R.el.querySelector(":focus"),Se),!Ee)return De("last")}else Se==="first"?(Ee=R.el.firstElementChild,Ee!=null&&Ee.hasAttribute("disabled")&&(Ee=Be(Ee,"next"))):Se==="last"&&(Ee=R.el.lastElementChild,Ee!=null&&Ee.hasAttribute("disabled")&&(Ee=Be(Ee,"prev")));Ee&&Ee.focus({preventScroll:!0})}function Fe(Se){const Ee=T.value&&s.value?-1:1,tt=(Se==="prev"?-Ee:Ee)*k.value;let Nt=b.value+tt;if(T.value&&s.value&&A.el){const{scrollWidth:kt,offsetWidth:wt}=A.el;Nt+=kt-wt}Q(Nt)}const Ze=te(()=>({next:d.next,prev:d.prev,select:d.select,isSelected:d.isSelected})),mt=te(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!f.value;case!0:return a.value||Math.abs(b.value)>0;case"mobile":return f.value||a.value||Math.abs(b.value)>0;default:return!f.value&&(a.value||Math.abs(b.value)>0)}}),pt=te(()=>Math.abs(b.value)>1),Ve=te(()=>{if(!A.value)return!1;const Se=fS(T.value,A.el),Ee=cV(T.value,A.el);return Se-Ee-Math.abs(b.value)>1});return bt(()=>F(e.tag,{class:vt(["v-slide-group",{"v-slide-group--vertical":!T.value,"v-slide-group--has-affixes":mt.value,"v-slide-group--is-overflowing":a.value},c.value,e.class]),style:Bt(e.style),tabindex:H.value||d.selected.value.length?-1:0,onFocus:ve},{default:()=>{var Se,Ee,tt;return[mt.value&&Y("div",{key:"prev",class:vt(["v-slide-group__prev",{"v-slide-group__prev--disabled":!pt.value}]),onMousedown:ie,onClick:()=>pt.value&&Fe("prev")},[((Se=r.prev)==null?void 0:Se.call(r,Ze.value))??F(Kf,null,{default:()=>[F(Jn,{icon:s.value?e.nextIcon:e.prevIcon},null)]})]),Y("div",{key:"container",ref:A,class:vt(["v-slide-group__container",e.contentClass]),onScroll:oe},[Y("div",{ref:R,class:"v-slide-group__content",onFocusin:le,onFocusout:ce,onKeydown:be},[(Ee=r.default)==null?void 0:Ee.call(r,Ze.value)])]),mt.value&&Y("div",{key:"next",class:vt(["v-slide-group__next",{"v-slide-group__next--disabled":!Ve.value}]),onMousedown:ie,onClick:()=>Ve.value&&Fe("next")},[((tt=r.next)==null?void 0:tt.call(r,Ze.value))??F(Kf,null,{default:()=>[F(Jn,{icon:s.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:d.selected,scrollTo:Fe,scrollOffset:b,focus:De,hasPrev:pt,hasNext:Ve}}}),aP=Symbol.for("vuetify:v-chip-group"),dV=Ge({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:zr},..._0(),...Kt(),...ic({selectedClass:"v-chip--selected"}),...wn(),...Hn(),...es({variant:"tonal"})},"VChipGroup"),hV=ft()({name:"VChipGroup",props:dV(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{isSelected:c,select:f,next:d,prev:a,selected:b}=Ml(e,aP);return zi({VChip:{baseColor:Me(()=>e.baseColor),color:Me(()=>e.color),disabled:Me(()=>e.disabled),filter:Me(()=>e.filter),variant:Me(()=>e.variant)}}),bt(()=>{const k=Qf.filterProps(e);return F(Qf,ut(k,{class:["v-chip-group",{"v-chip-group--column":e.column},s.value,e.class],style:e.style}),{default:()=>{var S;return[(S=r.default)==null?void 0:S.call(r,{isSelected:c,select:f,next:d,prev:a,selected:b.value})]}})}),{}}}),fV=Ge({activeClass:String,appendAvatar:String,appendIcon:an,baseColor:String,closable:Boolean,closeIcon:{type:an,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:an,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:an,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Vr(),onClickOnce:Vr(),...ya(),...Kt(),...mr(),...nr(),...rc(),..._i(),...ym(),...Ks(),...wn({tag:"span"}),...Hn(),...es({variant:"tonal"})},"VChip"),Xd=ft()({name:"VChip",directives:{vRipple:aa},props:fV(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{t:f}=vi(),{borderClasses:d}=Pa(e),{densityClasses:a}=sa(e),{elevationClasses:b}=Tr(e),{roundedClasses:k}=Vi(e),{sizeClasses:S}=Wd(e),{themeClasses:T}=Qn(e),A=nn(e,"modelValue"),P=ac(e,aP,!1),R=_m(e,r),B=Me(()=>e.link!==!1&&R.isLink.value),L=te(()=>!e.disabled&&e.link!==!1&&(!!P||e.link||R.isClickable.value)),$=Me(()=>({"aria-label":f(e.closeLabel),disabled:e.disabled,onClick(oe){oe.preventDefault(),oe.stopPropagation(),A.value=!1,s("click:close",oe)}})),{colorClasses:j,colorStyles:q,variantClasses:H}=nc(()=>({color:!P||P.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function ee(oe){var le;s("click",oe),L.value&&((le=R.navigate)==null||le.call(R,oe),P==null||P.toggle())}function Q(oe){(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),ee(oe))}return()=>{var Be;const oe=R.isLink.value?"a":e.tag,le=!!(e.appendIcon||e.appendAvatar),ce=!!(le||c.append),he=!!(c.close||e.closable),ve=!!(c.filter||e.filter)&&P,ie=!!(e.prependIcon||e.prependAvatar),be=!!(ie||c.prepend);return A.value&&Ri(F(oe,ut({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":L.value,"v-chip--filter":ve,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&((Be=R.isActive)==null?void 0:Be.value)},T.value,d.value,j.value,a.value,b.value,k.value,S.value,H.value,P==null?void 0:P.selectedClass.value,e.class],style:[q.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:L.value?0:void 0,onClick:ee,onKeydown:L.value&&!B.value&&Q},R.linkProps),{default:()=>{var De;return[El(L.value,"v-chip"),ve&&F(m0,{key:"filter"},{default:()=>[Ri(Y("div",{class:"v-chip__filter"},[c.filter?F(kn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},c.filter):F(Jn,{key:"filter-icon",icon:e.filterIcon},null)]),[[xs,P.isSelected.value]])]}),be&&Y("div",{key:"prepend",class:"v-chip__prepend"},[c.prepend?F(kn,{key:"prepend-defaults",disabled:!ie,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},c.prepend):Y(Ht,null,[e.prependIcon&&F(Jn,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&F(Ja,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),Y("div",{class:"v-chip__content","data-no-activator":""},[((De=c.default)==null?void 0:De.call(c,{isSelected:P==null?void 0:P.isSelected.value,selectedClass:P==null?void 0:P.selectedClass.value,select:P==null?void 0:P.select,toggle:P==null?void 0:P.toggle,value:P==null?void 0:P.value.value,disabled:e.disabled}))??yn(e.text)]),ce&&Y("div",{key:"append",class:"v-chip__append"},[c.append?F(kn,{key:"append-defaults",disabled:!le,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},c.append):Y(Ht,null,[e.appendIcon&&F(Jn,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&F(Ja,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),he&&Y("button",ut({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},$.value),[c.close?F(kn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},c.close):F(Jn,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[aa,L.value&&e.ripple,null]])}}}),mV=Ge({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Kt(),...Hn()},"VDivider"),$a=ft()({name:"VDivider",props:mV(),setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Qn(e),{textColorClasses:f,textColorStyles:d}=Br(()=>e.color),a=te(()=>{const b={};return e.length&&(b[e.vertical?"height":"width"]=qt(e.length)),e.thickness&&(b[e.vertical?"borderRightWidth":"borderTopWidth"]=qt(e.thickness)),b});return bt(()=>{const b=Y("hr",{class:vt([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},c.value,f.value,e.class]),style:Bt([a.value,d.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!r.role||r.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${r.role||"separator"}`},null);return s.default?Y("div",{class:vt(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[b,Y("div",{class:"v-divider__content"},[s.default()]),b]):b}),{}}}),qy=Symbol.for("vuetify:list");function sP(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const n=xn(qy,{filterable:!1,hasPrepend:Rt(!1),updateHasPrepend:()=>null}),r={filterable:n.filterable||e,hasPrepend:Rt(!1),updateHasPrepend:s=>{s&&(r.hasPrepend.value=s)}};return ri(qy,r),n}function oP(){return xn(qy,null)}const y0=e=>{const n={activate:r=>{let{id:s,value:c,activated:f}=r;return s=mn(s),e&&!c&&f.size===1&&f.has(s)||(c?f.add(s):f.delete(s)),f},in:(r,s,c)=>{let f=new Set;if(r!=null)for(const d of Di(r))f=n.activate({id:d,value:!0,activated:new Set(f),children:s,parents:c});return f},out:r=>Array.from(r)};return n},lP=e=>{const n=y0(e);return{activate:s=>{let{activated:c,id:f,...d}=s;f=mn(f);const a=c.has(f)?new Set([f]):new Set;return n.activate({...d,id:f,activated:a})},in:(s,c,f)=>{let d=new Set;if(s!=null){const a=Di(s);a.length&&(d=n.in(a.slice(0,1),c,f))}return d},out:(s,c,f)=>n.out(s,c,f)}},pV=e=>{const n=y0(e);return{activate:s=>{let{id:c,activated:f,children:d,...a}=s;return c=mn(c),d.has(c)?f:n.activate({id:c,activated:f,children:d,...a})},in:n.in,out:n.out}},gV=e=>{const n=lP(e);return{activate:s=>{let{id:c,activated:f,children:d,...a}=s;return c=mn(c),d.has(c)?f:n.activate({id:c,activated:f,children:d,...a})},in:n.in,out:n.out}},vV={open:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(r){const f=new Set;f.add(n);let d=c.get(n);for(;d!=null;)f.add(d),d=c.get(d);return f}else return s.delete(n),s},select:()=>null},uP={open:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(r){let f=c.get(n);for(s.add(n);f!=null&&f!==n;)s.add(f),f=c.get(f);return s}else s.delete(n);return s},select:()=>null},_V={open:uP.open,select:e=>{let{id:n,value:r,opened:s,parents:c}=e;if(!r)return s;const f=[];let d=c.get(n);for(;d!=null;)f.push(d),d=c.get(d);return new Set(f)}},b0=e=>{const n={select:r=>{let{id:s,value:c,selected:f}=r;if(s=mn(s),e&&!c){const d=Array.from(f.entries()).reduce((a,b)=>{let[k,S]=b;return S==="on"&&a.push(k),a},[]);if(d.length===1&&d[0]===s)return f}return f.set(s,c?"on":"off"),f},in:(r,s,c,f)=>{const d=new Map;for(const a of r||[])n.select({id:a,value:!0,selected:d,children:s,parents:c,disabled:f});return d},out:r=>{const s=[];for(const[c,f]of r.entries())f==="on"&&s.push(c);return s}};return n},cP=e=>{const n=b0(e);return{select:s=>{let{selected:c,id:f,...d}=s;f=mn(f);const a=c.has(f)?new Map([[f,c.get(f)]]):new Map;return n.select({...d,id:f,selected:a})},in:(s,c,f,d)=>s!=null&&s.length?n.in(s.slice(0,1),c,f,d):new Map,out:(s,c,f)=>n.out(s,c,f)}},yV=e=>{const n=b0(e);return{select:s=>{let{id:c,selected:f,children:d,...a}=s;return c=mn(c),d.has(c)?f:n.select({id:c,selected:f,children:d,...a})},in:n.in,out:n.out}},bV=e=>{const n=cP(e);return{select:s=>{let{id:c,selected:f,children:d,...a}=s;return c=mn(c),d.has(c)?f:n.select({id:c,selected:f,children:d,...a})},in:n.in,out:n.out}},dP=e=>{const n={select:r=>{let{id:s,value:c,selected:f,children:d,parents:a,disabled:b}=r;s=mn(s);const k=new Map(f),S=[s];for(;S.length;){const A=S.shift();b.has(A)||f.set(mn(A),c?"on":"off"),d.has(A)&&S.push(...d.get(A))}let T=mn(a.get(s));for(;T;){let A=!0,P=!0;for(const R of d.get(T)){const B=mn(R);if(!b.has(B)&&(f.get(B)!=="on"&&(A=!1),f.has(B)&&f.get(B)!=="off"&&(P=!1),!A&&!P))break}f.set(T,A?"on":P?"off":"indeterminate"),T=mn(a.get(T))}return e&&!c&&Array.from(f.entries()).reduce((P,R)=>{let[B,L]=R;return L==="on"&&P.push(B),P},[]).length===0?k:f},in:(r,s,c,f)=>{let d=new Map;for(const a of r||[])d=n.select({id:a,value:!0,selected:d,children:s,parents:c,disabled:f});return d},out:(r,s)=>{const c=[];for(const[f,d]of r.entries())d==="on"&&!s.has(f)&&c.push(f);return c}};return n},xV=e=>{const n=dP(e);return{select:n.select,in:n.in,out:(s,c,f)=>{const d=[];for(const[a,b]of s.entries())if(b==="on"){if(f.has(a)){const k=f.get(a);if(s.get(k)==="on")continue}d.push(a)}return d}}},em=Symbol.for("vuetify:nested"),hP={id:Rt(),root:{register:()=>null,unregister:()=>null,children:Xe(new Map),parents:Xe(new Map),disabled:Xe(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:Xe(!1),selectable:Xe(!1),opened:Xe(new Set),activated:Xe(new Set),selected:Xe(new Map),selectedValues:Xe([]),getPath:()=>[]}},wV=Ge({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),SV=e=>{let n=!1;const r=Rt(new Map),s=Rt(new Map),c=Rt(new Set),f=nn(e,"opened",e.opened,B=>new Set(Array.isArray(B)?B.map(L=>mn(L)):B),B=>[...B.values()]),d=te(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return pV(e.mandatory);case"single-leaf":return gV(e.mandatory);case"independent":return y0(e.mandatory);case"single-independent":default:return lP(e.mandatory)}}),a=te(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return bV(e.mandatory);case"leaf":return yV(e.mandatory);case"independent":return b0(e.mandatory);case"single-independent":return cP(e.mandatory);case"trunk":return xV(e.mandatory);case"classic":default:return dP(e.mandatory)}}),b=te(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return _V;case"single":return vV;case"multiple":default:return uP}}),k=nn(e,"activated",e.activated,B=>d.value.in(B,r.value,s.value),B=>d.value.out(B,r.value,s.value)),S=nn(e,"selected",e.selected,B=>a.value.in(B,r.value,s.value,c.value),B=>a.value.out(B,r.value,s.value));Or(()=>{n=!0});function T(B){const L=[];let $=mn(B);for(;$!=null;)L.unshift($),$=s.value.get($);return L}const A=ji("nested"),P=new Set,R={id:Rt(),root:{opened:f,activatable:Me(()=>e.activatable),selectable:Me(()=>e.selectable),activated:k,selected:S,selectedValues:te(()=>{const B=[];for(const[L,$]of S.value.entries())$==="on"&&B.push(L);return B}),register:(B,L,$,j)=>{if(P.has(B)){T(B).map(String).join(" -> "),T(L).concat(B).map(String).join(" -> ");return}else P.add(B);L&&B!==L&&s.value.set(B,L),$&&c.value.add(B),j&&r.value.set(B,[]),L!=null&&r.value.set(L,[...r.value.get(L)||[],B])},unregister:B=>{if(n)return;P.delete(B),r.value.delete(B),c.value.delete(B);const L=s.value.get(B);if(L){const $=r.value.get(L)??[];r.value.set(L,$.filter(j=>j!==B))}s.value.delete(B)},open:(B,L,$)=>{A.emit("click:open",{id:B,value:L,path:T(B),event:$});const j=b.value.open({id:B,value:L,opened:new Set(f.value),children:r.value,parents:s.value,event:$});j&&(f.value=j)},openOnSelect:(B,L,$)=>{const j=b.value.select({id:B,value:L,selected:new Map(S.value),opened:new Set(f.value),children:r.value,parents:s.value,event:$});j&&(f.value=j)},select:(B,L,$)=>{A.emit("click:select",{id:B,value:L,path:T(B),event:$});const j=a.value.select({id:B,value:L,selected:new Map(S.value),children:r.value,parents:s.value,disabled:c.value,event:$});j&&(S.value=j),R.root.openOnSelect(B,L,$)},activate:(B,L,$)=>{if(!e.activatable)return R.root.select(B,!0,$);A.emit("click:activate",{id:B,value:L,path:T(B),event:$});const j=d.value.activate({id:B,value:L,activated:new Set(k.value),children:r.value,parents:s.value,event:$});if(j.size!==k.value.size)k.value=j;else{for(const q of j)if(!k.value.has(q)){k.value=j;return}for(const q of k.value)if(!j.has(q)){k.value=j;return}}},children:r,parents:s,disabled:c,getPath:T}};return ri(em,R),R.root},fP=(e,n,r)=>{const s=xn(em,hP),c=Symbol("nested item"),f=te(()=>mn(Us(e))??c),d={...s,id:f,open:(a,b)=>s.root.open(f.value,a,b),openOnSelect:(a,b)=>s.root.openOnSelect(f.value,a,b),isOpen:te(()=>s.root.opened.value.has(f.value)),parent:te(()=>s.root.parents.value.get(f.value)),activate:(a,b)=>s.root.activate(f.value,a,b),isActivated:te(()=>s.root.activated.value.has(f.value)),select:(a,b)=>s.root.select(f.value,a,b),isSelected:te(()=>s.root.selected.value.get(f.value)==="on"),isIndeterminate:te(()=>s.root.selected.value.get(f.value)==="indeterminate"),isLeaf:te(()=>!s.root.children.value.get(f.value)),isGroupActivator:s.isGroupActivator};return Hd(()=>{s.isGroupActivator||s.root.register(f.value,s.id.value,Us(n),r)}),Or(()=>{s.isGroupActivator||s.root.unregister(f.value)}),r&&ri(em,d),d},kV=()=>{const e=xn(em,hP);ri(em,{...e,isGroupActivator:!0})},CV=ja({name:"VListGroupActivator",setup(e,n){let{slots:r}=n;return kV(),()=>{var s;return(s=r.default)==null?void 0:s.call(r)}}}),mP=Ge({activeColor:String,baseColor:String,color:String,collapseIcon:{type:an,default:"$collapse"},disabled:Boolean,expandIcon:{type:an,default:"$expand"},rawId:[String,Number],prependIcon:an,appendIcon:an,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Kt(),...wn()},"VListGroup"),tm=ft()({name:"VListGroup",props:mP(),setup(e,n){let{slots:r}=n;const{isOpen:s,open:c,id:f}=fP(()=>e.value,()=>e.disabled,!0),d=te(()=>`v-list-group--id-${String(e.rawId??f.value)}`),a=oP(),{isBooted:b}=tc();function k(P){var R;["INPUT","TEXTAREA"].includes((R=P.target)==null?void 0:R.tagName)||c(!s.value,P)}const S=te(()=>({onClick:k,class:"v-list-group__header",id:d.value})),T=te(()=>s.value?e.collapseIcon:e.expandIcon),A=te(()=>({VListItem:{active:s.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&T.value,appendIcon:e.appendIcon||!e.subgroup&&T.value,title:e.title,value:e.value}}));return bt(()=>F(e.tag,{class:vt(["v-list-group",{"v-list-group--prepend":a==null?void 0:a.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":s.value},e.class]),style:Bt(e.style)},{default:()=>[r.activator&&F(kn,{defaults:A.value},{default:()=>[F(CV,null,{default:()=>[r.activator({props:S.value,isOpen:s.value})]})]}),F(ia,{transition:{component:qg},disabled:!b.value},{default:()=>{var P;return[Ri(Y("div",{class:"v-list-group__items",role:"group","aria-labelledby":d.value},[(P=r.default)==null?void 0:P.call(r)]),[[xs,s.value]])]}})]})),{isOpen:s}}}),TV=Ge({opacity:[Number,String],...Kt(),...wn()},"VListItemSubtitle"),pP=ft()({name:"VListItemSubtitle",props:TV(),setup(e,n){let{slots:r}=n;return bt(()=>F(e.tag,{class:vt(["v-list-item-subtitle",e.class]),style:Bt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},r)),{}}}),gP=Ao("v-list-item-title"),vP=Ge({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:an,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:an,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Vr(),onClickOnce:Vr(),...ya(),...Kt(),...mr(),...Zi(),...nr(),..._i(),...ym(),...wn(),...Hn(),...es({variant:"text"})},"VListItem"),_s=ft()({name:"VListItem",directives:{vRipple:aa},props:vP(),emits:{click:e=>!0},setup(e,n){let{attrs:r,slots:s,emit:c}=n;const f=_m(e,r),d=te(()=>e.value===void 0?f.href.value:e.value),{activate:a,isActivated:b,select:k,isOpen:S,isSelected:T,isIndeterminate:A,isGroupActivator:P,root:R,parent:B,openOnSelect:L,id:$}=fP(d,()=>e.disabled,!1),j=oP(),q=te(()=>{var kt;return e.active!==!1&&(e.active||((kt=f.isActive)==null?void 0:kt.value)||(R.activatable.value?b.value:T.value))}),H=Me(()=>e.link!==!1&&f.isLink.value),ee=te(()=>!!j&&(R.selectable.value||R.activatable.value||e.value!=null)),Q=te(()=>!e.disabled&&e.link!==!1&&(e.link||f.isClickable.value||ee.value)),oe=Me(()=>e.rounded||e.nav),le=Me(()=>e.color??e.activeColor),ce=Me(()=>({color:q.value?le.value??e.baseColor:e.baseColor,variant:e.variant}));Ot(()=>{var kt;return(kt=f.isActive)==null?void 0:kt.value},kt=>{kt&&he()}),Hd(()=>{var kt;(kt=f.isActive)!=null&&kt.value&&he()});function he(){B.value!=null&&R.open(B.value,!0),L(!0)}const{themeClasses:ve}=Qn(e),{borderClasses:ie}=Pa(e),{colorClasses:be,colorStyles:Be,variantClasses:De}=nc(ce),{densityClasses:Fe}=sa(e),{dimensionStyles:Ze}=Ki(e),{elevationClasses:mt}=Tr(e),{roundedClasses:pt}=Vi(oe),Ve=Me(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),Se=Me(()=>e.ripple!==void 0&&e.ripple&&(j!=null&&j.filterable)?{keys:[ky.enter]}:e.ripple),Ee=te(()=>({isActive:q.value,select:k,isOpen:S.value,isSelected:T.value,isIndeterminate:A.value}));function tt(kt){var wt,Le;c("click",kt),!["INPUT","TEXTAREA"].includes((wt=kt.target)==null?void 0:wt.tagName)&&Q.value&&((Le=f.navigate)==null||Le.call(f,kt),!P&&(R.activatable.value?a(!b.value,kt):(R.selectable.value||e.value!=null)&&k(!T.value,kt)))}function Nt(kt){const wt=kt.target;["INPUT","TEXTAREA"].includes(wt.tagName)||(kt.key==="Enter"||kt.key===" "&&!(j!=null&&j.filterable))&&(kt.preventDefault(),kt.stopPropagation(),kt.target.dispatchEvent(new MouseEvent("click",kt)))}return bt(()=>{const kt=H.value?"a":e.tag,wt=s.title||e.title!=null,Le=s.subtitle||e.subtitle!=null,_t=!!(e.appendAvatar||e.appendIcon),ot=!!(_t||s.append),Je=!!(e.prependAvatar||e.prependIcon),Ct=!!(Je||s.prepend);return j==null||j.updateHasPrepend(Ct),e.activeColor&&iT("active-color",["color","base-color"]),Ri(F(kt,ut({class:["v-list-item",{"v-list-item--active":q.value,"v-list-item--disabled":e.disabled,"v-list-item--link":Q.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!Ct&&(j==null?void 0:j.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&q.value},ve.value,ie.value,be.value,Fe.value,mt.value,Ve.value,pt.value,De.value,e.class],style:[Be.value,Ze.value,e.style],tabindex:Q.value?j?-2:0:void 0,"aria-selected":ee.value?R.activatable.value?b.value:R.selectable.value?T.value:q.value:void 0,onClick:tt,onKeydown:Q.value&&!H.value&&Nt},f.linkProps),{default:()=>{var ae;return[El(Q.value||q.value,"v-list-item"),Ct&&Y("div",{key:"prepend",class:"v-list-item__prepend"},[s.prepend?F(kn,{key:"prepend-defaults",disabled:!Je,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var de;return[(de=s.prepend)==null?void 0:de.call(s,Ee.value)]}}):Y(Ht,null,[e.prependAvatar&&F(Ja,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&F(Jn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),Y("div",{class:"v-list-item__spacer"},null)]),Y("div",{class:"v-list-item__content","data-no-activator":""},[wt&&F(gP,{key:"title"},{default:()=>{var de;return[((de=s.title)==null?void 0:de.call(s,{title:e.title}))??yn(e.title)]}}),Le&&F(pP,{key:"subtitle"},{default:()=>{var de;return[((de=s.subtitle)==null?void 0:de.call(s,{subtitle:e.subtitle}))??yn(e.subtitle)]}}),(ae=s.default)==null?void 0:ae.call(s,Ee.value)]),ot&&Y("div",{key:"append",class:"v-list-item__append"},[s.append?F(kn,{key:"append-defaults",disabled:!_t,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var de;return[(de=s.append)==null?void 0:de.call(s,Ee.value)]}}):Y(Ht,null,[e.appendIcon&&F(Jn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&F(Ja,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),Y("div",{class:"v-list-item__spacer"},null)])]}}),[[aa,Q.value&&Se.value]])}),{activate:a,isActivated:b,isGroupActivator:P,isSelected:T,list:j,select:k,root:R,id:$,link:f}}}),PV=Ge({color:String,inset:Boolean,sticky:Boolean,title:String,...Kt(),...wn()},"VListSubheader"),Jd=ft()({name:"VListSubheader",props:PV(),setup(e,n){let{slots:r}=n;const{textColorClasses:s,textColorStyles:c}=Br(()=>e.color);return bt(()=>{const f=!!(r.default||e.title);return F(e.tag,{class:vt(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},s.value,e.class]),style:Bt([{textColorStyles:c},e.style])},{default:()=>{var d;return[f&&Y("div",{class:"v-list-subheader__text"},[((d=r.default)==null?void 0:d.call(r))??e.title])]}})}),{}}}),IV=Ge({items:Array,returnObject:Boolean},"VListChildren"),_P=ft()({name:"VListChildren",props:IV(),setup(e,n){let{slots:r}=n;return sP(),()=>{var s,c;return((s=r.default)==null?void 0:s.call(r))??((c=e.items)==null?void 0:c.map(f=>{var A,P;let{children:d,props:a,type:b,raw:k}=f;if(b==="divider")return((A=r.divider)==null?void 0:A.call(r,{props:a}))??F($a,a,null);if(b==="subheader")return((P=r.subheader)==null?void 0:P.call(r,{props:a}))??F(Jd,a,null);const S={subtitle:r.subtitle?R=>{var B;return(B=r.subtitle)==null?void 0:B.call(r,{...R,item:k})}:void 0,prepend:r.prepend?R=>{var B;return(B=r.prepend)==null?void 0:B.call(r,{...R,item:k})}:void 0,append:r.append?R=>{var B;return(B=r.append)==null?void 0:B.call(r,{...R,item:k})}:void 0,title:r.title?R=>{var B;return(B=r.title)==null?void 0:B.call(r,{...R,item:k})}:void 0},T=tm.filterProps(a);return d?F(tm,ut(T,{value:e.returnObject?k:a==null?void 0:a.value,rawId:a==null?void 0:a.value}),{activator:R=>{let{props:B}=R;const L={...a,...B,value:e.returnObject?k:a.value};return r.header?r.header({props:L}):F(_s,L,S)},default:()=>F(_P,{items:d,returnObject:e.returnObject},r)}):r.item?r.item({props:a}):F(_s,ut(a,{value:e.returnObject?k:a.value}),S)}))}}}),yP=Ge({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items");function bl(e,n){const r=Wi(n,e.itemTitle,n),s=Wi(n,e.itemValue,r),c=Wi(n,e.itemChildren),f=Wi(n,e.itemType,"item"),d=e.itemProps===!0?typeof n=="object"&&n!=null&&!Array.isArray(n)?"children"in n?di(n,["children"]):n:void 0:Wi(n,e.itemProps),a={title:r,value:s,...d};return{type:f,title:String(a.title??""),value:a.value,props:a,children:f==="item"&&Array.isArray(c)?bP(e,c):void 0,raw:n}}function bP(e,n){const r=Io(e,["itemTitle","itemValue","itemChildren","itemProps","itemType","returnObject","valueComparator"]),s=[];for(const c of n)s.push(bl(r,c));return s}function x0(e){const n=te(()=>bP(e,e.items)),r=te(()=>n.value.some(a=>a.value===null)),s=Rt(new Map),c=Rt([]);Li(()=>{const a=n.value,b=new Map,k=[];for(let S=0;S<a.length;S++){const T=a[S];if(Py(T.value)||T.value===null){let A=b.get(T.value);A||(A=[],b.set(T.value,A)),A.push(T)}else k.push(T)}s.value=b,c.value=k});function f(a){const b=s.value,k=n.value,S=c.value,T=r.value,A=e.returnObject,P=!!e.valueComparator,R=e.valueComparator||zr,B=Io(e,["itemTitle","itemValue","itemChildren","itemProps","itemType","returnObject","valueComparator"]),L=[];e:for(const $ of a){if(!T&&$===null)continue;if(A&&typeof $=="string"){L.push(bl(B,$));continue}const j=b.get($);if(P||!j){for(const q of P?k:S)if(R($,q.value)){L.push(q);continue e}L.push(bl(B,$));continue}L.push(...j)}return L}function d(a){return e.returnObject?a.map(b=>{let{raw:k}=b;return k}):a.map(b=>{let{value:k}=b;return k})}return{items:n,transformIn:f,transformOut:d}}function AV(e,n){const r=Wi(n,e.itemType,"item"),s=Py(n)?n:Wi(n,e.itemTitle),c=Py(n)?n:Wi(n,e.itemValue,void 0),f=Wi(n,e.itemChildren),d=e.itemProps===!0?di(n,["children"]):Wi(n,e.itemProps),a={title:s,value:c,...d};return{type:r,title:a.title,value:a.value,props:a,children:r==="item"&&f?xP(e,f):void 0,raw:n}}function xP(e,n){const r=[];for(const s of n)r.push(AV(e,s));return r}function wP(e){return{items:te(()=>xP(e,e.items))}}const SP=Ge({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:an,collapseIcon:an,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Vr(),"onClick:select":Vr(),"onUpdate:opened":Vr(),...wV({selectStrategy:"single-leaf",openStrategy:"list"}),...ya(),...Kt(),...mr(),...Zi(),...nr(),...yP(),..._i(),...wn(),...Hn(),...es({variant:"text"})},"VList"),Od=ft()({name:"VList",props:SP(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:r}=n;const{items:s}=wP(e),{themeClasses:c}=Qn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{borderClasses:a}=Pa(e),{densityClasses:b}=sa(e),{dimensionStyles:k}=Ki(e),{elevationClasses:S}=Tr(e),{roundedClasses:T}=Vi(e),{children:A,open:P,parents:R,select:B,getPath:L}=SV(e),$=Me(()=>e.lines?`v-list--${e.lines}-line`:void 0),j=Me(()=>e.activeColor),q=Me(()=>e.baseColor),H=Me(()=>e.color);sP({filterable:e.filterable}),zi({VListGroup:{activeColor:j,baseColor:q,color:H,expandIcon:Me(()=>e.expandIcon),collapseIcon:Me(()=>e.collapseIcon)},VListItem:{activeClass:Me(()=>e.activeClass),activeColor:j,baseColor:q,color:H,density:Me(()=>e.density),disabled:Me(()=>e.disabled),lines:Me(()=>e.lines),nav:Me(()=>e.nav),slim:Me(()=>e.slim),variant:Me(()=>e.variant)}});const ee=Rt(!1),Q=Xe();function oe(be){ee.value=!0}function le(be){ee.value=!1}function ce(be){var Be;!ee.value&&!(be.relatedTarget&&((Be=Q.value)!=null&&Be.contains(be.relatedTarget)))&&ie()}function he(be){const Be=be.target;if(!(!Q.value||["INPUT","TEXTAREA"].includes(Be.tagName))){if(be.key==="ArrowDown")ie("next");else if(be.key==="ArrowUp")ie("prev");else if(be.key==="Home")ie("first");else if(be.key==="End")ie("last");else return;be.preventDefault()}}function ve(be){ee.value=!0}function ie(be){if(Q.value)return $u(Q.value,be)}return bt(()=>F(e.tag,{ref:Q,class:vt(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},c.value,f.value,a.value,b.value,S.value,$.value,T.value,e.class]),style:Bt([d.value,k.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:oe,onFocusout:le,onFocus:ce,onKeydown:he,onMousedown:ve},{default:()=>[F(_P,{items:s.value,returnObject:e.returnObject},r)]})),{open:P,select:B,focus:ie,children:A,parents:R,getPath:L}}}),EV=Ao("v-list-img"),MV=Ge({start:Boolean,end:Boolean,...Kt(),...wn()},"VListItemAction"),kP=ft()({name:"VListItemAction",props:MV(),setup(e,n){let{slots:r}=n;return bt(()=>F(e.tag,{class:vt(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Bt(e.style)},r)),{}}}),DV=Ge({start:Boolean,end:Boolean,...Kt(),...wn()},"VListItemMedia"),RV=ft()({name:"VListItemMedia",props:DV(),setup(e,n){let{slots:r}=n;return bt(()=>F(e.tag,{class:vt(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Bt(e.style)},r)),{}}});function J_(e,n){return{x:e.x+n.x,y:e.y+n.y}}function LV(e,n){return{x:e.x-n.x,y:e.y-n.y}}function mS(e,n){if(e.side==="top"||e.side==="bottom"){const{side:r,align:s}=e,c=s==="left"?0:s==="center"?n.width/2:s==="right"?n.width:s,f=r==="top"?0:r==="bottom"?n.height:r;return J_({x:c,y:f},n)}else if(e.side==="left"||e.side==="right"){const{side:r,align:s}=e,c=r==="left"?0:r==="right"?n.width:r,f=s==="top"?0:s==="center"?n.height/2:s==="bottom"?n.height:s;return J_({x:c,y:f},n)}return J_({x:n.width/2,y:n.height/2},n)}const CP={static:BV,connected:FV},zV=Ge({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in CP},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function VV(e,n){const r=Xe({}),s=Xe();Xn&&ra(()=>!!(n.isActive.value&&e.locationStrategy),a=>{var b,k;Ot(()=>e.locationStrategy,a),fr(()=>{window.removeEventListener("resize",c),visualViewport==null||visualViewport.removeEventListener("resize",f),visualViewport==null||visualViewport.removeEventListener("scroll",d),s.value=void 0}),window.addEventListener("resize",c,{passive:!0}),visualViewport==null||visualViewport.addEventListener("resize",f,{passive:!0}),visualViewport==null||visualViewport.addEventListener("scroll",d,{passive:!0}),typeof e.locationStrategy=="function"?s.value=(b=e.locationStrategy(n,e,r))==null?void 0:b.updateLocation:s.value=(k=CP[e.locationStrategy](n,e,r))==null?void 0:k.updateLocation});function c(a){var b;(b=s.value)==null||b.call(s,a)}function f(a){var b;(b=s.value)==null||b.call(s,a)}function d(a){var b;(b=s.value)==null||b.call(s,a)}return{contentStyles:r,updateLocation:s}}function BV(){}function OV(e,n){const r=e0(e);return n?r.x+=parseFloat(e.style.right||0):r.x-=parseFloat(e.style.left||0),r.y-=parseFloat(e.style.top||0),r}function FV(e,n,r){(Array.isArray(e.target.value)||UR(e.target.value))&&Object.assign(r.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:c,preferredOrigin:f}=Qb(()=>{const $=Ay(n.location,e.isRtl.value),j=n.origin==="overlap"?$:n.origin==="auto"?G_($):Ay(n.origin,e.isRtl.value);return $.side===j.side&&$.align===q_(j).align?{preferredAnchor:L1($),preferredOrigin:L1(j)}:{preferredAnchor:$,preferredOrigin:j}}),[d,a,b,k]=["minWidth","minHeight","maxWidth","maxHeight"].map($=>te(()=>{const j=parseFloat(n[$]);return isNaN(j)?1/0:j})),S=te(()=>{if(Array.isArray(n.offset))return n.offset;if(typeof n.offset=="string"){const $=n.offset.split(" ").map(parseFloat);return $.length<2&&$.push(0),$}return typeof n.offset=="number"?[n.offset,0]:[0,0]});let T=!1,A=-1;const P=new XC(4),R=new ResizeObserver(()=>{if(!T)return;if(requestAnimationFrame(j=>{j!==A&&P.clear(),requestAnimationFrame(q=>{A=q})}),P.isFull){const j=P.values();if(zr(j.at(-1),j.at(-3))&&!zr(j.at(-1),j.at(-2)))return}const $=L();$&&P.push($.flipped)});Ot([e.target,e.contentEl],($,j)=>{let[q,H]=$,[ee,Q]=j;ee&&!Array.isArray(ee)&&R.unobserve(ee),q&&!Array.isArray(q)&&R.observe(q),Q&&R.unobserve(Q),H&&R.observe(H)},{immediate:!0}),fr(()=>{R.disconnect()});let B=new Ns({x:0,y:0,width:0,height:0});function L(){if(T=!1,requestAnimationFrame(()=>T=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(B=nT(e.target.value));const $=OV(e.contentEl.value,e.isRtl.value),j=yg(e.contentEl.value),q=12;j.length||(j.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||($.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),$.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const H=j.reduce((be,Be)=>{const De=dR(Be);return be?new Ns({x:Math.max(be.left,De.left),y:Math.max(be.top,De.top),width:Math.min(be.right,De.right)-Math.max(be.left,De.left),height:Math.min(be.bottom,De.bottom)-Math.max(be.top,De.top)}):De},void 0);H.x+=q,H.y+=q,H.width-=q*2,H.height-=q*2;let ee={anchor:c.value,origin:f.value};function Q(be){const Be=new Ns($),De=mS(be.anchor,B),Fe=mS(be.origin,Be);let{x:Ze,y:mt}=LV(De,Fe);switch(be.anchor.side){case"top":mt-=S.value[0];break;case"bottom":mt+=S.value[0];break;case"left":Ze-=S.value[0];break;case"right":Ze+=S.value[0];break}switch(be.anchor.align){case"top":mt-=S.value[1];break;case"bottom":mt+=S.value[1];break;case"left":Ze-=S.value[1];break;case"right":Ze+=S.value[1];break}return Be.x+=Ze,Be.y+=mt,Be.width=Math.min(Be.width,b.value),Be.height=Math.min(Be.height,k.value),{overflows:V1(Be,H),x:Ze,y:mt}}let oe=0,le=0;const ce={x:0,y:0},he={x:!1,y:!1};let ve=-1;for(;!(ve++>10);){const{x:be,y:Be,overflows:De}=Q(ee);oe+=be,le+=Be,$.x+=be,$.y+=Be;{const Fe=z1(ee.anchor),Ze=De.x.before||De.x.after,mt=De.y.before||De.y.after;let pt=!1;if(["x","y"].forEach(Ve=>{if(Ve==="x"&&Ze&&!he.x||Ve==="y"&&mt&&!he.y){const Se={anchor:{...ee.anchor},origin:{...ee.origin}},Ee=Ve==="x"?Fe==="y"?q_:G_:Fe==="y"?G_:q_;Se.anchor=Ee(Se.anchor),Se.origin=Ee(Se.origin);const{overflows:tt}=Q(Se);(tt[Ve].before<=De[Ve].before&&tt[Ve].after<=De[Ve].after||tt[Ve].before+tt[Ve].after<(De[Ve].before+De[Ve].after)/2)&&(ee=Se,pt=he[Ve]=!0)}}),pt)continue}De.x.before&&(oe+=De.x.before,$.x+=De.x.before),De.x.after&&(oe-=De.x.after,$.x-=De.x.after),De.y.before&&(le+=De.y.before,$.y+=De.y.before),De.y.after&&(le-=De.y.after,$.y-=De.y.after);{const Fe=V1($,H);ce.x=H.width-Fe.x.before-Fe.x.after,ce.y=H.height-Fe.y.before-Fe.y.after,oe+=Fe.x.before,$.x+=Fe.x.before,le+=Fe.y.before,$.y+=Fe.y.before}break}const ie=z1(ee.anchor);return Object.assign(r.value,{"--v-overlay-anchor-origin":`${ee.anchor.side} ${ee.anchor.align}`,transformOrigin:`${ee.origin.side} ${ee.origin.align}`,top:qt(Q_(le)),left:e.isRtl.value?void 0:qt(Q_(oe)),right:e.isRtl.value?qt(Q_(-oe)):void 0,minWidth:qt(ie==="y"?Math.min(d.value,B.width):d.value),maxWidth:qt(pS(ci(ce.x,d.value===1/0?0:d.value,b.value))),maxHeight:qt(pS(ci(ce.y,a.value===1/0?0:a.value,k.value)))}),{available:ce,contentBox:$,flipped:he}}return Ot(()=>[c.value,f.value,n.offset,n.minWidth,n.minHeight,n.maxWidth,n.maxHeight],()=>L()),zn(()=>{const $=L();if(!$)return;const{available:j,contentBox:q}=$;q.height>j.y&&requestAnimationFrame(()=>{L(),requestAnimationFrame(()=>{L()})})}),{updateLocation:L}}function Q_(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function pS(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Hy=!0;const Sg=[];function $V(e){!Hy||Sg.length?(Sg.push(e),Wy()):(Hy=!1,e(),Wy())}let gS=-1;function Wy(){cancelAnimationFrame(gS),gS=requestAnimationFrame(()=>{const e=Sg.shift();e&&e(),Sg.length?Wy():Hy=!0})}const ag={none:null,close:UV,block:GV,reposition:qV},jV=Ge({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in ag}},"VOverlay-scroll-strategies");function NV(e,n){if(!Xn)return;let r;Li(async()=>{r==null||r.stop(),n.isActive.value&&e.scrollStrategy&&(r=Md(),await new Promise(s=>setTimeout(s)),r.active&&r.run(()=>{var s;typeof e.scrollStrategy=="function"?e.scrollStrategy(n,e,r):(s=ag[e.scrollStrategy])==null||s.call(ag,n,e,r)}))}),fr(()=>{r==null||r.stop()})}function UV(e){function n(r){e.isActive.value=!1}TP(e.targetEl.value??e.contentEl.value,n)}function GV(e,n){var d;const r=(d=e.root.value)==null?void 0:d.offsetParent,s=[...new Set([...yg(e.targetEl.value,n.contained?r:void 0),...yg(e.contentEl.value,n.contained?r:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),c=window.innerWidth-document.documentElement.offsetWidth,f=(a=>a0(a)&&a)(r||document.documentElement);f&&e.root.value.classList.add("v-overlay--scroll-blocked"),s.forEach((a,b)=>{a.style.setProperty("--v-body-scroll-x",qt(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",qt(-a.scrollTop)),a!==document.documentElement&&a.style.setProperty("--v-scrollbar-offset",qt(c)),a.classList.add("v-overlay-scroll-blocked")}),fr(()=>{s.forEach((a,b)=>{const k=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),S=parseFloat(a.style.getPropertyValue("--v-body-scroll-y")),T=a.style.scrollBehavior;a.style.scrollBehavior="auto",a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-k,a.scrollTop=-S,a.style.scrollBehavior=T}),f&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function qV(e,n,r){let s=!1,c=-1,f=-1;function d(a){$V(()=>{var S,T;const b=performance.now();(T=(S=e.updateLocation).value)==null||T.call(S,a),s=(performance.now()-b)/(1e3/60)>2})}f=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{r.run(()=>{TP(e.targetEl.value??e.contentEl.value,a=>{s?(cancelAnimationFrame(c),c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{d(a)})})):d(a)})})}),fr(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(f),cancelAnimationFrame(c)})}function TP(e,n){const r=[document,...yg(e)];r.forEach(s=>{s.addEventListener("scroll",n,{passive:!0})}),fr(()=>{r.forEach(s=>{s.removeEventListener("scroll",n)})})}const Zy=Symbol.for("vuetify:v-menu"),w0=Ge({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function S0(e,n){let r=()=>{};function s(d){r==null||r();const a=Number(d?e.openDelay:e.closeDelay);return new Promise(b=>{r=aR(a,()=>{n==null||n(d),b(d)})})}function c(){return s(!0)}function f(){return s(!1)}return{clearDelay:r,runOpenDelay:c,runCloseDelay:f}}const HV=Ge({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...w0()},"VOverlay-activator");function WV(e,n){let{isActive:r,isTop:s,contentEl:c}=n;const f=ji("useActivator"),d=Xe();let a=!1,b=!1,k=!0;const S=te(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),T=te(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!S.value),{runOpenDelay:A,runCloseDelay:P}=S0(e,le=>{le===(e.openOnHover&&a||S.value&&b)&&!(e.openOnHover&&r.value&&!s.value)&&(r.value!==le&&(k=!0),r.value=le)}),R=Xe(),B={onClick:le=>{le.stopPropagation(),d.value=le.currentTarget||le.target,r.value||(R.value=[le.clientX,le.clientY]),r.value=!r.value},onMouseenter:le=>{var ce;(ce=le.sourceCapabilities)!=null&&ce.firesTouchEvents||(a=!0,d.value=le.currentTarget||le.target,A())},onMouseleave:le=>{a=!1,P()},onFocus:le=>{Ld(le.target,":focus-visible")!==!1&&(b=!0,le.stopPropagation(),d.value=le.currentTarget||le.target,A())},onBlur:le=>{b=!1,le.stopPropagation(),P()}},L=te(()=>{const le={};return T.value&&(le.onClick=B.onClick),e.openOnHover&&(le.onMouseenter=B.onMouseenter,le.onMouseleave=B.onMouseleave),S.value&&(le.onFocus=B.onFocus,le.onBlur=B.onBlur),le}),$=te(()=>{const le={};if(e.openOnHover&&(le.onMouseenter=()=>{a=!0,A()},le.onMouseleave=()=>{a=!1,P()}),S.value&&(le.onFocusin=()=>{b=!0,A()},le.onFocusout=()=>{b=!1,P()}),e.closeOnContentClick){const ce=xn(Zy,null);le.onClick=()=>{r.value=!1,ce==null||ce.closeParents()}}return le}),j=te(()=>{const le={};return e.openOnHover&&(le.onMouseenter=()=>{k&&(a=!0,k=!1,A())},le.onMouseleave=()=>{a=!1,P()}),le});Ot(s,le=>{var ce;le&&(e.openOnHover&&!a&&(!S.value||!b)||S.value&&!b&&(!e.openOnHover||!a))&&!((ce=c.value)!=null&&ce.contains(document.activeElement))&&(r.value=!1)}),Ot(r,le=>{le||setTimeout(()=>{R.value=void 0})},{flush:"post"});const q=vg();Li(()=>{q.value&&zn(()=>{d.value=q.el})});const H=vg(),ee=te(()=>e.target==="cursor"&&R.value?R.value:H.value?H.el:PP(e.target,f)||d.value),Q=te(()=>Array.isArray(ee.value)?void 0:ee.value);let oe;return Ot(()=>!!e.activator,le=>{le&&Xn?(oe=Md(),oe.run(()=>{ZV(e,f,{activatorEl:d,activatorEvents:L})})):oe&&oe.stop()},{flush:"post",immediate:!0}),fr(()=>{oe==null||oe.stop()}),{activatorEl:d,activatorRef:q,target:ee,targetEl:Q,targetRef:H,activatorEvents:L,contentEvents:$,scrimEvents:j}}function ZV(e,n,r){let{activatorEl:s,activatorEvents:c}=r;Ot(()=>e.activator,(b,k)=>{if(k&&b!==k){const S=a(k);S&&d(S)}b&&zn(()=>f())},{immediate:!0}),Ot(()=>e.activatorProps,()=>{f()}),fr(()=>{d()});function f(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&hR(b,ut(c.value,k))}function d(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;b&&fR(b,ut(c.value,k))}function a(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const k=PP(b,n);return s.value=(k==null?void 0:k.nodeType)===Node.ELEMENT_NODE?k:void 0,s.value}}function PP(e,n){var s,c;if(!e)return;let r;if(e==="parent"){let f=(c=(s=n==null?void 0:n.proxy)==null?void 0:s.$el)==null?void 0:c.parentNode;for(;f!=null&&f.hasAttribute("data-no-activator");)f=f.parentNode;r=f}else typeof e=="string"?r=document.querySelector(e):"$el"in e?r=e.$el:r=e;return r}function IP(){if(!Xn)return Rt(!1);const{ssr:e}=Qa();if(e){const n=Rt(!1);return gi(()=>{n.value=!0}),n}else return Rt(!0)}const k0=Ge({eager:Boolean},"lazy");function C0(e,n){const r=Rt(!1),s=Me(()=>r.value||e.eager||n.value);Ot(n,()=>r.value=!0);function c(){e.eager||(r.value=!1)}return{isBooted:r,hasContent:s,onAfterLeave:c}}function oc(){const n=ji("useScopeId").vnode.scopeId;return{scopeId:n?{[n]:""}:void 0}}const vS=Symbol.for("vuetify:stack"),vf=Sr([]);function KV(e,n,r){const s=ji("useStack"),c=!r,f=xn(vS,void 0),d=Sr({activeChildren:new Set});ri(vS,d);const a=Rt(Number(Us(n)));ra(e,()=>{var T;const S=(T=vf.at(-1))==null?void 0:T[1];a.value=S?S+10:Number(Us(n)),c&&vf.push([s.uid,a.value]),f==null||f.activeChildren.add(s.uid),fr(()=>{if(c){const A=mn(vf).findIndex(P=>P[0]===s.uid);vf.splice(A,1)}f==null||f.activeChildren.delete(s.uid)})});const b=Rt(!0);c&&Li(()=>{var T;const S=((T=vf.at(-1))==null?void 0:T[0])===s.uid;setTimeout(()=>b.value=S)});const k=Me(()=>!d.activeChildren.size);return{globalTop:Gd(b),localTop:k,stackStyles:Me(()=>({zIndex:a.value}))}}function YV(e){return{teleportTarget:te(()=>{const r=e();if(r===!0||!Xn)return;const s=r===!1?document.body:typeof r=="string"?document.querySelector(r):r;if(s==null)return;let c=[...s.children].find(f=>f.matches(".v-overlay-container"));return c||(c=document.createElement("div"),c.className="v-overlay-container",s.appendChild(c)),c})}}function XV(){return!0}function AP(e,n,r){if(!e||EP(e,r)===!1)return!1;const s=fT(n);if(typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&s.host===e.target)return!1;const c=(typeof r.value=="object"&&r.value.include||(()=>[]))();return c.push(n),!c.some(f=>f==null?void 0:f.contains(e.target))}function EP(e,n){return(typeof n.value=="object"&&n.value.closeConditional||XV)(e)}function JV(e,n,r){const s=typeof r.value=="function"?r.value:r.value.handler;e.shadowTarget=e.target,n._clickOutside.lastMousedownWasOutside&&AP(e,n,r)&&setTimeout(()=>{EP(e,r)&&s&&s(e)},0)}function _S(e,n){const r=fT(e);n(document),typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&n(r)}const Ky={mounted(e,n){const r=c=>JV(c,e,n),s=c=>{e._clickOutside.lastMousedownWasOutside=AP(c,e,n)};_S(e,c=>{c.addEventListener("click",r,!0),c.addEventListener("mousedown",s,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[n.instance.$.uid]={onClick:r,onMousedown:s}},beforeUnmount(e,n){e._clickOutside&&(_S(e,r=>{var f;if(!r||!((f=e._clickOutside)!=null&&f[n.instance.$.uid]))return;const{onClick:s,onMousedown:c}=e._clickOutside[n.instance.$.uid];r.removeEventListener("click",s,!0),r.removeEventListener("mousedown",c,!0)}),delete e._clickOutside[n.instance.$.uid])}};function QV(e){const{modelValue:n,color:r,...s}=e;return F(Cl,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&Y("div",ut({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},s),null)]})}const wm=Ge({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...HV(),...Kt(),...Zi(),...k0(),...zV(),...jV(),...Hn(),...ws()},"VOverlay"),Hs=ft()({name:"VOverlay",directives:{vClickOutside:Ky},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...wm()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{slots:r,attrs:s,emit:c}=n;const f=ji("VOverlay"),d=Xe(),a=Xe(),b=Xe(),k=nn(e,"modelValue"),S=te({get:()=>k.value,set:Le=>{Le&&e.disabled||(k.value=Le)}}),{themeClasses:T}=Qn(e),{rtlClasses:A,isRtl:P}=tr(),{hasContent:R,onAfterLeave:B}=C0(e,S),L=ti(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:$,localTop:j,stackStyles:q}=KV(S,()=>e.zIndex,e._disableGlobalStack),{activatorEl:H,activatorRef:ee,target:Q,targetEl:oe,targetRef:le,activatorEvents:ce,contentEvents:he,scrimEvents:ve}=WV(e,{isActive:S,isTop:j,contentEl:b}),{teleportTarget:ie}=YV(()=>{var ot,Je,Ct;const Le=e.attach||e.contained;if(Le)return Le;const _t=((ot=H==null?void 0:H.value)==null?void 0:ot.getRootNode())||((Ct=(Je=f.proxy)==null?void 0:Je.$el)==null?void 0:Ct.getRootNode());return _t instanceof ShadowRoot?_t:!1}),{dimensionStyles:be}=Ki(e),Be=IP(),{scopeId:De}=oc();Ot(()=>e.disabled,Le=>{Le&&(S.value=!1)});const{contentStyles:Fe,updateLocation:Ze}=VV(e,{isRtl:P,contentEl:b,target:Q,isActive:S});NV(e,{root:d,contentEl:b,targetEl:oe,isActive:S,updateLocation:Ze});function mt(Le){c("click:outside",Le),e.persistent?Nt():S.value=!1}function pt(Le){return S.value&&$.value&&(!e.scrim||Le.target===a.value||Le instanceof MouseEvent&&Le.shadowTarget===a.value)}Xn&&Ot(S,Le=>{Le?window.addEventListener("keydown",Ve):window.removeEventListener("keydown",Ve)},{immediate:!0}),Or(()=>{Xn&&window.removeEventListener("keydown",Ve)});function Ve(Le){var _t,ot,Je;Le.key==="Escape"&&$.value&&((_t=b.value)!=null&&_t.contains(document.activeElement)||c("keydown",Le),e.persistent?Nt():(S.value=!1,(ot=b.value)!=null&&ot.contains(document.activeElement)&&((Je=H.value)==null||Je.focus())))}function Se(Le){Le.key==="Escape"&&!$.value||c("keydown",Le)}const Ee=FT();ra(()=>e.closeOnBack,()=>{Vz(Ee,Le=>{$.value&&S.value?(Le(!1),e.persistent?Nt():S.value=!1):Le()})});const tt=Xe();Ot(()=>S.value&&(e.absolute||e.contained)&&ie.value==null,Le=>{if(Le){const _t=r0(d.value);_t&&_t!==document.scrollingElement&&(tt.value=_t.scrollTop)}});function Nt(){e.noClickAnimation||b.value&&Vu(b.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Hf})}function kt(){c("afterEnter")}function wt(){B(),c("afterLeave")}return bt(()=>{var Le;return Y(Ht,null,[(Le=r.activator)==null?void 0:Le.call(r,{isActive:S.value,targetRef:le,props:ut({ref:ee},ce.value,e.activatorProps)}),Be.value&&R.value&&F(xM,{disabled:!ie.value,to:ie.value},{default:()=>[Y("div",ut({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":S.value,"v-overlay--contained":e.contained},T.value,A.value,e.class],style:[q.value,{"--v-overlay-opacity":e.opacity,top:qt(tt.value)},e.style],ref:d,onKeydown:Se},De,s),[F(QV,ut({color:L,modelValue:S.value&&!!e.scrim,ref:a},ve.value),null),F(ia,{appear:!0,persisted:!0,transition:e.transition,target:Q.value,onAfterEnter:kt,onAfterLeave:wt},{default:()=>{var _t;return[Ri(Y("div",ut({ref:b,class:["v-overlay__content",e.contentClass],style:[be.value,Fe.value]},he.value,e.contentProps),[(_t=r.default)==null?void 0:_t.call(r,{isActive:S})]),[[xs,S.value],[Ky,{handler:mt,closeConditional:pt,include:()=>[H.value]}]])]}})])]})])}),{activatorEl:H,scrimEl:a,target:Q,animateClick:Nt,contentEl:b,globalTop:$,localTop:j,updateLocation:Ze}}}),MP=Ge({id:String,submenu:Boolean,disableInitialFocus:Boolean,...di(wm({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Gg}}),["absolute"])},"VMenu"),Fd=ft()({name:"VMenu",props:MP(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),{scopeId:c}=oc(),{isRtl:f}=tr(),d=_a(),a=Me(()=>e.id||`v-menu-${d}`),b=Xe(),k=xn(Zy,null),S=Rt(new Set);ri(Zy,{register(){S.value.add(d)},unregister(){S.value.delete(d)},closeParents(L){setTimeout(()=>{var $;!S.value.size&&!e.persistent&&(L==null||($=b.value)!=null&&$.contentEl&&!sR(L,b.value.contentEl))&&(s.value=!1,k==null||k.closeParents())},40)}}),Or(()=>{k==null||k.unregister(),document.removeEventListener("focusin",T)}),Nb(()=>s.value=!1);async function T(L){var q,H,ee;const $=L.relatedTarget,j=L.target;await zn(),s.value&&$!==j&&((q=b.value)!=null&&q.contentEl)&&((H=b.value)!=null&&H.globalTop)&&![document,b.value.contentEl].includes(j)&&!b.value.contentEl.contains(j)&&((ee=qf(b.value.contentEl)[0])==null||ee.focus())}Ot(s,L=>{L?(k==null||k.register(),Xn&&!e.disableInitialFocus&&document.addEventListener("focusin",T,{once:!0})):(k==null||k.unregister(),Xn&&document.removeEventListener("focusin",T))},{immediate:!0});function A(L){k==null||k.closeParents(L)}function P(L){var $,j,q,H,ee;if(!e.disabled)if(L.key==="Tab"||L.key==="Enter"&&!e.closeOnContentClick){if(L.key==="Enter"&&(L.target instanceof HTMLTextAreaElement||L.target instanceof HTMLInputElement&&L.target.closest("form")))return;L.key==="Enter"&&L.preventDefault(),QC(qf(($=b.value)==null?void 0:$.contentEl,!1),L.shiftKey?"prev":"next",oe=>oe.tabIndex>=0)||(s.value=!1,(q=(j=b.value)==null?void 0:j.activatorEl)==null||q.focus())}else e.submenu&&L.key===(f.value?"ArrowRight":"ArrowLeft")&&(s.value=!1,(ee=(H=b.value)==null?void 0:H.activatorEl)==null||ee.focus())}function R(L){var j;if(e.disabled)return;const $=(j=b.value)==null?void 0:j.contentEl;$&&s.value?L.key==="ArrowDown"?(L.preventDefault(),L.stopImmediatePropagation(),$u($,"next")):L.key==="ArrowUp"?(L.preventDefault(),L.stopImmediatePropagation(),$u($,"prev")):e.submenu&&(L.key===(f.value?"ArrowRight":"ArrowLeft")?s.value=!1:L.key===(f.value?"ArrowLeft":"ArrowRight")&&(L.preventDefault(),$u($,"first"))):(e.submenu?L.key===(f.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(L.key))&&(s.value=!0,L.preventDefault(),setTimeout(()=>setTimeout(()=>R(L))))}const B=te(()=>ut({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-controls":a.value,onKeydown:R},e.activatorProps));return bt(()=>{const L=Hs.filterProps(e);return F(Hs,ut({ref:b,id:a.value,class:["v-menu",e.class],style:e.style},L,{modelValue:s.value,"onUpdate:modelValue":$=>s.value=$,absolute:!0,activatorProps:B.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":A,onKeydown:P},c),{activator:r.activator,default:function(){for(var $=arguments.length,j=new Array($),q=0;q<$;q++)j[q]=arguments[q];return F(kn,{root:"VMenu"},{default:()=>{var H;return[(H=r.default)==null?void 0:H.call(r,...j)]}})}})}),Pr({id:a,openChildren:S},b)}}),eB=Ge({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Kt(),...ws({transition:{component:f0}})},"VCounter"),Yg=ft()({name:"VCounter",functional:!0,props:eB(),setup(e,n){let{slots:r}=n;const s=Me(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return bt(()=>F(ia,{transition:e.transition},{default:()=>[Ri(Y("div",{class:vt(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Bt(e.style)},[r.default?r.default({counter:s.value,max:e.max,value:e.value}):s.value]),[[xs,e.active]])]})),{}}}),tB=Ge({floating:Boolean,...Kt()},"VFieldLabel"),wf=ft()({name:"VFieldLabel",props:tB(),setup(e,n){let{slots:r}=n;return bt(()=>F(Yd,{class:vt(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Bt(e.style),"aria-hidden":e.floating||void 0},r)),{}}}),nB=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Sm=Ge({appendInnerIcon:an,bgColor:String,clearable:Boolean,clearIcon:{type:an,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:an,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>nB.includes(e)},"onClick:clear":Vr(),"onClick:appendInner":Vr(),"onClick:prependInner":Vr(),...Kt(),...Wg(),..._i(),...Hn()},"VField"),Pl=ft()({name:"VField",inheritAttrs:!1,props:{id:String,...bm(),...Sm()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{themeClasses:f}=Qn(e),{loaderClasses:d}=gm(e),{focusClasses:a,isFocused:b,focus:k,blur:S}=Mo(e),{InputIcon:T}=XT(e),{roundedClasses:A}=Vi(e),{rtlClasses:P}=tr(),R=Me(()=>e.dirty||e.active),B=Me(()=>!!(e.label||c.label)),L=Me(()=>!e.singleLine&&B.value),$=_a(),j=te(()=>e.id||`input-${$}`),q=Me(()=>`${j.value}-messages`),H=Xe(),ee=Xe(),Q=Xe(),oe=te(()=>["plain","underlined"].includes(e.variant)),le=te(()=>e.error||e.disabled?void 0:R.value&&b.value?e.color:e.baseColor),ce=te(()=>{if(!(!e.iconColor||e.glow&&!b.value))return e.iconColor===!0?le.value:e.iconColor}),{backgroundColorClasses:he,backgroundColorStyles:ve}=ti(()=>e.bgColor),{textColorClasses:ie,textColorStyles:be}=Br(le);Ot(R,Fe=>{if(L.value){const Ze=H.value.$el,mt=ee.value.$el;requestAnimationFrame(()=>{const pt=e0(Ze),Ve=mt.getBoundingClientRect(),Se=Ve.x-pt.x,Ee=Ve.y-pt.y-(pt.height/2-Ve.height/2),tt=Ve.width/.75,Nt=Math.abs(tt-pt.width)>1?{maxWidth:qt(tt)}:void 0,kt=getComputedStyle(Ze),wt=getComputedStyle(mt),Le=parseFloat(kt.transitionDuration)*1e3||150,_t=parseFloat(wt.getPropertyValue("--v-field-label-scale")),ot=wt.getPropertyValue("color");Ze.style.visibility="visible",mt.style.visibility="hidden",Vu(Ze,{transform:`translate(${Se}px, ${Ee}px) scale(${_t})`,color:ot,...Nt},{duration:Le,easing:Hf,direction:Fe?"normal":"reverse"}).finished.then(()=>{Ze.style.removeProperty("visibility"),mt.style.removeProperty("visibility")})})}},{flush:"post"});const Be=te(()=>({isActive:R,isFocused:b,controlRef:Q,blur:S,focus:k}));function De(Fe){Fe.target!==document.activeElement&&Fe.preventDefault()}return bt(()=>{var Se,Ee,tt;const Fe=e.variant==="outlined",Ze=!!(c["prepend-inner"]||e.prependInnerIcon),mt=!!(e.clearable||c.clear)&&!e.disabled,pt=!!(c["append-inner"]||e.appendInnerIcon||mt),Ve=()=>c.label?c.label({...Be.value,label:e.label,props:{for:j.value}}):e.label;return Y("div",ut({class:["v-field",{"v-field--active":R.value,"v-field--appended":pt,"v-field--center-affix":e.centerAffix??!oe.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Ze,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!Ve(),[`v-field--variant-${e.variant}`]:!0},f.value,he.value,a.value,d.value,A.value,P.value,e.class],style:[ve.value,e.style],onClick:De},r),[Y("div",{class:"v-field__overlay"},null),F(vm,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:c.loader}),Ze&&Y("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&F(T,{key:"prepend-icon",name:"prependInner",color:ce.value},null),(Se=c["prepend-inner"])==null?void 0:Se.call(c,Be.value)]),Y("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&L.value&&F(wf,{key:"floating-label",ref:ee,class:vt([ie.value]),floating:!0,for:j.value,style:Bt(be.value)},{default:()=>[Ve()]}),B.value&&F(wf,{key:"label",ref:H,for:j.value},{default:()=>[Ve()]}),((Ee=c.default)==null?void 0:Ee.call(c,{...Be.value,props:{id:j.value,class:"v-field__input","aria-describedby":q.value},focus:k,blur:S}))??Y("div",{id:j.value,class:"v-field__input","aria-describedby":q.value},null)]),mt&&F(m0,{key:"clear"},{default:()=>[Ri(Y("div",{class:"v-field__clearable",onMousedown:Nt=>{Nt.preventDefault(),Nt.stopPropagation()}},[F(kn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[c.clear?c.clear({...Be.value,props:{onFocus:k,onBlur:S,onClick:e["onClick:clear"],tabindex:-1}}):F(T,{name:"clear",onFocus:k,onBlur:S,tabindex:-1},null)]})]),[[xs,e.dirty]])]}),pt&&Y("div",{key:"append",class:"v-field__append-inner"},[(tt=c["append-inner"])==null?void 0:tt.call(c,Be.value),e.appendInnerIcon&&F(T,{key:"append-icon",name:"appendInner",color:ce.value},null)]),Y("div",{class:vt(["v-field__outline",ie.value]),style:Bt(be.value)},[Fe&&Y(Ht,null,[Y("div",{class:"v-field__outline__start"},null),L.value&&Y("div",{class:"v-field__outline__notch"},[F(wf,{ref:ee,floating:!0,for:j.value},{default:()=>[Ve()]})]),Y("div",{class:"v-field__outline__end"},null)]),oe.value&&L.value&&F(wf,{ref:ee,floating:!0,for:j.value},{default:()=>[Ve()]})])])}),{controlRef:Q,fieldIconColor:ce}}});function DP(e){function n(r,s){var c,f;!e.autofocus||!r||(f=(c=s[0].target)==null?void 0:c.focus)==null||f.call(c)}return{onIntersect:n}}const iB=["color","file","time","date","datetime-local","week","month"],km=Ge({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Do(),...Sm()},"VTextField"),To=ft()({name:"VTextField",directives:{vIntersect:ko},inheritAttrs:!1,props:km(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const f=nn(e,"modelValue"),{isFocused:d,focus:a,blur:b}=Mo(e),{onIntersect:k}=DP(e),S=te(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:(f.value??"").toString().length),T=te(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),A=te(()=>["plain","underlined"].includes(e.variant)),P=Xe(),R=Xe(),B=Xe(),L=te(()=>iB.includes(e.type)||e.persistentPlaceholder||d.value||e.active);function $(){d.value||a(),zn(()=>{B.value!==document.activeElement&&zn(()=>{var Q;return(Q=B.value)==null?void 0:Q.focus()})})}function j(Q){s("mousedown:control",Q),Q.target!==B.value&&($(),Q.preventDefault())}function q(Q){s("click:control",Q)}function H(Q,oe){Q.stopPropagation(),$(),zn(()=>{f.value=null,oe(),$g(e["onClick:clear"],Q)})}function ee(Q){var le;const oe=Q.target;if(f.value=oe.value,(le=e.modelModifiers)!=null&&le.trim&&["text","search","password","tel","url"].includes(e.type)){const ce=[oe.selectionStart,oe.selectionEnd];zn(()=>{oe.selectionStart=ce[0],oe.selectionEnd=ce[1]})}}return bt(()=>{const Q=!!(c.counter||e.counter!==!1&&e.counter!=null),oe=!!(Q||c.details),[le,ce]=Al(r),{modelValue:he,...ve}=Wr.filterProps(e),ie=Pl.filterProps(e);return F(Wr,ut({ref:P,modelValue:f.value,"onUpdate:modelValue":be=>f.value=be,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":A.value},e.class],style:e.style},le,ve,{centerAffix:!A.value,focused:d.value}),{...c,default:be=>{let{id:Be,isDisabled:De,isDirty:Fe,isReadonly:Ze,isValid:mt,reset:pt}=be;return F(Pl,ut({ref:R,onMousedown:j,onClick:q,"onClick:clear":Ve=>H(Ve,pt),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},ie,{id:Be.value,active:L.value||Fe.value,dirty:Fe.value||e.dirty,disabled:De.value,focused:d.value,error:mt.value===!1}),{...c,default:Ve=>{let{props:{class:Se,...Ee}}=Ve;const tt=Ri(Y("input",ut({ref:B,value:f.value,onInput:ee,autofocus:e.autofocus,readonly:Ze.value,disabled:De.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:$,onBlur:b},Ee,ce),null),[[ko,{handler:k},null,{once:!0}]]);return Y(Ht,null,[e.prefix&&Y("span",{class:"v-text-field__prefix"},[Y("span",{class:"v-text-field__prefix__text"},[e.prefix])]),c.default?Y("div",{class:vt(Se),"data-no-activator":""},[c.default(),tt]):So(tt,{class:Se}),e.suffix&&Y("span",{class:"v-text-field__suffix"},[Y("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:oe?be=>{var Be;return Y(Ht,null,[(Be=c.details)==null?void 0:Be.call(c,be),Q&&Y(Ht,null,[Y("span",null,null),F(Yg,{active:e.persistentCounter||d.value,value:S.value,max:T.value,disabled:e.disabled},c.counter)])])}:void 0})}),Pr({},P,R,B)}}),rB=Ge({renderless:Boolean,...Kt()},"VVirtualScrollItem"),RP=ft()({name:"VVirtualScrollItem",inheritAttrs:!1,props:rB(),emits:{"update:height":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{resizeRef:f,contentRect:d}=vs(void 0,"border");Ot(()=>{var a;return(a=d.value)==null?void 0:a.height},a=>{a!=null&&s("update:height",a)}),bt(()=>{var a,b;return e.renderless?Y(Ht,null,[(a=c.default)==null?void 0:a.call(c,{itemRef:f})]):Y("div",ut({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},r),[(b=c.default)==null?void 0:b.call(c)])})}}),aB=-1,sB=1,ey=100,LP=Ge({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function zP(e,n){const r=Qa(),s=Rt(0);Li(()=>{s.value=parseFloat(e.itemHeight||0)});const c=Rt(0),f=Rt(Math.ceil((parseInt(e.height)||r.height.value)/(s.value||16))||1),d=Rt(0),a=Rt(0),b=Xe(),k=Xe();let S=0;const{resizeRef:T,contentRect:A}=vs();Li(()=>{T.value=b.value});const P=te(()=>{var Ve;return b.value===document.documentElement?r.height.value:((Ve=A.value)==null?void 0:Ve.height)||parseInt(e.height)||0}),R=te(()=>!!(b.value&&k.value&&P.value&&s.value));let B=Array.from({length:n.value.length}),L=Array.from({length:n.value.length});const $=Rt(0);let j=-1;function q(Ve){return B[Ve]||s.value}const H=KC(()=>{const Ve=performance.now();L[0]=0;const Se=n.value.length;for(let Ee=1;Ee<=Se-1;Ee++)L[Ee]=(L[Ee-1]||0)+q(Ee-1);$.value=Math.max($.value,performance.now()-Ve)},$),ee=Ot(R,Ve=>{Ve&&(ee(),S=k.value.offsetTop,H.immediate(),Fe(),~j&&zn(()=>{Xn&&window.requestAnimationFrame(()=>{mt(j),j=-1})}))});fr(()=>{H.clear()});function Q(Ve,Se){const Ee=B[Ve],tt=s.value;s.value=tt?Math.min(s.value,Se):Se,(Ee!==Se||tt!==s.value)&&(B[Ve]=Se,H())}function oe(Ve){Ve=ci(Ve,0,n.value.length-1);const Se=Math.floor(Ve),Ee=Ve%1,tt=Se+1,Nt=L[Se]||0,kt=L[tt]||Nt;return Nt+(kt-Nt)*Ee}function le(Ve){return oB(L,Ve)}let ce=0,he=0,ve=0;Ot(P,(Ve,Se)=>{Se&&(Fe(),Ve<Se&&requestAnimationFrame(()=>{he=0,Fe()}))});let ie=-1;function be(){if(!b.value||!k.value)return;const Ve=b.value.scrollTop,Se=performance.now();Se-ve>500?(he=Math.sign(Ve-ce),S=k.value.offsetTop):he=Ve-ce,ce=Ve,ve=Se,window.clearTimeout(ie),ie=window.setTimeout(Be,500),Fe()}function Be(){!b.value||!k.value||(he=0,ve=0,window.clearTimeout(ie),Fe())}let De=-1;function Fe(){cancelAnimationFrame(De),De=requestAnimationFrame(Ze)}function Ze(){if(!b.value||!P.value||!s.value)return;const Ve=ce-S,Se=Math.sign(he),Ee=Math.max(0,Ve-ey),tt=ci(le(Ee),0,n.value.length),Nt=Ve+P.value+ey,kt=ci(le(Nt)+1,tt+1,n.value.length);if((Se!==aB||tt<c.value)&&(Se!==sB||kt>f.value)){const wt=oe(c.value)-oe(tt),Le=oe(kt)-oe(f.value);Math.max(wt,Le)>ey?(c.value=tt,f.value=kt):(tt<=0&&(c.value=tt),kt>=n.value.length&&(f.value=kt))}d.value=oe(c.value),a.value=oe(n.value.length)-oe(f.value)}function mt(Ve){const Se=oe(Ve);!b.value||Ve&&!Se?j=Ve:b.value.scrollTop=Se}const pt=te(()=>n.value.slice(c.value,f.value).map((Ve,Se)=>{const Ee=Se+c.value;return{raw:Ve,index:Ee,key:Wi(Ve,e.itemKey,Ee)}}));return Ot(n,()=>{B=Array.from({length:n.value.length}),L=Array.from({length:n.value.length}),H.immediate(),Fe()},{deep:1}),{calculateVisibleItems:Fe,containerRef:b,markerRef:k,computedItems:pt,paddingTop:d,paddingBottom:a,scrollToIndex:mt,handleScroll:be,handleScrollend:Be,handleItemResize:Q}}function oB(e,n){let r=e.length-1,s=0,c=0,f=null,d=-1;if(e[r]<n)return r;for(;s<=r;)if(c=s+r>>1,f=e[c],f>n)r=c-1;else if(f<n)d=c,s=c+1;else return f===n?c:s;return d}const lB=Ge({items:{type:Array,default:()=>[]},renderless:Boolean,...LP(),...Kt(),...Zi()},"VVirtualScroll"),Xg=ft()({name:"VVirtualScroll",props:lB(),setup(e,n){let{slots:r}=n;const s=ji("VVirtualScroll"),{dimensionStyles:c}=Ki(e),{calculateVisibleItems:f,containerRef:d,markerRef:a,handleScroll:b,handleScrollend:k,handleItemResize:S,scrollToIndex:T,paddingTop:A,paddingBottom:P,computedItems:R}=zP(e,Me(()=>e.items));return ra(()=>e.renderless,()=>{function B(){var j,q;const $=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";d.value===document.documentElement?(document[$]("scroll",b,{passive:!0}),document[$]("scrollend",k)):((j=d.value)==null||j[$]("scroll",b,{passive:!0}),(q=d.value)==null||q[$]("scrollend",k))}gi(()=>{d.value=r0(s.vnode.el,!0),B(!0)}),fr(B)}),bt(()=>{const B=R.value.map(L=>F(RP,{key:L.key,renderless:e.renderless,"onUpdate:height":$=>S(L.index,$)},{default:$=>{var j;return(j=r.default)==null?void 0:j.call(r,{item:L.raw,index:L.index,...$})}}));return e.renderless?Y(Ht,null,[Y("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:qt(A.value)}},null),B,Y("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:qt(P.value)}},null)]):Y("div",{ref:d,class:vt(["v-virtual-scroll",e.class]),onScrollPassive:b,onScrollend:k,style:Bt([c.value,e.style])},[Y("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:qt(A.value),paddingBottom:qt(P.value)}},[B])])}),{calculateVisibleItems:f,scrollToIndex:T}}});function T0(e,n){const r=Rt(!1);let s;function c(a){cancelAnimationFrame(s),r.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{r.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(r.value){const b=Ot(r,()=>{b(),a()})}else a()})}async function d(a){var S,T;if(a.key==="Tab"&&((S=n.value)==null||S.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const b=(T=e.value)==null?void 0:T.$el;if(!b)return;(a.key==="Home"||a.key==="End")&&b.scrollTo({top:a.key==="Home"?0:b.scrollHeight,behavior:"smooth"}),await f();const k=b.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const A=b.getBoundingClientRect().top;for(const P of k)if(P.getBoundingClientRect().top>=A){P.focus();break}}else{const A=b.getBoundingClientRect().bottom;for(const P of[...k].reverse())if(P.getBoundingClientRect().bottom<=A){P.focus();break}}}return{onScrollPassive:c,onKeydown:d}}const P0=Ge({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:an,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...yP({itemChildren:!1})},"Select"),uB=Ge({...P0(),...di(km({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:{component:Gg}})},"VSelect"),I0=ft()({name:"VSelect",props:uB(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=vi(),c=Xe(),f=Xe(),d=Xe(),{items:a,transformIn:b,transformOut:k}=x0(e),S=nn(e,"modelValue",[],Ve=>b(Ve===null?[null]:Di(Ve)),Ve=>{const Se=k(Ve);return e.multiple?Se:Se[0]??null}),T=te(()=>typeof e.counterValue=="function"?e.counterValue(S.value):typeof e.counterValue=="number"?e.counterValue:S.value.length),A=xm(e),P=te(()=>S.value.map(Ve=>Ve.value)),R=Rt(!1);let B="",L=-1,$;const j=te(()=>e.hideSelected?a.value.filter(Ve=>!S.value.some(Se=>(e.valueComparator||zr)(Se,Ve))):a.value),q=te(()=>e.hideNoData&&!j.value.length||A.isReadonly.value||A.isDisabled.value),H=nn(e,"menu"),ee=te({get:()=>H.value,set:Ve=>{var Se;H.value&&!Ve&&((Se=f.value)!=null&&Se.openChildren.size)||Ve&&q.value||(H.value=Ve)}}),Q=Me(()=>ee.value?e.closeText:e.openText),oe=te(()=>{var Ve;return{...e.menuProps,activatorProps:{...((Ve=e.menuProps)==null?void 0:Ve.activatorProps)||{},"aria-haspopup":"listbox"}}}),le=Xe(),ce=T0(le,c);function he(Ve){e.openOnClear&&(ee.value=!0)}function ve(){q.value||(ee.value=!ee.value)}function ie(Ve){zd(Ve)&&be(Ve)}function be(Ve){var ot,Je,Ct;if(!Ve.key||A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(Ve.key)&&Ve.preventDefault(),["Enter","ArrowDown"," "].includes(Ve.key)&&(ee.value=!0),["Escape","Tab"].includes(Ve.key)&&(ee.value=!1),Ve.key==="Home"?(ot=le.value)==null||ot.focus("first"):Ve.key==="End"&&((Je=le.value)==null||Je.focus("last"));const Se=1e3;if(!zd(Ve))return;const Ee=performance.now();Ee-$>Se&&(B="",L=-1),B+=Ve.key.toLowerCase(),$=Ee;const tt=j.value;function Nt(){let ae=kt();return ae||B.at(-1)===B.at(-2)&&(B=B.slice(0,-1),ae=kt(),ae)||(L=-1,ae=kt(),ae)?ae:(B=Ve.key.toLowerCase(),kt())}function kt(){for(let ae=L+1;ae<tt.length;ae++){const de=tt[ae];if(de.title.toLowerCase().startsWith(B))return[de,ae]}}const wt=Nt();if(!wt)return;const[Le,_t]=wt;L=_t,(Ct=le.value)==null||Ct.focus(_t),e.multiple||(S.value=[Le])}function Be(Ve){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!Ve.props.disabled)if(e.multiple){const Ee=S.value.findIndex(Nt=>(e.valueComparator||zr)(Nt.value,Ve.value)),tt=Se??!~Ee;if(~Ee){const Nt=tt?[...S.value,Ve]:[...S.value];Nt.splice(Ee,1),S.value=Nt}else tt&&(S.value=[...S.value,Ve])}else{const Ee=Se!==!1;S.value=Ee?[Ve]:[],zn(()=>{ee.value=!1})}}function De(Ve){var Se;(Se=le.value)!=null&&Se.$el.contains(Ve.relatedTarget)||(ee.value=!1)}function Fe(){var Ve;e.eager&&((Ve=d.value)==null||Ve.calculateVisibleItems())}function Ze(){var Ve;R.value&&((Ve=c.value)==null||Ve.focus())}function mt(Ve){R.value=!0}function pt(Ve){if(Ve==null)S.value=[];else if(Ld(c.value,":autofill")||Ld(c.value,":-webkit-autofill")){const Se=a.value.find(Ee=>Ee.title===Ve);Se&&Be(Se)}else c.value&&(c.value.value="")}return Ot(ee,()=>{if(!e.hideSelected&&ee.value&&S.value.length){const Ve=j.value.findIndex(Se=>S.value.some(Ee=>(e.valueComparator||zr)(Ee.value,Se.value)));Xn&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var Se;Ve>=0&&((Se=d.value)==null||Se.scrollToIndex(Ve))})}}),Ot(()=>e.items,(Ve,Se)=>{ee.value||R.value&&!Se.length&&Ve.length&&(ee.value=!0)}),bt(()=>{const Ve=!!(e.chips||r.chip),Se=!!(!e.hideNoData||j.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),Ee=S.value.length>0,tt=To.filterProps(e),Nt=Ee||!R.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return F(To,ut({ref:c},tt,{modelValue:S.value.map(kt=>kt.props.value).join(", "),"onUpdate:modelValue":pt,focused:R.value,"onUpdate:focused":kt=>R.value=kt,validationValue:S.externalValue,counterValue:T.value,dirty:Ee,class:["v-select",{"v-select--active-menu":ee.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":S.value.length,"v-select--selection-slot":!!r.selection},e.class],style:e.style,inputmode:"none",placeholder:Nt,"onClick:clear":he,"onMousedown:control":ve,onBlur:De,onKeydown:be,"aria-label":s(Q.value),title:s(Q.value)}),{...r,default:()=>Y(Ht,null,[F(Fd,ut({ref:f,modelValue:ee.value,"onUpdate:modelValue":kt=>ee.value=kt,activator:"parent",contentClass:"v-select__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Fe,onAfterLeave:Ze},oe.value),{default:()=>[Se&&F(Od,ut({ref:le,selected:P.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:kt=>kt.preventDefault(),onKeydown:ie,onFocusin:mt,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},ce,e.listProps),{default:()=>{var kt,wt,Le;return[(kt=r["prepend-item"])==null?void 0:kt.call(r),!j.value.length&&!e.hideNoData&&(((wt=r["no-data"])==null?void 0:wt.call(r))??F(_s,{key:"no-data",title:s(e.noDataText)},null)),F(Xg,{ref:d,renderless:!0,items:j.value,itemKey:"value"},{default:_t=>{var ze,Ye,ct;let{item:ot,index:Je,itemRef:Ct}=_t;const ae=lR(ot.props),de=ut(ot.props,{ref:Ct,key:ot.value,onClick:()=>Be(ot,null)});return ot.type==="divider"?((ze=r.divider)==null?void 0:ze.call(r,{props:ot.raw,index:Je}))??F($a,ut(ot.props,{key:`divider-${Je}`}),null):ot.type==="subheader"?((Ye=r.subheader)==null?void 0:Ye.call(r,{props:ot.raw,index:Je}))??F(Jd,ut(ot.props,{key:`subheader-${Je}`}),null):((ct=r.item)==null?void 0:ct.call(r,{item:ot,index:Je,props:de}))??F(_s,ut(de,{role:"option"}),{prepend:et=>{let{isSelected:It}=et;return Y(Ht,null,[e.multiple&&!e.hideSelected?F(qs,{key:ot.value,modelValue:It,ripple:!1,tabindex:"-1"},null):void 0,ae.prependAvatar&&F(Ja,{image:ae.prependAvatar},null),ae.prependIcon&&F(Jn,{icon:ae.prependIcon},null)])}})}}),(Le=r["append-item"])==null?void 0:Le.call(r)]}})]}),S.value.map((kt,wt)=>{function Le(Ct){Ct.stopPropagation(),Ct.preventDefault(),Be(kt,!1)}const _t={"onClick:close":Le,onKeydown(Ct){Ct.key!=="Enter"&&Ct.key!==" "||(Ct.preventDefault(),Ct.stopPropagation(),Le(Ct))},onMousedown(Ct){Ct.preventDefault(),Ct.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ot=Ve?!!r.chip:!!r.selection,Je=ot?jg(Ve?r.chip({item:kt,index:wt,props:_t}):r.selection({item:kt,index:wt})):void 0;if(!(ot&&!Je))return Y("div",{key:kt.value,class:"v-select__selection"},[Ve?r.chip?F(kn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:kt.title}}},{default:()=>[Je]}):F(Xd,ut({key:"chip",closable:e.closableChips,size:"small",text:kt.title,disabled:kt.props.disabled},_t),null):Je??Y("span",{class:"v-select__selection-text"},[kt.title,e.multiple&&wt<S.value.length-1&&Y("span",{class:"v-select__selection-comma"},[Ft(",")])])])})]),"append-inner":function(){var _t,ot;for(var kt=arguments.length,wt=new Array(kt),Le=0;Le<kt;Le++)wt[Le]=arguments[Le];return Y(Ht,null,[(_t=r["append-inner"])==null?void 0:_t.call(r,...wt),e.menuIcon?F(Jn,{class:"v-select__menu-icon",color:(ot=c.value)==null?void 0:ot.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Pr({isFocused:R,menu:ee,select:Be},c)}}),cB=(e,n,r)=>{if(e==null||n==null)return-1;if(!n.length)return 0;e=e.toString().toLocaleLowerCase(),n=n.toString().toLocaleLowerCase();const s=[];let c=e.indexOf(n);for(;~c;)s.push([c,c+n.length]),c=e.indexOf(n,c+n.length);return s.length?s:-1};function ty(e,n){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+n.length]]:Array.isArray(e[0])?e:[e]}const Qd=Ge({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function dB(e,n,r){var a;const s=[],c=(r==null?void 0:r.default)??cB,f=r!=null&&r.filterKeys?Di(r.filterKeys):!1,d=Object.keys((r==null?void 0:r.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return s;e:for(let b=0;b<e.length;b++){const[k,S=k]=Di(e[b]),T={},A={};let P=-1;if((n||d>0)&&!(r!=null&&r.noFilter)){if(typeof k=="object"){if(k.type==="divider"||k.type==="subheader")continue;const L=f||Object.keys(S);for(const $ of L){const j=Wi(S,$),q=(a=r==null?void 0:r.customKeyFilter)==null?void 0:a[$];if(P=q?q(j,n,k):c(j,n,k),P!==-1&&P!==!1)q?T[$]=ty(P,n):A[$]=ty(P,n);else if((r==null?void 0:r.filterMode)==="every")continue e}}else P=c(k,n,k),P!==-1&&P!==!1&&(A.title=ty(P,n));const R=Object.keys(A).length,B=Object.keys(T).length;if(!R&&!B||(r==null?void 0:r.filterMode)==="union"&&B!==d&&!R||(r==null?void 0:r.filterMode)==="intersection"&&(B!==d||!R))continue}s.push({index:b,matches:{...A,...T}})}return s}function eh(e,n,r,s){const c=Rt([]),f=Rt(new Map),d=te(()=>s!=null&&s.transform?kr(n).map(b=>[b,s.transform(b)]):kr(n));Li(()=>{const b=typeof r=="function"?r():kr(r),k=typeof b!="string"&&typeof b!="number"?"":String(b),S=dB(d.value,k,{customKeyFilter:{...e.customKeyFilter,...kr(s==null?void 0:s.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),T=kr(n),A=[],P=new Map;S.forEach(R=>{let{index:B,matches:L}=R;const $=T[B];A.push($),P.set($.value,L)}),c.value=A,f.value=P});function a(b){return f.value.get(b.value)}return{filteredItems:c,filteredMatches:f,getMatches:a}}function VP(e,n,r){return r==null||!r.length?n:r.map((s,c)=>{const f=c===0?0:r[c-1][1],d=[Y("span",{class:vt(`${e}__unmask`)},[n.slice(f,s[0])]),Y("span",{class:vt(`${e}__mask`)},[n.slice(s[0],s[1])])];return c===r.length-1&&d.push(Y("span",{class:vt(`${e}__unmask`)},[n.slice(s[1])])),Y(Ht,null,[d])})}const hB=Ge({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Qd({filterKeys:["title"]}),...P0(),...di(km({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:!1})},"VAutocomplete"),fB=ft()({name:"VAutocomplete",props:hB(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=vi(),c=Xe(),f=Rt(!1),d=Rt(!0),a=Rt(!1),b=Xe(),k=Xe(),S=Rt(-1),{items:T,transformIn:A,transformOut:P}=x0(e),{textColorClasses:R,textColorStyles:B}=Br(()=>{var Je;return(Je=c.value)==null?void 0:Je.color}),L=nn(e,"search",""),$=nn(e,"modelValue",[],Je=>A(Je===null?[null]:Di(Je)),Je=>{const Ct=P(Je);return e.multiple?Ct:Ct[0]??null}),j=te(()=>typeof e.counterValue=="function"?e.counterValue($.value):typeof e.counterValue=="number"?e.counterValue:$.value.length),q=xm(e),{filteredItems:H,getMatches:ee}=eh(e,T,()=>d.value?"":L.value),Q=te(()=>e.hideSelected?H.value.filter(Je=>!$.value.some(Ct=>Ct.value===Je.value)):H.value),oe=te(()=>!!(e.chips||r.chip)),le=te(()=>oe.value||!!r.selection),ce=te(()=>$.value.map(Je=>Je.props.value)),he=te(()=>{var Ct;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&L.value===((Ct=Q.value[0])==null?void 0:Ct.title))&&Q.value.length>0&&!d.value&&!a.value}),ve=te(()=>e.hideNoData&&!Q.value.length||q.isReadonly.value||q.isDisabled.value),ie=nn(e,"menu"),be=te({get:()=>ie.value,set:Je=>{var Ct;ie.value&&!Je&&((Ct=b.value)!=null&&Ct.openChildren.size)||Je&&ve.value||(ie.value=Je)}}),Be=te(()=>be.value?e.closeText:e.openText),De=Xe(),Fe=T0(De,c);function Ze(Je){e.openOnClear&&(be.value=!0),L.value=""}function mt(){ve.value||(be.value=!0)}function pt(Je){ve.value||(f.value&&(Je.preventDefault(),Je.stopPropagation()),be.value=!be.value)}function Ve(Je){var Ct;(zd(Je)||Je.key==="Backspace")&&((Ct=c.value)==null||Ct.focus())}function Se(Je){var de,ze,Ye,ct,et;if(q.isReadonly.value)return;const Ct=(de=c.value)==null?void 0:de.selectionStart,ae=$.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Je.key)&&Je.preventDefault(),["Enter","ArrowDown"].includes(Je.key)&&(be.value=!0),["Escape"].includes(Je.key)&&(be.value=!1),he.value&&["Enter","Tab"].includes(Je.key)&&!$.value.some(It=>{let{value:dt}=It;return dt===Q.value[0].value})&&ot(Q.value[0]),Je.key==="ArrowDown"&&he.value&&((ze=De.value)==null||ze.focus("next")),["Backspace","Delete"].includes(Je.key)){if(!e.multiple&&le.value&&$.value.length>0&&!L.value)return ot($.value[0],!1);if(~S.value){Je.preventDefault();const It=S.value;ot($.value[S.value],!1),S.value=It>=ae-1?ae-2:It}else Je.key==="Backspace"&&!L.value&&(S.value=ae-1);return}if(e.multiple)if(Je.key==="ArrowLeft"){if(S.value<0&&Ct&&Ct>0)return;const It=S.value>-1?S.value-1:ae-1;if($.value[It])S.value=It;else{const dt=((Ye=L.value)==null?void 0:Ye.length)??null;S.value=-1,(ct=c.value)==null||ct.setSelectionRange(dt,dt)}}else if(Je.key==="ArrowRight"){if(S.value<0)return;const It=S.value+1;$.value[It]?S.value=It:(S.value=-1,(et=c.value)==null||et.setSelectionRange(0,0))}else~S.value&&zd(Je)&&(S.value=-1)}function Ee(Je){if(Ld(c.value,":autofill")||Ld(c.value,":-webkit-autofill")){const Ct=T.value.find(ae=>ae.title===Je.target.value);Ct&&ot(Ct)}}function tt(){var Je;e.eager&&((Je=k.value)==null||Je.calculateVisibleItems())}function Nt(){var Je;f.value&&(d.value=!0,(Je=c.value)==null||Je.focus())}function kt(Je){f.value=!0,setTimeout(()=>{a.value=!0})}function wt(Je){a.value=!1}function Le(Je){(Je==null||Je===""&&!e.multiple&&!le.value)&&($.value=[])}const _t=Rt(!1);function ot(Je){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Je||Je.props.disabled))if(e.multiple){const ae=$.value.findIndex(ze=>(e.valueComparator||zr)(ze.value,Je.value)),de=Ct??!~ae;if(~ae){const ze=de?[...$.value,Je]:[...$.value];ze.splice(ae,1),$.value=ze}else de&&($.value=[...$.value,Je]);e.clearOnSelect&&(L.value="")}else{const ae=Ct!==!1;$.value=ae?[Je]:[],L.value=ae&&!le.value?Je.title:"",zn(()=>{be.value=!1,d.value=!0})}}return Ot(f,(Je,Ct)=>{var ae;Je!==Ct&&(Je?(_t.value=!0,L.value=e.multiple||le.value?"":String(((ae=$.value.at(-1))==null?void 0:ae.props.title)??""),d.value=!0,zn(()=>_t.value=!1)):(!e.multiple&&L.value==null&&($.value=[]),be.value=!1,(e.multiple||le.value)&&(L.value=""),S.value=-1))}),Ot(L,Je=>{!f.value||_t.value||(Je&&(be.value=!0),d.value=!Je)}),Ot(be,()=>{if(!e.hideSelected&&be.value&&$.value.length){const Je=Q.value.findIndex(Ct=>$.value.some(ae=>Ct.value===ae.value));Xn&&window.requestAnimationFrame(()=>{var Ct;Je>=0&&((Ct=k.value)==null||Ct.scrollToIndex(Je))})}}),Ot(()=>e.items,(Je,Ct)=>{be.value||f.value&&!Ct.length&&Je.length&&(be.value=!0)}),bt(()=>{const Je=!!(!e.hideNoData||Q.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),Ct=$.value.length>0,ae=To.filterProps(e);return F(To,ut({ref:c},ae,{modelValue:L.value,"onUpdate:modelValue":[de=>L.value=de,Le],focused:f.value,"onUpdate:focused":de=>f.value=de,validationValue:$.externalValue,counterValue:j.value,dirty:Ct,onChange:Ee,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":be.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!le.value,"v-autocomplete--selecting-index":S.value>-1},e.class],style:e.style,readonly:q.isReadonly.value,placeholder:Ct?void 0:e.placeholder,"onClick:clear":Ze,"onMousedown:control":mt,onKeydown:Se}),{...r,default:()=>Y(Ht,null,[F(Fd,ut({ref:b,modelValue:be.value,"onUpdate:modelValue":de=>be.value=de,activator:"parent",contentClass:"v-autocomplete__content",disabled:ve.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:tt,onAfterLeave:Nt},e.menuProps),{default:()=>[Je&&F(Od,ut({ref:De,filterable:!0,selected:ce.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:de=>de.preventDefault(),onKeydown:Ve,onFocusin:kt,onFocusout:wt,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Fe,e.listProps),{default:()=>{var de,ze,Ye;return[(de=r["prepend-item"])==null?void 0:de.call(r),!Q.value.length&&!e.hideNoData&&(((ze=r["no-data"])==null?void 0:ze.call(r))??F(_s,{key:"no-data",title:s(e.noDataText)},null)),F(Xg,{ref:k,renderless:!0,items:Q.value,itemKey:"value"},{default:ct=>{var At,sn,Wt;let{item:et,index:It,itemRef:dt}=ct;const Lt=ut(et.props,{ref:dt,key:et.value,active:he.value&&It===0?!0:void 0,onClick:()=>ot(et,null)});return et.type==="divider"?((At=r.divider)==null?void 0:At.call(r,{props:et.raw,index:It}))??F($a,ut(et.props,{key:`divider-${It}`}),null):et.type==="subheader"?((sn=r.subheader)==null?void 0:sn.call(r,{props:et.raw,index:It}))??F(Jd,ut(et.props,{key:`subheader-${It}`}),null):((Wt=r.item)==null?void 0:Wt.call(r,{item:et,index:It,props:Lt}))??F(_s,ut(Lt,{role:"option"}),{prepend:tn=>{let{isSelected:dn}=tn;return Y(Ht,null,[e.multiple&&!e.hideSelected?F(qs,{key:et.value,modelValue:dn,ripple:!1,tabindex:"-1"},null):void 0,et.props.prependAvatar&&F(Ja,{image:et.props.prependAvatar},null),et.props.prependIcon&&F(Jn,{icon:et.props.prependIcon},null)])},title:()=>{var tn;return d.value?et.title:VP("v-autocomplete",et.title,(tn=ee(et))==null?void 0:tn.title)}})}}),(Ye=r["append-item"])==null?void 0:Ye.call(r)]}})]}),$.value.map((de,ze)=>{function Ye(dt){dt.stopPropagation(),dt.preventDefault(),ot(de,!1)}const ct={"onClick:close":Ye,onKeydown(dt){dt.key!=="Enter"&&dt.key!==" "||(dt.preventDefault(),dt.stopPropagation(),Ye(dt))},onMousedown(dt){dt.preventDefault(),dt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},et=oe.value?!!r.chip:!!r.selection,It=et?jg(oe.value?r.chip({item:de,index:ze,props:ct}):r.selection({item:de,index:ze})):void 0;if(!(et&&!It))return Y("div",{key:de.value,class:vt(["v-autocomplete__selection",ze===S.value&&["v-autocomplete__selection--selected",R.value]]),style:Bt(ze===S.value?B.value:{})},[oe.value?r.chip?F(kn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:de.title}}},{default:()=>[It]}):F(Xd,ut({key:"chip",closable:e.closableChips,size:"small",text:de.title,disabled:de.props.disabled},ct),null):It??Y("span",{class:"v-autocomplete__selection-text"},[de.title,e.multiple&&ze<$.value.length-1&&Y("span",{class:"v-autocomplete__selection-comma"},[Ft(",")])])])})]),"append-inner":function(){var ct,et;for(var de=arguments.length,ze=new Array(de),Ye=0;Ye<de;Ye++)ze[Ye]=arguments[Ye];return Y(Ht,null,[(ct=r["append-inner"])==null?void 0:ct.call(r,...ze),e.menuIcon?F(Jn,{class:"v-autocomplete__menu-icon",color:(et=c.value)==null?void 0:et.fieldIconColor,icon:e.menuIcon,onMousedown:pt,onClick:eT,"aria-label":s(Be.value),title:s(Be.value),tabindex:"-1"},null):void 0])}})}),Pr({isFocused:f,isPristine:d,menu:be,search:L,filteredItems:H,select:ot},c)}}),mB=Ge({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:an,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Kt(),...Eo({location:"top end"}),..._i(),...wn(),...Hn(),...ws({transition:"scale-rotate-transition"}),...Zi()},"VBadge"),pB=ft()({name:"VBadge",inheritAttrs:!1,props:mB(),setup(e,n){const{backgroundColorClasses:r,backgroundColorStyles:s}=ti(()=>e.color),{roundedClasses:c}=Vi(e),{t:f}=vi(),{textColorClasses:d,textColorStyles:a}=Br(()=>e.textColor),{themeClasses:b}=c0(),{locationStyles:k}=sc(e,!0,T=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(T)?Number(e.offsetY??0):["left","right"].includes(T)?Number(e.offsetX??0):0)),{dimensionStyles:S}=Ki(e);return bt(()=>{const T=Number(e.content),A=!e.max||isNaN(T)?e.content:T<=Number(e.max)?T:`${e.max}+`,[P,R]=Ty(n.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return F(e.tag,ut({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},R,{style:e.style}),{default:()=>{var B,L;return[Y("div",{class:"v-badge__wrapper"},[(L=(B=n.slots).default)==null?void 0:L.call(B),F(ia,{transition:e.transition},{default:()=>{var $,j;return[Ri(Y("span",ut({class:["v-badge__badge",b.value,r.value,c.value,d.value],style:[s.value,a.value,S.value,e.inline?{}:k.value],"aria-atomic":"true","aria-label":f(e.label,T),"aria-live":"polite",role:"status"},P),[e.dot?void 0:n.slots.badge?(j=($=n.slots).badge)==null?void 0:j.call($):e.icon?F(Jn,{icon:e.icon},null):A]),[[xs,e.modelValue]])]}})])]}})}),{}}}),gB=Ge({color:String,density:String,...Kt()},"VBannerActions"),BP=ft()({name:"VBannerActions",props:gB(),setup(e,n){let{slots:r}=n;return zi({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),bt(()=>{var s;return Y("div",{class:vt(["v-banner-actions",e.class]),style:Bt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),OP=Ao("v-banner-text"),vB=Ge({avatar:String,bgColor:String,color:String,icon:an,lines:String,stacked:Boolean,sticky:Boolean,text:String,...ya(),...Kt(),...mr(),...Zi(),...Ju({mobile:null}),...nr(),...Eo(),...Zd(),..._i(),...wn(),...Hn()},"VBanner"),_B=ft()({name:"VBanner",props:vB(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.bgColor),{borderClasses:f}=Pa(e),{densityClasses:d}=sa(e),{displayClasses:a,mobile:b}=Qa(e),{dimensionStyles:k}=Ki(e),{elevationClasses:S}=Tr(e),{locationStyles:T}=sc(e),{positionClasses:A}=Kd(e),{roundedClasses:P}=Vi(e),{themeClasses:R}=Qn(e),B=Me(()=>e.color),L=Me(()=>e.density);zi({VBannerActions:{color:B,density:L}}),bt(()=>{const $=!!(e.text||r.text),j=!!(e.avatar||e.icon),q=!!(j||r.prepend);return F(e.tag,{class:vt(["v-banner",{"v-banner--stacked":e.stacked||b.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},R.value,s.value,f.value,d.value,a.value,S.value,A.value,P.value,e.class]),style:Bt([c.value,k.value,T.value,e.style]),role:"banner"},{default:()=>{var H;return[q&&Y("div",{key:"prepend",class:"v-banner__prepend"},[r.prepend?F(kn,{key:"prepend-defaults",disabled:!j,defaults:{VAvatar:{color:B.value,density:L.value,icon:e.icon,image:e.avatar}}},r.prepend):F(Ja,{key:"prepend-avatar",color:B.value,density:L.value,icon:e.icon,image:e.avatar},null)]),Y("div",{class:"v-banner__content"},[$&&F(OP,{key:"text"},{default:()=>{var ee;return[((ee=r.text)==null?void 0:ee.call(r))??e.text]}}),(H=r.default)==null?void 0:H.call(r)]),r.actions&&F(BP,{key:"actions"},r.actions)]}})})}}),yB=Ge({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...ya(),...Kt(),...mr(),...nr(),..._i(),...Qu({name:"bottom-navigation"}),...wn({tag:"header"}),...ic({selectedClass:"v-btn--selected"}),...Hn()},"VBottomNavigation"),bB=ft()({name:"VBottomNavigation",props:yB(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=c0(),{borderClasses:c}=Pa(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{densityClasses:a}=sa(e),{elevationClasses:b}=Tr(e),{roundedClasses:k}=Vi(e),{ssrBootStyles:S}=tc(),T=te(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),A=nn(e,"active",e.active),{layoutItemStyles:P}=ec({id:e.name,order:te(()=>parseInt(e.order,10)),position:Me(()=>"bottom"),layoutSize:Me(()=>A.value?T.value:0),elementSize:T,active:A,absolute:Me(()=>e.absolute)});return Ml(e,g0),zi({VBtn:{baseColor:Me(()=>e.baseColor),color:Me(()=>e.color),density:Me(()=>e.density),stacked:Me(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),bt(()=>F(e.tag,{class:vt(["v-bottom-navigation",{"v-bottom-navigation--active":A.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},s.value,f.value,c.value,a.value,b.value,k.value,e.class]),style:Bt([d.value,P.value,{height:qt(T.value)},S.value,e.style])},{default:()=>[r.default&&Y("div",{class:"v-bottom-navigation__content"},[r.default()])]})),{}}}),FP=Ge({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...wm({origin:"center center",scrollStrategy:"block",transition:{component:Gg},zIndex:2400})},"VDialog"),Yy=ft()({name:"VDialog",props:FP(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=nn(e,"modelValue"),{scopeId:f}=oc(),d=Xe();function a(S){var P,R;const T=S.relatedTarget,A=S.target;if(T!==A&&((P=d.value)!=null&&P.contentEl)&&((R=d.value)!=null&&R.globalTop)&&![document,d.value.contentEl].includes(A)&&!d.value.contentEl.contains(A)){const B=qf(d.value.contentEl);if(!B.length)return;const L=B[0],$=B[B.length-1];T===L?$.focus():L.focus()}}Or(()=>{document.removeEventListener("focusin",a)}),Xn&&Ot(()=>c.value&&e.retainFocus,S=>{S?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0});function b(){var S;r("afterEnter"),(e.scrim||e.retainFocus)&&((S=d.value)!=null&&S.contentEl)&&!d.value.contentEl.contains(document.activeElement)&&d.value.contentEl.focus({preventScroll:!0})}function k(){r("afterLeave")}return Ot(c,async S=>{var T;S||(await zn(),(T=d.value.activatorEl)==null||T.focus({preventScroll:!0}))}),bt(()=>{const S=Hs.filterProps(e),T=ut({"aria-haspopup":"dialog"},e.activatorProps),A=ut({tabindex:-1},e.contentProps);return F(Hs,ut({ref:d,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},S,{modelValue:c.value,"onUpdate:modelValue":P=>c.value=P,"aria-modal":"true",activatorProps:T,contentProps:A,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:k},f),{activator:s.activator,default:function(){for(var P=arguments.length,R=new Array(P),B=0;B<P;B++)R[B]=arguments[B];return F(kn,{root:"VDialog"},{default:()=>{var L;return[(L=s.default)==null?void 0:L.call(s,...R)]}})}})}),Pr({},d)}}),xB=Ge({inset:Boolean,...FP({transition:"bottom-sheet-transition"})},"VBottomSheet"),wB=ft()({name:"VBottomSheet",props:xB(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue");return bt(()=>{const c=Yy.filterProps(e);return F(Yy,ut(c,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),r)}),{}}}),SB=Ge({divider:[Number,String],...Kt()},"VBreadcrumbsDivider"),$P=ft()({name:"VBreadcrumbsDivider",props:SB(),setup(e,n){let{slots:r}=n;return bt(()=>{var s;return Y("li",{"aria-hidden":"true",class:vt(["v-breadcrumbs-divider",e.class]),style:Bt(e.style)},[((s=r==null?void 0:r.default)==null?void 0:s.call(r))??e.divider])}),{}}}),kB=Ge({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Kt(),...ym(),...wn({tag:"li"})},"VBreadcrumbsItem"),jP=ft()({name:"VBreadcrumbsItem",props:kB(),setup(e,n){let{slots:r,attrs:s}=n;const c=_m(e,s),f=te(()=>{var b;return e.active||((b=c.isActive)==null?void 0:b.value)}),{textColorClasses:d,textColorStyles:a}=Br(()=>f.value?e.activeColor:e.color);return bt(()=>F(e.tag,{class:vt(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":f.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:f.value&&e.activeClass},d.value,e.class]),style:Bt([a.value,e.style]),"aria-current":f.value?"page":void 0},{default:()=>{var b,k;return[c.isLink.value?Y("a",ut({class:"v-breadcrumbs-item--link",onClick:c.navigate},c.linkProps),[((k=r.default)==null?void 0:k.call(r))??e.title]):((b=r.default)==null?void 0:b.call(r))??e.title]}})),{}}}),CB=Ge({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:an,items:{type:Array,default:()=>[]},...Kt(),...mr(),..._i(),...wn({tag:"ul"})},"VBreadcrumbs"),TB=ft()({name:"VBreadcrumbs",props:CB(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.bgColor),{densityClasses:f}=sa(e),{roundedClasses:d}=Vi(e);zi({VBreadcrumbsDivider:{divider:Me(()=>e.divider)},VBreadcrumbsItem:{activeClass:Me(()=>e.activeClass),activeColor:Me(()=>e.activeColor),color:Me(()=>e.color),disabled:Me(()=>e.disabled)}});const a=te(()=>e.items.map(b=>typeof b=="string"?{item:{title:b},raw:b}:{item:b,raw:b}));return bt(()=>{const b=!!(r.prepend||e.icon);return F(e.tag,{class:vt(["v-breadcrumbs",s.value,f.value,d.value,e.class]),style:Bt([c.value,e.style])},{default:()=>{var k;return[b&&Y("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[r.prepend?F(kn,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},r.prepend):F(Jn,{key:"prepend-icon",start:!0,icon:e.icon},null)]),a.value.map((S,T,A)=>{var B;let{item:P,raw:R}=S;return Y(Ht,null,[((B=r.item)==null?void 0:B.call(r,{item:P,index:T}))??F(jP,ut({key:T,disabled:T>=A.length-1},typeof P=="string"?{title:P}:P),{default:r.title?()=>{var L;return(L=r.title)==null?void 0:L.call(r,{item:P,index:T})}:void 0}),T<A.length-1&&F($P,null,{default:r.divider?()=>{var L;return(L=r.divider)==null?void 0:L.call(r,{item:R,index:T})}:void 0})])}),(k=r.default)==null?void 0:k.call(r)]}})}),{}}}),NP=ft()({name:"VCardActions",props:Kt(),setup(e,n){let{slots:r}=n;return zi({VBtn:{slim:!0,variant:"text"}}),bt(()=>{var s;return Y("div",{class:vt(["v-card-actions",e.class]),style:Bt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),PB=Ge({opacity:[Number,String],...Kt(),...wn()},"VCardSubtitle"),UP=ft()({name:"VCardSubtitle",props:PB(),setup(e,n){let{slots:r}=n;return bt(()=>F(e.tag,{class:vt(["v-card-subtitle",e.class]),style:Bt([{"--v-card-subtitle-opacity":e.opacity},e.style])},r)),{}}}),GP=Ao("v-card-title"),IB=Ge({appendAvatar:String,appendIcon:an,prependAvatar:String,prependIcon:an,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Kt(),...mr()},"VCardItem"),qP=ft()({name:"VCardItem",props:IB(),setup(e,n){let{slots:r}=n;return bt(()=>{var k;const s=!!(e.prependAvatar||e.prependIcon),c=!!(s||r.prepend),f=!!(e.appendAvatar||e.appendIcon),d=!!(f||r.append),a=!!(e.title!=null||r.title),b=!!(e.subtitle!=null||r.subtitle);return Y("div",{class:vt(["v-card-item",e.class]),style:Bt(e.style)},[c&&Y("div",{key:"prepend",class:"v-card-item__prepend"},[r.prepend?F(kn,{key:"prepend-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},r.prepend):Y(Ht,null,[e.prependAvatar&&F(Ja,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&F(Jn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),Y("div",{class:"v-card-item__content"},[a&&F(GP,{key:"title"},{default:()=>{var S;return[((S=r.title)==null?void 0:S.call(r))??yn(e.title)]}}),b&&F(UP,{key:"subtitle"},{default:()=>{var S;return[((S=r.subtitle)==null?void 0:S.call(r))??yn(e.subtitle)]}}),(k=r.default)==null?void 0:k.call(r)]),d&&Y("div",{key:"append",class:"v-card-item__append"},[r.append?F(kn,{key:"append-defaults",disabled:!f,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},r.append):Y(Ht,null,[e.appendIcon&&F(Jn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&F(Ja,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),AB=Ge({opacity:[Number,String],...Kt(),...wn()},"VCardText"),HP=ft()({name:"VCardText",props:AB(),setup(e,n){let{slots:r}=n;return bt(()=>F(e.tag,{class:vt(["v-card-text",e.class]),style:Bt([{"--v-card-text-opacity":e.opacity},e.style])},r)),{}}}),EB=Ge({appendAvatar:String,appendIcon:an,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:an,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ya(),...Kt(),...mr(),...Zi(),...nr(),...Wg(),...Eo(),...Zd(),..._i(),...ym(),...wn(),...Hn(),...es({variant:"elevated"})},"VCard"),MB=ft()({name:"VCard",directives:{vRipple:aa},props:EB(),setup(e,n){let{attrs:r,slots:s}=n;const{themeClasses:c}=Qn(e),{borderClasses:f}=Pa(e),{colorClasses:d,colorStyles:a,variantClasses:b}=nc(e),{densityClasses:k}=sa(e),{dimensionStyles:S}=Ki(e),{elevationClasses:T}=Tr(e),{loaderClasses:A}=gm(e),{locationStyles:P}=sc(e),{positionClasses:R}=Kd(e),{roundedClasses:B}=Vi(e),L=_m(e,r);return bt(()=>{const $=e.link!==!1&&L.isLink.value,j=!e.disabled&&e.link!==!1&&(e.link||L.isClickable.value),q=$?"a":e.tag,H=!!(s.title||e.title!=null),ee=!!(s.subtitle||e.subtitle!=null),Q=H||ee,oe=!!(s.append||e.appendAvatar||e.appendIcon),le=!!(s.prepend||e.prependAvatar||e.prependIcon),ce=!!(s.image||e.image),he=Q||le||oe,ve=!!(s.text||e.text!=null);return Ri(F(q,ut({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":j},c.value,f.value,d.value,k.value,T.value,A.value,R.value,B.value,b.value,e.class],style:[a.value,S.value,P.value,e.style],onClick:j&&L.navigate,tabindex:e.disabled?-1:void 0},L.linkProps),{default:()=>{var ie;return[ce&&Y("div",{key:"image",class:"v-card__image"},[s.image?F(kn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},s.image):F(Co,{key:"image-img",cover:!0,src:e.image},null)]),F(vm,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:s.loader}),he&&F(qP,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:s.item,prepend:s.prepend,title:s.title,subtitle:s.subtitle,append:s.append}),ve&&F(HP,{key:"text"},{default:()=>{var be;return[((be=s.text)==null?void 0:be.call(s))??e.text]}}),(ie=s.default)==null?void 0:ie.call(s),s.actions&&F(NP,null,{default:s.actions}),El(j,"v-card")]}}),[[aa,j&&e.ripple]])}),{}}}),DB=e=>{const{touchstartX:n,touchendX:r,touchstartY:s,touchendY:c}=e,f=.5,d=16;e.offsetX=r-n,e.offsetY=c-s,Math.abs(e.offsetY)<f*Math.abs(e.offsetX)&&(e.left&&r<n-d&&e.left(e),e.right&&r>n+d&&e.right(e)),Math.abs(e.offsetX)<f*Math.abs(e.offsetY)&&(e.up&&c<s-d&&e.up(e),e.down&&c>s+d&&e.down(e))};function RB(e,n){var s;const r=e.changedTouches[0];n.touchstartX=r.clientX,n.touchstartY=r.clientY,(s=n.start)==null||s.call(n,{originalEvent:e,...n})}function LB(e,n){var s;const r=e.changedTouches[0];n.touchendX=r.clientX,n.touchendY=r.clientY,(s=n.end)==null||s.call(n,{originalEvent:e,...n}),DB(n)}function zB(e,n){var s;const r=e.changedTouches[0];n.touchmoveX=r.clientX,n.touchmoveY=r.clientY,(s=n.move)==null||s.call(n,{originalEvent:e,...n})}function VB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:r=>RB(r,n),touchend:r=>LB(r,n),touchmove:r=>zB(r,n)}}function BB(e,n){var a;const r=n.value,s=r!=null&&r.parent?e.parentElement:e,c=(r==null?void 0:r.options)??{passive:!0},f=(a=n.instance)==null?void 0:a.$.uid;if(!s||!f)return;const d=VB(n.value);s._touchHandlers=s._touchHandlers??Object.create(null),s._touchHandlers[f]=d,WC(d).forEach(b=>{s.addEventListener(b,d[b],c)})}function OB(e,n){var f,d;const r=(f=n.value)!=null&&f.parent?e.parentElement:e,s=(d=n.instance)==null?void 0:d.$.uid;if(!(r!=null&&r._touchHandlers)||!s)return;const c=r._touchHandlers[s];WC(c).forEach(a=>{r.removeEventListener(a,c[a])}),delete r._touchHandlers[s]}const kg={mounted:BB,unmounted:OB},WP=Symbol.for("vuetify:v-window"),ZP=Symbol.for("vuetify:v-window-group"),Jg=Ge({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Kt(),...wn(),...Hn()},"VWindow"),qu=ft()({name:"VWindow",directives:{vTouch:kg},props:Jg(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{isRtl:c}=tr(),{t:f}=vi(),d=Ml(e,ZP),a=Xe(),b=te(()=>c.value?!e.reverse:e.reverse),k=Rt(!1),S=te(()=>{const H=e.direction==="vertical"?"y":"x",Q=(b.value?!k.value:k.value)?"-reverse":"";return`v-window-${H}${Q}-transition`}),T=Rt(0),A=Xe(void 0),P=te(()=>d.items.value.findIndex(H=>d.selected.value.includes(H.id)));Ot(P,(H,ee)=>{const Q=d.items.value.length,oe=Q-1;Q<=2?k.value=H<ee:H===oe&&ee===0?k.value=!0:H===0&&ee===oe?k.value=!1:k.value=H<ee}),ri(WP,{transition:S,isReversed:k,transitionCount:T,transitionHeight:A,rootRef:a});const R=Me(()=>e.continuous||P.value!==0),B=Me(()=>e.continuous||P.value!==d.items.value.length-1);function L(){R.value&&d.prev()}function $(){B.value&&d.next()}const j=te(()=>{const H=[],ee={icon:c.value?e.nextIcon:e.prevIcon,class:`v-window__${b.value?"right":"left"}`,onClick:d.prev,"aria-label":f("$vuetify.carousel.prev")};H.push(R.value?r.prev?r.prev({props:ee}):F(Ln,ee,null):Y("div",null,null));const Q={icon:c.value?e.prevIcon:e.nextIcon,class:`v-window__${b.value?"left":"right"}`,onClick:d.next,"aria-label":f("$vuetify.carousel.next")};return H.push(B.value?r.next?r.next({props:Q}):F(Ln,Q,null):Y("div",null,null)),H}),q=te(()=>e.touch===!1?e.touch:{...{left:()=>{b.value?L():$()},right:()=>{b.value?$():L()},start:ee=>{let{originalEvent:Q}=ee;Q.stopPropagation()}},...e.touch===!0?{}:e.touch});return bt(()=>Ri(F(e.tag,{ref:a,class:vt(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows},s.value,e.class]),style:Bt(e.style)},{default:()=>{var H,ee;return[Y("div",{class:"v-window__container",style:{height:A.value}},[(H=r.default)==null?void 0:H.call(r,{group:d}),e.showArrows!==!1&&Y("div",{class:vt(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[j.value])]),(ee=r.additional)==null?void 0:ee.call(r,{group:d})]}}),[[kg,q.value]])),{group:d}}}),FB=Ge({color:String,cycle:Boolean,delimiterIcon:{type:an,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Jg({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),$B=ft()({name:"VCarousel",props:FB(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),{t:c}=vi(),f=Xe();let d=-1;Ot(s,b),Ot(()=>e.interval,b),Ot(()=>e.cycle,k=>{k?b():window.clearTimeout(d)}),gi(a);function a(){!e.cycle||!f.value||(d=window.setTimeout(f.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function b(){window.clearTimeout(d),window.requestAnimationFrame(a)}return bt(()=>{const k=qu.filterProps(e);return F(qu,ut({ref:f},k,{modelValue:s.value,"onUpdate:modelValue":S=>s.value=S,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:qt(e.height)},e.style]}),{default:r.default,additional:S=>{let{group:T}=S;return Y(Ht,null,[!e.hideDelimiters&&Y("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[T.items.value.length>0&&F(kn,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[T.items.value.map((A,P)=>{const R={id:`carousel-item-${A.id}`,"aria-label":c("$vuetify.carousel.ariaLabel.delimiter",P+1,T.items.value.length),class:["v-carousel__controls__item",T.isSelected(A.id)&&"v-btn--active"],onClick:()=>T.select(A.id,!0)};return r.item?r.item({props:R,item:A}):F(Ln,ut(A,R),null)})]})]),e.progress&&F(Hg,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(T.getItemIndex(s.value)+1)/T.items.value.length*100},null)])},prev:r.prev,next:r.next})}),{}}}),Qg=Ge({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Kt(),...rc(),...k0()},"VWindowItem"),Hu=ft()({name:"VWindowItem",directives:{vTouch:kg},props:Qg(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=xn(WP),c=ac(e,ZP),{isBooted:f}=tc();if(!s||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=Rt(!1),a=te(()=>f.value&&(s.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function b(){!d.value||!s||(d.value=!1,s.transitionCount.value>0&&(s.transitionCount.value-=1,s.transitionCount.value===0&&(s.transitionHeight.value=void 0)))}function k(){var R;d.value||!s||(d.value=!0,s.transitionCount.value===0&&(s.transitionHeight.value=qt((R=s.rootRef.value)==null?void 0:R.clientHeight)),s.transitionCount.value+=1)}function S(){b()}function T(R){d.value&&zn(()=>{!a.value||!d.value||!s||(s.transitionHeight.value=qt(R.clientHeight))})}const A=te(()=>{const R=s.isReversed.value?e.reverseTransition:e.transition;return a.value?{name:typeof R!="string"?s.transition.value:R,onBeforeEnter:k,onAfterEnter:b,onEnterCancelled:S,onBeforeLeave:k,onAfterLeave:b,onLeaveCancelled:S,onEnter:T}:!1}),{hasContent:P}=C0(e,c.isSelected);return bt(()=>F(ia,{transition:A.value,disabled:!f.value},{default:()=>{var R;return[Ri(Y("div",{class:vt(["v-window-item",c.selectedClass.value,e.class]),style:Bt(e.style)},[P.value&&((R=r.default)==null?void 0:R.call(r))]),[[xs,c.isSelected.value]])]}})),{groupItem:c}}}),jB=Ge({...zT(),...Qg()},"VCarouselItem"),NB=ft()({name:"VCarouselItem",inheritAttrs:!1,props:jB(),setup(e,n){let{slots:r,attrs:s}=n;bt(()=>{const c=Co.filterProps(e),f=Hu.filterProps(e);return F(Hu,ut({class:["v-carousel-item",e.class]},f),{default:()=>[F(Co,ut(s,c),r)]})})}}),UB=Ao("v-code","code"),GB=Ge({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Kt()},"VColorPickerCanvas"),qB=ja({name:"VColorPickerCanvas",props:GB(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,n){let{emit:r}=n;const s=Rt(!1),c=Xe(),f=Rt(parseFloat(e.width)),d=Rt(parseFloat(e.height)),a=Xe({x:0,y:0}),b=te({get:()=>a.value,set(L){var q,H;if(!c.value)return;const{x:$,y:j}=L;a.value=L,r("update:color",{h:((q=e.color)==null?void 0:q.h)??0,s:ci($,0,f.value)/f.value,v:1-ci(j,0,d.value)/d.value,a:((H=e.color)==null?void 0:H.a)??1})}}),k=te(()=>{const{x:L,y:$}=b.value,j=parseInt(e.dotSize,10)/2;return{width:qt(e.dotSize),height:qt(e.dotSize),transform:`translate(${qt(L-j)}, ${qt($-j)})`}}),{resizeRef:S}=vs(L=>{var q;if(!((q=S.el)!=null&&q.offsetParent))return;const{width:$,height:j}=L[0].contentRect;f.value=$,d.value=j});function T(L,$,j){const{left:q,top:H,width:ee,height:Q}=j;b.value={x:ci(L-q,0,ee),y:ci($-H,0,Q)}}function A(L){L.type==="mousedown"&&L.preventDefault(),!e.disabled&&(P(L),window.addEventListener("mousemove",P),window.addEventListener("mouseup",R),window.addEventListener("touchmove",P),window.addEventListener("touchend",R))}function P(L){if(e.disabled||!c.value)return;s.value=!0;const $=rR(L);T($.clientX,$.clientY,c.value.getBoundingClientRect())}function R(){window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",P),window.removeEventListener("touchend",R)}function B(){var H;if(!c.value)return;const L=c.value,$=L.getContext("2d");if(!$)return;const j=$.createLinearGradient(0,0,L.width,0);j.addColorStop(0,"hsla(0, 0%, 100%, 1)"),j.addColorStop(1,`hsla(${((H=e.color)==null?void 0:H.h)??0}, 100%, 50%, 1)`),$.fillStyle=j,$.fillRect(0,0,L.width,L.height);const q=$.createLinearGradient(0,0,0,L.height);q.addColorStop(0,"hsla(0, 0%, 0%, 0)"),q.addColorStop(1,"hsla(0, 0%, 0%, 1)"),$.fillStyle=q,$.fillRect(0,0,L.width,L.height)}return Ot(()=>{var L;return(L=e.color)==null?void 0:L.h},B,{immediate:!0}),Ot(()=>[f.value,d.value],(L,$)=>{B(),a.value={x:b.value.x*L[0]/$[0],y:b.value.y*L[1]/$[1]}},{flush:"post"}),Ot(()=>e.color,()=>{if(s.value){s.value=!1;return}a.value=e.color?{x:e.color.s*f.value,y:(1-e.color.v)*d.value}:{x:0,y:0}},{deep:!0,immediate:!0}),gi(()=>B()),bt(()=>Y("div",{ref:S,class:vt(["v-color-picker-canvas",e.class]),style:Bt(e.style),onMousedown:A,onTouchstartPassive:A},[Y("canvas",{ref:c,width:f.value,height:d.value},null),e.color&&Y("div",{class:vt(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Bt(k.value)},null)])),{}}});function HB(e,n){if(n){const{a:r,...s}=e;return s}return e}function WB(e,n){if(n==null||typeof n=="string"){const r=e.a!==1;if(n!=null&&n.startsWith("rgb(")){const{r:c,g:f,b:d,a}=Gs(e);return`rgb(${c} ${f} ${d}`+(r?` / ${a})`:")")}else if(n!=null&&n.startsWith("hsl(")){const{h:c,s:f,l:d,a}=Dy(e);return`hsl(${c} ${Math.round(f*100)} ${Math.round(d*100)}`+(r?` / ${a})`:")")}const s=dT(e);return e.a===1?s.slice(0,7):s}if(typeof n=="object"){let r;return zu(n,["r","g","b"])?r=Gs(e):zu(n,["h","s","l"])?r=Dy(e):zu(n,["h","s","v"])&&(r=e),HB(r,!zu(n,["a"])&&e.a===1)}return e}const kd={h:0,s:0,v:0,a:1},Xy={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,n)=>({...e,r:Number(n)})},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,n)=>({...e,g:Number(n)})},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,n)=>({...e,b:Number(n)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:n}=e;return n!=null?Math.round(n*100)/100:1},getColor:(e,n)=>({...e,a:Number(n)})}],to:Gs,from:hm};var bk;const ZB={...Xy,inputs:(bk=Xy.inputs)==null?void 0:bk.slice(0,3)},Jy={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,n)=>({...e,h:Number(n)})},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,n)=>({...e,s:Number(n)})},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,n)=>({...e,l:Number(n)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:n}=e;return n!=null?Math.round(n*100)/100:1},getColor:(e,n)=>({...e,a:Number(n)})}],to:Dy,from:n0},KB={...Jy,inputs:Jy.inputs.slice(0,3)},KP={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,n)=>n}],to:dT,from:AR},YB={...KP,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,n)=>n}]},ju={rgb:ZB,rgba:Xy,hsl:KB,hsla:Jy,hex:YB,hexa:KP},XB=e=>{let{label:n,...r}=e;return Y("div",{class:"v-color-picker-edit__input"},[Y("input",jE(DC(r)),null),Y("span",null,[n])])},JB=Ge({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(ju).includes(e)},modes:{type:Array,default:()=>Object.keys(ju),validator:e=>Array.isArray(e)&&e.every(n=>Object.keys(ju).includes(n))},...Kt()},"VColorPickerEdit"),QB=ja({name:"VColorPickerEdit",props:JB(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,n){let{emit:r}=n;const s=te(()=>e.modes.map(f=>({...ju[f],name:f}))),c=te(()=>{var a;const f=s.value.find(b=>b.name===e.mode);if(!f)return[];const d=e.color?f.to(e.color):null;return(a=f.inputs)==null?void 0:a.map(b=>{let{getValue:k,getColor:S,...T}=b;return{...f.inputProps,...T,disabled:e.disabled,value:d&&k(d),onChange:A=>{const P=A.target;P&&r("update:color",f.from(S(d??f.to(kd),P.value)))}}})});return bt(()=>{var f;return Y("div",{class:vt(["v-color-picker-edit",e.class]),style:Bt(e.style)},[(f=c.value)==null?void 0:f.map(d=>F(XB,d,null)),s.value.length>1&&F(Ln,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const d=s.value.findIndex(a=>a.name===e.mode);r("update:mode",s.value[(d+1)%s.value.length].name)}},null)])}),{}}}),A0=Symbol.for("vuetify:v-slider");function Qy(e,n,r){const s=r==="vertical",c=n.getBoundingClientRect(),f="touches"in e?e.touches[0]:e;return s?f.clientY-(c.top+c.height/2):f.clientX-(c.left+c.width/2)}function eO(e,n){return"touches"in e&&e.touches.length?e.touches[0][n]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][n]:e[n]}const YP=Ge({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,..._i(),...nr({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),XP=e=>{const n=te(()=>parseFloat(e.min)),r=te(()=>parseFloat(e.max)),s=te(()=>Number(e.step)>0?parseFloat(e.step):0),c=te(()=>Math.max(A1(s.value),A1(n.value)));function f(d){if(d=parseFloat(d),s.value<=0)return d;const a=ci(d,n.value,r.value),b=n.value%s.value;let k=Math.round((a-b)/s.value)*s.value+b;return a>k&&k+s.value>r.value&&(k=r.value),parseFloat(Math.min(k,r.value).toFixed(c.value))}return{min:n,max:r,step:s,decimals:c,roundValue:f}},JP=e=>{let{props:n,steps:r,onSliderStart:s,onSliderMove:c,onSliderEnd:f,getActiveThumb:d}=e;const{isRtl:a}=tr(),b=Me(()=>n.reverse),k=te(()=>n.direction==="vertical"),S=te(()=>k.value!==b.value),{min:T,max:A,step:P,decimals:R,roundValue:B}=r,L=te(()=>parseInt(n.thumbSize,10)),$=te(()=>parseInt(n.tickSize,10)),j=te(()=>parseInt(n.trackSize,10)),q=te(()=>(A.value-T.value)/P.value),H=Me(()=>n.disabled),ee=te(()=>n.error||n.disabled?void 0:n.thumbColor??n.color),Q=te(()=>n.error||n.disabled?void 0:n.trackColor??n.color),oe=te(()=>n.error||n.disabled?void 0:n.trackFillColor??n.color),le=Rt(!1),ce=Rt(0),he=Xe(),ve=Xe();function ie(wt){var ct;const Le=(ct=he.value)==null?void 0:ct.$el;if(!Le)return;const _t=n.direction==="vertical",ot=_t?"top":"left",Je=_t?"height":"width",Ct=_t?"clientY":"clientX",{[ot]:ae,[Je]:de}=Le.getBoundingClientRect(),ze=eO(wt,Ct);let Ye=ci((ze-ae-ce.value)/de)||0;return(_t?S.value:S.value!==a.value)&&(Ye=1-Ye),B(T.value+Ye*(A.value-T.value))}const be=wt=>{const Le=ie(wt);Le!=null&&f({value:Le}),le.value=!1,ce.value=0},Be=wt=>{const Le=ie(wt);ve.value=d(wt),ve.value&&(le.value=!0,ve.value.contains(wt.target)?ce.value=Qy(wt,ve.value,n.direction):(ce.value=0,Le!=null&&c({value:Le})),Le!=null&&s({value:Le}),zn(()=>{var _t;return(_t=ve.value)==null?void 0:_t.focus()}))},De={passive:!0,capture:!0};function Fe(wt){const Le=ie(wt);Le!=null&&c({value:Le})}function Ze(wt){wt.stopPropagation(),wt.preventDefault(),be(wt),window.removeEventListener("mousemove",Fe,De),window.removeEventListener("mouseup",Ze)}function mt(wt){var Le;be(wt),window.removeEventListener("touchmove",Fe,De),(Le=wt.target)==null||Le.removeEventListener("touchend",mt)}function pt(wt){var Le;Be(wt),window.addEventListener("touchmove",Fe,De),(Le=wt.target)==null||Le.addEventListener("touchend",mt,{passive:!1})}function Ve(wt){wt.button===0&&(wt.preventDefault(),Be(wt),window.addEventListener("mousemove",Fe,De),window.addEventListener("mouseup",Ze,{passive:!1}))}const Se=wt=>{const Le=(wt-T.value)/(A.value-T.value)*100;return ci(isNaN(Le)?0:Le,0,100)},Ee=Me(()=>n.showTicks),tt=te(()=>Ee.value?n.ticks?Array.isArray(n.ticks)?n.ticks.map(wt=>({value:wt,position:Se(wt),label:wt.toString()})):Object.keys(n.ticks).map(wt=>({value:parseFloat(wt),position:Se(parseFloat(wt)),label:n.ticks[wt]})):q.value!==1/0?Oa(q.value+1).map(wt=>{const Le=T.value+wt*P.value;return{value:Le,position:Se(Le)}}):[]:[]),Nt=te(()=>tt.value.some(wt=>{let{label:Le}=wt;return!!Le})),kt={activeThumbRef:ve,color:Me(()=>n.color),decimals:R,disabled:H,direction:Me(()=>n.direction),elevation:Me(()=>n.elevation),hasLabels:Nt,isReversed:b,indexFromEnd:S,min:T,max:A,mousePressed:le,numTicks:q,onSliderMousedown:Ve,onSliderTouchstart:pt,parsedTicks:tt,parseMouseMove:ie,position:Se,readonly:Me(()=>n.readonly),rounded:Me(()=>n.rounded),roundValue:B,showTicks:Ee,startOffset:ce,step:P,thumbSize:L,thumbColor:ee,thumbLabel:Me(()=>n.thumbLabel),ticks:Me(()=>n.ticks),tickSize:$,trackColor:Q,trackContainerRef:he,trackFillColor:oe,trackSize:j,vertical:k};return ri(A0,kt),kt},tO=Ge({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...Kt()},"VSliderThumb"),eb=ft()({name:"VSliderThumb",directives:{vRipple:aa},props:tO(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=xn(A0),{isRtl:f,rtlClasses:d}=tr();if(!c)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:a,max:b,thumbColor:k,step:S,disabled:T,thumbSize:A,thumbLabel:P,direction:R,isReversed:B,vertical:L,readonly:$,elevation:j,mousePressed:q,decimals:H,indexFromEnd:ee}=c,Q=te(()=>T.value?void 0:j.value),{elevationClasses:oe}=Tr(Q),{textColorClasses:le,textColorStyles:ce}=Br(k),{pageup:he,pagedown:ve,end:ie,home:be,left:Be,right:De,down:Fe,up:Ze}=Cy,mt=[he,ve,ie,be,Be,De,Fe,Ze],pt=te(()=>S.value?[1,2,3]:[1,5,10]);function Ve(Ee,tt){if(!mt.includes(Ee.key))return;Ee.preventDefault();const Nt=S.value||.1,kt=(b.value-a.value)/Nt;if([Be,De,Fe,Ze].includes(Ee.key)){const Le=(L.value?[f.value?Be:De,B.value?Fe:Ze]:ee.value!==f.value?[Be,Ze]:[De,Ze]).includes(Ee.key)?1:-1,_t=Ee.shiftKey?2:Ee.ctrlKey?1:0;Le===-1&&tt===b.value&&!_t&&!Number.isInteger(kt)?tt=tt-kt%1*Nt:tt=tt+Le*Nt*pt.value[_t]}else if(Ee.key===be)tt=a.value;else if(Ee.key===ie)tt=b.value;else{const wt=Ee.key===ve?1:-1;tt=tt-wt*Nt*(kt>100?kt/10:10)}return Math.max(e.min,Math.min(e.max,tt))}function Se(Ee){const tt=Ve(Ee,e.modelValue);tt!=null&&s("update:modelValue",tt)}return bt(()=>{const Ee=qt(ee.value?100-e.position:e.position,"%");return Y("div",{class:vt(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&q.value},e.class,d.value]),style:Bt([{"--v-slider-thumb-position":Ee,"--v-slider-thumb-size":qt(A.value)},e.style]),role:"slider",tabindex:T.value?-1:0,"aria-label":e.name,"aria-valuemin":a.value,"aria-valuemax":b.value,"aria-valuenow":e.modelValue,"aria-readonly":!!$.value,"aria-orientation":R.value,onKeydown:$.value?void 0:Se},[Y("div",{class:vt(["v-slider-thumb__surface",le.value,oe.value]),style:{...ce.value}},null),Ri(Y("div",{class:vt(["v-slider-thumb__ripple",le.value]),style:Bt(ce.value)},null),[[aa,e.ripple,null,{circle:!0,center:!0}]]),F(h0,{origin:"bottom center"},{default:()=>{var tt;return[Ri(Y("div",{class:"v-slider-thumb__label-container"},[Y("div",{class:vt(["v-slider-thumb__label",le.value])},[Y("div",null,[((tt=r["thumb-label"])==null?void 0:tt.call(r,{modelValue:e.modelValue}))??e.modelValue.toFixed(S.value?H.value:1)])])]),[[xs,P.value&&e.focused||P.value==="always"]])]}})])}),{}}}),nO=Ge({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Kt()},"VSliderTrack"),QP=ft()({name:"VSliderTrack",props:nO(),emits:{},setup(e,n){let{slots:r}=n;const s=xn(A0);if(!s)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:c,parsedTicks:f,rounded:d,showTicks:a,tickSize:b,trackColor:k,trackFillColor:S,trackSize:T,vertical:A,min:P,max:R,indexFromEnd:B}=s,{roundedClasses:L}=Vi(d),{backgroundColorClasses:$,backgroundColorStyles:j}=ti(S),{backgroundColorClasses:q,backgroundColorStyles:H}=ti(k),ee=te(()=>`inset-${A.value?"block":"inline"}-${B.value?"end":"start"}`),Q=te(()=>A.value?"height":"width"),oe=te(()=>({[ee.value]:"0%",[Q.value]:"100%"})),le=te(()=>e.stop-e.start),ce=te(()=>({[ee.value]:qt(e.start,"%"),[Q.value]:qt(le.value,"%")})),he=te(()=>a.value?(A.value?f.value.slice().reverse():f.value).map((ie,be)=>{var De;const Be=ie.value!==P.value&&ie.value!==R.value?qt(ie.position,"%"):void 0;return Y("div",{key:ie.value,class:vt(["v-slider-track__tick",{"v-slider-track__tick--filled":ie.position>=e.start&&ie.position<=e.stop,"v-slider-track__tick--first":ie.value===P.value,"v-slider-track__tick--last":ie.value===R.value}]),style:{[ee.value]:Be}},[(ie.label||r["tick-label"])&&Y("div",{class:"v-slider-track__tick-label"},[((De=r["tick-label"])==null?void 0:De.call(r,{tick:ie,index:be}))??ie.label])])}):[]);return bt(()=>Y("div",{class:vt(["v-slider-track",L.value,e.class]),style:Bt([{"--v-slider-track-size":qt(T.value),"--v-slider-tick-size":qt(b.value)},e.style])},[Y("div",{class:vt(["v-slider-track__background",q.value,{"v-slider-track__background--opacity":!!c.value||!S.value}]),style:{...oe.value,...H.value}},null),Y("div",{class:vt(["v-slider-track__fill",$.value]),style:{...ce.value,...j.value}},null),a.value&&Y("div",{class:vt(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":a.value==="always"}])},[he.value])])),{}}}),iO=Ge({...bm(),...YP(),...Do(),modelValue:{type:[Number,String],default:0}},"VSlider"),tb=ft()({name:"VSlider",props:iO(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=Xe(),f=Xe(),{rtlClasses:d}=tr(),a=XP(e),b=nn(e,"modelValue",void 0,oe=>a.roundValue(oe??a.min.value)),{min:k,max:S,mousePressed:T,roundValue:A,onSliderMousedown:P,onSliderTouchstart:R,trackContainerRef:B,position:L,hasLabels:$,readonly:j}=JP({props:e,steps:a,onSliderStart:()=>{s("start",b.value)},onSliderEnd:oe=>{let{value:le}=oe;const ce=A(le);b.value=ce,s("end",ce)},onSliderMove:oe=>{let{value:le}=oe;return b.value=A(le)},getActiveThumb:()=>{var oe;return(oe=c.value)==null?void 0:oe.$el}}),{isFocused:q,focus:H,blur:ee}=Mo(e),Q=te(()=>L(b.value));return bt(()=>{const oe=Wr.filterProps(e),le=!!(e.label||r.label||r.prepend);return F(Wr,ut({ref:f,class:["v-slider",{"v-slider--has-labels":!!r["tick-label"]||$.value,"v-slider--focused":q.value,"v-slider--pressed":T.value,"v-slider--disabled":e.disabled},d.value,e.class],style:e.style},oe,{focused:q.value}),{...r,prepend:le?ce=>{var he,ve;return Y(Ht,null,[((he=r.label)==null?void 0:he.call(r,ce))??(e.label?F(Yd,{id:ce.id.value,class:"v-slider__label",text:e.label},null):void 0),(ve=r.prepend)==null?void 0:ve.call(r,ce)])}:void 0,default:ce=>{let{id:he,messagesId:ve}=ce;return Y("div",{class:"v-slider__container",onMousedown:j.value?void 0:P,onTouchstartPassive:j.value?void 0:R},[Y("input",{id:he.value,name:e.name||he.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:b.value},null),F(QP,{ref:B,start:0,stop:Q.value},{"tick-label":r["tick-label"]}),F(eb,{ref:c,"aria-describedby":ve.value,focused:q.value,min:k.value,max:S.value,modelValue:b.value,"onUpdate:modelValue":ie=>b.value=ie,position:Q.value,elevation:e.elevation,onFocus:H,onBlur:ee,ripple:e.ripple,name:e.name},{"thumb-label":r["thumb-label"]})])}})}),Pr({focus:()=>{var oe;return(oe=c.value)==null?void 0:oe.$el.focus()}},f)}}),rO=Ge({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...Kt()},"VColorPickerPreview"),aO=ja({name:"VColorPickerPreview",props:rO(),emits:{"update:color":e=>!0},setup(e,n){let{emit:r}=n;const s=new AbortController;um(()=>s.abort());async function c(){if(!C1||e.disabled)return;const f=new window.EyeDropper;try{const d=await f.open({signal:s.signal}),a=hm(Fa(d.sRGBHex));r("update:color",{...e.color??kd,...a})}catch{}}return bt(()=>{var f,d;return Y("div",{class:vt(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Bt(e.style)},[C1&&Y("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[F(Ln,{density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:c},null)]),Y("div",{class:"v-color-picker-preview__dot"},[Y("div",{style:{background:lT(e.color??kd)}},null)]),Y("div",{class:"v-color-picker-preview__sliders"},[F(tb,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(f=e.color)==null?void 0:f.h,"onUpdate:modelValue":a=>r("update:color",{...e.color??kd,h:a}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&F(tb,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:((d=e.color)==null?void 0:d.a)??1,"onUpdate:modelValue":a=>r("update:color",{...e.color??kd,a}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),sO={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},oO={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},lO={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},uO={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},cO={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},dO={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},hO={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},fO={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},mO={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},pO={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},gO={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},vO={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},_O={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},yO={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},bO={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},xO={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},wO={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},SO={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},kO={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},CO={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},TO={red:sO,pink:oO,purple:lO,deepPurple:uO,indigo:cO,blue:dO,lightBlue:hO,cyan:fO,teal:mO,green:pO,lightGreen:gO,lime:vO,yellow:_O,amber:yO,orange:bO,deepOrange:xO,brown:wO,blueGrey:SO,grey:kO,shades:CO},PO=Ge({swatches:{type:Array,default:()=>IO(TO)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Kt()},"VColorPickerSwatches");function IO(e){return Object.keys(e).map(n=>{const r=e[n];return r.base?[r.base,r.darken4,r.darken3,r.darken2,r.darken1,r.lighten1,r.lighten2,r.lighten3,r.lighten4,r.lighten5]:[r.black,r.white,r.transparent]})}const AO=ja({name:"VColorPickerSwatches",props:PO(),emits:{"update:color":e=>!0},setup(e,n){let{emit:r}=n;return bt(()=>Y("div",{class:vt(["v-color-picker-swatches",e.class]),style:Bt([{maxHeight:qt(e.maxHeight)},e.style])},[Y("div",null,[e.swatches.map(s=>Y("div",{class:"v-color-picker-swatches__swatch"},[s.map(c=>{const f=Fa(c),d=hm(f),a=oT(f);return Y("div",{class:"v-color-picker-swatches__color",onClick:()=>d&&r("update:color",d)},[Y("div",{style:{background:a}},[e.color&&zr(e.color,d)?F(Jn,{size:"x-small",icon:"$success",color:RR(c,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),EO=Ao("v-picker-title"),E0=Ge({color:String,...ya(),...Kt(),...Zi(),...nr(),...Eo(),...Zd(),..._i(),...wn(),...Hn()},"VSheet"),nm=ft()({name:"VSheet",props:E0(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{borderClasses:d}=Pa(e),{dimensionStyles:a}=Ki(e),{elevationClasses:b}=Tr(e),{locationStyles:k}=sc(e),{positionClasses:S}=Kd(e),{roundedClasses:T}=Vi(e);return bt(()=>F(e.tag,{class:vt(["v-sheet",s.value,c.value,d.value,b.value,S.value,T.value,e.class]),style:Bt([f.value,a.value,k.value,e.style])},r)),{}}}),ev=Ge({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...E0()},"VPicker"),$d=ft()({name:"VPicker",props:ev(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color);return bt(()=>{const f=nm.filterProps(e),d=!!(e.title||r.title);return F(nm,ut(f,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!r.actions},e.class],style:e.style}),{default:()=>{var a;return[!e.hideHeader&&Y("div",{key:"header",class:vt([s.value]),style:Bt([c.value])},[d&&F(EO,{key:"picker-title"},{default:()=>{var b;return[((b=r.title)==null?void 0:b.call(r))??e.title]}}),r.header&&Y("div",{class:"v-picker__header"},[r.header()])]),Y("div",{class:"v-picker__body"},[(a=r.default)==null?void 0:a.call(r)]),r.actions&&F(kn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[Y("div",{class:"v-picker__actions"},[r.actions()])]})]}})}),{}}}),MO=Ge({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(ju).includes(e)},modes:{type:Array,default:()=>Object.keys(ju),validator:e=>Array.isArray(e)&&e.every(n=>Object.keys(ju).includes(n))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...ev({hideHeader:!0})},"VColorPicker"),DO=ja({name:"VColorPicker",props:MO(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"mode"),c=Xe(null),f=nn(e,"modelValue",void 0,S=>{if(S==null||S==="")return null;let T;try{T=hm(Fa(S))}catch{return null}return T},S=>S?WB(S,e.modelValue):null),d=te(()=>f.value?{...f.value,h:c.value??f.value.h}:null),{rtlClasses:a}=tr();let b=!0;Ot(f,S=>{if(!b){b=!0;return}S&&(c.value=S.h)},{immediate:!0});const k=S=>{b=!1,c.value=S.h,f.value=S};return Hd(()=>{e.modes.includes(s.value)||(s.value=e.modes[0])}),zi({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),bt(()=>{const S=$d.filterProps(e);return F($d,ut(S,{class:["v-color-picker",a.value,e.class],style:[{"--v-color-picker-color-hsv":lT({...d.value??kd,a:1})},e.style]}),{...r,default:()=>Y(Ht,null,[!e.hideCanvas&&F(qB,{key:"canvas",color:d.value,"onUpdate:color":k,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&Y("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&F(aO,{key:"preview",color:d.value,"onUpdate:color":k,hideAlpha:!s.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&F(QB,{key:"edit",modes:e.modes,mode:s.value,"onUpdate:mode":T=>s.value=T,color:d.value,"onUpdate:color":k,disabled:e.disabled},null)]),e.showSwatches&&F(AO,{key:"swatches",color:d.value,"onUpdate:color":k,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),RO=Ge({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Qd({filterKeys:["title"]}),...P0({hideNoData:!0,returnObject:!0}),...di(km({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ws({transition:!1})},"VCombobox"),LO=ft()({name:"VCombobox",props:RO(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,n){var Ct;let{emit:r,slots:s}=n;const{t:c}=vi(),f=Xe(),d=Rt(!1),a=Rt(!0),b=Rt(!1),k=Xe(),S=Xe(),T=Rt(-1);let A=!1;const{items:P,transformIn:R,transformOut:B}=x0(e),{textColorClasses:L,textColorStyles:$}=Br(()=>{var ae;return(ae=f.value)==null?void 0:ae.color}),j=nn(e,"modelValue",[],ae=>R(Di(ae)),ae=>{const de=B(ae);return e.multiple?de:de[0]??null}),q=xm(e),H=te(()=>!!(e.chips||s.chip)),ee=te(()=>H.value||!!s.selection),Q=Rt(!e.multiple&&!ee.value?((Ct=j.value[0])==null?void 0:Ct.title)??"":""),oe=te({get:()=>Q.value,set:ae=>{var de;if(Q.value=ae??"",!e.multiple&&!ee.value&&(j.value=[bl(e,ae)],zn(()=>{var ze;return(ze=S.value)==null?void 0:ze.scrollToIndex(0)})),ae&&e.multiple&&((de=e.delimiters)!=null&&de.length)){const ze=ae.split(new RegExp(`(?:${e.delimiters.join("|")})+`));ze.length>1&&(ze.forEach(Ye=>{Ye=Ye.trim(),Ye&&Le(bl(e,Ye))}),Q.value="")}ae||(T.value=-1),a.value=!ae}}),le=te(()=>typeof e.counterValue=="function"?e.counterValue(j.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?j.value.length:oe.value.length),{filteredItems:ce,getMatches:he}=eh(e,P,()=>a.value?"":oe.value),ve=te(()=>e.hideSelected?ce.value.filter(ae=>!j.value.some(de=>de.value===ae.value)):ce.value),ie=te(()=>e.hideNoData&&!ve.value.length||q.isReadonly.value||q.isDisabled.value),be=nn(e,"menu"),Be=te({get:()=>be.value,set:ae=>{var de;be.value&&!ae&&((de=k.value)!=null&&de.openChildren.size)||ae&&ie.value||(be.value=ae)}}),De=Me(()=>Be.value?e.closeText:e.openText);Ot(Q,ae=>{A?zn(()=>A=!1):d.value&&!Be.value&&(Be.value=!0),r("update:search",ae)}),Ot(j,ae=>{var de;!e.multiple&&!ee.value&&(Q.value=((de=ae[0])==null?void 0:de.title)??"")});const Fe=te(()=>j.value.map(ae=>ae.value)),Ze=te(()=>{var de;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&oe.value===((de=ve.value[0])==null?void 0:de.title))&&ve.value.length>0&&!a.value&&!b.value}),mt=Xe(),pt=T0(mt,f);function Ve(ae){A=!0,e.openOnClear&&(Be.value=!0)}function Se(){ie.value||(Be.value=!0)}function Ee(ae){ie.value||(d.value&&(ae.preventDefault(),ae.stopPropagation()),Be.value=!Be.value)}function tt(ae){var de;(zd(ae)||ae.key==="Backspace")&&((de=f.value)==null||de.focus())}function Nt(ae){var Ye,ct,et,It;if(nR(ae)||q.isReadonly.value)return;const de=(Ye=f.value)==null?void 0:Ye.selectionStart,ze=j.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(ae.key)&&ae.preventDefault(),["Enter","ArrowDown"].includes(ae.key)&&(Be.value=!0),["Escape"].includes(ae.key)&&(Be.value=!1),["Enter","Escape","Tab"].includes(ae.key)&&(Ze.value&&["Enter","Tab"].includes(ae.key)&&!j.value.some(dt=>{let{value:Lt}=dt;return Lt===ve.value[0].value})&&Le(ce.value[0]),a.value=!0),ae.key==="ArrowDown"&&Ze.value&&((ct=mt.value)==null||ct.focus("next")),ae.key==="Enter"&&oe.value&&(Le(bl(e,oe.value)),ee.value&&(Q.value="")),["Backspace","Delete"].includes(ae.key)){if(!e.multiple&&ee.value&&j.value.length>0&&!oe.value)return Le(j.value[0],!1);if(~T.value){ae.preventDefault();const dt=T.value;Le(j.value[T.value],!1),T.value=dt>=ze-1?ze-2:dt}else ae.key==="Backspace"&&!oe.value&&(T.value=ze-1);return}if(e.multiple)if(ae.key==="ArrowLeft"){if(T.value<0&&de&&de>0)return;const dt=T.value>-1?T.value-1:ze-1;j.value[dt]?T.value=dt:(T.value=-1,(et=f.value)==null||et.setSelectionRange(oe.value.length,oe.value.length))}else if(ae.key==="ArrowRight"){if(T.value<0)return;const dt=T.value+1;j.value[dt]?T.value=dt:(T.value=-1,(It=f.value)==null||It.setSelectionRange(0,0))}else~T.value&&zd(ae)&&(T.value=-1)}function kt(){var ae;e.eager&&((ae=S.value)==null||ae.calculateVisibleItems())}function wt(){var ae;d.value&&(a.value=!0,(ae=f.value)==null||ae.focus())}function Le(ae){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!ae||ae.props.disabled))if(e.multiple){const ze=j.value.findIndex(ct=>(e.valueComparator||zr)(ct.value,ae.value)),Ye=de??!~ze;if(~ze){const ct=Ye?[...j.value,ae]:[...j.value];ct.splice(ze,1),j.value=ct}else Ye&&(j.value=[...j.value,ae]);e.clearOnSelect&&(oe.value="")}else{const ze=de!==!1;j.value=ze?[ae]:[],Q.value=ze&&!ee.value?ae.title:"",zn(()=>{Be.value=!1,a.value=!0})}}function _t(ae){d.value=!0,setTimeout(()=>{b.value=!0})}function ot(ae){b.value=!1}function Je(ae){(ae==null||ae===""&&!e.multiple&&!ee.value)&&(j.value=[])}return Ot(d,(ae,de)=>{if(!(ae||ae===de)&&(T.value=-1,Be.value=!1,oe.value)){if(e.multiple){Le(bl(e,oe.value));return}if(!ee.value)return;j.value.some(ze=>{let{title:Ye}=ze;return Ye===oe.value})?Q.value="":Le(bl(e,oe.value))}}),Ot(Be,()=>{if(!e.hideSelected&&Be.value&&j.value.length){const ae=ve.value.findIndex(de=>j.value.some(ze=>(e.valueComparator||zr)(ze.value,de.value)));Xn&&window.requestAnimationFrame(()=>{var de;ae>=0&&((de=S.value)==null||de.scrollToIndex(ae))})}}),Ot(()=>e.items,(ae,de)=>{Be.value||d.value&&!de.length&&ae.length&&(Be.value=!0)}),bt(()=>{const ae=!!(!e.hideNoData||ve.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),de=j.value.length>0,ze=To.filterProps(e);return F(To,ut({ref:f},ze,{modelValue:oe.value,"onUpdate:modelValue":[Ye=>oe.value=Ye,Je],focused:d.value,"onUpdate:focused":Ye=>d.value=Ye,validationValue:j.externalValue,counterValue:le.value,dirty:de,class:["v-combobox",{"v-combobox--active-menu":Be.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!ee.value,"v-combobox--selecting-index":T.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:q.isReadonly.value,placeholder:de?void 0:e.placeholder,"onClick:clear":Ve,"onMousedown:control":Se,onKeydown:Nt}),{...s,default:()=>Y(Ht,null,[F(Fd,ut({ref:k,modelValue:Be.value,"onUpdate:modelValue":Ye=>Be.value=Ye,activator:"parent",contentClass:"v-combobox__content",disabled:ie.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:kt,onAfterLeave:wt},e.menuProps),{default:()=>[ae&&F(Od,ut({ref:mt,filterable:!0,selected:Fe.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Ye=>Ye.preventDefault(),onKeydown:tt,onFocusin:_t,onFocusout:ot,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},pt,e.listProps),{default:()=>{var Ye,ct,et;return[(Ye=s["prepend-item"])==null?void 0:Ye.call(s),!ve.value.length&&!e.hideNoData&&(((ct=s["no-data"])==null?void 0:ct.call(s))??F(_s,{key:"no-data",title:c(e.noDataText)},null)),F(Xg,{ref:S,renderless:!0,items:ve.value,itemKey:"value"},{default:It=>{var Wt,tn,dn;let{item:dt,index:Lt,itemRef:At}=It;const sn=ut(dt.props,{ref:At,key:dt.value,active:Ze.value&&Lt===0?!0:void 0,onClick:()=>Le(dt,null)});return dt.type==="divider"?((Wt=s.divider)==null?void 0:Wt.call(s,{props:dt.raw,index:Lt}))??F($a,ut(dt.props,{key:`divider-${Lt}`}),null):dt.type==="subheader"?((tn=s.subheader)==null?void 0:tn.call(s,{props:dt.raw,index:Lt}))??F(Jd,ut(dt.props,{key:`subheader-${Lt}`}),null):((dn=s.item)==null?void 0:dn.call(s,{item:dt,index:Lt,props:sn}))??F(_s,ut(sn,{role:"option"}),{prepend:_n=>{let{isSelected:Dn}=_n;return Y(Ht,null,[e.multiple&&!e.hideSelected?F(qs,{key:dt.value,modelValue:Dn,ripple:!1,tabindex:"-1"},null):void 0,dt.props.prependAvatar&&F(Ja,{image:dt.props.prependAvatar},null),dt.props.prependIcon&&F(Jn,{icon:dt.props.prependIcon},null)])},title:()=>{var _n;return a.value?dt.title:VP("v-combobox",dt.title,(_n=he(dt))==null?void 0:_n.title)}})}}),(et=s["append-item"])==null?void 0:et.call(s)]}})]}),j.value.map((Ye,ct)=>{function et(At){At.stopPropagation(),At.preventDefault(),Le(Ye,!1)}const It={"onClick:close":et,onKeydown(At){At.key!=="Enter"&&At.key!==" "||(At.preventDefault(),At.stopPropagation(),et(At))},onMousedown(At){At.preventDefault(),At.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},dt=H.value?!!s.chip:!!s.selection,Lt=dt?jg(H.value?s.chip({item:Ye,index:ct,props:It}):s.selection({item:Ye,index:ct})):void 0;if(!(dt&&!Lt))return Y("div",{key:Ye.value,class:vt(["v-combobox__selection",ct===T.value&&["v-combobox__selection--selected",L.value]]),style:Bt(ct===T.value?$.value:{})},[H.value?s.chip?F(kn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Ye.title}}},{default:()=>[Lt]}):F(Xd,ut({key:"chip",closable:e.closableChips,size:"small",text:Ye.title,disabled:Ye.props.disabled},It),null):Lt??Y("span",{class:"v-combobox__selection-text"},[Ye.title,e.multiple&&ct<j.value.length-1&&Y("span",{class:"v-combobox__selection-comma"},[Ft(",")])])])})]),"append-inner":function(){var It,dt;for(var Ye=arguments.length,ct=new Array(Ye),et=0;et<Ye;et++)ct[et]=arguments[et];return Y(Ht,null,[(It=s["append-inner"])==null?void 0:It.call(s,...ct),(!e.hideNoData||e.items.length)&&e.menuIcon?F(Jn,{class:"v-combobox__menu-icon",color:(dt=f.value)==null?void 0:dt.fieldIconColor,icon:e.menuIcon,onMousedown:Ee,onClick:eT,"aria-label":c(De.value),title:c(De.value),tabindex:"-1"},null):void 0])}})}),Pr({isFocused:d,isPristine:a,menu:Be,search:oe,selectionIndex:T,filteredItems:ce,select:Le},f)}}),zO=Ge({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),VO=ft()({name:"VConfirmEdit",props:zO(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=nn(e,"modelValue"),f=Xe();Li(()=>{f.value=structuredClone(mn(c.value))});const{t:d}=vi(),a=te(()=>zr(c.value,f.value));function b(B){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(B):a.value}const k=te(()=>b("save")),S=te(()=>b("cancel"));function T(){c.value=f.value,r("save",f.value)}function A(){f.value=structuredClone(mn(c.value)),r("cancel")}function P(B){return Y(Ht,null,[F(Ln,ut({disabled:S.value,variant:"text",color:e.color,onClick:A,text:d(e.cancelText)},B),null),F(Ln,ut({disabled:k.value,variant:"text",color:e.color,onClick:T,text:d(e.okText)},B),null)])}let R=!1;return bt(()=>{var B;return Y(Ht,null,[(B=s.default)==null?void 0:B.call(s,{model:f,save:T,cancel:A,isPristine:a.value,get actions(){return R=!0,P}}),!e.hideActions&&!R&&P()])}),{save:T,cancel:A,isPristine:a}}}),e2=Ge({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),t2=Symbol.for("vuetify:datatable:expanded");function tv(e){const n=Me(()=>e.expandOnClick),r=nn(e,"expanded",e.expanded,a=>new Set(a),a=>[...a.values()]);function s(a,b){const k=new Set(r.value);b?k.add(a.value):k.delete(a.value),r.value=k}function c(a){return r.value.has(a.value)}function f(a){s(a,!c(a))}const d={expand:s,expanded:r,expandOnClick:n,isExpanded:c,toggleExpand:f};return ri(t2,d),d}function n2(){const e=xn(t2);if(!e)throw new Error("foo");return e}const M0=Ge({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),i2=Symbol.for("vuetify:data-table-group");function D0(e){return{groupBy:nn(e,"groupBy")}}function nv(e){const{disableSort:n,groupBy:r,sortBy:s}=e,c=Xe(new Set),f=te(()=>r.value.map(S=>({...S,order:S.order??!1})).concat(n!=null&&n.value?[]:s.value));function d(S){return c.value.has(S.id)}function a(S){const T=new Set(c.value);d(S)?T.delete(S.id):T.add(S.id),c.value=T}function b(S){function T(A){const P=[];for(const R of A.items)"type"in R&&R.type==="group"?P.push(...T(R)):P.push(R);return[...new Set(P)]}return T({items:S})}const k={sortByWithGroups:f,toggleGroup:a,opened:c,groupBy:r,extractRows:b,isGroupOpen:d};return ri(i2,k),k}function r2(){const e=xn(i2);if(!e)throw new Error("Missing group!");return e}function BO(e,n){if(!e.length)return[];const r=new Map;for(const s of e){const c=Uu(s.raw,n);r.has(c)||r.set(c,[]),r.get(c).push(s)}return r}function a2(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!n.length)return[];const c=BO(e,n[0]),f=[],d=n.slice(1);return c.forEach((a,b)=>{const k=n[0],S=`${s}_${k}_${b}`;f.push({depth:r,id:S,key:k,value:b,items:d.length?a2(a,d,r+1,S):a,type:"group"})}),f}function s2(e,n){const r=[];for(const s of e)"type"in s&&s.type==="group"?(s.value!=null&&r.push(s),(n.has(s.id)||s.value==null)&&r.push(...s2(s.items,n))):r.push(s);return r}function iv(e,n,r){return{flatItems:te(()=>{if(!n.value.length)return e.value;const c=a2(e.value,n.value.map(f=>f.key));return s2(c,r.value)})}}function rv(e){let{page:n,itemsPerPage:r,sortBy:s,groupBy:c,search:f}=e;const d=ji("VDataTable"),a=()=>({page:n.value,itemsPerPage:r.value,sortBy:s.value,groupBy:c.value,search:f.value});let b=null;Ot(a,k=>{zr(b,k)||(b&&b.search!==k.search&&(n.value=1),d.emit("update:options",k),b=k)},{deep:!0,immediate:!0})}const R0=Ge({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),o2=Symbol.for("vuetify:data-table-pagination");function L0(e){const n=nn(e,"page",void 0,s=>Number(s??1)),r=nn(e,"itemsPerPage",void 0,s=>Number(s??10));return{page:n,itemsPerPage:r}}function z0(e){const{page:n,itemsPerPage:r,itemsLength:s}=e,c=te(()=>r.value===-1?0:r.value*(n.value-1)),f=te(()=>r.value===-1?s.value:Math.min(s.value,c.value+r.value)),d=te(()=>r.value===-1||s.value===0?1:Math.ceil(s.value/r.value));Ot([n,d],()=>{n.value>d.value&&(n.value=d.value)});function a(A){r.value=A,n.value=1}function b(){n.value=ci(n.value+1,1,d.value)}function k(){n.value=ci(n.value-1,1,d.value)}function S(A){n.value=ci(A,1,d.value)}const T={page:n,itemsPerPage:r,startIndex:c,stopIndex:f,pageCount:d,itemsLength:s,nextPage:b,prevPage:k,setPage:S,setItemsPerPage:a};return ri(o2,T),T}function OO(){const e=xn(o2);if(!e)throw new Error("Missing pagination!");return e}function l2(e){const n=ji("usePaginatedItems"),{items:r,startIndex:s,stopIndex:c,itemsPerPage:f}=e,d=te(()=>f.value<=0?r.value:r.value.slice(s.value,c.value));return Ot(d,a=>{n.emit("update:currentItems",a)},{immediate:!0}),{paginatedItems:d}}const FO={showSelectAll:!1,allSelected:()=>[],select:e=>{var s;let{items:n,value:r}=e;return new Set(r?[(s=n[0])==null?void 0:s.value]:[])},selectAll:e=>{let{selected:n}=e;return n}},u2={showSelectAll:!0,allSelected:e=>{let{currentPage:n}=e;return n},select:e=>{let{items:n,value:r,selected:s}=e;for(const c of n)r?s.add(c.value):s.delete(c.value);return s},selectAll:e=>{let{value:n,currentPage:r,selected:s}=e;return u2.select({items:r,value:n,selected:s})}},c2={showSelectAll:!0,allSelected:e=>{let{allItems:n}=e;return n},select:e=>{let{items:n,value:r,selected:s}=e;for(const c of n)r?s.add(c.value):s.delete(c.value);return s},selectAll:e=>{let{value:n,allItems:r,selected:s}=e;return c2.select({items:r,value:n,selected:s})}},d2=Ge({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:zr}},"DataTable-select"),h2=Symbol.for("vuetify:data-table-selection");function av(e,n){let{allItems:r,currentPage:s}=n;const c=nn(e,"modelValue",e.modelValue,j=>new Set(Di(j).map(q=>{var H;return((H=r.value.find(ee=>e.valueComparator(q,ee.value)))==null?void 0:H.value)??q})),j=>[...j.values()]),f=te(()=>r.value.filter(j=>j.selectable)),d=te(()=>s.value.filter(j=>j.selectable)),a=te(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return FO;case"all":return c2;case"page":default:return u2}}),b=Rt(null);function k(j){return Di(j).every(q=>c.value.has(q.value))}function S(j){return Di(j).some(q=>c.value.has(q.value))}function T(j,q){const H=a.value.select({items:j,value:q,selected:new Set(c.value)});c.value=H}function A(j,q,H){const ee=[];if(q=q??s.value.findIndex(Q=>Q.value===j.value),e.selectStrategy!=="single"&&(H!=null&&H.shiftKey)&&b.value!==null){const[Q,oe]=[b.value,q].sort((le,ce)=>le-ce);ee.push(...s.value.slice(Q,oe+1).filter(le=>le.selectable))}else ee.push(j),b.value=q;T(ee,!k([j]))}function P(j){const q=a.value.selectAll({value:j,allItems:f.value,currentPage:d.value,selected:new Set(c.value)});c.value=q}const R=te(()=>c.value.size>0),B=te(()=>{const j=a.value.allSelected({allItems:f.value,currentPage:d.value});return!!j.length&&k(j)}),L=Me(()=>a.value.showSelectAll),$={toggleSelect:A,select:T,selectAll:P,isSelected:k,isSomeSelected:S,someSelected:R,allSelected:B,showSelectAll:L,lastSelectedIndex:b,selectStrategy:a};return ri(h2,$),$}function sv(){const e=xn(h2);if(!e)throw new Error("Missing selection!");return e}const f2=Ge({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),m2=Symbol.for("vuetify:data-table-sort");function ov(e){const n=nn(e,"sortBy"),r=Me(()=>e.mustSort),s=Me(()=>e.multiSort);return{sortBy:n,mustSort:r,multiSort:s}}function lv(e){const{sortBy:n,mustSort:r,multiSort:s,page:c}=e,f=b=>{if(b.key==null)return;let k=n.value.map(T=>({...T}))??[];const S=k.find(T=>T.key===b.key);S?S.order==="desc"?r.value&&k.length===1?S.order="asc":k=k.filter(T=>T.key!==b.key):S.order="desc":s.value?k.push({key:b.key,order:"asc"}):k=[{key:b.key,order:"asc"}],n.value=k,c&&(c.value=1)};function d(b){return!!n.value.find(k=>k.key===b.key)}const a={sortBy:n,toggleSort:f,isSorted:d};return ri(m2,a),a}function p2(){const e=xn(m2);if(!e)throw new Error("Missing sort!");return e}function V0(e,n,r,s){const c=vi();return{sortedItems:te(()=>{var d,a;return r.value.length?$O(n.value,r.value,c.current.value,{transform:s==null?void 0:s.transform,sortFunctions:{...e.customKeySort,...(d=s==null?void 0:s.sortFunctions)==null?void 0:d.value},sortRawFunctions:(a=s==null?void 0:s.sortRawFunctions)==null?void 0:a.value}):n.value})}}function $O(e,n,r,s){const c=new Intl.Collator(r,{sensitivity:"accent",usage:"sort"});return e.map(d=>[d,s!=null&&s.transform?s.transform(d):d]).sort((d,a)=>{var b,k;for(let S=0;S<n.length;S++){let T=!1;const A=n[S].key,P=n[S].order??"asc";if(P===!1)continue;let R=Uu(d[1],A),B=Uu(a[1],A),L=d[0].raw,$=a[0].raw;if(P==="desc"&&([R,B]=[B,R],[L,$]=[$,L]),(b=s==null?void 0:s.sortRawFunctions)!=null&&b[A]){const j=s.sortRawFunctions[A](L,$);if(j==null)continue;if(T=!0,j)return j}if((k=s==null?void 0:s.sortFunctions)!=null&&k[A]){const j=s.sortFunctions[A](R,B);if(j==null)continue;if(T=!0,j)return j}if(!T&&(R instanceof Date&&B instanceof Date&&(R=R.getTime(),B=B.getTime()),[R,B]=[R,B].map(j=>j!=null?j.toString().toLocaleLowerCase():j),R!==B))return Np(R)&&Np(B)?0:Np(R)?-1:Np(B)?1:!isNaN(R)&&!isNaN(B)?Number(R)-Number(B):c.compare(R,B)}return 0}).map(d=>{let[a]=d;return a})}const jO=Ge({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function NO(e,n){const r=e.returnObject?n:Wi(n,e.itemValue),s=Wi(n,e.itemSelectable,!0);return{type:"item",value:r,selectable:s,raw:n}}function UO(e,n){const r=[];for(const s of n)r.push(NO(e,s));return r}function GO(e){return{items:te(()=>UO(e,e.items))}}const qO=Ge({search:String,loading:Boolean,...Kt(),...jO(),...d2(),...f2(),...R0({itemsPerPage:5}),...e2(),...M0(),...Qd(),...wn(),...ws({transition:{component:Kf,hideOnLeave:!0}})},"VDataIterator"),HO=ft()({name:"VDataIterator",props:qO(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"groupBy"),c=Me(()=>e.search),{items:f}=GO(e),{filteredItems:d}=eh(e,f,c,{transform:Se=>Se.raw}),{sortBy:a,multiSort:b,mustSort:k}=ov(e),{page:S,itemsPerPage:T}=L0(e),{toggleSort:A}=lv({sortBy:a,multiSort:b,mustSort:k,page:S}),{sortByWithGroups:P,opened:R,extractRows:B,isGroupOpen:L,toggleGroup:$}=nv({groupBy:s,sortBy:a}),{sortedItems:j}=V0(e,d,P,{transform:Se=>Se.raw}),{flatItems:q}=iv(j,s,R),H=Me(()=>q.value.length),{startIndex:ee,stopIndex:Q,pageCount:oe,prevPage:le,nextPage:ce,setItemsPerPage:he,setPage:ve}=z0({page:S,itemsPerPage:T,itemsLength:H}),{paginatedItems:ie}=l2({items:q,startIndex:ee,stopIndex:Q,itemsPerPage:T}),be=te(()=>B(ie.value)),{isSelected:Be,select:De,selectAll:Fe,toggleSelect:Ze}=av(e,{allItems:f,currentPage:be}),{isExpanded:mt,toggleExpand:pt}=tv(e);rv({page:S,itemsPerPage:T,sortBy:a,groupBy:s,search:c});const Ve=te(()=>({page:S.value,itemsPerPage:T.value,sortBy:a.value,pageCount:oe.value,toggleSort:A,prevPage:le,nextPage:ce,setPage:ve,setItemsPerPage:he,isSelected:Be,select:De,selectAll:Fe,toggleSelect:Ze,isExpanded:mt,toggleExpand:pt,isGroupOpen:L,toggleGroup:$,items:be.value,groupedItems:ie.value}));return bt(()=>F(e.tag,{class:vt(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Bt(e.style)},{default:()=>{var Se,Ee;return[(Se=r.header)==null?void 0:Se.call(r,Ve.value),F(ia,{transition:e.transition},{default:()=>{var tt,Nt;return[e.loading?F(vm,{key:"loader",name:"v-data-iterator",active:!0},{default:kt=>{var wt;return(wt=r.loader)==null?void 0:wt.call(r,kt)}}):Y("div",{key:"items"},[ie.value.length?(Nt=r.default)==null?void 0:Nt.call(r,Ve.value):(tt=r["no-data"])==null?void 0:tt.call(r)])]}}),(Ee=r.footer)==null?void 0:Ee.call(r,Ve.value)]}})),{}}});function WO(){const e=Xe([]);hC(()=>e.value=[]);function n(r,s){e.value[s]=r}return{refs:e,updateRef:n}}const ZO=Ge({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:an,default:"$first"},prevIcon:{type:an,default:"$prev"},nextIcon:{type:an,default:"$next"},lastIcon:{type:an,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ya(),...Kt(),...mr(),...nr(),..._i(),...Ks(),...wn({tag:"nav"}),...Hn(),...es({variant:"text"})},"VPagination"),nb=ft()({name:"VPagination",props:ZO(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=nn(e,"modelValue"),{t:f,n:d}=vi(),{isRtl:a}=tr(),{themeClasses:b}=Qn(e),{width:k}=Qa(),S=Rt(-1);zi(void 0,{scoped:!0});const{resizeRef:T}=vs(le=>{if(!le.length)return;const{target:ce,contentRect:he}=le[0],ve=ce.querySelector(".v-pagination__list > *");if(!ve)return;const ie=he.width,be=ve.offsetWidth+parseFloat(getComputedStyle(ve).marginRight)*2;S.value=B(ie,be)}),A=te(()=>parseInt(e.length,10)),P=te(()=>parseInt(e.start,10)),R=te(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):S.value>=0?S.value:B(k.value,58));function B(le,ce){const he=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((le-ce*he)/ce).toFixed(2))))}const L=te(()=>{if(A.value<=0||isNaN(A.value)||A.value>Number.MAX_SAFE_INTEGER)return[];if(R.value<=0)return[];if(R.value===1)return[c.value];if(A.value<=R.value)return Oa(A.value,P.value);const le=R.value%2===0,ce=le?R.value/2:Math.floor(R.value/2),he=le?ce:ce+1,ve=A.value-ce;if(he-c.value>=0)return[...Oa(Math.max(1,R.value-1),P.value),e.ellipsis,A.value];if(c.value-ve>=(le?1:0)){const ie=R.value-1,be=A.value-ie+P.value;return[P.value,e.ellipsis,...Oa(ie,be)]}else{const ie=Math.max(1,R.value-2),be=ie===1?c.value:c.value-Math.ceil(ie/2)+P.value;return[P.value,e.ellipsis,...Oa(ie,be),e.ellipsis,A.value]}});function $(le,ce,he){le.preventDefault(),c.value=ce,he&&s(he,ce)}const{refs:j,updateRef:q}=WO();zi({VPaginationBtn:{color:Me(()=>e.color),border:Me(()=>e.border),density:Me(()=>e.density),size:Me(()=>e.size),variant:Me(()=>e.variant),rounded:Me(()=>e.rounded),elevation:Me(()=>e.elevation)}});const H=te(()=>L.value.map((le,ce)=>{const he=ve=>q(ve,ce);if(typeof le=="string")return{isActive:!1,key:`ellipsis-${ce}`,page:le,props:{ref:he,ellipsis:!0,icon:!0,disabled:!0}};{const ve=le===c.value;return{isActive:ve,key:le,page:d(le),props:{ref:he,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:ve?e.activeColor:e.color,"aria-current":ve,"aria-label":f(ve?e.currentPageAriaLabel:e.pageAriaLabel,le),onClick:ie=>$(ie,le)}}}})),ee=te(()=>{const le=!!e.disabled||c.value<=P.value,ce=!!e.disabled||c.value>=P.value+A.value-1;return{first:e.showFirstLastPage?{icon:a.value?e.lastIcon:e.firstIcon,onClick:he=>$(he,P.value,"first"),disabled:le,"aria-label":f(e.firstAriaLabel),"aria-disabled":le}:void 0,prev:{icon:a.value?e.nextIcon:e.prevIcon,onClick:he=>$(he,c.value-1,"prev"),disabled:le,"aria-label":f(e.previousAriaLabel),"aria-disabled":le},next:{icon:a.value?e.prevIcon:e.nextIcon,onClick:he=>$(he,c.value+1,"next"),disabled:ce,"aria-label":f(e.nextAriaLabel),"aria-disabled":ce},last:e.showFirstLastPage?{icon:a.value?e.firstIcon:e.lastIcon,onClick:he=>$(he,P.value+A.value-1,"last"),disabled:ce,"aria-label":f(e.lastAriaLabel),"aria-disabled":ce}:void 0}});function Q(){var ce;const le=c.value-P.value;(ce=j.value[le])==null||ce.$el.focus()}function oe(le){le.key===Cy.left&&!e.disabled&&c.value>Number(e.start)?(c.value=c.value-1,zn(Q)):le.key===Cy.right&&!e.disabled&&c.value<P.value+A.value-1&&(c.value=c.value+1,zn(Q))}return bt(()=>F(e.tag,{ref:T,class:vt(["v-pagination",b.value,e.class]),style:Bt(e.style),role:"navigation","aria-label":f(e.ariaLabel),onKeydown:oe,"data-test":"v-pagination-root"},{default:()=>[Y("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&Y("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(ee.value.first):F(Ln,ut({_as:"VPaginationBtn"},ee.value.first),null)]),Y("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(ee.value.prev):F(Ln,ut({_as:"VPaginationBtn"},ee.value.prev),null)]),H.value.map((le,ce)=>Y("li",{key:le.key,class:vt(["v-pagination__item",{"v-pagination__item--is-active":le.isActive}]),"data-test":"v-pagination-item"},[r.item?r.item(le):F(Ln,ut({_as:"VPaginationBtn"},le.props),{default:()=>[le.page]})])),Y("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(ee.value.next):F(Ln,ut({_as:"VPaginationBtn"},ee.value.next),null)]),e.showFirstLastPage&&Y("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(ee.value.last):F(Ln,ut({_as:"VPaginationBtn"},ee.value.last),null)])])]})),{}}}),B0=Ge({prevIcon:{type:an,default:"$prev"},nextIcon:{type:an,default:"$next"},firstIcon:{type:an,default:"$first"},lastIcon:{type:an,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),im=ft()({name:"VDataTableFooter",props:B0(),setup(e,n){let{slots:r}=n;const{t:s}=vi(),{page:c,pageCount:f,startIndex:d,stopIndex:a,itemsLength:b,itemsPerPage:k,setItemsPerPage:S}=OO(),T=te(()=>e.itemsPerPageOptions.map(A=>typeof A=="number"?{value:A,title:A===-1?s("$vuetify.dataFooter.itemsPerPageAll"):String(A)}:{...A,title:isNaN(Number(A.title))?s(A.title):A.title}));return bt(()=>{var P;const A=nb.filterProps(e);return Y("div",{class:"v-data-table-footer"},[(P=r.prepend)==null?void 0:P.call(r),Y("div",{class:"v-data-table-footer__items-per-page"},[Y("span",{"aria-label":s(e.itemsPerPageText)},[s(e.itemsPerPageText)]),F(I0,{items:T.value,modelValue:k.value,"onUpdate:modelValue":R=>S(Number(R)),density:"compact",variant:"outlined","hide-details":!0},null)]),Y("div",{class:"v-data-table-footer__info"},[Y("div",null,[s(e.pageText,b.value?d.value+1:0,a.value,b.value)])]),Y("div",{class:"v-data-table-footer__pagination"},[F(nb,ut({modelValue:c.value,"onUpdate:modelValue":R=>c.value=R,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:f.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},A),null)])])}),{}}}),Cg=OR({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,n)=>{let{slots:r}=n;const s=e.tag??"td",c=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return F(s,{class:vt(["v-data-table__td",{"v-data-table-column--fixed":c==="start","v-data-table-column--fixed-end":c==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:qt(e.height),width:qt(e.width),maxWidth:qt(e.maxWidth),left:c==="start"?qt(e.fixedOffset||null):void 0,right:c==="end"?qt(e.fixedEndOffset||null):void 0}},{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r)]}})}),KO=Ge({headers:Array},"DataTable-header"),g2=Symbol.for("vuetify:data-table-headers"),v2={title:"",sortable:!1},YO={...v2,width:48};function XO(){const n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(r=>({element:r,priority:0}));return{enqueue:(r,s)=>{let c=!1;for(let f=0;f<n.length;f++)if(n[f].priority>s){n.splice(f,0,{element:r,priority:s}),c=!0;break}c||n.push({element:r,priority:s})},size:()=>n.length,count:()=>{let r=0;if(!n.length)return 0;const s=Math.floor(n[0].priority);for(let c=0;c<n.length;c++)Math.floor(n[c].priority)===s&&(r+=1);return r},dequeue:()=>n.shift()}}function ib(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)n.push(e);else for(const r of e.children)ib(r,n);return n}function _2(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const r of e)r.key&&n.add(r.key),r.children&&_2(r.children,n);return n}function JO(e){if(e.key){if(e.key==="data-table-group")return v2;if(["data-table-expand","data-table-select"].includes(e.key))return YO}}function O0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(n,...e.children.map(r=>O0(r,n+1))):n}function QO(e){let n=!1;function r(a,b){var T;let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(!a)return;k!=="none"&&(a.fixed=k),a.fixed===!0&&(a.fixed="start");const S=b==="start"?(T=a.children)==null?void 0:T.toReversed():a.children;if(a.fixed===b)if(S)for(const A of S)r(A,b,b);else!n&&b==="start"?a.lastFixed=!0:!n&&b==="end"?a.firstFixedEnd=!0:isNaN(Number(a.width))?(`${a.key}`,void 0):a.minWidth=Math.max(Number(a.width)||0,Number(a.minWidth)||0),n=!0;else if(S)for(const A of S)r(A,b);else n=!1}for(const a of e.toReversed())r(a,"start");for(const a of e)r(a,"end");function s(a){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!a)return b;if(a.children){a.fixedOffset=b;for(const k of a.children)b=s(k,b)}else a.fixed&&a.fixed!=="end"&&(a.fixedOffset=b,b+=parseFloat(a.width||"0")||0);return b}let c=0;for(const a of e)c=s(a,c);function f(a){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!a)return b;if(a.children){a.fixedEndOffset=b;for(const k of a.children)b=f(k,b)}else a.fixed==="end"&&(a.fixedEndOffset=b,b+=parseFloat(a.width||"0")||0);return b}let d=0;for(const a of e.toReversed())d=f(a,d)}function eF(e,n){const r=[];let s=0;const c=XO(e);for(;c.size()>0;){let d=c.count();const a=[];let b=1;for(;d>0;){const{element:k,priority:S}=c.dequeue(),T=n-s-O0(k);if(a.push({...k,rowspan:T??1,colspan:k.children?ib(k).length:1}),k.children)for(const A of k.children){const P=S%1+b/Math.pow(10,s+2);c.enqueue(A,s+T+P)}b+=1,d-=1}s+=1,r.push(a)}return{columns:e.map(d=>ib(d)).flat(),headers:r}}function y2(e){const n=[];for(const r of e){const s={...JO(r),...r},c=s.key??(typeof s.value=="string"?s.value:null),f=s.value??c??null,d={...s,key:c,value:f,sortable:s.sortable??(s.key!=null||!!s.sort),children:s.children?y2(s.children):void 0};n.push(d)}return n}function F0(e,n){const r=Xe([]),s=Xe([]),c=Xe({}),f=Xe({}),d=Xe({});Li(()=>{var B,L,$;const k=(e.headers||Object.keys(e.items[0]??{}).map(j=>({key:j,title:Ws(j)}))).slice(),S=_2(k);(B=n==null?void 0:n.groupBy)!=null&&B.value.length&&!S.has("data-table-group")&&k.unshift({key:"data-table-group",title:"Group"}),(L=n==null?void 0:n.showSelect)!=null&&L.value&&!S.has("data-table-select")&&k.unshift({key:"data-table-select"}),($=n==null?void 0:n.showExpand)!=null&&$.value&&!S.has("data-table-expand")&&k.push({key:"data-table-expand"});const T=y2(k);QO(T);const A=Math.max(...T.map(j=>O0(j)))+1,P=eF(T,A);r.value=P.headers,s.value=P.columns;const R=P.headers.flat(1);for(const j of R)j.key&&(j.sortable&&(j.sort&&(c.value[j.key]=j.sort),j.sortRaw&&(f.value[j.key]=j.sortRaw)),j.filter&&(d.value[j.key]=j.filter))});const a={headers:r,columns:s,sortFunctions:c,sortRawFunctions:f,filterFunctions:d};return ri(g2,a),a}function uv(){const e=xn(g2);if(!e)throw new Error("Missing headers!");return e}const b2=Ge({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:an,default:"$sortAsc"},sortDescIcon:{type:an,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Ju(),...Wg()},"VDataTableHeaders"),Wu=ft()({name:"VDataTableHeaders",props:b2(),setup(e,n){let{slots:r}=n;const{t:s}=vi(),{toggleSort:c,sortBy:f,isSorted:d}=p2(),{someSelected:a,allSelected:b,selectAll:k,showSelectAll:S}=sv(),{columns:T,headers:A}=uv(),{loaderClasses:P}=gm(e);function R(ce,he){if(!(e.sticky||e.fixedHeader)&&!ce.fixed)return;const ve=typeof ce.fixed=="string"?ce.fixed:ce.fixed?"start":"none";return{position:"sticky",left:ve==="start"?qt(ce.fixedOffset):void 0,right:ve==="end"?qt(ce.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${he})`:void 0}}function B(ce,he){ce.key==="Enter"&&!e.disableSort&&c(he)}function L(ce){const he=f.value.find(ve=>ve.key===ce.key);return he?he.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:$,backgroundColorStyles:j}=ti(()=>e.color),{displayClasses:q,mobile:H}=Qa(e),ee=te(()=>({headers:A.value,columns:T.value,toggleSort:c,isSorted:d,sortBy:f.value,someSelected:a.value,allSelected:b.value,selectAll:k,getSortIcon:L})),Q=te(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},q.value,P.value]),oe=ce=>{let{column:he,x:ve,y:ie}=ce;const be=he.key==="data-table-select"||he.key==="data-table-expand",Be=ut(e.headerProps??{},he.headerProps??{});return F(Cg,ut({tag:"th",align:he.align,class:[{"v-data-table__th--sortable":he.sortable&&!e.disableSort,"v-data-table__th--sorted":d(he),"v-data-table__th--fixed":he.fixed},...Q.value],style:{width:qt(he.width),minWidth:qt(he.minWidth),maxWidth:qt(he.maxWidth),...R(he,ie)},colspan:he.colspan,rowspan:he.rowspan,fixed:he.fixed,nowrap:he.nowrap,lastFixed:he.lastFixed,firstFixedEnd:he.firstFixedEnd,noPadding:be,tabindex:he.sortable?0:void 0,onClick:he.sortable?()=>c(he):void 0,onKeydown:he.sortable?De=>B(De,he):void 0},Be),{default:()=>{var Ze;const De=`header.${he.key}`,Fe={column:he,selectAll:k,isSorted:d,toggleSort:c,sortBy:f.value,someSelected:a.value,allSelected:b.value,getSortIcon:L};return r[De]?r[De](Fe):he.key==="data-table-select"?((Ze=r["header.data-table-select"])==null?void 0:Ze.call(r,Fe))??(S.value&&F(qs,{modelValue:b.value,indeterminate:a.value&&!b.value,"onUpdate:modelValue":k},null)):Y("div",{class:"v-data-table-header__content"},[Y("span",null,[he.title]),he.sortable&&!e.disableSort&&F(Jn,{key:"icon",class:"v-data-table-header__sort-icon",icon:L(he)},null),e.multiSort&&d(he)&&Y("div",{key:"badge",class:vt(["v-data-table-header__sort-badge",...$.value]),style:Bt(j.value)},[f.value.findIndex(mt=>mt.key===he.key)+1])])}})},le=()=>{const ce=te(()=>T.value.filter(ve=>(ve==null?void 0:ve.sortable)&&!e.disableSort)),he=te(()=>{if(T.value.find(ie=>ie.key==="data-table-select")!=null)return b.value?"$checkboxOn":a.value?"$checkboxIndeterminate":"$checkboxOff"});return F(Cg,ut({tag:"th",class:[...Q.value],colspan:A.value.length+1},e.headerProps),{default:()=>[Y("div",{class:"v-data-table-header__content"},[F(I0,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:ce.value,label:s("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>f.value=[],appendIcon:he.value,"onClick:append":()=>k(!b.value)},{...r,chip:ve=>{var ie;return F(Xd,{onClick:(ie=ve.item.raw)!=null&&ie.sortable?()=>c(ve.item.raw):void 0,onMousedown:be=>{be.preventDefault(),be.stopPropagation()}},{default:()=>[ve.item.title,F(Jn,{class:vt(["v-data-table__td-sort-icon",d(ve.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:L(ve.item.raw),size:"small"},null)]})}})])]})};bt(()=>H.value?Y("tr",null,[F(le,null,null)]):Y(Ht,null,[r.headers?r.headers(ee.value):A.value.map((ce,he)=>Y("tr",null,[ce.map((ve,ie)=>F(oe,{column:ve,x:ie,y:he},null))])),e.loading&&Y("tr",{class:"v-data-table-progress"},[Y("th",{colspan:T.value.length},[F(vm,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:r.loader})])])]))}}),tF=Ge({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),nF=ft()({name:"VDataTableGroupHeaderRow",props:tF(),setup(e,n){let{slots:r}=n;const{isGroupOpen:s,toggleGroup:c,extractRows:f}=r2(),{isSelected:d,isSomeSelected:a,select:b}=sv(),{columns:k}=uv(),S=te(()=>f([e.item]));return()=>Y("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[k.value.map(T=>{var A,P;if(T.key==="data-table-group"){const R=s(e.item)?"$expand":"$next",B=()=>c(e.item);return((A=r["data-table-group"])==null?void 0:A.call(r,{item:e.item,count:S.value.length,props:{icon:R,onClick:B}}))??F(Cg,{class:"v-data-table-group-header-row__column"},{default:()=>[F(Ln,{size:"small",variant:"text",icon:R,onClick:B},null),Y("span",null,[e.item.value]),Y("span",null,[Ft("("),S.value.length,Ft(")")])]})}if(T.key==="data-table-select"){const R=d(S.value),B=a(S.value)&&!R,L=$=>b(S.value,$);return((P=r["data-table-select"])==null?void 0:P.call(r,{props:{modelValue:R,indeterminate:B,"onUpdate:modelValue":L}}))??Y("td",null,[F(qs,{modelValue:R,indeterminate:B,"onUpdate:modelValue":L},null)])}return Y("td",null,null)})])}}),iF=Ge({index:Number,item:Object,cellProps:[Object,Function],onClick:Vr(),onContextmenu:Vr(),onDblclick:Vr(),...Ju()},"VDataTableRow"),$0=ft()({name:"VDataTableRow",props:iF(),setup(e,n){let{slots:r}=n;const{displayClasses:s,mobile:c}=Qa(e,"v-data-table__tr"),{isSelected:f,toggleSelect:d,someSelected:a,allSelected:b,selectAll:k}=sv(),{isExpanded:S,toggleExpand:T}=n2(),{toggleSort:A,sortBy:P,isSorted:R}=p2(),{columns:B}=uv();bt(()=>Y("tr",{class:vt(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},s.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&B.value.map((L,$)=>{const j=e.item,q=`item.${L.key}`,H=`header.${L.key}`,ee={index:e.index,item:j.raw,internalItem:j,value:Uu(j.columns,L.key),column:L,isSelected:f,toggleSelect:d,isExpanded:S,toggleExpand:T},Q={column:L,selectAll:k,isSorted:R,toggleSort:A,sortBy:P.value,someSelected:a.value,allSelected:b.value,getSortIcon:()=>""},oe=typeof e.cellProps=="function"?e.cellProps({index:ee.index,item:ee.item,internalItem:ee.internalItem,value:ee.value,column:L}):e.cellProps,le=typeof L.cellProps=="function"?L.cellProps({index:ee.index,item:ee.item,internalItem:ee.internalItem,value:ee.value}):L.cellProps;return F(Cg,ut({align:L.align,class:{"v-data-table__td--expanded-row":L.key==="data-table-expand","v-data-table__td--select-row":L.key==="data-table-select"},fixed:L.fixed,fixedOffset:L.fixedOffset,fixedEndOffset:L.fixedEndOffset,lastFixed:L.lastFixed,firstFixedEnd:L.firstFixedEnd,maxWidth:c.value?void 0:L.maxWidth,noPadding:L.key==="data-table-select"||L.key==="data-table-expand",nowrap:L.nowrap,width:c.value?void 0:L.width},oe,le),{default:()=>{var he,ve,ie,be;if(L.key==="data-table-select")return((he=r["item.data-table-select"])==null?void 0:he.call(r,{...ee,props:{disabled:!j.selectable,modelValue:f([j]),onClick:wl(()=>d(j),["stop"])}}))??F(qs,{disabled:!j.selectable,modelValue:f([j]),onClick:wl(Be=>d(j,e.index,Be),["stop"])},null);if(L.key==="data-table-expand")return((ve=r["item.data-table-expand"])==null?void 0:ve.call(r,{...ee,props:{icon:S(j)?"$collapse":"$expand",size:"small",variant:"text",onClick:wl(()=>T(j),["stop"])}}))??F(Ln,{icon:S(j)?"$collapse":"$expand",size:"small",variant:"text",onClick:wl(()=>T(j),["stop"])},null);if(r[q]&&!c.value)return r[q](ee);const ce=yn(ee.value);return c.value?Y(Ht,null,[Y("div",{class:"v-data-table__td-title"},[((ie=r[H])==null?void 0:ie.call(r,Q))??L.title]),Y("div",{class:"v-data-table__td-value"},[((be=r[q])==null?void 0:be.call(r,ee))??ce])]):ce}})})]))}}),x2=Ge({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Ju()},"VDataTableRows"),Zu=ft()({name:"VDataTableRows",inheritAttrs:!1,props:x2(),setup(e,n){let{attrs:r,slots:s}=n;const{columns:c}=uv(),{expandOnClick:f,toggleExpand:d,isExpanded:a}=n2(),{isSelected:b,toggleSelect:k}=sv(),{toggleGroup:S,isGroupOpen:T}=r2(),{t:A}=vi(),{mobile:P}=Qa(e);return bt(()=>{var R,B;return e.loading&&(!e.items.length||s.loading)?Y("tr",{class:"v-data-table-rows-loading",key:"loading"},[Y("td",{colspan:c.value.length},[((R=s.loading)==null?void 0:R.call(s))??A(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?Y("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[Y("td",{colspan:c.value.length},[((B=s["no-data"])==null?void 0:B.call(s))??A(e.noDataText)])]):Y(Ht,null,[e.items.map((L,$)=>{var H;if(L.type==="group"){const ee={index:$,item:L,columns:c.value,isExpanded:a,toggleExpand:d,isSelected:b,toggleSelect:k,toggleGroup:S,isGroupOpen:T};return s["group-header"]?s["group-header"](ee):F(nF,ut({key:`group-header_${L.id}`,item:L},W1(r,":group-header",()=>ee)),s)}const j={index:$,item:L.raw,internalItem:L,columns:c.value,isExpanded:a,toggleExpand:d,isSelected:b,toggleSelect:k},q={...j,props:ut({key:`item_${L.key??L.index}`,onClick:f.value?()=>{d(L)}:void 0,index:$,item:L,cellProps:e.cellProps,mobile:P.value},W1(r,":row",()=>j),typeof e.rowProps=="function"?e.rowProps({item:j.item,index:j.index,internalItem:j.internalItem}):e.rowProps)};return Y(Ht,{key:q.props.key},[s.item?s.item(q):F($0,q.props,s),a(L)&&((H=s["expanded-row"])==null?void 0:H.call(s,j))])})])}),{}}}),w2=Ge({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Kt(),...mr(),...wn(),...Hn()},"VTable"),Ku=ft()({name:"VTable",props:w2(),setup(e,n){let{slots:r,emit:s}=n;const{themeClasses:c}=Qn(e),{densityClasses:f}=sa(e);return bt(()=>F(e.tag,{class:vt(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!r.top,"v-table--has-bottom":!!r.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},c.value,f.value,e.class]),style:Bt(e.style)},{default:()=>{var d,a,b;return[(d=r.top)==null?void 0:d.call(r),r.default?Y("div",{class:"v-table__wrapper",style:{height:qt(e.height)}},[Y("table",null,[r.default()])]):(a=r.wrapper)==null?void 0:a.call(r),(b=r.bottom)==null?void 0:b.call(r)]}})),{}}}),rF=Ge({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function aF(e,n,r,s){const c=e.returnObject?n:Wi(n,e.itemValue),f=Wi(n,e.itemSelectable,!0),d=s.reduce((a,b)=>(b.key!=null&&(a[b.key]=Wi(n,b.value)),a),{});return{type:"item",key:e.returnObject?Wi(n,e.itemValue):c,index:r,value:c,selectable:f,columns:d,raw:n}}function sF(e,n,r){return n.map((s,c)=>aF(e,s,c,r))}function j0(e,n){return{items:te(()=>sF(e,e.items,n.value))}}const N0=Ge({...x2(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...e2(),...M0(),...KO(),...rF(),...d2(),...f2(),...b2(),...w2()},"DataTable"),oF=Ge({...R0(),...N0(),...Qd(),...B0()},"VDataTable"),lF=ft()({name:"VDataTable",props:oF(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=D0(e),{sortBy:f,multiSort:d,mustSort:a}=ov(e),{page:b,itemsPerPage:k}=L0(e),{disableSort:S}=qd(e),{columns:T,headers:A,sortFunctions:P,sortRawFunctions:R,filterFunctions:B}=F0(e,{groupBy:c,showSelect:Me(()=>e.showSelect),showExpand:Me(()=>e.showExpand)}),{items:L}=j0(e,T),$=Me(()=>e.search),{filteredItems:j}=eh(e,L,$,{transform:Le=>Le.columns,customKeyFilter:B}),{toggleSort:q}=lv({sortBy:f,multiSort:d,mustSort:a,page:b}),{sortByWithGroups:H,opened:ee,extractRows:Q,isGroupOpen:oe,toggleGroup:le}=nv({groupBy:c,sortBy:f,disableSort:S}),{sortedItems:ce}=V0(e,j,H,{transform:Le=>({...Le.raw,...Le.columns}),sortFunctions:P,sortRawFunctions:R}),{flatItems:he}=iv(ce,c,ee),ve=te(()=>he.value.length),{startIndex:ie,stopIndex:be,pageCount:Be,setItemsPerPage:De}=z0({page:b,itemsPerPage:k,itemsLength:ve}),{paginatedItems:Fe}=l2({items:he,startIndex:ie,stopIndex:be,itemsPerPage:k}),Ze=te(()=>Q(Fe.value)),{isSelected:mt,select:pt,selectAll:Ve,toggleSelect:Se,someSelected:Ee,allSelected:tt}=av(e,{allItems:L,currentPage:Ze}),{isExpanded:Nt,toggleExpand:kt}=tv(e);rv({page:b,itemsPerPage:k,sortBy:f,groupBy:c,search:$}),zi({VDataTableRows:{hideNoData:Me(()=>e.hideNoData),noDataText:Me(()=>e.noDataText),loading:Me(()=>e.loading),loadingText:Me(()=>e.loadingText)}});const wt=te(()=>({page:b.value,itemsPerPage:k.value,sortBy:f.value,pageCount:Be.value,toggleSort:q,setItemsPerPage:De,someSelected:Ee.value,allSelected:tt.value,isSelected:mt,select:pt,selectAll:Ve,toggleSelect:Se,isExpanded:Nt,toggleExpand:kt,isGroupOpen:oe,toggleGroup:le,items:Ze.value.map(Le=>Le.raw),internalItems:Ze.value,groupedItems:Fe.value,columns:T.value,headers:A.value}));return bt(()=>{const Le=im.filterProps(e),_t=Wu.filterProps(e),ot=Zu.filterProps(e),Je=Ku.filterProps(e);return F(Ku,ut({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},Je,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Ct;return(Ct=s.top)==null?void 0:Ct.call(s,wt.value)},default:()=>{var Ct,ae,de,ze,Ye,ct;return s.default?s.default(wt.value):Y(Ht,null,[(Ct=s.colgroup)==null?void 0:Ct.call(s,wt.value),!e.hideDefaultHeader&&Y("thead",{key:"thead"},[F(Wu,_t,s)]),(ae=s.thead)==null?void 0:ae.call(s,wt.value),!e.hideDefaultBody&&Y("tbody",null,[(de=s["body.prepend"])==null?void 0:de.call(s,wt.value),s.body?s.body(wt.value):F(Zu,ut(r,ot,{items:Fe.value}),s),(ze=s["body.append"])==null?void 0:ze.call(s,wt.value)]),(Ye=s.tbody)==null?void 0:Ye.call(s,wt.value),(ct=s.tfoot)==null?void 0:ct.call(s,wt.value)])},bottom:()=>s.bottom?s.bottom(wt.value):!e.hideDefaultFooter&&Y(Ht,null,[F($a,null,null),F(im,Le,{prepend:s["footer.prepend"]})])})}),{}}}),uF=Ge({...di(N0(),["hideDefaultFooter"]),...M0(),...LP(),...Qd()},"VDataTableVirtual"),cF=ft()({name:"VDataTableVirtual",props:uF(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=D0(e),{sortBy:f,multiSort:d,mustSort:a}=ov(e),{disableSort:b}=qd(e),{columns:k,headers:S,filterFunctions:T,sortFunctions:A,sortRawFunctions:P}=F0(e,{groupBy:c,showSelect:Me(()=>e.showSelect),showExpand:Me(()=>e.showExpand)}),{items:R}=j0(e,k),B=Me(()=>e.search),{filteredItems:L}=eh(e,R,B,{transform:Je=>Je.columns,customKeyFilter:T}),{toggleSort:$}=lv({sortBy:f,multiSort:d,mustSort:a}),{sortByWithGroups:j,opened:q,extractRows:H,isGroupOpen:ee,toggleGroup:Q}=nv({groupBy:c,sortBy:f,disableSort:b}),{sortedItems:oe}=V0(e,L,j,{transform:Je=>({...Je.raw,...Je.columns}),sortFunctions:A,sortRawFunctions:P}),{flatItems:le}=iv(oe,c,q),ce=te(()=>H(le.value)),{isSelected:he,select:ve,selectAll:ie,toggleSelect:be,someSelected:Be,allSelected:De}=av(e,{allItems:ce,currentPage:ce}),{isExpanded:Fe,toggleExpand:Ze}=tv(e),{containerRef:mt,markerRef:pt,paddingTop:Ve,paddingBottom:Se,computedItems:Ee,handleItemResize:tt,handleScroll:Nt,handleScrollend:kt,calculateVisibleItems:wt,scrollToIndex:Le}=zP(e,le),_t=te(()=>Ee.value.map(Je=>Je.raw));rv({sortBy:f,page:Rt(1),itemsPerPage:Rt(-1),groupBy:c,search:B}),zi({VDataTableRows:{hideNoData:Me(()=>e.hideNoData),noDataText:Me(()=>e.noDataText),loading:Me(()=>e.loading),loadingText:Me(()=>e.loadingText)}});const ot=te(()=>({sortBy:f.value,toggleSort:$,someSelected:Be.value,allSelected:De.value,isSelected:he,select:ve,selectAll:ie,toggleSelect:be,isExpanded:Fe,toggleExpand:Ze,isGroupOpen:ee,toggleGroup:Q,items:ce.value.map(Je=>Je.raw),internalItems:ce.value,groupedItems:le.value,columns:k.value,headers:S.value}));return bt(()=>{const Je=Wu.filterProps(e),Ct=Zu.filterProps(e),ae=Ku.filterProps(e);return F(Ku,ut({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ae,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var de;return(de=s.top)==null?void 0:de.call(s,ot.value)},wrapper:()=>{var de,ze,Ye,ct,et,It;return Y("div",{ref:mt,onScrollPassive:Nt,onScrollend:kt,class:"v-table__wrapper",style:{height:qt(e.height)}},[Y("table",null,[(de=s.colgroup)==null?void 0:de.call(s,ot.value),!e.hideDefaultHeader&&Y("thead",{key:"thead"},[F(Wu,Je,s)]),(ze=s.thead)==null?void 0:ze.call(s,ot.value),!e.hideDefaultBody&&Y("tbody",{key:"tbody"},[Y("tr",{ref:pt,style:{height:qt(Ve.value),border:0}},[Y("td",{colspan:k.value.length,style:{height:0,border:0}},null)]),(Ye=s["body.prepend"])==null?void 0:Ye.call(s,ot.value),F(Zu,ut(r,Ct,{items:_t.value}),{...s,item:dt=>F(RP,{key:dt.internalItem.index,renderless:!0,"onUpdate:height":Lt=>tt(dt.internalItem.index,Lt)},{default:Lt=>{var sn;let{itemRef:At}=Lt;return((sn=s.item)==null?void 0:sn.call(s,{...dt,itemRef:At}))??F($0,ut(dt.props,{ref:At,key:dt.internalItem.index,index:dt.internalItem.index}),s)}})}),(ct=s["body.append"])==null?void 0:ct.call(s,ot.value),Y("tr",{style:{height:qt(Se.value),border:0}},[Y("td",{colspan:k.value.length,style:{height:0,border:0}},null)])]),(et=s.tbody)==null?void 0:et.call(s,ot.value),(It=s.tfoot)==null?void 0:It.call(s,ot.value)])])},bottom:()=>{var de;return(de=s.bottom)==null?void 0:de.call(s,ot.value)}})}),{calculateVisibleItems:wt,scrollToIndex:Le}}}),dF=Ge({itemsLength:{type:[Number,String],required:!0},...R0(),...N0(),...B0()},"VDataTableServer"),hF=ft()({name:"VDataTableServer",props:dF(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const{groupBy:c}=D0(e),{sortBy:f,multiSort:d,mustSort:a}=ov(e),{page:b,itemsPerPage:k}=L0(e),{disableSort:S}=qd(e),T=te(()=>parseInt(e.itemsLength,10)),{columns:A,headers:P}=F0(e,{groupBy:c,showSelect:Me(()=>e.showSelect),showExpand:Me(()=>e.showExpand)}),{items:R}=j0(e,A),{toggleSort:B}=lv({sortBy:f,multiSort:d,mustSort:a,page:b}),{opened:L,isGroupOpen:$,toggleGroup:j,extractRows:q}=nv({groupBy:c,sortBy:f,disableSort:S}),{pageCount:H,setItemsPerPage:ee}=z0({page:b,itemsPerPage:k,itemsLength:T}),{flatItems:Q}=iv(R,c,L),{isSelected:oe,select:le,selectAll:ce,toggleSelect:he,someSelected:ve,allSelected:ie}=av(e,{allItems:R,currentPage:R}),{isExpanded:be,toggleExpand:Be}=tv(e),De=te(()=>q(R.value));rv({page:b,itemsPerPage:k,sortBy:f,groupBy:c,search:Me(()=>e.search)}),ri("v-data-table",{toggleSort:B,sortBy:f}),zi({VDataTableRows:{hideNoData:Me(()=>e.hideNoData),noDataText:Me(()=>e.noDataText),loading:Me(()=>e.loading),loadingText:Me(()=>e.loadingText)}});const Fe=te(()=>({page:b.value,itemsPerPage:k.value,sortBy:f.value,pageCount:H.value,toggleSort:B,setItemsPerPage:ee,someSelected:ve.value,allSelected:ie.value,isSelected:oe,select:le,selectAll:ce,toggleSelect:he,isExpanded:be,toggleExpand:Be,isGroupOpen:$,toggleGroup:j,items:De.value.map(Ze=>Ze.raw),internalItems:De.value,groupedItems:Q.value,columns:A.value,headers:P.value}));bt(()=>{const Ze=im.filterProps(e),mt=Wu.filterProps(e),pt=Zu.filterProps(e),Ve=Ku.filterProps(e);return F(Ku,ut({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Ve,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Se;return(Se=s.top)==null?void 0:Se.call(s,Fe.value)},default:()=>{var Se,Ee,tt,Nt,kt,wt;return s.default?s.default(Fe.value):Y(Ht,null,[(Se=s.colgroup)==null?void 0:Se.call(s,Fe.value),!e.hideDefaultHeader&&Y("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[F(Wu,mt,s)]),(Ee=s.thead)==null?void 0:Ee.call(s,Fe.value),!e.hideDefaultBody&&Y("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(tt=s["body.prepend"])==null?void 0:tt.call(s,Fe.value),s.body?s.body(Fe.value):F(Zu,ut(r,pt,{items:Q.value}),s),(Nt=s["body.append"])==null?void 0:Nt.call(s,Fe.value)]),(kt=s.tbody)==null?void 0:kt.call(s,Fe.value),(wt=s.tfoot)==null?void 0:wt.call(s,Fe.value)])},bottom:()=>s.bottom?s.bottom(Fe.value):!e.hideDefaultFooter&&Y(Ht,null,[F($a,null,null),F(im,Ze,{prepend:s["footer.prepend"]})])})})}}),fF=Ge({fluid:{type:Boolean,default:!1},...Kt(),...Zi(),...wn()},"VContainer"),mF=ft()({name:"VContainer",props:fF(),setup(e,n){let{slots:r}=n;const{rtlClasses:s}=tr(),{dimensionStyles:c}=Ki(e);return bt(()=>F(e.tag,{class:vt(["v-container",{"v-container--fluid":e.fluid},s.value,e.class]),style:Bt([c.value,e.style])},r)),{}}}),S2=Ng.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}),k2=Ng.reduce((e,n)=>{const r="offset"+Ws(n);return e[r]={type:[String,Number],default:null},e},{}),C2=Ng.reduce((e,n)=>{const r="order"+Ws(n);return e[r]={type:[String,Number],default:null},e},{}),yS={col:Object.keys(S2),offset:Object.keys(k2),order:Object.keys(C2)};function pF(e,n,r){let s=e;if(!(r==null||r===!1)){if(n){const c=n.replace(e,"");s+=`-${c}`}return e==="col"&&(s="v-"+s),e==="col"&&(r===""||r===!0)||(s+=`-${r}`),s.toLowerCase()}}const gF=["auto","start","end","center","baseline","stretch"],vF=Ge({cols:{type:[Boolean,String,Number],default:!1},...S2,offset:{type:[String,Number],default:null},...k2,order:{type:[String,Number],default:null},...C2,alignSelf:{type:String,default:null,validator:e=>gF.includes(e)},...Kt(),...wn()},"VCol"),_F=ft()({name:"VCol",props:vF(),setup(e,n){let{slots:r}=n;const s=te(()=>{const c=[];let f;for(f in yS)yS[f].forEach(a=>{const b=e[a],k=pF(f,a,b);k&&c.push(k)});const d=c.some(a=>a.startsWith("v-col-"));return c.push({"v-col":!d||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),c});return()=>{var c;return bs(e.tag,{class:[s.value,e.class],style:e.style},(c=r.default)==null?void 0:c.call(r))}}}),U0=["start","end","center"],T2=["space-between","space-around","space-evenly"];function G0(e,n){return Ng.reduce((r,s)=>{const c=e+Ws(s);return r[c]=n(),r},{})}const yF=[...U0,"baseline","stretch"],P2=e=>yF.includes(e),I2=G0("align",()=>({type:String,default:null,validator:P2})),bF=[...U0,...T2],A2=e=>bF.includes(e),E2=G0("justify",()=>({type:String,default:null,validator:A2})),xF=[...U0,...T2,"stretch"],M2=e=>xF.includes(e),D2=G0("alignContent",()=>({type:String,default:null,validator:M2})),bS={align:Object.keys(I2),justify:Object.keys(E2),alignContent:Object.keys(D2)},wF={align:"align",justify:"justify",alignContent:"align-content"};function SF(e,n,r){let s=wF[e];if(r!=null){if(n){const c=n.replace(e,"");s+=`-${c}`}return s+=`-${r}`,s.toLowerCase()}}const kF=Ge({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:P2},...I2,justify:{type:String,default:null,validator:A2},...E2,alignContent:{type:String,default:null,validator:M2},...D2,...Kt(),...wn()},"VRow"),CF=ft()({name:"VRow",props:kF(),setup(e,n){let{slots:r}=n;const s=te(()=>{const c=[];let f;for(f in bS)bS[f].forEach(d=>{const a=e[d],b=SF(f,d,a);b&&c.push(b)});return c.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),c});return()=>{var c;return bs(e.tag,{class:["v-row",s.value,e.class],style:e.style},(c=r.default)==null?void 0:c.call(r))}}}),R2=Ao("v-spacer","div","VSpacer"),L2=Ge({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:an,default:"$next"},prevIcon:{type:an,default:"$prev"},modeIcon:{type:an,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),rb=ft()({name:"VDatePickerControls",props:L2(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:r}=n;const s=te(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),c=te(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),f=te(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),d=te(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function a(){r("click:prev")}function b(){r("click:next")}function k(){r("click:year")}function S(){r("click:month")}return bt(()=>Y("div",{class:vt(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":qt(e.controlHeight)}},[F(Ln,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:s.value,text:e.text,variant:"text",rounded:!0,onClick:S},null),F(Ln,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:c.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:k},null),F(R2,null,null),Y("div",{class:"v-date-picker-controls__month"},[F(Ln,{"data-testid":"prev-month",disabled:f.value,density:"comfortable",icon:e.prevIcon,variant:"text",onClick:a},null),F(Ln,{"data-testid":"next-month",disabled:d.value,icon:e.nextIcon,density:"comfortable",variant:"text",onClick:b},null)])])),{}}}),TF=Ge({appendIcon:an,color:String,header:String,transition:String,onClick:Vr()},"VDatePickerHeader"),ab=ft()({name:"VDatePickerHeader",props:TF(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:r,slots:s}=n;const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color);function d(){r("click")}function a(){r("click:append")}return bt(()=>{const b=!!(s.default||e.header),k=!!(s.append||e.appendIcon);return Y("div",{class:vt(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},c.value]),style:Bt(f.value),onClick:d},[s.prepend&&Y("div",{key:"prepend",class:"v-date-picker-header__prepend"},[s.prepend()]),b&&F(ia,{key:"content",name:e.transition},{default:()=>{var S;return[Y("div",{key:e.header,class:"v-date-picker-header__content"},[((S=s.default)==null?void 0:S.call(s))??e.header])]}}),k&&Y("div",{class:"v-date-picker-header__append"},[s.append?F(kn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var S;return[(S=s.append)==null?void 0:S.call(s)]}}):F(Ln,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:a},null)])])}),{}}}),PF=Ge({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function IF(e){const n=mm(),r=nn(e,"modelValue",[],P=>Di(P).map(R=>n.date(R))),s=te(()=>e.displayValue?n.date(e.displayValue):r.value.length>0?n.date(r.value[0]):e.min?n.date(e.min):Array.isArray(e.allowedDates)?n.date(e.allowedDates[0]):n.date()),c=nn(e,"year",void 0,P=>{const R=P!=null?Number(P):n.getYear(s.value);return n.startOfYear(n.setYear(n.date(),R))},P=>n.getYear(P)),f=nn(e,"month",void 0,P=>{const R=P!=null?Number(P):n.getMonth(s.value),B=n.setYear(n.startOfMonth(n.date()),n.getYear(c.value));return n.setMonth(B,R)},P=>n.getMonth(P)),d=te(()=>{const P=n.toJsDate(n.startOfWeek(n.date(),e.firstDayOfWeek)).getDay();return n.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((R,B)=>e.weekdays.includes((B+P)%7))}),a=te(()=>{const P=n.getWeekArray(f.value,e.firstDayOfWeek),R=P.flat(),B=6*7;if(e.weeksInMonth==="static"&&R.length<B){const L=R[R.length-1];let $=[];for(let j=1;j<=B-R.length;j++)$.push(n.addDays(L,j)),j%7===0&&(P.push($),$=[])}return P});function b(P,R){return P.filter(B=>e.weekdays.includes(n.toJsDate(B).getDay())).map((B,L)=>{const $=n.toISO(B),j=!n.isSameMonth(B,f.value),q=n.isSameDay(B,n.startOfMonth(f.value)),H=n.isSameDay(B,n.endOfMonth(f.value)),ee=n.isSameDay(B,f.value),Q=e.weekdays.length;return{date:B,formatted:n.format(B,"keyboardDate"),isAdjacent:j,isDisabled:A(B),isEnd:H,isHidden:j&&!e.showAdjacentMonths,isSame:ee,isSelected:r.value.some(oe=>n.isSameDay(B,oe)),isStart:q,isToday:n.isSameDay(B,R),isWeekEnd:L%Q===Q-1,isWeekStart:L%Q===0,isoDate:$,localized:n.format(B,"dayOfMonth"),month:n.getMonth(B),year:n.getYear(B)}})}const k=te(()=>{const P=n.startOfWeek(s.value,e.firstDayOfWeek),R=[];for(let L=0;L<=6;L++)R.push(n.addDays(P,L));const B=n.date();return b(R,B)}),S=te(()=>{const P=a.value.flat(),R=n.date();return b(P,R)}),T=te(()=>a.value.map(P=>P.length?n.getWeek(P[0],e.firstDayOfWeek):null));function A(P){if(e.disabled)return!0;const R=n.date(P);return e.min&&n.isAfter(n.date(e.min),R)||e.max&&n.isAfter(R,n.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(B=>n.isSameDay(n.date(B),R)):typeof e.allowedDates=="function"?!e.allowedDates(R):!1}return{displayValue:s,daysInMonth:S,daysInWeek:k,genDays:b,model:r,weeksInMonth:a,weekdayLabels:d,weekNumbers:T}}const z2=Ge({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...di(PF(),["displayValue"])},"VDatePickerMonth"),sb=ft()({name:"VDatePickerMonth",props:z2(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=Xe(),{daysInMonth:f,model:d,weekNumbers:a,weekdayLabels:b}=IF(e),k=mm(),S=Rt(),T=Rt(),A=Rt(!1),P=Me(()=>A.value?e.reverseTransition:e.transition);e.multiple==="range"&&d.value.length>0&&(S.value=d.value[0],d.value.length>1&&(T.value=d.value[d.value.length-1]));const R=te(()=>{const j=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return d.value.length>=j});Ot(f,(j,q)=>{q&&(A.value=k.isBefore(j[0].date,q[0].date))});function B(j){const q=k.startOfDay(j);if(d.value.length===0?S.value=void 0:d.value.length===1&&(S.value=d.value[0],T.value=void 0),!S.value)S.value=q,d.value=[S.value];else if(T.value)S.value=j,T.value=void 0,d.value=[S.value];else{if(k.isSameDay(q,S.value)){S.value=void 0,d.value=[];return}else k.isBefore(q,S.value)?(T.value=k.endOfDay(S.value),S.value=q):T.value=k.endOfDay(q);d.value=RL(k,S.value,T.value)}}function L(j){const q=d.value.findIndex(H=>k.isSameDay(H,j));if(q===-1)d.value=[...d.value,j];else{const H=[...d.value];H.splice(q,1),d.value=H}}function $(j){e.multiple==="range"?B(j):e.multiple?L(j):d.value=[j]}bt(()=>Y("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&Y("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&Y("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Ft("")]),a.value.map(j=>Y("div",{class:vt(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[j]))]),F(ia,{name:P.value},{default:()=>{var j;return[Y("div",{ref:c,key:(j=f.value[0].date)==null?void 0:j.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&b.value.map(q=>Y("div",{class:vt(["v-date-picker-month__day","v-date-picker-month__weekday"])},[q])),f.value.map((q,H)=>{var Q;const ee={props:{class:"v-date-picker-month__day-btn",color:q.isSelected||q.isToday?e.color:void 0,disabled:q.isDisabled,icon:!0,ripple:!1,text:q.localized,variant:q.isSelected?"flat":q.isToday?"outlined":"text",onClick:()=>$(q.date)},item:q,i:H};return R.value&&!q.isSelected&&(q.isDisabled=!0),Y("div",{class:vt(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":q.isAdjacent,"v-date-picker-month__day--hide-adjacent":q.isHidden,"v-date-picker-month__day--selected":q.isSelected,"v-date-picker-month__day--week-end":q.isWeekEnd,"v-date-picker-month__day--week-start":q.isWeekStart}]),"data-v-date":q.isDisabled?void 0:q.isoDate},[(e.showAdjacentMonths||!q.isAdjacent)&&(((Q=s.day)==null?void 0:Q.call(s,ee))??F(Ln,ee.props,null))])})])]}})]))}}),V2=Ge({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),ob=ft()({name:"VDatePickerMonths",props:V2(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=mm(),f=nn(e,"modelValue"),d=te(()=>{let b=c.startOfYear(c.date());return e.year&&(b=c.setYear(b,e.year)),Oa(12).map(k=>{const S=c.format(b,"monthShort"),T=!!(!a(k)||e.min&&c.isAfter(c.startOfMonth(c.date(e.min)),b)||e.max&&c.isAfter(b,c.startOfMonth(c.date(e.max))));return b=c.getNextMonth(b),{isDisabled:T,text:S,value:k}})});Li(()=>{f.value=f.value??c.getMonth(c.date())});function a(b){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(b):typeof e.allowedMonths=="function"?e.allowedMonths(b):!0}return bt(()=>Y("div",{class:"v-date-picker-months",style:{height:qt(e.height)}},[Y("div",{class:"v-date-picker-months__content"},[d.value.map((b,k)=>{var A;const S={active:f.value===k,color:f.value===k?e.color:void 0,disabled:b.isDisabled,rounded:!0,text:b.text,variant:f.value===b.value?"flat":"text",onClick:()=>T(k)};function T(P){if(f.value===P){r("update:modelValue",f.value);return}f.value=P}return((A=s.month)==null?void 0:A.call(s,{month:b,i:k,props:S}))??F(Ln,ut({key:"month"},S),null)})])])),{}}}),B2=Ge({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),lb=ft()({name:"VDatePickerYears",props:B2(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=mm(),f=nn(e,"modelValue"),d=te(()=>{const k=c.getYear(c.date());let S=k-100,T=k+52;e.min&&(S=c.getYear(c.date(e.min))),e.max&&(T=c.getYear(c.date(e.max)));let A=c.startOfYear(c.date());return A=c.setYear(A,S),Oa(T-S+1,S).map(P=>{const R=c.format(A,"year");return A=c.setYear(A,c.getYear(A)+1),{text:R,value:P,isDisabled:!b(P)}})});Li(()=>{f.value=f.value??c.getYear(c.date())});const a=vg();gi(async()=>{var k;await zn(),(k=a.el)==null||k.focus()});function b(k){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(k):typeof e.allowedYears=="function"?e.allowedYears(k):!0}return bt(()=>Y("div",{class:"v-date-picker-years",style:{height:qt(e.height)}},[Y("div",{class:"v-date-picker-years__content"},[d.value.map((k,S)=>{var A;const T={ref:f.value===k.value?a:void 0,active:f.value===k.value,color:f.value===k.value?e.color:void 0,rounded:!0,text:k.text,disabled:k.isDisabled,variant:f.value===k.value?"flat":"text",onClick:()=>{if(f.value===k.value){r("update:modelValue",f.value);return}f.value=k.value}};return((A=s.year)==null?void 0:A.call(s,{year:k,i:S,props:T}))??F(Ln,ut({key:"month"},T),null)})])])),{}}}),AF=Ge({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...L2(),...z2({weeksInMonth:"static"}),...di(V2(),["modelValue"]),...di(B2(),["modelValue"]),...ev({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),EF=ft()({name:"VDatePicker",props:AF(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const c=mm(),{t:f}=vi(),{rtlClasses:d}=tr(),a=nn(e,"modelValue",void 0,Fe=>Di(Fe).map(Ze=>c.date(Ze)),Fe=>e.multiple?Fe:Fe[0]),b=nn(e,"viewMode"),k=te(()=>{const Fe=c.date(e.min);return e.min&&c.isValid(Fe)?Fe:null}),S=te(()=>{const Fe=c.date(e.max);return e.max&&c.isValid(Fe)?Fe:null}),T=te(()=>{var mt;const Fe=c.date();let Ze=Fe;return(mt=a.value)!=null&&mt[0]?Ze=c.date(a.value[0]):k.value&&c.isBefore(Fe,k.value)?Ze=k.value:S.value&&c.isAfter(Fe,S.value)&&(Ze=S.value),Ze&&c.isValid(Ze)?Ze:Fe}),A=Me(()=>e.headerColor??e.color),P=nn(e,"month"),R=te({get:()=>Number(P.value??c.getMonth(c.startOfMonth(T.value))),set:Fe=>P.value=Fe}),B=nn(e,"year"),L=te({get:()=>Number(B.value??c.getYear(c.startOfYear(c.setMonth(T.value,R.value)))),set:Fe=>B.value=Fe}),$=Rt(!1),j=te(()=>e.multiple&&a.value.length>1?f("$vuetify.datePicker.itemsSelected",a.value.length):a.value[0]&&c.isValid(a.value[0])?c.format(c.date(a.value[0]),"normalDateWithWeekday"):f(e.header)),q=te(()=>{let Fe=c.date();return Fe=c.setDate(Fe,1),Fe=c.setMonth(Fe,R.value),Fe=c.setYear(Fe,L.value),c.format(Fe,"monthAndYear")}),H=Me(()=>`date-picker-header${$.value?"-reverse":""}-transition`),ee=te(()=>{if(e.disabled)return!0;const Fe=[];if(b.value!=="month")Fe.push("prev","next");else{let Ze=c.date();if(Ze=c.startOfMonth(Ze),Ze=c.setMonth(Ze,R.value),Ze=c.setYear(Ze,L.value),k.value){const mt=c.addDays(c.startOfMonth(Ze),-1);c.isAfter(k.value,mt)&&Fe.push("prev")}if(S.value){const mt=c.addDays(c.endOfMonth(Ze),1);c.isAfter(mt,S.value)&&Fe.push("next")}}return Fe});function Q(Fe,Ze){const mt=e.allowedDates;if(typeof mt!="function")return!0;const pt=c.getDiff(Ze,Fe,"days");for(let Ve=0;Ve<pt;Ve++)if(mt(c.addDays(Fe,Ve)))return!0;return!1}function oe(Fe){if(typeof e.allowedDates=="function"){const Ze=c.parseISO(`${Fe}-01-01`);return Q(Ze,c.endOfYear(Ze))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ze of e.allowedDates)if(c.getYear(c.date(Ze))===Fe)return!0;return!1}return!0}function le(Fe){if(typeof e.allowedDates=="function"){const Ze=String(Fe+1).padStart(2,"0"),mt=c.parseISO(`${L.value}-${Ze}-01`);return Q(mt,c.endOfMonth(mt))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ze of e.allowedDates)if(c.getYear(c.date(Ze))===L.value&&c.getMonth(c.date(Ze))===Fe)return!0;return!1}return!0}function ce(){R.value<11?R.value++:(L.value++,R.value=0,De()),Be()}function he(){R.value>0?R.value--:(L.value--,R.value=11,De()),Be()}function ve(){b.value="month"}function ie(){b.value=b.value==="months"?"month":"months"}function be(){b.value=b.value==="year"?"month":"year"}function Be(){b.value==="months"&&ie()}function De(){b.value==="year"&&be()}return Ot(a,(Fe,Ze)=>{const mt=Di(Ze),pt=Di(Fe);if(!pt.length)return;const Ve=c.date(mt[mt.length-1]),Se=c.date(pt[pt.length-1]),Ee=c.getMonth(Se),tt=c.getYear(Se);Ee!==R.value&&(R.value=Ee,Be()),tt!==L.value&&(L.value=tt,De()),$.value=c.isBefore(Ve,Se)}),bt(()=>{const Fe=$d.filterProps(e),Ze=rb.filterProps(e),mt=ab.filterProps(e),pt=sb.filterProps(e),Ve=di(ob.filterProps(e),["modelValue"]),Se=di(lb.filterProps(e),["modelValue"]),Ee={color:A.value,header:j.value,transition:H.value};return F($d,ut(Fe,{color:A.value,class:["v-date-picker",`v-date-picker--${b.value}`,{"v-date-picker--show-week":e.showWeek},d.value,e.class],style:e.style}),{title:()=>{var tt;return((tt=s.title)==null?void 0:tt.call(s))??Y("div",{class:"v-date-picker__title"},[f(e.title)])},header:()=>s.header?F(kn,{defaults:{VDatePickerHeader:{...Ee}}},{default:()=>{var tt;return[(tt=s.header)==null?void 0:tt.call(s,Ee)]}}):F(ab,ut({key:"header"},mt,Ee,{onClick:b.value!=="month"?ve:void 0}),{prepend:s.prepend,append:s.append}),default:()=>Y(Ht,null,[F(rb,ut(Ze,{disabled:ee.value,text:q.value,"onClick:next":ce,"onClick:prev":he,"onClick:month":ie,"onClick:year":be}),null),F(Kf,{hideOnLeave:!0},{default:()=>[b.value==="months"?F(ob,ut({key:"date-picker-months"},Ve,{modelValue:R.value,"onUpdate:modelValue":[tt=>R.value=tt,Be],min:k.value,max:S.value,year:L.value,allowedMonths:le}),{month:s.month}):b.value==="year"?F(lb,ut({key:"date-picker-years"},Se,{modelValue:L.value,"onUpdate:modelValue":[tt=>L.value=tt,De],min:k.value,max:S.value,allowedYears:oe}),{year:s.year}):F(sb,ut({key:"date-picker-month"},pt,{modelValue:a.value,"onUpdate:modelValue":tt=>a.value=tt,month:R.value,"onUpdate:month":[tt=>R.value=tt,Be],year:L.value,"onUpdate:year":[tt=>L.value=tt,De],min:k.value,max:S.value}),{day:s.day})]})]),actions:s.actions})}),{}}}),MF=Ge({actionText:String,bgColor:String,color:String,icon:an,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Kt(),...Zi(),...Ks({size:void 0}),...Hn()},"VEmptyState"),DF=ft()({name:"VEmptyState",props:MF(),emits:{"click:action":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{themeClasses:c}=Qn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.bgColor),{dimensionStyles:a}=Ki(e),{displayClasses:b}=Qa();function k(S){r("click:action",S)}return bt(()=>{var L,$,j;const S=!!(s.actions||e.actionText),T=!!(s.headline||e.headline),A=!!(s.title||e.title),P=!!(s.text||e.text),R=!!(s.media||e.image||e.icon),B=e.size||(e.image?200:96);return Y("div",{class:vt(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},c.value,f.value,b.value,e.class]),style:Bt([d.value,a.value,e.style])},[R&&Y("div",{key:"media",class:"v-empty-state__media"},[s.media?F(kn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:B},VIcon:{size:B,icon:e.icon}}},{default:()=>[s.media()]}):Y(Ht,null,[e.image?F(Co,{key:"image",src:e.image,height:B},null):e.icon?F(Jn,{key:"icon",color:e.color,size:B,icon:e.icon},null):void 0])]),T&&Y("div",{key:"headline",class:"v-empty-state__headline"},[((L=s.headline)==null?void 0:L.call(s))??e.headline]),A&&Y("div",{key:"title",class:"v-empty-state__title"},[(($=s.title)==null?void 0:$.call(s))??e.title]),P&&Y("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:qt(e.textWidth)}},[((j=s.text)==null?void 0:j.call(s))??e.text]),s.default&&Y("div",{key:"content",class:"v-empty-state__content"},[s.default()]),S&&Y("div",{key:"actions",class:"v-empty-state__actions"},[F(kn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>{var q;return[((q=s.actions)==null?void 0:q.call(s,{props:{onClick:k}}))??F(Ln,{onClick:k},null)]}})])])}),{}}}),rm=Symbol.for("vuetify:v-expansion-panel"),O2=Ge({...Kt(),...k0()},"VExpansionPanelText"),ub=ft()({name:"VExpansionPanelText",props:O2(),setup(e,n){let{slots:r}=n;const s=xn(rm);if(!s)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:c,onAfterLeave:f}=C0(e,s.isSelected);return bt(()=>F(qg,{onAfterLeave:f},{default:()=>{var d;return[Ri(Y("div",{class:vt(["v-expansion-panel-text",e.class]),style:Bt(e.style)},[r.default&&c.value&&Y("div",{class:"v-expansion-panel-text__wrapper"},[(d=r.default)==null?void 0:d.call(r)])]),[[xs,s.isSelected.value]])]}})),{}}}),F2=Ge({color:String,expandIcon:{type:an,default:"$expand"},collapseIcon:{type:an,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Kt(),...Zi()},"VExpansionPanelTitle"),cb=ft()({name:"VExpansionPanelTitle",directives:{vRipple:aa},props:F2(),setup(e,n){let{slots:r}=n;const s=xn(rm);if(!s)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{dimensionStyles:d}=Ki(e),a=te(()=>({collapseIcon:e.collapseIcon,disabled:s.disabled.value,expanded:s.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),b=Me(()=>s.isSelected.value?e.collapseIcon:e.expandIcon);return bt(()=>{var k;return Ri(Y("button",{class:vt(["v-expansion-panel-title",{"v-expansion-panel-title--active":s.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},c.value,e.class]),style:Bt([f.value,d.value,e.style]),type:"button",tabindex:s.disabled.value?-1:void 0,disabled:s.disabled.value,"aria-expanded":s.isSelected.value,onClick:e.readonly?void 0:s.toggle},[Y("span",{class:"v-expansion-panel-title__overlay"},null),(k=r.default)==null?void 0:k.call(r,a.value),!e.hideActions&&F(kn,{defaults:{VIcon:{icon:b.value}}},{default:()=>{var S;return[Y("span",{class:"v-expansion-panel-title__icon"},[((S=r.actions)==null?void 0:S.call(r,a.value))??F(Jn,null,null)])]}})]),[[aa,e.ripple]])}),{}}}),$2=Ge({title:String,text:String,bgColor:String,...nr(),...rc(),..._i(),...wn(),...F2(),...O2()},"VExpansionPanel"),RF=ft()({name:"VExpansionPanel",props:$2(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=ac(e,rm),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.bgColor),{elevationClasses:d}=Tr(e),{roundedClasses:a}=Vi(e),b=Me(()=>(s==null?void 0:s.disabled.value)||e.disabled),k=te(()=>s.group.items.value.reduce((A,P,R)=>(s.group.selected.value.includes(P.id)&&A.push(R),A),[])),S=te(()=>{const A=s.group.items.value.findIndex(P=>P.id===s.id);return!s.isSelected.value&&k.value.some(P=>P-A===1)}),T=te(()=>{const A=s.group.items.value.findIndex(P=>P.id===s.id);return!s.isSelected.value&&k.value.some(P=>P-A===-1)});return ri(rm,s),bt(()=>{const A=!!(r.text||e.text),P=!!(r.title||e.title),R=cb.filterProps(e),B=ub.filterProps(e);return F(e.tag,{class:vt(["v-expansion-panel",{"v-expansion-panel--active":s.isSelected.value,"v-expansion-panel--before-active":S.value,"v-expansion-panel--after-active":T.value,"v-expansion-panel--disabled":b.value},a.value,c.value,e.class]),style:Bt([f.value,e.style])},{default:()=>[Y("div",{class:vt(["v-expansion-panel__shadow",...d.value])},null),F(kn,{defaults:{VExpansionPanelTitle:{...R},VExpansionPanelText:{...B}}},{default:()=>{var L;return[P&&F(cb,{key:"title"},{default:()=>[r.title?r.title():e.title]}),A&&F(ub,{key:"text"},{default:()=>[r.text?r.text():e.text]}),(L=r.default)==null?void 0:L.call(r)]}})]})}),{groupItem:s}}}),LF=["default","accordion","inset","popout"],zF=Ge({flat:Boolean,...ic(),...Io($2(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Hn(),...Kt(),...wn(),variant:{type:String,default:"default",validator:e=>LF.includes(e)}},"VExpansionPanels"),VF=ft()({name:"VExpansionPanels",props:zF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{next:s,prev:c}=Ml(e,rm),{themeClasses:f}=Qn(e),d=Me(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return zi({VExpansionPanel:{bgColor:Me(()=>e.bgColor),collapseIcon:Me(()=>e.collapseIcon),color:Me(()=>e.color),eager:Me(()=>e.eager),elevation:Me(()=>e.elevation),expandIcon:Me(()=>e.expandIcon),focusable:Me(()=>e.focusable),hideActions:Me(()=>e.hideActions),readonly:Me(()=>e.readonly),ripple:Me(()=>e.ripple),rounded:Me(()=>e.rounded),static:Me(()=>e.static)}}),bt(()=>F(e.tag,{class:vt(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},f.value,d.value,e.class]),style:Bt(e.style)},{default:()=>{var a;return[(a=r.default)==null?void 0:a.call(r,{prev:c,next:s})]}})),{next:s,prev:c}}}),BF=Ge({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...di(Zg({active:!0}),["location"]),...Qu(),...Eo(),...ws({transition:"fab-transition"})},"VFab"),OF=ft()({name:"VFab",props:BF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),c=Rt(56),f=Xe(),{resizeRef:d}=vs(T=>{T.length&&(c.value=T[0].target.clientHeight)}),a=Me(()=>e.app||e.absolute),b=te(()=>{var T;return a.value?((T=e.location)==null?void 0:T.split(" ").shift())??"bottom":!1}),k=te(()=>{var T;return a.value?((T=e.location)==null?void 0:T.split(" ")[1])??"end":!1});ra(()=>e.app,()=>{const T=ec({id:e.name,order:te(()=>parseInt(e.order,10)),position:b,layoutSize:te(()=>e.layout?c.value+24:0),elementSize:te(()=>c.value+24),active:te(()=>e.app&&s.value),absolute:Me(()=>e.absolute)});Li(()=>{f.value=T.layoutItemStyles.value})});const S=Xe();return bt(()=>{const T=Ln.filterProps(e);return Y("div",{ref:S,class:vt(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${b.value}`]:a.value,[`v-fab--${k.value}`]:a.value},e.class]),style:Bt([e.app?{...f.value}:{height:e.absolute?"100%":"inherit"},e.style])},[Y("div",{class:"v-fab__container"},[F(ia,{appear:e.appear,transition:e.transition},{default:()=>[Ri(F(Ln,ut({ref:d},T,{active:void 0,location:void 0}),r),[[xs,e.active]])]})])])}),{}}});function FF(){function e(r){var c,f;return[...((c=r.dataTransfer)==null?void 0:c.items)??[]].filter(d=>d.kind==="file").map(d=>d.webkitGetAsEntry()).filter(Boolean).length>0||[...((f=r.dataTransfer)==null?void 0:f.files)??[]].length>0}async function n(r){var f,d;const s=[],c=[...((f=r.dataTransfer)==null?void 0:f.items)??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean);if(c.length)for(const a of c){const b=await j2(a,N2(".",a));s.push(...b.map(k=>k.file))}else s.push(...((d=r.dataTransfer)==null?void 0:d.files)??[]);return s}return{handleDrop:n,hasFilesOrFolders:e}}function j2(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((r,s)=>{e.isFile?e.file(f=>r([{file:f,path:n}]),s):e.isDirectory&&e.createReader().readEntries(async f=>{const d=[];for(const a of f)d.push(...await j2(a,N2(n,a)));r(d)})})}function N2(e,n){return n.isDirectory?`${e}/${n.name}`:e}const $F=Ge({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Do({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Di(e).every(n=>n!=null&&typeof n=="object")},...Sm({clearable:!0})},"VFileInput"),jF=ft()({name:"VFileInput",inheritAttrs:!1,props:$F(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{t:f}=vi(),d=nn(e,"modelValue",e.modelValue,De=>Di(De),De=>!e.multiple&&Array.isArray(De)?De[0]:De),{isFocused:a,focus:b,blur:k}=Mo(e),S=te(()=>typeof e.showSize!="boolean"?e.showSize:void 0),T=te(()=>(d.value??[]).reduce((De,Fe)=>{let{size:Ze=0}=Fe;return De+Ze},0)),A=te(()=>D1(T.value,S.value)),P=te(()=>(d.value??[]).map(De=>{const{name:Fe="",size:Ze=0}=De;return e.showSize?`${Fe} (${D1(Ze,S.value)})`:Fe})),R=te(()=>{var Fe;const De=((Fe=d.value)==null?void 0:Fe.length)??0;return e.showSize?f(e.counterSizeString,De,A.value):f(e.counterString,De)}),B=Xe(),L=Xe(),$=Xe(),j=Me(()=>a.value||e.active),q=te(()=>["plain","underlined"].includes(e.variant)),H=Rt(!1),{handleDrop:ee,hasFilesOrFolders:Q}=FF();function oe(){var De;$.value!==document.activeElement&&((De=$.value)==null||De.focus()),a.value||b()}function le(De){var Fe;(Fe=$.value)==null||Fe.click()}function ce(De){s("mousedown:control",De)}function he(De){var Fe;(Fe=$.value)==null||Fe.click(),s("click:control",De)}function ve(De){De.stopPropagation(),oe(),zn(()=>{d.value=[],$g(e["onClick:clear"],De)})}function ie(De){De.preventDefault(),De.stopImmediatePropagation(),H.value=!0}function be(De){De.preventDefault(),H.value=!1}async function Be(De){if(De.preventDefault(),De.stopImmediatePropagation(),H.value=!1,!$.value||!Q(De))return;const Fe=new DataTransfer;for(const Ze of await ee(De))Fe.items.add(Ze);$.value.files=Fe.files,$.value.dispatchEvent(new Event("change",{bubbles:!0}))}return Ot(d,De=>{(!Array.isArray(De)||!De.length)&&$.value&&($.value.value="")}),bt(()=>{const De=!!(c.counter||e.counter),Fe=!!(De||c.details),[Ze,mt]=Al(r),{modelValue:pt,...Ve}=Wr.filterProps(e),Se=Pl.filterProps(e);return F(Wr,ut({ref:B,modelValue:e.multiple?d.value:d.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":H.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":q.value},e.class],style:e.style,"onClick:prepend":le},Ze,Ve,{centerAffix:!q.value,focused:a.value}),{...c,default:Ee=>{let{id:tt,isDisabled:Nt,isDirty:kt,isReadonly:wt,isValid:Le}=Ee;return F(Pl,ut({ref:L,"prepend-icon":e.prependIcon,onMousedown:ce,onClick:he,"onClick:clear":ve,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Se,{id:tt.value,active:j.value||kt.value,dirty:kt.value||e.dirty,disabled:Nt.value,focused:a.value,error:Le.value===!1,onDragover:ie,onDrop:Be}),{...c,default:_t=>{var Ct;let{props:{class:ot,...Je}}=_t;return Y(Ht,null,[Y("input",ut({ref:$,type:"file",readonly:wt.value,disabled:Nt.value,multiple:e.multiple,name:e.name,onClick:ae=>{ae.stopPropagation(),wt.value&&ae.preventDefault(),oe()},onChange:ae=>{if(!ae.target)return;const de=ae.target;d.value=[...de.files??[]]},onDragleave:be,onFocus:oe,onBlur:k},Je,mt),null),Y("div",{class:vt(ot)},[!!((Ct=d.value)!=null&&Ct.length)&&!e.hideInput&&(c.selection?c.selection({fileNames:P.value,totalBytes:T.value,totalBytesReadable:A.value}):e.chips?P.value.map(ae=>F(Xd,{key:ae,size:"small",text:ae},null)):P.value.join(", "))])])}})},details:Fe?Ee=>{var tt,Nt;return Y(Ht,null,[(tt=c.details)==null?void 0:tt.call(c,Ee),De&&Y(Ht,null,[Y("span",null,null),F(Yg,{active:!!((Nt=d.value)!=null&&Nt.length),value:R.value,disabled:e.disabled},c.counter)])])}:void 0})}),Pr({},B,L,$)}}),NF=Ge({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ya(),...Kt(),...nr(),...Qu(),..._i(),...wn({tag:"footer"}),...Hn()},"VFooter"),UF=ft()({name:"VFooter",props:NF(),setup(e,n){let{slots:r}=n;const s=Xe(),{themeClasses:c}=Qn(e),{backgroundColorClasses:f,backgroundColorStyles:d}=ti(()=>e.color),{borderClasses:a}=Pa(e),{elevationClasses:b}=Tr(e),{roundedClasses:k}=Vi(e),S=Rt(32),{resizeRef:T}=vs(P=>{P.length&&(S.value=P[0].target.clientHeight)}),A=te(()=>e.height==="auto"?S.value:parseInt(e.height,10));return ra(()=>e.app,()=>{const P=ec({id:e.name,order:te(()=>parseInt(e.order,10)),position:Me(()=>"bottom"),layoutSize:A,elementSize:te(()=>e.height==="auto"?void 0:A.value),active:Me(()=>e.app),absolute:Me(()=>e.absolute)});Li(()=>{s.value=P.layoutItemStyles.value})}),bt(()=>F(e.tag,{ref:T,class:vt(["v-footer",c.value,f.value,a.value,b.value,k.value,e.class]),style:Bt([d.value,e.app?s.value:{height:qt(e.height)},e.style])},r)),{}}}),GF=Ge({...Kt(),...nV()},"VForm"),qF=ft()({name:"VForm",props:GF(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=iV(e),f=Xe();function d(b){b.preventDefault(),c.reset()}function a(b){const k=b,S=c.validate();k.then=S.then.bind(S),k.catch=S.catch.bind(S),k.finally=S.finally.bind(S),s("submit",k),k.defaultPrevented||S.then(T=>{var P;let{valid:A}=T;A&&((P=f.value)==null||P.submit())}),k.preventDefault()}return bt(()=>{var b;return Y("form",{ref:f,class:vt(["v-form",e.class]),style:Bt(e.style),novalidate:!0,onReset:d,onSubmit:a},[(b=r.default)==null?void 0:b.call(r,c)])}),Pr(c,f)}}),HF=Ge({disabled:Boolean,modelValue:{type:Boolean,default:null},...w0()},"VHover"),WF=ft()({name:"VHover",props:HF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),{runOpenDelay:c,runCloseDelay:f}=S0(e,d=>!e.disabled&&(s.value=d));return()=>{var d;return(d=r.default)==null?void 0:d.call(r,{isHovering:s.value,props:{onMouseenter:c,onMouseleave:f}})}}}),ZF=Ge({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Zi(),...wn()},"VInfiniteScroll"),xS=ja({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,n)=>!0},setup(e,n){let{emit:r}=n;const{intersectionRef:s,isIntersecting:c}=pm();return Ot(c,async f=>{r("intersect",e.side,f)}),bt(()=>Y("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:s},[Ft("")])),{}}}),KF=ft()({name:"VInfiniteScroll",props:ZF(),emits:{load:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=Xe(),f=Rt("ok"),d=Rt("ok"),a=te(()=>qt(e.margin)),b=Rt(!1);function k(Q){if(!c.value)return;const oe=e.direction==="vertical"?"scrollTop":"scrollLeft";c.value[oe]=Q}function S(){if(!c.value)return 0;const Q=e.direction==="vertical"?"scrollTop":"scrollLeft";return c.value[Q]}function T(){if(!c.value)return 0;const Q=e.direction==="vertical"?"scrollHeight":"scrollWidth";return c.value[Q]}function A(){if(!c.value)return 0;const Q=e.direction==="vertical"?"clientHeight":"clientWidth";return c.value[Q]}gi(()=>{c.value&&(e.side==="start"?k(T()):e.side==="both"&&k(T()/2-A()/2))});function P(Q,oe){Q==="start"?f.value=oe:Q==="end"?d.value=oe:Q==="both"&&(f.value=oe,d.value=oe)}function R(Q){return Q==="start"?f.value:d.value}let B=0;function L(Q,oe){b.value=oe,b.value&&$(Q)}function $(Q){if(e.mode!=="manual"&&!b.value)return;const oe=R(Q);if(!c.value||["empty","loading"].includes(oe))return;B=T(),P(Q,"loading");function le(ce){P(Q,ce),zn(()=>{ce==="empty"||ce==="error"||(ce==="ok"&&Q==="start"&&k(T()-B+S()),e.mode!=="manual"&&zn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{$(Q)})})})}))})}s("load",{side:Q,done:le})}const{t:j}=vi();function q(Q,oe){var he,ve,ie,be,Be;if(e.side!==Q&&e.side!=="both")return;const le=()=>$(Q),ce={side:Q,props:{onClick:le,color:e.color}};return oe==="error"?(he=r.error)==null?void 0:he.call(r,ce):oe==="empty"?((ve=r.empty)==null?void 0:ve.call(r,ce))??Y("div",null,[j(e.emptyText)]):e.mode==="manual"?oe==="loading"?((ie=r.loading)==null?void 0:ie.call(r,ce))??F(Gu,{indeterminate:!0,color:e.color},null):((be=r["load-more"])==null?void 0:be.call(r,ce))??F(Ln,{variant:"outlined",color:e.color,onClick:le},{default:()=>[j(e.loadMoreText)]}):((Be=r.loading)==null?void 0:Be.call(r,ce))??F(Gu,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:H}=Ki(e);bt(()=>{const Q=e.tag,oe=e.side==="start"||e.side==="both",le=e.side==="end"||e.side==="both",ce=e.mode==="intersect";return F(Q,{ref:c,class:vt(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":oe,"v-infinite-scroll--end":le}]),style:Bt(H.value)},{default:()=>{var he;return[Y("div",{class:"v-infinite-scroll__side"},[q("start",f.value)]),oe&&ce&&F(xS,{key:"start",side:"start",onIntersect:L,rootMargin:a.value},null),(he=r.default)==null?void 0:he.call(r),le&&ce&&F(xS,{key:"end",side:"end",onIntersect:L,rootMargin:a.value},null),Y("div",{class:"v-infinite-scroll__side"},[q("end",d.value)])]}})});function ee(Q){const oe=Q??e.side;P(oe,"ok"),zn(()=>{k(T()-B+S()),e.mode!=="manual"&&zn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{oe==="both"?($("start"),$("end")):$(oe)})})})})})}return{reset:ee}}}),U2=Symbol.for("vuetify:v-item-group"),YF=Ge({...Kt(),...ic({selectedClass:"v-item--selected"}),...wn(),...Hn()},"VItemGroup"),XF=ft()({name:"VItemGroup",props:YF(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{isSelected:c,select:f,next:d,prev:a,selected:b}=Ml(e,U2);return()=>F(e.tag,{class:vt(["v-item-group",s.value,e.class]),style:Bt(e.style)},{default:()=>{var k;return[(k=r.default)==null?void 0:k.call(r,{isSelected:c,select:f,next:d,prev:a,selected:b.value})]}})}}),JF=ft()({name:"VItem",props:rc(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const{isSelected:s,select:c,toggle:f,selectedClass:d,value:a,disabled:b}=ac(e,U2);return()=>{var k;return(k=r.default)==null?void 0:k.call(r,{isSelected:s.value,selectedClass:d.value,select:c,toggle:f,value:a.value,disabled:b.value})}}}),QF=Ge({color:String,...ya(),...Kt(),..._i(),...wn({tag:"kbd"}),...Hn(),...nr()},"VKbd"),e3=ft()({name:"VKbd",props:QF(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{borderClasses:c}=Pa(e),{roundedClasses:f}=Vi(e),{backgroundColorClasses:d,backgroundColorStyles:a}=ti(()=>e.color),{elevationClasses:b}=Tr(e);return bt(()=>F(e.tag,{class:vt(["v-kbd",s.value,d.value,c.value,b.value,f.value,e.class]),style:Bt([a.value,e.style])},r)),{}}}),t3=Ge({...Kt(),...Zi(),...TT()},"VLayout"),n3=ft()({name:"VLayout",props:t3(),setup(e,n){let{slots:r}=n;const{layoutClasses:s,layoutStyles:c,getLayoutItem:f,items:d,layoutRef:a}=IT(e),{dimensionStyles:b}=Ki(e);return bt(()=>{var k;return Y("div",{ref:a,class:vt([s.value,e.class]),style:Bt([b.value,c.value,e.style])},[(k=r.default)==null?void 0:k.call(r)])}),{getLayoutItem:f,items:d}}}),i3=Ge({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Kt(),...Qu()},"VLayoutItem"),r3=ft()({name:"VLayoutItem",props:i3(),setup(e,n){let{slots:r}=n;const{layoutItemStyles:s}=ec({id:e.name,order:te(()=>parseInt(e.order,10)),position:Me(()=>e.position),elementSize:Me(()=>e.size),layoutSize:Me(()=>e.size),active:Me(()=>e.modelValue),absolute:Me(()=>e.absolute)});return()=>{var c;return Y("div",{class:vt(["v-layout-item",e.class]),style:Bt([s.value,e.style])},[(c=r.default)==null?void 0:c.call(r)])}}}),a3=Ge({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Kt(),...Zi(),...wn(),...ws({transition:"fade-transition"})},"VLazy"),s3=ft()({name:"VLazy",directives:{vIntersect:ko},props:a3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),c=nn(e,"modelValue");function f(d){c.value||(c.value=d)}return bt(()=>Ri(F(e.tag,{class:vt(["v-lazy",e.class]),style:Bt([s.value,e.style])},{default:()=>[c.value&&F(ia,{transition:e.transition,appear:!0},{default:()=>{var d;return[(d=r.default)==null?void 0:d.call(r)]}})]}),[[ko,{handler:f,options:e.options},null]])),{}}}),o3=Ge({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Kt()},"VLocaleProvider"),l3=ft()({name:"VLocaleProvider",props:o3(),setup(e,n){let{slots:r}=n;const{rtlClasses:s}=ZR(e);return bt(()=>{var c;return Y("div",{class:vt(["v-locale-provider",s.value,e.class]),style:Bt(e.style)},[(c=r.default)==null?void 0:c.call(r)])}),{}}}),u3=Ge({scrollable:Boolean,...Kt(),...Zi(),...wn({tag:"main"})},"VMain"),c3=ft()({name:"VMain",props:u3(),setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),{mainStyles:c}=PT(),{ssrBootStyles:f}=tc();return bt(()=>F(e.tag,{class:vt(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Bt([c.value,f.value,s.value,e.style])},{default:()=>{var d,a;return[e.scrollable?Y("div",{class:"v-main__scroller"},[(d=r.default)==null?void 0:d.call(r)]):(a=r.default)==null?void 0:a.call(r)]}})),{}}});function d3(e){let{rootEl:n,isSticky:r,layoutItemStyles:s}=e;const c=Rt(!1),f=Rt(0),d=te(()=>{const k=typeof c.value=="boolean"?"top":c.value;return[r.value?{top:"auto",bottom:"auto",height:void 0}:void 0,c.value?{[k]:qt(f.value)}:{top:s.value.top}]});gi(()=>{Ot(r,k=>{k?window.addEventListener("scroll",b,{passive:!0}):window.removeEventListener("scroll",b)},{immediate:!0})}),Or(()=>{window.removeEventListener("scroll",b)});let a=0;function b(){const k=a>window.scrollY?"up":"down",S=n.value.getBoundingClientRect(),T=parseFloat(s.value.top??0),A=window.scrollY-Math.max(0,f.value-T),P=S.height+Math.max(f.value,T)-window.scrollY-window.innerHeight,R=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;S.height<window.innerHeight-T?(c.value="top",f.value=T):k==="up"&&c.value==="bottom"||k==="down"&&c.value==="top"?(f.value=window.scrollY+S.top-R,c.value=!0):k==="down"&&P<=0?(f.value=0,c.value="bottom"):k==="up"&&A<=0&&(R?c.value!=="top"&&(f.value=-A+R+T,c.value="top"):(f.value=S.top+A,c.value="top")),a=window.scrollY}return{isStuck:c,stickyStyles:d}}const h3=100,f3=20;function wS(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function SS(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let n=0;for(let r=e.length-1;r>0;r--){if(e[r].t===e[r-1].t)continue;const s=wS(n),c=(e[r].d-e[r-1].d)/(e[r].t-e[r-1].t);n+=(c-s)*Math.abs(c),r===e.length-1&&(n*=.5)}return wS(n)*1e3}function m3(){const e={};function n(c){Array.from(c.changedTouches).forEach(f=>{(e[f.identifier]??(e[f.identifier]=new XC(f3))).push([c.timeStamp,f])})}function r(c){Array.from(c.changedTouches).forEach(f=>{delete e[f.identifier]})}function s(c){var k;const f=(k=e[c])==null?void 0:k.values().reverse();if(!f)throw new Error(`No samples for touch id ${c}`);const d=f[0],a=[],b=[];for(const S of f){if(d[0]-S[0]>h3)break;a.push({t:S[0],d:S[1].clientX}),b.push({t:S[0],d:S[1].clientY})}return{x:SS(a),y:SS(b),get direction(){const{x:S,y:T}=this,[A,P]=[Math.abs(S),Math.abs(T)];return A>P&&S>=0?"right":A>P&&S<=0?"left":P>A&&T>=0?"down":P>A&&T<=0?"up":p3()}}}return{addMovement:n,endTouch:r,getVelocity:s}}function p3(){throw new Error}function g3(e){let{el:n,isActive:r,isTemporary:s,width:c,touchless:f,position:d}=e;gi(()=>{window.addEventListener("touchstart",j,{passive:!0}),window.addEventListener("touchmove",q,{passive:!1}),window.addEventListener("touchend",H,{passive:!0})}),Or(()=>{window.removeEventListener("touchstart",j),window.removeEventListener("touchmove",q),window.removeEventListener("touchend",H)});const a=te(()=>["left","right"].includes(d.value)),{addMovement:b,endTouch:k,getVelocity:S}=m3();let T=!1;const A=Rt(!1),P=Rt(0),R=Rt(0);let B;function L(Q,oe){return(d.value==="left"?Q:d.value==="right"?document.documentElement.clientWidth-Q:d.value==="top"?Q:d.value==="bottom"?document.documentElement.clientHeight-Q:ud())-(oe?c.value:0)}function $(Q){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const le=d.value==="left"?(Q-R.value)/c.value:d.value==="right"?(document.documentElement.clientWidth-Q-R.value)/c.value:d.value==="top"?(Q-R.value)/c.value:d.value==="bottom"?(document.documentElement.clientHeight-Q-R.value)/c.value:ud();return oe?ci(le):le}function j(Q){if(f.value)return;const oe=Q.changedTouches[0].clientX,le=Q.changedTouches[0].clientY,ce=25,he=d.value==="left"?oe<ce:d.value==="right"?oe>document.documentElement.clientWidth-ce:d.value==="top"?le<ce:d.value==="bottom"?le>document.documentElement.clientHeight-ce:ud(),ve=r.value&&(d.value==="left"?oe<c.value:d.value==="right"?oe>document.documentElement.clientWidth-c.value:d.value==="top"?le<c.value:d.value==="bottom"?le>document.documentElement.clientHeight-c.value:ud());(he||ve||r.value&&s.value)&&(B=[oe,le],R.value=L(a.value?oe:le,r.value),P.value=$(a.value?oe:le),T=R.value>-20&&R.value<80,k(Q),b(Q))}function q(Q){const oe=Q.changedTouches[0].clientX,le=Q.changedTouches[0].clientY;if(T){if(!Q.cancelable){T=!1;return}const he=Math.abs(oe-B[0]),ve=Math.abs(le-B[1]);(a.value?he>ve&&he>3:ve>he&&ve>3)?(A.value=!0,T=!1):(a.value?ve:he)>3&&(T=!1)}if(!A.value)return;Q.preventDefault(),b(Q);const ce=$(a.value?oe:le,!1);P.value=Math.max(0,Math.min(1,ce)),ce>1?R.value=L(a.value?oe:le,!0):ce<0&&(R.value=L(a.value?oe:le,!1))}function H(Q){if(T=!1,!A.value)return;b(Q),A.value=!1;const oe=S(Q.changedTouches[0].identifier),le=Math.abs(oe.x),ce=Math.abs(oe.y);(a.value?le>ce&&le>400:ce>le&&ce>3)?r.value=oe.direction===({left:"right",right:"left",top:"down",bottom:"up"}[d.value]||ud()):r.value=P.value>.5}const ee=te(()=>A.value?{transform:d.value==="left"?`translateX(calc(-100% + ${P.value*c.value}px))`:d.value==="right"?`translateX(calc(100% - ${P.value*c.value}px))`:d.value==="top"?`translateY(calc(-100% + ${P.value*c.value}px))`:d.value==="bottom"?`translateY(calc(100% - ${P.value*c.value}px))`:ud(),transition:"none"}:void 0);return ra(A,()=>{var le,ce;const Q=((le=n.value)==null?void 0:le.style.transform)??null,oe=((ce=n.value)==null?void 0:ce.style.transition)??null;Li(()=>{var he,ve,ie,be;(ve=n.value)==null||ve.style.setProperty("transform",((he=ee.value)==null?void 0:he.transform)||"none"),(be=n.value)==null||be.style.setProperty("transition",((ie=ee.value)==null?void 0:ie.transition)||null)}),fr(()=>{var he,ve;(he=n.value)==null||he.style.setProperty("transform",Q),(ve=n.value)==null||ve.style.setProperty("transition",oe)})}),{isDragging:A,dragProgress:P,dragStyles:ee}}function ud(){throw new Error}const v3=["start","end","left","right","top","bottom"],_3=Ge({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>v3.includes(e)},sticky:Boolean,...ya(),...Kt(),...w0(),...Ju({mobile:null}),...nr(),...Qu(),..._i(),...wn({tag:"nav"}),...Hn()},"VNavigationDrawer"),y3=ft()({name:"VNavigationDrawer",props:_3(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{isRtl:f}=tr(),{themeClasses:d}=Qn(e),{borderClasses:a}=Pa(e),{backgroundColorClasses:b,backgroundColorStyles:k}=ti(()=>e.color),{elevationClasses:S}=Tr(e),{displayClasses:T,mobile:A}=Qa(e),{roundedClasses:P}=Vi(e),R=FT(),B=nn(e,"modelValue",null,Ve=>!!Ve),{ssrBootStyles:L}=tc(),{scopeId:$}=oc(),j=Xe(),q=Rt(!1),{runOpenDelay:H,runCloseDelay:ee}=S0(e,Ve=>{q.value=Ve}),Q=te(()=>e.rail&&e.expandOnHover&&q.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),oe=te(()=>Ey(e.location,f.value)),le=Me(()=>e.persistent),ce=te(()=>!e.permanent&&(A.value||e.temporary)),he=te(()=>e.sticky&&!ce.value&&oe.value!=="bottom");ra(()=>e.expandOnHover&&e.rail!=null,()=>{Ot(q,Ve=>s("update:rail",!Ve))}),ra(()=>!e.disableResizeWatcher,()=>{Ot(ce,Ve=>!e.permanent&&zn(()=>B.value=!Ve))}),ra(()=>!e.disableRouteWatcher&&!!R,()=>{Ot(R.currentRoute,()=>ce.value&&(B.value=!1))}),Ot(()=>e.permanent,Ve=>{Ve&&(B.value=!0)}),e.modelValue==null&&!ce.value&&(B.value=e.permanent||!A.value);const{isDragging:ve,dragProgress:ie}=g3({el:j,isActive:B,isTemporary:ce,width:Q,touchless:Me(()=>e.touchless),position:oe}),be=te(()=>{const Ve=ce.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):Q.value;return ve.value?Ve*ie.value:Ve}),{layoutItemStyles:Be,layoutItemScrimStyles:De}=ec({id:e.name,order:te(()=>parseInt(e.order,10)),position:oe,layoutSize:be,elementSize:Q,active:Gd(B),disableTransitions:Me(()=>ve.value),absolute:te(()=>e.absolute||he.value&&typeof Fe.value!="string")}),{isStuck:Fe,stickyStyles:Ze}=d3({rootEl:j,isSticky:he,layoutItemStyles:Be}),mt=ti(()=>typeof e.scrim=="string"?e.scrim:null),pt=te(()=>({...ve.value?{opacity:ie.value*.2,transition:"none"}:void 0,...De.value}));return zi({VList:{bgColor:"transparent"}}),bt(()=>{const Ve=c.image||e.image;return Y(Ht,null,[F(e.tag,ut({ref:j,onMouseenter:H,onMouseleave:ee,class:["v-navigation-drawer",`v-navigation-drawer--${oe.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":q.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":ce.value,"v-navigation-drawer--persistent":le.value,"v-navigation-drawer--active":B.value,"v-navigation-drawer--sticky":he.value},d.value,b.value,a.value,T.value,S.value,P.value,e.class],style:[k.value,Be.value,L.value,Ze.value,e.style]},$,r),{default:()=>{var Se,Ee,tt;return[Ve&&Y("div",{key:"image",class:"v-navigation-drawer__img"},[c.image?F(kn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},c.image):F(Co,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),c.prepend&&Y("div",{class:"v-navigation-drawer__prepend"},[(Se=c.prepend)==null?void 0:Se.call(c)]),Y("div",{class:"v-navigation-drawer__content"},[(Ee=c.default)==null?void 0:Ee.call(c)]),c.append&&Y("div",{class:"v-navigation-drawer__append"},[(tt=c.append)==null?void 0:tt.call(c)])]}}),F(Cl,{name:"fade-transition"},{default:()=>[ce.value&&(ve.value||B.value)&&!!e.scrim&&Y("div",ut({class:["v-navigation-drawer__scrim",mt.backgroundColorClasses.value],style:[pt.value,mt.backgroundColorStyles.value],onClick:()=>{le.value||(B.value=!1)}},$),null)]})])}),{isStuck:Fe}}}),b3=ja({name:"VNoSsr",setup(e,n){let{slots:r}=n;const s=IP();return()=>{var c;return s.value&&((c=r.default)==null?void 0:c.call(r))}}}),x3=50,w3=500;function S3(e){let{toggleUpDown:n}=e,r=-1,s=-1;fr(f);function c(a){f(),d(a),window.addEventListener("pointerup",f),document.addEventListener("blur",f),r=window.setTimeout(()=>{s=window.setInterval(()=>d(a),x3)},w3)}function f(){window.clearTimeout(r),window.clearInterval(s),window.removeEventListener("pointerup",f),document.removeEventListener("blur",f)}function d(a){n(a==="up")}return{holdStart:c,holdStop:f}}const k3=Ge({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...di(km(),["modelValue","validationValue"])},"VNumberInput"),C3=ft()({name:"VNumberInput",props:{...k3()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=Xe(),{holdStart:c,holdStop:f}=S3({toggleUpDown:ce}),d=xm(e),a=te(()=>d.isDisabled.value||d.isReadonly.value),b=Rt(e.focused),{decimalSeparator:k}=vi(),S=te(()=>{var Se;return((Se=e.decimalSeparator)==null?void 0:Se[0])||k.value});function T(Se){let Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const Nt=Ee==null?String(Se):Se.toFixed(Ee);if(b.value&&tt)return Number(Nt).toString().replace(".",S.value);if(e.minFractionDigits===null||Ee!==null&&Ee<e.minFractionDigits)return Nt.replace(".",S.value);let[kt,wt]=Nt.split(".");return wt=(wt??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0`,"g"),""),[kt,wt].filter(Boolean).join(S.value)}const A=nn(e,"modelValue",null,Se=>Se??null,Se=>Se==null?Se??null:ci(Number(Se),e.min,e.max)),P=Rt(null);Li(()=>{b.value&&!a.value||(A.value==null?P.value=null:isNaN(A.value)||(P.value=T(A.value)))});const R=te({get:()=>P.value,set(Se){if(Se===null||Se===""){A.value=null,P.value=null;return}const Ee=Number(Se.replace(S.value,"."));!isNaN(Ee)&&Ee<=e.max&&Ee>=e.min&&(A.value=Ee,P.value=Se)}}),B=te(()=>a.value?!1:(A.value??0)+e.step<=e.max),L=te(()=>a.value?!1:(A.value??0)-e.step>=e.min),$=te(()=>e.hideInput?"stacked":e.controlVariant),j=Me(()=>$.value==="split"?"$plus":"$collapse"),q=Me(()=>$.value==="split"?"$minus":"$expand"),H=Me(()=>$.value==="split"?"default":"small"),ee=Me(()=>$.value==="stacked"?"auto":"100%"),Q={props:{onClick:ie,onPointerup:be,onPointerdown:Be,onPointercancel:be}},oe={props:{onClick:ie,onPointerup:be,onPointerdown:De,onPointercancel:be}};Ot(()=>e.precision,()=>Ze()),Ot(()=>e.minFractionDigits,()=>Ze()),gi(()=>{Fe()});function le(Se){if(Se==null)return 0;const Ee=Se.toString(),tt=Ee.indexOf(".");return~tt?Ee.length-tt:0}function ce(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(a.value)return;if(A.value==null){R.value=T(ci(0,e.min,e.max));return}let Ee=Math.max(le(A.value),le(e.step));e.precision!=null&&(Ee=Math.max(Ee,e.precision)),Se?B.value&&(R.value=T(A.value+e.step,Ee)):L.value&&(R.value=T(A.value-e.step,Ee))}function he(Se){var _t;if(!Se.data)return;const Ee=Se.target,{value:tt,selectionStart:Nt,selectionEnd:kt}=Ee??{},wt=tt?tt.slice(0,Nt)+Se.data+tt.slice(kt):Se.data,Le=oR(wt,e.precision,S.value);new RegExp(`^-?\\d*${Iy(S.value)}?\\d*$`).test(wt)||(Se.preventDefault(),Ee.value=Le),e.precision!=null&&(((_t=wt.split(S.value)[1])==null?void 0:_t.length)>e.precision&&(Se.preventDefault(),Ee.value=Le),e.precision===0&&wt.includes(S.value)&&(Se.preventDefault(),Ee.value=Le))}async function ve(Se){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(Se.key)||Se.ctrlKey||["ArrowDown","ArrowUp"].includes(Se.key)&&(Se.preventDefault(),Fe(),await zn(),Se.key==="ArrowDown"?ce(!1):ce())}function ie(Se){Se.stopPropagation()}function be(Se){const Ee=Se.currentTarget;Ee==null||Ee.releasePointerCapture(Se.pointerId),Se.preventDefault(),f()}function Be(Se){const Ee=Se.currentTarget;Ee==null||Ee.setPointerCapture(Se.pointerId),Se.preventDefault(),Se.stopPropagation(),c("up")}function De(Se){const Ee=Se.currentTarget;Ee==null||Ee.setPointerCapture(Se.pointerId),Se.preventDefault(),Se.stopPropagation(),c("down")}function Fe(){if(a.value||!s.value)return;const Se=s.value.value,Ee=Number(Se.replace(S.value,"."));Se&&!isNaN(Ee)?R.value=T(ci(Ee,e.min,e.max)):R.value=null}function Ze(){a.value||(R.value=A.value!==null&&!isNaN(A.value)?T(A.value,e.precision,!1):null)}function mt(){if(!a.value){if(A.value===null||isNaN(A.value)){R.value=null;return}R.value=A.value.toString().replace(".",S.value)}}function pt(){mt()}function Ve(){Fe()}return bt(()=>{const{modelValue:Se,...Ee}=To.filterProps(e);function tt(){return r.increment?F(kn,{key:"increment-defaults",defaults:{VBtn:{disabled:!B.value,flat:!0,height:ee.value,size:H.value,icon:j.value}}},{default:()=>[r.increment(Q)]}):F(Ln,{"aria-hidden":"true","data-testid":"increment",disabled:!B.value,flat:!0,height:ee.value,icon:j.value,key:"increment-btn",onClick:ie,onPointerdown:Be,onPointerup:be,onPointercancel:be,size:H.value,tabindex:"-1"},null)}function Nt(){return r.decrement?F(kn,{key:"decrement-defaults",defaults:{VBtn:{disabled:!L.value,flat:!0,height:ee.value,size:H.value,icon:q.value}}},{default:()=>[r.decrement(oe)]}):F(Ln,{"aria-hidden":"true","data-testid":"decrement",disabled:!L.value,flat:!0,height:ee.value,icon:q.value,key:"decrement-btn",onClick:ie,onPointerdown:De,onPointerup:be,onPointercancel:be,size:H.value,tabindex:"-1"},null)}function kt(){return Y("div",{class:"v-number-input__control"},[Nt(),F($a,{vertical:$.value!=="stacked"},null),tt()])}function wt(){return!e.hideInput&&!e.inset?F($a,{vertical:!0},null):void 0}const Le=$.value==="split"?Y("div",{class:"v-number-input__control"},[F($a,{vertical:!0},null),tt()]):e.reverse||$.value==="hidden"?void 0:Y(Ht,null,[wt(),kt()]),_t=r["append-inner"]||Le,ot=$.value==="split"?Y("div",{class:"v-number-input__control"},[Nt(),F($a,{vertical:!0},null)]):e.reverse&&$.value!=="hidden"?Y(Ht,null,[kt(),wt()]):void 0,Je=r["prepend-inner"]||ot;return F(To,ut({ref:s},Ee,{modelValue:R.value,"onUpdate:modelValue":Ct=>R.value=Ct,focused:b.value,"onUpdate:focused":Ct=>b.value=Ct,validationValue:A.value,onBeforeinput:he,onFocus:pt,onBlur:Ve,onKeydown:ve,class:["v-number-input",{"v-number-input--default":$.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":$.value==="split","v-number-input--stacked":$.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...r,"append-inner":_t?function(){var ze;for(var Ct=arguments.length,ae=new Array(Ct),de=0;de<Ct;de++)ae[de]=arguments[de];return Y(Ht,null,[(ze=r["append-inner"])==null?void 0:ze.call(r,...ae),Le])}:void 0,"prepend-inner":Je?function(){var ze;for(var Ct=arguments.length,ae=new Array(Ct),de=0;de<Ct;de++)ae[de]=arguments[de];return Y(Ht,null,[ot,(ze=r["prepend-inner"])==null?void 0:ze.call(r,...ae)])}:void 0})}),Pr({},s)}}),T3=Ge({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Zi(),...bm(),...Io(Sm({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),P3=ft()({name:"VOtpInput",props:T3(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const{dimensionStyles:f}=Ki(e),{isFocused:d,focus:a,blur:b}=Mo(e),k=nn(e,"modelValue","",le=>le==null?[]:String(le).split(""),le=>le.join("")),{t:S}=vi(),T=te(()=>Number(e.length)),A=te(()=>Array(T.value).fill(0)),P=Xe(-1),R=Xe(),B=Xe([]),L=te(()=>B.value[P.value]);ra(()=>e.autofocus,()=>{const le=Md();le.run(()=>{const{intersectionRef:ce,isIntersecting:he}=pm();Li(()=>{ce.value=B.value[0]}),Ot(he,ve=>{var ie;ve&&((ie=ce.value)==null||ie.focus(),le.stop())})})});function $(){if(oe(L.value.value)){L.value.value="";return}const le=k.value.slice(),ce=L.value.value;le[P.value]=ce;let he=null;P.value>k.value.length?he=k.value.length+1:P.value+1!==T.value&&(he="next"),k.value=le,he&&$u(R.value,he)}function j(le){const ce=k.value.slice(),he=P.value;let ve=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(le.key)&&(le.preventDefault(),le.key==="ArrowLeft"?ve="prev":le.key==="ArrowRight"?ve="next":["Backspace","Delete"].includes(le.key)&&(ce[P.value]="",k.value=ce,P.value>0&&le.key==="Backspace"?ve="prev":requestAnimationFrame(()=>{var ie;(ie=B.value[he])==null||ie.select()})),requestAnimationFrame(()=>{ve!=null&&$u(R.value,ve)}))}function q(le,ce){var ie,be;ce.preventDefault(),ce.stopPropagation();const he=((ie=ce==null?void 0:ce.clipboardData)==null?void 0:ie.getData("Text").trim().slice(0,T.value))??"",ve=he.length-1===-1?le:he.length-1;oe(he)||(k.value=he.split(""),(be=B.value)==null||be[ve].focus())}function H(){k.value=[]}function ee(le,ce){a(),P.value=ce}function Q(){b(),P.value=-1}function oe(le){return e.type==="number"&&/[^0-9]/g.test(le)}return zi({VField:{color:Me(()=>e.color),bgColor:Me(()=>e.color),baseColor:Me(()=>e.baseColor),disabled:Me(()=>e.disabled),error:Me(()=>e.error),variant:Me(()=>e.variant)}},{scoped:!0}),Ot(k,le=>{le.length===T.value&&(P.value=T.value-1,s("finish",le.join("")))},{deep:!0}),Ot(P,le=>{le<0||zn(()=>{var ce;(ce=B.value[le])==null||ce.select()})}),bt(()=>{var he;const[le,ce]=Al(r);return Y("div",ut({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},le),[Y("div",{ref:R,class:"v-otp-input__content",style:Bt([f.value])},[A.value.map((ve,ie)=>Y(Ht,null,[e.divider&&ie!==0&&Y("span",{class:"v-otp-input__divider"},[e.divider]),F(Pl,{focused:d.value&&e.focusAll||P.value===ie,key:ie},{...c,loader:void 0,default:()=>Y("input",{ref:be=>B.value[ie]=be,"aria-label":S(e.label,ie+1),autofocus:ie===0&&e.autofocus,autocomplete:"one-time-code",class:vt(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:ie===0?T.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:k.value[ie],onInput:$,onFocus:be=>ee(be,ie),onBlur:Q,onKeydown:j,onPaste:be=>q(ie,be)},null)})])),Y("input",ut({class:"v-otp-input-input",type:"hidden"},ce,{value:k.value.join("")}),null),F(Hs,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var ve;return[((ve=c.loader)==null?void 0:ve.call(c))??F(Gu,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(he=c.default)==null?void 0:he.call(c)])])}),{blur:()=>{var le;(le=B.value)==null||le.some(ce=>ce.blur())},focus:()=>{var le;(le=B.value)==null||le[0].focus()},reset:H,isFocused:d}}});function I3(e){return Math.floor(Math.abs(e))*Math.sign(e)}const A3=Ge({scale:{type:[Number,String],default:.5},...Kt()},"VParallax"),E3=ft()({name:"VParallax",props:A3(),setup(e,n){let{slots:r}=n;const{intersectionRef:s,isIntersecting:c}=pm(),{resizeRef:f,contentRect:d}=vs(),{height:a}=Qa(),b=Xe();Li(()=>{var P;s.value=f.value=(P=b.value)==null?void 0:P.$el});let k;Ot(c,P=>{P?(k=r0(s.value),k=k===document.scrollingElement?document:k,k.addEventListener("scroll",A,{passive:!0}),A()):k.removeEventListener("scroll",A)}),Or(()=>{k==null||k.removeEventListener("scroll",A)}),Ot(a,A),Ot(()=>{var P;return(P=d.value)==null?void 0:P.height},A);const S=te(()=>1-ci(Number(e.scale)));let T=-1;function A(){c.value&&(cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var ee;const P=((ee=b.value)==null?void 0:ee.$el).querySelector(".v-img__img");if(!P)return;const R=k instanceof Document?document.documentElement.clientHeight:k.clientHeight,B=k instanceof Document?window.scrollY:k.scrollTop,L=s.value.getBoundingClientRect().top+B,$=d.value.height,j=L+($-R)/2,q=I3((B-j)*S.value),H=Math.max(1,(S.value*(R-$)+$)/$);P.style.setProperty("transform",`translateY(${q}px) scale(${H})`)}))}return bt(()=>F(Co,{class:vt(["v-parallax",{"v-parallax--active":c.value},e.class]),style:Bt(e.style),ref:b,cover:!0,onLoadstart:A,onLoad:A},r)),{}}}),M3=Ge({...Kg({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),D3=ft()({name:"VRadio",props:M3(),setup(e,n){let{slots:r}=n;return bt(()=>{const s=Tl.filterProps(e);return F(Tl,ut(s,{class:["v-radio",e.class],style:e.style,type:"radio"}),r)}),{}}}),R3=Ge({height:{type:[Number,String],default:"auto"},...Do(),...di(v0(),["multiple"]),trueIcon:{type:an,default:"$radioOn"},falseIcon:{type:an,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),L3=ft()({name:"VRadioGroup",inheritAttrs:!1,props:R3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=_a(),f=te(()=>e.id||`radio-group-${c}`),d=nn(e,"modelValue"),a=Xe();return bt(()=>{const[b,k]=Al(r),S=Wr.filterProps(e),T=Tl.filterProps(e),A=s.label?s.label({label:e.label,props:{for:f.value}}):e.label;return F(Wr,ut({ref:a,class:["v-radio-group",e.class],style:e.style},b,S,{modelValue:d.value,"onUpdate:modelValue":P=>d.value=P,id:f.value}),{...s,default:P=>{let{id:R,messagesId:B,isDisabled:L,isReadonly:$}=P;return Y(Ht,null,[A&&F(Yd,{id:R.value},{default:()=>[A]}),F(KT,ut(T,{id:R.value,"aria-describedby":B.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:L.value,readonly:$.value,"aria-labelledby":A?R.value:void 0,multiple:!1},k,{modelValue:d.value,"onUpdate:modelValue":j=>d.value=j}),s)])}})}),Pr({},a)}}),z3=Ge({...bm(),...Do(),...YP(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),V3=ft()({name:"VRangeSlider",props:z3(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=Xe(),f=Xe(),d=Xe(),{rtlClasses:a}=tr();function b(he){if(!c.value||!f.value)return;const ve=Qy(he,c.value.$el,e.direction),ie=Qy(he,f.value.$el,e.direction),be=Math.abs(ve),Be=Math.abs(ie);return be<Be||be===Be&&ve<0?c.value.$el:f.value.$el}const k=XP(e),S=nn(e,"modelValue",void 0,he=>he!=null&&he.length?he.map(ve=>k.roundValue(ve)):[0,0]),{activeThumbRef:T,hasLabels:A,max:P,min:R,mousePressed:B,onSliderMousedown:L,onSliderTouchstart:$,position:j,trackContainerRef:q,readonly:H}=JP({props:e,steps:k,onSliderStart:()=>{s("start",S.value)},onSliderEnd:he=>{var be;let{value:ve}=he;const ie=T.value===((be=c.value)==null?void 0:be.$el)?[ve,S.value[1]]:[S.value[0],ve];!e.strict&&ie[0]<ie[1]&&(S.value=ie),s("end",S.value)},onSliderMove:he=>{var Be,De,Fe,Ze;let{value:ve}=he;const[ie,be]=S.value;!e.strict&&ie===be&&ie!==R.value&&(T.value=ve>ie?(Be=f.value)==null?void 0:Be.$el:(De=c.value)==null?void 0:De.$el,(Fe=T.value)==null||Fe.focus()),T.value===((Ze=c.value)==null?void 0:Ze.$el)?S.value=[Math.min(ve,be),be]:S.value=[ie,Math.max(ie,ve)]},getActiveThumb:b}),{isFocused:ee,focus:Q,blur:oe}=Mo(e),le=te(()=>j(S.value[0])),ce=te(()=>j(S.value[1]));return bt(()=>{const he=Wr.filterProps(e),ve=!!(e.label||r.label||r.prepend);return F(Wr,ut({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!r["tick-label"]||A.value,"v-slider--focused":ee.value,"v-slider--pressed":B.value,"v-slider--disabled":e.disabled},a.value,e.class],style:e.style,ref:d},he,{focused:ee.value}),{...r,prepend:ve?ie=>{var be,Be;return Y(Ht,null,[((be=r.label)==null?void 0:be.call(r,ie))??(e.label?F(Yd,{class:"v-slider__label",text:e.label},null):void 0),(Be=r.prepend)==null?void 0:Be.call(r,ie)])}:void 0,default:ie=>{var De,Fe;let{id:be,messagesId:Be}=ie;return Y("div",{class:"v-slider__container",onMousedown:H.value?void 0:L,onTouchstartPassive:H.value?void 0:$},[Y("input",{id:`${be.value}_start`,name:e.name||be.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:S.value[0]},null),Y("input",{id:`${be.value}_stop`,name:e.name||be.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:S.value[1]},null),F(QP,{ref:q,start:le.value,stop:ce.value},{"tick-label":r["tick-label"]}),F(eb,{ref:c,"aria-describedby":Be.value,focused:ee&&T.value===((De=c.value)==null?void 0:De.$el),modelValue:S.value[0],"onUpdate:modelValue":Ze=>S.value=[Ze,S.value[1]],onFocus:Ze=>{var mt,pt,Ve,Se;Q(),T.value=(mt=c.value)==null?void 0:mt.$el,P.value!==R.value&&S.value[0]===S.value[1]&&S.value[1]===R.value&&Ze.relatedTarget!==((pt=f.value)==null?void 0:pt.$el)&&((Ve=c.value)==null||Ve.$el.blur(),(Se=f.value)==null||Se.$el.focus())},onBlur:()=>{oe(),T.value=void 0},min:R.value,max:S.value[1],position:le.value,ripple:e.ripple},{"thumb-label":r["thumb-label"]}),F(eb,{ref:f,"aria-describedby":Be.value,focused:ee&&T.value===((Fe=f.value)==null?void 0:Fe.$el),modelValue:S.value[1],"onUpdate:modelValue":Ze=>S.value=[S.value[0],Ze],onFocus:Ze=>{var mt,pt,Ve,Se;Q(),T.value=(mt=f.value)==null?void 0:mt.$el,P.value!==R.value&&S.value[0]===S.value[1]&&S.value[0]===P.value&&Ze.relatedTarget!==((pt=c.value)==null?void 0:pt.$el)&&((Ve=f.value)==null||Ve.$el.blur(),(Se=c.value)==null||Se.$el.focus())},onBlur:()=>{oe(),T.value=void 0},min:S.value[0],max:P.value,position:ce.value,ripple:e.ripple},{"thumb-label":r["thumb-label"]})])}})}),Pr({focus:()=>{var he;return(he=c.value)==null?void 0:he.$el.focus()}},d)}}),B3=Ge({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:an,default:"$ratingEmpty"},fullIcon:{type:an,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Kt(),...mr(),...Ks(),...wn(),...Hn()},"VRating"),O3=ft()({name:"VRating",props:B3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{t:s}=vi(),{themeClasses:c}=Qn(e),f=nn(e,"modelValue"),d=te(()=>ci(parseFloat(f.value),0,Number(e.length))),a=te(()=>Oa(Number(e.length),1)),b=te(()=>a.value.flatMap(L=>e.halfIncrements?[L-.5,L]:[L])),k=Rt(-1),S=te(()=>b.value.map(L=>{const $=e.hover&&k.value>-1,j=d.value>=L,q=k.value>=L,ee=($?q:j)?e.fullIcon:e.emptyIcon,Q=e.activeColor??e.color,oe=j||q?Q:e.color;return{isFilled:j,isHovered:q,icon:ee,color:oe}})),T=te(()=>[0,...b.value].map(L=>{function $(){k.value=L}function j(){k.value=-1}function q(){e.disabled||e.readonly||(f.value=d.value===L&&e.clearable?0:L)}return{onMouseenter:e.hover?$:void 0,onMouseleave:e.hover?j:void 0,onClick:q}})),A=_a(),P=te(()=>e.name??`v-rating-${A}`);function R(L){var ce,he;let{value:$,index:j,showStar:q=!0}=L;const{onMouseenter:H,onMouseleave:ee,onClick:Q}=T.value[j+1],oe=`${P.value}-${String($).replace(".","-")}`,le={color:(ce=S.value[j])==null?void 0:ce.color,density:e.density,disabled:e.disabled,icon:(he=S.value[j])==null?void 0:he.icon,ripple:e.ripple,size:e.size,variant:"plain"};return Y(Ht,null,[Y("label",{for:oe,class:vt({"v-rating__item--half":e.halfIncrements&&$%1>0,"v-rating__item--full":e.halfIncrements&&$%1===0}),onMouseenter:H,onMouseleave:ee,onClick:Q},[Y("span",{class:"v-rating__hidden"},[s(e.itemAriaLabel,$,e.length)]),q?r.item?r.item({...S.value[j],props:le,value:$,index:j,rating:d.value}):F(Ln,ut({"aria-label":s(e.itemAriaLabel,$,e.length)},le),null):void 0]),Y("input",{class:"v-rating__hidden",name:P.value,id:oe,type:"radio",value:$,checked:d.value===$,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function B(L){return r["item-label"]?r["item-label"](L):L.label?Y("span",null,[L.label]):Y("span",null,[Ft("")])}return bt(()=>{var $;const L=!!(($=e.itemLabels)!=null&&$.length)||r["item-label"];return F(e.tag,{class:vt(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},c.value,e.class]),style:Bt(e.style)},{default:()=>[F(R,{value:0,index:-1,showStar:!1},null),a.value.map((j,q)=>{var H,ee;return Y("div",{class:"v-rating__wrapper"},[L&&e.itemLabelPosition==="top"?B({value:j,index:q,label:(H=e.itemLabels)==null?void 0:H[q]}):void 0,Y("div",{class:"v-rating__item"},[e.halfIncrements?Y(Ht,null,[F(R,{value:j-.5,index:q*2},null),F(R,{value:j,index:q*2+1},null)]):F(R,{value:j,index:q},null)]),L&&e.itemLabelPosition==="bottom"?B({value:j,index:q,label:(ee=e.itemLabels)==null?void 0:ee[q]}):void 0])})]})}),{}}}),F3={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function $3(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Y("div",{class:vt(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[n])}function kS(e){const[n,r]=e.split("@");return Array.from({length:r}).map(()=>cv(n))}function cv(e){let n=[];if(!e)return n;const r=F3[e];if(e!==r){if(e.includes(","))return CS(e);if(e.includes("@"))return kS(e);r.includes(",")?n=CS(r):r.includes("@")?n=kS(r):r&&n.push(cv(r))}return[$3(e,n)]}function CS(e){return e.replace(/\s/g,"").split(",").map(cv)}const j3=Ge({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Zi(),...nr(),...Hn()},"VSkeletonLoader"),N3=ft()({name:"VSkeletonLoader",props:j3(),setup(e,n){let{slots:r}=n;const{backgroundColorClasses:s,backgroundColorStyles:c}=ti(()=>e.color),{dimensionStyles:f}=Ki(e),{elevationClasses:d}=Tr(e),{themeClasses:a}=Qn(e),{t:b}=vi(),k=te(()=>cv(Di(e.type).join(",")));return bt(()=>{var A;const S=!r.default||e.loading,T=e.boilerplate||!S?{}:{ariaLive:"polite",ariaLabel:b(e.loadingText),role:"alert"};return Y("div",ut({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},a.value,s.value,d.value],style:[c.value,S?f.value:{}]},T),[S?k.value:(A=r.default)==null?void 0:A.call(r)])}),{}}}),U3=ft()({name:"VSlideGroupItem",props:rc(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=ac(e,rP);return()=>{var c;return(c=r.default)==null?void 0:c.call(r,{isSelected:s.isSelected.value,select:s.select,toggle:s.toggle,selectedClass:s.selectedClass.value})}}});function G3(e){const n=Rt(e());let r=-1;function s(){clearInterval(r)}function c(){s(),zn(()=>n.value=e())}function f(d){const a=d?getComputedStyle(d):{transitionDuration:.2},b=parseFloat(a.transitionDuration)*1e3||200;if(s(),n.value<=0)return;const k=performance.now();r=window.setInterval(()=>{const S=performance.now()-k+b;n.value=Math.max(e()-S,0),n.value<=0&&s()},b)}return fr(s),{clear:s,time:n,start:f,reset:c}}const G2=Ge({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Eo({location:"bottom"}),...Zd(),..._i(),...es(),...Hn(),...di(wm({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),db=ft()({name:"VSnackbar",props:G2(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),{positionClasses:c}=Kd(e),{scopeId:f}=oc(),{themeClasses:d}=Qn(e),{colorClasses:a,colorStyles:b,variantClasses:k}=nc(e),{roundedClasses:S}=Vi(e),T=G3(()=>Number(e.timeout)),A=Xe(),P=Xe(),R=Rt(!1),B=Rt(0),L=Xe(),$=xn(Zf,void 0);ra(()=>!!$,()=>{const ve=PT();Li(()=>{L.value=ve.mainStyles.value})}),Ot(s,q),Ot(()=>e.timeout,q),gi(()=>{s.value&&q()});let j=-1;function q(){T.reset(),window.clearTimeout(j);const ve=Number(e.timeout);if(!s.value||ve===-1)return;const ie=Xb(P.value);T.start(ie),j=window.setTimeout(()=>{s.value=!1},ve)}function H(){T.reset(),window.clearTimeout(j)}function ee(){R.value=!0,H()}function Q(){R.value=!1,q()}function oe(ve){B.value=ve.touches[0].clientY}function le(ve){Math.abs(B.value-ve.changedTouches[0].clientY)>50&&(s.value=!1)}function ce(){R.value&&Q()}const he=te(()=>e.location.split(" ").reduce((ve,ie)=>(ve[`v-snackbar--${ie}`]=!0,ve),{}));return bt(()=>{const ve=Hs.filterProps(e),ie=!!(r.default||r.text||e.text);return F(Hs,ut({ref:A,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},he.value,c.value,e.class],style:[L.value,e.style]},ve,{modelValue:s.value,"onUpdate:modelValue":be=>s.value=be,contentProps:ut({class:["v-snackbar__wrapper",d.value,a.value,S.value,k.value],style:[b.value],onPointerenter:ee,onPointerleave:Q},ve.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:oe,onTouchend:le,onAfterLeave:ce},f),{default:()=>{var be,Be;return[El(!1,"v-snackbar"),e.timer&&!R.value&&Y("div",{key:"timer",class:"v-snackbar__timer"},[F(Hg,{ref:P,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":T.time.value},null)]),ie&&Y("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((be=r.text)==null?void 0:be.call(r))??e.text,(Be=r.default)==null?void 0:Be.call(r)]),r.actions&&F(kn,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[Y("div",{class:"v-snackbar__actions"},[r.actions({isActive:s})])]})]},activator:r.activator})}),Pr({},A)}}),q3=Ge({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...di(G2(),["modelValue"])},"VSnackbarQueue"),H3=ft()({name:"VSnackbarQueue",props:q3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi(),f=Rt(!1),d=Rt(!1),a=Rt();Ot(()=>e.modelValue.length,(A,P)=>{!d.value&&A>P&&k()}),Ot(f,A=>{A&&(d.value=!0)});function b(){e.modelValue.length?k():(a.value=void 0,d.value=!1)}function k(){const[A,...P]=e.modelValue;r("update:modelValue",P),a.value=typeof A=="string"?{text:A}:A,zn(()=>{f.value=!0})}function S(){f.value=!1}const T=te(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:c(e.closeText)}));bt(()=>{const A=!!(e.closable||s.actions),{modelValue:P,...R}=db.filterProps(e);return Y(Ht,null,[d.value&&!!a.value&&(s.default?F(kn,{defaults:{VSnackbar:a.value}},{default:()=>[s.default({item:a.value})]}):F(db,ut(R,a.value,{modelValue:f.value,"onUpdate:modelValue":B=>f.value=B,onAfterLeave:b}),{text:s.text?()=>{var B;return(B=s.text)==null?void 0:B.call(s,{item:a.value})}:void 0,actions:A?()=>Y(Ht,null,[s.actions?F(kn,{defaults:{VBtn:T.value}},{default:()=>[s.actions({item:a.value,props:{onClick:S}})]}):F(Ln,ut(T.value,{onClick:S}),null)]):void 0}))])})}}),q2=Ge({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),H2=Ge({autoLineWidth:Boolean,...q2()},"VBarline"),TS=ft()({name:"VBarline",props:H2(),setup(e,n){let{slots:r}=n;const s=_a(),c=te(()=>e.id||`barline-${s}`),f=te(()=>Number(e.autoDrawDuration)||500),d=te(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),a=te(()=>parseFloat(e.lineWidth)||4),b=te(()=>Math.max(e.modelValue.length*a.value,Number(e.width))),k=te(()=>({minX:0,maxX:b.value,minY:0,maxY:parseInt(e.height,10)})),S=te(()=>e.modelValue.map(L=>Wi(L,e.itemValue,L)));function T(L,$){const{minX:j,maxX:q,minY:H,maxY:ee}=$,Q=L.length;let oe=e.max!=null?Number(e.max):Math.max(...L),le=e.min!=null?Number(e.min):Math.min(...L);le>0&&e.min==null&&(le=0),oe<0&&e.max==null&&(oe=0);const ce=q/Q,he=(ee-H)/(oe-le||1),ve=ee-Math.abs(le*he);return L.map((ie,be)=>{const Be=Math.abs(he*ie);return{x:j+be*ce,y:ve-Be+ +(ie<0)*Be,height:Be,value:ie}})}const A=te(()=>{const L=[],$=T(S.value,k.value),j=$.length;for(let q=0;L.length<j;q++){const H=$[q];let ee=e.labels[q];ee||(ee=typeof H=="object"?H.value:H),L.push({x:H.x,value:String(ee)})}return L}),P=te(()=>T(S.value,k.value)),R=te(()=>(Math.abs(P.value[0].x-P.value[1].x)-a.value)/2),B=te(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));bt(()=>{const L=e.gradient.slice().length?e.gradient.slice().reverse():[""];return Y("svg",{display:"block"},[Y("defs",null,[Y("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[L.map(($,j)=>Y("stop",{offset:j/Math.max(L.length-1,1),"stop-color":$||"currentColor"},null))])]),Y("clipPath",{id:`${c.value}-clip`},[P.value.map($=>Y("rect",{x:$.x+R.value,y:$.y,width:a.value,height:$.height,rx:B.value,ry:B.value},[e.autoDraw&&Y(Ht,null,[Y("animate",{attributeName:"y",from:$.y+$.height,to:$.y,dur:`${f.value}ms`,fill:"freeze"},null),Y("animate",{attributeName:"height",from:"0",to:$.height,dur:`${f.value}ms`,fill:"freeze"},null)])]))]),d.value&&Y("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[A.value.map(($,j)=>{var q;return Y("text",{x:$.x+R.value+a.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((q=r.label)==null?void 0:q.call(r,{index:j,value:$.value}))??$.value])})]),Y("g",{"clip-path":`url(#${c.value}-clip)`,fill:`url(#${c.value})`},[Y("rect",{x:0,y:0,width:Math.max(e.modelValue.length*a.value,Number(e.width)),height:e.height},null)])])})}});function W3(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const c=e.shift(),f=e[e.length-1];return(r?`M${c.x} ${s-c.x+2} L${c.x} ${c.y}`:`M${c.x} ${c.y}`)+e.map((d,a)=>{const b=e[a+1],k=e[a-1]||c,S=b&&Z3(b,d,k);if(!b||S)return`L${d.x} ${d.y}`;const T=Math.min(PS(k,d),PS(b,d)),P=T/2<n?T/2:n,R=IS(k,d,P),B=IS(b,d,P);return`L${R.x} ${R.y}S${d.x} ${d.y} ${B.x} ${B.y}`}).join("")+(r?`L${f.x} ${s-c.x+2} Z`:"")}function Hp(e){return parseInt(e,10)}function Z3(e,n,r){return Hp(e.x+r.x)===Hp(2*n.x)&&Hp(e.y+r.y)===Hp(2*n.y)}function PS(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function IS(e,n,r){const s={x:e.x-n.x,y:e.y-n.y},c=Math.sqrt(s.x*s.x+s.y*s.y),f={x:s.x/c,y:s.y/c};return{x:n.x+f.x*r,y:n.y+f.y*r}}const W2=Ge({fill:Boolean,...q2()},"VTrendline"),AS=ft()({name:"VTrendline",props:W2(),setup(e,n){let{slots:r}=n;const s=_a(),c=te(()=>e.id||`trendline-${s}`),f=te(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),d=Xe(0),a=Xe(null);function b(L,$){const{minX:j,maxX:q,minY:H,maxY:ee}=$,Q=L.length,oe=e.max!=null?Number(e.max):Math.max(...L),le=e.min!=null?Number(e.min):Math.min(...L),ce=(q-j)/(Q-1),he=(ee-H)/(oe-le||1);return L.map((ve,ie)=>({x:j+ie*ce,y:ee-(ve-le)*he,value:ve}))}const k=te(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),S=te(()=>parseFloat(e.lineWidth)||4),T=te(()=>Number(e.width)),A=te(()=>{const L=Number(e.padding);return{minX:L,maxX:T.value-L,minY:L,maxY:parseInt(e.height,10)-L}}),P=te(()=>e.modelValue.map(L=>Wi(L,e.itemValue,L))),R=te(()=>{const L=[],$=b(P.value,A.value),j=$.length;for(let q=0;L.length<j;q++){const H=$[q];let ee=e.labels[q];ee||(ee=typeof H=="object"?H.value:H),L.push({x:H.x,value:String(ee)})}return L});Ot(()=>e.modelValue,async()=>{if(await zn(),!e.autoDraw||!a.value)return;const L=a.value,$=L.getTotalLength();e.fill?(L.style.transformOrigin="bottom center",L.style.transition="none",L.style.transform="scaleY(0)",L.getBoundingClientRect(),L.style.transition=`transform ${f.value}ms ${e.autoDrawEasing}`,L.style.transform="scaleY(1)"):(L.style.strokeDasharray=`${$}`,L.style.strokeDashoffset=`${$}`,L.getBoundingClientRect(),L.style.transition=`stroke-dashoffset ${f.value}ms ${e.autoDrawEasing}`,L.style.strokeDashoffset="0"),d.value=$},{immediate:!0});function B(L){const $=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return W3(b(P.value,A.value),$,L,parseInt(e.height,10))}bt(()=>{var $;const L=e.gradient.slice().length?e.gradient.slice().reverse():[""];return Y("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[Y("defs",null,[Y("linearGradient",{id:c.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[L.map((j,q)=>Y("stop",{offset:q/Math.max(L.length-1,1),"stop-color":j||"currentColor"},null))])]),k.value&&Y("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[R.value.map((j,q)=>{var H;return Y("text",{x:j.x+S.value/2+S.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((H=r.label)==null?void 0:H.call(r,{index:q,value:j.value}))??j.value])})]),Y("path",{ref:a,d:B(e.fill),fill:e.fill?`url(#${c.value})`:"none",stroke:e.fill?"none":`url(#${c.value})`},null),e.fill&&Y("path",{d:B(!1),fill:"none",stroke:e.color??(($=e.gradient)==null?void 0:$[0])},null)])})}}),K3=Ge({type:{type:String,default:"trend"},...H2(),...W2()},"VSparkline"),Y3=ft()({name:"VSparkline",props:K3(),setup(e,n){let{slots:r}=n;const{textColorClasses:s,textColorStyles:c}=Br(()=>e.color),f=te(()=>!!(e.showLabels||e.labels.length>0||r!=null&&r.label)),d=te(()=>{let a=parseInt(e.height,10);return f.value&&(a+=parseInt(e.labelSize,10)*1.5),a});bt(()=>{const a=e.type==="trend"?AS:TS,b=e.type==="trend"?AS.filterProps(e):TS.filterProps(e);return F(a,ut({key:e.type,class:s.value,style:c.value,viewBox:`0 0 ${e.width} ${parseInt(d.value,10)}`},b),r)})}}),X3=Ge({...Kt(),...MP({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),J3=ft()({name:"VSpeedDial",props:X3(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),c=Xe(),f=te(()=>{var k;const[a,b="center"]=((k=e.location)==null?void 0:k.split(" "))??[];return`${a} ${b}`}),d=te(()=>({[`v-speed-dial__content--${f.value.replace(" ","-")}`]:!0}));return bt(()=>{const a=Fd.filterProps(e);return F(Fd,ut(a,{modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,class:e.class,style:e.style,contentClass:["v-speed-dial__content",d.value,e.contentClass],location:f.value,ref:c,transition:"fade-transition"}),{...r,default:b=>F(kn,{defaults:{VBtn:{size:"small"}}},{default:()=>[F(ia,{appear:!0,group:!0,transition:e.transition},{default:()=>{var k;return[(k=r.default)==null?void 0:k.call(r,b)]}})]})})}),{}}}),q0=Symbol.for("vuetify:v-stepper"),Z2=Ge({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),K2=ft()({name:"VStepperActions",props:Z2(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi();function f(){r("click:prev")}function d(){r("click:next")}return bt(()=>{const a={onClick:f},b={onClick:d};return Y("div",{class:"v-stepper-actions"},[F(kn,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:c(e.prevText),variant:"text"}}},{default:()=>{var k;return[((k=s.prev)==null?void 0:k.call(s,{props:a}))??F(Ln,a,null)]}}),F(kn,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:c(e.nextText),variant:"tonal"}}},{default:()=>{var k;return[((k=s.next)==null?void 0:k.call(s,{props:b}))??F(Ln,b,null)]}})])}),{}}}),Y2=Ao("v-stepper-header"),Q3=Ge({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:an,default:"$complete"},editable:Boolean,editIcon:{type:an,default:"$edit"},error:Boolean,errorIcon:{type:an,default:"$error"},icon:an,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),e5=Ge({...Q3(),...rc()},"VStepperItem"),X2=ft()({name:"VStepperItem",directives:{vRipple:aa},props:e5(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:r}=n;const s=ac(e,q0,!0),c=te(()=>(s==null?void 0:s.value.value)??e.value),f=te(()=>e.rules.every(A=>A()===!0)),d=te(()=>!e.disabled&&e.editable),a=te(()=>!e.disabled&&e.editable),b=te(()=>e.error||!f.value),k=te(()=>e.complete||e.rules.length>0&&f.value),S=te(()=>b.value?e.errorIcon:k.value?e.completeIcon:s.isSelected.value&&e.editable?e.editIcon:e.icon),T=te(()=>({canEdit:a.value,hasError:b.value,hasCompleted:k.value,title:e.title,subtitle:e.subtitle,step:c.value,value:e.value}));return bt(()=>{var L,$,j;const A=(!s||s.isSelected.value||k.value||a.value)&&!b.value&&!e.disabled,P=!!(e.title!=null||r.title),R=!!(e.subtitle!=null||r.subtitle);function B(){s==null||s.toggle()}return Ri(Y("button",{class:vt(["v-stepper-item",{"v-stepper-item--complete":k.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":b.value},s==null?void 0:s.selectedClass.value]),disabled:!e.editable,type:"button",onClick:B},[d.value&&El(!0,"v-stepper-item"),F(Ja,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:A?e.color:void 0,size:24},{default:()=>{var q;return[((q=r.icon)==null?void 0:q.call(r,T.value))??(S.value?F(Jn,{icon:S.value},null):c.value)]}}),Y("div",{class:"v-stepper-item__content"},[P&&Y("div",{key:"title",class:"v-stepper-item__title"},[((L=r.title)==null?void 0:L.call(r,T.value))??e.title]),R&&Y("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[(($=r.subtitle)==null?void 0:$.call(r,T.value))??e.subtitle]),(j=r.default)==null?void 0:j.call(r,T.value)])]),[[aa,e.ripple&&e.editable,null]])}),{}}}),t5=Ge({...di(Jg(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),J2=ft()({name:"VStepperWindow",props:t5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=xn(q0,null),c=nn(e,"modelValue"),f=te({get(){var d;return c.value!=null||!s?c.value:(d=s.items.value.find(a=>s.selected.value.includes(a.id)))==null?void 0:d.value},set(d){c.value=d}});return bt(()=>{const d=qu.filterProps(e);return F(qu,ut({_as:"VStepperWindow"},d,{modelValue:f.value,"onUpdate:modelValue":a=>f.value=a,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),r)}),{}}}),n5=Ge({...Qg()},"VStepperWindowItem"),Q2=ft()({name:"VStepperWindowItem",props:n5(),setup(e,n){let{slots:r}=n;return bt(()=>{const s=Hu.filterProps(e);return F(Hu,ut({_as:"VStepperWindowItem"},s,{class:["v-stepper-window-item",e.class],style:e.style}),r)}),{}}}),i5=Ge({altLabels:Boolean,bgColor:String,completeIcon:an,editIcon:an,editable:Boolean,errorIcon:an,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Ju()},"Stepper"),r5=Ge({...i5(),...ic({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...E0(),...Io(Z2(),["prevText","nextText"])},"VStepper"),a5=ft()({name:"VStepper",props:r5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const{items:s,next:c,prev:f,selected:d}=Ml(e,q0),{displayClasses:a,mobile:b}=Qa(e),{completeIcon:k,editIcon:S,errorIcon:T,color:A,editable:P,prevText:R,nextText:B}=qd(e),L=te(()=>e.items.map((q,H)=>{const ee=Wi(q,e.itemTitle,q),Q=Wi(q,e.itemValue,H+1);return{title:ee,value:Q,raw:q}})),$=te(()=>s.value.findIndex(q=>d.value.includes(q.id))),j=te(()=>e.disabled?e.disabled:$.value===0?"prev":$.value===s.value.length-1?"next":!1);return zi({VStepperItem:{editable:P,errorIcon:T,completeIcon:k,editIcon:S,prevText:R,nextText:B},VStepperActions:{color:A,disabled:j,prevText:R,nextText:B}}),bt(()=>{const q=nm.filterProps(e),H=!!(r.header||e.items.length),ee=e.items.length>0,Q=!e.hideActions&&!!(ee||r.actions);return F(nm,ut(q,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":b.value},a.value,e.class],style:e.style}),{default:()=>{var oe,le;return[H&&F(Y2,{key:"stepper-header"},{default:()=>[L.value.map((ce,he)=>{let{raw:ve,...ie}=ce;return Y(Ht,null,[!!he&&F($a,null,null),F(X2,ie,{default:r[`header-item.${ie.value}`]??r.header,icon:r.icon,title:r.title,subtitle:r.subtitle})])})]}),ee&&F(J2,{key:"stepper-window"},{default:()=>[L.value.map(ce=>F(Q2,{value:ce.value},{default:()=>{var he,ve;return((he=r[`item.${ce.value}`])==null?void 0:he.call(r,ce))??((ve=r.item)==null?void 0:ve.call(r,ce))}}))]}),(oe=r.default)==null?void 0:oe.call(r,{prev:f,next:c}),Q&&(((le=r.actions)==null?void 0:le.call(r,{next:c,prev:f}))??F(K2,{key:"stepper-actions","onClick:prev":f,"onClick:next":c},r))]}})}),{prev:f,next:c}}}),s5=Ge({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Do(),...Kg()},"VSwitch"),o5=ft()({name:"VSwitch",inheritAttrs:!1,props:s5(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=nn(e,"indeterminate"),f=nn(e,"modelValue"),{loaderClasses:d}=gm(e),{isFocused:a,focus:b,blur:k}=Mo(e),S=Xe(),T=Xe(),A=Xn&&window.matchMedia("(forced-colors: active)").matches,P=Me(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),R=_a(),B=Me(()=>e.id||`switch-${R}`);function L(){c.value&&(c.value=!1)}function $(j){var q,H;j.stopPropagation(),j.preventDefault(),(H=(q=S.value)==null?void 0:q.input)==null||H.click()}return bt(()=>{const[j,q]=Al(r),H=Wr.filterProps(e),ee=Tl.filterProps(e);return F(Wr,ut({ref:T,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":c.value},d.value,e.class]},j,H,{modelValue:f.value,"onUpdate:modelValue":Q=>f.value=Q,id:B.value,focused:a.value,style:e.style}),{...s,default:Q=>{let{id:oe,messagesId:le,isDisabled:ce,isReadonly:he,isValid:ve}=Q;const ie={model:f,isValid:ve};return F(Tl,ut({ref:S},ee,{modelValue:f.value,"onUpdate:modelValue":[be=>f.value=be,L],id:oe.value,"aria-describedby":le.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:ce.value,readonly:he.value,onFocus:b,onBlur:k},q),{...s,default:be=>{let{backgroundColorClasses:Be,backgroundColorStyles:De}=be;return Y("div",{class:vt(["v-switch__track",A?void 0:Be.value]),style:Bt(De.value),onClick:$},[s["track-true"]&&Y("div",{key:"prepend",class:"v-switch__track-true"},[s["track-true"](ie)]),s["track-false"]&&Y("div",{key:"append",class:"v-switch__track-false"},[s["track-false"](ie)])])},input:be=>{let{inputNode:Be,icon:De,backgroundColorClasses:Fe,backgroundColorStyles:Ze}=be;return Y(Ht,null,[Be,Y("div",{class:vt(["v-switch__thumb",{"v-switch__thumb--filled":De||e.loading},e.inset||A?void 0:Fe.value]),style:Bt(e.inset?void 0:Ze.value)},[s.thumb?F(kn,{defaults:{VIcon:{icon:De,size:"x-small"}}},{default:()=>[s.thumb({...ie,icon:De})]}):F(h0,null,{default:()=>[e.loading?F(vm,{name:"v-switch",active:!0,color:ve.value===!1?void 0:P.value},{default:mt=>s.loader?s.loader(mt):F(Gu,{active:mt.isActive,color:mt.color,indeterminate:!0,size:"16",width:"2"},null)}):De&&F(Jn,{key:String(De),icon:De,size:"x-small"},null)]})])])}})}})}),Pr({},T)}}),l5=Ge({color:String,height:[Number,String],window:Boolean,...Kt(),...nr(),...Qu(),..._i(),...wn(),...Hn()},"VSystemBar"),u5=ft()({name:"VSystemBar",props:l5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{backgroundColorClasses:c,backgroundColorStyles:f}=ti(()=>e.color),{elevationClasses:d}=Tr(e),{roundedClasses:a}=Vi(e),{ssrBootStyles:b}=tc(),k=te(()=>e.height??(e.window?32:24)),{layoutItemStyles:S}=ec({id:e.name,order:te(()=>parseInt(e.order,10)),position:Rt("top"),layoutSize:k,elementSize:k,active:te(()=>!0),absolute:Me(()=>e.absolute)});return bt(()=>F(e.tag,{class:vt(["v-system-bar",{"v-system-bar--window":e.window},s.value,c.value,d.value,a.value,e.class]),style:Bt([f.value,S.value,b.value,e.style])},r)),{}}}),H0=Symbol.for("vuetify:v-tabs"),c5=Ge({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...di(Zg({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),eI=ft()({name:"VTab",props:c5(),setup(e,n){let{slots:r,attrs:s}=n;const{textColorClasses:c,textColorStyles:f}=Br(()=>e.sliderColor),d=Xe(),a=Xe(),b=te(()=>e.direction==="horizontal"),k=te(()=>{var T,A;return((A=(T=d.value)==null?void 0:T.group)==null?void 0:A.isSelected.value)??!1});function S(T){var P,R;let{value:A}=T;if(A){const B=(R=(P=d.value)==null?void 0:P.$el.parentElement)==null?void 0:R.querySelector(".v-tab--selected .v-tab__slider"),L=a.value;if(!B||!L)return;const $=getComputedStyle(B).color,j=B.getBoundingClientRect(),q=L.getBoundingClientRect(),H=b.value?"x":"y",ee=b.value?"X":"Y",Q=b.value?"right":"bottom",oe=b.value?"width":"height",le=j[H],ce=q[H],he=le>ce?j[Q]-q[Q]:j[H]-q[H],ve=Math.sign(he)>0?b.value?"right":"bottom":Math.sign(he)<0?b.value?"left":"top":"center",be=(Math.abs(he)+(Math.sign(he)<0?j[oe]:q[oe]))/Math.max(j[oe],q[oe])||0,Be=j[oe]/q[oe]||0,De=1.5;Vu(L,{backgroundColor:[$,"currentcolor"],transform:[`translate${ee}(${he}px) scale${ee}(${Be})`,`translate${ee}(${he/De}px) scale${ee}(${(be-1)/De+1})`,"none"],transformOrigin:Array(3).fill(ve)},{duration:225,easing:Hf})}}return bt(()=>{const T=Ln.filterProps(e);return F(Ln,ut({symbol:H0,ref:d,class:["v-tab",e.class],style:e.style,tabindex:k.value?0:-1,role:"tab","aria-selected":String(k.value),active:!1},T,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":S}),{...r,default:()=>{var A;return Y(Ht,null,[((A=r.default)==null?void 0:A.call(r))??e.text,!e.hideSlider&&Y("div",{ref:a,class:vt(["v-tab__slider",c.value]),style:Bt(f.value)},null)])}})}),Pr({},d)}}),d5=Ge({...di(Jg(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),tI=ft()({name:"VTabsWindow",props:d5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=xn(H0,null),c=nn(e,"modelValue"),f=te({get(){var d;return c.value!=null||!s?c.value:(d=s.items.value.find(a=>s.selected.value.includes(a.id)))==null?void 0:d.value},set(d){c.value=d}});return bt(()=>{const d=qu.filterProps(e);return F(qu,ut({_as:"VTabsWindow"},d,{modelValue:f.value,"onUpdate:modelValue":a=>f.value=a,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),r)}),{}}}),h5=Ge({...Qg()},"VTabsWindowItem"),nI=ft()({name:"VTabsWindowItem",props:h5(),setup(e,n){let{slots:r}=n;return bt(()=>{const s=Hu.filterProps(e);return F(Hu,ut({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),r)}),{}}});function f5(e){return e?e.map(n=>Gf(n)?n:{text:n,value:n}):[]}const m5=Ge({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,..._0({mandatory:"force",selectedClass:"v-tab-item--selected"}),...mr(),...wn()},"VTabs"),p5=ft()({name:"VTabs",props:m5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:r,slots:s}=n;const c=nn(e,"modelValue"),f=te(()=>f5(e.items)),{densityClasses:d}=sa(e),{backgroundColorClasses:a,backgroundColorStyles:b}=ti(()=>e.bgColor),{scopeId:k}=oc();return zi({VTab:{color:Me(()=>e.color),direction:Me(()=>e.direction),stacked:Me(()=>e.stacked),fixed:Me(()=>e.fixedTabs),sliderColor:Me(()=>e.sliderColor),hideSlider:Me(()=>e.hideSlider)}}),bt(()=>{const S=Qf.filterProps(e),T=!!(s.window||e.items.length>0);return Y(Ht,null,[F(Qf,ut(S,{modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,a.value,e.class],style:[{"--v-tabs-height":qt(e.height)},b.value,e.style],role:"tablist",symbol:H0},k,r),{default:()=>{var A;return[((A=s.default)==null?void 0:A.call(s))??f.value.map(P=>{var R;return((R=s.tab)==null?void 0:R.call(s,{item:P}))??F(eI,ut(P,{key:P.text,value:P.value}),{default:s[`tab.${P.value}`]?()=>{var B;return(B=s[`tab.${P.value}`])==null?void 0:B.call(s,{item:P})}:void 0})})]}}),T&&F(tI,ut({modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,key:"tabs-window"},k),{default:()=>{var A;return[f.value.map(P=>{var R;return((R=s.item)==null?void 0:R.call(s,{item:P}))??F(nI,{value:P.value},{default:()=>{var B;return(B=s[`item.${P.value}`])==null?void 0:B.call(s,{item:P})}})}),(A=s.window)==null?void 0:A.call(s)]}})])}),{}}}),g5=Ge({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Do(),...Sm()},"VTextarea"),v5=ft()({name:"VTextarea",directives:{vIntersect:ko},inheritAttrs:!1,props:g5(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,n){let{attrs:r,emit:s,slots:c}=n;const f=nn(e,"modelValue"),{isFocused:d,focus:a,blur:b}=Mo(e),{onIntersect:k}=DP(e),S=te(()=>typeof e.counterValue=="function"?e.counterValue(f.value):(f.value||"").toString().length),T=te(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),A=Xe(),P=Xe(),R=Rt(""),B=Xe(),L=te(()=>e.persistentPlaceholder||d.value||e.active);function $(){var ve;B.value!==document.activeElement&&((ve=B.value)==null||ve.focus()),d.value||a()}function j(ve){$(),s("click:control",ve)}function q(ve){s("mousedown:control",ve)}function H(ve){ve.stopPropagation(),$(),zn(()=>{f.value="",$g(e["onClick:clear"],ve)})}function ee(ve){var be;const ie=ve.target;if(f.value=ie.value,(be=e.modelModifiers)!=null&&be.trim){const Be=[ie.selectionStart,ie.selectionEnd];zn(()=>{ie.selectionStart=Be[0],ie.selectionEnd=Be[1]})}}const Q=Xe(),oe=Xe(Number(e.rows)),le=te(()=>["plain","underlined"].includes(e.variant));Li(()=>{e.autoGrow||(oe.value=Number(e.rows))});function ce(){e.autoGrow&&zn(()=>{if(!Q.value||!P.value)return;const ve=getComputedStyle(Q.value),ie=getComputedStyle(P.value.$el),be=parseFloat(ve.getPropertyValue("--v-field-padding-top"))+parseFloat(ve.getPropertyValue("--v-input-padding-top"))+parseFloat(ve.getPropertyValue("--v-field-padding-bottom")),Be=Q.value.scrollHeight,De=parseFloat(ve.lineHeight),Fe=Math.max(parseFloat(e.rows)*De+be,parseFloat(ie.getPropertyValue("--v-input-control-height"))),Ze=parseFloat(e.maxRows)*De+be||1/0,mt=ci(Be??0,Fe,Ze);oe.value=Math.floor((mt-be)/De),R.value=qt(mt)})}gi(ce),Ot(f,ce),Ot(()=>e.rows,ce),Ot(()=>e.maxRows,ce),Ot(()=>e.density,ce),Ot(oe,ve=>{s("update:rows",ve)});let he;return Ot(Q,ve=>{ve?(he=new ResizeObserver(ce),he.observe(Q.value)):he==null||he.disconnect()}),Or(()=>{he==null||he.disconnect()}),bt(()=>{const ve=!!(c.counter||e.counter||e.counterValue),ie=!!(ve||c.details),[be,Be]=Al(r),{modelValue:De,...Fe}=Wr.filterProps(e),Ze=Pl.filterProps(e);return F(Wr,ut({ref:A,modelValue:f.value,"onUpdate:modelValue":mt=>f.value=mt,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":le.value},e.class],style:e.style},be,Fe,{centerAffix:oe.value===1&&!le.value,focused:d.value}),{...c,default:mt=>{let{id:pt,isDisabled:Ve,isDirty:Se,isReadonly:Ee,isValid:tt}=mt;return F(Pl,ut({ref:P,style:{"--v-textarea-control-height":R.value},onClick:j,onMousedown:q,"onClick:clear":H,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ze,{id:pt.value,active:L.value||Se.value,centerAffix:oe.value===1&&!le.value,dirty:Se.value||e.dirty,disabled:Ve.value,focused:d.value,error:tt.value===!1}),{...c,default:Nt=>{let{props:{class:kt,...wt}}=Nt;return Y(Ht,null,[e.prefix&&Y("span",{class:"v-text-field__prefix"},[e.prefix]),Ri(Y("textarea",ut({ref:B,class:kt,value:f.value,onInput:ee,autofocus:e.autofocus,readonly:Ee.value,disabled:Ve.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:$,onBlur:b},wt,Be),null),[[ko,{handler:k},null,{once:!0}]]),e.autoGrow&&Ri(Y("textarea",{class:vt([kt,"v-textarea__sizer"]),id:`${wt.id}-sizer`,"onUpdate:modelValue":Le=>f.value=Le,ref:Q,readonly:!0,"aria-hidden":"true"},null),[[GD,f.value]]),e.suffix&&Y("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:ie?mt=>{var pt;return Y(Ht,null,[(pt=c.details)==null?void 0:pt.call(c,mt),ve&&Y(Ht,null,[Y("span",null,null),F(Yg,{active:e.persistentCounter||d.value,value:S.value,max:T.value,disabled:e.disabled},c.counter)])])}:void 0})}),Pr({},A,P,B)}}),_5=Ge({withBackground:Boolean,...Kt(),...Hn(),...wn()},"VThemeProvider"),y5=ft()({name:"VThemeProvider",props:_5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e);return()=>{var c;return e.withBackground?F(e.tag,{class:vt(["v-theme-provider",s.value,e.class]),style:Bt(e.style)},{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r)]}}):(c=r.default)==null?void 0:c.call(r)}}}),b5=Ge({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:an,iconColor:String,lineColor:String,...Kt(),..._i(),...Ks(),...nr()},"VTimelineDivider"),x5=ft()({name:"VTimelineDivider",props:b5(),setup(e,n){let{slots:r}=n;const{sizeClasses:s,sizeStyles:c}=Wd(e,"v-timeline-divider__dot"),{backgroundColorStyles:f,backgroundColorClasses:d}=ti(()=>e.dotColor),{roundedClasses:a}=Vi(e,"v-timeline-divider__dot"),{elevationClasses:b}=Tr(e),{backgroundColorClasses:k,backgroundColorStyles:S}=ti(()=>e.lineColor);return bt(()=>Y("div",{class:vt(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Bt(e.style)},[Y("div",{class:vt(["v-timeline-divider__before",k.value]),style:Bt(S.value)},null),!e.hideDot&&Y("div",{key:"dot",class:vt(["v-timeline-divider__dot",b.value,a.value,s.value]),style:Bt(c.value)},[Y("div",{class:vt(["v-timeline-divider__inner-dot",d.value,a.value]),style:Bt(f.value)},[r.default?F(kn,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},r.default):F(Jn,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),Y("div",{class:vt(["v-timeline-divider__after",k.value]),style:Bt(S.value)},null)])),{}}}),iI=Ge({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:an,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Kt(),...Zi(),...nr(),..._i(),...Ks(),...wn()},"VTimelineItem"),w5=ft()({name:"VTimelineItem",props:iI(),setup(e,n){let{slots:r}=n;const{dimensionStyles:s}=Ki(e),c=Rt(0),f=Xe();return Ot(f,d=>{var a;d&&(c.value=((a=d.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:a.getBoundingClientRect().width)??0)},{flush:"post"}),bt(()=>{var d,a;return Y("div",{class:vt(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Bt([{"--v-timeline-dot-size":qt(c.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${qt(e.lineInset)})`:qt(0)},e.style])},[Y("div",{class:"v-timeline-item__body",style:Bt(s.value)},[(d=r.default)==null?void 0:d.call(r)]),F(x5,{ref:f,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:r.icon}),e.density!=="compact"&&Y("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((a=r.opposite)==null?void 0:a.call(r))])])}),{}}}),S5=Ge({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Io(iI({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Kt(),...mr(),...wn(),...Hn()},"VTimeline"),k5=ft()({name:"VTimeline",props:S5(),setup(e,n){let{slots:r}=n;const{themeClasses:s}=Qn(e),{densityClasses:c}=sa(e),{rtlClasses:f}=tr();zi({VTimelineDivider:{lineColor:Me(()=>e.lineColor)},VTimelineItem:{density:Me(()=>e.density),dotColor:Me(()=>e.dotColor),fillDot:Me(()=>e.fillDot),hideOpposite:Me(()=>e.hideOpposite),iconColor:Me(()=>e.iconColor),lineColor:Me(()=>e.lineColor),lineInset:Me(()=>e.lineInset),size:Me(()=>e.size)}});const d=te(()=>{const b=e.side?e.side:e.density!=="default"?"end":null;return b&&`v-timeline--side-${b}`}),a=te(()=>{const b=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return b;case"start":return b[0];case"end":return b[1];default:return null}});return bt(()=>F(e.tag,{class:vt(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,a.value,{"v-timeline--inset-line":!!e.lineInset},s.value,c.value,d.value,f.value,e.class]),style:Bt([{"--v-timeline-line-thickness":qt(e.lineThickness)},e.style])},r)),{}}});function Bu(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(n,"0")}const C5=Ge({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),hb=ft()({name:"VTimePickerClock",props:C5(),emits:{change:e=>!0,input:e=>!0},setup(e,n){let{emit:r}=n;const s=Xe(null),c=Xe(null),f=Xe(void 0),d=Xe(!1),a=Xe(null),b=Xe(null),k=KC(pt=>r("change",pt),750),{textColorClasses:S,textColorStyles:T}=Br(()=>e.color),{backgroundColorClasses:A,backgroundColorStyles:P}=ti(()=>e.color),R=te(()=>e.max-e.min+1),B=te(()=>e.double?R.value/2:R.value),L=te(()=>360/B.value),$=te(()=>L.value*Math.PI/180),j=te(()=>e.modelValue==null?e.min:e.modelValue),q=te(()=>.62),H=te(()=>{const pt=[];for(let Ve=e.min;Ve<=e.max;Ve=Ve+e.step)pt.push(Ve);return pt});Ot(()=>e.modelValue,pt=>{f.value=pt});function ee(pt){f.value!==pt&&(f.value=pt),r("input",pt)}function Q(pt){return!e.allowedValues||e.allowedValues(pt)}function oe(pt){if(!e.scrollable||e.disabled)return;pt.preventDefault();const Ve=Math.sign(-pt.deltaY||1);let Se=j.value;do Se=Se+Ve,Se=(Se-e.min+R.value)%R.value+e.min;while(!Q(Se)&&Se!==j.value);Se!==e.displayedValue&&ee(Se),k(Se)}function le(pt){return e.double&&pt-e.min>=B.value}function ce(pt){return le(pt)?q.value:1}function he(pt){const Ve=e.rotate*Math.PI/180;return{x:Math.sin((pt-e.min)*$.value+Ve)*ce(pt),y:-Math.cos((pt-e.min)*$.value+Ve)*ce(pt)}}function ve(pt,Ve){const Se=(Math.round(pt/L.value)+(Ve?B.value:0))%R.value+e.min;return pt<360-L.value/2?Se:Ve?e.max-B.value+1:e.min}function ie(pt){const{x:Ve,y:Se}=he(pt);return{left:`${Math.round(50+Ve*50)}%`,top:`${Math.round(50+Se*50)}%`}}function be(pt,Ve){const Se=Ve.x-pt.x,Ee=Ve.y-pt.y;return Math.sqrt(Se*Se+Ee*Ee)}function Be(pt,Ve){const Se=2*Math.atan2(Ve.y-pt.y-be(pt,Ve),Ve.x-pt.x);return Math.abs(Se*180/Math.PI)}function De(pt){a.value===null&&(a.value=pt),b.value=pt,ee(pt)}function Fe(pt){var ae,de;if(pt.preventDefault(),!d.value&&pt.type!=="click"||!s.value)return;const{width:Ve,top:Se,left:Ee}=(ae=s.value)==null?void 0:ae.getBoundingClientRect(),{width:tt}=((de=c.value)==null?void 0:de.getBoundingClientRect())??{width:0},{clientX:Nt,clientY:kt}="touches"in pt?pt.touches[0]:pt,wt={x:Ve/2,y:-Ve/2},Le={x:Nt-Ee,y:Se-kt},_t=Math.round(Be(wt,Le)-e.rotate+360)%360,ot=e.double&&be(wt,Le)<(tt+tt*q.value)/4,Je=Math.ceil(15/L.value);let Ct;for(let ze=0;ze<Je;ze++)if(Ct=ve(_t+ze*L.value,ot),Q(Ct)||(Ct=ve(_t-ze*L.value,ot),Q(Ct)))return De(Ct)}function Ze(pt){e.disabled||(pt.preventDefault(),window.addEventListener("mousemove",Fe),window.addEventListener("touchmove",Fe),window.addEventListener("mouseup",mt),window.addEventListener("touchend",mt),a.value=null,b.value=null,d.value=!0,Fe(pt))}function mt(pt){pt.stopPropagation(),window.removeEventListener("mousemove",Fe),window.removeEventListener("touchmove",Fe),window.removeEventListener("mouseup",mt),window.removeEventListener("touchend",mt),d.value=!1,b.value!==null&&Q(b.value)&&r("change",b.value)}bt(()=>Y("div",{class:vt([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Ze,onTouchstart:Ze,onWheel:oe,ref:s},[Y("div",{class:"v-time-picker-clock__inner",ref:c},[Y("div",{class:vt([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":le(e.modelValue)},S.value]),style:Bt([{transform:`rotate(${e.rotate+L.value*(j.value-e.min)}deg) scaleY(${ce(j.value)})`},T.value])},null),H.value.map(pt=>{const Ve=pt===j.value;return Y("div",{class:vt([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Ve,"v-time-picker-clock__item--disabled":e.disabled||!Q(pt)},Ve&&A.value]),style:Bt([ie(pt),Ve&&P.value])},[Y("span",null,[e.format(pt)])])})])]))}}),T5=Ge({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),fb=ft()({name:"VTimePickerControls",props:T5(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi();return bt(()=>{let f=e.hour;return e.ampm&&(f=f?(f-1)%12+1:12),Y("div",{class:"v-time-picker-controls"},[Y("div",{class:vt({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[F(Ln,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:vt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":Bu(`${f}`),onClick:()=>r("update:viewMode","hour")},null),Y("span",{class:vt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[Ft(":")]),F(Ln,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:vt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":Bu(e.minute),onClick:()=>r("update:viewMode","minute")},null),e.useSeconds&&Y("span",{class:vt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[Ft(":")]),e.useSeconds&&F(Ln,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>r("update:viewMode","second"),class:vt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":Bu(e.second)},null),e.ampm&&Y("div",{class:"v-time-picker-controls__ampm"},[F(Ln,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:vt({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:c("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?r("update:period","am"):null},null),F(Ln,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:vt({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:c("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?r("update:period","pm"):null},null)])])])}),{}}}),P5=Oa(24),rI=Oa(12),I5=rI.map(e=>e+12);Oa(60);const A5=Ge({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...di(ev({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),E5=ft()({name:"VTimePicker",props:A5(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:r,slots:s}=n;const{t:c}=vi(),f=Xe(null),d=Xe(null),a=Xe(null),b=Xe(null),k=Xe(null),S=Xe(null),T=Xe("am"),A=nn(e,"viewMode","hour"),P=Xe(null),R=Xe(null),B=te(()=>{let ie;if(e.allowedHours instanceof Array?ie=De=>e.allowedHours.includes(De):ie=e.allowedHours,!e.min&&!e.max)return ie;const be=e.min?Number(e.min.split(":")[0]):0,Be=e.max?Number(e.max.split(":")[0]):23;return De=>De>=Number(be)&&De<=Number(Be)&&(!ie||ie(De))}),L=te(()=>{let ie;const be=!B.value||f.value===null||B.value(f.value);if(e.allowedMinutes instanceof Array?ie=Ve=>e.allowedMinutes.includes(Ve):ie=e.allowedMinutes,!e.min&&!e.max)return be?ie:()=>!1;const[Be,De]=e.min?e.min.split(":").map(Number):[0,0],[Fe,Ze]=e.max?e.max.split(":").map(Number):[23,59],mt=Be*60+Number(De),pt=Fe*60+Number(Ze);return Ve=>{const Se=60*f.value+Ve;return Se>=mt&&Se<=pt&&be&&(!ie||ie(Ve))}}),$=te(()=>{let ie;const Be=(!B.value||f.value===null||B.value(f.value))&&(!L.value||d.value===null||L.value(d.value));if(e.allowedSeconds instanceof Array?ie=tt=>e.allowedSeconds.includes(tt):ie=e.allowedSeconds,!e.min&&!e.max)return Be?ie:()=>!1;const[De,Fe,Ze]=e.min?e.min.split(":").map(Number):[0,0,0],[mt,pt,Ve]=e.max?e.max.split(":").map(Number):[23,59,59],Se=De*3600+Fe*60+Number(Ze||0),Ee=mt*3600+pt*60+Number(Ve||0);return tt=>{const Nt=3600*f.value+60*d.value+tt;return Nt>=Se&&Nt<=Ee&&Be&&(!ie||ie(tt))}}),j=te(()=>e.format==="ampm");Ot(()=>e.modelValue,ie=>oe(ie)),gi(()=>{oe(e.modelValue)});function q(){return f.value!=null&&d.value!=null&&(!e.useSeconds||a.value!=null)?`${Bu(f.value)}:${Bu(d.value)}`+(e.useSeconds?`:${Bu(a.value)}`:""):null}function H(){const ie=q();ie!==null&&r("update:modelValue",ie)}function ee(ie){return ie?(ie-1)%12+1:12}function Q(ie,be){return ie%12+(be==="pm"?12:0)}function oe(ie){if(ie==null||ie==="")f.value=null,d.value=null,a.value=null;else if(ie instanceof Date)f.value=ie.getHours(),d.value=ie.getMinutes(),a.value=ie.getSeconds();else{const[be,,Be,,De,Fe]=ie.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);f.value=Fe?Q(parseInt(be,10),Fe):parseInt(be,10),d.value=parseInt(Be,10),a.value=parseInt(De||0,10)}T.value=f.value==null||f.value<12?"am":"pm"}function le(ie,be){const Be=B.value;if(!Be)return be;const De=j.value?be<12?rI:I5:P5;return((De.find(Ze=>Be((Ze+be)%De.length+De[0]))||0)+be)%De.length+De[0]}function ce(ie){if(T.value=ie,f.value!=null){const be=f.value+(T.value==="am"?-12:12);f.value=le("hour",be)}return r("update:period",ie),H(),!0}function he(ie){A.value==="hour"?f.value=j.value?Q(ie,T.value):ie:A.value==="minute"?d.value=ie:a.value=ie}function ve(ie){switch(A.value||"hour"){case"hour":r("update:hour",ie);break;case"minute":r("update:minute",ie);break;case"second":r("update:second",ie);break}const be=f.value!==null&&d.value!==null&&(e.useSeconds?a.value!==null:!0);A.value==="hour"?A.value="minute":e.useSeconds&&A.value==="minute"&&(A.value="second"),!(f.value===b.value&&d.value===k.value&&(!e.useSeconds||a.value===S.value)||q()===null)&&(b.value=f.value,k.value=d.value,e.useSeconds&&(S.value=a.value),be&&H())}bt(()=>{const ie=$d.filterProps(e),be=fb.filterProps(e),Be=hb.filterProps(di(e,["format","modelValue","min","max"]));return F($d,ut(ie,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>{var De;return((De=s.title)==null?void 0:De.call(s))??Y("div",{class:"v-time-picker__title"},[c(e.title)])},header:()=>F(fb,ut(be,{ampm:j.value,hour:f.value,minute:d.value,period:T.value,second:a.value,viewMode:A.value,"onUpdate:period":De=>ce(De),"onUpdate:viewMode":De=>A.value=De,ref:P}),null),default:()=>F(hb,ut(Be,{allowedValues:A.value==="hour"?B.value:A.value==="minute"?L.value:$.value,double:A.value==="hour"&&!j.value,format:A.value==="hour"?j.value?ee:De=>De:De=>Bu(De,2),max:A.value==="hour"?j.value&&T.value==="am"?11:23:59,min:A.value==="hour"&&j.value&&T.value==="pm"?12:0,size:20,step:A.value==="hour"?1:5,modelValue:A.value==="hour"?f.value:A.value==="minute"?d.value:a.value,onChange:ve,onInput:he,ref:R}),null),actions:s.actions})})}}),M5=Ge({...Kt(),...es({variant:"text"})},"VToolbarItems"),D5=ft()({name:"VToolbarItems",props:M5(),setup(e,n){let{slots:r}=n;return zi({VBtn:{color:Me(()=>e.color),height:"inherit",variant:Me(()=>e.variant)}}),bt(()=>{var s;return Y("div",{class:vt(["v-toolbar-items",e.class]),style:Bt(e.style)},[(s=r.default)==null?void 0:s.call(r)])}),{}}}),R5=Ge({id:String,interactive:Boolean,text:String,...di(wm({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),aI=ft()({name:"VTooltip",props:R5(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=nn(e,"modelValue"),{scopeId:c}=oc(),f=_a(),d=Me(()=>e.id||`v-tooltip-${f}`),a=Xe(),b=te(()=>e.location.split(" ").length>1?e.location:e.location+" center"),k=te(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),S=Me(()=>e.transition!=null?e.transition:s.value?"scale-transition":"fade-transition"),T=te(()=>ut({"aria-describedby":d.value},e.activatorProps));return bt(()=>{const A=Hs.filterProps(e);return F(Hs,ut({ref:a,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:d.value},A,{modelValue:s.value,"onUpdate:modelValue":P=>s.value=P,transition:S.value,absolute:!0,location:b.value,origin:k.value,persistent:!0,role:"tooltip",activatorProps:T.value,_disableGlobalStack:!0},c),{activator:r.activator,default:function(){var L;for(var P=arguments.length,R=new Array(P),B=0;B<P;B++)R[B]=arguments[B];return((L=r.default)==null?void 0:L.call(r,...R))??e.text}})}),Pr({},a)}}),L5=Ge({...di(mP({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),mb=ft()({name:"VTreeviewGroup",props:L5(),setup(e,n){let{slots:r}=n;const s=Xe(),c=te(()=>{var d;return(d=s.value)!=null&&d.isOpen?e.collapseIcon:e.expandIcon}),f=te(()=>{var d;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(d=s.value)==null?void 0:d.isOpen,toggleIcon:c.value}}});return bt(()=>{const d=tm.filterProps(e);return F(tm,ut(d,{ref:s,class:["v-treeview-group",e.class],subgroup:!0}),{...r,activator:r.activator?a=>Y(Ht,null,[F(kn,{defaults:f.value},{default:()=>{var b;return[(b=r.activator)==null?void 0:b.call(r,a)]}})]):void 0})}),{}}}),sI=Symbol.for("vuetify:v-treeview"),oI=Ge({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:an,...vP({slim:!0})},"VTreeviewItem"),pb=ft()({name:"VTreeviewItem",props:oI(),emits:{toggleExpand:e=>!0},setup(e,n){let{slots:r,emit:s}=n;const c=xn(sI,{visibleIds:Xe()}).visibleIds,f=Xe(),d=te(()=>{var A,P;return((A=f.value)==null?void 0:A.root.activatable.value)&&((P=f.value)==null?void 0:P.isGroupActivator)}),a=te(()=>{var A,P;return((A=f.value)==null?void 0:A.link.isClickable.value)||e.value!=null&&!!((P=f.value)!=null&&P.list)}),b=te(()=>!e.disabled&&e.link!==!1&&(e.link||a.value||d.value)),k=te(()=>{var A;return c.value&&!c.value.has(mn((A=f.value)==null?void 0:A.id))});function S(A){var P,R;b.value&&d.value&&((R=f.value)==null||R.activate(!((P=f.value)!=null&&P.isActivated),A))}function T(A){A.preventDefault(),A.stopPropagation(),s("toggleExpand",A)}return bt(()=>{var R;const A=_s.filterProps(e),P=r.prepend||e.toggleIcon||e.indentLines;return F(_s,ut({ref:f},A,{active:((R=f.value)==null?void 0:R.isActivated)||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":d.value,"v-treeview-item--filtered":k.value},e.class],ripple:!1,onClick:S}),{...r,prepend:P?B=>{var L;return Y(Ht,null,[e.indentLines&&e.indentLines.length>0?Y("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map($=>Y("div",{class:vt(`v-treeview-indent-line v-treeview-indent-line--${$}`)},null))]):"",!e.hideActions&&F(kP,{start:!0},{default:()=>[e.toggleIcon?F(Ln,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:T},{loader:()=>F(Gu,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):Y("div",{class:"v-treeview-item__level"},null)]}),(L=r.prepend)==null?void 0:L.call(r,B)])}:void 0})}),Pr({},f)}}),lI=Ge({disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:an,default:"$checkboxIndeterminate"},falseIcon:an,trueIcon:an,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Io(oI(),["hideActions"]),...mr()},"VTreeviewChildren"),Tg=ft()({name:"VTreeviewChildren",props:lI(),setup(e,n){let{slots:r}=n;const s=Sr(new Set),c=Xe([]),f=te(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function d(b){var k,S;try{if(!((k=e.items)!=null&&k.length)||!e.loadChildren)return;((S=b==null?void 0:b.children)==null?void 0:S.length)===0&&(s.add(b.value),await e.loadChildren(b.raw))}finally{s.delete(b.value)}}function a(b,k){e.selectable&&b(k)}return()=>{var b,k;return((b=r.default)==null?void 0:b.call(r))??((k=e.items)==null?void 0:k.map((S,T,A)=>{var le,ce;const{children:P,props:R}=S,B=s.has(S.value),L=!!((le=A.at(T+1))!=null&&le.children),$=((ce=e.path)==null?void 0:ce.length)??0,j=A.length-1===T,q={index:T,depth:$,isFirst:T===0,isLast:j,path:[...e.path,T],hideAction:e.hideActions},H=NR({depth:$,isLast:j,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),ee={prepend:he=>{var ve;return Y(Ht,null,[e.selectable&&(!P||P&&!["leaf","single-leaf"].includes(e.selectStrategy))&&Y("div",null,[F(qs,{key:S.value,modelValue:he.isSelected,disabled:e.disabled,loading:B,color:e.selectedColor,density:e.density,indeterminate:he.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":ie=>a(he.select,ie),onClick:ie=>ie.stopPropagation(),onKeydown:ie=>{["Enter","Space"].includes(ie.key)&&(ie.stopPropagation(),a(he.select,he.isSelected))}},null)]),(ve=r.prepend)==null?void 0:ve.call(r,{...he,...q,item:S.raw,internalItem:S})])},append:r.append?he=>{var ve;return(ve=r.append)==null?void 0:ve.call(r,{...he,...q,item:S.raw,internalItem:S})}:void 0,title:r.title?he=>{var ve;return(ve=r.title)==null?void 0:ve.call(r,{...he,item:S.raw,internalItem:S})}:void 0,subtitle:r.subtitle?he=>{var ve;return(ve=r.subtitle)==null?void 0:ve.call(r,{...he,item:S.raw,internalItem:S})}:void 0},Q=mb.filterProps(R),oe=Tg.filterProps({...e,...q});return P?F(mb,ut(Q,{value:e.returnObject?S.raw:Q==null?void 0:Q.value,rawId:Q==null?void 0:Q.value}),{activator:he=>{let{props:ve}=he;const ie={...R,...ve,value:R==null?void 0:R.value,onToggleExpand:[()=>d(S),ve.onClick],onClick:f.value?[()=>d(S),ve.onClick]:()=>{var be,Be;return a((be=c.value[T])==null?void 0:be.select,!((Be=c.value[T])!=null&&Be.isSelected))}};return F(pb,ut({ref:be=>c.value[T]=be},ie,{hideActions:e.hideActions,indentLines:H.node,value:e.returnObject?S.raw:R.value,loading:B}),ee)},default:()=>F(Tg,ut(oe,{items:P,indentLinesVariant:e.indentLinesVariant,parentIndentLines:H.children,isLastGroup:L,returnObject:e.returnObject}),r)}):U_(r.item,{props:R,item:S.raw,internalItem:S},()=>S.type==="divider"?U_(r.divider,{props:S.raw},()=>F($a,S.props,null)):S.type==="subheader"?U_(r.subheader,{props:S.raw},()=>F(Jd,S.props,null)):F(pb,ut(R,{hideActions:e.hideActions,indentLines:H.leaf,value:e.returnObject?mn(S.raw):R.value}),ee))}))}}});function uI(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const r of e)n.push(r),r.children&&uI(r.children,n);return n}const z5=Ge({fluid:Boolean,openAll:Boolean,indentLines:[Boolean,String],search:String,...Qd({filterKeys:["title"]}),...di(lI(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...di(SP({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),V5=ft()({name:"VTreeview",props:z5(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:r,emit:s}=n;const{items:c}=wP(e),f=Me(()=>e.activeColor),d=Me(()=>e.baseColor),a=Me(()=>e.color),b=nn(e,"activated"),k=nn(e,"selected"),S=te({get:()=>e.modelValue??k.value,set(q){k.value=q,s("update:modelValue",q)}}),T=Xe(),A=te(()=>e.openAll?j(c.value):e.opened),P=te(()=>uI(c.value)),R=Me(()=>e.search),{filteredItems:B}=eh(e,P,R),L=te(()=>{var H;if(!R.value)return null;const q=(H=T.value)==null?void 0:H.getPath;return q?new Set(B.value.flatMap(ee=>{const Q=e.returnObject?ee.raw:ee.props.value;return[...q(Q),...$(Q)].map(mn)})):null});function $(q){var Q,oe;const H=[],ee=(((Q=T.value)==null?void 0:Q.children.get(q))??[]).slice();for(;ee.length;){const le=ee.shift();le&&(H.push(le),ee.push(...(((oe=T.value)==null?void 0:oe.children.get(le))??[]).slice()))}return H}function j(q){let H=[];for(const ee of q)ee.children&&(H.push(e.returnObject?mn(ee.raw):ee.value),ee.children&&(H=H.concat(j(ee.children))));return H}return ri(sI,{visibleIds:L}),zi({VTreeviewGroup:{activeColor:f,baseColor:d,color:a,collapseIcon:Me(()=>e.collapseIcon),expandIcon:Me(()=>e.expandIcon)},VTreeviewItem:{activeClass:Me(()=>e.activeClass),activeColor:f,baseColor:d,color:a,density:Me(()=>e.density),disabled:Me(()=>e.disabled),lines:Me(()=>e.lines),variant:Me(()=>e.variant)}}),bt(()=>{const q=Od.filterProps(e),H=Tg.filterProps(e),ee=typeof e.indentLines=="boolean"?"default":e.indentLines;return F(Od,ut({ref:T},q,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],"open-strategy":"multiple",style:e.style,opened:A.value,activated:b.value,"onUpdate:activated":Q=>b.value=Q,selected:S.value,"onUpdate:selected":Q=>S.value=Q}),{default:()=>[F(Tg,ut(H,{density:e.density,returnObject:e.returnObject,items:c.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:ee}),r)]})}),{}}}),B5=ft()({name:"VValidation",props:eP(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const s=tP(e,"validation");return()=>{var c;return(c=r.default)==null?void 0:c.call(r,s)}}}),O5=Object.freeze(Object.defineProperty({__proto__:null,VAlert:Yz,VAlertTitle:WT,VApp:iz,VAppBar:Sz,VAppBarNavIcon:Gz,VAppBarTitle:qz,VAutocomplete:fB,VAvatar:Ja,VBadge:pB,VBanner:_B,VBannerActions:BP,VBannerText:OP,VBottomNavigation:bB,VBottomSheet:wB,VBreadcrumbs:TB,VBreadcrumbsDivider:$P,VBreadcrumbsItem:jP,VBtn:Ln,VBtnGroup:Ny,VBtnToggle:Az,VCard:MB,VCardActions:NP,VCardItem:qP,VCardSubtitle:UP,VCardText:HP,VCardTitle:GP,VCarousel:$B,VCarouselItem:NB,VCheckbox:oV,VCheckboxBtn:qs,VChip:Xd,VChipGroup:hV,VClassIcon:u0,VCode:UB,VCol:_F,VColorPicker:DO,VCombobox:LO,VComponentIcon:Fy,VConfirmEdit:VO,VContainer:mF,VCounter:Yg,VDataIterator:HO,VDataTable:lF,VDataTableFooter:im,VDataTableHeaders:Wu,VDataTableRow:$0,VDataTableRows:Zu,VDataTableServer:hF,VDataTableVirtual:cF,VDatePicker:EF,VDatePickerControls:rb,VDatePickerHeader:ab,VDatePickerMonth:sb,VDatePickerMonths:ob,VDatePickerYears:lb,VDefaultsProvider:kn,VDialog:Yy,VDialogBottomTransition:oz,VDialogTopTransition:lz,VDialogTransition:Gg,VDivider:$a,VEmptyState:DF,VExpandTransition:qg,VExpandXTransition:m0,VExpansionPanel:RF,VExpansionPanelText:ub,VExpansionPanelTitle:cb,VExpansionPanels:VF,VFab:OF,VFabTransition:sz,VFadeTransition:Kf,VField:Pl,VFieldLabel:wf,VFileInput:jF,VFooter:UF,VForm:qF,VHover:WF,VIcon:Jn,VImg:Co,VInfiniteScroll:KF,VInput:Wr,VItem:JF,VItemGroup:XF,VKbd:e3,VLabel:Yd,VLayout:n3,VLayoutItem:r3,VLazy:s3,VLigatureIcon:NL,VList:Od,VListGroup:tm,VListImg:EV,VListItem:_s,VListItemAction:kP,VListItemMedia:RV,VListItemSubtitle:pP,VListItemTitle:gP,VListSubheader:Jd,VLocaleProvider:l3,VMain:c3,VMenu:Fd,VMessages:JT,VNavigationDrawer:y3,VNoSsr:b3,VNumberInput:C3,VOtpInput:P3,VOverlay:Hs,VPagination:nb,VParallax:E3,VProgressCircular:Gu,VProgressLinear:Hg,VRadio:D3,VRadioGroup:L3,VRangeSlider:V3,VRating:O3,VResponsive:$y,VRow:CF,VScaleTransition:h0,VScrollXReverseTransition:cz,VScrollXTransition:uz,VScrollYReverseTransition:hz,VScrollYTransition:dz,VSelect:I0,VSelectionControl:Tl,VSelectionControlGroup:KT,VSheet:nm,VSkeletonLoader:N3,VSlideGroup:Qf,VSlideGroupItem:U3,VSlideXReverseTransition:mz,VSlideXTransition:fz,VSlideYReverseTransition:pz,VSlideYTransition:f0,VSlider:tb,VSnackbar:db,VSnackbarQueue:H3,VSpacer:R2,VSparkline:Y3,VSpeedDial:J3,VStepper:a5,VStepperActions:K2,VStepperHeader:Y2,VStepperItem:X2,VStepperWindow:J2,VStepperWindowItem:Q2,VSvgIcon:l0,VSwitch:o5,VSystemBar:u5,VTab:eI,VTable:Ku,VTabs:p5,VTabsWindow:tI,VTabsWindowItem:nI,VTextField:To,VTextarea:v5,VThemeProvider:y5,VTimePicker:E5,VTimePickerClock:hb,VTimePickerControls:fb,VTimeline:k5,VTimelineItem:w5,VToolbar:jy,VToolbarItems:D5,VToolbarTitle:d0,VTooltip:aI,VTreeview:V5,VTreeviewGroup:mb,VTreeviewItem:pb,VValidation:B5,VVirtualScroll:Xg,VWindow:qu,VWindowItem:Hu},Symbol.toStringTag,{value:"Module"}));function F5(e,n){const r=n.modifiers||{},s=n.value,{once:c,immediate:f,...d}=r,a=!Object.keys(d).length,{handler:b,options:k}=typeof s=="object"?s:{handler:s,options:{attributes:(d==null?void 0:d.attr)??a,characterData:(d==null?void 0:d.char)??a,childList:(d==null?void 0:d.child)??a,subtree:(d==null?void 0:d.sub)??a}},S=new MutationObserver(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=arguments.length>1?arguments[1]:void 0;b==null||b(T,A),c&&cI(e,n)});f&&(b==null||b([],S)),e._mutate=Object(e._mutate),e._mutate[n.instance.$.uid]={observer:S},S.observe(e,k)}function cI(e,n){var r;(r=e._mutate)!=null&&r[n.instance.$.uid]&&(e._mutate[n.instance.$.uid].observer.disconnect(),delete e._mutate[n.instance.$.uid])}const $5={mounted:F5,unmounted:cI};function j5(e,n){var c,f;const r=n.value,s={passive:!((c=n.modifiers)!=null&&c.active)};window.addEventListener("resize",r,s),e._onResize=Object(e._onResize),e._onResize[n.instance.$.uid]={handler:r,options:s},(f=n.modifiers)!=null&&f.quiet||r()}function N5(e,n){var c;if(!((c=e._onResize)!=null&&c[n.instance.$.uid]))return;const{handler:r,options:s}=e._onResize[n.instance.$.uid];window.removeEventListener("resize",r,s),delete e._onResize[n.instance.$.uid]}const U5={mounted:j5,unmounted:N5};function dI(e,n){const{self:r=!1}=n.modifiers??{},s=n.value,c=typeof s=="object"&&s.options||{passive:!0},f=typeof s=="function"||"handleEvent"in s?s:s.handler,d=r?e:n.arg?document.querySelector(n.arg):window;d&&(d.addEventListener("scroll",f,c),e._onScroll=Object(e._onScroll),e._onScroll[n.instance.$.uid]={handler:f,options:c,target:r?void 0:d})}function hI(e,n){var f;if(!((f=e._onScroll)!=null&&f[n.instance.$.uid]))return;const{handler:r,options:s,target:c=e}=e._onScroll[n.instance.$.uid];c.removeEventListener("scroll",r,s),delete e._onScroll[n.instance.$.uid]}function G5(e,n){n.value!==n.oldValue&&(hI(e,n),dI(e,n))}const q5={mounted:dI,unmounted:hI,updated:G5};function H5(e,n){const r=typeof e=="string"?Tt(e):e,s=W5(r,n);return{mounted:s,updated:s,unmounted(c){GC(null,c)}}}function W5(e,n){return function(r,s,c){var T,A,P;const f=typeof n=="function"?n(s):n,d=((T=s.value)==null?void 0:T.text)??s.value??(f==null?void 0:f.text),a=Gf(s.value)?s.value:{},b=()=>d??r.textContent,k=(c.ctx===s.instance.$?(A=Z5(c,s.instance.$))==null?void 0:A.provides:(P=c.ctx)==null?void 0:P.provides)??s.instance.$.provides,S=bs(e,ut(f,a),b);S.appContext=Object.assign(Object.create(null),s.instance.$.appContext,{provides:k}),GC(S,r)}}function Z5(e,n){const r=new Set,s=f=>{var d,a;for(const b of f){if(!b)continue;if(b===e||b.el&&e.el&&b.el===e.el)return!0;r.add(b);let k;if(b.suspense?k=s([b.ssContent]):Array.isArray(b.children)?k=s(b.children):(d=b.component)!=null&&d.vnode&&(k=s([(a=b.component)==null?void 0:a.subTree])),k)return k;r.delete(b)}return!1};if(!s([n.subTree]))return n;const c=Array.from(r).reverse();for(const f of c)if(f.component)return f.component;return n}const K5=H5(aI,e=>{var n;return{activator:"parent",location:(n=e.arg)==null?void 0:n.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value}}),Y5=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:Ky,Intersect:ko,Mutate:$5,Resize:U5,Ripple:aa,Scroll:q5,Tooltip:K5,Touch:kg},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const xd=typeof document<"u";function fI(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function X5(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&fI(e.default)}const oi=Object.assign;function ny(e,n){const r={};for(const s in n){const c=n[s];r[s]=ys(c)?c.map(e):e(c)}return r}const Df=()=>{},ys=Array.isArray,mI=/#/g,J5=/&/g,Q5=/\//g,e$=/=/g,t$=/\?/g,pI=/\+/g,n$=/%5B/g,i$=/%5D/g,gI=/%5E/g,r$=/%60/g,vI=/%7B/g,a$=/%7C/g,_I=/%7D/g,s$=/%20/g;function W0(e){return encodeURI(""+e).replace(a$,"|").replace(n$,"[").replace(i$,"]")}function o$(e){return W0(e).replace(vI,"{").replace(_I,"}").replace(gI,"^")}function gb(e){return W0(e).replace(pI,"%2B").replace(s$,"+").replace(mI,"%23").replace(J5,"%26").replace(r$,"`").replace(vI,"{").replace(_I,"}").replace(gI,"^")}function l$(e){return gb(e).replace(e$,"%3D")}function u$(e){return W0(e).replace(mI,"%23").replace(t$,"%3F")}function c$(e){return e==null?"":u$(e).replace(Q5,"%2F")}function am(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const d$=/\/$/,h$=e=>e.replace(d$,"");function iy(e,n,r="/"){let s,c={},f="",d="";const a=n.indexOf("#");let b=n.indexOf("?");return a<b&&a>=0&&(b=-1),b>-1&&(s=n.slice(0,b),f=n.slice(b+1,a>-1?a:n.length),c=e(f)),a>-1&&(s=s||n.slice(0,a),d=n.slice(a,n.length)),s=g$(s??n,r),{fullPath:s+(f&&"?")+f+d,path:s,query:c,hash:am(d)}}function f$(e,n){const r=n.query?e(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function ES(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function m$(e,n,r){const s=n.matched.length-1,c=r.matched.length-1;return s>-1&&s===c&&jd(n.matched[s],r.matched[c])&&yI(n.params,r.params)&&e(n.query)===e(r.query)&&n.hash===r.hash}function jd(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function yI(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!p$(e[r],n[r]))return!1;return!0}function p$(e,n){return ys(e)?MS(e,n):ys(n)?MS(n,e):e===n}function MS(e,n){return ys(n)?e.length===n.length&&e.every((r,s)=>r===n[s]):e.length===1&&e[0]===n}function g$(e,n){if(e.startsWith("/"))return e;if(!e)return n;const r=n.split("/"),s=e.split("/"),c=s[s.length-1];(c===".."||c===".")&&s.push("");let f=r.length-1,d,a;for(d=0;d<s.length;d++)if(a=s[d],a!==".")if(a==="..")f>1&&f--;else break;return r.slice(0,f).join("/")+"/"+s.slice(d).join("/")}const hl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var sm;(function(e){e.pop="pop",e.push="push"})(sm||(sm={}));var Rf;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Rf||(Rf={}));function v$(e){if(!e)if(xd){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),h$(e)}const _$=/^[^#]+#/;function y$(e,n){return e.replace(_$,"#")+n}function b$(e,n){const r=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:n.behavior,left:s.left-r.left-(n.left||0),top:s.top-r.top-(n.top||0)}}const dv=()=>({left:window.scrollX,top:window.scrollY});function x$(e){let n;if("el"in e){const r=e.el,s=typeof r=="string"&&r.startsWith("#"),c=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!c)return;n=b$(c,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function DS(e,n){return(history.state?history.state.position-n:-1)+e}const vb=new Map;function w$(e,n){vb.set(e,n)}function S$(e){const n=vb.get(e);return vb.delete(e),n}let k$=()=>location.protocol+"//"+location.host;function bI(e,n){const{pathname:r,search:s,hash:c}=n,f=e.indexOf("#");if(f>-1){let a=c.includes(e.slice(f))?e.slice(f).length:1,b=c.slice(a);return b[0]!=="/"&&(b="/"+b),ES(b,"")}return ES(r,e)+s+c}function C$(e,n,r,s){let c=[],f=[],d=null;const a=({state:A})=>{const P=bI(e,location),R=r.value,B=n.value;let L=0;if(A){if(r.value=P,n.value=A,d&&d===R){d=null;return}L=B?A.position-B.position:0}else s(P);c.forEach($=>{$(r.value,R,{delta:L,type:sm.pop,direction:L?L>0?Rf.forward:Rf.back:Rf.unknown})})};function b(){d=r.value}function k(A){c.push(A);const P=()=>{const R=c.indexOf(A);R>-1&&c.splice(R,1)};return f.push(P),P}function S(){const{history:A}=window;A.state&&A.replaceState(oi({},A.state,{scroll:dv()}),"")}function T(){for(const A of f)A();f=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",S)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",S,{passive:!0}),{pauseListeners:b,listen:k,destroy:T}}function RS(e,n,r,s=!1,c=!1){return{back:e,current:n,forward:r,replaced:s,position:window.history.length,scroll:c?dv():null}}function T$(e){const{history:n,location:r}=window,s={value:bI(e,r)},c={value:n.state};c.value||f(s.value,{back:null,current:s.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function f(b,k,S){const T=e.indexOf("#"),A=T>-1?(r.host&&document.querySelector("base")?e:e.slice(T))+b:k$()+e+b;try{n[S?"replaceState":"pushState"](k,"",A),c.value=k}catch(P){console.error(P),r[S?"replace":"assign"](A)}}function d(b,k){const S=oi({},n.state,RS(c.value.back,b,c.value.forward,!0),k,{position:c.value.position});f(b,S,!0),s.value=b}function a(b,k){const S=oi({},c.value,n.state,{forward:b,scroll:dv()});f(S.current,S,!0);const T=oi({},RS(s.value,b,null),{position:S.position+1},k);f(b,T,!1),s.value=b}return{location:s,state:c,push:a,replace:d}}function P$(e){e=v$(e);const n=T$(e),r=C$(e,n.state,n.location,n.replace);function s(f,d=!0){d||r.pauseListeners(),history.go(f)}const c=oi({location:"",base:e,go:s,createHref:y$.bind(null,e)},n,r);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>n.state.value}),c}function I$(e){return typeof e=="string"||e&&typeof e=="object"}function xI(e){return typeof e=="string"||typeof e=="symbol"}const wI=Symbol("");var LS;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(LS||(LS={}));function Nd(e,n){return oi(new Error,{type:e,[wI]:!0},n)}function po(e,n){return e instanceof Error&&wI in e&&(n==null||!!(e.type&n))}const zS="[^/]+?",A$={sensitive:!1,strict:!1,start:!0,end:!0},E$=/[.+*?^${}()[\]/\\]/g;function M$(e,n){const r=oi({},A$,n),s=[];let c=r.start?"^":"";const f=[];for(const k of e){const S=k.length?[]:[90];r.strict&&!k.length&&(c+="/");for(let T=0;T<k.length;T++){const A=k[T];let P=40+(r.sensitive?.25:0);if(A.type===0)T||(c+="/"),c+=A.value.replace(E$,"\\$&"),P+=40;else if(A.type===1){const{value:R,repeatable:B,optional:L,regexp:$}=A;f.push({name:R,repeatable:B,optional:L});const j=$||zS;if(j!==zS){P+=10;try{new RegExp(`(${j})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${R}" (${j}): `+H.message)}}let q=B?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;T||(q=L&&k.length<2?`(?:/${q})`:"/"+q),L&&(q+="?"),c+=q,P+=20,L&&(P+=-8),B&&(P+=-20),j===".*"&&(P+=-50)}S.push(P)}s.push(S)}if(r.strict&&r.end){const k=s.length-1;s[k][s[k].length-1]+=.7000000000000001}r.strict||(c+="/?"),r.end?c+="$":r.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const d=new RegExp(c,r.sensitive?"":"i");function a(k){const S=k.match(d),T={};if(!S)return null;for(let A=1;A<S.length;A++){const P=S[A]||"",R=f[A-1];T[R.name]=P&&R.repeatable?P.split("/"):P}return T}function b(k){let S="",T=!1;for(const A of e){(!T||!S.endsWith("/"))&&(S+="/"),T=!1;for(const P of A)if(P.type===0)S+=P.value;else if(P.type===1){const{value:R,repeatable:B,optional:L}=P,$=R in k?k[R]:"";if(ys($)&&!B)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const j=ys($)?$.join("/"):$;if(!j)if(L)A.length<2&&(S.endsWith("/")?S=S.slice(0,-1):T=!0);else throw new Error(`Missing required param "${R}"`);S+=j}}return S||"/"}return{re:d,score:s,keys:f,parse:a,stringify:b}}function D$(e,n){let r=0;for(;r<e.length&&r<n.length;){const s=n[r]-e[r];if(s)return s;r++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function SI(e,n){let r=0;const s=e.score,c=n.score;for(;r<s.length&&r<c.length;){const f=D$(s[r],c[r]);if(f)return f;r++}if(Math.abs(c.length-s.length)===1){if(VS(s))return 1;if(VS(c))return-1}return c.length-s.length}function VS(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const R$={type:0,value:""},L$=/[a-zA-Z0-9_]/;function z$(e){if(!e)return[[]];if(e==="/")return[[R$]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(P){throw new Error(`ERR (${r})/"${k}": ${P}`)}let r=0,s=r;const c=[];let f;function d(){f&&c.push(f),f=[]}let a=0,b,k="",S="";function T(){k&&(r===0?f.push({type:0,value:k}):r===1||r===2||r===3?(f.length>1&&(b==="*"||b==="+")&&n(`A repeatable param (${k}) must be alone in its segment. eg: '/:ids+.`),f.push({type:1,value:k,regexp:S,repeatable:b==="*"||b==="+",optional:b==="*"||b==="?"})):n("Invalid state to consume buffer"),k="")}function A(){k+=b}for(;a<e.length;){if(b=e[a++],b==="\\"&&r!==2){s=r,r=4;continue}switch(r){case 0:b==="/"?(k&&T(),d()):b===":"?(T(),r=1):A();break;case 4:A(),r=s;break;case 1:b==="("?r=2:L$.test(b)?A():(T(),r=0,b!=="*"&&b!=="?"&&b!=="+"&&a--);break;case 2:b===")"?S[S.length-1]=="\\"?S=S.slice(0,-1)+b:r=3:S+=b;break;case 3:T(),r=0,b!=="*"&&b!=="?"&&b!=="+"&&a--,S="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${k}"`),T(),d(),c}function V$(e,n,r){const s=M$(z$(e.path),r),c=oi(s,{record:e,parent:n,children:[],alias:[]});return n&&!c.record.aliasOf==!n.record.aliasOf&&n.children.push(c),c}function B$(e,n){const r=[],s=new Map;n=$S({strict:!1,end:!0,sensitive:!1},n);function c(T){return s.get(T)}function f(T,A,P){const R=!P,B=OS(T);B.aliasOf=P&&P.record;const L=$S(n,T),$=[B];if("alias"in T){const H=typeof T.alias=="string"?[T.alias]:T.alias;for(const ee of H)$.push(OS(oi({},B,{components:P?P.record.components:B.components,path:ee,aliasOf:P?P.record:B})))}let j,q;for(const H of $){const{path:ee}=H;if(A&&ee[0]!=="/"){const Q=A.record.path,oe=Q[Q.length-1]==="/"?"":"/";H.path=A.record.path+(ee&&oe+ee)}if(j=V$(H,A,L),P?P.alias.push(j):(q=q||j,q!==j&&q.alias.push(j),R&&T.name&&!FS(j)&&d(T.name)),kI(j)&&b(j),B.children){const Q=B.children;for(let oe=0;oe<Q.length;oe++)f(Q[oe],j,P&&P.children[oe])}P=P||j}return q?()=>{d(q)}:Df}function d(T){if(xI(T)){const A=s.get(T);A&&(s.delete(T),r.splice(r.indexOf(A),1),A.children.forEach(d),A.alias.forEach(d))}else{const A=r.indexOf(T);A>-1&&(r.splice(A,1),T.record.name&&s.delete(T.record.name),T.children.forEach(d),T.alias.forEach(d))}}function a(){return r}function b(T){const A=$$(T,r);r.splice(A,0,T),T.record.name&&!FS(T)&&s.set(T.record.name,T)}function k(T,A){let P,R={},B,L;if("name"in T&&T.name){if(P=s.get(T.name),!P)throw Nd(1,{location:T});L=P.record.name,R=oi(BS(A.params,P.keys.filter(q=>!q.optional).concat(P.parent?P.parent.keys.filter(q=>q.optional):[]).map(q=>q.name)),T.params&&BS(T.params,P.keys.map(q=>q.name))),B=P.stringify(R)}else if(T.path!=null)B=T.path,P=r.find(q=>q.re.test(B)),P&&(R=P.parse(B),L=P.record.name);else{if(P=A.name?s.get(A.name):r.find(q=>q.re.test(A.path)),!P)throw Nd(1,{location:T,currentLocation:A});L=P.record.name,R=oi({},A.params,T.params),B=P.stringify(R)}const $=[];let j=P;for(;j;)$.unshift(j.record),j=j.parent;return{name:L,path:B,params:R,matched:$,meta:F$($)}}e.forEach(T=>f(T));function S(){r.length=0,s.clear()}return{addRoute:f,resolve:k,removeRoute:d,clearRoutes:S,getRoutes:a,getRecordMatcher:c}}function BS(e,n){const r={};for(const s of n)s in e&&(r[s]=e[s]);return r}function OS(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:O$(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function O$(e){const n={},r=e.props||!1;if("component"in e)n.default=r;else for(const s in e.components)n[s]=typeof r=="object"?r[s]:r;return n}function FS(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function F$(e){return e.reduce((n,r)=>oi(n,r.meta),{})}function $S(e,n){const r={};for(const s in e)r[s]=s in n?n[s]:e[s];return r}function $$(e,n){let r=0,s=n.length;for(;r!==s;){const f=r+s>>1;SI(e,n[f])<0?s=f:r=f+1}const c=j$(e);return c&&(s=n.lastIndexOf(c,s-1)),s}function j$(e){let n=e;for(;n=n.parent;)if(kI(n)&&SI(e,n)===0)return n}function kI({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function N$(e){const n={};if(e===""||e==="?")return n;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<s.length;++c){const f=s[c].replace(pI," "),d=f.indexOf("="),a=am(d<0?f:f.slice(0,d)),b=d<0?null:am(f.slice(d+1));if(a in n){let k=n[a];ys(k)||(k=n[a]=[k]),k.push(b)}else n[a]=b}return n}function jS(e){let n="";for(let r in e){const s=e[r];if(r=l$(r),s==null){s!==void 0&&(n+=(n.length?"&":"")+r);continue}(ys(s)?s.map(f=>f&&gb(f)):[s&&gb(s)]).forEach(f=>{f!==void 0&&(n+=(n.length?"&":"")+r,f!=null&&(n+="="+f))})}return n}function U$(e){const n={};for(const r in e){const s=e[r];s!==void 0&&(n[r]=ys(s)?s.map(c=>c==null?null:""+c):s==null?s:""+s)}return n}const G$=Symbol(""),NS=Symbol(""),hv=Symbol(""),Z0=Symbol(""),_b=Symbol("");function _f(){let e=[];function n(s){return e.push(s),()=>{const c=e.indexOf(s);c>-1&&e.splice(c,1)}}function r(){e=[]}return{add:n,list:()=>e.slice(),reset:r}}function _l(e,n,r,s,c,f=d=>d()){const d=s&&(s.enterCallbacks[c]=s.enterCallbacks[c]||[]);return()=>new Promise((a,b)=>{const k=A=>{A===!1?b(Nd(4,{from:r,to:n})):A instanceof Error?b(A):I$(A)?b(Nd(2,{from:n,to:A})):(d&&s.enterCallbacks[c]===d&&typeof A=="function"&&d.push(A),a())},S=f(()=>e.call(s&&s.instances[c],n,r,k));let T=Promise.resolve(S);e.length<3&&(T=T.then(k)),T.catch(A=>b(A))})}function ry(e,n,r,s,c=f=>f()){const f=[];for(const d of e)for(const a in d.components){let b=d.components[a];if(!(n!=="beforeRouteEnter"&&!d.instances[a]))if(fI(b)){const S=(b.__vccOpts||b)[n];S&&f.push(_l(S,r,s,d,a,c))}else{let k=b();f.push(()=>k.then(S=>{if(!S)throw new Error(`Couldn't resolve component "${a}" at "${d.path}"`);const T=X5(S)?S.default:S;d.mods[a]=S,d.components[a]=T;const P=(T.__vccOpts||T)[n];return P&&_l(P,r,s,d,a,c)()}))}}return f}function US(e){const n=xn(hv),r=xn(Z0),s=te(()=>{const b=kr(e.to);return n.resolve(b)}),c=te(()=>{const{matched:b}=s.value,{length:k}=b,S=b[k-1],T=r.matched;if(!S||!T.length)return-1;const A=T.findIndex(jd.bind(null,S));if(A>-1)return A;const P=GS(b[k-2]);return k>1&&GS(S)===P&&T[T.length-1].path!==P?T.findIndex(jd.bind(null,b[k-2])):A}),f=te(()=>c.value>-1&&K$(r.params,s.value.params)),d=te(()=>c.value>-1&&c.value===r.matched.length-1&&yI(r.params,s.value.params));function a(b={}){if(Z$(b)){const k=n[kr(e.replace)?"replace":"push"](kr(e.to)).catch(Df);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>k),k}return Promise.resolve()}return{route:s,href:te(()=>s.value.href),isActive:f,isExactActive:d,navigate:a}}function q$(e){return e.length===1?e[0]:e}const H$=jb({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:US,setup(e,{slots:n}){const r=Sr(US(e)),{options:s}=xn(hv),c=te(()=>({[qS(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[qS(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const f=n.default&&q$(n.default(r));return e.custom?f:bs("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:c.value},f)}}}),W$=H$;function Z$(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function K$(e,n){for(const r in n){const s=n[r],c=e[r];if(typeof s=="string"){if(s!==c)return!1}else if(!ys(c)||c.length!==s.length||s.some((f,d)=>f!==c[d]))return!1}return!0}function GS(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const qS=(e,n,r)=>e??n??r,Y$=jb({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:r}){const s=xn(_b),c=te(()=>e.route||s.value),f=xn(NS,0),d=te(()=>{let k=kr(f);const{matched:S}=c.value;let T;for(;(T=S[k])&&!T.components;)k++;return k}),a=te(()=>c.value.matched[d.value]);ri(NS,te(()=>d.value+1)),ri(G$,a),ri(_b,c);const b=Xe();return Ot(()=>[b.value,a.value,e.name],([k,S,T],[A,P,R])=>{S&&(S.instances[T]=k,P&&P!==S&&k&&k===A&&(S.leaveGuards.size||(S.leaveGuards=P.leaveGuards),S.updateGuards.size||(S.updateGuards=P.updateGuards))),k&&S&&(!P||!jd(S,P)||!A)&&(S.enterCallbacks[T]||[]).forEach(B=>B(k))},{flush:"post"}),()=>{const k=c.value,S=e.name,T=a.value,A=T&&T.components[S];if(!A)return HS(r.default,{Component:A,route:k});const P=T.props[S],R=P?P===!0?k.params:typeof P=="function"?P(k):P:null,L=bs(A,oi({},R,n,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(T.instances[S]=null)},ref:b}));return HS(r.default,{Component:L,route:k})||L}}});function HS(e,n){if(!e)return null;const r=e(n);return r.length===1?r[0]:r}const X$=Y$;function J$(e){const n=B$(e.routes,e),r=e.parseQuery||N$,s=e.stringifyQuery||jS,c=e.history,f=_f(),d=_f(),a=_f(),b=Rt(hl);let k=hl;xd&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const S=ny.bind(null,Le=>""+Le),T=ny.bind(null,c$),A=ny.bind(null,am);function P(Le,_t){let ot,Je;return xI(Le)?(ot=n.getRecordMatcher(Le),Je=_t):Je=Le,n.addRoute(Je,ot)}function R(Le){const _t=n.getRecordMatcher(Le);_t&&n.removeRoute(_t)}function B(){return n.getRoutes().map(Le=>Le.record)}function L(Le){return!!n.getRecordMatcher(Le)}function $(Le,_t){if(_t=oi({},_t||b.value),typeof Le=="string"){const ze=iy(r,Le,_t.path),Ye=n.resolve({path:ze.path},_t),ct=c.createHref(ze.fullPath);return oi(ze,Ye,{params:A(Ye.params),hash:am(ze.hash),redirectedFrom:void 0,href:ct})}let ot;if(Le.path!=null)ot=oi({},Le,{path:iy(r,Le.path,_t.path).path});else{const ze=oi({},Le.params);for(const Ye in ze)ze[Ye]==null&&delete ze[Ye];ot=oi({},Le,{params:T(ze)}),_t.params=T(_t.params)}const Je=n.resolve(ot,_t),Ct=Le.hash||"";Je.params=S(A(Je.params));const ae=f$(s,oi({},Le,{hash:o$(Ct),path:Je.path})),de=c.createHref(ae);return oi({fullPath:ae,hash:Ct,query:s===jS?U$(Le.query):Le.query||{}},Je,{redirectedFrom:void 0,href:de})}function j(Le){return typeof Le=="string"?iy(r,Le,b.value.path):oi({},Le)}function q(Le,_t){if(k!==Le)return Nd(8,{from:_t,to:Le})}function H(Le){return oe(Le)}function ee(Le){return H(oi(j(Le),{replace:!0}))}function Q(Le){const _t=Le.matched[Le.matched.length-1];if(_t&&_t.redirect){const{redirect:ot}=_t;let Je=typeof ot=="function"?ot(Le):ot;return typeof Je=="string"&&(Je=Je.includes("?")||Je.includes("#")?Je=j(Je):{path:Je},Je.params={}),oi({query:Le.query,hash:Le.hash,params:Je.path!=null?{}:Le.params},Je)}}function oe(Le,_t){const ot=k=$(Le),Je=b.value,Ct=Le.state,ae=Le.force,de=Le.replace===!0,ze=Q(ot);if(ze)return oe(oi(j(ze),{state:typeof ze=="object"?oi({},Ct,ze.state):Ct,force:ae,replace:de}),_t||ot);const Ye=ot;Ye.redirectedFrom=_t;let ct;return!ae&&m$(s,Je,ot)&&(ct=Nd(16,{to:Ye,from:Je}),Se(Je,Je,!0,!1)),(ct?Promise.resolve(ct):he(Ye,Je)).catch(et=>po(et)?po(et,2)?et:Ve(et):mt(et,Ye,Je)).then(et=>{if(et){if(po(et,2))return oe(oi({replace:de},j(et.to),{state:typeof et.to=="object"?oi({},Ct,et.to.state):Ct,force:ae}),_t||Ye)}else et=ie(Ye,Je,!0,de,Ct);return ve(Ye,Je,et),et})}function le(Le,_t){const ot=q(Le,_t);return ot?Promise.reject(ot):Promise.resolve()}function ce(Le){const _t=Nt.values().next().value;return _t&&typeof _t.runWithContext=="function"?_t.runWithContext(Le):Le()}function he(Le,_t){let ot;const[Je,Ct,ae]=Q$(Le,_t);ot=ry(Je.reverse(),"beforeRouteLeave",Le,_t);for(const ze of Je)ze.leaveGuards.forEach(Ye=>{ot.push(_l(Ye,Le,_t))});const de=le.bind(null,Le,_t);return ot.push(de),wt(ot).then(()=>{ot=[];for(const ze of f.list())ot.push(_l(ze,Le,_t));return ot.push(de),wt(ot)}).then(()=>{ot=ry(Ct,"beforeRouteUpdate",Le,_t);for(const ze of Ct)ze.updateGuards.forEach(Ye=>{ot.push(_l(Ye,Le,_t))});return ot.push(de),wt(ot)}).then(()=>{ot=[];for(const ze of ae)if(ze.beforeEnter)if(ys(ze.beforeEnter))for(const Ye of ze.beforeEnter)ot.push(_l(Ye,Le,_t));else ot.push(_l(ze.beforeEnter,Le,_t));return ot.push(de),wt(ot)}).then(()=>(Le.matched.forEach(ze=>ze.enterCallbacks={}),ot=ry(ae,"beforeRouteEnter",Le,_t,ce),ot.push(de),wt(ot))).then(()=>{ot=[];for(const ze of d.list())ot.push(_l(ze,Le,_t));return ot.push(de),wt(ot)}).catch(ze=>po(ze,8)?ze:Promise.reject(ze))}function ve(Le,_t,ot){a.list().forEach(Je=>ce(()=>Je(Le,_t,ot)))}function ie(Le,_t,ot,Je,Ct){const ae=q(Le,_t);if(ae)return ae;const de=_t===hl,ze=xd?history.state:{};ot&&(Je||de?c.replace(Le.fullPath,oi({scroll:de&&ze&&ze.scroll},Ct)):c.push(Le.fullPath,Ct)),b.value=Le,Se(Le,_t,ot,de),Ve()}let be;function Be(){be||(be=c.listen((Le,_t,ot)=>{if(!kt.listening)return;const Je=$(Le),Ct=Q(Je);if(Ct){oe(oi(Ct,{replace:!0,force:!0}),Je).catch(Df);return}k=Je;const ae=b.value;xd&&w$(DS(ae.fullPath,ot.delta),dv()),he(Je,ae).catch(de=>po(de,12)?de:po(de,2)?(oe(oi(j(de.to),{force:!0}),Je).then(ze=>{po(ze,20)&&!ot.delta&&ot.type===sm.pop&&c.go(-1,!1)}).catch(Df),Promise.reject()):(ot.delta&&c.go(-ot.delta,!1),mt(de,Je,ae))).then(de=>{de=de||ie(Je,ae,!1),de&&(ot.delta&&!po(de,8)?c.go(-ot.delta,!1):ot.type===sm.pop&&po(de,20)&&c.go(-1,!1)),ve(Je,ae,de)}).catch(Df)}))}let De=_f(),Fe=_f(),Ze;function mt(Le,_t,ot){Ve(Le);const Je=Fe.list();return Je.length?Je.forEach(Ct=>Ct(Le,_t,ot)):console.error(Le),Promise.reject(Le)}function pt(){return Ze&&b.value!==hl?Promise.resolve():new Promise((Le,_t)=>{De.add([Le,_t])})}function Ve(Le){return Ze||(Ze=!Le,Be(),De.list().forEach(([_t,ot])=>Le?ot(Le):_t()),De.reset()),Le}function Se(Le,_t,ot,Je){const{scrollBehavior:Ct}=e;if(!xd||!Ct)return Promise.resolve();const ae=!ot&&S$(DS(Le.fullPath,0))||(Je||!ot)&&history.state&&history.state.scroll||null;return zn().then(()=>Ct(Le,_t,ae)).then(de=>de&&x$(de)).catch(de=>mt(de,Le,_t))}const Ee=Le=>c.go(Le);let tt;const Nt=new Set,kt={currentRoute:b,listening:!0,addRoute:P,removeRoute:R,clearRoutes:n.clearRoutes,hasRoute:L,getRoutes:B,resolve:$,options:e,push:H,replace:ee,go:Ee,back:()=>Ee(-1),forward:()=>Ee(1),beforeEach:f.add,beforeResolve:d.add,afterEach:a.add,onError:Fe.add,isReady:pt,install(Le){const _t=this;Le.component("RouterLink",W$),Le.component("RouterView",X$),Le.config.globalProperties.$router=_t,Object.defineProperty(Le.config.globalProperties,"$route",{enumerable:!0,get:()=>kr(b)}),xd&&!tt&&b.value===hl&&(tt=!0,H(c.location).catch(Ct=>{}));const ot={};for(const Ct in hl)Object.defineProperty(ot,Ct,{get:()=>b.value[Ct],enumerable:!0});Le.provide(hv,_t),Le.provide(Z0,Gk(ot)),Le.provide(_b,b);const Je=Le.unmount;Nt.add(Le),Le.unmount=function(){Nt.delete(Le),Nt.size<1&&(k=hl,be&&be(),be=null,b.value=hl,tt=!1,Ze=!1),Je()}}};function wt(Le){return Le.reduce((_t,ot)=>_t.then(()=>ce(ot)),Promise.resolve())}return kt}function Q$(e,n){const r=[],s=[],c=[],f=Math.max(n.matched.length,e.matched.length);for(let d=0;d<f;d++){const a=n.matched[d];a&&(e.matched.find(k=>jd(k,a))?s.push(a):r.push(a));const b=e.matched[d];b&&(n.matched.find(k=>jd(k,b))||c.push(b))}return[r,s,c]}function Dl(){return xn(hv)}function e4(e){return xn(Z0)}const t4="modulepreload",n4=function(e){return"/fahrrad_kilometer_tracker/"+e},WS={},Yu=function(n,r,s){let c=Promise.resolve();if(r&&r.length>0){let d=function(k){return Promise.all(k.map(S=>Promise.resolve(S).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),b=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));c=d(r.map(k=>{if(k=n4(k),k in WS)return;WS[k]=!0;const S=k.endsWith(".css"),T=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${k}"]${T}`))return;const A=document.createElement("link");if(A.rel=S?"stylesheet":t4,S||(A.as="script"),A.crossOrigin="",A.href=k,b&&A.setAttribute("nonce",b),document.head.appendChild(A),S)return new Promise((P,R)=>{A.addEventListener("load",P),A.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${k}`)))})}))}function f(d){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=d,window.dispatchEvent(a),!a.defaultPrevented)throw d}return c.then(d=>{for(const a of d||[])a.status==="rejected"&&f(a.reason);return n().catch(f)})},i4=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Yu(async()=>{const{default:s}=await Promise.resolve().then(()=>th);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)};class K0 extends Error{constructor(n,r="FunctionsError",s){super(n),this.name=r,this.context=s}}class r4 extends K0{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class a4 extends K0{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class s4 extends K0{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var yb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yb||(yb={}));var o4=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};class l4{constructor(n,{headers:r={},customFetch:s,region:c=yb.Any}={}){this.url=n,this.headers=r,this.region=c,this.fetch=i4(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var s;return o4(this,void 0,void 0,function*(){try{const{headers:c,method:f,body:d}=r;let a={},{region:b}=r;b||(b=this.region),b&&b!=="any"&&(a["x-region"]=b);let k;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",k=d):typeof d=="string"?(a["Content-Type"]="text/plain",k=d):typeof FormData<"u"&&d instanceof FormData?k=d:(a["Content-Type"]="application/json",k=JSON.stringify(d)));const S=yield this.fetch(`${this.url}/${n}`,{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),c),body:k}).catch(R=>{throw new r4(R)}),T=S.headers.get("x-relay-error");if(T&&T==="true")throw new a4(S);if(!S.ok)throw new s4(S);let A=((s=S.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),P;return A==="application/json"?P=yield S.json():A==="application/octet-stream"?P=yield S.blob():A==="text/event-stream"?P=S:A==="multipart/form-data"?P=yield S.formData():P=yield S.text(),{data:P,error:null}}catch(c){return{data:null,error:c}}})}}function CI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u4(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),r}var Dr={},cd={},dd={},hd={},fd={},md={},c4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ud=c4();const d4=Ud.fetch,TI=Ud.fetch.bind(Ud),PI=Ud.Headers,h4=Ud.Request,f4=Ud.Response,th=Object.freeze(Object.defineProperty({__proto__:null,Headers:PI,Request:h4,Response:f4,default:TI,fetch:d4},Symbol.toStringTag,{value:"Module"})),m4=u4(th);var Wp={},ZS;function II(){if(ZS)return Wp;ZS=1,Object.defineProperty(Wp,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Wp.default=e,Wp}var KS;function AI(){if(KS)return md;KS=1;var e=md&&md.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(md,"__esModule",{value:!0});const n=e(m4),r=e(II());class s{constructor(f){this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=f.headers,this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=f.shouldThrowOnError,this.signal=f.signal,this.isMaybeSingle=f.isMaybeSingle,f.fetch?this.fetch=f.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,d){return this.headers=Object.assign({},this.headers),this.headers[f]=d,this}then(f,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let b=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async k=>{var S,T,A;let P=null,R=null,B=null,L=k.status,$=k.statusText;if(k.ok){if(this.method!=="HEAD"){const ee=await k.text();ee===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?R=ee:R=JSON.parse(ee))}const q=(S=this.headers.Prefer)===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),H=(T=k.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");q&&H&&H.length>1&&(B=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(P={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,B=null,L=406,$="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const q=await k.text();try{P=JSON.parse(q),Array.isArray(P)&&k.status===404&&(R=[],P=null,L=200,$="OK")}catch{k.status===404&&q===""?(L=204,$="No Content"):P={message:q}}if(P&&this.isMaybeSingle&&(!((A=P==null?void 0:P.details)===null||A===void 0)&&A.includes("0 rows"))&&(P=null,L=200,$="OK"),P&&this.shouldThrowOnError)throw new r.default(P)}return{error:P,data:R,count:B,status:L,statusText:$}});return this.shouldThrowOnError||(b=b.catch(k=>{var S,T,A;return{error:{message:`${(S=k==null?void 0:k.name)!==null&&S!==void 0?S:"FetchError"}: ${k==null?void 0:k.message}`,details:`${(T=k==null?void 0:k.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${(A=k==null?void 0:k.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),b.then(f,d)}returns(){return this}overrideTypes(){return this}}return md.default=s,md}var YS;function EI(){if(YS)return fd;YS=1;var e=fd&&fd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fd,"__esModule",{value:!0});const n=e(AI());class r extends n.default{select(c){let f=!1;const d=(c??"*").split("").map(a=>/\s/.test(a)&&!f?"":(a==='"'&&(f=!f),a)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(c,{ascending:f=!0,nullsFirst:d,foreignTable:a,referencedTable:b=a}={}){const k=b?`${b}.order`:"order",S=this.url.searchParams.get(k);return this.url.searchParams.set(k,`${S?`${S},`:""}${c}.${f?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:f,referencedTable:d=f}={}){const a=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(a,`${c}`),this}range(c,f,{foreignTable:d,referencedTable:a=d}={}){const b=typeof a>"u"?"offset":`${a}.offset`,k=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(b,`${c}`),this.url.searchParams.set(k,`${f-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:c=!1,verbose:f=!1,settings:d=!1,buffers:a=!1,wal:b=!1,format:k="text"}={}){var S;const T=[c?"analyze":null,f?"verbose":null,d?"settings":null,a?"buffers":null,b?"wal":null].filter(Boolean).join("|"),A=(S=this.headers.Accept)!==null&&S!==void 0?S:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${k}; for="${A}"; options=${T};`,k==="json"?this:this}rollback(){var c;return((c=this.headers.Prefer)!==null&&c!==void 0?c:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return fd.default=r,fd}var XS;function Y0(){if(XS)return hd;XS=1;var e=hd&&hd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hd,"__esModule",{value:!0});const n=e(EI());class r extends n.default{eq(c,f){return this.url.searchParams.append(c,`eq.${f}`),this}neq(c,f){return this.url.searchParams.append(c,`neq.${f}`),this}gt(c,f){return this.url.searchParams.append(c,`gt.${f}`),this}gte(c,f){return this.url.searchParams.append(c,`gte.${f}`),this}lt(c,f){return this.url.searchParams.append(c,`lt.${f}`),this}lte(c,f){return this.url.searchParams.append(c,`lte.${f}`),this}like(c,f){return this.url.searchParams.append(c,`like.${f}`),this}likeAllOf(c,f){return this.url.searchParams.append(c,`like(all).{${f.join(",")}}`),this}likeAnyOf(c,f){return this.url.searchParams.append(c,`like(any).{${f.join(",")}}`),this}ilike(c,f){return this.url.searchParams.append(c,`ilike.${f}`),this}ilikeAllOf(c,f){return this.url.searchParams.append(c,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(c,f){return this.url.searchParams.append(c,`ilike(any).{${f.join(",")}}`),this}is(c,f){return this.url.searchParams.append(c,`is.${f}`),this}in(c,f){const d=Array.from(new Set(f)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(c,`in.(${d})`),this}contains(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cs.{${f.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(f)}`),this}containedBy(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cd.{${f.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(f)}`),this}rangeGt(c,f){return this.url.searchParams.append(c,`sr.${f}`),this}rangeGte(c,f){return this.url.searchParams.append(c,`nxl.${f}`),this}rangeLt(c,f){return this.url.searchParams.append(c,`sl.${f}`),this}rangeLte(c,f){return this.url.searchParams.append(c,`nxr.${f}`),this}rangeAdjacent(c,f){return this.url.searchParams.append(c,`adj.${f}`),this}overlaps(c,f){return typeof f=="string"?this.url.searchParams.append(c,`ov.${f}`):this.url.searchParams.append(c,`ov.{${f.join(",")}}`),this}textSearch(c,f,{config:d,type:a}={}){let b="";a==="plain"?b="pl":a==="phrase"?b="ph":a==="websearch"&&(b="w");const k=d===void 0?"":`(${d})`;return this.url.searchParams.append(c,`${b}fts${k}.${f}`),this}match(c){return Object.entries(c).forEach(([f,d])=>{this.url.searchParams.append(f,`eq.${d}`)}),this}not(c,f,d){return this.url.searchParams.append(c,`not.${f}.${d}`),this}or(c,{foreignTable:f,referencedTable:d=f}={}){const a=d?`${d}.or`:"or";return this.url.searchParams.append(a,`(${c})`),this}filter(c,f,d){return this.url.searchParams.append(c,`${f}.${d}`),this}}return hd.default=r,hd}var JS;function MI(){if(JS)return dd;JS=1;var e=dd&&dd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dd,"__esModule",{value:!0});const n=e(Y0());class r{constructor(c,{headers:f={},schema:d,fetch:a}){this.url=c,this.headers=f,this.schema=d,this.fetch=a}select(c,{head:f=!1,count:d}={}){const a=f?"HEAD":"GET";let b=!1;const k=(c??"*").split("").map(S=>/\s/.test(S)&&!b?"":(S==='"'&&(b=!b),S)).join("");return this.url.searchParams.set("select",k),d&&(this.headers.Prefer=`count=${d}`),new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(c,{count:f,defaultToNull:d=!0}={}){const a="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),f&&b.push(`count=${f}`),d||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(c)){const k=c.reduce((S,T)=>S.concat(Object.keys(T)),[]);if(k.length>0){const S=[...new Set(k)].map(T=>`"${T}"`);this.url.searchParams.set("columns",S.join(","))}}return new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}upsert(c,{onConflict:f,ignoreDuplicates:d=!1,count:a,defaultToNull:b=!0}={}){const k="POST",S=[`resolution=${d?"ignore":"merge"}-duplicates`];if(f!==void 0&&this.url.searchParams.set("on_conflict",f),this.headers.Prefer&&S.push(this.headers.Prefer),a&&S.push(`count=${a}`),b||S.push("missing=default"),this.headers.Prefer=S.join(","),Array.isArray(c)){const T=c.reduce((A,P)=>A.concat(Object.keys(P)),[]);if(T.length>0){const A=[...new Set(T)].map(P=>`"${P}"`);this.url.searchParams.set("columns",A.join(","))}}return new n.default({method:k,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}update(c,{count:f}={}){const d="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),f&&a.push(`count=${f}`),this.headers.Prefer=a.join(","),new n.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}delete({count:c}={}){const f="DELETE",d=[];return c&&d.push(`count=${c}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return dd.default=r,dd}var yf={},bf={},QS;function p4(){return QS||(QS=1,Object.defineProperty(bf,"__esModule",{value:!0}),bf.version=void 0,bf.version="0.0.0-automated"),bf}var ek;function g4(){if(ek)return yf;ek=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.DEFAULT_HEADERS=void 0;const e=p4();return yf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},yf}var tk;function v4(){if(tk)return cd;tk=1;var e=cd&&cd.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(cd,"__esModule",{value:!0});const n=e(MI()),r=e(Y0()),s=g4();class c{constructor(d,{headers:a={},schema:b,fetch:k}={}){this.url=d,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),a),this.schemaName=b,this.fetch=k}from(d){const a=new URL(`${this.url}/${d}`);return new n.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new c(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,a={},{head:b=!1,get:k=!1,count:S}={}){let T;const A=new URL(`${this.url}/rpc/${d}`);let P;b||k?(T=b?"HEAD":"GET",Object.entries(a).filter(([B,L])=>L!==void 0).map(([B,L])=>[B,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([B,L])=>{A.searchParams.append(B,L)})):(T="POST",P=a);const R=Object.assign({},this.headers);return S&&(R.Prefer=`count=${S}`),new r.default({method:T,url:A,headers:R,schema:this.schemaName,body:P,fetch:this.fetch,allowEmpty:!1})}}return cd.default=c,cd}var nk;function _4(){if(nk)return Dr;nk=1;var e=Dr&&Dr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.PostgrestError=Dr.PostgrestBuilder=Dr.PostgrestTransformBuilder=Dr.PostgrestFilterBuilder=Dr.PostgrestQueryBuilder=Dr.PostgrestClient=void 0;const n=e(v4());Dr.PostgrestClient=n.default;const r=e(MI());Dr.PostgrestQueryBuilder=r.default;const s=e(Y0());Dr.PostgrestFilterBuilder=s.default;const c=e(EI());Dr.PostgrestTransformBuilder=c.default;const f=e(AI());Dr.PostgrestBuilder=f.default;const d=e(II());return Dr.PostgrestError=d.default,Dr.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:f.default,PostgrestError:d.default},Dr}var y4=_4();const b4=CI(y4),{PostgrestClient:x4,PostgrestQueryBuilder:e6,PostgrestFilterBuilder:t6,PostgrestTransformBuilder:n6,PostgrestBuilder:i6,PostgrestError:r6}=b4;let bb;typeof window>"u"?bb=require("ws"):bb=window.WebSocket;const w4="2.11.10",S4={"X-Client-Info":`realtime-js/${w4}`},k4="1.0.0",DI=1e4,C4=1e3;var Ed;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ed||(Ed={}));var ma;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ma||(ma={}));var ms;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ms||(ms={}));var xb;(function(e){e.websocket="websocket"})(xb||(xb={}));var Lu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Lu||(Lu={}));class T4{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),s=new TextDecoder;return this._decodeBroadcast(n,r,s)}_decodeBroadcast(n,r,s){const c=r.getUint8(1),f=r.getUint8(2);let d=this.HEADER_LENGTH+2;const a=s.decode(n.slice(d,d+c));d=d+c;const b=s.decode(n.slice(d,d+f));d=d+f;const k=JSON.parse(s.decode(n.slice(d,n.byteLength)));return{ref:null,topic:a,event:b,payload:k}}}class RI{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ti;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ti||(Ti={}));const ik=(e,n,r={})=>{var s;const c=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(n).reduce((f,d)=>(f[d]=P4(d,e,n,c),f),{})},P4=(e,n,r,s)=>{const c=n.find(a=>a.name===e),f=c==null?void 0:c.type,d=r[e];return f&&!s.includes(f)?LI(f,d):wb(d)},LI=(e,n)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return M4(n,r)}switch(e){case Ti.bool:return I4(n);case Ti.float4:case Ti.float8:case Ti.int2:case Ti.int4:case Ti.int8:case Ti.numeric:case Ti.oid:return A4(n);case Ti.json:case Ti.jsonb:return E4(n);case Ti.timestamp:return D4(n);case Ti.abstime:case Ti.date:case Ti.daterange:case Ti.int4range:case Ti.int8range:case Ti.money:case Ti.reltime:case Ti.text:case Ti.time:case Ti.timestamptz:case Ti.timetz:case Ti.tsrange:case Ti.tstzrange:return wb(n);default:return wb(n)}},wb=e=>e,I4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},A4=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},E4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(n){return console.log(`JSON parse error: ${n}`),e}return e},M4=(e,n)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let f;const d=e.slice(1,r);try{f=JSON.parse("["+d+"]")}catch{f=d?d.split(","):[]}return f.map(a=>LI(n,a))}return e},D4=e=>typeof e=="string"?e.replace(" ","T"):e,zI=e=>{let n=e;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class ay{constructor(n,r,s={},c=DI){this.channel=n,this.event=r,this.payload=s,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var s;return this._hasReceived(n)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var rk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(rk||(rk={}));class Lf{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},c=>{const{onJoin:f,onLeave:d,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lf.syncState(this.state,c,f,d),this.pendingDiffs.forEach(b=>{this.state=Lf.syncDiff(this.state,b,f,d)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},c=>{const{onJoin:f,onLeave:d,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Lf.syncDiff(this.state,c,f,d),a())}),this.onJoin((c,f,d)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:f,newPresences:d})}),this.onLeave((c,f,d)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:f,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,s,c){const f=this.cloneDeep(n),d=this.transformState(r),a={},b={};return this.map(f,(k,S)=>{d[k]||(b[k]=S)}),this.map(d,(k,S)=>{const T=f[k];if(T){const A=S.map(L=>L.presence_ref),P=T.map(L=>L.presence_ref),R=S.filter(L=>P.indexOf(L.presence_ref)<0),B=T.filter(L=>A.indexOf(L.presence_ref)<0);R.length>0&&(a[k]=R),B.length>0&&(b[k]=B)}else a[k]=S}),this.syncDiff(f,{joins:a,leaves:b},s,c)}static syncDiff(n,r,s,c){const{joins:f,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),c||(c=()=>{}),this.map(f,(a,b)=>{var k;const S=(k=n[a])!==null&&k!==void 0?k:[];if(n[a]=this.cloneDeep(b),S.length>0){const T=n[a].map(P=>P.presence_ref),A=S.filter(P=>T.indexOf(P.presence_ref)<0);n[a].unshift(...A)}s(a,S,b)}),this.map(d,(a,b)=>{let k=n[a];if(!k)return;const S=b.map(T=>T.presence_ref);k=k.filter(T=>S.indexOf(T.presence_ref)<0),n[a]=k,c(a,k,b),k.length===0&&delete n[a]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(s=>r(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,s)=>{const c=n[s];return"metas"in c?r[s]=c.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):r[s]=c,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ak;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ak||(ak={}));var sk;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(sk||(sk={}));var _o;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(_o||(_o={}));class X0{constructor(n,r={config:{}},s){this.topic=n,this.params=r,this.socket=s,this.bindings={},this.state=ma.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ay(this,ms.join,this.params,this.timeout),this.rejoinTimer=new RI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ma.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ma.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ma.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ma.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ms.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Lf(this),this.broadcastEndpointURL=zI(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,r=this.timeout){var s,c;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:f,presence:d,private:a}}=this.params;this._onError(S=>n==null?void 0:n(_o.CHANNEL_ERROR,S)),this._onClose(()=>n==null?void 0:n(_o.CLOSED));const b={},k={broadcast:f,presence:d,postgres_changes:(c=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(S=>S.filter))!==null&&c!==void 0?c:[],private:a};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:k},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var T;if(this.socket.setAuth(),S===void 0){n==null||n(_o.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,P=(T=A==null?void 0:A.length)!==null&&T!==void 0?T:0,R=[];for(let B=0;B<P;B++){const L=A[B],{filter:{event:$,schema:j,table:q,filter:H}}=L,ee=S&&S[B];if(ee&&ee.event===$&&ee.schema===j&&ee.table===q&&ee.filter===H)R.push(Object.assign(Object.assign({},L),{id:ee.id}));else{this.unsubscribe(),this.state=ma.errored,n==null||n(_o.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,n&&n(_o.SUBSCRIBED);return}}).receive("error",S=>{this.state=ma.errored,n==null||n(_o.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(_o.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,s){return this._on(n,r,s)}async send(n,r={}){var s,c;if(!this._canPush()&&n.type==="broadcast"){const{event:f,payload:d}=n,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:d,private:this.private}]})};try{const k=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((c=k.body)===null||c===void 0?void 0:c.cancel()),k.ok?"ok":"error"}catch(k){return k.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var d,a,b;const k=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((b=(a=(d=this.params)===null||d===void 0?void 0:d.config)===null||a===void 0?void 0:a.broadcast)===null||b===void 0)&&b.ack)&&f("ok"),k.receive("ok",()=>f("ok")),k.receive("error",()=>f("error")),k.receive("timeout",()=>f("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ma.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ms.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const c=new ay(this,ms.leave,{},n);c.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),c.send(),this._canPush()||c.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(n,r,s){const c=new AbortController,f=setTimeout(()=>c.abort(),s),d=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(f),d}_push(n,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new ay(this,n,r,s);return this._canPush()?c.send():(c.startTimeout(),this.pushBuffer.push(c)),c}_onMessage(n,r,s){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,s){var c,f;const d=n.toLocaleLowerCase(),{close:a,error:b,leave:k,join:S}=ms;if(s&&[a,b,k,S].indexOf(d)>=0&&s!==this._joinRef())return;let A=this._onMessage(d,r,s);if(r&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(P=>{var R,B,L;return((R=P.filter)===null||R===void 0?void 0:R.event)==="*"||((L=(B=P.filter)===null||B===void 0?void 0:B.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===d}).map(P=>P.callback(A,s)):(f=this.bindings[d])===null||f===void 0||f.filter(P=>{var R,B,L,$,j,q;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in P){const H=P.id,ee=(R=P.filter)===null||R===void 0?void 0:R.event;return H&&((B=r.ids)===null||B===void 0?void 0:B.includes(H))&&(ee==="*"||(ee==null?void 0:ee.toLocaleLowerCase())===((L=r.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const H=(j=($=P==null?void 0:P.filter)===null||$===void 0?void 0:$.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return H==="*"||H===((q=r==null?void 0:r.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===d}).map(P=>{if(typeof A=="object"&&"ids"in A){const R=A.data,{schema:B,table:L,commit_timestamp:$,type:j,errors:q}=R;A=Object.assign(Object.assign({},{schema:B,table:L,commit_timestamp:$,eventType:j,new:{},old:{},errors:q}),this._getPayloadRecords(R))}P.callback(A,s)})}_isClosed(){return this.state===ma.closed}_isJoined(){return this.state===ma.joined}_isJoining(){return this.state===ma.joining}_isLeaving(){return this.state===ma.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,s){const c=n.toLocaleLowerCase(),f={type:c,filter:r,callback:s};return this.bindings[c]?this.bindings[c].push(f):this.bindings[c]=[f],this}_off(n,r){const s=n.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(c=>{var f;return!(((f=c.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===s&&X0.isEqual(c.filter,r))}),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const s in n)if(n[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ms.close,{},n)}_onError(n){this._on(ms.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ma.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=ik(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=ik(n.columns,n.old_record)),r}}const ok=()=>{},R4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class L4{constructor(n,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=S4,this.params={},this.timeout=DI,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ok,this.ref=0,this.logger=ok,this.conn=null,this.sendBuffer=[],this.serializer=new T4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=f=>{let d;return f?d=f:typeof fetch>"u"?d=(...a)=>Yu(async()=>{const{default:b}=await Promise.resolve().then(()=>th);return{default:b}},void 0).then(({default:b})=>b(...a)):d=fetch,(...a)=>d(...a)},this.endPoint=`${n}/${xb.websocket}`,this.httpEndpoint=zI(n),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const c=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(c&&(this.accessTokenValue=c,this.apiKey=c),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:f=>[1e3,2e3,5e3,1e4][f-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(f,d)=>d(JSON.stringify(f)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new RI(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bb),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new z4(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:k4}))}disconnect(n,r){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==n._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,s){this.logger(n,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ed.connecting:return Lu.Connecting;case Ed.open:return Lu.Open;case Ed.closing:return Lu.Closing;default:return Lu.Closed}}isConnected(){return this.connectionState()===Lu.Open}channel(n,r={config:{}}){const s=`realtime:${n}`,c=this.getChannels().find(f=>f.topic===s);if(c)return c;{const f=new X0(`realtime:${n}`,r,this);return this.channels.push(f),f}}push(n){const{topic:r,event:s,payload:c,ref:f}=n,d=()=>{this.encode(n,a=>{var b;(b=this.conn)===null||b===void 0||b.send(a)})};this.log("push",`${r} ${s} (${f})`,c),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){let r=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(ms.access_token,{access_token:r})}))}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(n=this.conn)===null||n===void 0||n.close(C4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,r=>{let{topic:s,event:c,payload:f,ref:d}=r;s==="phoenix"&&c==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${f.status||""} ${s} ${c} ${d&&"("+d+")"||""}`,f),Array.from(this.channels).filter(a=>a._isMember(s)).forEach(a=>a._trigger(c,f,d)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(n=>n())}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(n))}_onConnError(n){this.log("transport",n.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(ms.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const s=n.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${n}${s}${c}`}_workerObjectUrl(n){let r;if(n)r=n;else{const s=new Blob([R4],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class z4{constructor(n,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ed.connecting,this.send=()=>{},this.url=null,this.url=n,this.close=s.close}}class J0 extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Rr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class V4 extends J0{constructor(n,r){super(n),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Sb extends J0{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var B4=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};const VI=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Yu(async()=>{const{default:s}=await Promise.resolve().then(()=>th);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},O4=()=>B4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yu(()=>Promise.resolve().then(()=>th),void 0)).Response:Response}),kb=e=>{if(Array.isArray(e))return e.map(r=>kb(r));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([r,s])=>{const c=r.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));n[c]=kb(s)}),n};var lc=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};const sy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),F4=(e,n,r)=>lc(void 0,void 0,void 0,function*(){const s=yield O4();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(c=>{n(new V4(sy(c),e.status||500))}).catch(c=>{n(new Sb(sy(c),c))}):n(new Sb(sy(e),e))}),$4=(e,n,r,s)=>{const c={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),s&&(c.body=JSON.stringify(s)),Object.assign(Object.assign({},c),r))};function Cm(e,n,r,s,c,f){return lc(this,void 0,void 0,function*(){return new Promise((d,a)=>{e(r,$4(n,s,c,f)).then(b=>{if(!b.ok)throw b;return s!=null&&s.noResolveJson?b:b.json()}).then(b=>d(b)).catch(b=>F4(b,a,s))})})}function Pg(e,n,r,s){return lc(this,void 0,void 0,function*(){return Cm(e,"GET",n,r,s)})}function yl(e,n,r,s,c){return lc(this,void 0,void 0,function*(){return Cm(e,"POST",n,s,c,r)})}function j4(e,n,r,s,c){return lc(this,void 0,void 0,function*(){return Cm(e,"PUT",n,s,c,r)})}function N4(e,n,r,s){return lc(this,void 0,void 0,function*(){return Cm(e,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function BI(e,n,r,s,c){return lc(this,void 0,void 0,function*(){return Cm(e,"DELETE",n,s,c,r)})}var Ca=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};const U4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class G4{constructor(n,r={},s,c){this.url=n,this.headers=r,this.bucketId=s,this.fetch=VI(c)}uploadOrUpdate(n,r,s,c){return Ca(this,void 0,void 0,function*(){try{let f;const d=Object.assign(Object.assign({},lk),c);let a=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const b=d.metadata;typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),b&&f.append("metadata",this.encodeMetadata(b)),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",d.cacheControl),b&&f.append("metadata",this.encodeMetadata(b))):(f=s,a["cache-control"]=`max-age=${d.cacheControl}`,a["content-type"]=d.contentType,b&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),c!=null&&c.headers&&(a=Object.assign(Object.assign({},a),c.headers));const k=this._removeEmptyFolders(r),S=this._getFinalPath(k),T=yield this.fetch(`${this.url}/object/${S}`,Object.assign({method:n,body:f,headers:a},d!=null&&d.duplex?{duplex:d.duplex}:{})),A=yield T.json();return T.ok?{data:{path:k,id:A.Id,fullPath:A.Key},error:null}:{data:null,error:A}}catch(f){if(Rr(f))return{data:null,error:f};throw f}})}upload(n,r,s){return Ca(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,s)})}uploadToSignedUrl(n,r,s,c){return Ca(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(n),d=this._getFinalPath(f),a=new URL(this.url+`/object/upload/sign/${d}`);a.searchParams.set("token",r);try{let b;const k=Object.assign({upsert:lk.upsert},c),S=Object.assign(Object.assign({},this.headers),{"x-upsert":String(k.upsert)});typeof Blob<"u"&&s instanceof Blob?(b=new FormData,b.append("cacheControl",k.cacheControl),b.append("",s)):typeof FormData<"u"&&s instanceof FormData?(b=s,b.append("cacheControl",k.cacheControl)):(b=s,S["cache-control"]=`max-age=${k.cacheControl}`,S["content-type"]=k.contentType);const T=yield this.fetch(a.toString(),{method:"PUT",body:b,headers:S}),A=yield T.json();return T.ok?{data:{path:f,fullPath:A.Key},error:null}:{data:null,error:A}}catch(b){if(Rr(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(n,r){return Ca(this,void 0,void 0,function*(){try{let s=this._getFinalPath(n);const c=Object.assign({},this.headers);r!=null&&r.upsert&&(c["x-upsert"]="true");const f=yield yl(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:c}),d=new URL(this.url+f.url),a=d.searchParams.get("token");if(!a)throw new J0("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:a},error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}update(n,r,s){return Ca(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,s)})}move(n,r,s){return Ca(this,void 0,void 0,function*(){try{return{data:yield yl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}copy(n,r,s){return Ca(this,void 0,void 0,function*(){try{return{data:{path:(yield yl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}createSignedUrl(n,r,s){return Ca(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),f=yield yl(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${d}`)},{data:f,error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}createSignedUrls(n,r,s){return Ca(this,void 0,void 0,function*(){try{const c=yield yl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),f=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:c.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${f}`):null})),error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}download(n,r){return Ca(this,void 0,void 0,function*(){const c=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=f?`?${f}`:"";try{const a=this._getFinalPath(n);return{data:yield(yield Pg(this.fetch,`${this.url}/${c}/${a}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Rr(a))return{data:null,error:a};throw a}})}info(n){return Ca(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const s=yield Pg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:kb(s),error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}exists(n){return Ca(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield N4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Rr(s)&&s instanceof Sb){const c=s.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:s}}throw s}})}getPublicUrl(n,r){const s=this._getFinalPath(n),c=[],f=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";f!==""&&c.push(f);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",b=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});b!==""&&c.push(b);let k=c.join("&");return k!==""&&(k=`?${k}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${k}`)}}}remove(n){return Ca(this,void 0,void 0,function*(){try{return{data:yield BI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}list(n,r,s){return Ca(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},U4),r),{prefix:n||""});return{data:yield yl(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},s),error:null}}catch(c){if(Rr(c))return{data:null,error:c};throw c}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const q4="2.7.1",H4={"X-Client-Info":`storage-js/${q4}`};var pd=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};class W4{constructor(n,r={},s){this.url=n,this.headers=Object.assign(Object.assign({},H4),r),this.fetch=VI(s)}listBuckets(){return pd(this,void 0,void 0,function*(){try{return{data:yield Pg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Rr(n))return{data:null,error:n};throw n}})}getBucket(n){return pd(this,void 0,void 0,function*(){try{return{data:yield Pg(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return pd(this,void 0,void 0,function*(){try{return{data:yield yl(this.fetch,`${this.url}/bucket`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}updateBucket(n,r){return pd(this,void 0,void 0,function*(){try{return{data:yield j4(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Rr(s))return{data:null,error:s};throw s}})}emptyBucket(n){return pd(this,void 0,void 0,function*(){try{return{data:yield yl(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}deleteBucket(n){return pd(this,void 0,void 0,function*(){try{return{data:yield BI(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(Rr(r))return{data:null,error:r};throw r}})}}class Z4 extends W4{constructor(n,r={},s){super(n,r,s)}from(n){return new G4(this.url,this.headers,n,this.fetch)}}const K4="2.50.0";let Sf="";typeof Deno<"u"?Sf="deno":typeof document<"u"?Sf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sf="react-native":Sf="node";const Y4={"X-Client-Info":`supabase-js-${Sf}/${K4}`},X4={headers:Y4},J4={schema:"public"},Q4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ej={};var tj=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};const nj=e=>{let n;return e?n=e:typeof fetch>"u"?n=TI:n=fetch,(...r)=>n(...r)},ij=()=>typeof Headers>"u"?PI:Headers,rj=(e,n,r)=>{const s=nj(r),c=ij();return(f,d)=>tj(void 0,void 0,void 0,function*(){var a;const b=(a=yield n())!==null&&a!==void 0?a:e;let k=new c(d==null?void 0:d.headers);return k.has("apikey")||k.set("apikey",e),k.has("Authorization")||k.set("Authorization",`Bearer ${b}`),s(f,Object.assign(Object.assign({},d),{headers:k}))})};var aj=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};function sj(e){return e.endsWith("/")?e:e+"/"}function oj(e,n){var r,s;const{db:c,auth:f,realtime:d,global:a}=e,{db:b,auth:k,realtime:S,global:T}=n,A={db:Object.assign(Object.assign({},b),c),auth:Object.assign(Object.assign({},k),f),realtime:Object.assign(Object.assign({},S),d),global:Object.assign(Object.assign(Object.assign({},T),a),{headers:Object.assign(Object.assign({},(r=T==null?void 0:T.headers)!==null&&r!==void 0?r:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>aj(this,void 0,void 0,function*(){return""})};return e.accessToken?A.accessToken=e.accessToken:delete A.accessToken,A}const OI="2.70.0",wd=30*1e3,Cb=3,oy=Cb*wd,lj="http://localhost:9999",uj="supabase.auth.token",cj={"X-Client-Info":`gotrue-js/${OI}`},Tb="X-Supabase-Api-Version",FI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hj=6e5;class Q0 extends Error{constructor(n,r,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function jn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class fj extends Q0{constructor(n,r,s){super(n,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function mj(e){return jn(e)&&e.name==="AuthApiError"}class $I extends Q0{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Rl extends Q0{constructor(n,r,s,c){super(n,s,c),this.name=r,this.status=s}}class ml extends Rl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pj(e){return jn(e)&&e.name==="AuthSessionMissingError"}class Zp extends Rl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kp extends Rl{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Yp extends Rl{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gj(e){return jn(e)&&e.name==="AuthImplicitGrantRedirectError"}class uk extends Rl{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pb extends Rl{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function ly(e){return jn(e)&&e.name==="AuthRetryableFetchError"}class ck extends Rl{constructor(n,r,s){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class zf extends Rl{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ig="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dk=` 	
\r=`.split(""),vj=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<dk.length;n+=1)e[dk[n].charCodeAt(0)]=-2;for(let n=0;n<Ig.length;n+=1)e[Ig[n].charCodeAt(0)]=n;return e})();function hk(e,n,r){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(Ig[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(Ig[s]),n.queuedBits-=6}}function jI(e,n,r){const s=vj[e];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fk(e){const n=[],r=d=>{n.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},f=d=>{bj(d,s,r)};for(let d=0;d<e.length;d+=1)jI(e.charCodeAt(d),c,f);return n.join("")}function _j(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function yj(e,n){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const c=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}_j(s,n)}}function bj(e,n,r){if(n.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function xj(e){const n=[],r={queue:0,queuedBits:0},s=c=>{n.push(c)};for(let c=0;c<e.length;c+=1)jI(e.charCodeAt(c),r,s);return new Uint8Array(n)}function wj(e){const n=[];return yj(e,r=>n.push(r)),new Uint8Array(n)}function Sj(e){const n=[],r={queue:0,queuedBits:0},s=c=>{n.push(c)};return e.forEach(c=>hk(c,r,s)),hk(null,r,s),n.join("")}function kj(e){return Math.round(Date.now()/1e3)+e}function Cj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=Math.random()*16|0;return(e=="x"?n:n&3|8).toString(16)})}const fs=()=>typeof window<"u"&&typeof document<"u",Au={tested:!1,writable:!1},Vf=()=>{if(!fs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Au.tested)return Au.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Au.tested=!0,Au.writable=!0}catch{Au.tested=!0,Au.writable=!1}return Au.writable};function Tj(e){const n={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,f)=>{n[f]=c})}catch{}return r.searchParams.forEach((s,c)=>{n[c]=s}),n}const NI=e=>{let n;return e?n=e:typeof fetch>"u"?n=(...r)=>Yu(async()=>{const{default:s}=await Promise.resolve().then(()=>th);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},Pj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",UI=async(e,n,r)=>{await e.setItem(n,JSON.stringify(r))},Xp=async(e,n)=>{const r=await e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Jp=async(e,n)=>{await e.removeItem(n)};class fv{constructor(){this.promise=new fv.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}fv.promiseConstructor=Promise;function uy(e){const n=e.split(".");if(n.length!==3)throw new zf("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!dj.test(n[s]))throw new zf("JWT not in base64url format");return{header:JSON.parse(fk(n[0])),payload:JSON.parse(fk(n[1])),signature:xj(n[2]),raw:{header:n[0],payload:n[1]}}}async function Ij(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function Aj(e,n){return new Promise((s,c)=>{(async()=>{for(let f=0;f<1/0;f++)try{const d=await e(f);if(!n(f,null,d)){s(d);return}}catch(d){if(!n(f,d)){c(d);return}}})()})}function Ej(e){return("0"+e.toString(16)).substr(-2)}function Mj(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let c="";for(let f=0;f<56;f++)c+=r.charAt(Math.floor(Math.random()*s));return c}return crypto.getRandomValues(n),Array.from(n,Ej).join("")}async function Dj(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(s);return Array.from(c).map(f=>String.fromCharCode(f)).join("")}async function Rj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Dj(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gd(e,n,r=!1){const s=Mj();let c=s;r&&(c+="/PASSWORD_RECOVERY"),await UI(e,`${n}-code-verifier`,c);const f=await Rj(s);return[f,s===f?"plain":"s256"]}const Lj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zj(e){const n=e.headers.get(Tb);if(!n||!n.match(Lj))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Vj(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function Bj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Oj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vd(e){if(!Oj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Fj=function(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(r[s[c]]=e[s[c]]);return r};const Mu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$j=[502,503,504];async function mk(e){var n;if(!Pj(e))throw new Pb(Mu(e),0);if($j.includes(e.status))throw new Pb(Mu(e),e.status);let r;try{r=await e.json()}catch(f){throw new $I(Mu(f),f)}let s;const c=zj(e);if(c&&c.getTime()>=FI["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ck(Mu(r),e.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new ml}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((f,d)=>f&&typeof d=="string",!0))throw new ck(Mu(r),e.status,r.weak_password.reasons);throw new fj(Mu(r),e.status||500,s)}const jj=(e,n,r,s)=>{const c={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),c.body=JSON.stringify(s),Object.assign(Object.assign({},c),r))};async function Wn(e,n,r,s){var c;const f=Object.assign({},s==null?void 0:s.headers);f[Tb]||(f[Tb]=FI["2024-01-01"].name),s!=null&&s.jwt&&(f.Authorization=`Bearer ${s.jwt}`);const d=(c=s==null?void 0:s.query)!==null&&c!==void 0?c:{};s!=null&&s.redirectTo&&(d.redirect_to=s.redirectTo);const a=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",b=await Nj(e,n,r+a,{headers:f,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(b):{data:Object.assign({},b),error:null}}async function Nj(e,n,r,s,c,f){const d=jj(n,s,c,f);let a;try{a=await e(r,Object.assign({},d))}catch(b){throw console.error(b),new Pb(Mu(b),0)}if(a.ok||await mk(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(b){await mk(b)}}function go(e){var n;let r=null;Hj(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=kj(e.expires_in)));const s=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:r,user:s},error:null}}function pk(e){const n=go(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(n.data.weak_password=e.weak_password),n}function xl(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function Uj(e){return{data:e,error:null}}function Gj(e){const{action_link:n,email_otp:r,hashed_token:s,redirect_to:c,verification_type:f}=e,d=Fj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:n,email_otp:r,hashed_token:s,redirect_to:c,verification_type:f},b=Object.assign({},d);return{data:{properties:a,user:b},error:null}}function qj(e){return e}function Hj(e){return e.access_token&&e.refresh_token&&e.expires_in}const cy=["global","local","others"];var Wj=function(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(r[s[c]]=e[s[c]]);return r};class Zj{constructor({url:n="",headers:r={},fetch:s}){this.url=n,this.headers=r,this.fetch=NI(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r=cy[0]){if(cy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cy.join(", ")}`);try{return await Wn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(jn(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,r={}){try{return await Wn(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xl})}catch(s){if(jn(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:r}=n,s=Wj(n,["options"]),c=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(c.new_email=s==null?void 0:s.newEmail,delete c.newEmail),await Wn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Gj,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(jn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Wn(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:xl})}catch(r){if(jn(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,s,c,f,d,a,b;try{const k={nextPage:null,lastPage:0,total:0},S=await Wn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(f=(c=n==null?void 0:n.perPage)===null||c===void 0?void 0:c.toString())!==null&&f!==void 0?f:""},xform:qj});if(S.error)throw S.error;const T=await S.json(),A=(d=S.headers.get("x-total-count"))!==null&&d!==void 0?d:0,P=(b=(a=S.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&b!==void 0?b:[];return P.length>0&&(P.forEach(R=>{const B=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(R.split(";")[1].split("=")[1]);k[`${L}Page`]=B}),k.total=parseInt(A)),{data:Object.assign(Object.assign({},T),k),error:null}}catch(k){if(jn(k))return{data:{users:[]},error:k};throw k}}async getUserById(n){vd(n);try{return await Wn(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:xl})}catch(r){if(jn(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){vd(n);try{return await Wn(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:xl})}catch(s){if(jn(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,r=!1){vd(n);try{return await Wn(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:xl})}catch(s){if(jn(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){vd(n.userId);try{const{data:r,error:s}=await Wn(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:s}}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _deleteFactor(n){vd(n.userId),vd(n.id);try{return{data:await Wn(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}}}const Kj={getItem:e=>Vf()?globalThis.localStorage.getItem(e):null,setItem:(e,n)=>{Vf()&&globalThis.localStorage.setItem(e,n)},removeItem:e=>{Vf()&&globalThis.localStorage.removeItem(e)}};function gk(e={}){return{getItem:n=>e[n]||null,setItem:(n,r)=>{e[n]=r},removeItem:n=>{delete e[n]}}}function Yj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _d={debug:!!(globalThis&&Vf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GI extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Xj extends GI{}async function Jj(e,n,r){_d.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),_d.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async c=>{if(c){_d.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,c.name);try{return await r()}finally{_d.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,c.name)}}else{if(n===0)throw _d.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Xj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_d.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Yj();const Qj={url:lj,storageKey:uj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vk(e,n,r){return await r()}class om{constructor(n){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=om.nextInstanceID,om.nextInstanceID+=1,this.instanceID>0&&fs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},Qj),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Zj({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=NI(c.fetch),this.lock=c.lock||vk,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:fs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Jj:this.lock=vk,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?c.storage?this.storage=c.storage:Vf()?this.storage=Kj:(this.memoryStorage={},this.storage=gk(this.memoryStorage)):(this.memoryStorage={},this.storage=gk(this.memoryStorage)),fs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${OI}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Tj(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),fs()&&this.detectSessionInUrl&&s!=="none"){const{data:c,error:f}=await this._getSessionFromURL(r,s);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),gj(f)){const b=(n=f.details)===null||n===void 0?void 0:n.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:d,redirectType:a}=c;return this._debug("#_initialize()","detected session in URL",d,"redirect type",a),await this._saveSession(d),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return jn(r)?{error:r}:{error:new $I("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,s,c;try{const f=await Wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(c=n==null?void 0:n.options)===null||c===void 0?void 0:c.captchaToken}},xform:go}),{data:d,error:a}=f;if(a||!d)return{data:{user:null,session:null},error:a};const b=d.session,k=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:k,session:b},error:null}}catch(f){if(jn(f))return{data:{user:null,session:null},error:f};throw f}}async signUp(n){var r,s,c;try{let f;if("email"in n){const{email:S,password:T,options:A}=n;let P=null,R=null;this.flowType==="pkce"&&([P,R]=await gd(this.storage,this.storageKey)),f=await Wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:S,password:T,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:P,code_challenge_method:R},xform:go})}else if("phone"in n){const{phone:S,password:T,options:A}=n;f=await Wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:T,data:(s=A==null?void 0:A.data)!==null&&s!==void 0?s:{},channel:(c=A==null?void 0:A.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:go})}else throw new Kp("You must provide either an email or phone number and a password");const{data:d,error:a}=f;if(a||!d)return{data:{user:null,session:null},error:a};const b=d.session,k=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:k,session:b},error:null}}catch(f){if(jn(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithPassword(n){try{let r;if("email"in n){const{email:f,password:d,options:a}=n;r=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pk})}else if("phone"in n){const{phone:f,password:d,options:a}=n;r=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pk})}else throw new Kp("You must provide either an email or phone number and a password");const{data:s,error:c}=r;return c?{data:{user:null,session:null},error:c}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Zp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:c})}catch(r){if(jn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,s,c,f;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(f=n.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;if(r==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(n){var r,s,c,f,d,a,b,k,S,T,A,P;let R,B;if("message"in n)R=n.message,B=n.signature;else{const{chain:L,wallet:$,statement:j,options:q}=n;let H;if(fs())if(typeof $=="object")H=$;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))H=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=$}const ee=new URL((r=q==null?void 0:q.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in H&&H.signIn){const Q=await H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q==null?void 0:q.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),j?{statement:j}:null));let oe;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")oe=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)oe=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in oe&&"signature"in oe&&(typeof oe.signedMessage=="string"||oe.signedMessage instanceof Uint8Array)&&oe.signature instanceof Uint8Array)R=typeof oe.signedMessage=="string"?oe.signedMessage:new TextDecoder().decode(oe.signedMessage),B=oe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in H)||typeof H.signMessage!="function"||!("publicKey"in H)||typeof H!="object"||!H.publicKey||!("toBase58"in H.publicKey)||typeof H.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${ee.host} wants you to sign in with your Solana account:`,H.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(c=(s=q==null?void 0:q.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((f=q==null?void 0:q.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((d=q==null?void 0:q.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((a=q==null?void 0:q.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((b=q==null?void 0:q.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((k=q==null?void 0:q.signInWithSolana)===null||k===void 0)&&k.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((T=(S=q==null?void 0:q.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||T===void 0)&&T.length?["Resources",...q.signInWithSolana.resources.map(oe=>`- ${oe}`)]:[]].join(`
`);const Q=await H.signMessage(new TextEncoder().encode(R),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=Q}}try{const{data:L,error:$}=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:Sj(B)},!((A=n.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(P=n.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:go});if($)throw $;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new Zp}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:$})}catch(L){if(jn(L))return{data:{user:null,session:null},error:L};throw L}}async _exchangeCodeForSession(n){const r=await Xp(this.storage,`${this.storageKey}-code-verifier`),[s,c]=(r??"").split("/");try{const{data:f,error:d}=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:go});if(await Jp(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!f||!f.session||!f.user?{data:{user:null,session:null,redirectType:null},error:new Zp}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign(Object.assign({},f),{redirectType:c??null}),error:d})}catch(f){if(jn(f))return{data:{user:null,session:null,redirectType:null},error:f};throw f}}async signInWithIdToken(n){try{const{options:r,provider:s,token:c,access_token:f,nonce:d}=n,a=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:c,access_token:f,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:go}),{data:b,error:k}=a;return k?{data:{user:null,session:null},error:k}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Zp}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:k})}catch(r){if(jn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,s,c,f,d;try{if("email"in n){const{email:a,options:b}=n;let k=null,S=null;this.flowType==="pkce"&&([k,S]=await gd(this.storage,this.storageKey));const{error:T}=await Wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},create_user:(s=b==null?void 0:b.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:k,code_challenge_method:S},redirectTo:b==null?void 0:b.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in n){const{phone:a,options:b}=n,{data:k,error:S}=await Wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(c=b==null?void 0:b.data)!==null&&c!==void 0?c:{},create_user:(f=b==null?void 0:b.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(d=b==null?void 0:b.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:k==null?void 0:k.message_id},error:S}}throw new Kp("You must provide either an email or phone number.")}catch(a){if(jn(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(n){var r,s;try{let c,f;"options"in n&&(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo,f=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:a}=await Wn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:f}}),redirectTo:c,xform:go});if(a)throw a;if(!d)throw new Error("An error occurred on token verification.");const b=d.session,k=d.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:k,session:b},error:null}}catch(c){if(jn(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var r,s,c;try{let f=null,d=null;return this.flowType==="pkce"&&([f,d]=await gd(this.storage,this.storageKey)),await Wn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((c=n==null?void 0:n.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:d}),headers:this.headers,xform:Uj})}catch(f){if(jn(f))return{data:null,error:f};throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)throw s;if(!r)throw new ml;const{error:c}=await Wn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(jn(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:s,type:c,options:f}=n,{error:d}=await Wn(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in n){const{phone:s,type:c,options:f}=n,{data:d,error:a}=await Wn(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:a}}throw new Kp("You must provide either an email or phone number and a type")}catch(r){if(jn(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Xp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<oy:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.storage.isServer){let d=this.suppressGetSessionWarning;n=new Proxy(n,{get:(b,k,S)=>(!d&&k==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,k,S))})}return{data:{session:n},error:null}}const{session:c,error:f}=await this._callRefreshToken(n.refresh_token);return f?{data:{session:null},error:f}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:xl}):await this._useSession(async r=>{var s,c,f;const{data:d,error:a}=r;if(a)throw a;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ml}:await Wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0,xform:xl})})}catch(r){if(jn(r))return pj(r)&&(await this._removeSession(),await Jp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async s=>{const{data:c,error:f}=s;if(f)throw f;if(!c.session)throw new ml;const d=c.session;let a=null,b=null;this.flowType==="pkce"&&n.email!=null&&([a,b]=await gd(this.storage,this.storageKey));const{data:k,error:S}=await Wn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:a,code_challenge_method:b}),jwt:d.access_token,xform:xl});if(S)throw S;return d.user=k.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(jn(s))return{data:{user:null},error:s};throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new ml;const r=Date.now()/1e3;let s=r,c=!0,f=null;const{payload:d}=uy(n.access_token);if(d.exp&&(s=d.exp,c=s<=r),c){const{session:a,error:b}=await this._callRefreshToken(n.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!a)return{data:{user:null,session:null},error:null};f=a}else{const{data:a,error:b}=await this._getUser(n.access_token);if(b)throw b;f={access_token:n.access_token,refresh_token:n.refresh_token,user:a.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return{data:{user:f.user,session:f},error:null}}catch(r){if(jn(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var s;if(!n){const{data:d,error:a}=r;if(a)throw a;n=(s=d.session)!==null&&s!==void 0?s:void 0}if(!(n!=null&&n.refresh_token))throw new ml;const{session:c,error:f}=await this._callRefreshToken(n.refresh_token);return f?{data:{user:null,session:null},error:f}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(jn(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!fs())throw new Yp("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Yp(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new uk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new uk("No code detected.");const{data:j,error:q}=await this._exchangeCodeForSession(n.code);if(q)throw q;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:c,access_token:f,refresh_token:d,expires_in:a,expires_at:b,token_type:k}=n;if(!f||!a||!d||!k)throw new Yp("No session defined in URL");const S=Math.round(Date.now()/1e3),T=parseInt(a);let A=S+T;b&&(A=parseInt(b));const P=A-S;P*1e3<=wd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${T}s`);const R=A-T;S-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,A,S):S-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,A,S);const{data:B,error:L}=await this._getUser(f);if(L)throw L;const $={provider_token:s,provider_refresh_token:c,access_token:f,expires_in:T,expires_at:A,refresh_token:d,token_type:k,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:n.type},error:null}}catch(s){if(jn(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Xp(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:c,error:f}=r;if(f)return{error:f};const d=(s=c.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:a}=await this.admin.signOut(d,n);if(a&&!(mj(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return n!=="others"&&(await this._removeSession(),await Jp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=Cj(),s={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async r=>{var s,c;try{const{data:{session:f},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",n,"session",f)}catch(f){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",f),console.error(f)}})}async resetPasswordForEmail(n,r={}){let s=null,c=null;this.flowType==="pkce"&&([s,c]=await gd(this.storage,this.storageKey,!0));try{return await Wn(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(f){if(jn(f))return{data:null,error:f};throw f}}async getUserIdentities(){var n;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{const{data:s,error:c}=await this._useSession(async f=>{var d,a,b,k,S;const{data:T,error:A}=f;if(A)throw A;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(b=n.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Wn(this.fetch,"GET",P,{headers:this.headers,jwt:(S=(k=T.session)===null||k===void 0?void 0:k.access_token)!==null&&S!==void 0?S:void 0})});if(c)throw c;return fs()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:n.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(jn(s))return{data:{provider:n.provider,url:null},error:s};throw s}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var s,c;const{data:f,error:d}=r;if(d)throw d;return await Wn(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(s=f.session)===null||s===void 0?void 0:s.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Aj(async c=>(c>0&&await Ij(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await Wn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:go})),(c,f)=>{const d=200*Math.pow(2,c);return f&&ly(f)&&Date.now()+d-s<wd})}catch(s){if(this._debug(r,"error",s),jn(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",s),fs()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Xp(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const c=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<oy;if(this._debug(r,`session has${c?"":" not"} expired with margin of ${oy}s`),c){if(this.autoRefreshToken&&s.refresh_token){const{error:f}=await this._callRefreshToken(s.refresh_token);f&&(console.error(f),ly(f)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var r,s;if(!n)throw new ml;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new fv;const{data:f,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!f.session)throw new ml;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const a={session:f.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(f){if(this._debug(c,"error",f),jn(f)){const d={session:null,error:f};return ly(f)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(f),f}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,r,s=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:r});const f=[],d=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(n,r)}catch(b){f.push(b)}});if(await Promise.all(d),f.length>0){for(let a=0;a<f.length;a+=1)console.error(f[a]);throw f[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await UI(this.storage,this.storageKey,n)}async _removeSession(){this._debug("#_removeSession()"),await Jp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&fs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),wd);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((s.expires_at*1e3-n)/wd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${wd}ms, refresh threshold is ${Cb} ticks`),c<=Cb&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof GI)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,s){const c=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&c.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&c.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[f,d]=await gd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(d)}`});c.push(a.toString())}if(s!=null&&s.queryParams){const f=new URLSearchParams(s.queryParams);c.push(f.toString())}return s!=null&&s.skipBrowserRedirect&&c.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;return f?{data:null,error:f}:await Wn(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var s,c;const{data:f,error:d}=r;if(d)return{data:null,error:d};const a=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:b,error:k}=await Wn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=f==null?void 0:f.session)===null||s===void 0?void 0:s.access_token});return k?{data:null,error:k}:(n.factorType==="totp"&&(!((c=b==null?void 0:b.totp)===null||c===void 0)&&c.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;if(f)return{data:null,error:f};const{data:d,error:a}=await Wn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:a})})}catch(r){if(jn(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:c,error:f}=r;return f?{data:null,error:f}:await Wn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(jn(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:s}=await this._challenge({factorId:n.factorId});return s?{data:null,error:s}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(n==null?void 0:n.factors)||[],c=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),f=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:c,phone:f},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,s;const{data:{session:c},error:f}=n;if(f)return{data:null,error:f};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=uy(c.access_token);let a=null;d.aal&&(a=d.aal);let b=a;((s=(r=c.user.factors)===null||r===void 0?void 0:r.filter(T=>T.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(b="aal2");const S=d.amr||[];return{data:{currentLevel:a,nextLevel:b,currentAuthenticationMethods:S},error:null}}))}async fetchJwk(n,r={keys:[]}){let s=r.keys.find(d=>d.kid===n);if(s||(s=this.jwks.keys.find(d=>d.kid===n),s&&this.jwks_cached_at+hj>Date.now()))return s;const{data:c,error:f}=await Wn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;if(!c.keys||c.keys.length===0)throw new zf("JWKS is empty");if(this.jwks=c,this.jwks_cached_at=Date.now(),s=c.keys.find(d=>d.kid===n),!s)throw new zf("No matching signing key found in JWKS");return s}async getClaims(n,r={keys:[]}){try{let s=n;if(!s){const{data:P,error:R}=await this.getSession();if(R||!P.session)return{data:null,error:R};s=P.session.access_token}const{header:c,payload:f,signature:d,raw:{header:a,payload:b}}=uy(s);if(Vj(f.exp),!c.kid||c.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:P}=await this.getUser(s);if(P)throw P;return{data:{claims:f,header:c,signature:d},error:null}}const k=Bj(c.alg),S=await this.fetchJwk(c.kid,r),T=await crypto.subtle.importKey("jwk",S,k,!0,["verify"]);if(!await crypto.subtle.verify(k,T,d,wj(`${a}.${b}`)))throw new zf("Invalid JWT signature");return{data:{claims:f,header:c,signature:d},error:null}}catch(s){if(jn(s))return{data:null,error:s};throw s}}}om.nextInstanceID=0;const eN=om;class tN extends eN{constructor(n){super(n)}}var nN=function(e,n,r,s){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function a(S){try{k(s.next(S))}catch(T){d(T)}}function b(S){try{k(s.throw(S))}catch(T){d(T)}}function k(S){S.done?f(S.value):c(S.value).then(a,b)}k((s=s.apply(e,n||[])).next())})};class iN{constructor(n,r,s){var c,f,d;if(this.supabaseUrl=n,this.supabaseKey=r,!n)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=sj(n),b=new URL(a);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const k=`sb-${b.hostname.split(".")[0]}-auth-token`,S={db:J4,realtime:ej,auth:Object.assign(Object.assign({},Q4),{storageKey:k}),global:X4},T=oj(s??{},S);this.storageKey=(c=T.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(f=T.global.headers)!==null&&f!==void 0?f:{},T.accessToken?(this.accessToken=T.accessToken,this.auth=new Proxy({},{get:(A,P)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(P)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=T.auth)!==null&&d!==void 0?d:{},this.headers,T.global.fetch),this.fetch=rj(r,this._getAccessToken.bind(this),T.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},T.realtime)),this.rest=new x4(new URL("rest/v1",b).href,{headers:this.headers,schema:T.db.schema,fetch:this.fetch}),T.accessToken||this._listenForAuthEvents()}get functions(){return new l4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Z4(this.storageUrl.href,this.headers,this.fetch)}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},s={}){return this.rest.rpc(n,r,s)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return nN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:c,storageKey:f,flowType:d,lock:a,debug:b},k,S){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tN({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),k),storageKey:f,autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:c,flowType:d,lock:a,debug:b,fetch:S,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new L4(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(n,r,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rN=(e,n,r)=>new iN(e,n,r);console.log("Supabase URL:","https://rbtgxdcfchiewbqzzawc.supabase.co");const aN="https://rbtgxdcfchiewbqzzawc.supabase.co",sN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJidGd4ZGNmY2hpZXdicXp6YXdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3Mzk3OTMsImV4cCI6MjA2NjMxNTc5M30.-9DrWPykR5qI4jGEBtZDmTCrNHAqHoaA3t0zYrVIYSY",Rn=rN(aN,sN),oN={__name:"NavBar",setup(e){const n=Dl(),r=Xe(!1),s=Xe(!1),c=Xe("");let f=null;const d=async()=>{const{data:{session:S}}=await Rn.auth.getSession();r.value=!!S};gi(()=>{d();const{data:S}=Rn.auth.onAuthStateChange(()=>{d()});f=S.subscription}),um(()=>{f&&f.unsubscribe()});const a=()=>{n.push(r.value?"/profile":"/login")},b=async()=>{const{error:S}=await Rn.auth.signOut();S?(c.value="Fehler beim Logout",s.value=!0):n.push("/login")},k=S=>{n.push(S)};return(S,T)=>{const A=Tt("v-toolbar-title"),P=Tt("v-spacer"),R=Tt("v-icon"),B=Tt("v-btn"),L=Tt("v-list-item-title"),$=Tt("v-list-item"),j=Tt("v-list"),q=Tt("v-menu"),H=Tt("v-app-bar"),ee=Tt("v-snackbar");return on(),hr(Ht,null,[F(H,{app:"",color:"primary",dark:""},{default:Ue(()=>[F(A,{class:"cursor-pointer",onClick:a},{default:Ue(()=>T[5]||(T[5]=[Ft("  Fahrrad App ")])),_:1,__:[5]}),r.value?(on(),hr(Ht,{key:0},[F(P),F(q,{location:"bottom"},{activator:Ue(({props:Q})=>[F(B,ut({icon:""},Q),{default:Ue(()=>[F(R,null,{default:Ue(()=>T[6]||(T[6]=[Ft("mdi-menu")])),_:1,__:[6]})]),_:2},1040)]),default:Ue(()=>[F(j,null,{default:Ue(()=>[F($,{onClick:T[0]||(T[0]=Q=>k("/teams"))},{default:Ue(()=>[F(L,null,{default:Ue(()=>T[7]||(T[7]=[Ft("Teams")])),_:1,__:[7]})]),_:1}),F($,{onClick:T[1]||(T[1]=Q=>k("/rides/new"))},{default:Ue(()=>[F(L,null,{default:Ue(()=>T[8]||(T[8]=[Ft("Fahrt eintragen")])),_:1,__:[8]})]),_:1}),F($,{onClick:T[2]||(T[2]=Q=>k("/team-stats"))},{default:Ue(()=>[F(L,null,{default:Ue(()=>T[9]||(T[9]=[Ft("Statistiken")])),_:1,__:[9]})]),_:1}),F($,{onClick:T[3]||(T[3]=Q=>k("/profile"))},{default:Ue(()=>[F(L,null,{default:Ue(()=>T[10]||(T[10]=[Ft("Profil")])),_:1,__:[10]})]),_:1})]),_:1})]),_:1}),F(B,{variant:"text",class:"ml-2",color:"white",onClick:b},{default:Ue(()=>T[11]||(T[11]=[Ft(" Logout ")])),_:1,__:[11]})],64)):Lr("",!0)]),_:1}),F(ee,{modelValue:s.value,"onUpdate:modelValue":T[4]||(T[4]=Q=>s.value=Q),timeout:3e3,color:"error"},{default:Ue(()=>[Ft(yn(c.value),1)]),_:1},8,["modelValue"])],64)}}},lN={__name:"Breadcrumbs",setup(e){const n=e4();Dl();const r={"/":{text:"Home",to:"/"},"/teams":{text:"Teams",to:"/teams"},"/my-team":{text:"Mein Team",to:"/my-team"},"/team-stats":{text:"Statistiken",to:"/team-stats"},"/profile":{text:"Profil",to:"/profile"},"/rides/new":{text:"Neue Fahrt",to:"/rides/new"},"/create-team":{text:"Team erstellen",to:"/create-team"},"/invite-member":{text:"Mitglied einladen",to:"/invite-member"},"/register":{text:"Registrieren",to:"/register"},"/login":{text:"Login",to:"/login"}},s=te(()=>{const f=n.path.split("/").filter(Boolean);let d="";const a=[];a.push(r["/"]);for(const b of f)d+="/"+b,r[d]?a.push(r[d]):d.startsWith("/join-team")&&a.push({text:"Team beitreten",to:d});return a});return(c,f)=>{const d=Tt("v-icon"),a=Tt("v-breadcrumbs");return on(),Pn(a,{items:s.value,class:"mb-4"},{divider:Ue(()=>[F(d,null,{default:Ue(()=>f[0]||(f[0]=[Ft("mdi-chevron-right")])),_:1,__:[0]})]),_:1},8,["items"])}}},uN={__name:"App",setup(e){const n=Xe(navigator.onLine);return gi(()=>{window.addEventListener("online",()=>n.value=!0),window.addEventListener("offline",()=>n.value=!1)}),(r,s)=>{const c=Tt("router-view"),f=Tt("v-banner"),d=Tt("v-app");return on(),Pn(d,null,{default:Ue(()=>[F(oN),F(lN),F(c),n.value?Lr("",!0):(on(),Pn(f,{key:0,color:"warning",icon:"mdi-wifi-off"},{default:Ue(()=>s[0]||(s[0]=[Ft(" Du bist offline. Neue Fahrten werden gespeichert und synchronisiert, sobald du wieder online bist. ")])),_:1,__:[0]}))]),_:1})}}},cN={__name:"HomePage",setup(e){const n=Dl();return gi(async()=>{const{data:{session:r}}=await Rn.auth.getSession();r&&n.replace("/teams")}),(r,s)=>{const c=Tt("v-card-title"),f=Tt("v-card-text"),d=Tt("v-btn"),a=Tt("v-card-actions"),b=Tt("v-card"),k=Tt("v-col"),S=Tt("v-row"),T=Tt("v-container"),A=Tt("v-main");return on(),Pn(A,null,{default:Ue(()=>[F(T,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:Ue(()=>[F(S,{justify:"center"},{default:Ue(()=>[F(k,{cols:"12",sm:"10",md:"8"},{default:Ue(()=>[F(b,{class:"pa-4 text-center",elevation:"6"},{default:Ue(()=>[F(c,{class:"text-h4"},{default:Ue(()=>s[0]||(s[0]=[Ft(" Fahrrad Kilometer App")])),_:1,__:[0]}),F(f,{class:"text-h6"},{default:Ue(()=>s[1]||(s[1]=[Ft(" Willkommen! Dies ist ein "),Y("strong",null,"Testprojekt",-1),Ft(", um "),Y("strong",null,"Supabase",-1),Ft(" auszuprobieren. Die App wurde mit "),Y("strong",null,"Vue.js",-1),Ft(" entwickelt und dient zum Sammeln und Vergleichen von gefahrenen Fahrradkilometern. ")])),_:1,__:[1]}),F(a,{class:"justify-center"},{default:Ue(()=>[F(d,{color:"primary",to:"/login",class:"mx-2"},{default:Ue(()=>s[2]||(s[2]=[Ft("Anmelden")])),_:1,__:[2]}),F(d,{color:"secondary",to:"/register",class:"mx-2"},{default:Ue(()=>s[3]||(s[3]=[Ft("Registrieren")])),_:1,__:[3]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},dN={class:"mt-4 text-center"},hN={__name:"LoginPage",setup(e){const n=Dl(),r=Xe(""),s=Xe(""),c=Xe("");async function f(){c.value="";const{error:a}=await Rn.auth.signInWithPassword({email:r.value,password:s.value});a?c.value=a.message:n.push("/teams")}async function d(){const{error:a}=await Rn.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});a&&(c.value=a.message)}return(a,b)=>{const k=Tt("v-card-title"),S=Tt("v-text-field"),T=Tt("v-btn"),A=Tt("v-form"),P=Tt("v-alert"),R=Tt("router-link"),B=Tt("v-card-text"),L=Tt("v-card"),$=Tt("v-col"),j=Tt("v-row"),q=Tt("v-container"),H=Tt("v-main");return on(),Pn(H,null,{default:Ue(()=>[F(q,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:Ue(()=>[F(j,{justify:"center"},{default:Ue(()=>[F($,{cols:"12",sm:"8",md:"4"},{default:Ue(()=>[F(L,{class:"pa-4",elevation:"6"},{default:Ue(()=>[F(k,{class:"text-h5 text-center"},{default:Ue(()=>b[2]||(b[2]=[Ft(" Fahrrad App  Login")])),_:1,__:[2]}),F(B,null,{default:Ue(()=>[F(A,{onSubmit:wl(f,["prevent"])},{default:Ue(()=>[F(S,{modelValue:r.value,"onUpdate:modelValue":b[0]||(b[0]=ee=>r.value=ee),label:"E-Mail",type:"email",required:"","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),F(S,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=ee=>s.value=ee),label:"Passwort",type:"password",required:"","prepend-inner-icon":"mdi-lock"},null,8,["modelValue"]),F(T,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:Ue(()=>b[3]||(b[3]=[Ft("Anmelden")])),_:1,__:[3]})]),_:1}),F(T,{class:"mt-4",color:"black",block:"","prepend-icon":"mdi-github",onClick:d},{default:Ue(()=>b[4]||(b[4]=[Ft(" Mit GitHub anmelden ")])),_:1,__:[4]}),c.value?(on(),Pn(P,{key:0,type:"error",class:"mt-4",dense:"",border:"start"},{default:Ue(()=>[Ft(yn(c.value),1)]),_:1})):Lr("",!0),Y("div",dN,[b[6]||(b[6]=Ft(" Noch kein Konto? ")),F(R,{to:"/register"},{default:Ue(()=>b[5]||(b[5]=[Ft("Hier registrieren")])),_:1,__:[5]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},fN={class:"mt-4 text-center"},mN={__name:"RegisterPage",setup(e){const n=Xe(""),r=Xe(""),s=Xe(""),c=Xe(null),f=Xe(null);Dl();async function d(){var T;c.value=null,f.value=null;const{data:b,error:k}=await Rn.auth.signUp({email:n.value,password:r.value,options:{emailRedirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});if(k){c.value=k.message;return}const S=(T=b.user)==null?void 0:T.id;if(S){const{error:A}=await Rn.from("profiles").update({username:s.value}).eq("id",S);if(A){c.value=A.message;return}}f.value="Bitte besttige deine E-Mail-Adresse ber den Link, den wir dir geschickt haben, bevor du dich einloggst."}async function a(){const{error:b}=await Rn.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://schroerdev.github.io/fahrrad_kilometer_tracker/"}});b&&(c.value=b.message)}return(b,k)=>{const S=Tt("v-card-title"),T=Tt("v-text-field"),A=Tt("v-btn"),P=Tt("v-form"),R=Tt("v-alert"),B=Tt("router-link"),L=Tt("v-card-text"),$=Tt("v-card"),j=Tt("v-col"),q=Tt("v-row"),H=Tt("v-container"),ee=Tt("v-main");return on(),Pn(ee,null,{default:Ue(()=>[F(H,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:Ue(()=>[F(q,{justify:"center"},{default:Ue(()=>[F(j,{cols:"12",sm:"8",md:"4"},{default:Ue(()=>[F($,{class:"pa-4",elevation:"6"},{default:Ue(()=>[F(S,{class:"text-h5 text-center"},{default:Ue(()=>k[3]||(k[3]=[Ft(" Fahrrad App  Registrieren")])),_:1,__:[3]}),F(L,null,{default:Ue(()=>[f.value?Lr("",!0):(on(),Pn(P,{key:0,onSubmit:wl(d,["prevent"])},{default:Ue(()=>[F(T,{modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=Q=>n.value=Q),label:"E-Mail",type:"email",required:"","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),F(T,{modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=Q=>r.value=Q),label:"Passwort",type:"password",required:"","prepend-inner-icon":"mdi-lock"},null,8,["modelValue"]),F(T,{modelValue:s.value,"onUpdate:modelValue":k[2]||(k[2]=Q=>s.value=Q),label:"Benutzername",type:"text",required:"","prepend-inner-icon":"mdi-account"},null,8,["modelValue"]),F(A,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:Ue(()=>k[4]||(k[4]=[Ft("Registrieren")])),_:1,__:[4]})]),_:1})),F(A,{class:"mt-4",color:"black",block:"","prepend-icon":"mdi-github",onClick:a},{default:Ue(()=>k[5]||(k[5]=[Ft(" Mit GitHub registrieren ")])),_:1,__:[5]}),c.value?(on(),Pn(R,{key:1,type:"error",class:"mt-4",dense:"",border:"start"},{default:Ue(()=>[Ft(yn(c.value),1)]),_:1})):Lr("",!0),f.value?(on(),Pn(R,{key:2,type:"success",class:"mt-4",dense:"",border:"start"},{default:Ue(()=>[Ft(yn(f.value),1)]),_:1})):Lr("",!0),Y("div",fN,[k[7]||(k[7]=Ft(" Schon ein Konto? ")),F(B,{to:"/login"},{default:Ue(()=>k[6]||(k[6]=[Ft("Hier anmelden")])),_:1,__:[6]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},pN={key:1},gN={key:1},vN={class:"d-flex justify-space-between align-center"},_N={class:"text-h6"},yN={class:"text-right"},bN={key:1},xN={class:"text-caption"},wN={class:"text-right font-weight-bold"},SN={key:4,class:"mt-6"},kN={__name:"TeamsPage",setup(e){const n=[{title:"Rang",value:"rank"},{title:"Teamname",value:"name"},{title:"Kilometer",value:"total_km"},{title:"Mitglieder",value:"member_count"}],r=Dl(),s=Xe([]),c=Xe(!0),f=Xe(null),d=Xe(null),a=Xe(window.innerWidth<=900);async function b(){c.value=!0;const{data:P,error:R}=await Rn.from("teams").select(`
            id,
            name,
            members:members (
                user_id
            )
        `).order("created_at",{ascending:!1});if(R){f.value=R.message,c.value=!1;return}const B=[];for(const L of P){let $=0;const j=L.members?L.members.length:0;if(L.members&&L.members.length>0){const q=L.members.map(ee=>ee.user_id),{data:H}=await Rn.from("rides").select("km").in("user_id",q);if(H)for(const ee of H)$+=Number(ee.km)||0}B.push({id:L.id,name:L.name,total_km:$,member_count:j})}s.value=B,c.value=!1}async function k(){const{data:{user:P}}=await Rn.auth.getUser();if(!P){d.value=null;return}const{data:R}=await Rn.from("members").select("team_id").eq("user_id",P.id).single();d.value=(R==null?void 0:R.team_id)||null}function S(){r.push("/create-team")}const T=te(()=>[...s.value].sort((P,R)=>(R.total_km??0)-(P.total_km??0)));function A(){a.value=window.innerWidth<=700}return gi(()=>{b(),k(),window.addEventListener("resize",A)}),um(()=>{window.removeEventListener("resize",A)}),(P,R)=>{const B=Tt("v-card-title"),L=Tt("v-progress-circular"),$=Tt("router-link"),j=Tt("v-chip"),q=Tt("v-data-table"),H=Tt("v-card"),ee=Tt("v-col"),Q=Tt("v-row"),oe=Tt("v-btn"),le=Tt("v-alert"),ce=Tt("v-card-text"),he=Tt("v-container"),ve=Tt("v-main");return on(),Pn(ve,null,{default:Ue(()=>[F(he,{class:"page-container",fluid:""},{default:Ue(()=>[F(H,{class:"pa-6 mb-6",elevation:"4"},{default:Ue(()=>[F(B,{class:"text-h5"},{default:Ue(()=>R[0]||(R[0]=[Ft(" Team-bersicht")])),_:1,__:[0]}),F(ce,null,{default:Ue(()=>[c.value?(on(),Pn(L,{key:0,indeterminate:"",color:"primary",class:"ma-4"})):s.value.length===0?(on(),hr("div",pN,"Keine Teams gefunden.")):Lr("",!0),a.value?(on(),Pn(Q,{key:3,class:"mt-4",dense:""},{default:Ue(()=>[(on(!0),hr(Ht,null,Dd(T.value,(ie,be)=>(on(),Pn(ee,{key:ie.id,cols:"12"},{default:Ue(()=>[F(H,{color:ie.id===d.value?"primary":"surface",class:"pa-4",elevation:"2"},{default:Ue(()=>[Y("div",vN,[Y("div",_N,"#"+yn(be+1),1),Y("div",yN,[ie.id===d.value?(on(),Pn($,{key:0,to:"/my-team",class:"my-team-link"},{default:Ue(()=>[Y("strong",null,yn(ie.name),1)]),_:2},1024)):(on(),hr("strong",bN,yn(ie.name),1)),Y("div",xN,yn(ie.member_count)+" Mitglieder",1)]),Y("div",wN,yn(ie.total_km??0)+" km",1)])]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1})):(on(),Pn(q,{key:2,headers:n,items:T.value,class:"elevation-1 mt-4","item-value":"id","disable-pagination":"","hide-default-footer":""},{"item.name":Ue(({item:ie})=>[Y("div",null,[ie.id===d.value?(on(),Pn($,{key:0,to:"/my-team",class:"my-team-link"},{default:Ue(()=>[Y("strong",null,yn(ie.name),1)]),_:2},1024)):(on(),hr("strong",gN,yn(ie.name),1)),ie.id===d.value?(on(),Pn(j,{key:2,color:"primary",size:"small",class:"ml-2"},{default:Ue(()=>R[1]||(R[1]=[Ft(" Mein Team ")])),_:1,__:[1]})):Lr("",!0)])]),"item.rank":Ue(({index:ie})=>[Ft(" #"+yn(ie+1),1)]),_:2},1032,["items"])),d.value?Lr("",!0):(on(),hr("div",SN,[F(oe,{color:"primary",onClick:S},{default:Ue(()=>R[2]||(R[2]=[Ft("  Team erstellen ")])),_:1,__:[2]})])),f.value?(on(),Pn(le,{key:5,type:"error",class:"mt-4"},{default:Ue(()=>[Ft(yn(f.value),1)]),_:1})):Lr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},CN={__name:"CreateTeamPage",setup(e){const n=Dl(),r=Xe(""),s=Xe(null);async function c(){const{data:{user:f}}=await Rn.auth.getUser(),{data:d,error:a}=await Rn.from("teams").insert([{name:r.value}]).select().single();if(a){s.value=a.message;return}const{error:b}=await Rn.from("members").insert([{user_id:f.id,team_id:d.id}]);if(b){s.value=b.message;return}n.push("/teams")}return(f,d)=>{const a=Tt("v-card-title"),b=Tt("v-text-field"),k=Tt("v-btn"),S=Tt("v-form"),T=Tt("v-alert"),A=Tt("v-card-text"),P=Tt("v-card"),R=Tt("v-col"),B=Tt("v-row"),L=Tt("v-container"),$=Tt("v-main");return on(),Pn($,null,{default:Ue(()=>[F(L,{class:"d-flex align-center justify-center",style:{"min-height":"calc(80vh - 64px)"},fluid:""},{default:Ue(()=>[F(B,{justify:"center"},{default:Ue(()=>[F(R,{cols:"12",sm:"8",md:"4"},{default:Ue(()=>[F(P,{class:"pa-4",elevation:"6"},{default:Ue(()=>[F(a,{class:"text-h5 text-center"},{default:Ue(()=>d[1]||(d[1]=[Ft(" Neues Team erstellen")])),_:1,__:[1]}),F(A,null,{default:Ue(()=>[F(S,{onSubmit:wl(c,["prevent"])},{default:Ue(()=>[F(b,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=j=>r.value=j),label:"Teamname",type:"text",required:"","prepend-inner-icon":"mdi-account-group"},null,8,["modelValue"]),F(k,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:Ue(()=>d[2]||(d[2]=[Ft("Team erstellen")])),_:1,__:[2]})]),_:1}),s.value?(on(),Pn(T,{key:0,type:"error",class:"mt-4",dense:"",border:"start"},{default:Ue(()=>[Ft(yn(s.value),1)]),_:1})):Lr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},TN={key:1},PN={key:2},IN={key:4},AN={__name:"ProfilePage",setup(e){const n=Xe(null),r=Xe("Kein Team"),s=Xe(null),c=Xe([]),f=Xe(!0),d=Xe(null),a=Xe(null),b=Xe(""),k=Xe(""),S=Xe(""),T=Xe(!1),A=Xe({totalRides:0,totalKm:0}),P=async()=>{const{data:{user:q},error:H}=await Rn.auth.getUser();if(H||!q){s.value="Nicht eingeloggt.";return}f.value=q.email_confirmed_at!==null;const{data:ee,error:Q}=await Rn.from("profiles").select("username").eq("id",q.id).single();if(Q){s.value="Profil nicht gefunden.";return}n.value=ee,b.value=ee.username;const{data:oe}=await Rn.from("members").select("team_id").eq("user_id",q.id).single();if(oe&&oe.team_id){d.value=oe.id;const{data:he}=await Rn.from("teams").select("name").eq("id",oe.team_id).single();he&&he.name?r.value=he.name:r.value="Kein Team"}else d.value=null,r.value="Kein Team";const{data:le}=await Rn.from("rides").select("id, created_at, km").eq("user_id",q.id).order("created_at",{ascending:!1});c.value=le||[];const{data:ce}=await Rn.from("rides").select("count(id) as totalRides, sum(km) as totalKm").eq("user_id",q.id).single();A.value={totalRides:(ce==null?void 0:ce.totalRides)||0,totalKm:(ce==null?void 0:ce.totalKm)||0}};async function R(){if(!d.value)return;const{error:q}=await Rn.from("members").delete().eq("id",d.value);q?s.value="Fehler beim Verlassen des Teams: "+q.message:(r.value="Kein Team",d.value=null)}function B(q){const H=new Date(q),ee=String(H.getDate()).padStart(2,"0"),Q=String(H.getMonth()+1).padStart(2,"0"),oe=H.getFullYear(),le=String(H.getHours()).padStart(2,"0"),ce=String(H.getMinutes()).padStart(2,"0");return`${ee}.${Q}.${oe} ${le}:${ce}`}async function L(){T.value=!1,s.value=null,a.value=null;const{data:{user:q}}=await Rn.auth.getUser(),{error:H}=await Rn.functions.invoke("delete-user",{body:{userId:q.id}});H?s.value="Fehler beim Lschen des Accounts: "+H.message:(a.value="Account gelscht.",await Rn.auth.signOut(),window.location.href="/login")}function $(){T.value=!0}async function j(){k.value="",S.value="";const{data:{user:q}}=await Rn.auth.getUser();if(!q){k.value="Nicht eingeloggt.";return}if(!b.value||b.value.length<3){k.value="Benutzername zu kurz.";return}const{error:H}=await Rn.from("profiles").update({username:b.value}).eq("id",q.id);H?k.value="Fehler beim Speichern: "+H.message:(S.value="Benutzername gespeichert!",n.value.username=b.value)}return gi(P),(q,H)=>{const ee=Tt("v-card-title"),Q=Tt("v-alert"),oe=Tt("v-progress-circular"),le=Tt("v-text-field"),ce=Tt("v-btn"),he=Tt("v-col"),ve=Tt("v-row"),ie=Tt("v-list-item-title"),be=Tt("v-list-item-content"),Be=Tt("v-list-item"),De=Tt("v-list"),Fe=Tt("v-card-text"),Ze=Tt("v-card"),mt=Tt("v-spacer"),pt=Tt("v-card-actions"),Ve=Tt("v-dialog"),Se=Tt("v-icon"),Ee=Tt("v-list-item-subtitle"),tt=Tt("v-container"),Nt=Tt("v-main");return on(),Pn(Nt,null,{default:Ue(()=>[F(tt,{class:"page-container",fluid:""},{default:Ue(()=>[F(Ze,{class:"pa-6",elevation:"4"},{default:Ue(()=>[F(ee,{class:"text-h5"},{default:Ue(()=>H[3]||(H[3]=[Ft(" Profil")])),_:1,__:[3]}),F(Fe,null,{default:Ue(()=>[s.value?(on(),Pn(Q,{key:0,type:"error",dense:"",class:"mb-4"},{default:Ue(()=>[Ft(yn(s.value),1)]),_:1})):n.value?(on(),hr("div",PN,[f.value?Lr("",!0):(on(),Pn(Q,{key:0,type:"warning",dense:"",class:"mb-4"},{default:Ue(()=>H[5]||(H[5]=[Ft(" Bitte besttige deine E-Mail-Adresse, um alle Funktionen nutzen zu knnen. ")])),_:1,__:[5]})),F(ve,{class:"mb-4"},{default:Ue(()=>[F(he,{cols:"12",md:"8"},{default:Ue(()=>[F(le,{modelValue:b.value,"onUpdate:modelValue":H[0]||(H[0]=kt=>b.value=kt),label:"Benutzername",variant:"outlined"},null,8,["modelValue"]),F(ce,{color:"primary",onClick:j},{default:Ue(()=>H[6]||(H[6]=[Ft("Speichern")])),_:1,__:[6]})]),_:1})]),_:1}),S.value?(on(),Pn(Q,{key:1,type:"success",dense:"",class:"mb-2"},{default:Ue(()=>[Ft(yn(S.value),1)]),_:1})):Lr("",!0),k.value?(on(),Pn(Q,{key:2,type:"error",dense:"",class:"mb-2"},{default:Ue(()=>[Ft(yn(k.value),1)]),_:1})):Lr("",!0),Y("p",null,[H[8]||(H[8]=Y("strong",null,"Team:",-1)),Ft(" "+yn(r.value)+" ",1),r.value!=="Kein Team"?(on(),Pn(ce,{key:0,color:"warning",class:"ml-4",onClick:R},{default:Ue(()=>H[7]||(H[7]=[Ft(" Team verlassen ")])),_:1,__:[7]})):Lr("",!0)]),H[10]||(H[10]=Y("h2",{class:"mt-6 mb-4"},"Deine Fahrten",-1)),c.value.length>0?(on(),Pn(De,{key:3,class:"mb-4"},{default:Ue(()=>[(on(!0),hr(Ht,null,Dd(c.value,kt=>(on(),Pn(Be,{key:kt.id},{default:Ue(()=>[F(be,null,{default:Ue(()=>[F(ie,null,{default:Ue(()=>[Ft(yn(B(kt.created_at))+": "+yn(kt.km)+" km ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(on(),hr("p",IN,"Keine Fahrten gefunden.")),F(ce,{color:"error",class:"mt-6",onClick:$},{default:Ue(()=>H[9]||(H[9]=[Ft(" Account lschen ")])),_:1,__:[9]})])):(on(),hr("div",TN,[F(oe,{indeterminate:"",color:"primary"}),H[4]||(H[4]=Y("span",{class:"ml-2"},"Lade Profil...",-1))]))]),_:1})]),_:1}),F(Ve,{modelValue:T.value,"onUpdate:modelValue":H[2]||(H[2]=kt=>T.value=kt),persistent:"","max-width":"400"},{default:Ue(()=>[F(Ze,null,{default:Ue(()=>[F(ee,{class:"text-h5"},{default:Ue(()=>H[11]||(H[11]=[Ft("Account lschen?")])),_:1,__:[11]}),F(Fe,null,{default:Ue(()=>H[12]||(H[12]=[Ft(" Bist du sicher, dass du deinen Account unwiderruflich lschen mchtest? Alle deine Daten gehen dabei verloren. ")])),_:1,__:[12]}),F(pt,null,{default:Ue(()=>[F(mt),F(ce,{color:"blue darken-1",text:"",onClick:H[1]||(H[1]=kt=>T.value=!1)},{default:Ue(()=>H[13]||(H[13]=[Ft("Abbrechen")])),_:1,__:[13]}),F(ce,{color:"red darken-1",text:"",onClick:L},{default:Ue(()=>H[14]||(H[14]=[Ft("Lschen")])),_:1,__:[14]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),F(ve,null,{default:Ue(()=>[F(he,{cols:"12",md:"6"},{default:Ue(()=>[F(Ze,{title:"Meine Statistiken"},{default:Ue(()=>[F(Fe,null,{default:Ue(()=>[F(De,null,{default:Ue(()=>[F(Be,null,{prepend:Ue(()=>[F(Se,null,{default:Ue(()=>H[15]||(H[15]=[Ft("mdi-bike")])),_:1,__:[15]})]),default:Ue(()=>[F(ie,null,{default:Ue(()=>H[16]||(H[16]=[Ft("Fahrten insgesamt")])),_:1,__:[16]}),F(Ee,null,{default:Ue(()=>[Ft(yn(A.value.totalRides),1)]),_:1})]),_:1}),F(Be,null,{prepend:Ue(()=>[F(Se,null,{default:Ue(()=>H[17]||(H[17]=[Ft("mdi-map-marker-distance")])),_:1,__:[17]})]),default:Ue(()=>[F(ie,null,{default:Ue(()=>H[18]||(H[18]=[Ft("Kilometer gesamt")])),_:1,__:[18]}),F(Ee,null,{default:Ue(()=>[Ft(yn(A.value.totalKm)+" km",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};var sg={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */var EN=sg.exports,_k;function MN(){return _k||(_k=1,function(e,n){(function(r,s){e.exports=s()})(EN,function(){var r={},s={};function c(d,a,b){if(s[d]=b,d==="index"){var k="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",S={};return s.shared(S),s.index(r,S),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([k],{type:"text/javascript"}))),r}}c("shared",["exports"],function(d){function a(u,i,l,h){return new(l||(l=Promise))(function(g,y){function x(D){try{E(h.next(D))}catch(V){y(V)}}function C(D){try{E(h.throw(D))}catch(V){y(V)}}function E(D){var V;D.done?g(D.value):(V=D.value,V instanceof l?V:new l(function(N){N(V)})).then(x,C)}E((h=h.apply(u,i||[])).next())})}function b(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var k,S;function T(){if(S)return k;function u(i,l){this.x=i,this.y=l}return S=1,k=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,l){return this.clone()._rotateAround(i,l)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var l=i.x-this.x,h=i.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,l){return Math.atan2(this.x*l-this.y*i,this.x*i+this.y*l)},_matMult:function(i){var l=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=l,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var l=Math.cos(i),h=Math.sin(i),g=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=g,this},_rotateAround:function(i,l){var h=Math.cos(i),g=Math.sin(i),y=l.y+g*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-g*(this.y-l.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(i){return i instanceof u?i:Array.isArray(i)?new u(i[0],i[1]):i},k}typeof SuppressedError=="function"&&SuppressedError;var A,P,R=b(T()),B=function(){if(P)return A;function u(i,l,h,g){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=h,this.p2y=g}return P=1,A=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,g=0;g<8;g++){var y=this.sampleCurveX(h)-i;if(Math.abs(y)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=y/x}var C=0,E=1;for(h=i,g=0;g<20&&(y=this.sampleCurveX(h),!(Math.abs(y-i)<l));g++)i>y?C=h:E=h,h=.5*(E-C)+C;return h},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},A}(),L=b(B);let $,j;function q(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function H(){if(j==null&&(j=!1,q())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){const g=4*h;i.fillStyle=`rgb(${g},${g+1},${g+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){j=!0;break}}}return j||!1}var ee=1e-6,Q=typeof Float32Array<"u"?Float32Array:Array;function oe(){var u=new Q(9);return Q!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function le(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function ce(){var u=new Q(3);return Q!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function he(u){return Math.hypot(u[0],u[1],u[2])}function ve(u,i,l){var h=new Q(3);return h[0]=u,h[1]=i,h[2]=l,h}function ie(u,i,l){return u[0]=i[0]+l[0],u[1]=i[1]+l[1],u[2]=i[2]+l[2],u}function be(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u}function Be(u,i,l){var h=i[0],g=i[1],y=i[2],x=l[0],C=l[1],E=l[2];return u[0]=g*E-y*C,u[1]=y*x-h*E,u[2]=h*C-g*x,u}Math.hypot||(Math.hypot=function(){for(var u=0,i=arguments.length;i--;)u+=arguments[i]*arguments[i];return Math.sqrt(u)});var De,Fe=he;function Ze(u,i,l){var h=i[0],g=i[1],y=i[2],x=i[3];return u[0]=l[0]*h+l[4]*g+l[8]*y+l[12]*x,u[1]=l[1]*h+l[5]*g+l[9]*y+l[13]*x,u[2]=l[2]*h+l[6]*g+l[10]*y+l[14]*x,u[3]=l[3]*h+l[7]*g+l[11]*y+l[15]*x,u}function mt(){var u=new Q(4);return Q!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function pt(u,i,l,h){var g=.5*Math.PI/180;i*=g,l*=g,h*=g;var y=Math.sin(i),x=Math.cos(i),C=Math.sin(l),E=Math.cos(l),D=Math.sin(h),V=Math.cos(h);return u[0]=y*E*V-x*C*D,u[1]=x*C*V+y*E*D,u[2]=x*E*D-y*C*V,u[3]=x*E*V+y*C*D,u}function Ve(){var u=new Q(2);return Q!=Float32Array&&(u[0]=0,u[1]=0),u}function Se(u,i){var l=new Q(2);return l[0]=u,l[1]=i,l}ce(),De=new Q(4),Q!=Float32Array&&(De[0]=0,De[1]=0,De[2]=0,De[3]=0),ce(),ve(1,0,0),ve(0,1,0),mt(),mt(),oe(),Ve();const Ee=8192;function tt(u,i,l){return i*(Ee/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}function Nt(u,i){return(u%i+i)%i}function kt(u,i,l){return u*(1-l)+i*l}function wt(u){if(u<=0)return 0;if(u>=1)return 1;const i=u*u,l=i*u;return 4*(u<.5?l:3*(u-i)+l-.75)}function Le(u,i,l,h){const g=new L(u,i,l,h);return y=>g.solve(y)}const _t=Le(.25,.1,.25,1);function ot(u,i,l){return Math.min(l,Math.max(i,u))}function Je(u,i,l){const h=l-i,g=((u-i)%h+h)%h+i;return g===i?l:g}function Ct(u,...i){for(const l of i)for(const h in l)u[h]=l[h];return u}let ae=1;function de(u,i,l){const h={};for(const g in u)h[g]=i.call(this,u[g],g,u);return h}function ze(u,i,l){const h={};for(const g in u)i.call(this,u[g],g,u)&&(h[g]=u[g]);return h}function Ye(u){return Array.isArray(u)?u.map(Ye):typeof u=="object"&&u?de(u,Ye):u}const ct={};function et(u){ct[u]||(typeof console<"u"&&console.warn(u),ct[u]=!0)}function It(u,i,l){return(l.y-u.y)*(i.x-u.x)>(i.y-u.y)*(l.x-u.x)}function dt(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Lt=null;function At(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Wt(u,i,l,h,g){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(u,{timestamp:0});try{const x=y==null?void 0:y.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const C=x.startsWith("BGR"),E=new Uint8ClampedArray(h*g*4);if(yield y.copyTo(E,function(D,V,N,W,X){const J=4*Math.max(1,0),re=(Math.max(0,N)-N)*W*4+J,pe=4*W,xe=Math.max(0,V),Ne=Math.max(0,N);return{rect:{x:xe,y:Ne,width:Math.min(D.width,V+W)-xe,height:Math.min(D.height,N+X)-Ne},layout:[{offset:re,stride:pe}]}}(u,i,l,h,g)),C)for(let D=0;D<E.length;D+=4){const V=E[D];E[D]=E[D+2],E[D+2]=V}return E}finally{y.close()}})}let tn,dn;function _n(u,i,l,h){return u.addEventListener(i,l,h),{unsubscribe:()=>{u.removeEventListener(i,l,h)}}}function Dn(u){return u*Math.PI/180}function Vn(u){return u/Math.PI*180}const Ni={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Yi={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ui="AbortError";function He(){return new Error(Ui)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ue(u){return se.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const me="global-dispatcher";class ke extends Error{constructor(i,l,h,g){super(`AJAXError: ${l} (${i}): ${h}`),this.status=i,this.statusText=l,this.url=h,this.body=g}}const je=()=>dt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ke=function(u,i){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const h=ue(u.url);if(h)return h(u,i);if(dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:me},i)}if(!(/^file:/.test(l=u.url)||/^file:/.test(je())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return a(this,void 0,void 0,function*(){const y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:je(),signal:g.signal});let x,C;h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");try{x=yield fetch(y)}catch(D){throw new ke(0,D.message,h.url,new Blob)}if(!x.ok){const D=yield x.blob();throw new ke(x.status,x.statusText,h.url,D)}C=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const E=yield C;if(g.signal.aborted)throw He();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(u,i);if(dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:me},i)}var l;return function(h,g){return new Promise((y,x)=>{var C;const E=new XMLHttpRequest;E.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(E.responseType="arraybuffer");for(const D in h.headers)E.setRequestHeader(D,h.headers[D]);h.type==="json"&&(E.responseType="text",!((C=h.headers)===null||C===void 0)&&C.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=h.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!g.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let D=E.response;if(h.type==="json")try{D=JSON.parse(E.response)}catch(V){return void x(V)}y({data:D,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const D=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new ke(E.status,E.statusText,h.url,D))}},g.signal.addEventListener("abort",()=>{E.abort(),x(He())}),E.send(h.body)})}(u,i)};function at(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const i=new URL(u),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function We(u,i,l){l[u]&&l[u].indexOf(i)!==-1||(l[u]=l[u]||[],l[u].push(i))}function xt(u,i,l){if(l&&l[u]){const h=l[u].indexOf(i);h!==-1&&l[u].splice(h,1)}}class gt{constructor(i,l={}){Ct(this,l),this.type=i}}class Qe extends gt{constructor(i,l={}){super("error",Ct({error:i},l))}}class Pt{on(i,l){return this._listeners=this._listeners||{},We(i,l,this._listeners),{unsubscribe:()=>{this.off(i,l)}}}off(i,l){return xt(i,l,this._listeners),xt(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},We(i,l,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,l){typeof i=="string"&&(i=new gt(i,l||{}));const h=i.type;if(this.listens(h)){i.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const C of g)C.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const C of y)xt(h,C,this._oneTimeListeners),C.call(this,i);const x=this._eventedParent;x&&(Ct(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Qe&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Zt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function fn(u,i){const l={};for(const h in u)h!=="ref"&&(l[h]=u[h]);return Zt.forEach(h=>{h in i&&(l[h]=i[h])}),l}function Xt(u,i){if(Array.isArray(u)){if(!Array.isArray(i)||u.length!==i.length)return!1;for(let l=0;l<u.length;l++)if(!Xt(u[l],i[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&i!==null){if(typeof i!="object"||Object.keys(u).length!==Object.keys(i).length)return!1;for(const l in u)if(!Xt(u[l],i[l]))return!1;return!0}return u===i}function ln(u,i){u.push(i)}function vn(u,i,l){ln(l,{command:"addSource",args:[u,i[u]]})}function ui(u,i,l){ln(i,{command:"removeSource",args:[u]}),l[u]=!0}function ei(u,i,l,h){ui(u,l,h),vn(u,i,l)}function Zn(u,i,l){let h;for(h in u[l])if(Object.prototype.hasOwnProperty.call(u[l],h)&&h!=="data"&&!Xt(u[l][h],i[l][h]))return!1;for(h in i[l])if(Object.prototype.hasOwnProperty.call(i[l],h)&&h!=="data"&&!Xt(u[l][h],i[l][h]))return!1;return!0}function gn(u,i,l,h,g,y){u=u||{},i=i||{};for(const x in u)Object.prototype.hasOwnProperty.call(u,x)&&(Xt(u[x],i[x])||l.push({command:y,args:[h,x,i[x],g]}));for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&!Object.prototype.hasOwnProperty.call(u,x)&&(Xt(u[x],i[x])||l.push({command:y,args:[h,x,i[x],g]}))}function Un(u){return u.id}function ir(u,i){return u[i.id]=i,u}class $t{constructor(i,l,h,g){this.message=(i?`${i}: `:"")+h,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function pr(u,...i){for(const l of i)for(const h in l)u[h]=l[h];return u}class yi extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class Ss{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[h,g]of l)this.bindings[h]=g}concat(i){return new Ss(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ys={kind:"null"},Gt={kind:"number"},An={kind:"string"},En={kind:"boolean"},oa={kind:"color"},uc={kind:"projectionDefinition"},Ua={kind:"object"},Mn={kind:"value"},ts={kind:"collator"},Xs={kind:"formatted"},Fi={kind:"padding"},Ll={kind:"colorArray"},zl={kind:"numberArray"},ns={kind:"resolvedImage"},Vl={kind:"variableAnchorOffsetCollection"};function la(u,i){return{kind:"array",itemType:u,N:i}}function bi(u){if(u.kind==="array"){const i=bi(u.itemType);return typeof u.N=="number"?`array<${i}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${i}>`}return u.kind}const Tm=[Ys,Gt,An,En,oa,uc,Xs,Ua,la(Mn),Fi,zl,Ll,ns,Vl];function Bl(u,i){if(i.kind==="error")return null;if(u.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Bl(u.itemType,i.itemType))&&(typeof u.N!="number"||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if(u.kind==="value"){for(const l of Tm)if(!Bl(l,i))return null}}return`Expected ${bi(u)} but found ${bi(i)} instead.`}function cc(u,i){return i.some(l=>l.kind===u.kind)}function Js(u,i){return i.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}function ks(u,i){return u.kind==="array"&&i.kind==="array"?u.itemType.kind===i.itemType.kind&&typeof u.N=="number":u.kind===i.kind}const Pm=.96422,Im=.82521,Am=4/29,Ro=6/29,Em=3*Ro*Ro,Mm=Ro*Ro*Ro,Ol=Math.PI/180,mv=180/Math.PI;function Dm(u){return(u%=360)<0&&(u+=360),u}function Lo([u,i,l,h]){let g,y;const x=ih((.2225045*(u=nh(u))+.7168786*(i=nh(i))+.0606169*(l=nh(l)))/1);u===i&&i===l?g=y=x:(g=ih((.4360747*u+.3850649*i+.1430804*l)/Pm),y=ih((.0139322*u+.0971045*i+.7141733*l)/Im));const C=116*x-16;return[C<0?0:C,500*(g-x),200*(x-y),h]}function nh(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function ih(u){return u>Mm?Math.pow(u,1/3):u/Em+Am}function Rm([u,i,l,h]){let g=(u+16)/116,y=isNaN(i)?g:g+i/500,x=isNaN(l)?g:g-l/200;return g=1*hc(g),y=Pm*hc(y),x=Im*hc(x),[dc(3.1338561*y-1.6168667*g-.4906146*x),dc(-.9787684*y+1.9161415*g+.033454*x),dc(.0719453*y-.2289914*g+1.4052427*x),h]}function dc(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function hc(u){return u>Ro?u*u*u:Em*(u-Am)}const Ga=Object.hasOwn||function(u,i){return Object.prototype.hasOwnProperty.call(u,i)};function Bn(u,i){return Ga(u,i)?u[i]:void 0}function is(u){return parseInt(u.padEnd(2,u),16)/255}function rs(u,i){return Qs(i?u/100:u,0,1)}function Qs(u,i,l){return Math.min(Math.max(i,u),l)}function rh(u){return!u.some(Number.isNaN)}const ah={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ba(u,i,l){return u+l*(i-u)}function as(u,i,l){return u.map((h,g)=>ba(h,i[g],l))}class On{constructor(i,l,h,g=1,y=!0){this.r=i,this.g=l,this.b=h,this.a=g,y||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,l,h,g]))}static parse(i){if(i instanceof On)return i;if(typeof i!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Bn(ah,h);if(g){const[x,C,E]=g;return[x/255,C/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let C=1;return[is(h.slice(C,C+=x)),is(h.slice(C,C+=x)),is(h.slice(C,C+=x)),is(h.slice(C,C+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[C,E,D,V,N,W,X,J,re,pe,xe,Ne]=x,Pe=[V||" ",X||" ",pe].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const K=[D,W,re].join(""),fe=K==="%%%"?100:K===""?255:0;if(fe){const Ae=[Qs(+E/fe,0,1),Qs(+N/fe,0,1),Qs(+J/fe,0,1),xe?rs(+xe,Ne):1];if(rh(Ae))return Ae}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,C,E,D,V,N,W,X,J]=y,re=[E||" ",V||" ",W].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){const pe=[+C,Qs(+D,0,100),Qs(+N,0,100),X?rs(+X,J):1];if(rh(pe))return function([xe,Ne,Pe,K]){function fe(Ae){const rt=(Ae+xe/30)%12,Et=Ne*Math.min(Pe,1-Pe);return Pe-Et*Math.max(-1,Math.min(rt-3,9-rt,1))}return xe=Dm(xe),Ne/=100,Pe/=100,[fe(0),fe(8),fe(4),K]}(pe)}}}(i);return l?new On(...l,!1):void 0}get rgb(){const{r:i,g:l,b:h,a:g}=this,y=g||1/0;return this.overwriteGetter("rgb",[i/y,l/y,h/y,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[l,h,g,y]=Lo(i),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Dm(Math.atan2(g,h)*mv):NaN,x,l,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Lo(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,h,g]=this.rgb;return`rgba(${[i,l,h].map(y=>Math.round(255*y)).join(",")},${g})`}static interpolate(i,l,h,g="rgb"){switch(g){case"rgb":{const[y,x,C,E]=as(i.rgb,l.rgb,h);return new On(y,x,C,E,!1)}case"hcl":{const[y,x,C,E]=i.hcl,[D,V,N,W]=l.hcl;let X,J;if(isNaN(y)||isNaN(D))isNaN(y)?isNaN(D)?X=NaN:(X=D,C!==1&&C!==0||(J=V)):(X=y,N!==1&&N!==0||(J=x));else{let Pe=D-y;D>y&&Pe>180?Pe-=360:D<y&&y-D>180&&(Pe+=360),X=y+h*Pe}const[re,pe,xe,Ne]=function([Pe,K,fe,Ae]){return Pe=isNaN(Pe)?0:Pe*Ol,Rm([fe,Math.cos(Pe)*K,Math.sin(Pe)*K,Ae])}([X,J??ba(x,V,h),ba(C,N,h),ba(E,W,h)]);return new On(re,pe,xe,Ne,!1)}case"lab":{const[y,x,C,E]=Rm(as(i.lab,l.lab,h));return new On(y,x,C,E,!1)}}}}On.black=new On(0,0,0,1),On.white=new On(1,1,1,1),On.transparent=new On(0,0,0,0),On.red=new On(1,0,0,1);class Fl{constructor(i,l,h){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const fc=["bottom","center","top"];class sh{constructor(i,l,h,g,y,x){this.text=i,this.image=l,this.scale=h,this.fontStack=g,this.textColor=y,this.verticalAlign=x}}class Ir{constructor(i){this.sections=i}static fromString(i){return new Ir([new sh(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Ir?i:Ir.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Gi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Gi)return i;if(typeof i=="number")return new Gi([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Gi(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){return new Gi(as(i.values,l.values,h))}}class Ar{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ar)return i;if(typeof i=="number")return new Ar([i]);if(Array.isArray(i)){for(const l of i)if(typeof l!="number")return;return new Ar(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){return new Ar(as(i.values,l.values,h))}}class rr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof rr)return i;if(typeof i=="string"){const h=On.parse(i);return h?new rr([h]):void 0}if(!Array.isArray(i))return;const l=[];for(const h of i){if(typeof h!="string")return;const g=On.parse(h);if(!g)return;l.push(g)}return new rr(l)}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h,g="rgb"){const y=[];if(i.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let x=0;x<i.values.length;x++)y.push(On.interpolate(i.values[x],l.values[x],h,g));return new rr(y)}}class xi extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const mc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Gn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Gn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const h=i[l],g=i[l+1];if(typeof h!="string"||!mc.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Gn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,h){const g=i.values,y=l.values;if(g.length!==y.length)throw new xi(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${l.toString()}`);const x=[];for(let C=0;C<g.length;C+=2){if(g[C]!==y[C])throw new xi(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${g[C]}, to[${C}]: ${y[C]}`);x.push(g[C]);const[E,D]=g[C+1],[V,N]=y[C+1];x.push([ba(E,V,h),ba(D,N,h)])}return new Gn(x)}}class Zr{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Zr({name:i,available:!1}):null}}class Sn{constructor(i,l,h){this.from=i,this.to=l,this.transition=h}static interpolate(i,l,h){return new Sn(i,l,h)}static parse(i){return i instanceof Sn?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new Sn(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new Sn(i.from,i.to,i.transition):typeof i=="string"?new Sn(i,i,1):void 0}}function Cn(u,i,l,h){return typeof u=="number"&&u>=0&&u<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[u,i,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[u,i,l,h]:[u,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Sn||u instanceof On||u instanceof Fl||u instanceof Ir||u instanceof Gi||u instanceof Ar||u instanceof rr||u instanceof Gn||u instanceof Zr)return!0;if(Array.isArray(u)){for(const i of u)if(!eo(i))return!1;return!0}if(typeof u=="object"){for(const i in u)if(!eo(u[i]))return!1;return!0}return!1}function pn(u){if(u===null)return Ys;if(typeof u=="string")return An;if(typeof u=="boolean")return En;if(typeof u=="number")return Gt;if(u instanceof On)return oa;if(u instanceof Sn)return uc;if(u instanceof Fl)return ts;if(u instanceof Ir)return Xs;if(u instanceof Gi)return Fi;if(u instanceof Ar)return zl;if(u instanceof rr)return Ll;if(u instanceof Gn)return Vl;if(u instanceof Zr)return ns;if(Array.isArray(u)){const i=u.length;let l;for(const h of u){const g=pn(h);if(l){if(l===g)continue;l=Mn;break}l=g}return la(l||Mn,i)}return Ua}function to(u){const i=typeof u;return u===null?"":i==="string"||i==="number"||i==="boolean"?String(u):u instanceof On||u instanceof Sn||u instanceof Ir||u instanceof Gi||u instanceof Ar||u instanceof rr||u instanceof Gn||u instanceof Zr?u.toString():JSON.stringify(u)}class Fr{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!eo(i[1]))return l.error("invalid value");const h=i[1];let g=pn(h);const y=l.expectedType;return g.kind!=="array"||g.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(g=y),new Fr(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const zo={string:An,number:Gt,boolean:En,object:Ua};class xa{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h,g=1;const y=i[0];if(y==="array"){let C,E;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in zo)||D==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);C=zo[D],g++}else C=Mn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=i[2],g++}h=la(C,E)}else{if(!zo[y])throw new Error(`Types doesn't contain name = ${y}`);h=zo[y]}const x=[];for(;g<i.length;g++){const C=l.parse(i[g],g,Mn);if(!C)return null;x.push(C)}return new xa(h,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(i);if(!Bl(this.type,pn(h)))return h;if(l===this.args.length-1)throw new xi(`Expected value to be of type ${bi(this.type)}, but found ${bi(pn(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const oh={"to-boolean":En,"to-color":oa,"to-number":Gt,"to-string":An};class qa{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[0];if(!oh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return l.error("Expected one argument.");const g=oh[h],y=[];for(let x=1;x<i.length;x++){const C=l.parse(i[x],x,Mn);if(!C)return null;y.push(C)}return new qa(g,y)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,h;for(const g of this.args){if(l=g.evaluate(i),h=null,l instanceof On)return l;if(typeof l=="string"){const y=i.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Cn(l[0],l[1],l[2],l[3]),!h))return new On(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new xi(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(i);const g=Gi.parse(l);if(g)return g}throw new xi(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const h of this.args){l=h.evaluate(i);const g=Ar.parse(l);if(g)return g}throw new xi(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const h of this.args){l=h.evaluate(i);const g=rr.parse(l);if(g)return g}throw new xi(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(i);const g=Gn.parse(l);if(g)return g}throw new xi(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(i),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new xi(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Ir.fromString(to(this.args[0].evaluate(i)));case"resolvedImage":return Zr.fromString(to(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return to(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Lm=["Unknown","Point","LineString","Polygon"];class zm{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Lm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache.get(i);return l||(l=On.parse(i),this._parseColorCache.set(i,l)),l}}class $l{constructor(i,l,h=[],g,y=new Ss,x=[]){this.registry=i,this.path=h,this.key=h.map(C=>`[${C}]`).join(""),this.scope=y,this.errors=x,this.expectedType=g,this._isConstant=l}parse(i,l,h,g,y={}){return l?this.concat(l,h,g)._parse(i,y):this._parse(i,y)}_parse(i,l){function h(g,y,x){return x==="assert"?new xa(y,[g]):x==="coerce"?new qa(y,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[g];if(y){let x=y.parse(i,this);if(!x)return null;if(this.expectedType){const C=this.expectedType,E=x.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||E.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(E.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(E.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(E.kind)||C.kind==="colorArray"&&["value","string","array"].includes(E.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(E.kind))x=h(x,C,l.typeAnnotation||"coerce");else if(this.checkSubtype(C,E))return null}else x=h(x,C,l.typeAnnotation||"assert")}if(!(x instanceof Fr)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const C=new zm;try{x=new Fr(x.type,x.evaluate(C))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,h){const g=typeof i=="number"?this.path.concat(i):this.path,y=h?this.scope.concat(h):this.scope;return new $l(this.registry,this._isConstant,g,l||null,y,this.errors)}error(i,...l){const h=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new yi(h,i))}checkSubtype(i,l){const h=Bl(i,l);return h&&this.error(h),h}}class jl{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let y=1;y<i.length-1;y+=2){const x=i[y];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);const C=l.parse(i[y+1],y+1);if(!C)return null;h.push([x,C])}const g=l.parse(i[i.length-1],i.length-1,l.expectedType,h);return g?new jl(h,g):null}outputDefined(){return this.result.outputDefined()}}class Ia{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=i[1];return l.scope.has(h)?new Ia(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class ar{constructor(i,l,h){this.type=i,this.index=l,this.input=h}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Gt),g=l.parse(i[2],2,la(l.expectedType||Mn));return h&&g?new ar(g.type.itemType,h,g):null}evaluate(i){const l=this.index.evaluate(i),h=this.input.evaluate(i);if(l<0)throw new xi(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new xi(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new xi(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Vo{constructor(i,l){this.type=En,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Mn),g=l.parse(i[2],2,Mn);return h&&g?cc(h.type,[En,An,Gt,Ys,Mn])?new Vo(h,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(h.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!Js(l,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${bi(pn(l))} instead.`);if(!Js(h,["string","array"]))throw new xi(`Expected second argument to be of type array or string, but found ${bi(pn(h))} instead.`);return h.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Nl{constructor(i,l,h){this.type=Gt,this.needle=i,this.haystack=l,this.fromIndex=h}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Mn),g=l.parse(i[2],2,Mn);if(!h||!g)return null;if(!cc(h.type,[En,An,Gt,Ys,Mn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(h.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Gt);return y?new Nl(h,g,y):null}return new Nl(h,g)}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!Js(l,["boolean","string","number","null"]))throw new xi(`Expected first argument to be of type boolean, string, number or null, but found ${bi(pn(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(i)),Js(h,["string"])){const y=h.indexOf(l,g);return y===-1?-1:[...h.slice(0,y)].length}if(Js(h,["array"]))return h.indexOf(l,g);throw new xi(`Expected second argument to be of type array or string, but found ${bi(pn(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Bo{constructor(i,l,h,g,y,x){this.inputType=i,this.type=l,this.input=h,this.cases=g,this.outputs=y,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let h,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const y={},x=[];for(let D=2;D<i.length-1;D+=2){let V=i[D];const N=i[D+1];Array.isArray(V)||(V=[V]);const W=l.concat(D);if(V.length===0)return W.error("Expected at least one branch label.");for(const J of V){if(typeof J!="number"&&typeof J!="string")return W.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return W.error("Numeric branch labels must be integer values.");if(h){if(W.checkSubtype(h,pn(J)))return null}else h=pn(J);if(y[String(J)]!==void 0)return W.error("Branch labels must be unique.");y[String(J)]=x.length}const X=l.parse(N,D,g);if(!X)return null;g=g||X.type,x.push(X)}const C=l.parse(i[1],1,Mn);if(!C)return null;const E=l.parse(i[i.length-1],i.length-1,g);return E?C.type.kind!=="value"&&l.concat(1).checkSubtype(h,C.type)?null:new Bo(h,g,C,y,x,E):null}evaluate(i){const l=this.input.evaluate(i);return(pn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class qi{constructor(i,l,h){this.type=i,this.branches=l,this.otherwise=h}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const g=[];for(let x=1;x<i.length-1;x+=2){const C=l.parse(i[x],x,En);if(!C)return null;const E=l.parse(i[x+1],x+1,h);if(!E)return null;g.push([C,E]),h=h||E.type}const y=l.parse(i[i.length-1],i.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new qi(h,g,y)}evaluate(i){for(const[l,h]of this.branches)if(l.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,h]of this.branches)i(l),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Ul{constructor(i,l,h,g){this.type=i,this.input=l,this.beginIndex=h,this.endIndex=g}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Mn),g=l.parse(i[2],2,Gt);if(!h||!g)return null;if(!cc(h.type,[la(Mn),An,Mn]))return l.error(`Expected first argument to be of type array or string, but found ${bi(h.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Gt);return y?new Ul(h.type,h,g,y):null}return new Ul(h.type,h,g)}evaluate(i){const l=this.input.evaluate(i),h=this.beginIndex.evaluate(i);let g;if(this.endIndex&&(g=this.endIndex.evaluate(i)),Js(l,["string"]))return[...l].slice(h,g).join("");if(Js(l,["array"]))return l.slice(h,g);throw new xi(`Expected first argument to be of type array or string, but found ${bi(pn(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Oo(u,i){const l=u.length-1;let h,g,y=0,x=l,C=0;for(;y<=x;)if(C=Math.floor((y+x)/2),h=u[C],g=u[C+1],h<=i){if(C===l||i<g)return C;y=C+1}else{if(!(h>i))throw new xi("Input is not a number.");x=C-1}return 0}class Fo{constructor(i,l,h){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[g,y]of h)this.labels.push(g),this.outputs.push(y)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(i[1],1,Gt);if(!h)return null;const g=[];let y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let x=1;x<i.length;x+=2){const C=x===1?-1/0:i[x],E=i[x+1],D=x,V=x+1;if(typeof C!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=C)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const N=l.parse(E,V,y);if(!N)return null;y=y||N.type,g.push([C,N])}return new Fo(y,h,g)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return h[0].evaluate(i);const y=l.length;return g>=l[y-1]?h[y-1].evaluate(i):h[Oo(l,g)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function pv(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Cs,Gl,lh=function(){if(Gl)return Cs;function u(i,l,h,g){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=h,this.p2y=g}return Gl=1,Cs=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,g=0;g<8;g++){var y=this.sampleCurveX(h)-i;if(Math.abs(y)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=y/x}var C=0,E=1;for(h=i,g=0;g<20&&(y=this.sampleCurveX(h),!(Math.abs(y-i)<l));g++)i>y?C=h:E=h,h=.5*(E-C)+C;return h},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},Cs}(),gv=pv(lh);class $r{constructor(i,l,h,g,y){this.type=i,this.operator=l,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,C]of y)this.labels.push(x),this.outputs.push(C)}static interpolationFactor(i,l,h,g){let y=0;if(i.name==="exponential")y=$o(l,i.base,h,g);else if(i.name==="linear")y=$o(l,1,h,g);else if(i.name==="cubic-bezier"){const x=i.controlPoints;y=new gv(x[0],x[1],x[2],x[3]).solve($o(l,1,h,g))}return y}static parse(i,l){let[h,g,y,...x]=i;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some(V=>typeof V!="number"||V<0||V>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Gt),!y)return null;const C=[];let E=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||l.expectedType==Ll?l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType):E=oa;for(let D=0;D<x.length;D+=2){const V=x[D],N=x[D+1],W=D+3,X=D+4;if(typeof V!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(C.length&&C[C.length-1][0]>=V)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const J=l.parse(N,X,E);if(!J)return null;E=E||J.type,C.push([V,J])}return ks(E,Gt)||ks(E,uc)||ks(E,oa)||ks(E,Fi)||ks(E,zl)||ks(E,Ll)||ks(E,Vl)||ks(E,la(Gt))?new $r(E,h,g,y,C):l.error(`Type ${bi(E)} is not interpolatable.`)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return h[0].evaluate(i);const y=l.length;if(g>=l[y-1])return h[y-1].evaluate(i);const x=Oo(l,g),C=$r.interpolationFactor(this.interpolation,g,l[x],l[x+1]),E=h[x].evaluate(i),D=h[x+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ba(E,D,C);case"color":return On.interpolate(E,D,C);case"padding":return Gi.interpolate(E,D,C);case"colorArray":return rr.interpolate(E,D,C);case"numberArray":return Ar.interpolate(E,D,C);case"variableAnchorOffsetCollection":return Gn.interpolate(E,D,C);case"array":return as(E,D,C);case"projectionDefinition":return Sn.interpolate(E,D,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return On.interpolate(E,D,C,"hcl");case"colorArray":return rr.interpolate(E,D,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return On.interpolate(E,D,C,"lab");case"colorArray":return rr.interpolate(E,D,C,"lab")}}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function $o(u,i,l,h){const g=h-l,y=u-l;return g===0?0:i===1?y/g:(Math.pow(i,y)-1)/(Math.pow(i,g)-1)}const ua={color:On.interpolate,number:ba,padding:Gi.interpolate,numberArray:Ar.interpolate,colorArray:rr.interpolate,variableAnchorOffsetCollection:Gn.interpolate,array:as};class Kr{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h=null;const g=l.expectedType;g&&g.kind!=="value"&&(h=g);const y=[];for(const C of i.slice(1)){const E=l.parse(C,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,y.push(E)}if(!h)throw new Error("No output type");const x=g&&y.some(C=>Bl(g,C.type));return new Kr(x?Mn:h,y)}evaluate(i){let l,h=null,g=0;for(const y of this.args)if(g++,h=y.evaluate(i),h&&h instanceof Zr&&!h.available&&(l||(l=h.name),h=null,g===this.args.length&&(h=l)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function uh(u,i){return u==="=="||u==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function ql(u,i,l,h){return h.compare(i,l)===0}function jo(u,i,l){const h=u!=="=="&&u!=="!=";return class qI{constructor(y,x,C){this.type=En,this.lhs=y,this.rhs=x,this.collator=C,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const C=y[0];let E=x.parse(y[1],1,Mn);if(!E)return null;if(!uh(C,E.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${bi(E.type)}'.`);let D=x.parse(y[2],2,Mn);if(!D)return null;if(!uh(C,D.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${bi(D.type)}'.`);if(E.type.kind!==D.type.kind&&E.type.kind!=="value"&&D.type.kind!=="value")return x.error(`Cannot compare types '${bi(E.type)}' and '${bi(D.type)}'.`);h&&(E.type.kind==="value"&&D.type.kind!=="value"?E=new xa(D.type,[E]):E.type.kind!=="value"&&D.type.kind==="value"&&(D=new xa(E.type,[D])));let V=null;if(y.length===4){if(E.type.kind!=="string"&&D.type.kind!=="string"&&E.type.kind!=="value"&&D.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(V=x.parse(y[3],3,ts),!V)return null}return new qI(E,D,V)}evaluate(y){const x=this.lhs.evaluate(y),C=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const E=pn(x),D=pn(C);if(E.kind!==D.kind||E.kind!=="string"&&E.kind!=="number")throw new xi(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${E.kind}, ${D.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=pn(x),D=pn(C);if(E.kind!=="string"||D.kind!=="string")return i(y,x,C)}return this.collator?l(y,x,C,this.collator.evaluate(y)):i(y,x,C)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const ch=jo("==",function(u,i,l){return i===l},ql),vv=jo("!=",function(u,i,l){return i!==l},function(u,i,l,h){return!ql(0,i,l,h)}),_v=jo("<",function(u,i,l){return i<l},function(u,i,l,h){return h.compare(i,l)<0}),yv=jo(">",function(u,i,l){return i>l},function(u,i,l,h){return h.compare(i,l)>0}),bv=jo("<=",function(u,i,l){return i<=l},function(u,i,l,h){return h.compare(i,l)<=0}),pc=jo(">=",function(u,i,l){return i>=l},function(u,i,l,h){return h.compare(i,l)>=0});class gc{constructor(i,l,h){this.type=ts,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const g=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,En);if(!g)return null;const y=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,En);if(!y)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,An),!x)?null:new gc(g,y,x)}evaluate(i){return new Fl(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class vc{constructor(i,l,h,g,y){this.type=An,this.number=i,this.locale=l,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const h=l.parse(i[1],1,Gt);if(!h)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let y=null;if(g.locale&&(y=l.parse(g.locale,1,An),!y))return null;let x=null;if(g.currency&&(x=l.parse(g.currency,1,An),!x))return null;let C=null;if(g["min-fraction-digits"]&&(C=l.parse(g["min-fraction-digits"],1,Gt),!C))return null;let E=null;return g["max-fraction-digits"]&&(E=l.parse(g["max-fraction-digits"],1,Gt),!E)?null:new vc(h,y,x,C,E)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Hl{constructor(i){this.type=Xs,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const g=[];let y=!1;for(let x=1;x<=i.length-1;++x){const C=i[x];if(y&&typeof C=="object"&&!Array.isArray(C)){y=!1;let E=null;if(C["font-scale"]&&(E=l.parse(C["font-scale"],1,Gt),!E))return null;let D=null;if(C["text-font"]&&(D=l.parse(C["text-font"],1,la(An)),!D))return null;let V=null;if(C["text-color"]&&(V=l.parse(C["text-color"],1,oa),!V))return null;let N=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!fc.includes(C["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(N=l.parse(C["vertical-align"],1,An),!N)return null}const W=g[g.length-1];W.scale=E,W.font=D,W.textColor=V,W.verticalAlign=N}else{const E=l.parse(i[x],1,Mn);if(!E)return null;const D=E.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,g.push({content:E,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Hl(g)}evaluate(i){return new Ir(this.sections.map(l=>{const h=l.content.evaluate(i);return pn(h)===ns?new sh("",h,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(i):null):new sh(to(h),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null,l.verticalAlign?l.verticalAlign.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor),l.verticalAlign&&i(l.verticalAlign)}outputDefined(){return!1}}class dh{constructor(i){this.type=ns,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const h=l.parse(i[1],1,An);return h?new dh(h):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),h=Zr.fromString(l);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(l)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class _c{constructor(i){this.type=Gt,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=l.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${bi(h.type)} instead.`):new _c(h):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new xi(`Expected value to be of type string or array, but found ${bi(pn(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Ha=8192;function xv(u,i){const l=(180+u[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(l*g*Ha),Math.round(h*g*Ha)]}function hh(u,i){const l=Math.pow(2,i.z);return[(g=(u[0]/Ha+i.x)/l,360*g-180),(h=(u[1]/Ha+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function Wl(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function Zl(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function Vm(u,i,l){const h=u[0]-i[0],g=u[1]-i[1],y=u[0]-l[0],x=u[1]-l[1];return h*x-y*g==0&&h*y<=0&&g*x<=0}function Kl(u,i,l,h){return(g=[h[0]-l[0],h[1]-l[1]])[0]*(y=[i[0]-u[0],i[1]-u[1]])[1]-g[1]*y[0]!=0&&!(!yc(u,i,l,h)||!yc(l,h,u,i));var g,y}function Bm(u,i,l){for(const h of l)for(let g=0;g<h.length-1;++g)if(Kl(u,i,h[g],h[g+1]))return!0;return!1}function No(u,i,l=!1){let h=!1;for(const C of i)for(let E=0;E<C.length-1;E++){if(Vm(u,C[E],C[E+1]))return l;(y=C[E])[1]>(g=u)[1]!=(x=C[E+1])[1]>g[1]&&g[0]<(x[0]-y[0])*(g[1]-y[1])/(x[1]-y[1])+y[0]&&(h=!h)}var g,y,x;return h}function wv(u,i){for(const l of i)if(No(u,l))return!0;return!1}function Om(u,i){for(const l of u)if(!No(l,i))return!1;for(let l=0;l<u.length-1;++l)if(Bm(u[l],u[l+1],i))return!1;return!0}function Sv(u,i){for(const l of i)if(Om(u,l))return!0;return!1}function yc(u,i,l,h){const g=h[0]-l[0],y=h[1]-l[1],x=(u[0]-l[0])*y-g*(u[1]-l[1]),C=(i[0]-l[0])*y-g*(i[1]-l[1]);return x>0&&C<0||x<0&&C>0}function fh(u,i,l){const h=[];for(let g=0;g<u.length;g++){const y=[];for(let x=0;x<u[g].length;x++){const C=xv(u[g][x],l);Wl(i,C),y.push(C)}h.push(y)}return h}function Fm(u,i,l){const h=[];for(let g=0;g<u.length;g++){const y=fh(u[g],i,l);h.push(y)}return h}function $m(u,i,l,h){if(u[0]<l[0]||u[0]>l[2]){const g=.5*h;let y=u[0]-l[0]>g?-h:l[0]-u[0]>g?h:0;y===0&&(y=u[0]-l[2]>g?-h:l[2]-u[0]>g?h:0),u[0]+=y}Wl(i,u)}function mh(u,i,l,h){const g=Math.pow(2,h.z)*Ha,y=[h.x*Ha,h.y*Ha],x=[];for(const C of u)for(const E of C){const D=[E.x+y[0],E.y+y[1]];$m(D,i,l,g),x.push(D)}return x}function ph(u,i,l,h){const g=Math.pow(2,h.z)*Ha,y=[h.x*Ha,h.y*Ha],x=[];for(const E of u){const D=[];for(const V of E){const N=[V.x+y[0],V.y+y[1]];Wl(i,N),D.push(N)}x.push(D)}if(i[2]-i[0]<=g/2){(C=i)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const E of x)for(const D of E)$m(D,i,l,g)}var C;return x}class no{constructor(i,l){this.type=En,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(eo(i[1])){const h=i[1];if(h.type==="FeatureCollection"){const g=[];for(const y of h.features){const{type:x,coordinates:C}=y.geometry;x==="Polygon"&&g.push(C),x==="MultiPolygon"&&g.push(...C)}if(g.length)return new no(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new no(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new no(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const C=fh(h.coordinates,y,x),E=mh(l.geometry(),g,y,x);if(!Zl(g,y))return!1;for(const D of E)if(!No(D,C))return!1}if(h.type==="MultiPolygon"){const C=Fm(h.coordinates,y,x),E=mh(l.geometry(),g,y,x);if(!Zl(g,y))return!1;for(const D of E)if(!wv(D,C))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const C=fh(h.coordinates,y,x),E=ph(l.geometry(),g,y,x);if(!Zl(g,y))return!1;for(const D of E)if(!Om(D,C))return!1}if(h.type==="MultiPolygon"){const C=Fm(h.coordinates,y,x),E=ph(l.geometry(),g,y,x);if(!Zl(g,y))return!1;for(const D of E)if(!Sv(D,C))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let jm=class{constructor(u=[],i=(l,h)=>l<h?-1:l>h?1:0){if(this.data=u,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:i,compare:l}=this,h=i[u];for(;u>0;){const g=u-1>>1,y=i[g];if(l(h,y)>=0)break;i[u]=y,u=g}i[u]=h}_down(u){const{data:i,compare:l}=this,h=this.length>>1,g=i[u];for(;u<h;){let y=1+(u<<1);const x=y+1;if(x<this.length&&l(i[x],i[y])<0&&(y=x),l(i[y],g)>=0)break;i[u]=i[y],u=y}i[u]=g}};function gh(u,i,l=0,h=u.length-1,g=kv){for(;h>l;){if(h-l>600){const E=h-l+1,D=i-l+1,V=Math.log(E),N=.5*Math.exp(2*V/3),W=.5*Math.sqrt(V*N*(E-N)/E)*(D-E/2<0?-1:1);gh(u,i,Math.max(l,Math.floor(i-D*N/E+W)),Math.min(h,Math.floor(i+(E-D)*N/E+W)),g)}const y=u[i];let x=l,C=h;for(Uo(u,l,i),g(u[h],y)>0&&Uo(u,l,h);x<C;){for(Uo(u,x,C),x++,C--;g(u[x],y)<0;)x++;for(;g(u[C],y)>0;)C--}g(u[l],y)===0?Uo(u,l,C):(C++,Uo(u,C,h)),C<=i&&(l=C+1),i<=C&&(h=C-1)}}function Uo(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}function kv(u,i){return u<i?-1:u>i?1:0}function bc(u,i){if(u.length<=1)return[u];const l=[];let h,g;for(const y of u){const x=Nm(y);x!==0&&(y.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&l.push(h),h=[y]):h.push(y))}if(h&&l.push(h),i>1)for(let y=0;y<l.length;y++)l[y].length<=i||(gh(l[y],i,1,l[y].length-1,Cv),l[y]=l[y].slice(0,i));return l}function Cv(u,i){return i.area-u.area}function Nm(u){let i=0;for(let l,h,g=0,y=u.length,x=y-1;g<y;x=g++)l=u[g],h=u[x],i+=(h.x-l.x)*(l.y+h.y);return i}const Um=1/298.257223563,Gm=Um*(2-Um),qm=Math.PI/180;class vh{constructor(i){const l=6378.137*qm*1e3,h=Math.cos(i*qm),g=1/(1-Gm*(1-h*h)),y=Math.sqrt(g);this.kx=l*y*h,this.ky=l*y*g*(1-Gm)}distance(i,l){const h=this.wrap(i[0]-l[0])*this.kx,g=(i[1]-l[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(i,l){let h,g,y,x,C=1/0;for(let E=0;E<i.length-1;E++){let D=i[E][0],V=i[E][1],N=this.wrap(i[E+1][0]-D)*this.kx,W=(i[E+1][1]-V)*this.ky,X=0;N===0&&W===0||(X=(this.wrap(l[0]-D)*this.kx*N+(l[1]-V)*this.ky*W)/(N*N+W*W),X>1?(D=i[E+1][0],V=i[E+1][1]):X>0&&(D+=N/this.kx*X,V+=W/this.ky*X)),N=this.wrap(l[0]-D)*this.kx,W=(l[1]-V)*this.ky;const J=N*N+W*W;J<C&&(C=J,h=D,g=V,y=E,x=X)}return{point:[h,g],index:y,t:Math.max(0,Math.min(1,x))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Kn(u,i){return i[0]-u[0]}function xc(u){return u[1]-u[0]+1}function ss(u,i){return u[1]>=u[0]&&u[1]<i}function _h(u,i){if(u[0]>u[1])return[null,null];const l=xc(u);if(i){if(l===2)return[u,null];const g=Math.floor(l/2);return[[u[0],u[0]+g],[u[0]+g,u[1]]]}if(l===1)return[u,null];const h=Math.floor(l/2)-1;return[[u[0],u[0]+h],[u[0]+h+1,u[1]]]}function yh(u,i){if(!ss(i,u.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)Wl(l,u[h]);return l}function bh(u){const i=[1/0,1/0,-1/0,-1/0];for(const l of u)for(const h of l)Wl(i,h);return i}function Hm(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function xh(u,i,l){if(!Hm(u)||!Hm(i))return NaN;let h=0,g=0;return u[2]<i[0]&&(h=i[0]-u[2]),u[0]>i[2]&&(h=u[0]-i[2]),u[1]>i[3]&&(g=u[1]-i[3]),u[3]<i[1]&&(g=i[1]-u[3]),l.distance([0,0],[h,g])}function io(u,i,l){const h=l.pointOnLine(i,u);return l.distance(u,h.point)}function wh(u,i,l,h,g){const y=Math.min(io(u,[l,h],g),io(i,[l,h],g)),x=Math.min(io(l,[u,i],g),io(h,[u,i],g));return Math.min(y,x)}function Tv(u,i,l,h,g){if(!ss(i,u.length)||!ss(h,l.length))return 1/0;let y=1/0;for(let x=i[0];x<i[1];++x){const C=u[x],E=u[x+1];for(let D=h[0];D<h[1];++D){const V=l[D],N=l[D+1];if(Kl(C,E,V,N))return 0;y=Math.min(y,wh(C,E,V,N,g))}}return y}function Pv(u,i,l,h,g){if(!ss(i,u.length)||!ss(h,l.length))return NaN;let y=1/0;for(let x=i[0];x<=i[1];++x)for(let C=h[0];C<=h[1];++C)if(y=Math.min(y,g.distance(u[x],l[C])),y===0)return y;return y}function Iv(u,i,l){if(No(u,i,!0))return 0;let h=1/0;for(const g of i){const y=g[0],x=g[g.length-1];if(y!==x&&(h=Math.min(h,io(u,[x,y],l)),h===0))return h;const C=l.pointOnLine(g,u);if(h=Math.min(h,l.distance(u,C.point)),h===0)return h}return h}function Av(u,i,l,h){if(!ss(i,u.length))return NaN;for(let y=i[0];y<=i[1];++y)if(No(u[y],l,!0))return 0;let g=1/0;for(let y=i[0];y<i[1];++y){const x=u[y],C=u[y+1];for(const E of l)for(let D=0,V=E.length,N=V-1;D<V;N=D++){const W=E[N],X=E[D];if(Kl(x,C,W,X))return 0;g=Math.min(g,wh(x,C,W,X,h))}}return g}function Wm(u,i){for(const l of u)for(const h of l)if(No(h,i,!0))return!0;return!1}function Ev(u,i,l,h=1/0){const g=bh(u),y=bh(i);if(h!==1/0&&xh(g,y,l)>=h)return h;if(Zl(g,y)){if(Wm(u,i))return 0}else if(Wm(i,u))return 0;let x=1/0;for(const C of u)for(let E=0,D=C.length,V=D-1;E<D;V=E++){const N=C[V],W=C[E];for(const X of i)for(let J=0,re=X.length,pe=re-1;J<re;pe=J++){const xe=X[pe],Ne=X[J];if(Kl(N,W,xe,Ne))return 0;x=Math.min(x,wh(N,W,xe,Ne,l))}}return x}function Zm(u,i,l,h,g,y){if(!y)return;const x=xh(yh(h,y),g,l);x<i&&u.push([x,y,[0,0]])}function wc(u,i,l,h,g,y,x){if(!y||!x)return;const C=xh(yh(h,y),yh(g,x),l);C<i&&u.push([C,y,x])}function Sc(u,i,l,h,g=1/0){let y=Math.min(h.distance(u[0],l[0][0]),g);if(y===0)return y;const x=new jm([[0,[0,u.length-1],[0,0]]],Kn),C=bh(l);for(;x.length>0;){const E=x.pop();if(E[0]>=y)continue;const D=E[1],V=i?50:100;if(xc(D)<=V){if(!ss(D,u.length))return NaN;if(i){const N=Av(u,D,l,h);if(isNaN(N)||N===0)return N;y=Math.min(y,N)}else for(let N=D[0];N<=D[1];++N){const W=Iv(u[N],l,h);if(y=Math.min(y,W),y===0)return 0}}else{const N=_h(D,i);Zm(x,y,h,u,C,N[0]),Zm(x,y,h,u,C,N[1])}}return y}function kc(u,i,l,h,g,y=1/0){let x=Math.min(y,g.distance(u[0],l[0]));if(x===0)return x;const C=new jm([[0,[0,u.length-1],[0,l.length-1]]],Kn);for(;C.length>0;){const E=C.pop();if(E[0]>=x)continue;const D=E[1],V=E[2],N=i?50:100,W=h?50:100;if(xc(D)<=N&&xc(V)<=W){if(!ss(D,u.length)&&ss(V,l.length))return NaN;let X;if(i&&h)X=Tv(u,D,l,V,g),x=Math.min(x,X);else if(i&&!h){const J=u.slice(D[0],D[1]+1);for(let re=V[0];re<=V[1];++re)if(X=io(l[re],J,g),x=Math.min(x,X),x===0)return x}else if(!i&&h){const J=l.slice(V[0],V[1]+1);for(let re=D[0];re<=D[1];++re)if(X=io(u[re],J,g),x=Math.min(x,X),x===0)return x}else X=Pv(u,D,l,V,g),x=Math.min(x,X)}else{const X=_h(D,i),J=_h(V,h);wc(C,x,g,u,l,X[0],J[0]),wc(C,x,g,u,l,X[0],J[1]),wc(C,x,g,u,l,X[1],J[0]),wc(C,x,g,u,l,X[1],J[1])}}return x}function Sh(u){return u.type==="MultiPolygon"?u.coordinates.map(i=>({type:"Polygon",coordinates:i})):u.type==="MultiLineString"?u.coordinates.map(i=>({type:"LineString",coordinates:i})):u.type==="MultiPoint"?u.coordinates.map(i=>({type:"Point",coordinates:i})):[u]}class ro{constructor(i,l){this.type=Gt,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(eo(i[1])){const h=i[1];if(h.type==="FeatureCollection")return new ro(h,h.features.map(g=>Sh(g.geometry)).flat());if(h.type==="Feature")return new ro(h,Sh(h.geometry));if("type"in h&&"coordinates"in h)return new ro(h,Sh(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const g=l.geometry(),y=g.flat().map(E=>hh([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new vh(y[0][1]);let C=1/0;for(const E of h){switch(E.type){case"Point":C=Math.min(C,kc(y,!1,[E.coordinates],!1,x,C));break;case"LineString":C=Math.min(C,kc(y,!1,E.coordinates,!0,x,C));break;case"Polygon":C=Math.min(C,Sc(y,!1,E.coordinates,x,C))}if(C===0)return C}return C}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const g=l.geometry(),y=g.flat().map(E=>hh([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new vh(y[0][1]);let C=1/0;for(const E of h){switch(E.type){case"Point":C=Math.min(C,kc(y,!0,[E.coordinates],!1,x,C));break;case"LineString":C=Math.min(C,kc(y,!0,E.coordinates,!0,x,C));break;case"Polygon":C=Math.min(C,Sc(y,!0,E.coordinates,x,C))}if(C===0)return C}return C}(i,this.geometries);if(i.geometryType()==="Polygon")return function(l,h){const g=l.geometry();if(g.length===0||g[0].length===0)return NaN;const y=bc(g,0).map(E=>E.map(D=>D.map(V=>hh([V.x,V.y],l.canonical)))),x=new vh(y[0][0][0][1]);let C=1/0;for(const E of h)for(const D of y){switch(E.type){case"Point":C=Math.min(C,Sc([E.coordinates],!1,D,x,C));break;case"LineString":C=Math.min(C,Sc(E.coordinates,!0,D,x,C));break;case"Polygon":C=Math.min(C,Ev(D,E.coordinates,x,C))}if(C===0)return C}return C}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Yl{constructor(i){this.type=Mn,this.key=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=i[1];return h==null?l.error("Global state property must be defined."):typeof h!="string"?l.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new Yl(h)}evaluate(i){var l;const h=(l=i.globals)===null||l===void 0?void 0:l.globalState;return h&&Object.keys(h).length!==0?Bn(h,this.key):null}eachChild(){}outputDefined(){return!1}}const Go={"==":ch,"!=":vv,">":yv,"<":_v,">=":pc,"<=":bv,array:xa,at:ar,boolean:xa,case:qi,coalesce:Kr,collator:gc,format:Hl,image:dh,in:Vo,"index-of":Nl,interpolate:$r,"interpolate-hcl":$r,"interpolate-lab":$r,length:_c,let:jl,literal:Fr,match:Bo,number:xa,"number-format":vc,object:xa,slice:Ul,step:Fo,string:xa,"to-boolean":qa,"to-color":qa,"to-number":qa,"to-string":qa,var:Ia,within:no,distance:ro,"global-state":Yl};class wa{constructor(i,l,h,g){this.name=i,this.type=l,this._evaluate=h,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const h=i[0],g=wa.definitions[h];if(!g)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=x.filter(([D])=>!Array.isArray(D)||D.length===i.length-1);let E=null;for(const[D,V]of C){E=new $l(l.registry,Cc,l.path,null,l.scope);const N=[];let W=!1;for(let X=1;X<i.length;X++){const J=i[X],re=Array.isArray(D)?D[X-1]:D.type,pe=E.parse(J,1+N.length,re);if(!pe){W=!0;break}N.push(pe)}if(!W)if(Array.isArray(D)&&D.length!==N.length)E.error(`Expected ${D.length} arguments, but found ${N.length} instead.`);else{for(let X=0;X<N.length;X++){const J=Array.isArray(D)?D[X]:D.type,re=N[X];E.concat(X+1).checkSubtype(J,re.type)}if(E.errors.length===0)return new wa(h,y,V,N)}}if(C.length===1)l.errors.push(...E.errors);else{const D=(C.length?C:x).map(([N])=>{return W=N,Array.isArray(W)?`(${W.map(bi).join(", ")})`:`(${bi(W.type)}...)`;var W}).join(" | "),V=[];for(let N=1;N<i.length;N++){const W=l.parse(i[N],1+V.length);if(!W)return null;V.push(bi(W.type))}l.error(`Expected arguments of type ${D}, but found (${V.join(", ")}) instead.`)}return null}static register(i,l){wa.definitions=l;for(const h in l)i[h]=wa}}function Km(u,[i,l,h,g]){i=i.evaluate(u),l=l.evaluate(u),h=h.evaluate(u);const y=g?g.evaluate(u):1,x=Cn(i,l,h,y);if(x)throw new xi(x);return new On(i/255,l/255,h/255,y,!1)}function Ym(u,i){return u in i}function kh(u,i){const l=i[u];return l===void 0?null:l}function ao(u){return{type:u}}function Cc(u){if(u instanceof Ia)return Cc(u.boundExpression);if(u instanceof wa&&u.name==="error"||u instanceof gc||u instanceof no||u instanceof ro||u instanceof Yl)return!1;const i=u instanceof qa||u instanceof xa;let l=!0;return u.eachChild(h=>{l=i?l&&Cc(h):l&&h instanceof Fr}),!!l&&Tc(u)&&qo(u,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Tc(u){if(u instanceof wa&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof no||u instanceof ro)return!1;let i=!0;return u.eachChild(l=>{i&&!Tc(l)&&(i=!1)}),i}function Xl(u){if(u instanceof wa&&u.name==="feature-state")return!1;let i=!0;return u.eachChild(l=>{i&&!Xl(l)&&(i=!1)}),i}function qo(u,i){if(u instanceof wa&&i.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(h=>{l&&!qo(h,i)&&(l=!1)}),l}function Xm(u){return{result:"success",value:u}}function Ho(u){return{result:"error",value:u}}function Wo(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Ch(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Th(u){return!!u.expression&&u.expression.interpolated}function Fn(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function so(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&pn(u)===Ua}function Jm(u){return u}function Qm(u,i){const l=u.stops&&typeof u.stops[0][0]=="object",h=l||!(l||u.property!==void 0),g=u.type||(Th(i)?"exponential":"interval"),y=function(V){switch(V.type){case"color":return On.parse;case"padding":return Gi.parse;case"numberArray":return Ar.parse;case"colorArray":return rr.parse;default:return null}}(i);if(y&&((u=pr({},u)).stops&&(u.stops=u.stops.map(V=>[V[0],y(V[1])])),u.default=y(u.default?u.default:i.default)),u.colorSpace&&(x=u.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var x;const C=function(V){switch(V){case"exponential":return ep;case"interval":return Dv;case"categorical":return Mv;case"identity":return tp;default:throw new Error(`Unknown function type "${V}"`)}}(g);let E,D;if(g==="categorical"){E=Object.create(null);for(const V of u.stops)E[V[0]]=V[1];D=typeof u.stops[0][0]}if(l){const V={},N=[];for(let J=0;J<u.stops.length;J++){const re=u.stops[J],pe=re[0].zoom;V[pe]===void 0&&(V[pe]={zoom:pe,type:u.type,property:u.property,default:u.default,stops:[]},N.push(pe)),V[pe].stops.push([re[0].value,re[1]])}const W=[];for(const J of N)W.push([V[J].zoom,Qm(V[J],i)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:$r.interpolationFactor.bind(void 0,X),zoomStops:W.map(J=>J[0]),evaluate:({zoom:J},re)=>ep({stops:W,base:u.base},i,J).evaluate(J,re)}}if(h){const V=g==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:$r.interpolationFactor.bind(void 0,V),zoomStops:u.stops.map(N=>N[0]),evaluate:({zoom:N})=>C(u,i,N,E,D)}}return{kind:"source",evaluate(V,N){const W=N&&N.properties?N.properties[u.property]:void 0;return W===void 0?Jl(u.default,i.default):C(u,i,W,E,D)}}}function Jl(u,i,l){return u!==void 0?u:i!==void 0?i:l!==void 0?l:void 0}function Mv(u,i,l,h,g){return Jl(typeof l===g?h[l]:void 0,u.default,i.default)}function Dv(u,i,l){if(Fn(l)!=="number")return Jl(u.default,i.default);const h=u.stops.length;if(h===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[h-1][0])return u.stops[h-1][1];const g=Oo(u.stops.map(y=>y[0]),l);return u.stops[g][1]}function ep(u,i,l){const h=u.base!==void 0?u.base:1;if(Fn(l)!=="number")return Jl(u.default,i.default);const g=u.stops.length;if(g===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[g-1][0])return u.stops[g-1][1];const y=Oo(u.stops.map(V=>V[0]),l),x=function(V,N,W,X){const J=X-W,re=V-W;return J===0?0:N===1?re/J:(Math.pow(N,re)-1)/(Math.pow(N,J)-1)}(l,h,u.stops[y][0],u.stops[y+1][0]),C=u.stops[y][1],E=u.stops[y+1][1],D=ua[i.type]||Jm;return typeof C.evaluate=="function"?{evaluate(...V){const N=C.evaluate.apply(void 0,V),W=E.evaluate.apply(void 0,V);if(N!==void 0&&W!==void 0)return D(N,W,x,u.colorSpace)}}:D(C,E,x,u.colorSpace)}function tp(u,i,l){switch(i.type){case"color":l=On.parse(l);break;case"formatted":l=Ir.fromString(l.toString());break;case"resolvedImage":l=Zr.fromString(l.toString());break;case"padding":l=Gi.parse(l);break;case"colorArray":l=rr.parse(l);break;case"numberArray":l=Ar.parse(l);break;default:Fn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return Jl(l,u.default,i.default)}wa.register(Go,{error:[{kind:"error"},[An],(u,[i])=>{throw new xi(i.evaluate(u))}],typeof:[An,[Mn],(u,[i])=>bi(pn(i.evaluate(u)))],"to-rgba":[la(Gt,4),[oa],(u,[i])=>{const[l,h,g,y]=i.evaluate(u).rgb;return[255*l,255*h,255*g,y]}],rgb:[oa,[Gt,Gt,Gt],Km],rgba:[oa,[Gt,Gt,Gt,Gt],Km],has:{type:En,overloads:[[[An],(u,[i])=>Ym(i.evaluate(u),u.properties())],[[An,Ua],(u,[i,l])=>Ym(i.evaluate(u),l.evaluate(u))]]},get:{type:Mn,overloads:[[[An],(u,[i])=>kh(i.evaluate(u),u.properties())],[[An,Ua],(u,[i,l])=>kh(i.evaluate(u),l.evaluate(u))]]},"feature-state":[Mn,[An],(u,[i])=>kh(i.evaluate(u),u.featureState||{})],properties:[Ua,[],u=>u.properties()],"geometry-type":[An,[],u=>u.geometryType()],id:[Mn,[],u=>u.id()],zoom:[Gt,[],u=>u.globals.zoom],"heatmap-density":[Gt,[],u=>u.globals.heatmapDensity||0],elevation:[Gt,[],u=>u.globals.elevation||0],"line-progress":[Gt,[],u=>u.globals.lineProgress||0],accumulated:[Mn,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Gt,ao(Gt),(u,i)=>{let l=0;for(const h of i)l+=h.evaluate(u);return l}],"*":[Gt,ao(Gt),(u,i)=>{let l=1;for(const h of i)l*=h.evaluate(u);return l}],"-":{type:Gt,overloads:[[[Gt,Gt],(u,[i,l])=>i.evaluate(u)-l.evaluate(u)],[[Gt],(u,[i])=>-i.evaluate(u)]]},"/":[Gt,[Gt,Gt],(u,[i,l])=>i.evaluate(u)/l.evaluate(u)],"%":[Gt,[Gt,Gt],(u,[i,l])=>i.evaluate(u)%l.evaluate(u)],ln2:[Gt,[],()=>Math.LN2],pi:[Gt,[],()=>Math.PI],e:[Gt,[],()=>Math.E],"^":[Gt,[Gt,Gt],(u,[i,l])=>Math.pow(i.evaluate(u),l.evaluate(u))],sqrt:[Gt,[Gt],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[Gt,[Gt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[Gt,[Gt],(u,[i])=>Math.log(i.evaluate(u))],log2:[Gt,[Gt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[Gt,[Gt],(u,[i])=>Math.sin(i.evaluate(u))],cos:[Gt,[Gt],(u,[i])=>Math.cos(i.evaluate(u))],tan:[Gt,[Gt],(u,[i])=>Math.tan(i.evaluate(u))],asin:[Gt,[Gt],(u,[i])=>Math.asin(i.evaluate(u))],acos:[Gt,[Gt],(u,[i])=>Math.acos(i.evaluate(u))],atan:[Gt,[Gt],(u,[i])=>Math.atan(i.evaluate(u))],min:[Gt,ao(Gt),(u,i)=>Math.min(...i.map(l=>l.evaluate(u)))],max:[Gt,ao(Gt),(u,i)=>Math.max(...i.map(l=>l.evaluate(u)))],abs:[Gt,[Gt],(u,[i])=>Math.abs(i.evaluate(u))],round:[Gt,[Gt],(u,[i])=>{const l=i.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[Gt,[Gt],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[Gt,[Gt],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[En,[An,Mn],(u,[i,l])=>u.properties()[i.value]===l.value],"filter-id-==":[En,[Mn],(u,[i])=>u.id()===i.value],"filter-type-==":[En,[An],(u,[i])=>u.geometryType()===i.value],"filter-<":[En,[An,Mn],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h<g}],"filter-id-<":[En,[Mn],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l<h}],"filter->":[En,[An,Mn],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h>g}],"filter-id->":[En,[Mn],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l>h}],"filter-<=":[En,[An,Mn],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[En,[Mn],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l<=h}],"filter->=":[En,[An,Mn],(u,[i,l])=>{const h=u.properties()[i.value],g=l.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[En,[Mn],(u,[i])=>{const l=u.id(),h=i.value;return typeof l==typeof h&&l>=h}],"filter-has":[En,[Mn],(u,[i])=>i.value in u.properties()],"filter-has-id":[En,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[En,[la(An)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[En,[la(Mn)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[En,[An,la(Mn)],(u,[i,l])=>l.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[En,[An,la(Mn)],(u,[i,l])=>function(h,g,y,x){for(;y<=x;){const C=y+x>>1;if(g[C]===h)return!0;g[C]>h?x=C-1:y=C+1}return!1}(u.properties()[i.value],l.value,0,l.value.length-1)],all:{type:En,overloads:[[[En,En],(u,[i,l])=>i.evaluate(u)&&l.evaluate(u)],[ao(En),(u,i)=>{for(const l of i)if(!l.evaluate(u))return!1;return!0}]]},any:{type:En,overloads:[[[En,En],(u,[i,l])=>i.evaluate(u)||l.evaluate(u)],[ao(En),(u,i)=>{for(const l of i)if(l.evaluate(u))return!0;return!1}]]},"!":[En,[En],(u,[i])=>!i.evaluate(u)],"is-supported-script":[En,[An],(u,[i])=>{const l=u.globals&&u.globals.isSupportedScript;return!l||l(i.evaluate(u))}],upcase:[An,[An],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[An,[An],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[An,ao(Mn),(u,i)=>i.map(l=>to(l.evaluate(u))).join("")],"resolved-locale":[An,[ts],(u,[i])=>i.evaluate(u).resolvedLocale()]});class Pc{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new zm,this._defaultValue=l?function(h){if(h.type==="color"&&so(h.default))return new On(0,0,0,0);switch(h.type){case"color":return On.parse(h.default)||null;case"padding":return Gi.parse(h.default)||null;case"numberArray":return Ar.parse(h.default)||null;case"colorArray":return rr.parse(h.default)||null;case"variableAnchorOffsetCollection":return Gn.parse(h.default)||null;case"projectionDefinition":return Sn.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,h,g,y,x){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(i,l,h,g,y,x){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new xi(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Ic(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Go}function Ac(u,i){const l=new $l(Go,Cc,[],i?function(g){const y={color:oa,string:An,number:Gt,enum:An,boolean:En,formatted:Xs,padding:Fi,numberArray:zl,colorArray:Ll,projectionDefinition:uc,resolvedImage:ns,variableAnchorOffsetCollection:Vl};return g.type==="array"?la(y[g.value]||Mn,g.length):y[g.type]}(i):void 0),h=l.parse(u,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Xm(new Pc(h,i)):Ho(l.errors)}class Ql{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Xl(l.expression),this.globalStateRefs=Ko(l.expression)}evaluateWithoutErrorHandling(i,l,h,g,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,g,y,x)}evaluate(i,l,h,g,y,x){return this._styleExpression.evaluate(i,l,h,g,y,x)}}class Ec{constructor(i,l,h,g){this.kind=i,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Xl(l.expression),this.globalStateRefs=Ko(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,l,h,g,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,g,y,x)}evaluate(i,l,h,g,y,x){return this._styleExpression.evaluate(i,l,h,g,y,x)}interpolationFactor(i,l,h){return this.interpolationType?$r.interpolationFactor(this.interpolationType,i,l,h):0}}function Ph(u,i){const l=Ac(u,i);if(l.result==="error")return l;const h=l.value.expression,g=Tc(h);if(!g&&!Wo(i))return Ho([new yi("","data expressions not supported")]);const y=qo(h,["zoom"]);if(!y&&!Ch(i))return Ho([new yi("","zoom expressions not supported")]);const x=Zo(h);return x||y?x instanceof yi?Ho([x]):x instanceof $r&&!Th(i)?Ho([new yi("",'"interpolate" expressions cannot be used with this property')]):Xm(x?new Ec(g?"camera":"composite",l.value,x.labels,x instanceof $r?x.interpolation:void 0):new Ql(g?"constant":"source",l.value)):Ho([new yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class eu{constructor(i,l){this._parameters=i,this._specification=l,pr(this,Qm(this._parameters,this._specification))}static deserialize(i){return new eu(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Zo(u){let i=null;if(u instanceof jl)i=Zo(u.result);else if(u instanceof Kr){for(const l of u.args)if(i=Zo(l),i)break}else(u instanceof Fo||u instanceof $r)&&u.input instanceof wa&&u.input.name==="zoom"&&(i=u);return i instanceof yi||u.eachChild(l=>{const h=Zo(l);h instanceof yi?i=h:!i&&h?i=new yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new yi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Ko(u,i=new Set){return u instanceof Yl&&i.add(u.key),u.eachChild(l=>{Ko(l,i)}),i}function tu(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!tu(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Ih={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ts(u){if(u==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};tu(u)||(u=Mc(u));const i=Ac(u,Ih);if(i.result==="error")throw new Error(i.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,g)=>i.value.evaluate(l,h,{},g),needGeometry:np(u),getGlobalStateRefs:()=>Ko(i.value.expression)}}function Rv(u,i){return u<i?-1:u>i?1:0}function np(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let i=1;i<u.length;i++)if(np(u[i]))return!0;return!1}function Mc(u){if(!u)return!0;const i=u[0];return u.length<=1?i!=="any":i==="=="?Ah(u[1],u[2],"=="):i==="!="?nu(Ah(u[1],u[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Ah(u[1],u[2],i):i==="any"?(l=u.slice(1),["any"].concat(l.map(Mc))):i==="all"?["all"].concat(u.slice(1).map(Mc)):i==="none"?["all"].concat(u.slice(1).map(Mc).map(nu)):i==="in"?ip(u[1],u.slice(2)):i==="!in"?nu(ip(u[1],u.slice(2))):i==="has"?rp(u[1]):i!=="!has"||nu(rp(u[1]));var l}function Ah(u,i,l){switch(u){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,u,i]}}function ip(u,i){if(i.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",u,["literal",i.sort(Rv)]]:["filter-in-small",u,["literal",i]]}}function rp(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function nu(u){return["!",u]}function Dc(u){const i=typeof u;if(i==="number"||i==="boolean"||i==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let g="[";for(const y of u)g+=`${Dc(y)},`;return`${g}]`}const l=Object.keys(u).sort();let h="{";for(let g=0;g<l.length;g++)h+=`${JSON.stringify(l[g])}:${Dc(u[l[g]])},`;return`${h}}`}function Rc(u){let i="";for(const l of Zt)i+=`/${Dc(u[l])}`;return i}function ap(u){const i=u.value;return i?[new $t(u.key,i,"constants have been deprecated as of v8")]:[]}function Ai(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Ps(u){if(Array.isArray(u))return u.map(Ps);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const l in u)i[l]=Ps(u[l]);return i}return Ai(u)}function Sa(u){const i=u.key,l=u.value,h=u.valueSpec||{},g=u.objectElementValidators||{},y=u.style,x=u.styleSpec,C=u.validateSpec;let E=[];const D=Fn(l);if(D!=="object")return[new $t(i,l,`object expected, ${D} found`)];for(const V in l){const N=V.split(".")[0],W=Bn(h,N)||h["*"];let X;if(Bn(g,N))X=g[N];else if(Bn(h,N))X=C;else if(g["*"])X=g["*"];else{if(!h["*"]){E.push(new $t(i,l[V],`unknown property "${V}"`));continue}X=C}E=E.concat(X({key:(i&&`${i}.`)+V,value:l[V],valueSpec:W,style:y,styleSpec:x,object:l,objectKey:V,validateSpec:C},l))}for(const V in h)g[V]||h[V].required&&h[V].default===void 0&&l[V]===void 0&&E.push(new $t(i,l,`missing required property "${V}"`));return E}function Lc(u){const i=u.value,l=u.valueSpec,h=u.style,g=u.styleSpec,y=u.key,x=u.arrayElementValidator||u.validateSpec;if(Fn(i)!=="array")return[new $t(y,i,`array expected, ${Fn(i)} found`)];if(l.length&&i.length!==l.length)return[new $t(y,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new $t(y,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let C={type:l.value,values:l.values};g.$version<7&&(C.function=l.function),Fn(l.value)==="object"&&(C=l.value);let E=[];for(let D=0;D<i.length;D++)E=E.concat(x({array:i,arrayIndex:D,value:i[D],valueSpec:C,validateSpec:u.validateSpec,style:h,styleSpec:g,key:`${y}[${D}]`}));return E}function iu(u){const i=u.key,l=u.value,h=u.valueSpec;let g=Fn(l);return g==="number"&&l!=l&&(g="NaN"),g!=="number"?[new $t(i,l,`number expected, ${g} found`)]:"minimum"in h&&l<h.minimum?[new $t(i,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new $t(i,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function Yo(u){const i=u.valueSpec,l=Ai(u.value.type);let h,g,y,x={};const C=l!=="categorical"&&u.value.property===void 0,E=!C,D=Fn(u.value.stops)==="array"&&Fn(u.value.stops[0])==="array"&&Fn(u.value.stops[0][0])==="object",V=Sa({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(X){if(l==="identity")return[new $t(X.key,X.value,'identity function may not have a "stops" property')];let J=[];const re=X.value;return J=J.concat(Lc({key:X.key,value:re,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:N})),Fn(re)==="array"&&re.length===0&&J.push(new $t(X.key,re,"array must have at least one stop")),J},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:i,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return l==="identity"&&C&&V.push(new $t(u.key,u.value,'missing required property "property"')),l==="identity"||u.value.stops||V.push(new $t(u.key,u.value,'missing required property "stops"')),l==="exponential"&&u.valueSpec.expression&&!Th(u.valueSpec)&&V.push(new $t(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(E&&!Wo(u.valueSpec)?V.push(new $t(u.key,u.value,"property functions not supported")):C&&!Ch(u.valueSpec)&&V.push(new $t(u.key,u.value,"zoom functions not supported"))),l!=="categorical"&&!D||u.value.property!==void 0||V.push(new $t(u.key,u.value,'"property" property is required')),V;function N(X){let J=[];const re=X.value,pe=X.key;if(Fn(re)!=="array")return[new $t(pe,re,`array expected, ${Fn(re)} found`)];if(re.length!==2)return[new $t(pe,re,`array length 2 expected, length ${re.length} found`)];if(D){if(Fn(re[0])!=="object")return[new $t(pe,re,`object expected, ${Fn(re[0])} found`)];if(re[0].zoom===void 0)return[new $t(pe,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new $t(pe,re,"object stop key must have value")];if(y&&y>Ai(re[0].zoom))return[new $t(pe,re[0].zoom,"stop zoom values must appear in ascending order")];Ai(re[0].zoom)!==y&&(y=Ai(re[0].zoom),g=void 0,x={}),J=J.concat(Sa({key:`${pe}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:iu,value:W}}))}else J=J.concat(W({key:`${pe}[0]`,value:re[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},re));return Ic(Ps(re[1]))?J.concat([new $t(`${pe}[1]`,re[1],"expressions are not allowed in function stops.")]):J.concat(X.validateSpec({key:`${pe}[1]`,value:re[1],valueSpec:i,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function W(X,J){const re=Fn(X.value),pe=Ai(X.value),xe=X.value!==null?X.value:J;if(h){if(re!==h)return[new $t(X.key,xe,`${re} stop domain type must match previous stop domain type ${h}`)]}else h=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new $t(X.key,xe,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&l!=="categorical"){let Ne=`number expected, ${re} found`;return Wo(i)&&l===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $t(X.key,xe,Ne)]}return l!=="categorical"||re!=="number"||isFinite(pe)&&Math.floor(pe)===pe?l!=="categorical"&&re==="number"&&g!==void 0&&pe<g?[new $t(X.key,xe,"stop domain values must appear in ascending order")]:(g=pe,l==="categorical"&&pe in x?[new $t(X.key,xe,"stop domain values must be unique")]:(x[pe]=!0,[])):[new $t(X.key,xe,`integer expected, found ${pe}`)]}}function Xo(u){const i=(u.expressionContext==="property"?Ph:Ac)(Ps(u.value),u.valueSpec);if(i.result==="error")return i.value.map(h=>new $t(`${u.key}${h.key}`,u.value,h.message));const l=i.value.expression||i.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!l.outputDefined())return[new $t(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Xl(l))return[new $t(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Xl(l))return[new $t(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!qo(l,["zoom","feature-state"]))return[new $t(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Tc(l))return[new $t(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eh(u){const i=u.key,l=u.value,h=Fn(l);return h!=="string"?[new $t(i,l,`color expected, ${h} found`)]:On.parse(String(l))?[]:[new $t(i,l,`color expected, "${l}" found`)]}function ru(u){const i=u.key,l=u.value,h=u.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(Ai(l))===-1&&g.push(new $t(i,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Ai(l))===-1&&g.push(new $t(i,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Mh(u){return tu(Ps(u.value))?Xo(pr({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sp(u)}function sp(u){const i=u.value,l=u.key;if(Fn(i)!=="array")return[new $t(l,i,`array expected, ${Fn(i)} found`)];const h=u.styleSpec;let g,y=[];if(i.length<1)return[new $t(l,i,"filter array must have at least 1 element")];switch(y=y.concat(ru({key:`${l}[0]`,value:i[0],valueSpec:h.filter_operator,style:u.style,styleSpec:u.styleSpec})),Ai(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Ai(i[1])==="$type"&&y.push(new $t(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new $t(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=Fn(i[1]),g!=="string"&&y.push(new $t(`${l}[1]`,i[1],`string expected, ${g} found`)));for(let x=2;x<i.length;x++)g=Fn(i[x]),Ai(i[1])==="$type"?y=y.concat(ru({key:`${l}[${x}]`,value:i[x],valueSpec:h.geometry_type,style:u.style,styleSpec:u.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&y.push(new $t(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)y=y.concat(sp({key:`${l}[${x}]`,value:i[x],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":g=Fn(i[1]),i.length!==2?y.push(new $t(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&y.push(new $t(`${l}[1]`,i[1],`string expected, ${g} found`))}return y}function op(u,i){const l=u.key,h=u.validateSpec,g=u.style,y=u.styleSpec,x=u.value,C=u.objectKey,E=y[`${i}_${u.layerType}`];if(!E)return[];const D=C.match(/^(.*)-transition$/);if(i==="paint"&&D&&E[D[1]]&&E[D[1]].transition)return h({key:l,value:x,valueSpec:y.transition,style:g,styleSpec:y});const V=u.valueSpec||E[C];if(!V)return[new $t(l,x,`unknown property "${C}"`)];let N;if(Fn(x)==="string"&&Wo(V)&&!V.tokens&&(N=/^{([^}]+)}$/.exec(x)))return[new $t(l,x,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const W=[];return u.layerType==="symbol"&&(C==="text-field"&&g&&!g.glyphs&&W.push(new $t(l,x,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&so(Ps(x))&&Ai(x.type)==="identity"&&W.push(new $t(l,x,'"text-font" does not support identity functions'))),W.concat(h({key:u.key,value:x,valueSpec:V,style:g,styleSpec:y,expressionContext:"property",propertyType:i,propertyKey:C}))}function Jo(u){return op(u,"paint")}function Qo(u){return op(u,"layout")}function Yr(u){let i=[];const l=u.value,h=u.key,g=u.style,y=u.styleSpec;if(Fn(l)!=="object")return[new $t(h,l,`object expected, ${Fn(l)} found`)];l.type||l.ref||i.push(new $t(h,l,'either "type" or "ref" is required'));let x=Ai(l.type);const C=Ai(l.ref);if(l.id){const E=Ai(l.id);for(let D=0;D<u.arrayIndex;D++){const V=g.layers[D];Ai(V.id)===E&&i.push(new $t(h,l.id,`duplicate layer id "${l.id}", previously used at line ${V.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(D=>{D in l&&i.push(new $t(h,l[D],`"${D}" is prohibited for ref layers`))}),g.layers.forEach(D=>{Ai(D.id)===C&&(E=D)}),E?E.ref?i.push(new $t(h,l.ref,"ref cannot reference another ref layer")):x=Ai(E.type):i.push(new $t(h,l.ref,`ref layer "${C}" not found`))}else if(x!=="background")if(l.source){const E=g.sources&&g.sources[l.source],D=E&&Ai(E.type);E?D==="vector"&&x==="raster"?i.push(new $t(h,l.source,`layer "${l.id}" requires a raster source`)):D!=="raster-dem"&&x==="hillshade"||D!=="raster-dem"&&x==="color-relief"?i.push(new $t(h,l.source,`layer "${l.id}" requires a raster-dem source`)):D==="raster"&&x!=="raster"?i.push(new $t(h,l.source,`layer "${l.id}" requires a vector source`)):D!=="vector"||l["source-layer"]?D==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?i.push(new $t(h,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||D==="geojson"&&E.lineMetrics||i.push(new $t(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new $t(h,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new $t(h,l.source,`source "${l.source}" not found`))}else i.push(new $t(h,l,'missing required property "source"'));return i=i.concat(Sa({key:h,value:l,valueSpec:y.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${h}.type`,value:l.type,valueSpec:y.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:l,objectKey:"type"}),filter:Mh,layout:E=>Sa({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":D=>Qo(pr({layerType:x},D))}}),paint:E=>Sa({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":D=>Jo(pr({layerType:x},D))}})}})),i}function Aa(u){const i=u.value,l=u.key,h=Fn(i);return h!=="string"?[new $t(l,i,`string expected, ${h} found`)]:[]}const Dh={promoteId:function({key:u,value:i}){if(Fn(i)==="string")return Aa({key:u,value:i});{const l=[];for(const h in i)l.push(...Aa({key:`${u}.${h}`,value:i[h]}));return l}}};function lp(u){const i=u.value,l=u.key,h=u.styleSpec,g=u.style,y=u.validateSpec;if(!i.type)return[new $t(l,i,'"type" is required')];const x=Ai(i.type);let C;switch(x){case"vector":case"raster":return C=Sa({key:l,value:i,valueSpec:h[`source_${x.replace("-","_")}`],style:u.style,styleSpec:h,objectElementValidators:Dh,validateSpec:y}),C;case"raster-dem":return C=function(E){var D;const V=(D=E.sourceName)!==null&&D!==void 0?D:"",N=E.value,W=E.styleSpec,X=W.source_raster_dem,J=E.style;let re=[];const pe=Fn(N);if(N===void 0)return re;if(pe!=="object")return re.push(new $t("source_raster_dem",N,`object expected, ${pe} found`)),re;const xe=Ai(N.encoding)==="custom",Ne=["redFactor","greenFactor","blueFactor","baseShift"],Pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const K in N)!xe&&Ne.includes(K)?re.push(new $t(K,N[K],`In "${V}": "${K}" is only valid when "encoding" is set to "custom". ${Pe} encoding found`)):X[K]?re=re.concat(E.validateSpec({key:K,value:N[K],valueSpec:X[K],validateSpec:E.validateSpec,style:J,styleSpec:W})):re.push(new $t(K,N[K],`unknown property "${K}"`));return re}({sourceName:l,value:i,style:u.style,styleSpec:h,validateSpec:y}),C;case"geojson":if(C=Sa({key:l,value:i,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:y,objectElementValidators:Dh}),i.cluster)for(const E in i.clusterProperties){const[D,V]=i.clusterProperties[E],N=typeof D=="string"?[D,["accumulated"],["get",E]]:D;C.push(...Xo({key:`${l}.${E}.map`,value:V,expressionContext:"cluster-map"})),C.push(...Xo({key:`${l}.${E}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return C;case"video":return Sa({key:l,value:i,valueSpec:h.source_video,style:g,validateSpec:y,styleSpec:h});case"image":return Sa({key:l,value:i,valueSpec:h.source_image,style:g,validateSpec:y,styleSpec:h});case"canvas":return[new $t(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ru({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function up(u){const i=u.value,l=u.styleSpec,h=l.light,g=u.style;let y=[];const x=Fn(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new $t("light",i,`object expected, ${x} found`)]),y;for(const C in i){const E=C.match(/^(.*)-transition$/);y=y.concat(E&&h[E[1]]&&h[E[1]].transition?u.validateSpec({key:C,value:i[C],valueSpec:l.transition,validateSpec:u.validateSpec,style:g,styleSpec:l}):h[C]?u.validateSpec({key:C,value:i[C],valueSpec:h[C],validateSpec:u.validateSpec,style:g,styleSpec:l}):[new $t(C,i[C],`unknown property "${C}"`)])}return y}function el(u){const i=u.value,l=u.styleSpec,h=l.sky,g=u.style,y=Fn(i);if(i===void 0)return[];if(y!=="object")return[new $t("sky",i,`object expected, ${y} found`)];let x=[];for(const C in i)x=x.concat(h[C]?u.validateSpec({key:C,value:i[C],valueSpec:h[C],style:g,styleSpec:l}):[new $t(C,i[C],`unknown property "${C}"`)]);return x}function Rh(u){const i=u.value,l=u.styleSpec,h=l.terrain,g=u.style;let y=[];const x=Fn(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new $t("terrain",i,`object expected, ${x} found`)]),y;for(const C in i)y=y.concat(h[C]?u.validateSpec({key:C,value:i[C],valueSpec:h[C],validateSpec:u.validateSpec,style:g,styleSpec:l}):[new $t(C,i[C],`unknown property "${C}"`)]);return y}function zc(u){let i=[];const l=u.value,h=u.key;if(Array.isArray(l)){const g=[],y=[];for(const x in l)l[x].id&&g.includes(l[x].id)&&i.push(new $t(h,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),g.push(l[x].id),l[x].url&&y.includes(l[x].url)&&i.push(new $t(h,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),y.push(l[x].url),i=i.concat(Sa({key:`${h}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return i}return Aa({key:h,value:l})}function cp(u){return i=u.value,i&&i.constructor===Object?[]:[new $t(u.key,u.value,`object expected, ${Fn(u.value)} found`)];var i}const Vc={"*":()=>[],array:Lc,boolean:function(u){const i=u.value,l=u.key,h=Fn(i);return h!=="boolean"?[new $t(l,i,`boolean expected, ${h} found`)]:[]},number:iu,color:Eh,constants:ap,enum:ru,filter:Mh,function:Yo,layer:Yr,object:Sa,source:lp,light:up,sky:el,terrain:Rh,projection:function(u){const i=u.value,l=u.styleSpec,h=l.projection,g=u.style,y=Fn(i);if(i===void 0)return[];if(y!=="object")return[new $t("projection",i,`object expected, ${y} found`)];let x=[];for(const C in i)x=x.concat(h[C]?u.validateSpec({key:C,value:i[C],valueSpec:h[C],style:g,styleSpec:l}):[new $t(C,i[C],`unknown property "${C}"`)]);return x},projectionDefinition:function(u){const i=u.key;let l=u.value;l=l instanceof String?l.valueOf():l;const h=Fn(l);return h!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(l)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(l)?["array","string"].includes(h)?[]:[new $t(i,l,`projection expected, invalid type "${h}" found`)]:[new $t(i,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Aa,formatted:function(u){return Aa(u).length===0?[]:Xo(u)},resolvedImage:function(u){return Aa(u).length===0?[]:Xo(u)},padding:function(u){const i=u.key,l=u.value;if(Fn(l)==="array"){if(l.length<1||l.length>4)return[new $t(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let g=[];for(let y=0;y<l.length;y++)g=g.concat(u.validateSpec({key:`${i}[${y}]`,value:l[y],validateSpec:u.validateSpec,valueSpec:h}));return g}return iu({key:i,value:l,valueSpec:{}})},numberArray:function(u){const i=u.key,l=u.value;if(Fn(l)==="array"){const h={type:"number"};if(l.length<1)return[new $t(i,l,"array length at least 1 expected, length 0 found")];let g=[];for(let y=0;y<l.length;y++)g=g.concat(u.validateSpec({key:`${i}[${y}]`,value:l[y],validateSpec:u.validateSpec,valueSpec:h}));return g}return iu({key:i,value:l,valueSpec:{}})},colorArray:function(u){const i=u.key,l=u.value;if(Fn(l)==="array"){if(l.length<1)return[new $t(i,l,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<l.length;g++)h=h.concat(Eh({key:`${i}[${g}]`,value:l[g]}));return h}return Eh({key:i,value:l})},variableAnchorOffsetCollection:function(u){const i=u.key,l=u.value,h=Fn(l),g=u.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new $t(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let x=0;x<l.length;x+=2)y=y.concat(ru({key:`${i}[${x}]`,value:l[x],valueSpec:g.layout_symbol["text-anchor"]})),y=y.concat(Lc({key:`${i}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:g}));return y},sprite:zc,state:cp};function Bc(u){const i=u.value,l=u.valueSpec,h=u.styleSpec;return u.validateSpec=Bc,l.expression&&so(Ai(i))?Yo(u):l.expression&&Ic(Ps(i))?Xo(u):l.type&&Vc[l.type]?Vc[l.type](u):Sa(pr({},u,{valueSpec:l.type?h[l.type]:l}))}function tl(u){const i=u.value,l=u.key,h=Aa(u);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new $t(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new $t(l,i,'"glyphs" url must include a "{range}" token'))),h}function ka(u,i=$e){let l=[];return l=l.concat(Bc({key:"",value:u,valueSpec:i.$root,styleSpec:i,style:u,validateSpec:Bc,objectElementValidators:{glyphs:tl,"*":()=>[]}})),u.constants&&(l=l.concat(ap({key:"constants",value:u.constants}))),dp(l)}function Ea(u){return function(i){return u({...i,validateSpec:Bc})}}function dp(u){return[].concat(u).sort((i,l)=>i.line-l.line)}function jr(u){return function(...i){return dp(u.apply(this,i))}}ka.source=jr(Ea(lp)),ka.sprite=jr(Ea(zc)),ka.glyphs=jr(Ea(tl)),ka.light=jr(Ea(up)),ka.sky=jr(Ea(el)),ka.terrain=jr(Ea(Rh)),ka.state=jr(Ea(cp)),ka.layer=jr(Ea(Yr)),ka.filter=jr(Ea(Mh)),ka.paintProperty=jr(Ea(Jo)),ka.layoutProperty=jr(Ea(Qo));const nl=ka,Lv=nl.light,Oc=nl.sky,zv=nl.paintProperty,Lh=nl.layoutProperty;function au(u,i){let l=!1;if(i&&i.length)for(const h of i)u.fire(new Qe(new Error(h.message))),l=!0;return l}class il{constructor(i,l,h){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const x=new Int32Array(this.arrayBuffer);i=x[0],this.d=(l=x[1])+2*(h=x[2]);for(let E=0;E<this.d*this.d;E++){const D=x[3+E],V=x[3+E+1];g.push(D===V?null:x.subarray(D,V))}const C=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],C),this.bboxes=x.subarray(C),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=h,this.scale=l/i,this.uid=0;const y=h/l*i;this.min=-y,this.max=i+y}insert(i,l,h,g,y){this._forEachCell(l,h,g,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,h,g,y,x){this.cells[y].push(x)}query(i,l,h,g,y){const x=this.min,C=this.max;if(i<=x&&l<=x&&C<=h&&C<=g&&!y)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(i,l,h,g,this._queryCell,E,{},y),E}}_queryCell(i,l,h,g,y,x,C,E){const D=this.cells[y];if(D!==null){const V=this.keys,N=this.bboxes;for(let W=0;W<D.length;W++){const X=D[W];if(C[X]===void 0){const J=4*X;(E?E(N[J+0],N[J+1],N[J+2],N[J+3]):i<=N[J+2]&&l<=N[J+3]&&h>=N[J+0]&&g>=N[J+1])?(C[X]=!0,x.push(V[X])):C[X]=!1}}}}_forEachCell(i,l,h,g,y,x,C,E){const D=this._convertToCellCoord(i),V=this._convertToCellCoord(l),N=this._convertToCellCoord(h),W=this._convertToCellCoord(g);for(let X=D;X<=N;X++)for(let J=V;J<=W;J++){const re=this.d*J+X;if((!E||E(this._convertFromCellCoord(X),this._convertFromCellCoord(J),this._convertFromCellCoord(X+1),this._convertFromCellCoord(J+1)))&&y.call(this,i,l,h,g,re,x,C,E))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(l+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let y=l;for(let x=0;x<i.length;x++){const C=i[x];g[3+x]=y,g.set(C,y),y+=C.length}return g[3+i.length]=y,g.set(this.keys,y),y+=this.keys.length,g[3+i.length+1]=y,g.set(this.bboxes,y),y+=this.bboxes.length,g.buffer}static serialize(i,l){const h=i.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(i){return new il(i.buffer)}}const Wa={};function Yt(u,i,l={}){if(Wa[u])throw new Error(`${u} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:u,writeable:!1}),Wa[u]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}Yt("Object",Object),Yt("Set",Set),Yt("TransferableGridIndex",il),Yt("Color",On),Yt("Error",Error),Yt("AJAXError",ke),Yt("ResolvedImage",Zr),Yt("StylePropertyFunction",eu),Yt("StyleExpression",Pc,{omit:["_evaluator"]}),Yt("ZoomDependentExpression",Ec),Yt("ZoomConstantExpression",Ql),Yt("CompoundExpression",wa,{omit:["_evaluate"]});for(const u in Go)Go[u]._classRegistryKey||Yt(`Expression_${u}`,Go[u]);function zh(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function su(u){return u.$name||u.constructor._classRegistryKey}function Vh(u){return!function(i){if(i===null||typeof i!="object")return!1;const l=su(i);return!(!l||l==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||zh(u)||At(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function ou(u,i){if(Vh(u))return(zh(u)||At(u))&&i&&i.push(u),ArrayBuffer.isView(u)&&i&&i.push(u.buffer),u instanceof ImageData&&i&&i.push(u.data.buffer),u;if(Array.isArray(u)){const y=[];for(const x of u)y.push(ou(x,i));return y}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const l=su(u);if(!l)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!Wa[l])throw new Error(`${l} is not registered.`);const{klass:h}=Wa[l],g=h.serialize?h.serialize(u,i):{};if(h.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in u){if(!u.hasOwnProperty(y)||Wa[l].omit.indexOf(y)>=0)continue;const x=u[y];g[y]=Wa[l].shallow.indexOf(y)>=0?x:ou(x,i)}u instanceof Error&&(g.message=u.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(g.$name=l),g}function rl(u){if(Vh(u))return u;if(Array.isArray(u))return u.map(rl);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const i=su(u)||"Object";if(!Wa[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=Wa[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(u);const h=Object.create(l.prototype);for(const g of Object.keys(u)){if(g==="$name")continue;const y=u[g];h[g]=Wa[i].shallow.indexOf(g)>=0?y:rl(y)}return h}class Bh{constructor(){this.first=!0}update(i,l){const h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}const $n={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Oh(u){for(const i of u)if($c(i.charCodeAt(0)))return!0;return!1}function hp(u){for(const i of u)if(!Bv(i.charCodeAt(0)))return!1;return!0}function Fc(u){const i=u.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(i.join("|"),"u")}const Vv=Fc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Bv(u){return!Vv.test(String.fromCodePoint(u))}const Fh=Fc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function $c(u){return!(u!==746&&u!==747&&(u<4352||!($n["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||$n["CJK Compatibility"](u)||$n["CJK Strokes"](u)||!(!$n["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||$n["Enclosed CJK Letters and Months"](u)||$n["Ideographic Description Characters"](u)||$n.Kanbun(u)||$n.Katakana(u)&&u!==12540||!(!$n["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!$n["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||$n["Vertical Forms"](u)||$n["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Fh.test(String.fromCodePoint(u)))))}function $h(u){return!($c(u)||function(i){return!!($n["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||$n["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||$n["Letterlike Symbols"](i)||$n["Number Forms"](i)||$n["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||$n["Control Pictures"](i)&&i!==9251||$n["Optical Character Recognition"](i)||$n["Enclosed Alphanumerics"](i)||$n["Geometric Shapes"](i)||$n["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||$n["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||$n["CJK Symbols and Punctuation"](i)||$n.Katakana(i)||$n["Private Use Area"](i)||$n["CJK Compatibility Forms"](i)||$n["Small Form Variants"](i)||$n["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(u))}const fp=Fc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function lu(u){return fp.test(String.fromCodePoint(u))}function Ov(u,i){return!(!i&&lu(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||$n.Khmer(u))}function jh(u){for(const i of u)if(lu(i.charCodeAt(0)))return!0;return!1}const Is=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(Is.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,i){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const l=u.pluginURL,h=new Promise(y=>{this.loadScriptResolve=y});i(l);const g=new Promise(y=>setTimeout(()=>y(),this.TIMEOUT));if(yield Promise.race([h,g]),this.isParsed()){const y={pluginStatus:"loaded",pluginURL:l};return this.setState(y),y}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class mi{constructor(i,l){this.zoom=i,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new Bh,this.transition=l.transition||{},this.globalState=l.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bh,this.transition={},this.globalState={})}isSupportedScript(i){return function(l,h){for(const g of l)if(!Ov(g.charCodeAt(0),h))return!1;return!0}(i,Is.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class uu{constructor(i,l){this.property=i,this.value=l,this.expression=function(h,g){if(so(h))return new eu(h,g);if(Ic(h)){const y=Ph(h,g);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=h;return g.type==="color"&&typeof h=="string"?y=On.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?g.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?y=Gn.parse(h):g.type==="projectionDefinition"&&typeof h=="string"&&(y=Sn.parse(h)):y=rr.parse(h):y=Ar.parse(h):y=Gi.parse(h),{globalStateRefs:new Set,kind:"constant",evaluate:()=>y}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,l,h){return this.property.possiblyEvaluate(this,i,l,h)}}class jc{constructor(i){this.property=i,this.value=new uu(i,void 0)}transitioned(i,l){return new mp(this.property,this.value,l,Ct({},i.transition,this.transition),i.now)}untransitioned(){return new mp(this.property,this.value,null,{},0)}}class Nh{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Ye(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new jc(this._values[i].property)),this._values[i].value=new uu(this._values[i].property,l===null?void 0:Ye(l))}getTransition(i){return Ye(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new jc(this._values[i].property)),this._values[i].transition=Ye(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h);const g=this.getTransition(l);g!==void 0&&(i[`${l}-transition`]=g)}return i}transitioned(i,l){const h=new pp(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(i,l._values[g]);return h}untransitioned(){const i=new pp(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class mp{constructor(i,l,h,g,y){this.property=i,this.value=l,this.begin=y+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(i,l,h){const g=i.now||0,y=this.value.possiblyEvaluate(i,l,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(g<this.begin)return x.possiblyEvaluate(i,l,h);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,h),y,wt(C))}}return y}}class pp{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,h){const g=new Nc(this._properties);for(const y of Object.keys(this._values))g._values[y]=this._values[y].possiblyEvaluate(i,l,h);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Fv{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Ye(this._values[i].value)}setValue(i,l){this._values[i]=new uu(this._values[i].property,l===null?void 0:Ye(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h)}return i}possiblyEvaluate(i,l,h){const g=new Nc(this._properties);for(const y of Object.keys(this._values))g._values[y]=this._values[y].possiblyEvaluate(i,l,h);return g}}class Za{constructor(i,l,h){this.property=i,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,h,g){return this.property.evaluate(this.value,this.parameters,i,l,h,g)}}class Nc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class en{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,h){const g=ua[this.specification.type];return g?g(i,l,h):i}}class hn{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,h,g){return new Za(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},h,g)}:i.expression,l)}interpolate(i,l,h){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Za(this,{kind:"constant",value:void 0},i.parameters);const g=ua[this.specification.type];if(g){const y=g(i.value.value,l.value.value,h);return new Za(this,{kind:"constant",value:y},i.parameters)}return i}evaluate(i,l,h,g,y,x){return i.kind==="constant"?i.value:i.evaluate(l,h,g,y,x)}}class Uc extends hn{possiblyEvaluate(i,l,h,g){if(i.value===void 0)return new Za(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const y=i.expression.evaluate(l,null,{},h,g),x=i.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,C=this._calculate(x,x,x,l);return new Za(this,{kind:"constant",value:C},l)}if(i.expression.kind==="camera"){const y=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Za(this,{kind:"constant",value:y},l)}return new Za(this,i.expression,l)}evaluate(i,l,h,g,y,x){if(i.kind==="source"){const C=i.evaluate(l,h,g,y,x);return this._calculate(C,C,C,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},h,g),i.evaluate({zoom:Math.floor(l.zoom)},h,g),i.evaluate({zoom:Math.floor(l.zoom)+1},h,g),l):i.value}_calculate(i,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:h,to:l}}interpolate(i){return i}}class Uh{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const y=i.expression.evaluate(l,null,{},h,g);return this._calculate(y,y,y,l)}return this._calculate(i.expression.evaluate(new mi(Math.floor(l.zoom-1),l)),i.expression.evaluate(new mi(Math.floor(l.zoom),l)),i.expression.evaluate(new mi(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:h,to:l}}interpolate(i){return i}}class cu{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,g){return!!i.expression.evaluate(l,null,{},h,g)}interpolate(){return!1}}class Nr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const h=i[l];h.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new uu(h,void 0),y=this.defaultTransitionablePropertyValues[l]=new jc(h);this.defaultTransitioningPropertyValues[l]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}Yt("DataDrivenProperty",hn),Yt("DataConstantProperty",en),Yt("CrossFadedDataDrivenProperty",Uc),Yt("CrossFadedProperty",Uh),Yt("ColorRampProperty",cu);const gp="-transition";class gr extends Pt{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=Ts(i.filter)),l.layout&&(this._unevaluatedLayout=new Fv(l.layout)),l.paint)){this._transitionablePaint=new Nh(l.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Nc(l.paint)}}setFilter(i){this.filter=i,this._featureFilter=Ts(i)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[l];for(const g of h.getGlobalStateRefs())i.add(g)}for(const l of this._featureFilter.getGlobalStateRefs())i.add(l);return i}setLayoutProperty(i,l,h={}){l!=null&&this._validate(Lh,`layers.${this.id}.layout.${i}`,i,l,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(gp)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,h={}){if(l!=null&&this._validate(zv,`layers.${this.id}.paint.${i}`,i,l,h))return!1;if(i.endsWith(gp))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[i],y=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const E=this._transitionablePaint._values[i].value;return E.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(i,C,E)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),ze(i,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(i,l,h,g,y={}){return(!y||y.validate!==!1)&&au(this,i.call(nl,{key:l,layerType:this.type,objectKey:h,value:g,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Za&&Wo(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const vp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oo{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ei(u,i=1){let l=0,h=0;return{members:u.map(g=>{const y=vp[g.type].BYTES_PER_ELEMENT,x=l=_p(l,Math.max(i,y)),C=g.components||1;return h=Math.max(h,y),l+=y*C,{name:g.name,type:g.type,components:C,offset:x}}),size:_p(l,Math.max(h,i)),alignment:i}}function _p(u,i){return Math.ceil(u/i)*i}class As extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.int16[g+0]=l,this.int16[g+1]=h,i}}As.prototype.bytesPerElement=4,Yt("StructArrayLayout2i4",As);class Es extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const y=3*i;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=g,i}}Es.prototype.bytesPerElement=6,Yt("StructArrayLayout3i6",Es);class Gh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,g)}emplace(i,l,h,g,y){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=y,i}}Gh.prototype.bytesPerElement=8,Yt("StructArrayLayout4i8",Gh);class Gc extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,h,g,y,x)}emplace(i,l,h,g,y,x,C){const E=6*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=g,this.int16[E+3]=y,this.int16[E+4]=x,this.int16[E+5]=C,i}}Gc.prototype.bytesPerElement=12,Yt("StructArrayLayout2i4i12",Gc);class lo extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,h,g,y,x)}emplace(i,l,h,g,y,x,C){const E=4*i,D=8*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.uint8[D+4]=g,this.uint8[D+5]=y,this.uint8[D+6]=x,this.uint8[D+7]=C,i}}lo.prototype.bytesPerElement=8,Yt("StructArrayLayout2i4ub8",lo);class du extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.float32[g+0]=l,this.float32[g+1]=h,i}}du.prototype.bytesPerElement=8,Yt("StructArrayLayout2f8",du);class qh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x,C,E,D,V){const N=this.length;return this.resize(N+1),this.emplace(N,i,l,h,g,y,x,C,E,D,V)}emplace(i,l,h,g,y,x,C,E,D,V,N){const W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=h,this.uint16[W+2]=g,this.uint16[W+3]=y,this.uint16[W+4]=x,this.uint16[W+5]=C,this.uint16[W+6]=E,this.uint16[W+7]=D,this.uint16[W+8]=V,this.uint16[W+9]=N,i}}qh.prototype.bytesPerElement=20,Yt("StructArrayLayout10ui20",qh);class qc extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x,C,E,D,V,N,W){const X=this.length;return this.resize(X+1),this.emplace(X,i,l,h,g,y,x,C,E,D,V,N,W)}emplace(i,l,h,g,y,x,C,E,D,V,N,W,X){const J=12*i;return this.int16[J+0]=l,this.int16[J+1]=h,this.int16[J+2]=g,this.int16[J+3]=y,this.uint16[J+4]=x,this.uint16[J+5]=C,this.uint16[J+6]=E,this.uint16[J+7]=D,this.int16[J+8]=V,this.int16[J+9]=N,this.int16[J+10]=W,this.int16[J+11]=X,i}}qc.prototype.bytesPerElement=24,Yt("StructArrayLayout4i4ui4i24",qc);class Hh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const y=3*i;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=g,i}}Hh.prototype.bytesPerElement=12,Yt("StructArrayLayout3f12",Hh);class v extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}v.prototype.bytesPerElement=4,Yt("StructArrayLayout1ul4",v);class t extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x,C,E,D){const V=this.length;return this.resize(V+1),this.emplace(V,i,l,h,g,y,x,C,E,D)}emplace(i,l,h,g,y,x,C,E,D,V){const N=10*i,W=5*i;return this.int16[N+0]=l,this.int16[N+1]=h,this.int16[N+2]=g,this.int16[N+3]=y,this.int16[N+4]=x,this.int16[N+5]=C,this.uint32[W+3]=E,this.uint16[N+8]=D,this.uint16[N+9]=V,i}}t.prototype.bytesPerElement=20,Yt("StructArrayLayout6i1ul2ui20",t);class o extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,h,g,y,x)}emplace(i,l,h,g,y,x,C){const E=6*i;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=g,this.int16[E+3]=y,this.int16[E+4]=x,this.int16[E+5]=C,i}}o.prototype.bytesPerElement=12,Yt("StructArrayLayout2i2i2i12",o);class m extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,g,y)}emplace(i,l,h,g,y,x){const C=4*i,E=8*i;return this.float32[C+0]=l,this.float32[C+1]=h,this.float32[C+2]=g,this.int16[E+6]=y,this.int16[E+7]=x,i}}m.prototype.bytesPerElement=16,Yt("StructArrayLayout2f1f2i16",m);class p extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,h,g,y,x)}emplace(i,l,h,g,y,x,C){const E=16*i,D=4*i,V=8*i;return this.uint8[E+0]=l,this.uint8[E+1]=h,this.float32[D+1]=g,this.float32[D+2]=y,this.int16[V+6]=x,this.int16[V+7]=C,i}}p.prototype.bytesPerElement=16,Yt("StructArrayLayout2ub2f2i16",p);class _ extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const y=3*i;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=g,i}}_.prototype.bytesPerElement=6,Yt("StructArrayLayout3ui6",_);class w extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x,C,E,D,V,N,W,X,J,re,pe,xe){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,i,l,h,g,y,x,C,E,D,V,N,W,X,J,re,pe,xe)}emplace(i,l,h,g,y,x,C,E,D,V,N,W,X,J,re,pe,xe,Ne){const Pe=24*i,K=12*i,fe=48*i;return this.int16[Pe+0]=l,this.int16[Pe+1]=h,this.uint16[Pe+2]=g,this.uint16[Pe+3]=y,this.uint32[K+2]=x,this.uint32[K+3]=C,this.uint32[K+4]=E,this.uint16[Pe+10]=D,this.uint16[Pe+11]=V,this.uint16[Pe+12]=N,this.float32[K+7]=W,this.float32[K+8]=X,this.uint8[fe+36]=J,this.uint8[fe+37]=re,this.uint8[fe+38]=pe,this.uint32[K+10]=xe,this.int16[Pe+22]=Ne,i}}w.prototype.bytesPerElement=48,Yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",w);class I extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g,y,x,C,E,D,V,N,W,X,J,re,pe,xe,Ne,Pe,K,fe,Ae,rt,Et,ht,yt,zt,Dt){const Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,i,l,h,g,y,x,C,E,D,V,N,W,X,J,re,pe,xe,Ne,Pe,K,fe,Ae,rt,Et,ht,yt,zt,Dt)}emplace(i,l,h,g,y,x,C,E,D,V,N,W,X,J,re,pe,xe,Ne,Pe,K,fe,Ae,rt,Et,ht,yt,zt,Dt,Vt){const St=32*i,Qt=16*i;return this.int16[St+0]=l,this.int16[St+1]=h,this.int16[St+2]=g,this.int16[St+3]=y,this.int16[St+4]=x,this.int16[St+5]=C,this.int16[St+6]=E,this.int16[St+7]=D,this.uint16[St+8]=V,this.uint16[St+9]=N,this.uint16[St+10]=W,this.uint16[St+11]=X,this.uint16[St+12]=J,this.uint16[St+13]=re,this.uint16[St+14]=pe,this.uint16[St+15]=xe,this.uint16[St+16]=Ne,this.uint16[St+17]=Pe,this.uint16[St+18]=K,this.uint16[St+19]=fe,this.uint16[St+20]=Ae,this.uint16[St+21]=rt,this.uint16[St+22]=Et,this.uint32[Qt+12]=ht,this.float32[Qt+13]=yt,this.float32[Qt+14]=zt,this.uint16[St+30]=Dt,this.uint16[St+31]=Vt,i}}I.prototype.bytesPerElement=64,Yt("StructArrayLayout8i15ui1ul2f2ui64",I);class M extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}M.prototype.bytesPerElement=4,Yt("StructArrayLayout1f4",M);class z extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const y=3*i;return this.uint16[6*i+0]=l,this.float32[y+1]=h,this.float32[y+2]=g,i}}z.prototype.bytesPerElement=12,Yt("StructArrayLayout1ui2f12",z);class O extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,h)}emplace(i,l,h,g){const y=4*i;return this.uint32[2*i+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=g,i}}O.prototype.bytesPerElement=8,Yt("StructArrayLayout1ul2ui8",O);class G extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const g=2*i;return this.uint16[g+0]=l,this.uint16[g+1]=h,i}}G.prototype.bytesPerElement=4,Yt("StructArrayLayout2ui4",G);class U extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}U.prototype.bytesPerElement=2,Yt("StructArrayLayout1ui2",U);class Z extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,g)}emplace(i,l,h,g,y){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=y,i}}Z.prototype.bytesPerElement=16,Yt("StructArrayLayout4f16",Z);class ne extends oo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}ne.prototype.size=20;class _e extends t{get(i){return new ne(this,i)}}Yt("CollisionBoxArray",_e);class ge extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class ye extends w{get(i){return new ge(this,i)}}Yt("PlacedSymbolArray",ye);class we extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}we.prototype.size=64;class Ie extends I{get(i){return new we(this,i)}}Yt("SymbolInstanceArray",Ie);class Ce extends M{getoffsetX(i){return this.float32[1*i+0]}}Yt("GlyphOffsetArray",Ce);class Re extends Es{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Yt("SymbolLineVertexArray",Re);class Oe extends oo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Oe.prototype.size=12;class Te extends z{get(i){return new Oe(this,i)}}Yt("TextAnchorOffsetArray",Te);class qe extends oo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qe.prototype.size=8;class st extends O{get(i){return new qe(this,i)}}Yt("FeatureIndexArray",st);class nt extends As{}class it extends As{}class lt extends As{}class Ut extends Gc{}class jt extends lo{}class Mt extends du{}class Jt extends qh{}class Tn extends qc{}class Yn extends Hh{}class Si extends v{}class ni extends o{}class ki extends p{}class ai extends _{}class ii extends G{}const si=Ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:vr}=si;class qn{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,l,h,g){const y=this.segments[this.segments.length-1];return i>qn.MAX_VERTEX_ARRAY_LENGTH&&et(`Max vertices per segment is ${qn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${qn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!y||y.vertexLength+i>qn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==g?this.createNewSegment(l,h,g):y}createNewSegment(i,l,h){const g={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(g.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(i,l,h){return this.prepareSegment(0,i,l,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,h,g){return new qn([{vertexOffset:i,primitiveOffset:l,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function sr(u,i){return 256*(u=ot(Math.floor(u),0,255))+ot(Math.floor(i),0,255)}qn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yt("SegmentVector",qn);const _r=Ei([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ms,Ds,Rs,Ka={exports:{}},hu={exports:{}},fu={exports:{}},al=function(){if(Rs)return Ka.exports;Rs=1;var u=(Ms||(Ms=1,hu.exports=function(l,h){var g,y,x,C,E,D,V,N;for(y=l.length-(g=3&l.length),x=h,E=3432918353,D=461845907,N=0;N<y;)V=255&l.charCodeAt(N)|(255&l.charCodeAt(++N))<<8|(255&l.charCodeAt(++N))<<16|(255&l.charCodeAt(++N))<<24,++N,x=27492+(65535&(C=5*(65535&(x=(x^=V=(65535&(V=(V=(65535&V)*E+(((V>>>16)*E&65535)<<16)&4294967295)<<15|V>>>17))*D+(((V>>>16)*D&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(V=0,g){case 3:V^=(255&l.charCodeAt(N+2))<<16;case 2:V^=(255&l.charCodeAt(N+1))<<8;case 1:x^=V=(65535&(V=(V=(65535&(V^=255&l.charCodeAt(N)))*E+(((V>>>16)*E&65535)<<16)&4294967295)<<15|V>>>17))*D+(((V>>>16)*D&65535)<<16)&4294967295}return x^=l.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),hu.exports),i=(Ds||(Ds=1,fu.exports=function(l,h){for(var g,y=l.length,x=h^y,C=0;y>=4;)g=1540483477*(65535&(g=255&l.charCodeAt(C)|(255&l.charCodeAt(++C))<<8|(255&l.charCodeAt(++C))<<16|(255&l.charCodeAt(++C))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),y-=4,++C;switch(y){case 3:x^=(255&l.charCodeAt(C+2))<<16;case 2:x^=(255&l.charCodeAt(C+1))<<8;case 1:x=1540483477*(65535&(x^=255&l.charCodeAt(C)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),fu.exports);return Ka.exports=u,Ka.exports.murmur3=u,Ka.exports.murmur2=i,Ka.exports}(),Xr=b(al);class Ma{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,h,g){this.ids.push(Ls(i)),this.positions.push(l,h,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Ls(i);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=l?g=x:h=x+1}const y=[];for(;this.ids[h]===l;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(i,l){const h=new Float64Array(i.ids),g=new Uint32Array(i.positions);return uo(h,g,0,h.length-1),l&&l.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(i){const l=new Ma;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Ls(u){const i=+u;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Xr(String(u))}function uo(u,i,l,h){for(;l<h;){const g=u[l+h>>1];let y=l-1,x=h+1;for(;;){do y++;while(u[y]<g);do x--;while(u[x]>g);if(y>=x)break;Bi(u,y,x),Bi(i,3*y,3*x),Bi(i,3*y+1,3*x+1),Bi(i,3*y+2,3*x+2)}x-l<h-x?(uo(u,i,l,x),l=x+1):(uo(u,i,x+1,h),h=x)}}function Bi(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}Yt("FeaturePositionMap",Ma);class hi{constructor(i,l){this.gl=i.gl,this.location=l}}class Ur extends hi{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Xi extends hi{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class yp extends hi{constructor(i,l){super(i,l),this.current=On.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const $v=new Float32Array(16);function Wh(u){return[sr(255*u.r,255*u.g),sr(255*u.b,255*u.a)]}class mu{constructor(i,l,h){this.value=i,this.uniformNames=l.map(g=>`u_${g}`),this.type=h}setUniform(i,l,h){i.set(h.constantOr(this.value))}getBinding(i,l,h){return this.type==="color"?new yp(i,l):new Ur(i,l)}}class sl{constructor(i,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setUniform(i,l,h,g){const y=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&i.set(y)}getBinding(i,l,h){return h.substr(0,9)==="u_pattern"?new Xi(i,l):new Ur(i,l)}}class os{constructor(i,l,h,g){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,l,h,g,y){const x=this.paintVertexArray.length,C=this.expression.evaluate(new mi(0),l,{},g,[],y);this.paintVertexArray.resize(i),this._setPaintValue(x,i,C)}updatePaintArray(i,l,h,g){const y=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(i,l,y)}_setPaintValue(i,l,h){if(this.type==="color"){const g=Wh(h);for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,g[0],g[1])}else{for(let g=i;g<l;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class yr{constructor(i,l,h,g,y,x){this.expression=i,this.uniformNames=l.map(C=>`u_${C}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,h,g,y){const x=this.expression.evaluate(new mi(this.zoom),l,{},g,[],y),C=this.expression.evaluate(new mi(this.zoom+1),l,{},g,[],y),E=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(E,i,x,C)}updatePaintArray(i,l,h,g){const y=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(i,l,y,x)}_setPaintValue(i,l,h,g){if(this.type==="color"){const y=Wh(h),x=Wh(g);for(let C=i;C<l;C++)this.paintVertexArray.emplace(C,y[0],y[1],x[0],x[1])}else{for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=ot(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,l,h){return new Ur(i,l)}}class ls{constructor(i,l,h,g,y,x){this.expression=i,this.type=l,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(i,l,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(i,l,h,g,y){this._setPaintValues(i,l,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(i,l,h,g){if(!g||!h)return;const{min:y,mid:x,max:C}=h,E=g[y],D=g[x],V=g[C];if(E&&D&&V)for(let N=i;N<l;N++)this.zoomInPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],D.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],D.pixelRatio,V.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,_r.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,_r.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zh{constructor(i,l,h){this.binders={},this._buffers=[];const g=[];for(const y in i.paint._values){if(!h(y))continue;const x=i.paint.get(y);if(!(x instanceof Za&&Wo(x.property.specification)))continue;const C=Kh(y,i.type),E=x.value,D=x.property.specification.type,V=x.property.useIntegerZoom,N=x.property.specification["property-type"],W=N==="cross-faded"||N==="cross-faded-data-driven";if(E.kind==="constant")this.binders[y]=W?new sl(E.value,C):new mu(E.value,C,D),g.push(`/u_${y}`);else if(E.kind==="source"||W){const X=Yh(y,D,"source");this.binders[y]=W?new ls(E,D,V,l,X,i.id):new os(E,C,D,X),g.push(`/a_${y}`)}else{const X=Yh(y,D,"composite");this.binders[y]=new yr(E,C,D,V,l,X),g.push(`/z_${y}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof os||l instanceof yr?l.maxValue:0}populatePaintArrays(i,l,h,g,y){for(const x in this.binders){const C=this.binders[x];(C instanceof os||C instanceof yr||C instanceof ls)&&C.populatePaintArray(i,l,h,g,y)}}setConstantPatternPositions(i,l){for(const h in this.binders){const g=this.binders[h];g instanceof sl&&g.setConstantPatternPositions(i,l)}}updatePaintArrays(i,l,h,g,y){let x=!1;for(const C in i){const E=l.getPositions(C);for(const D of E){const V=h.feature(D.index);for(const N in this.binders){const W=this.binders[N];if((W instanceof os||W instanceof yr||W instanceof ls)&&W.expression.isStateDependent===!0){const X=g.paint.get(N);W.expression=X.value,W.updatePaintArray(D.start,D.end,V,i[C],y),x=!0}}}}return x}defines(){const i=[];for(const l in this.binders){const h=this.binders[l];(h instanceof mu||h instanceof sl)&&i.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof os||h instanceof yr)for(let g=0;g<h.paintVertexAttributes.length;g++)i.push(h.paintVertexAttributes[g].name);else if(h instanceof ls)for(let g=0;g<_r.members.length;g++)i.push(_r.members[g].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof mu||h instanceof sl||h instanceof yr)for(const g of h.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const h=[];for(const g in this.binders){const y=this.binders[g];if(y instanceof mu||y instanceof sl||y instanceof yr){for(const x of y.uniformNames)if(l[x]){const C=y.getBinding(i,l[x],x);h.push({name:x,property:g,binding:C})}}}return h}setUniforms(i,l,h,g){for(const{name:y,property:x,binding:C}of l)this.binders[x].setUniform(C,g,h.get(x),y)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(i&&h instanceof ls){const g=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof os||h instanceof yr)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(const l in this.binders){const h=this.binders[l];(h instanceof os||h instanceof yr||h instanceof ls)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof os||l instanceof yr||l instanceof ls)&&l.destroy()}}}class zs{constructor(i,l,h=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new Zh(g,l,h);this.needsUpload=!1,this._featureMap=new Ma,this._bufferOffset=0}populatePaintArrays(i,l,h,g,y,x){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(i,l,g,y,x);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,h,g){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(i,this._featureMap,l,y,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Kh(u,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${i}-`,"").replace(/-/g,"_")]}function Yh(u,i,l){const h={color:{source:du,composite:Z},number:{source:M,composite:du}},g=function(y){return{"line-pattern":{source:Jt,composite:Jt},"fill-pattern":{source:Jt,composite:Jt},"fill-extrusion-pattern":{source:Jt,composite:Jt}}[y]}(u);return g&&g[l]||h[i][l]}Yt("ConstantBinder",mu),Yt("CrossFadedConstantBinder",sl),Yt("SourceExpressionBinder",os),Yt("CrossFadedCompositeBinder",ls),Yt("CompositeExpressionBinder",yr),Yt("ProgramConfiguration",Zh,{omit:["_buffers"]}),Yt("ProgramConfigurationSet",zs);const pu=Math.pow(2,14)-1,ex=-pu-1;function gu(u){const i=Ee/u.extent,l=u.loadGeometry();for(let h=0;h<l.length;h++){const g=l[h];for(let y=0;y<g.length;y++){const x=g[y],C=Math.round(x.x*i),E=Math.round(x.y*i);x.x=ot(C,ex,pu),x.y=ot(E,ex,pu),(C<x.x||C>x.x+1||E<x.y||E>x.y+1)&&et("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function vu(u,i){return{type:u.type,id:u.id,properties:u.properties,geometry:i?gu(u):[]}}const tx=-32768;function HI(u,i,l,h,g){u.emplaceBack(tx+8*i+h,tx+8*l+g)}class jv{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new it,this.indexArray=new ai,this.segments=new qn,this.programConfigurations=new zs(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){const g=this.layers[0],y=[];let x=null,C=!1,E=g.type==="heatmap";if(g.type==="circle"){const V=g;x=V.layout.get("circle-sort-key"),C=!x.isConstant(),E=E||V.paint.get("circle-pitch-alignment")==="map"}const D=E?l.subdivisionGranularity.circle:1;for(const{feature:V,id:N,index:W,sourceLayerIndex:X}of i){const J=this.layers[0]._featureFilter.needGeometry,re=vu(V,J);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),re,h))continue;const pe=C?x.evaluate(re,{},h):void 0,xe={id:N,properties:V.properties,type:V.type,sourceLayerIndex:X,index:W,geometry:J?re.geometry:gu(V),patterns:{},sortKey:pe};y.push(xe)}C&&y.sort((V,N)=>V.sortKey-N.sortKey);for(const V of y){const{geometry:N,index:W,sourceLayerIndex:X}=V,J=i[W].feature;this.addFeature(V,N,W,h,D),l.featureIndex.insert(J,N,W,X,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,vr),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,h,g,y=1){let x;switch(y){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${y}; valid values are 1, 3, 5, 7.`)}const C=x.length;for(const E of l)for(const D of E){const V=D.x,N=D.y;if(V<0||V>=Ee||N<0||N>=Ee)continue;const W=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,i.sortKey),X=W.vertexLength;for(let J=0;J<C;J++)for(let re=0;re<C;re++)HI(this.layoutVertexArray,V,N,x[re],x[J]);for(let J=0;J<C-1;J++)for(let re=0;re<C-1;re++){const pe=X+J*C+re,xe=X+(J+1)*C+re;this.indexArray.emplaceBack(pe,xe+1,pe+1),this.indexArray.emplaceBack(pe,xe,xe+1)}W.vertexLength+=C*C,W.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},g)}}function nx(u,i){for(let l=0;l<u.length;l++)if(Hc(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(Hc(u,i[l]))return!0;return!!Nv(u,i)}function WI(u,i,l){return!!Hc(u,i)||!!Uv(i,u,l)}function ix(u,i){if(u.length===1)return ax(i,u[0]);for(let l=0;l<i.length;l++){const h=i[l];for(let g=0;g<h.length;g++)if(Hc(u,h[g]))return!0}for(let l=0;l<u.length;l++)if(ax(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(Nv(u,i[l]))return!0;return!1}function ZI(u,i,l){if(u.length>1){if(Nv(u,i))return!0;for(let h=0;h<i.length;h++)if(Uv(i[h],u,l))return!0}for(let h=0;h<u.length;h++)if(Uv(u[h],i,l))return!0;return!1}function Nv(u,i){if(u.length===0||i.length===0)return!1;for(let l=0;l<u.length-1;l++){const h=u[l],g=u[l+1];for(let y=0;y<i.length-1;y++)if(KI(h,g,i[y],i[y+1]))return!0}return!1}function KI(u,i,l,h){return It(u,l,h)!==It(i,l,h)&&It(u,i,l)!==It(u,i,h)}function Uv(u,i,l){const h=l*l;if(i.length===1)return u.distSqr(i[0])<h;for(let g=1;g<i.length;g++)if(rx(u,i[g-1],i[g])<h)return!0;return!1}function rx(u,i,l){const h=i.distSqr(l);if(h===0)return u.distSqr(i);const g=((u.x-i.x)*(l.x-i.x)+(u.y-i.y)*(l.y-i.y))/h;return u.distSqr(g<0?i:g>1?l:l.sub(i)._mult(g)._add(i))}function ax(u,i){let l,h,g,y=!1;for(let x=0;x<u.length;x++){l=u[x];for(let C=0,E=l.length-1;C<l.length;E=C++)h=l[C],g=l[E],h.y>i.y!=g.y>i.y&&i.x<(g.x-h.x)*(i.y-h.y)/(g.y-h.y)+h.x&&(y=!y)}return y}function Hc(u,i){let l=!1;for(let h=0,g=u.length-1;h<u.length;g=h++){const y=u[h],x=u[g];y.y>i.y!=x.y>i.y&&i.x<(x.x-y.x)*(i.y-y.y)/(x.y-y.y)+y.x&&(l=!l)}return l}function YI(u,i,l){const h=l[0],g=l[2];if(u.x<h.x&&i.x<h.x||u.x>g.x&&i.x>g.x||u.y<h.y&&i.y<h.y||u.y>g.y&&i.y>g.y)return!1;const y=It(u,i,l[0]);return y!==It(u,i,l[1])||y!==It(u,i,l[2])||y!==It(u,i,l[3])}function Xh(u,i,l){const h=i.paint.get(u).value;return h.kind==="constant"?h.value:l.programConfigurations.get(i.id).getMaxValue(u)}function bp(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function xp(u,i,l,h,g){if(!i[0]&&!i[1])return u;const y=R.convert(i)._mult(g);l==="viewport"&&y._rotate(-h);const x=[];for(let C=0;C<u.length;C++)x.push(u[C].sub(y));return x}let sx,ox;Yt("CircleBucket",jv,{omit:["layers"]});var XI={get paint(){return ox=ox||new Nr({"circle-radius":new hn($e.paint_circle["circle-radius"]),"circle-color":new hn($e.paint_circle["circle-color"]),"circle-blur":new hn($e.paint_circle["circle-blur"]),"circle-opacity":new hn($e.paint_circle["circle-opacity"]),"circle-translate":new en($e.paint_circle["circle-translate"]),"circle-translate-anchor":new en($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new en($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new en($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hn($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hn($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hn($e.paint_circle["circle-stroke-opacity"])})},get layout(){return sx=sx||new Nr({"circle-sort-key":new hn($e.layout_circle["circle-sort-key"])})}};class JI extends gr{constructor(i){super(i,XI)}createBucket(i){return new jv(i)}queryRadius(i){const l=i;return Xh("circle-radius",this,l)+Xh("circle-stroke-width",this,l)+bp(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:y,pixelsToTileUnits:x,unwrappedTileID:C,getElevation:E}){const D=xp(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-y.bearingInRadians,x),V=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),N=this.paint.get("circle-pitch-alignment")==="map",W=N?D:function(J,re,pe,xe){return J.map(Ne=>lx(Ne,re,pe,xe))}(D,y,C,E),X=N?V*x:V;for(const J of g)for(const re of J){const pe=N?re:lx(re,y,C,E);let xe=X;const Ne=y.projectTileCoordinates(re.x,re.y,C,E).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xe*=Ne/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xe*=y.cameraToCenterDistance/Ne),WI(W,pe,xe))return!0}return!1}}function lx(u,i,l,h){const g=i.projectTileCoordinates(u.x,u.y,l,h).point;return new R((.5*g.x+.5)*i.width,(.5*-g.y+.5)*i.height)}class ux extends jv{}let cx;Yt("HeatmapBucket",ux,{omit:["layers"]});var QI={get paint(){return cx=cx||new Nr({"heatmap-radius":new hn($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hn($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new en($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cu($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new en($e.paint_heatmap["heatmap-opacity"])})}};function Gv(u,{width:i,height:l},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*l*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*l*h}`)}else g=new Uint8Array(i*l*h);return u.width=i,u.height=l,u.data=g,u}function dx(u,{width:i,height:l},h){if(i===u.width&&l===u.height)return;const g=Gv({},{width:i,height:l},h);qv(u,g,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,i),height:Math.min(u.height,l)},h),u.width=i,u.height=l,u.data=g.data}function qv(u,i,l,h,g,y){if(g.width===0||g.height===0)return i;if(g.width>u.width||g.height>u.height||l.x>u.width-g.width||l.y>u.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||h.x>i.width-g.width||h.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=u.data,C=i.data;if(x===C)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const D=((l.y+E)*u.width+l.x)*y,V=((h.y+E)*i.width+h.x)*y;for(let N=0;N<g.width*y;N++)C[V+N]=x[D+N]}return i}class Jh{constructor(i,l){Gv(this,i,1,l)}resize(i){dx(this,i,1)}clone(){return new Jh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,g,y){qv(i,l,h,g,y,1)}}class ca{constructor(i,l){Gv(this,i,4,l)}resize(i){dx(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ca({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,g,y){qv(i,l,h,g,y,4)}setPixel(i,l,h){const g=4*(i*this.width+l);this.data[g+0]=Math.round(255*h.r/h.a),this.data[g+1]=Math.round(255*h.g/h.a),this.data[g+2]=Math.round(255*h.b/h.a),this.data[g+3]=Math.round(255*h.a)}}function hx(u){const i={},l=u.resolution||256,h=u.clips?u.clips.length:1,g=u.image||new ca({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const y=(x,C,E)=>{i[u.evaluationKey]=E;const D=u.expression.evaluate(i);g.setPixel(x/4/l,C/4,D)};if(u.clips)for(let x=0,C=0;x<h;++x,C+=4*l)for(let E=0,D=0;E<l;E++,D+=4){const V=E/(l-1),{start:N,end:W}=u.clips[x];y(C,D,N*(1-V)+W*V)}else for(let x=0,C=0;x<l;x++,C+=4)y(0,C,x/(l-1));return g}Yt("AlphaImage",Jh),Yt("RGBAImage",ca);const Hv="big-fb";class eA extends gr{createBucket(i){return new ux(i)}constructor(i){super(i,QI),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Hv)&&this.heatmapFbos.delete(Hv)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let fx;var tA={get paint(){return fx=fx||new Nr({"hillshade-illumination-direction":new en($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new en($e.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new en($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new en($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new en($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new en($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new en($e.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new en($e.paint_hillshade["hillshade-method"])})}};class nA extends gr{constructor(i){super(i,tA),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const y=Math.max(i.length,l.length,h.length,g.length);i=i.concat(Array(y-i.length).fill(i.at(-1))),l=l.concat(Array(y-l.length).fill(l.at(-1))),h=h.concat(Array(y-h.length).fill(h.at(-1))),g=g.concat(Array(y-g.length).fill(g.at(-1)));const x=l.map(Dn);return{directionRadians:i.map(Dn),altitudeRadians:x,shadowColor:g,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let mx;var iA={get paint(){return mx=mx||new Nr({"color-relief-opacity":new en($e["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new cu($e["paint_color-relief"]["color-relief-color"])})}};class Wv{constructor(i,l,h,g){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(l,g)}update(i,l,h){const{width:g,height:y}=i,x=!(this.size&&this.size[0]===g&&this.size[1]===y||h),{context:C}=this,{gl:E}=C;if(this.useMipmap=!!(l&&l.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!l||l.premultiply!==!1)),x)this.size=[g,y],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||At(i)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,g,y,0,this.format,E.UNSIGNED_BYTE,i.data);else{const{x:D,y:V}=h||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||At(i)?E.texSubImage2D(E.TEXTURE_2D,0,D,V,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,D,V,g,y,E.RGBA,E.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,h){const{context:g}=this,{gl:y}=g;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),i!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||i),this.filter=i),l!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,l),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class px{constructor(i,l,h,g=1,y=1,x=1,C=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void et(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const E=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=y,this.blueFactor=x,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<E;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(E,D)]=this.data[this._idx(E-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,E)]=this.data[this._idx(D,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<E;D++)for(let V=0;V<E;V++){const N=this.get(D,V);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(i,l){const h=new Uint8Array(this.data.buffer),g=4*this._idx(i,l);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,h){return i*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}pack(i){return gx(i,this.getUnpackVector())}getPixels(){return new ca({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,y=l*this.dim+this.dim,x=h*this.dim,C=h*this.dim+this.dim;switch(l){case-1:g=y-1;break;case 1:y=g+1}switch(h){case-1:x=C-1;break;case 1:C=x+1}const E=-l*this.dim,D=-h*this.dim;for(let V=x;V<C;V++)for(let N=g;N<y;N++)this.data[this._idx(N,V)]=i.data[this._idx(N+E,V+D)]}}function gx(u,i){const l=i[0],h=i[1],g=i[2],y=i[3],x=Math.min(l,h,g),C=Math.round((u+y)/x);return{r:Math.floor(C*x/l)%256,g:Math.floor(C*x/h)%256,b:Math.floor(C*x/g)%256}}Yt("DEMData",px);class rA extends gr{constructor(i){super(i,iA)}_createColorRamp(i){const l={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof Ql&&h._styleExpression.expression instanceof $r){this.colorRampExpression=h;const x=h._styleExpression.expression;l.elevationStops=x.labels,l.colorStops=[];for(const C of l.elevationStops)l.colorStops.push(x.evaluate({globals:{elevation:C}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[On.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=i)return l;const g={elevationStops:[],colorStops:[]},y=(l.elevationStops.length-1)/(i-1);for(let x=0;x<l.elevationStops.length-.5;x+=y)g.elevationStops.push(l.elevationStops[Math.round(x)]),g.colorStops.push(l.colorStops[Math.round(x)]);return et(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,l,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(l),y=new ca({width:g.colorStops.length,height:1}),x=new ca({width:g.colorStops.length,height:1});for(let C=0;C<g.elevationStops.length;C++){const E=gx(g.elevationStops[C],h);x.setPixel(0,C,new On(E.r/255,E.g/255,E.b/255,1)),y.setPixel(0,C,g.colorStops[C])}return this.colorRampTextures={elevationTexture:new Wv(i,x,i.gl.RGBA),colorTexture:new Wv(i,y,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const aA=Ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:sA}=aA;function Zv(u,i,l){const h=l.patternDependencies;let g=!1;for(const y of i){const x=y.paint.get(`${u}-pattern`);x.isConstant()||(g=!0);const C=x.constantOr(null);C&&(g=!0,h[C.to]=!0,h[C.from]=!0)}return g}function Kv(u,i,l,h,g){const y=g.patternDependencies;for(const x of i){const C=x.paint.get(`${u}-pattern`).value;if(C.kind!=="constant"){let E=C.evaluate({zoom:h-1},l,{},g.availableImages),D=C.evaluate({zoom:h},l,{},g.availableImages),V=C.evaluate({zoom:h+1},l,{},g.availableImages);E=E&&E.name?E.name:E,D=D&&D.name?D.name:D,V=V&&V.name?V.name:V,y[E]=!0,y[D]=!0,y[V]=!0,l.patterns[x.id]={min:E,mid:D,max:V}}}return l}function vx(u,i,l,h,g){let y;if(g===function(x,C,E,D){let V=0;for(let N=C,W=E-D;N<E;N+=D)V+=(x[W]-x[N])*(x[N+1]+x[W+1]),W=N;return V}(u,i,l,h)>0)for(let x=i;x<l;x+=h)y=xx(x/h|0,u[x],u[x+1],y);else for(let x=l-h;x>=i;x-=h)y=xx(x/h|0,u[x],u[x+1],y);return y&&Wc(y,y.next)&&(nf(y),y=y.next),y}function _u(u,i){if(!u)return u;i||(i=u);let l,h=u;do if(l=!1,h.steiner||!Wc(h,h.next)&&$i(h.prev,h,h.next)!==0)h=h.next;else{if(nf(h),h=i=h.prev,h===h.next)break;l=!0}while(l||h!==i);return i}function Qh(u,i,l,h,g,y,x){if(!u)return;!x&&y&&function(E,D,V,N){let W=E;do W.z===0&&(W.z=Yv(W.x,W.y,D,V,N)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==E);W.prevZ.nextZ=null,W.prevZ=null,function(X){let J,re=1;do{let pe,xe=X;X=null;let Ne=null;for(J=0;xe;){J++;let Pe=xe,K=0;for(let Ae=0;Ae<re&&(K++,Pe=Pe.nextZ,Pe);Ae++);let fe=re;for(;K>0||fe>0&&Pe;)K!==0&&(fe===0||!Pe||xe.z<=Pe.z)?(pe=xe,xe=xe.nextZ,K--):(pe=Pe,Pe=Pe.nextZ,fe--),Ne?Ne.nextZ=pe:X=pe,pe.prevZ=Ne,Ne=pe;xe=Pe}Ne.nextZ=null,re*=2}while(J>1)}(W)}(u,h,g,y);let C=u;for(;u.prev!==u.next;){const E=u.prev,D=u.next;if(y?lA(u,h,g,y):oA(u))i.push(E.i,u.i,D.i),nf(u),u=D.next,C=D.next;else if((u=D)===C){x?x===1?Qh(u=uA(_u(u),i),i,l,h,g,y,2):x===2&&cA(u,i,l,h,g,y):Qh(_u(u),i,l,h,g,y,1);break}}}function oA(u){const i=u.prev,l=u,h=u.next;if($i(i,l,h)>=0)return!1;const g=i.x,y=l.x,x=h.x,C=i.y,E=l.y,D=h.y,V=Math.min(g,y,x),N=Math.min(C,E,D),W=Math.max(g,y,x),X=Math.max(C,E,D);let J=h.next;for(;J!==i;){if(J.x>=V&&J.x<=W&&J.y>=N&&J.y<=X&&ef(g,C,y,E,x,D,J.x,J.y)&&$i(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function lA(u,i,l,h){const g=u.prev,y=u,x=u.next;if($i(g,y,x)>=0)return!1;const C=g.x,E=y.x,D=x.x,V=g.y,N=y.y,W=x.y,X=Math.min(C,E,D),J=Math.min(V,N,W),re=Math.max(C,E,D),pe=Math.max(V,N,W),xe=Yv(X,J,i,l,h),Ne=Yv(re,pe,i,l,h);let Pe=u.prevZ,K=u.nextZ;for(;Pe&&Pe.z>=xe&&K&&K.z<=Ne;){if(Pe.x>=X&&Pe.x<=re&&Pe.y>=J&&Pe.y<=pe&&Pe!==g&&Pe!==x&&ef(C,V,E,N,D,W,Pe.x,Pe.y)&&$i(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,K.x>=X&&K.x<=re&&K.y>=J&&K.y<=pe&&K!==g&&K!==x&&ef(C,V,E,N,D,W,K.x,K.y)&&$i(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;Pe&&Pe.z>=xe;){if(Pe.x>=X&&Pe.x<=re&&Pe.y>=J&&Pe.y<=pe&&Pe!==g&&Pe!==x&&ef(C,V,E,N,D,W,Pe.x,Pe.y)&&$i(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;K&&K.z<=Ne;){if(K.x>=X&&K.x<=re&&K.y>=J&&K.y<=pe&&K!==g&&K!==x&&ef(C,V,E,N,D,W,K.x,K.y)&&$i(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function uA(u,i){let l=u;do{const h=l.prev,g=l.next.next;!Wc(h,g)&&yx(h,l,l.next,g)&&tf(h,g)&&tf(g,h)&&(i.push(h.i,l.i,g.i),nf(l),nf(l.next),l=u=g),l=l.next}while(l!==u);return _u(l)}function cA(u,i,l,h,g,y){let x=u;do{let C=x.next.next;for(;C!==x.prev;){if(x.i!==C.i&&pA(x,C)){let E=bx(x,C);return x=_u(x,x.next),E=_u(E,E.next),Qh(x,i,l,h,g,y,0),void Qh(E,i,l,h,g,y,0)}C=C.next}x=x.next}while(x!==u)}function dA(u,i){let l=u.x-i.x;return l===0&&(l=u.y-i.y,l===0)&&(l=(u.next.y-u.y)/(u.next.x-u.x)-(i.next.y-i.y)/(i.next.x-i.x)),l}function hA(u,i){const l=function(g,y){let x=y;const C=g.x,E=g.y;let D,V=-1/0;if(Wc(g,x))return x;do{if(Wc(g,x.next))return x.next;if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){const re=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(re<=C&&re>V&&(V=re,D=x.x<x.next.x?x:x.next,re===C))return D}x=x.next}while(x!==y);if(!D)return null;const N=D,W=D.x,X=D.y;let J=1/0;x=D;do{if(C>=x.x&&x.x>=W&&C!==x.x&&_x(E<X?C:V,E,W,X,E<X?V:C,E,x.x,x.y)){const re=Math.abs(E-x.y)/(C-x.x);tf(x,g)&&(re<J||re===J&&(x.x>D.x||x.x===D.x&&fA(D,x)))&&(D=x,J=re)}x=x.next}while(x!==N);return D}(u,i);if(!l)return i;const h=bx(l,u);return _u(h,h.next),_u(l,l.next)}function fA(u,i){return $i(u.prev,u,i.prev)<0&&$i(i.next,u,u.next)<0}function Yv(u,i,l,h,g){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*g|0)|u<<8))|u<<4))|u<<2))|u<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function mA(u){let i=u,l=u;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==u);return l}function _x(u,i,l,h,g,y,x,C){return(g-x)*(i-C)>=(u-x)*(y-C)&&(u-x)*(h-C)>=(l-x)*(i-C)&&(l-x)*(y-C)>=(g-x)*(h-C)}function ef(u,i,l,h,g,y,x,C){return!(u===x&&i===C)&&_x(u,i,l,h,g,y,x,C)}function pA(u,i){return u.next.i!==i.i&&u.prev.i!==i.i&&!function(l,h){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==h.i&&g.next.i!==h.i&&yx(g,g.next,l,h))return!0;g=g.next}while(g!==l);return!1}(u,i)&&(tf(u,i)&&tf(i,u)&&function(l,h){let g=l,y=!1;const x=(l.x+h.x)/2,C=(l.y+h.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&x<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(y=!y),g=g.next;while(g!==l);return y}(u,i)&&($i(u.prev,u,i.prev)||$i(u,i.prev,i))||Wc(u,i)&&$i(u.prev,u,u.next)>0&&$i(i.prev,i,i.next)>0)}function $i(u,i,l){return(i.y-u.y)*(l.x-i.x)-(i.x-u.x)*(l.y-i.y)}function Wc(u,i){return u.x===i.x&&u.y===i.y}function yx(u,i,l,h){const g=Sp($i(u,i,l)),y=Sp($i(u,i,h)),x=Sp($i(l,h,u)),C=Sp($i(l,h,i));return g!==y&&x!==C||!(g!==0||!wp(u,l,i))||!(y!==0||!wp(u,h,i))||!(x!==0||!wp(l,u,h))||!(C!==0||!wp(l,i,h))}function wp(u,i,l){return i.x<=Math.max(u.x,l.x)&&i.x>=Math.min(u.x,l.x)&&i.y<=Math.max(u.y,l.y)&&i.y>=Math.min(u.y,l.y)}function Sp(u){return u>0?1:u<0?-1:0}function tf(u,i){return $i(u.prev,u,u.next)<0?$i(u,i,u.next)>=0&&$i(u,u.prev,i)>=0:$i(u,i,u.prev)<0||$i(u,u.next,i)<0}function bx(u,i){const l=Xv(u.i,u.x,u.y),h=Xv(i.i,i.x,i.y),g=u.next,y=i.prev;return u.next=i,i.prev=u,l.next=g,g.prev=l,h.next=l,l.prev=h,y.next=h,h.prev=y,h}function xx(u,i,l,h){const g=Xv(u,i,l);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function nf(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Xv(u,i,l){return{i:u,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zc{constructor(i,l){if(l>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=l}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class kp{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}kp.noSubdivision=new kp({fill:new Zc(0,0),line:new Zc(0,0),tile:new Zc(0,0),stencil:new Zc(0,0),circle:1}),Yt("SubdivisionGranularityExpression",Zc),Yt("SubdivisionGranularitySetting",kp);const Kc=-32768,rf=32767;class gA{constructor(i,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=Ee/i,this._canonical=l}_getKey(i,l){return(i+=32768)<<16|l+32768}_vertexToIndex(i,l){if(i<-32768||l<-32768||i>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(i),g=0|Math.round(l),y=this._getKey(h,g);if(this._vertexDictionary.has(y))return this._vertexDictionary.get(y);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(y,x),this._vertexBuffer.push(h,g),x}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(g,y){const x=[];for(let C=0;C<y.length;C+=3){const E=y[C],D=y[C+1],V=y[C+2],N=g[2*E],W=g[2*E+1];(g[2*D]-N)*(g[2*V+1]-W)-(g[2*D+1]-W)*(g[2*V]-N)>0?(x.push(E),x.push(V),x.push(D)):(x.push(E),x.push(D),x.push(V))}return x}(this._vertexBuffer,i);const l=[],h=i.length;for(let g=0;g<h;g+=3){const y=[i[g+0],i[g+1],i[g+2]],x=[this._vertexBuffer[2*i[g+0]+0],this._vertexBuffer[2*i[g+0]+1],this._vertexBuffer[2*i[g+1]+0],this._vertexBuffer[2*i[g+1]+1],this._vertexBuffer[2*i[g+2]+0],this._vertexBuffer[2*i[g+2]+1]];let C=1/0,E=1/0,D=-1/0,V=-1/0;for(let re=0;re<3;re++){const pe=x[2*re],xe=x[2*re+1];C=Math.min(C,pe),D=Math.max(D,pe),E=Math.min(E,xe),V=Math.max(V,xe)}if(C===D||E===V)continue;const N=Math.floor(C/this._granularityCellSize),W=Math.ceil(D/this._granularityCellSize),X=Math.floor(E/this._granularityCellSize),J=Math.ceil(V/this._granularityCellSize);if(N!==W||X!==J)for(let re=X;re<J;re++){const pe=this._scanlineGenerateVertexRingForCellRow(re,x,y);vA(this._vertexBuffer,pe,l)}else l.push(...y)}return l}_scanlineGenerateVertexRingForCellRow(i,l,h){const g=i*this._granularityCellSize,y=g+this._granularityCellSize,x=[];for(let C=0;C<3;C++){const E=l[2*C],D=l[2*C+1],V=l[2*(C+1)%6],N=l[(2*(C+1)+1)%6],W=l[2*(C+2)%6],X=l[(2*(C+2)+1)%6],J=V-E,re=N-D,pe=J===0,xe=re===0,Ne=(g-D)/re,Pe=(y-D)/re,K=Math.min(Ne,Pe),fe=Math.max(Ne,Pe);if(!xe&&(K>=1||fe<=0)||xe&&(D<g||D>y)){N>=g&&N<=y&&x.push(h[(C+1)%3]);continue}!xe&&K>0&&x.push(this._vertexToIndex(E+J*K,D+re*K));const Ae=E+J*Math.max(K,0),rt=E+J*Math.min(fe,1);pe||this._generateIntraEdgeVertices(x,E,D,V,N,Ae,rt),!xe&&fe<1&&x.push(this._vertexToIndex(E+J*fe,D+re*fe)),(xe||N>=g&&N<=y)&&x.push(h[(C+1)%3]),!xe&&(N<=g||N>=y)&&this._generateInterEdgeVertices(x,E,D,V,N,W,X,rt,g,y)}return x}_generateIntraEdgeVertices(i,l,h,g,y,x,C){const E=g-l,D=y-h,V=D===0,N=V?Math.min(l,g):Math.min(x,C),W=V?Math.max(l,g):Math.max(x,C),X=Math.floor(N/this._granularityCellSize)+1,J=Math.ceil(W/this._granularityCellSize)-1;if(V?l<g:x<C)for(let re=X;re<=J;re++){const pe=re*this._granularityCellSize;i.push(this._vertexToIndex(pe,h+D*(pe-l)/E))}else for(let re=J;re>=X;re--){const pe=re*this._granularityCellSize;i.push(this._vertexToIndex(pe,h+D*(pe-l)/E))}}_generateInterEdgeVertices(i,l,h,g,y,x,C,E,D,V){const N=y-h,W=x-g,X=C-y,J=(D-y)/X,re=(V-y)/X,pe=Math.min(J,re),xe=Math.max(J,re),Ne=g+W*pe;let Pe=Math.floor(Math.min(Ne,E)/this._granularityCellSize)+1,K=Math.ceil(Math.max(Ne,E)/this._granularityCellSize)-1,fe=E<Ne;const Ae=X===0;if(Ae&&(C===D||C===V))return;if(Ae||pe>=1||xe<=0){const Et=h-C,ht=x+(l-x)*Math.min((D-C)/Et,(V-C)/Et);Pe=Math.floor(Math.min(ht,E)/this._granularityCellSize)+1,K=Math.ceil(Math.max(ht,E)/this._granularityCellSize)-1,fe=E<ht}const rt=N>0?V:D;if(fe)for(let Et=Pe;Et<=K;Et++)i.push(this._vertexToIndex(Et*this._granularityCellSize,rt));else for(let Et=K;Et>=Pe;Et--)i.push(this._vertexToIndex(Et*this._granularityCellSize,rt))}_generateOutline(i){const l=[];for(const h of i){const g=yu(h,this._granularity,!0),y=this._pointArrayToIndices(g),x=[];for(let C=1;C<y.length;C++)x.push(y[C-1]),x.push(y[C]);l.push(x)}return l}_handlePoles(i){let l=!1,h=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(l||h)&&this._fillPoles(i,l,h)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let l=0;l<i.length;l+=2){const h=i[l+1];h===Kc&&(i[l+1]=-32767),h===rf&&(i[l+1]=32766)}}_generatePoleQuad(i,l,h,g,y,x){g>y!=(x===Kc)?(i.push(l),i.push(h),i.push(this._vertexToIndex(g,x)),i.push(h),i.push(this._vertexToIndex(y,x)),i.push(this._vertexToIndex(g,x))):(i.push(h),i.push(l),i.push(this._vertexToIndex(g,x)),i.push(this._vertexToIndex(y,x)),i.push(h),i.push(this._vertexToIndex(g,x)))}_fillPoles(i,l,h){const g=this._vertexBuffer,y=Ee,x=i.length;for(let C=2;C<x;C+=3){const E=i[C-2],D=i[C-1],V=i[C],N=g[2*E],W=g[2*E+1],X=g[2*D],J=g[2*D+1],re=g[2*V],pe=g[2*V+1];l&&(W===0&&J===0&&this._generatePoleQuad(i,E,D,N,X,Kc),J===0&&pe===0&&this._generatePoleQuad(i,D,V,X,re,Kc),pe===0&&W===0&&this._generatePoleQuad(i,V,E,re,N,Kc)),h&&(W===y&&J===y&&this._generatePoleQuad(i,E,D,N,X,rf),J===y&&pe===y&&this._generatePoleQuad(i,D,V,X,re,rf),pe===y&&W===y&&this._generatePoleQuad(i,V,E,re,N,rf))}}_initializeVertices(i){for(let l=0;l<i.length;l+=2)this._vertexToIndex(i[l],i[l+1])}subdividePolygonInternal(i,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:g}=function(C){const E=[],D=[];for(const V of C)if(V.length!==0){V!==C[0]&&E.push(D.length/2);for(let N=0;N<V.length;N++)D.push(V[N].x),D.push(V[N].y)}return{flattened:D,holeIndices:E}}(i);let y;this._initializeVertices(h);try{const C=function(D,V,N=2){const W=V&&V.length,X=W?V[0]*N:D.length;let J=vx(D,0,X,N,!0);const re=[];if(!J||J.next===J.prev)return re;let pe,xe,Ne;if(W&&(J=function(Pe,K,fe,Ae){const rt=[];for(let Et=0,ht=K.length;Et<ht;Et++){const yt=vx(Pe,K[Et]*Ae,Et<ht-1?K[Et+1]*Ae:Pe.length,Ae,!1);yt===yt.next&&(yt.steiner=!0),rt.push(mA(yt))}rt.sort(dA);for(let Et=0;Et<rt.length;Et++)fe=hA(rt[Et],fe);return fe}(D,V,J,N)),D.length>80*N){pe=1/0,xe=1/0;let Pe=-1/0,K=-1/0;for(let fe=N;fe<X;fe+=N){const Ae=D[fe],rt=D[fe+1];Ae<pe&&(pe=Ae),rt<xe&&(xe=rt),Ae>Pe&&(Pe=Ae),rt>K&&(K=rt)}Ne=Math.max(Pe-pe,K-xe),Ne=Ne!==0?32767/Ne:0}return Qh(J,re,N,pe,xe,Ne,0),re}(h,g),E=this._convertIndices(h,C);y=this._subdivideTrianglesScanline(E)}catch(C){console.error(C)}let x=[];return l&&(x=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(y),{verticesFlattened:this._vertexBuffer,indicesTriangles:y,indicesLineList:x}}_convertIndices(i,l){const h=[];for(let g=0;g<l.length;g++)h.push(this._vertexToIndex(i[2*l[g]],i[2*l[g]+1]));return h}_pointArrayToIndices(i){const l=[];for(let h=0;h<i.length;h++){const g=i[h];l.push(this._vertexToIndex(g.x,g.y))}return l}}function wx(u,i,l,h=!0){return new gA(l,i).subdividePolygonInternal(u,h)}function yu(u,i,l=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const h=u[0],g=u[u.length-1],y=l&&(h.x!==g.x||h.y!==g.y);if(i<2)return y?[...u,u[0]]:[...u];const x=Math.floor(Ee/i),C=[];C.push(new R(u[0].x,u[0].y));const E=u.length,D=y?E:E-1;for(let V=0;V<D;V++){const N=u[V],W=V<E-1?u[V+1]:u[0],X=N.x,J=N.y,re=W.x,pe=W.y,xe=X!==re,Ne=J!==pe;if(!xe&&!Ne)continue;const Pe=re-X,K=pe-J,fe=Math.abs(Pe),Ae=Math.abs(K);let rt=X,Et=J;for(;;){const yt=Pe>0?(Math.floor(rt/x)+1)*x:(Math.ceil(rt/x)-1)*x,zt=K>0?(Math.floor(Et/x)+1)*x:(Math.ceil(Et/x)-1)*x,Dt=Math.abs(rt-yt),Vt=Math.abs(Et-zt),St=Math.abs(rt-re),Qt=Math.abs(Et-pe),cn=xe?Dt/fe:Number.POSITIVE_INFINITY,un=Ne?Vt/Ae:Number.POSITIVE_INFINITY;if((St<=Dt||!xe)&&(Qt<=Vt||!Ne))break;if(cn<un&&xe||!Ne){rt=yt,Et+=K*cn;const rn=new R(rt,Math.round(Et));C[C.length-1].x===rn.x&&C[C.length-1].y===rn.y||C.push(rn)}else{rt+=Pe*un,Et=zt;const rn=new R(Math.round(rt),Et);C[C.length-1].x===rn.x&&C[C.length-1].y===rn.y||C.push(rn)}}const ht=new R(re,pe);C[C.length-1].x===ht.x&&C[C.length-1].y===ht.y||C.push(ht)}return C}function vA(u,i,l){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,g=u[2*i[0]];for(let E=1;E<i.length;E++){const D=u[2*i[E]];D<g&&(g=D,h=E)}const y=i.length;let x=h,C=(x+1)%y;for(;;){const E=x-1>=0?x-1:y-1,D=(C+1)%y,V=u[2*i[E]],N=u[2*i[D]],W=u[2*i[x]],X=u[2*i[x]+1],J=u[2*i[C]+1];let re=!1;if(V<N)re=!0;else if(V>N)re=!1;else{const pe=J-X,xe=-(u[2*i[C]]-W),Ne=X<J?1:-1;((V-W)*pe+(u[2*i[E]+1]-X)*xe)*Ne>((N-W)*pe+(u[2*i[D]+1]-X)*xe)*Ne&&(re=!0)}if(re){const pe=i[E],xe=i[x],Ne=i[C];pe!==xe&&pe!==Ne&&xe!==Ne&&l.push(Ne,xe,pe),x--,x<0&&(x=y-1)}else{const pe=i[D],xe=i[x],Ne=i[C];pe!==xe&&pe!==Ne&&xe!==Ne&&l.push(Ne,xe,pe),C++,C>=y&&(C=0)}if(E===D)break}}function Sx(u,i,l,h,g,y,x,C,E){const D=g.length/2,V=x&&C&&E;if(D<qn.MAX_VERTEX_ARRAY_LENGTH){const N=i.prepareSegment(D,l,h),W=N.vertexLength;for(let re=0;re<y.length;re+=3)h.emplaceBack(W+y[re],W+y[re+1],W+y[re+2]);let X,J;N.vertexLength+=D,N.primitiveLength+=y.length/3,V&&(J=x.prepareSegment(D,l,C),X=J.vertexLength,J.vertexLength+=D);for(let re=0;re<g.length;re+=2)u(g[re],g[re+1]);if(V)for(let re=0;re<E.length;re++){const pe=E[re];for(let xe=1;xe<pe.length;xe+=2)C.emplaceBack(X+pe[xe-1],X+pe[xe]);J.primitiveLength+=pe.length/2}}else(function(N,W,X,J,re,pe){const xe=[];for(let Ae=0;Ae<J.length/2;Ae++)xe.push(-1);const Ne={count:0};let Pe=0,K=N.getOrCreateLatestSegment(W,X),fe=K.vertexLength;for(let Ae=2;Ae<re.length;Ae+=3){const rt=re[Ae-2],Et=re[Ae-1],ht=re[Ae];let yt=xe[rt]<Pe,zt=xe[Et]<Pe,Dt=xe[ht]<Pe;K.vertexLength+((yt?1:0)+(zt?1:0)+(Dt?1:0))>qn.MAX_VERTEX_ARRAY_LENGTH&&(K=N.createNewSegment(W,X),Pe=Ne.count,yt=!0,zt=!0,Dt=!0,fe=0);const Vt=af(xe,J,pe,Ne,rt,yt,K),St=af(xe,J,pe,Ne,Et,zt,K),Qt=af(xe,J,pe,Ne,ht,Dt,K);X.emplaceBack(fe+Vt-Pe,fe+St-Pe,fe+Qt-Pe),K.primitiveLength++}})(i,l,h,g,y,u),V&&function(N,W,X,J,re,pe){const xe=[];for(let Ae=0;Ae<J.length/2;Ae++)xe.push(-1);const Ne={count:0};let Pe=0,K=N.getOrCreateLatestSegment(W,X),fe=K.vertexLength;for(let Ae=0;Ae<re.length;Ae++){const rt=re[Ae];for(let Et=1;Et<re[Ae].length;Et+=2){const ht=rt[Et-1],yt=rt[Et];let zt=xe[ht]<Pe,Dt=xe[yt]<Pe;K.vertexLength+((zt?1:0)+(Dt?1:0))>qn.MAX_VERTEX_ARRAY_LENGTH&&(K=N.createNewSegment(W,X),Pe=Ne.count,zt=!0,Dt=!0,fe=0);const Vt=af(xe,J,pe,Ne,ht,zt,K),St=af(xe,J,pe,Ne,yt,Dt,K);X.emplaceBack(fe+Vt-Pe,fe+St-Pe),K.primitiveLength++}}}(x,l,C,g,E,u),i.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function af(u,i,l,h,g,y,x){if(y){const C=h.count;return l(i[2*g],i[2*g+1]),u[g]=h.count,h.count++,x.vertexLength++,C}return u[g]}class Jv{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new lt,this.indexArray=new ai,this.indexArray2=new ii,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new qn,this.segments2=new qn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.hasPattern=Zv("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),y=!g.isConstant(),x=[];for(const{feature:C,id:E,index:D,sourceLayerIndex:V}of i){const N=this.layers[0]._featureFilter.needGeometry,W=vu(C,N);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),W,h))continue;const X=y?g.evaluate(W,{},h,l.availableImages):void 0,J={id:E,properties:C.properties,type:C.type,sourceLayerIndex:V,index:D,geometry:N?W.geometry:gu(C),patterns:{},sortKey:X};x.push(J)}y&&x.sort((C,E)=>C.sortKey-E.sortKey);for(const C of x){const{geometry:E,index:D,sourceLayerIndex:V}=C;if(this.hasPattern){const N=Kv("fill",this.layers,C,this.zoom,l);this.patternFeatures.push(N)}else this.addFeature(C,E,D,h,{},l.subdivisionGranularity);l.featureIndex.insert(i[D].feature,E,D,V,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}addFeatures(i,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,sA),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,h,g,y,x){for(const C of bc(l,500)){const E=wx(C,g,x.fill.getGranularityForZoomLevel(g.z)),D=this.layoutVertexArray;Sx((V,N)=>{D.emplaceBack(V,N)},this.segments,this.layoutVertexArray,this.indexArray,E.verticesFlattened,E.indicesTriangles,this.segments2,this.indexArray2,E.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,g)}}let kx,Cx;Yt("FillBucket",Jv,{omit:["layers","patternFeatures"]});var _A={get paint(){return Cx=Cx||new Nr({"fill-antialias":new en($e.paint_fill["fill-antialias"]),"fill-opacity":new hn($e.paint_fill["fill-opacity"]),"fill-color":new hn($e.paint_fill["fill-color"]),"fill-outline-color":new hn($e.paint_fill["fill-outline-color"]),"fill-translate":new en($e.paint_fill["fill-translate"]),"fill-translate-anchor":new en($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new Uc($e.paint_fill["fill-pattern"])})},get layout(){return kx=kx||new Nr({"fill-sort-key":new hn($e.layout_fill["fill-sort-key"])})}};class yA extends gr{constructor(i){super(i,_A)}recalculate(i,l){super.recalculate(i,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Jv(i)}queryRadius(){return bp(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:l,transform:h,pixelsToTileUnits:g}){return ix(xp(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,g),l)}isTileClipped(){return!0}}const bA=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xA=Ei([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wA}=bA;var Qv,Tx,e_,Px,t_,Ix,Ax,Cp={};function Ex(){if(Tx)return Qv;Tx=1;var u=T();function i(g,y,x,C,E){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=C,this._values=E,g.readFields(l,this,y)}function l(g,y,x){g==1?y.id=x.readVarint():g==2?function(C,E){for(var D=C.readVarint()+C.pos;C.pos<D;){var V=E._keys[C.readVarint()],N=E._values[C.readVarint()];E.properties[V]=N}}(x,y):g==3?y.type=x.readVarint():g==4&&(y._geometry=x.pos)}function h(g){for(var y,x,C=0,E=0,D=g.length,V=D-1;E<D;V=E++)C+=((x=g[V]).x-(y=g[E]).x)*(y.y+x.y);return C}return Qv=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var y,x=g.readVarint()+g.pos,C=1,E=0,D=0,V=0,N=[];g.pos<x;){if(E<=0){var W=g.readVarint();C=7&W,E=W>>3}if(E--,C===1||C===2)D+=g.readSVarint(),V+=g.readSVarint(),C===1&&(y&&N.push(y),y=[]),y.push(new u(D,V));else{if(C!==7)throw new Error("unknown command "+C);y&&y.push(y[0].clone())}}return y&&N.push(y),N},i.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var y=g.readVarint()+g.pos,x=1,C=0,E=0,D=0,V=1/0,N=-1/0,W=1/0,X=-1/0;g.pos<y;){if(C<=0){var J=g.readVarint();x=7&J,C=J>>3}if(C--,x===1||x===2)(E+=g.readSVarint())<V&&(V=E),E>N&&(N=E),(D+=g.readSVarint())<W&&(W=D),D>X&&(X=D);else if(x!==7)throw new Error("unknown command "+x)}return[V,W,N,X]},i.prototype.toGeoJSON=function(g,y,x){var C,E,D=this.extent*Math.pow(2,x),V=this.extent*g,N=this.extent*y,W=this.loadGeometry(),X=i.types[this.type];function J(xe){for(var Ne=0;Ne<xe.length;Ne++){var Pe=xe[Ne];xe[Ne]=[360*(Pe.x+V)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+N)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(C=0;C<W.length;C++)re[C]=W[C][0];J(W=re);break;case 2:for(C=0;C<W.length;C++)J(W[C]);break;case 3:for(W=function(xe){var Ne=xe.length;if(Ne<=1)return[xe];for(var Pe,K,fe=[],Ae=0;Ae<Ne;Ae++){var rt=h(xe[Ae]);rt!==0&&(K===void 0&&(K=rt<0),K===rt<0?(Pe&&fe.push(Pe),Pe=[xe[Ae]]):Pe.push(xe[Ae]))}return Pe&&fe.push(Pe),fe}(W),C=0;C<W.length;C++)for(E=0;E<W[C].length;E++)J(W[C][E])}W.length===1?W=W[0]:X="Multi"+X;var pe={type:"Feature",geometry:{type:X,coordinates:W},properties:this.properties};return"id"in this&&(pe.id=this.id),pe},Qv}function Mx(){if(Px)return e_;Px=1;var u=Ex();function i(h,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,g),this.length=this._features.length}function l(h,g,y){h===15?g.version=y.readVarint():h===1?g.name=y.readString():h===5?g.extent=y.readVarint():h===2?g._features.push(y.pos):h===3?g._keys.push(y.readString()):h===4&&g._values.push(function(x){for(var C=null,E=x.readVarint()+x.pos;x.pos<E;){var D=x.readVarint()>>3;C=D===1?x.readString():D===2?x.readFloat():D===3?x.readDouble():D===4?x.readVarint64():D===5?x.readVarint():D===6?x.readSVarint():D===7?x.readBoolean():null}return C}(y))}return e_=i,i.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var g=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,g,this.extent,this._keys,this._values)},e_}function Dx(){return Ax||(Ax=1,Cp.VectorTile=function(){if(Ix)return t_;Ix=1;var u=Mx();function i(l,h,g){if(l===3){var y=new u(g,g.readVarint()+g.pos);y.length&&(h[y.name]=y)}}return t_=function(l,h){this.layers=l.readFields(i,{},h)},t_}(),Cp.VectorTileFeature=Ex(),Cp.VectorTileLayer=Mx()),Cp}var sf=b(Dx());const SA=sf.VectorTileFeature.types,n_=Math.pow(2,13);function of(u,i,l,h,g,y,x,C){u.emplaceBack(i,l,2*Math.floor(h*n_)+x,g*n_*2,y*n_*2,Math.round(C))}class i_{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ut,this.centroidVertexArray=new nt,this.indexArray=new ai,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new qn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.features=[],this.hasPattern=Zv("fill-extrusion",this.layers,l);for(const{feature:g,id:y,index:x,sourceLayerIndex:C}of i){const E=this.layers[0]._featureFilter.needGeometry,D=vu(g,E);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),D,h))continue;const V={id:y,sourceLayerIndex:C,index:x,geometry:E?D.geometry:gu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Kv("fill-extrusion",this.layers,V,this.zoom,l)):this.addFeature(V,V.geometry,x,h,{},l.subdivisionGranularity),l.featureIndex.insert(g,V.geometry,x,C,this.index,!0)}}addFeatures(i,l,h){for(const g of this.features){const{geometry:y}=g;this.addFeature(g,y,g.index,l,h,i.subdivisionGranularity)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,wA),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,xA.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,h,g,y,x){for(const C of bc(l,500)){const E={x:0,y:0,sampleCount:0},D=this.layoutVertexArray.length;this.processPolygon(E,g,i,C,x);const V=this.layoutVertexArray.length-D,N=Math.floor(E.x/E.sampleCount),W=Math.floor(E.y/E.sampleCount);for(let X=0;X<V;X++)this.centroidVertexArray.emplaceBack(N,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,g)}processPolygon(i,l,h,g,y){if(g.length<1||Rx(g[0]))return;for(const N of g)N.length!==0&&kA(i,N);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=y.fill.getGranularityForZoomLevel(l.z),E=SA[h.type]==="Polygon";for(const N of g){if(N.length===0||Rx(N))continue;const W=yu(N,C,E);this._generateSideFaces(W,x)}if(!E)return;const D=wx(g,l,C,!1),V=this.layoutVertexArray;Sx((N,W)=>{of(V,N,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles)}_generateSideFaces(i,l){let h=0;for(let g=1;g<i.length;g++){const y=i[g],x=i[g-1];if(CA(y,x))continue;l.segment.vertexLength+4>qn.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=y.sub(x)._perp()._unit(),E=x.dist(y);h+E>32768&&(h=0),of(this.layoutVertexArray,y.x,y.y,C.x,C.y,0,0,h),of(this.layoutVertexArray,y.x,y.y,C.x,C.y,0,1,h),h+=E,of(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,h),of(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,h);const D=l.segment.vertexLength;this.indexArray.emplaceBack(D,D+2,D+1),this.indexArray.emplaceBack(D+1,D+2,D+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function kA(u,i){for(let l=0;l<i.length;l++){const h=i[l];l===i.length-1&&i[0].x===h.x&&i[0].y===h.y||(u.x+=h.x,u.y+=h.y,u.sampleCount++)}}function CA(u,i){return u.x===i.x&&(u.x<0||u.x>Ee)||u.y===i.y&&(u.y<0||u.y>Ee)}function Rx(u){return u.every(i=>i.x<0)||u.every(i=>i.x>Ee)||u.every(i=>i.y<0)||u.every(i=>i.y>Ee)}let Lx;Yt("FillExtrusionBucket",i_,{omit:["layers","features"]});var TA={get paint(){return Lx=Lx||new Nr({"fill-extrusion-opacity":new en($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hn($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new en($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new en($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Uc($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hn($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hn($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new en($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class PA extends gr{constructor(i){super(i,TA)}createBucket(i){return new i_(i)}queryRadius(){return bp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:y,pixelsToTileUnits:x,pixelPosMatrix:C}){const E=xp(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-y.bearingInRadians,x),D=this.paint.get("fill-extrusion-height").evaluate(l,h),V=this.paint.get("fill-extrusion-base").evaluate(l,h),N=function(X,J){const re=[];for(const pe of X){const xe=[pe.x,pe.y,0,1];Ze(xe,xe,J),re.push(new R(xe[0]/xe[3],xe[1]/xe[3]))}return re}(E,C),W=function(X,J,re,pe){const xe=[],Ne=[],Pe=pe[8]*J,K=pe[9]*J,fe=pe[10]*J,Ae=pe[11]*J,rt=pe[8]*re,Et=pe[9]*re,ht=pe[10]*re,yt=pe[11]*re;for(const zt of X){const Dt=[],Vt=[];for(const St of zt){const Qt=St.x,cn=St.y,un=pe[0]*Qt+pe[4]*cn+pe[12],rn=pe[1]*Qt+pe[5]*cn+pe[13],Nn=pe[2]*Qt+pe[6]*cn+pe[14],Mi=pe[3]*Qt+pe[7]*cn+pe[15],Ji=Nn+fe,Mr=Mi+Ae,Ra=un+rt,da=rn+Et,br=Nn+ht,Ci=Mi+yt,lr=new R((un+Pe)/Mr,(rn+K)/Mr);lr.z=Ji/Mr,Dt.push(lr);const xr=new R(Ra/Ci,da/Ci);xr.z=br/Ci,Vt.push(xr)}xe.push(Dt),Ne.push(Vt)}return[xe,Ne]}(g,V,D,C);return function(X,J,re){let pe=1/0;ix(re,J)&&(pe=zx(re,J[0]));for(let xe=0;xe<J.length;xe++){const Ne=J[xe],Pe=X[xe];for(let K=0;K<Ne.length-1;K++){const fe=Ne[K],Ae=[fe,Ne[K+1],Pe[K+1],Pe[K],fe];nx(re,Ae)&&(pe=Math.min(pe,zx(re,Ae)))}}return pe!==1/0&&pe}(W[0],W[1],N)}}function lf(u,i){return u.x*i.x+u.y*i.y}function zx(u,i){if(u.length===1){let l=0;const h=i[l++];let g;for(;!g||h.equals(g);)if(g=i[l++],!g)return 1/0;for(;l<i.length;l++){const y=i[l],x=u[0],C=g.sub(h),E=y.sub(h),D=x.sub(h),V=lf(C,C),N=lf(C,E),W=lf(E,E),X=lf(D,C),J=lf(D,E),re=V*W-N*N,pe=(W*X-N*J)/re,xe=(V*J-N*X)/re,Ne=h.z*(1-pe-xe)+g.z*pe+y.z*xe;if(isFinite(Ne))return Ne}return 1/0}{let l=1/0;for(const h of i)l=Math.min(l,h.z);return l}}const IA=Ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:AA}=IA,EA=Ei([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:MA}=EA,DA=sf.VectorTileFeature.types,RA=Math.cos(Math.PI/180*37.5),Vx=Math.pow(2,14)/.5;class r_{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new jt,this.layoutVertexArray2=new Mt,this.indexArray=new ai,this.programConfigurations=new zs(i.layers,i.zoom),this.segments=new qn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h){this.hasPattern=Zv("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),y=!g.isConstant(),x=[];for(const{feature:C,id:E,index:D,sourceLayerIndex:V}of i){const N=this.layers[0]._featureFilter.needGeometry,W=vu(C,N);if(!this.layers[0]._featureFilter.filter(new mi(this.zoom,{globalState:this.globalState}),W,h))continue;const X=y?g.evaluate(W,{},h):void 0,J={id:E,properties:C.properties,type:C.type,sourceLayerIndex:V,index:D,geometry:N?W.geometry:gu(C),patterns:{},sortKey:X};x.push(J)}y&&x.sort((C,E)=>C.sortKey-E.sortKey);for(const C of x){const{geometry:E,index:D,sourceLayerIndex:V}=C;if(this.hasPattern){const N=Kv("line",this.layers,C,this.zoom,l);this.patternFeatures.push(N)}else this.addFeature(C,E,D,h,{},l.subdivisionGranularity);l.featureIndex.insert(i[D].feature,E,D,V,this.index)}}update(i,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h)}addFeatures(i,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,MA)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,AA),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,h,g,y,x){const C=this.layers[0].layout,E=C.get("line-join").evaluate(i,{}),D=C.get("line-cap"),V=C.get("line-miter-limit"),N=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const W of l)this.addLine(W,i,E,D,V,N,g,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,g)}addLine(i,l,h,g,y,x,C,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=yu(i,C?E.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<i.length-1;Pe++)this.totalDistance+=i[Pe].dist(i[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=DA[l.type]==="Polygon";let V=i.length;for(;V>=2&&i[V-1].equals(i[V-2]);)V--;let N=0;for(;N<V-1&&i[N].equals(i[N+1]);)N++;if(V<(D?3:2))return;h==="bevel"&&(y=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*V,this.layoutVertexArray,this.indexArray);let J,re,pe,xe,Ne;this.e1=this.e2=-1,D&&(J=i[V-2],Ne=i[N].sub(J)._unit()._perp());for(let Pe=N;Pe<V;Pe++){if(pe=Pe===V-1?D?i[N+1]:void 0:i[Pe+1],pe&&i[Pe].equals(pe))continue;Ne&&(xe=Ne),J&&(re=J),J=i[Pe],Ne=pe?pe.sub(J)._unit()._perp():xe,xe=xe||Ne;let K=xe.add(Ne);K.x===0&&K.y===0||K._unit();const fe=xe.x*Ne.x+xe.y*Ne.y,Ae=K.x*Ne.x+K.y*Ne.y,rt=Ae!==0?1/Ae:1/0,Et=2*Math.sqrt(2-2*Ae),ht=Ae<RA&&re&&pe,yt=xe.x*Ne.y-xe.y*Ne.x>0;if(ht&&Pe>N){const Vt=J.dist(re);if(Vt>2*W){const St=J.sub(J.sub(re)._mult(W/Vt)._round());this.updateDistance(re,St),this.addCurrentVertex(St,xe,0,0,X),re=St}}const zt=re&&pe;let Dt=zt?h:D?"butt":g;if(zt&&Dt==="round"&&(rt<x?Dt="miter":rt<=2&&(Dt="fakeround")),Dt==="miter"&&rt>y&&(Dt="bevel"),Dt==="bevel"&&(rt>2&&(Dt="flipbevel"),rt<y&&(Dt="miter")),re&&this.updateDistance(re,J),Dt==="miter")K._mult(rt),this.addCurrentVertex(J,K,0,0,X);else if(Dt==="flipbevel"){if(rt>100)K=Ne.mult(-1);else{const Vt=rt*xe.add(Ne).mag()/xe.sub(Ne).mag();K._perp()._mult(Vt*(yt?-1:1))}this.addCurrentVertex(J,K,0,0,X),this.addCurrentVertex(J,K.mult(-1),0,0,X)}else if(Dt==="bevel"||Dt==="fakeround"){const Vt=-Math.sqrt(rt*rt-1),St=yt?Vt:0,Qt=yt?0:Vt;if(re&&this.addCurrentVertex(J,xe,St,Qt,X),Dt==="fakeround"){const cn=Math.round(180*Et/Math.PI/20);for(let un=1;un<cn;un++){let rn=un/cn;if(rn!==.5){const Mi=rn-.5;rn+=rn*Mi*(rn-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*Mi*Mi+(.848013+fe*(.215638*fe-1.06021)))}const Nn=Ne.sub(xe)._mult(rn)._add(xe)._unit()._mult(yt?-1:1);this.addHalfVertex(J,Nn.x,Nn.y,!1,yt,0,X)}}pe&&this.addCurrentVertex(J,Ne,-St,-Qt,X)}else if(Dt==="butt")this.addCurrentVertex(J,K,0,0,X);else if(Dt==="square"){const Vt=re?1:-1;this.addCurrentVertex(J,K,Vt,Vt,X)}else Dt==="round"&&(re&&(this.addCurrentVertex(J,xe,0,0,X),this.addCurrentVertex(J,xe,1,1,X,!0)),pe&&(this.addCurrentVertex(J,Ne,-1,-1,X,!0),this.addCurrentVertex(J,Ne,0,0,X)));if(ht&&Pe<V-1){const Vt=J.dist(pe);if(Vt>2*W){const St=J.add(pe.sub(J)._mult(W/Vt)._round());this.updateDistance(J,St),this.addCurrentVertex(St,Ne,0,0,X),J=St}}}}addCurrentVertex(i,l,h,g,y,x=!1){const C=l.y*g-l.x,E=-l.y-l.x*g;this.addHalfVertex(i,l.x+l.y*h,l.y-l.x*h,x,!1,h,y),this.addHalfVertex(i,C,E,x,!0,-g,y),this.distance>Vx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,h,g,y,x))}addHalfVertex({x:i,y:l},h,g,y,x,C,E){const D=.5*(this.lineClips?this.scaledDistance*(Vx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,V,this.e2),E.primitiveLength++),x?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}let Bx,Ox;Yt("LineBucket",r_,{omit:["layers","patternFeatures"]});var Fx={get paint(){return Ox=Ox||new Nr({"line-opacity":new hn($e.paint_line["line-opacity"]),"line-color":new hn($e.paint_line["line-color"]),"line-translate":new en($e.paint_line["line-translate"]),"line-translate-anchor":new en($e.paint_line["line-translate-anchor"]),"line-width":new hn($e.paint_line["line-width"]),"line-gap-width":new hn($e.paint_line["line-gap-width"]),"line-offset":new hn($e.paint_line["line-offset"]),"line-blur":new hn($e.paint_line["line-blur"]),"line-dasharray":new Uh($e.paint_line["line-dasharray"]),"line-pattern":new Uc($e.paint_line["line-pattern"]),"line-gradient":new cu($e.paint_line["line-gradient"])})},get layout(){return Bx=Bx||new Nr({"line-cap":new en($e.layout_line["line-cap"]),"line-join":new hn($e.layout_line["line-join"]),"line-miter-limit":new en($e.layout_line["line-miter-limit"]),"line-round-limit":new en($e.layout_line["line-round-limit"]),"line-sort-key":new hn($e.layout_line["line-sort-key"])})}};class LA extends hn{possiblyEvaluate(i,l){return l=new mi(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,h,g){return l=Ct({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,h,g)}}let Tp;class zA extends gr{constructor(i){super(i,Fx),this.gradientVersion=0,Tp||(Tp=new LA(Fx.paint.properties["line-width"].specification),Tp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Fo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=Tp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new r_(i)}queryRadius(i){const l=i,h=$x(Xh("line-width",this,l),Xh("line-gap-width",this,l)),g=Xh("line-offset",this,l);return h/2+Math.abs(g)+bp(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:h,geometry:g,transform:y,pixelsToTileUnits:x}){const C=xp(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-y.bearingInRadians,x),E=x/2*$x(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),D=this.paint.get("line-offset").evaluate(l,h);return D&&(g=function(V,N){const W=[];for(let X=0;X<V.length;X++){const J=V[X],re=[];for(let pe=0;pe<J.length;pe++){const xe=J[pe-1],Ne=J[pe],Pe=J[pe+1],K=pe===0?new R(0,0):Ne.sub(xe)._unit()._perp(),fe=pe===J.length-1?new R(0,0):Pe.sub(Ne)._unit()._perp(),Ae=K._add(fe)._unit(),rt=Ae.x*fe.x+Ae.y*fe.y;rt!==0&&Ae._mult(1/rt),re.push(Ae._mult(N)._add(Ne))}W.push(re)}return W}(g,D*x)),function(V,N,W){for(let X=0;X<N.length;X++){const J=N[X];if(V.length>=3){for(let re=0;re<J.length;re++)if(Hc(V,J[re]))return!0}if(ZI(V,J,W))return!0}return!1}(C,g,E)}isTileClipped(){return!0}}function $x(u,i){return i>0?i+2*u:u}const VA=Ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),BA=Ei([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const OA=Ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jx=Ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),FA=Ei([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $A(u,i,l){return u.sections.forEach(h=>{h.text=function(g,y,x){const C=y.layout.get("text-transform").evaluate(x,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),Is.applyArabicShaping&&(g=Is.applyArabicShaping(g)),g}(h.text,i,l)}),u}Ei([{name:"triangle",components:3,type:"Uint16"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ei([{type:"Float32",name:"offsetX"}]),Ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ei([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const uf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Nx,a_,Ux,or=24,s_={};function jA(){return Nx||(Nx=1,s_.read=function(u,i,l,h,g){var y,x,C=8*g-h-1,E=(1<<C)-1,D=E>>1,V=-7,N=l?g-1:0,W=l?-1:1,X=u[i+N];for(N+=W,y=X&(1<<-V)-1,X>>=-V,V+=C;V>0;y=256*y+u[i+N],N+=W,V-=8);for(x=y&(1<<-V)-1,y>>=-V,V+=h;V>0;x=256*x+u[i+N],N+=W,V-=8);if(y===0)y=1-D;else{if(y===E)return x?NaN:1/0*(X?-1:1);x+=Math.pow(2,h),y-=D}return(X?-1:1)*x*Math.pow(2,y-h)},s_.write=function(u,i,l,h,g,y){var x,C,E,D=8*y-g-1,V=(1<<D)-1,N=V>>1,W=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=h?0:y-1,J=h?1:-1,re=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(C=isNaN(i)?1:0,x=V):(x=Math.floor(Math.log(i)/Math.LN2),i*(E=Math.pow(2,-x))<1&&(x--,E*=2),(i+=x+N>=1?W/E:W*Math.pow(2,1-N))*E>=2&&(x++,E/=2),x+N>=V?(C=0,x=V):x+N>=1?(C=(i*E-1)*Math.pow(2,g),x+=N):(C=i*Math.pow(2,N-1)*Math.pow(2,g),x=0));g>=8;u[l+X]=255&C,X+=J,C/=256,g-=8);for(x=x<<g|C,D+=g;D>0;u[l+X]=255&x,X+=J,x/=256,D-=8);u[l+X-J]|=128*re}),s_}function Gx(){if(Ux)return a_;Ux=1,a_=i;var u=jA();function i(K){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(K)?K:new Uint8Array(K||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var l=4294967296,h=1/l,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function y(K){return K.type===i.Bytes?K.readVarint()+K.pos:K.pos+1}function x(K,fe,Ae){return Ae?4294967296*fe+(K>>>0):4294967296*(fe>>>0)+(K>>>0)}function C(K,fe,Ae){var rt=fe<=16383?1:fe<=2097151?2:fe<=268435455?3:Math.floor(Math.log(fe)/(7*Math.LN2));Ae.realloc(rt);for(var Et=Ae.pos-1;Et>=K;Et--)Ae.buf[Et+rt]=Ae.buf[Et]}function E(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeVarint(K[Ae])}function D(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeSVarint(K[Ae])}function V(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeFloat(K[Ae])}function N(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeDouble(K[Ae])}function W(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeBoolean(K[Ae])}function X(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeFixed32(K[Ae])}function J(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeSFixed32(K[Ae])}function re(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeFixed64(K[Ae])}function pe(K,fe){for(var Ae=0;Ae<K.length;Ae++)fe.writeSFixed64(K[Ae])}function xe(K,fe){return(K[fe]|K[fe+1]<<8|K[fe+2]<<16)+16777216*K[fe+3]}function Ne(K,fe,Ae){K[Ae]=fe,K[Ae+1]=fe>>>8,K[Ae+2]=fe>>>16,K[Ae+3]=fe>>>24}function Pe(K,fe){return(K[fe]|K[fe+1]<<8|K[fe+2]<<16)+(K[fe+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(K,fe,Ae){for(Ae=Ae||this.length;this.pos<Ae;){var rt=this.readVarint(),Et=rt>>3,ht=this.pos;this.type=7&rt,K(Et,fe,this),this.pos===ht&&this.skip(rt)}return fe},readMessage:function(K,fe){return this.readFields(K,fe,this.readVarint()+this.pos)},readFixed32:function(){var K=xe(this.buf,this.pos);return this.pos+=4,K},readSFixed32:function(){var K=Pe(this.buf,this.pos);return this.pos+=4,K},readFixed64:function(){var K=xe(this.buf,this.pos)+xe(this.buf,this.pos+4)*l;return this.pos+=8,K},readSFixed64:function(){var K=xe(this.buf,this.pos)+Pe(this.buf,this.pos+4)*l;return this.pos+=8,K},readFloat:function(){var K=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,K},readDouble:function(){var K=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,K},readVarint:function(K){var fe,Ae,rt=this.buf;return fe=127&(Ae=rt[this.pos++]),Ae<128?fe:(fe|=(127&(Ae=rt[this.pos++]))<<7,Ae<128?fe:(fe|=(127&(Ae=rt[this.pos++]))<<14,Ae<128?fe:(fe|=(127&(Ae=rt[this.pos++]))<<21,Ae<128?fe:function(Et,ht,yt){var zt,Dt,Vt=yt.buf;if(zt=(112&(Dt=Vt[yt.pos++]))>>4,Dt<128||(zt|=(127&(Dt=Vt[yt.pos++]))<<3,Dt<128)||(zt|=(127&(Dt=Vt[yt.pos++]))<<10,Dt<128)||(zt|=(127&(Dt=Vt[yt.pos++]))<<17,Dt<128)||(zt|=(127&(Dt=Vt[yt.pos++]))<<24,Dt<128)||(zt|=(1&(Dt=Vt[yt.pos++]))<<31,Dt<128))return x(Et,zt,ht);throw new Error("Expected varint not more than 10 bytes")}(fe|=(15&(Ae=rt[this.pos]))<<28,K,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var K=this.readVarint();return K%2==1?(K+1)/-2:K/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var K=this.readVarint()+this.pos,fe=this.pos;return this.pos=K,K-fe>=12&&g?function(Ae,rt,Et){return g.decode(Ae.subarray(rt,Et))}(this.buf,fe,K):function(Ae,rt,Et){for(var ht="",yt=rt;yt<Et;){var zt,Dt,Vt,St=Ae[yt],Qt=null,cn=St>239?4:St>223?3:St>191?2:1;if(yt+cn>Et)break;cn===1?St<128&&(Qt=St):cn===2?(192&(zt=Ae[yt+1]))==128&&(Qt=(31&St)<<6|63&zt)<=127&&(Qt=null):cn===3?(Dt=Ae[yt+2],(192&(zt=Ae[yt+1]))==128&&(192&Dt)==128&&((Qt=(15&St)<<12|(63&zt)<<6|63&Dt)<=2047||Qt>=55296&&Qt<=57343)&&(Qt=null)):cn===4&&(Dt=Ae[yt+2],Vt=Ae[yt+3],(192&(zt=Ae[yt+1]))==128&&(192&Dt)==128&&(192&Vt)==128&&((Qt=(15&St)<<18|(63&zt)<<12|(63&Dt)<<6|63&Vt)<=65535||Qt>=1114112)&&(Qt=null)),Qt===null?(Qt=65533,cn=1):Qt>65535&&(Qt-=65536,ht+=String.fromCharCode(Qt>>>10&1023|55296),Qt=56320|1023&Qt),ht+=String.fromCharCode(Qt),yt+=cn}return ht}(this.buf,fe,K)},readBytes:function(){var K=this.readVarint()+this.pos,fe=this.buf.subarray(this.pos,K);return this.pos=K,fe},readPackedVarint:function(K,fe){if(this.type!==i.Bytes)return K.push(this.readVarint(fe));var Ae=y(this);for(K=K||[];this.pos<Ae;)K.push(this.readVarint(fe));return K},readPackedSVarint:function(K){if(this.type!==i.Bytes)return K.push(this.readSVarint());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readSVarint());return K},readPackedBoolean:function(K){if(this.type!==i.Bytes)return K.push(this.readBoolean());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readBoolean());return K},readPackedFloat:function(K){if(this.type!==i.Bytes)return K.push(this.readFloat());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readFloat());return K},readPackedDouble:function(K){if(this.type!==i.Bytes)return K.push(this.readDouble());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readDouble());return K},readPackedFixed32:function(K){if(this.type!==i.Bytes)return K.push(this.readFixed32());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readFixed32());return K},readPackedSFixed32:function(K){if(this.type!==i.Bytes)return K.push(this.readSFixed32());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readSFixed32());return K},readPackedFixed64:function(K){if(this.type!==i.Bytes)return K.push(this.readFixed64());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readFixed64());return K},readPackedSFixed64:function(K){if(this.type!==i.Bytes)return K.push(this.readSFixed64());var fe=y(this);for(K=K||[];this.pos<fe;)K.push(this.readSFixed64());return K},skip:function(K){var fe=7&K;if(fe===i.Varint)for(;this.buf[this.pos++]>127;);else if(fe===i.Bytes)this.pos=this.readVarint()+this.pos;else if(fe===i.Fixed32)this.pos+=4;else{if(fe!==i.Fixed64)throw new Error("Unimplemented type: "+fe);this.pos+=8}},writeTag:function(K,fe){this.writeVarint(K<<3|fe)},realloc:function(K){for(var fe=this.length||16;fe<this.pos+K;)fe*=2;if(fe!==this.length){var Ae=new Uint8Array(fe);Ae.set(this.buf),this.buf=Ae,this.length=fe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(K){this.realloc(4),Ne(this.buf,K,this.pos),this.pos+=4},writeSFixed32:function(K){this.realloc(4),Ne(this.buf,K,this.pos),this.pos+=4},writeFixed64:function(K){this.realloc(8),Ne(this.buf,-1&K,this.pos),Ne(this.buf,Math.floor(K*h),this.pos+4),this.pos+=8},writeSFixed64:function(K){this.realloc(8),Ne(this.buf,-1&K,this.pos),Ne(this.buf,Math.floor(K*h),this.pos+4),this.pos+=8},writeVarint:function(K){(K=+K||0)>268435455||K<0?function(fe,Ae){var rt,Et;if(fe>=0?(rt=fe%4294967296|0,Et=fe/4294967296|0):(Et=~(-fe/4294967296),4294967295^(rt=~(-fe%4294967296))?rt=rt+1|0:(rt=0,Et=Et+1|0)),fe>=18446744073709552e3||fe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ae.realloc(10),function(ht,yt,zt){zt.buf[zt.pos++]=127&ht|128,ht>>>=7,zt.buf[zt.pos++]=127&ht|128,ht>>>=7,zt.buf[zt.pos++]=127&ht|128,ht>>>=7,zt.buf[zt.pos++]=127&ht|128,zt.buf[zt.pos]=127&(ht>>>=7)}(rt,0,Ae),function(ht,yt){var zt=(7&ht)<<4;yt.buf[yt.pos++]|=zt|((ht>>>=3)?128:0),ht&&(yt.buf[yt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(yt.buf[yt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(yt.buf[yt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(yt.buf[yt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(yt.buf[yt.pos++]=127&ht)))))}(Et,Ae)}(K,this):(this.realloc(4),this.buf[this.pos++]=127&K|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=K>>>7&127))))},writeSVarint:function(K){this.writeVarint(K<0?2*-K-1:2*K)},writeBoolean:function(K){this.writeVarint(!!K)},writeString:function(K){K=String(K),this.realloc(4*K.length),this.pos++;var fe=this.pos;this.pos=function(rt,Et,ht){for(var yt,zt,Dt=0;Dt<Et.length;Dt++){if((yt=Et.charCodeAt(Dt))>55295&&yt<57344){if(!zt){yt>56319||Dt+1===Et.length?(rt[ht++]=239,rt[ht++]=191,rt[ht++]=189):zt=yt;continue}if(yt<56320){rt[ht++]=239,rt[ht++]=191,rt[ht++]=189,zt=yt;continue}yt=zt-55296<<10|yt-56320|65536,zt=null}else zt&&(rt[ht++]=239,rt[ht++]=191,rt[ht++]=189,zt=null);yt<128?rt[ht++]=yt:(yt<2048?rt[ht++]=yt>>6|192:(yt<65536?rt[ht++]=yt>>12|224:(rt[ht++]=yt>>18|240,rt[ht++]=yt>>12&63|128),rt[ht++]=yt>>6&63|128),rt[ht++]=63&yt|128)}return ht}(this.buf,K,this.pos);var Ae=this.pos-fe;Ae>=128&&C(fe,Ae,this),this.pos=fe-1,this.writeVarint(Ae),this.pos+=Ae},writeFloat:function(K){this.realloc(4),u.write(this.buf,K,this.pos,!0,23,4),this.pos+=4},writeDouble:function(K){this.realloc(8),u.write(this.buf,K,this.pos,!0,52,8),this.pos+=8},writeBytes:function(K){var fe=K.length;this.writeVarint(fe),this.realloc(fe);for(var Ae=0;Ae<fe;Ae++)this.buf[this.pos++]=K[Ae]},writeRawMessage:function(K,fe){this.pos++;var Ae=this.pos;K(fe,this);var rt=this.pos-Ae;rt>=128&&C(Ae,rt,this),this.pos=Ae-1,this.writeVarint(rt),this.pos+=rt},writeMessage:function(K,fe,Ae){this.writeTag(K,i.Bytes),this.writeRawMessage(fe,Ae)},writePackedVarint:function(K,fe){fe.length&&this.writeMessage(K,E,fe)},writePackedSVarint:function(K,fe){fe.length&&this.writeMessage(K,D,fe)},writePackedBoolean:function(K,fe){fe.length&&this.writeMessage(K,W,fe)},writePackedFloat:function(K,fe){fe.length&&this.writeMessage(K,V,fe)},writePackedDouble:function(K,fe){fe.length&&this.writeMessage(K,N,fe)},writePackedFixed32:function(K,fe){fe.length&&this.writeMessage(K,X,fe)},writePackedSFixed32:function(K,fe){fe.length&&this.writeMessage(K,J,fe)},writePackedFixed64:function(K,fe){fe.length&&this.writeMessage(K,re,fe)},writePackedSFixed64:function(K,fe){fe.length&&this.writeMessage(K,pe,fe)},writeBytesField:function(K,fe){this.writeTag(K,i.Bytes),this.writeBytes(fe)},writeFixed32Field:function(K,fe){this.writeTag(K,i.Fixed32),this.writeFixed32(fe)},writeSFixed32Field:function(K,fe){this.writeTag(K,i.Fixed32),this.writeSFixed32(fe)},writeFixed64Field:function(K,fe){this.writeTag(K,i.Fixed64),this.writeFixed64(fe)},writeSFixed64Field:function(K,fe){this.writeTag(K,i.Fixed64),this.writeSFixed64(fe)},writeVarintField:function(K,fe){this.writeTag(K,i.Varint),this.writeVarint(fe)},writeSVarintField:function(K,fe){this.writeTag(K,i.Varint),this.writeSVarint(fe)},writeStringField:function(K,fe){this.writeTag(K,i.Bytes),this.writeString(fe)},writeFloatField:function(K,fe){this.writeTag(K,i.Fixed32),this.writeFloat(fe)},writeDoubleField:function(K,fe){this.writeTag(K,i.Fixed64),this.writeDouble(fe)},writeBooleanField:function(K,fe){this.writeVarintField(K,!!fe)}},a_}var ol,o_=b(Gx());function NA(u,i,l){u===1&&l.readMessage(UA,i)}function UA(u,i,l){if(u===3){const{id:h,bitmap:g,width:y,height:x,left:C,top:E,advance:D}=l.readMessage(GA,{});i.push({id:h,bitmap:new Jh({width:y+6,height:x+6},g),metrics:{width:y,height:x,left:C,top:E,advance:D}})}}function GA(u,i,l){u===1?i.id=l.readVarint():u===2?i.bitmap=l.readBytes():u===3?i.width=l.readVarint():u===4?i.height=l.readVarint():u===5?i.left=l.readSVarint():u===6?i.top=l.readSVarint():u===7&&(i.advance=l.readVarint())}function qx(u){let i=0,l=0;for(const x of u)i+=x.w*x.h,l=Math.max(l,x.w);u.sort((x,C)=>C.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let g=0,y=0;for(const x of u)for(let C=h.length-1;C>=0;C--){const E=h[C];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,y=Math.max(y,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===E.w&&x.h===E.h){const D=h.pop();C<h.length&&(h[C]=D)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:g,h:y,fill:i/(g*y)||0}}class l_{constructor(i,{pixelRatio:l,version:h,stretchX:g,stretchY:y,content:x,textFitWidth:C,textFitHeight:E}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=g,this.stretchY=y,this.content=x,this.version=h,this.textFitWidth=C,this.textFitHeight=E}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Hx{constructor(i,l){const h={},g={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,h,y),this.addImages(l,g,y);const{w:x,h:C}=qx(y),E=new ca({width:x||1,height:C||1});for(const D in i){const V=i[D],N=h[D].paddedRect;ca.copy(V.data,E,{x:0,y:0},{x:N.x+1,y:N.y+1},V.data)}for(const D in l){const V=l[D],N=g[D].paddedRect,W=N.x+1,X=N.y+1,J=V.data.width,re=V.data.height;ca.copy(V.data,E,{x:0,y:0},{x:W,y:X},V.data),ca.copy(V.data,E,{x:0,y:re-1},{x:W,y:X-1},{width:J,height:1}),ca.copy(V.data,E,{x:0,y:0},{x:W,y:X+re},{width:J,height:1}),ca.copy(V.data,E,{x:J-1,y:0},{x:W-1,y:X},{width:1,height:re}),ca.copy(V.data,E,{x:0,y:0},{x:W+J,y:X},{width:1,height:re})}this.image=E,this.iconPositions=h,this.patternPositions=g}addImages(i,l,h){for(const g in i){const y=i[g],x={x:0,y:0,w:y.data.width+2,h:y.data.height+2};h.push(x),l[g]=new l_(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),l)}patchUpdatedImage(i,l,h){if(!i||!l||i.version===l.version)return;i.version=l.version;const[g,y]=i.tl;h.update(l.data,void 0,{x:g,y})}}Yt("ImagePosition",l_),Yt("ImageAtlas",Hx),d.an=void 0,(ol=d.an||(d.an={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";class cf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,l,h){const g=new cf;return g.scale=i||1,g.fontStack=l,g.verticalAlign=h||"bottom",g}static forImage(i,l){const h=new cf;return h.imageName=i,h.verticalAlign=l||"bottom",h}}class Yc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const h=new Yc;for(let g=0;g<i.sections.length;g++){const y=i.sections[g];y.image?h.addImageSection(y):h.addTextSection(y,l)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let l="";for(let h=0;h<i.length;h++){const g=i.charCodeAt(h+1)||null,y=i.charCodeAt(h-1)||null;l+=g&&$h(g)&&!uf[i[h+1]]||y&&$h(y)&&!uf[i[h-1]]||!uf[i[h]]?i[h]:uf[i[h]]}return l}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&Ip[this.text.charCodeAt(h)];h++)i++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&Ip[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const h=new Yc;return h.text=this.text.substring(i,l),h.sectionIndex=this.sectionIndex.slice(i,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}getMaxImageSize(i){let l=0,h=0;for(let g=0;g<this.length();g++){const y=this.getSection(g);if(y.imageName){const x=i[y.imageName];if(!x)continue;const C=x.displaySize;l=Math.max(l,C[0]),h=Math.max(h,C[1])}}return{maxImageWidth:l,maxImageHeight:h}}addTextSection(i,l){this.text+=i.text,this.sections.push(cf.forText(i.scale,i.fontStack||l,i.verticalAlign));const h=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(h)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void et("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(cf.forImage(l,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):et("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Pp(u,i,l,h,g,y,x,C,E,D,V,N,W,X,J){const re=Yc.fromFeature(u,g);let pe;N===d.an.vertical&&re.verticalizePunctuation();const{processBidirectionalText:xe,processStyledBidirectionalText:Ne}=Is;if(xe&&re.sections.length===1){pe=[];const fe=xe(re.toString(),u_(re,D,y,i,h,X));for(const Ae of fe){const rt=new Yc;rt.text=Ae,rt.sections=re.sections;for(let Et=0;Et<Ae.length;Et++)rt.sectionIndex.push(0);pe.push(rt)}}else if(Ne){pe=[];const fe=Ne(re.text,re.sectionIndex,u_(re,D,y,i,h,X));for(const Ae of fe){const rt=new Yc;rt.text=Ae[0],rt.sectionIndex=Ae[1],rt.sections=re.sections,pe.push(rt)}}else pe=function(fe,Ae){const rt=[],Et=fe.text;let ht=0;for(const yt of Ae)rt.push(fe.substring(ht,yt)),ht=yt;return ht<Et.length&&rt.push(fe.substring(ht,Et.length)),rt}(re,u_(re,D,y,i,h,X));const Pe=[],K={positionedLines:Pe,text:re.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(fe,Ae,rt,Et,ht,yt,zt,Dt,Vt,St,Qt,cn){let un=0,rn=0,Nn=0,Mi=0;const Ji=Dt==="right"?1:Dt==="left"?0:.5,Mr=or/cn;let Ra=0;for(const Ci of ht){Ci.trim();const lr=Ci.getMaxScale(),xr={positionedGlyphs:[],lineOffset:0};fe.positionedLines[Ra]=xr;const wr=xr.positionedGlyphs;let Jr=0;if(!Ci.length()){rn+=yt,++Ra;continue}const La=ZA(Et,Ci,Mr);for(let ha=0;ha<Ci.length();ha++){const Qi=Ci.getSection(ha),cr=Ci.getSectionIndex(ha),dr=Ci.getCharCode(ha),Hi=KA(Vt,Qt,dr);let fi;if(Qi.imageName){if(fe.iconsInText=!0,Qi.scale=Qi.scale*Mr,fi=XA(Qi,Hi,lr,La,Et),!fi)continue;Jr=Math.max(Jr,fi.imageOffset)}else if(fi=YA(Qi,dr,Hi,La,Ae,rt),!fi)continue;const{rect:us,metrics:ed,baselineOffset:cs}=fi;wr.push({glyph:dr,imageName:Qi.imageName,x:un,y:rn+cs+-17,vertical:Hi,scale:Qi.scale,fontStack:Qi.fontStack,sectionIndex:cr,metrics:ed,rect:us}),Hi?(fe.verticalizable=!0,un+=(Qi.imageName?ed.advance:or)*Qi.scale+St):un+=ed.advance*Qi.scale+St}wr.length!==0&&(Nn=Math.max(un-St,Nn),JA(wr,0,wr.length-1,Ji)),un=0,xr.lineOffset=Math.max(Jr,(lr-1)*or);const ur=yt*lr+Jr;rn+=ur,Mi=Math.max(ur,Mi),++Ra}const{horizontalAlign:da,verticalAlign:br}=c_(zt);(function(Ci,lr,xr,wr,Jr,La,ur,ha,Qi){const cr=(lr-xr)*Jr;let dr=0;dr=La!==ur?-ha*wr- -17:-wr*Qi*ur+.5*ur;for(const Hi of Ci)for(const fi of Hi.positionedGlyphs)fi.x+=cr,fi.y+=dr})(fe.positionedLines,Ji,da,br,Nn,Mi,yt,rn,ht.length),fe.top+=-br*rn,fe.bottom=fe.top+rn,fe.left+=-da*Nn,fe.right=fe.left+Nn}(K,i,l,h,pe,x,C,E,N,D,W,J),!function(fe){for(const Ae of fe)if(Ae.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&K}const Ip={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},qA={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},HA={40:!0};function Wx(u,i,l,h,g,y){if(i.imageName){const x=h[i.imageName];return x?x.displaySize[0]*i.scale*or/y+g:0}{const x=l[i.fontStack],C=x&&x[u];return C?C.metrics.advance*i.scale+g:0}}function Zx(u,i,l,h){const g=Math.pow(u-i,2);return h?u<i?g/2:2*g:g+Math.abs(l)*l}function WA(u,i,l){let h=0;return u===10&&(h-=1e4),l&&(h+=150),u!==40&&u!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function Kx(u,i,l,h,g,y){let x=null,C=Zx(i,l,g,y);for(const E of h){const D=Zx(i-E.x,l,g,y)+E.badness;D<=C&&(x=E,C=D)}return{index:u,x:i,priorBreak:x,badness:C}}function Yx(u){return u?Yx(u.priorBreak).concat(u.index):[]}function u_(u,i,l,h,g,y){if(!u)return[];const x=[],C=function(N,W,X,J,re,pe){let xe=0;for(let Ne=0;Ne<N.length();Ne++){const Pe=N.getSection(Ne);xe+=Wx(N.getCharCode(Ne),Pe,J,re,W,pe)}return xe/Math.max(1,Math.ceil(xe/X))}(u,i,l,h,g,y),E=u.text.indexOf("")>=0;let D=0;for(let N=0;N<u.length();N++){const W=u.getSection(N),X=u.getCharCode(N);if(Ip[X]||(D+=Wx(X,W,h,g,i,y)),N<u.length()-1){const J=!((V=X)<11904)&&(!!$n["CJK Compatibility Forms"](V)||!!$n["CJK Compatibility"](V)||!!$n["CJK Strokes"](V)||!!$n["CJK Symbols and Punctuation"](V)||!!$n["Enclosed CJK Letters and Months"](V)||!!$n["Halfwidth and Fullwidth Forms"](V)||!!$n["Ideographic Description Characters"](V)||!!$n["Vertical Forms"](V)||Fh.test(String.fromCodePoint(V)));(qA[X]||J||W.imageName||N!==u.length()-2&&HA[u.getCharCode(N+1)])&&x.push(Kx(N+1,D,C,x,WA(X,u.getCharCode(N+1),J&&E),!1))}}var V;return Yx(Kx(u.length(),D,C,x,0,!0))}function c_(u){let i=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function ZA(u,i,l){const h=i.getMaxScale()*or,{maxImageWidth:g,maxImageHeight:y}=i.getMaxImageSize(u),x=Math.max(h,y*l);return{verticalLineContentWidth:Math.max(h,g*l),horizontalLineContentHeight:x}}function Xx(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function KA(u,i,l){return!(u===d.an.horizontal||!i&&!$c(l)||i&&(Ip[l]||(h=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function YA(u,i,l,h,g,y){const x=y[u.fontStack],C=function(D,V,N,W){if(D&&D.rect)return D;const X=V[N.fontStack],J=X&&X[W];return J?{rect:null,metrics:J.metrics}:null}(x&&x[i],g,u,i);if(C===null)return null;let E;if(l)E=h.verticalLineContentWidth-u.scale*or;else{const D=Xx(u.verticalAlign);E=(h.horizontalLineContentHeight-u.scale*or)*D}return{rect:C.rect,metrics:C.metrics,baselineOffset:E}}function XA(u,i,l,h,g){const y=g[u.imageName];if(!y)return null;const x=y.paddedRect,C=y.displaySize,E={width:C[0],height:C[1],left:1,top:-3,advance:i?C[1]:C[0]};let D;if(i)D=h.verticalLineContentWidth-C[1]*u.scale;else{const V=Xx(u.verticalAlign);D=(h.horizontalLineContentHeight-C[1]*u.scale)*V}return{rect:x,metrics:E,baselineOffset:D,imageOffset:(i?C[0]:C[1])*u.scale-or*l}}function JA(u,i,l,h){if(h===0)return;const g=u[l],y=(u[l].x+g.metrics.advance*g.scale)*h;for(let x=i;x<=l;x++)u[x].x-=y}function QA(u,i,l){const{horizontalAlign:h,verticalAlign:g}=c_(l),y=i[0]-u.displaySize[0]*h,x=i[1]-u.displaySize[1]*g;return{image:u,top:x,bottom:x+u.displaySize[1],left:y,right:y+u.displaySize[0]}}function Jx(u){var i,l;let h=u.left,g=u.top,y=u.right-h,x=u.bottom-g;const C=(i=u.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",E=(l=u.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",D=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(E==="proportional"){if(C==="stretchOnly"&&y/x<D||C==="proportional"){const V=Math.ceil(x*D);h*=V/y,y=V}}else if(C==="proportional"&&E==="stretchOnly"&&D!==0&&y/x>D){const V=Math.ceil(y/D);g*=V/x,x=V}return{x1:h,y1:g,x2:h+y,y2:g+x}}function Qx(u,i,l,h,g,y){const x=u.image;let C;if(x.content){const pe=x.content,xe=x.pixelRatio||1;C=[pe[0]/xe,pe[1]/xe,x.displaySize[0]-pe[2]/xe,x.displaySize[1]-pe[3]/xe]}const E=i.left*y,D=i.right*y;let V,N,W,X;l==="width"||l==="both"?(X=g[0]+E-h[3],N=g[0]+D+h[1]):(X=g[0]+(E+D-x.displaySize[0])/2,N=X+x.displaySize[0]);const J=i.top*y,re=i.bottom*y;return l==="height"||l==="both"?(V=g[1]+J-h[0],W=g[1]+re+h[2]):(V=g[1]+(J+re-x.displaySize[1])/2,W=V+x.displaySize[1]),{image:x,top:V,right:N,bottom:W,left:X,collisionPadding:C}}const co=128,ll=32640;function ew(u,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new mi(u+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=l;let y=0;for(;y<h.length&&h[y]<=u;)y++;y=Math.max(0,y-1);let x=y;for(;x<h.length&&h[x]<u+1;)x++;x=Math.min(h.length-1,x);const C=h[y],E=h[x];return l.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:E,minSize:l.evaluate(new mi(C)),maxSize:l.evaluate(new mi(E)),interpolationType:g}}}function d_(u,i,l){let h="never";const g=u.get(i);return g?h=g:u.get(l)&&(h="always"),h}const eE=sf.VectorTileFeature.types,tE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ap(u,i,l,h,g,y,x,C,E,D,V,N,W){const X=C?Math.min(ll,Math.round(C[0])):0,J=C?Math.min(ll,Math.round(C[1])):0;u.emplaceBack(i,l,Math.round(32*h),Math.round(32*g),y,x,(X<<1)+(E?1:0),J,16*D,16*V,256*N,256*W)}function h_(u,i,l){u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l)}function nE(u){for(const i of u.sections)if(jh(i.text))return!0;return!1}class f_{constructor(i){this.layoutVertexArray=new Tn,this.indexArray=new ai,this.programConfigurations=i,this.segments=new qn,this.dynamicLayoutVertexArray=new Yn,this.opacityVertexArray=new Si,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,VA.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,BA.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,tE,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Yt("SymbolBuffers",f_);class m_{constructor(i,l,h){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new h,this.segments=new qn,this.collisionVertexArray=new ki}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,OA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Yt("CollisionBuffers",m_);class Xc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ew(this.zoom,l["text-size"]),this.iconSizeData=ew(this.zoom,l["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=d_(h,"text-overlap","text-allow-overlap")!=="never"||d_(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.an[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID}createArrays(){this.text=new f_(new zs(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new f_(new zs(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Ce,this.lineVertexArray=new Re,this.symbolInstances=new Ie,this.textAnchorOffsets=new Te}calculateGlyphDependencies(i,l,h,g,y){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,(h||g)&&y){const C=uf[i.charAt(x)];C&&(l[C.charCodeAt(0)]=!0)}}populate(i,l,h){const g=this.layers[0],y=g.layout,x=y.get("text-font"),C=y.get("text-field"),E=y.get("icon-image"),D=(C.value.kind!=="constant"||C.value.value instanceof Ir&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),V=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,N=y.get("symbol-sort-key");if(this.features=[],!D&&!V)return;const W=l.iconDependencies,X=l.glyphDependencies,J=l.availableImages,re=new mi(this.zoom,{globalState:this.globalState});for(const{feature:pe,id:xe,index:Ne,sourceLayerIndex:Pe}of i){const K=g._featureFilter.needGeometry,fe=vu(pe,K);if(!g._featureFilter.filter(re,fe,h))continue;let Ae,rt;if(K||(fe.geometry=gu(pe)),D){const ht=g.getValueAndResolveTokens("text-field",fe,h,J),yt=Ir.factory(ht),zt=this.hasRTLText=this.hasRTLText||nE(yt);(!zt||Is.getRTLTextPluginStatus()==="unavailable"||zt&&Is.isParsed())&&(Ae=$A(yt,g,fe))}if(V){const ht=g.getValueAndResolveTokens("icon-image",fe,h,J);rt=ht instanceof Zr?ht:Zr.fromString(ht)}if(!Ae&&!rt)continue;const Et=this.sortFeaturesByKey?N.evaluate(fe,{},h):void 0;if(this.features.push({id:xe,text:Ae,icon:rt,index:Ne,sourceLayerIndex:Pe,geometry:fe.geometry,properties:pe.properties,type:eE[pe.type],sortKey:Et}),rt&&(W[rt.name]=!0),Ae){const ht=x.evaluate(fe,{},h).join(","),yt=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.an.vertical)>=0;for(const zt of Ae.sections)if(zt.image)W[zt.image.name]=!0;else{const Dt=Oh(Ae.toString()),Vt=zt.fontStack||ht,St=X[Vt]=X[Vt]||{};this.calculateGlyphDependencies(zt.text,St,yt,this.allowVerticalPlacement,Dt)}}}y.get("symbol-placement")==="line"&&(this.features=function(pe){const xe={},Ne={},Pe=[];let K=0;function fe(ht){Pe.push(pe[ht]),K++}function Ae(ht,yt,zt){const Dt=Ne[ht];return delete Ne[ht],Ne[yt]=Dt,Pe[Dt].geometry[0].pop(),Pe[Dt].geometry[0]=Pe[Dt].geometry[0].concat(zt[0]),Dt}function rt(ht,yt,zt){const Dt=xe[yt];return delete xe[yt],xe[ht]=Dt,Pe[Dt].geometry[0].shift(),Pe[Dt].geometry[0]=zt[0].concat(Pe[Dt].geometry[0]),Dt}function Et(ht,yt,zt){const Dt=zt?yt[0][yt[0].length-1]:yt[0][0];return`${ht}:${Dt.x}:${Dt.y}`}for(let ht=0;ht<pe.length;ht++){const yt=pe[ht],zt=yt.geometry,Dt=yt.text?yt.text.toString():null;if(!Dt){fe(ht);continue}const Vt=Et(Dt,zt),St=Et(Dt,zt,!0);if(Vt in Ne&&St in xe&&Ne[Vt]!==xe[St]){const Qt=rt(Vt,St,zt),cn=Ae(Vt,St,Pe[Qt].geometry);delete xe[Vt],delete Ne[St],Ne[Et(Dt,Pe[cn].geometry,!0)]=cn,Pe[Qt].geometry=null}else Vt in Ne?Ae(Vt,St,zt):St in xe?rt(Vt,St,zt):(fe(ht),xe[Vt]=K-1,Ne[St]=K-1)}return Pe.filter(ht=>ht.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,xe)=>pe.sortKey-xe.sortKey)}update(i,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const h=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(l[i.segment+1]),y=i.dist(l[i.segment]);const x={};for(let C=i.segment+1;C<l.length;C++)x[C]={x:l[C].x,y:l[C].y,tileUnitDistanceFromAnchor:g},C<l.length-1&&(g+=l[C+1].dist(l[C]));for(let C=i.segment||0;C>=0;C--)x[C]={x:l[C].x,y:l[C].y,tileUnitDistanceFromAnchor:y},C>0&&(y+=l[C-1].dist(l[C]));for(let C=0;C<l.length;C++){const E=x[C];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,l,h,g,y,x,C,E,D,V,N,W){const X=i.indexArray,J=i.layoutVertexArray,re=i.segments.prepareSegment(4*l.length,J,X,this.canOverlap?x.sortKey:void 0),pe=this.glyphOffsetArray.length,xe=re.vertexLength,Ne=this.allowVerticalPlacement&&C===d.an.vertical?Math.PI/2:0,Pe=x.text&&x.text.sections;for(let K=0;K<l.length;K++){const{tl:fe,tr:Ae,bl:rt,br:Et,tex:ht,pixelOffsetTL:yt,pixelOffsetBR:zt,minFontScaleX:Dt,minFontScaleY:Vt,glyphOffset:St,isSDF:Qt,sectionIndex:cn}=l[K],un=re.vertexLength,rn=St[1];Ap(J,E.x,E.y,fe.x,rn+fe.y,ht.x,ht.y,h,Qt,yt.x,yt.y,Dt,Vt),Ap(J,E.x,E.y,Ae.x,rn+Ae.y,ht.x+ht.w,ht.y,h,Qt,zt.x,yt.y,Dt,Vt),Ap(J,E.x,E.y,rt.x,rn+rt.y,ht.x,ht.y+ht.h,h,Qt,yt.x,zt.y,Dt,Vt),Ap(J,E.x,E.y,Et.x,rn+Et.y,ht.x+ht.w,ht.y+ht.h,h,Qt,zt.x,zt.y,Dt,Vt),h_(i.dynamicLayoutVertexArray,E,Ne),X.emplaceBack(un,un+2,un+1),X.emplaceBack(un+1,un+2,un+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(St[0]),K!==l.length-1&&cn===l[K+1].sectionIndex||i.programConfigurations.populatePaintArrays(J.length,x,x.index,{},W,Pe&&Pe[cn])}i.placedSymbolArray.emplaceBack(E.x,E.y,pe,this.glyphOffsetArray.length-pe,xe,D,V,E.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],C,0,!1,0,N)}_addCollisionDebugVertex(i,l,h,g,y,x){return l.emplaceBack(0,0),i.emplaceBack(h.x,h.y,g,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(i,l,h,g,y,x,C){const E=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),D=E.vertexLength,V=y.layoutVertexArray,N=y.collisionVertexArray,W=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(V,N,x,W,X,new R(i,l)),this._addCollisionDebugVertex(V,N,x,W,X,new R(h,l)),this._addCollisionDebugVertex(V,N,x,W,X,new R(h,g)),this._addCollisionDebugVertex(V,N,x,W,X,new R(i,g)),E.vertexLength+=4;const J=y.indexArray;J.emplaceBack(D,D+1),J.emplaceBack(D+1,D+2),J.emplaceBack(D+2,D+3),J.emplaceBack(D+3,D),E.primitiveLength+=4}addDebugCollisionBoxes(i,l,h,g){for(let y=i;y<l;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new m_(ni,jx.members,ii),this.iconCollisionBox=new m_(ni,jx.members,ii);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,h,g,y,x,C,E,D){const V={};for(let N=l;N<h;N++){const W=i.get(N);V.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},V.textFeatureIndex=W.featureIndex;break}for(let N=g;N<y;N++){const W=i.get(N);V.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},V.verticalTextFeatureIndex=W.featureIndex;break}for(let N=x;N<C;N++){const W=i.get(N);V.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},V.iconFeatureIndex=W.featureIndex;break}for(let N=E;N<D;N++){const W=i.get(N);V.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},V.verticalIconFeatureIndex=W.featureIndex;break}return V}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const h=i.placedSymbolArray.get(l),g=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<g;y+=4)i.indexArray.emplaceBack(y,y+2,y+1),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),h=Math.cos(i),g=[],y=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const E=this.symbolInstances.get(C);g.push(0|Math.round(l*E.anchorX+h*E.anchorY)),y.push(E.featureIndex)}return x.sort((C,E)=>g[C]-g[E]||y[E]-y[C]),x}addToSortKeyRanges(i,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,y,x)=>{g>=0&&x.indexOf(g)===y&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tw,nw;Yt("SymbolBucket",Xc,{omit:["layers","collisionBoxArray","features","compareText"]}),Xc.MAX_GLYPHS=65535,Xc.addDynamicAttributes=h_;var p_={get paint(){return nw=nw||new Nr({"icon-opacity":new hn($e.paint_symbol["icon-opacity"]),"icon-color":new hn($e.paint_symbol["icon-color"]),"icon-halo-color":new hn($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new hn($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hn($e.paint_symbol["icon-halo-blur"]),"icon-translate":new en($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new en($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new hn($e.paint_symbol["text-opacity"]),"text-color":new hn($e.paint_symbol["text-color"],{runtimeType:oa,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new hn($e.paint_symbol["text-halo-color"]),"text-halo-width":new hn($e.paint_symbol["text-halo-width"]),"text-halo-blur":new hn($e.paint_symbol["text-halo-blur"]),"text-translate":new en($e.paint_symbol["text-translate"]),"text-translate-anchor":new en($e.paint_symbol["text-translate-anchor"])})},get layout(){return tw=tw||new Nr({"symbol-placement":new en($e.layout_symbol["symbol-placement"]),"symbol-spacing":new en($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new en($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hn($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new en($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new en($e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new en($e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new en($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new en($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new en($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new hn($e.layout_symbol["icon-size"]),"icon-text-fit":new en($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new en($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new hn($e.layout_symbol["icon-image"]),"icon-rotate":new hn($e.layout_symbol["icon-rotate"]),"icon-padding":new hn($e.layout_symbol["icon-padding"]),"icon-keep-upright":new en($e.layout_symbol["icon-keep-upright"]),"icon-offset":new hn($e.layout_symbol["icon-offset"]),"icon-anchor":new hn($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new en($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new en($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new en($e.layout_symbol["text-rotation-alignment"]),"text-field":new hn($e.layout_symbol["text-field"]),"text-font":new hn($e.layout_symbol["text-font"]),"text-size":new hn($e.layout_symbol["text-size"]),"text-max-width":new hn($e.layout_symbol["text-max-width"]),"text-line-height":new en($e.layout_symbol["text-line-height"]),"text-letter-spacing":new hn($e.layout_symbol["text-letter-spacing"]),"text-justify":new hn($e.layout_symbol["text-justify"]),"text-radial-offset":new hn($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new en($e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new hn($e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new hn($e.layout_symbol["text-anchor"]),"text-max-angle":new en($e.layout_symbol["text-max-angle"]),"text-writing-mode":new en($e.layout_symbol["text-writing-mode"]),"text-rotate":new hn($e.layout_symbol["text-rotate"]),"text-padding":new en($e.layout_symbol["text-padding"]),"text-keep-upright":new en($e.layout_symbol["text-keep-upright"]),"text-transform":new hn($e.layout_symbol["text-transform"]),"text-offset":new hn($e.layout_symbol["text-offset"]),"text-allow-overlap":new en($e.layout_symbol["text-allow-overlap"]),"text-overlap":new en($e.layout_symbol["text-overlap"]),"text-ignore-placement":new en($e.layout_symbol["text-ignore-placement"]),"text-optional":new en($e.layout_symbol["text-optional"])})}};class iw{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ys,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Yt("FormatSectionOverride",iw,{omit:["defaultValue"]});class Ep extends gr{constructor(i){super(i,p_)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const y of h)g.indexOf(y)<0&&g.push(y);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,h,g){const y=this.layout.get(i).evaluate(l,{},h,g),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Ic(x.value)||!y?y:function(C,E){return E.replace(/{([^{}]+)}/g,(D,V)=>C&&V in C?String(C[V]):"")}(l.properties,y)}createBucket(i){return new Xc(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of p_.paint.overridableProperties){if(!Ep.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),h=new iw(l),g=new Pc(h,l.property.specification);let y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new Ql("source",g):new Ec("composite",g,l.value.zoomStops),this.paint._values[i]=new Za(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Ep.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const h=i.get("text-field"),g=p_.paint.properties[l];let y=!1;const x=C=>{for(const E of C)if(g.overrides&&g.overrides.hasOverride(E))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Ir)x(h.value.value.sections);else if(h.value.kind==="source"){const C=D=>{y||(D instanceof Fr&&pn(D.value)===Xs?x(D.value.sections):D instanceof Hl?x(D.sections):D.eachChild(C))},E=h.value;E._styleExpression&&C(E._styleExpression.expression)}return y}}let rw;var iE={get paint(){return rw=rw||new Nr({"background-color":new en($e.paint_background["background-color"]),"background-pattern":new Uh($e.paint_background["background-pattern"]),"background-opacity":new en($e.paint_background["background-opacity"])})}};class rE extends gr{constructor(i){super(i,iE)}}let aw;var aE={get paint(){return aw=aw||new Nr({"raster-opacity":new en($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new en($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new en($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new en($e.paint_raster["raster-brightness-max"]),"raster-saturation":new en($e.paint_raster["raster-saturation"]),"raster-contrast":new en($e.paint_raster["raster-contrast"]),"raster-resampling":new en($e.paint_raster["raster-resampling"]),"raster-fade-duration":new en($e.paint_raster["raster-fade-duration"])})}};class sE extends gr{constructor(i){super(i,aE)}}class oE extends gr{constructor(i){super(i,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class lE{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const uE={once:!0},g_=63710088e-1;class ul{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ul(Je(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,h=this.lat*l,g=i.lat*l,y=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((i.lng-this.lng)*l);return g_*Math.acos(Math.min(y,1))}static convert(i){if(i instanceof ul)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new ul(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new ul(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const sw=2*Math.PI*g_;function ow(u){return sw*Math.cos(u*Math.PI/180)}function lw(u){return(180+u)/360}function uw(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function cw(u,i){return u/ow(i)}function v_(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function dw(u,i){return u*ow(v_(i))}class df{constructor(i,l,h=0){this.x=+i,this.y=+l,this.z=+h}static fromLngLat(i,l=0){const h=ul.convert(i);return new df(lw(h.lng),uw(h.lat),cw(l,h.lat))}toLngLat(){return new ul(360*this.x-180,v_(this.y))}toAltitude(){return dw(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/sw*(i=v_(this.y),1/Math.cos(i*Math.PI/180));var i}}function hw(u,i,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[u*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class __{constructor(i,l,h){if(!function(g,y,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||y<0||y>=Math.pow(2,g))}(i,l,h))throw new Error(`x=${l}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=h,this.key=Jc(0,i,i,l,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,h){const g=(x=this.y,C=this.z,E=hw(256*(y=this.x),256*(x=Math.pow(2,C)-x-1),C),D=hw(256*(y+1),256*(x+1),C),E[0]+","+E[1]+","+D[0]+","+D[1]);var y,x,C,E,D;const V=function(N,W,X){let J,re="";for(let pe=N;pe>0;pe--)J=1<<pe-1,re+=(W&J?1:0)+(X&J?2:0);return re}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new R((i.x*l-this.x)*Ee,(i.y*l-this.y)*Ee)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fw{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Jc(i,l.z,l.z,l.x,l.y)}}class Da{constructor(i,l,h,g,y){if(this.terrainRttPosMatrix32f=null,i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=l,this.canonical=new __(h,+g,+y),this.key=Jc(l,i,h,g,y)}clone(){return new Da(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new Da(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Da(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-i;return i>this.canonical.z?Jc(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):Jc(this.wrap*+l,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Da(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Da(l,this.wrap,l,h,g),new Da(l,this.wrap,l,h+1,g),new Da(l,this.wrap,l,h,g+1),new Da(l,this.wrap,l,h+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Da(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Da(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new df(i.x-this.wrap,i.y))}}function Jc(u,i,l,h,g){(u*=2)<0&&(u=-1*u-1);const y=1<<l;return(y*y*u+y*g+h).toString(36)+l.toString(36)+i.toString(36)}Yt("CanonicalTileID",__),Yt("OverscaledTileID",Da,{omit:["terrainRttPosMatrix32f"]});class bu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const l=new bu;return l.extend(i(new R(this.minX,this.minY))),l.extend(i(new R(this.maxX,this.minY))),l.extend(i(new R(this.minX,this.maxY))),l.extend(i(new R(this.maxX,this.maxY))),l}static fromPoints(i){const l=new bu;for(const h of i)l.extend(h);return l}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class mw{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const h=i[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class pw{constructor(i,l,h,g,y){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=h,i._y=g,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class gw{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new il(Ee,16,0),this.grid3D=new il(Ee,16,0),this.featureIndexArray=new st,this.promoteId=l}insert(i,l,h,g,y,x){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,y);const E=x?this.grid3D:this.grid;for(let D=0;D<l.length;D++){const V=l[D],N=[1/0,1/0,-1/0,-1/0];for(let W=0;W<V.length;W++){const X=V[W];N[0]=Math.min(N[0],X.x),N[1]=Math.min(N[1],X.y),N[2]=Math.max(N[2],X.x),N[3]=Math.max(N[3],X.y)}N[0]<Ee&&N[1]<Ee&&N[2]>=0&&N[3]>=0&&E.insert(C,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new sf.VectorTile(new o_(this.rawTileData)).layers,this.sourceLayerCoder=new mw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,l,h,g){this.loadVTLayers();const y=i.params,x=Ee/i.tileSize/i.scale,C=Ts(y.filter),E=i.queryGeometry,D=i.queryPadding*x,V=bu.fromPoints(E),N=this.grid.query(V.minX-D,V.minY-D,V.maxX+D,V.maxY+D),W=bu.fromPoints(i.cameraQueryGeometry).expandBy(D),X=this.grid3D.query(W.minX,W.minY,W.maxX,W.maxY,(pe,xe,Ne,Pe)=>function(K,fe,Ae,rt,Et){for(const yt of K)if(fe<=yt.x&&Ae<=yt.y&&rt>=yt.x&&Et>=yt.y)return!0;const ht=[new R(fe,Ae),new R(fe,Et),new R(rt,Et),new R(rt,Ae)];if(K.length>2){for(const yt of ht)if(Hc(K,yt))return!0}for(let yt=0;yt<K.length-1;yt++)if(YI(K[yt],K[yt+1],ht))return!0;return!1}(i.cameraQueryGeometry,pe-D,xe-D,Ne+D,Pe+D));for(const pe of X)N.push(pe);N.sort(cE);const J={};let re;for(let pe=0;pe<N.length;pe++){const xe=N[pe];if(xe===re)continue;re=xe;const Ne=this.featureIndexArray.get(xe);let Pe=null;this.loadMatchingFeature(J,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,C,y.layers,y.availableImages,l,h,g,(K,fe,Ae)=>(Pe||(Pe=gu(K)),fe.queryIntersectsFeature({queryGeometry:E,feature:K,featureState:Ae,geometry:Pe,zoom:this.z,transform:i.transform,pixelsToTileUnits:x,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return J}loadMatchingFeature(i,l,h,g,y,x,C,E,D,V,N){const W=this.bucketLayerIDs[l];if(x&&!W.some(pe=>x.has(pe)))return;const X=this.sourceLayerCoder.decode(h),J=this.vtLayers[X].feature(g);if(y.needGeometry){const pe=vu(J,!0);if(!y.filter(new mi(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!y.filter(new mi(this.tileID.overscaledZ),J))return;const re=this.getId(J,X);for(let pe=0;pe<W.length;pe++){const xe=W[pe];if(x&&!x.has(xe))continue;const Ne=E[xe];if(!Ne)continue;let Pe={};re&&V&&(Pe=V.getState(Ne.sourceLayer||"_geojsonTileLayer",re));const K=Ct({},D[xe]);K.paint=vw(K.paint,Ne.paint,J,Pe,C),K.layout=vw(K.layout,Ne.layout,J,Pe,C);const fe=!N||N(J,Ne,Pe);if(!fe)continue;const Ae=new pw(J,this.z,this.x,this.y,re);Ae.layer=K;let rt=i[xe];rt===void 0&&(rt=i[xe]=[]),rt.push({featureIndex:g,feature:Ae,intersectionZ:fe})}}lookupSymbolFeatures(i,l,h,g,y,x,C,E){const D={};this.loadVTLayers();const V=Ts(y);for(const N of i)this.loadMatchingFeature(D,h,g,N,V,x,C,E,l);return D}hasLayer(i){for(const l of this.bucketLayerIDs)for(const h of l)if(i===h)return!0;return!1}getId(i,l){var h;let g=i.id;return this.promoteId&&(g=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((h=i.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(g=Number(i.properties.cluster_id))),g}}function vw(u,i,l,h,g){return de(u,(y,x)=>{const C=i instanceof Nc?i.get(x):null;return C&&C.evaluate?C.evaluate(l,h,g):C})}function cE(u,i){return i-u}function _w(u,i,l,h,g){const y=[];for(let x=0;x<u.length;x++){const C=u[x];let E;for(let D=0;D<C.length-1;D++){let V=C[D],N=C[D+1];V.x<i&&N.x<i||(V.x<i?V=new R(i,V.y+(i-V.x)/(N.x-V.x)*(N.y-V.y))._round():N.x<i&&(N=new R(i,V.y+(i-V.x)/(N.x-V.x)*(N.y-V.y))._round()),V.y<l&&N.y<l||(V.y<l?V=new R(V.x+(l-V.y)/(N.y-V.y)*(N.x-V.x),l)._round():N.y<l&&(N=new R(V.x+(l-V.y)/(N.y-V.y)*(N.x-V.x),l)._round()),V.x>=h&&N.x>=h||(V.x>=h?V=new R(h,V.y+(h-V.x)/(N.x-V.x)*(N.y-V.y))._round():N.x>=h&&(N=new R(h,V.y+(h-V.x)/(N.x-V.x)*(N.y-V.y))._round()),V.y>=g&&N.y>=g||(V.y>=g?V=new R(V.x+(g-V.y)/(N.y-V.y)*(N.x-V.x),g)._round():N.y>=g&&(N=new R(V.x+(g-V.y)/(N.y-V.y)*(N.x-V.x),g)._round()),E&&V.equals(E[E.length-1])||(E=[V],y.push(E)),E.push(N)))))}}return y}Yt("FeatureIndex",gw,{omit:["rawTileData","sourceLayerCoder"]});class cl extends R{constructor(i,l,h,g){super(i,l),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new cl(this.x,this.y,this.angle,this.segment)}}function yw(u,i,l,h,g){if(i.segment===void 0||l===0)return!0;let y=i,x=i.segment+1,C=0;for(;C>-l/2;){if(x--,x<0)return!1;C-=u[x].dist(y),y=u[x]}C+=u[x].dist(u[x+1]),x++;const E=[];let D=0;for(;C<l/2;){const V=u[x],N=u[x+1];if(!N)return!1;let W=u[x-1].angleTo(V)-V.angleTo(N);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:C,angleDelta:W}),D+=W;C-E[0].distance>h;)D-=E.shift().angleDelta;if(D>g)return!1;x++,C+=V.dist(N)}return!0}function bw(u){let i=0;for(let l=0;l<u.length-1;l++)i+=u[l].dist(u[l+1]);return i}function xw(u,i,l){return u?.6*i*l:0}function ww(u,i){return Math.max(u?u.right-u.left:0,i?i.right-i.left:0)}function dE(u,i,l,h,g,y){const x=xw(l,g,y),C=ww(l,h)*y;let E=0;const D=bw(u)/2;for(let V=0;V<u.length-1;V++){const N=u[V],W=u[V+1],X=N.dist(W);if(E+X>D){const J=(D-E)/X,re=ua.number(N.x,W.x,J),pe=ua.number(N.y,W.y,J),xe=new cl(re,pe,W.angleTo(N),V);return xe._round(),!x||yw(u,xe,C,x,i)?xe:void 0}E+=X}}function hE(u,i,l,h,g,y,x,C,E){const D=xw(h,y,x),V=ww(h,g),N=V*x,W=u[0].x===0||u[0].x===E||u[0].y===0||u[0].y===E;return i-N<i/4&&(i=N+i/4),Sw(u,W?i/2*C%i:(V/2+2*y)*x*C%i,i,D,l,N,W,!1,E)}function Sw(u,i,l,h,g,y,x,C,E){const D=y/2,V=bw(u);let N=0,W=i-l,X=[];for(let J=0;J<u.length-1;J++){const re=u[J],pe=u[J+1],xe=re.dist(pe),Ne=pe.angleTo(re);for(;W+l<N+xe;){W+=l;const Pe=(W-N)/xe,K=ua.number(re.x,pe.x,Pe),fe=ua.number(re.y,pe.y,Pe);if(K>=0&&K<E&&fe>=0&&fe<E&&W-D>=0&&W+D<=V){const Ae=new cl(K,fe,Ne,J);Ae._round(),h&&!yw(u,Ae,y,h,g)||X.push(Ae)}}N+=xe}return C||X.length||x||(X=Sw(u,N/2,l,h,g,y,x,!0,E)),X}function kw(u,i,l,h){const g=[],y=u.image,x=y.pixelRatio,C=y.paddedRect.w-2,E=y.paddedRect.h-2;let D={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const V=y.stretchX||[[0,C]],N=y.stretchY||[[0,E]],W=(St,Qt)=>St+Qt[1]-Qt[0],X=V.reduce(W,0),J=N.reduce(W,0),re=C-X,pe=E-J;let xe=0,Ne=X,Pe=0,K=J,fe=0,Ae=re,rt=0,Et=pe;if(y.content&&h){const St=y.content,Qt=St[2]-St[0],cn=St[3]-St[1];(y.textFitWidth||y.textFitHeight)&&(D=Jx(u)),xe=Mp(V,0,St[0]),Pe=Mp(N,0,St[1]),Ne=Mp(V,St[0],St[2]),K=Mp(N,St[1],St[3]),fe=St[0]-xe,rt=St[1]-Pe,Ae=Qt-Ne,Et=cn-K}const ht=D.x1,yt=D.y1,zt=D.x2-ht,Dt=D.y2-yt,Vt=(St,Qt,cn,un)=>{const rn=Dp(St.stretch-xe,Ne,zt,ht),Nn=Rp(St.fixed-fe,Ae,St.stretch,X),Mi=Dp(Qt.stretch-Pe,K,Dt,yt),Ji=Rp(Qt.fixed-rt,Et,Qt.stretch,J),Mr=Dp(cn.stretch-xe,Ne,zt,ht),Ra=Rp(cn.fixed-fe,Ae,cn.stretch,X),da=Dp(un.stretch-Pe,K,Dt,yt),br=Rp(un.fixed-rt,Et,un.stretch,J),Ci=new R(rn,Mi),lr=new R(Mr,Mi),xr=new R(Mr,da),wr=new R(rn,da),Jr=new R(Nn/x,Ji/x),La=new R(Ra/x,br/x),ur=i*Math.PI/180;if(ur){const cr=Math.sin(ur),dr=Math.cos(ur),Hi=[dr,-cr,cr,dr];Ci._matMult(Hi),lr._matMult(Hi),wr._matMult(Hi),xr._matMult(Hi)}const ha=St.stretch+St.fixed,Qi=Qt.stretch+Qt.fixed;return{tl:Ci,tr:lr,bl:wr,br:xr,tex:{x:y.paddedRect.x+1+ha,y:y.paddedRect.y+1+Qi,w:cn.stretch+cn.fixed-ha,h:un.stretch+un.fixed-Qi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jr,pixelOffsetBR:La,minFontScaleX:Ae/x/zt,minFontScaleY:Et/x/Dt,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){const St=Cw(V,re,X),Qt=Cw(N,pe,J);for(let cn=0;cn<St.length-1;cn++){const un=St[cn],rn=St[cn+1];for(let Nn=0;Nn<Qt.length-1;Nn++)g.push(Vt(un,Qt[Nn],rn,Qt[Nn+1]))}}else g.push(Vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:E+1}));return g}function Mp(u,i,l){let h=0;for(const g of u)h+=Math.max(i,Math.min(l,g[1]))-Math.max(i,Math.min(l,g[0]));return h}function Cw(u,i,l){const h=[{fixed:-1,stretch:0}];for(const[g,y]of u){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(y-g)})}return h.push({fixed:i+1,stretch:l}),h}function Dp(u,i,l,h){return u/i*l+h}function Rp(u,i,l,h){return u-i*l/h}Yt("Anchor",cl);class Lp{constructor(i,l,h,g,y,x,C,E,D,V){var N;if(this.boxStartIndex=i.length,D){let W=x.top,X=x.bottom;const J=x.collisionPadding;J&&(W-=J[1],X+=J[3]);let re=X-W;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{const W=!((N=x.image)===null||N===void 0)&&N.content&&(x.image.textFitWidth||x.image.textFitHeight)?Jx(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};W.y1=W.y1*C-E[0],W.y2=W.y2*C+E[2],W.x1=W.x1*C-E[3],W.x2=W.x2*C+E[1];const X=x.collisionPadding;if(X&&(W.x1-=X[0]*C,W.y1-=X[1]*C,W.x2+=X[2]*C,W.y2+=X[3]*C),V){const J=new R(W.x1,W.y1),re=new R(W.x2,W.y1),pe=new R(W.x1,W.y2),xe=new R(W.x2,W.y2),Ne=V*Math.PI/180;J._rotate(Ne),re._rotate(Ne),pe._rotate(Ne),xe._rotate(Ne),W.x1=Math.min(J.x,re.x,pe.x,xe.x),W.x2=Math.max(J.x,re.x,pe.x,xe.x),W.y1=Math.min(J.y,re.y,pe.y,xe.y),W.y2=Math.max(J.y,re.y,pe.y,xe.y)}i.emplaceBack(l.x,l.y,W.x1,W.y1,W.x2,W.y2,h,g,y)}this.boxEndIndex=i.length}}class fE{constructor(i=[],l=(h,g)=>h<g?-1:h>g?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:h}=this,g=l[i];for(;i>0;){const y=i-1>>1,x=l[y];if(h(g,x)>=0)break;l[i]=x,i=y}l[i]=g}_down(i){const{data:l,compare:h}=this,g=this.length>>1,y=l[i];for(;i<g;){let x=1+(i<<1);const C=x+1;if(C<this.length&&h(l[C],l[x])<0&&(x=C),h(l[x],y)>=0)break;l[i]=l[x],i=x}l[i]=y}}function mE(u,i=1,l=!1){const h=bu.fromPoints(u[0]),g=Math.min(h.width(),h.height());let y=g/2;const x=new fE([],pE),{minX:C,minY:E,maxX:D,maxY:V}=h;if(g===0)return new R(C,E);for(let X=C;X<D;X+=g)for(let J=E;J<V;J+=g)x.push(new Qc(X+y,J+y,y,u));let N=function(X){let J=0,re=0,pe=0;const xe=X[0];for(let Ne=0,Pe=xe.length,K=Pe-1;Ne<Pe;K=Ne++){const fe=xe[Ne],Ae=xe[K],rt=fe.x*Ae.y-Ae.x*fe.y;re+=(fe.x+Ae.x)*rt,pe+=(fe.y+Ae.y)*rt,J+=3*rt}return new Qc(re/J,pe/J,0,X)}(u),W=x.length;for(;x.length;){const X=x.pop();(X.d>N.d||!N.d)&&(N=X,l&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,W)),X.max-N.d<=i||(y=X.h/2,x.push(new Qc(X.p.x-y,X.p.y-y,y,u)),x.push(new Qc(X.p.x+y,X.p.y-y,y,u)),x.push(new Qc(X.p.x-y,X.p.y+y,y,u)),x.push(new Qc(X.p.x+y,X.p.y+y,y,u)),W+=4)}return l&&(console.log(`num probes: ${W}`),console.log(`best distance: ${N.d}`)),N.p}function pE(u,i){return i.max-u.max}function Qc(u,i,l,h){this.p=new R(u,i),this.h=l,this.d=function(g,y){let x=!1,C=1/0;for(let E=0;E<y.length;E++){const D=y[E];for(let V=0,N=D.length,W=N-1;V<N;W=V++){const X=D[V],J=D[W];X.y>g.y!=J.y>g.y&&g.x<(J.x-X.x)*(g.y-X.y)/(J.y-X.y)+X.x&&(x=!x),C=Math.min(C,rx(g,X,J))}}return(x?1:-1)*Math.sqrt(C)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Er;d.aD=void 0,(Er=d.aD||(d.aD={}))[Er.center=1]="center",Er[Er.left=2]="left",Er[Er.right=3]="right",Er[Er.top=4]="top",Er[Er.bottom=5]="bottom",Er[Er["top-left"]=6]="top-left",Er[Er["top-right"]=7]="top-right",Er[Er["bottom-left"]=8]="bottom-left",Er[Er["bottom-right"]=9]="bottom-right";const y_=Number.POSITIVE_INFINITY;function Tw(u,i){return i[1]!==y_?function(l,h,g){let y=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),l){case"top-right":case"top-left":case"top":x=g-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-g}switch(l){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,x]}(u,i[0],i[1]):function(l,h){let g=0,y=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(l){case"top-right":case"top-left":y=x-7;break;case"bottom-right":case"bottom-left":y=7-x;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(l){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,y]}(u,i[0])}function Pw(u,i,l){var h;const g=u.layout,y=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},l);if(y){const C=y.values,E=[];for(let D=0;D<C.length;D+=2){const V=E[D]=C[D],N=C[D+1].map(W=>W*or);V.startsWith("top")?N[1]-=7:V.startsWith("bottom")&&(N[1]+=7),E[D+1]=N}return new Gn(E)}const x=g.get("text-variable-anchor");if(x){let C;C=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(i,{},l)*or,y_]:g.get("text-offset").evaluate(i,{},l).map(D=>D*or);const E=[];for(const D of x)E.push(D,Tw(D,C));return new Gn(E)}return null}function b_(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function gE(u,i,l,h,g,y,x,C,E,D,V,N){let W=y.textMaxSize.evaluate(i,{});W===void 0&&(W=x);const X=u.layers[0].layout,J=X.get("icon-offset").evaluate(i,{},V),re=Aw(l.horizontal),pe=x/24,xe=u.tilePixelRatio*pe,Ne=u.tilePixelRatio*W/24,Pe=u.tilePixelRatio*C,K=u.tilePixelRatio*X.get("symbol-spacing"),fe=X.get("text-padding")*u.tilePixelRatio,Ae=function(cn,un,rn,Nn=1){const Mi=cn.get("icon-padding").evaluate(un,{},rn),Ji=Mi&&Mi.values;return[Ji[0]*Nn,Ji[1]*Nn,Ji[2]*Nn,Ji[3]*Nn]}(X,i,V,u.tilePixelRatio),rt=X.get("text-max-angle")/180*Math.PI,Et=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",ht=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",yt=X.get("symbol-placement"),zt=K/2,Dt=X.get("icon-text-fit");let Vt;h&&Dt!=="none"&&(u.allowVerticalPlacement&&l.vertical&&(Vt=Qx(h,l.vertical,Dt,X.get("icon-text-fit-padding"),J,pe)),re&&(h=Qx(h,re,Dt,X.get("icon-text-fit-padding"),J,pe)));const St=V?N.line.getGranularityForZoomLevel(V.z):1,Qt=(cn,un)=>{un.x<0||un.x>=Ee||un.y<0||un.y>=Ee||function(rn,Nn,Mi,Ji,Mr,Ra,da,br,Ci,lr,xr,wr,Jr,La,ur,ha,Qi,cr,dr,Hi,fi,us,ed,cs,yE){const td=rn.addToLineVertexArray(Nn,Mi);let xu,nd,id,rd,Rw=0,Lw=0,zw=0,Vw=0,I_=-1,A_=-1;const ho={};let Bw=Xr("");if(rn.allowVerticalPlacement&&Ji.vertical){const Gr=br.layout.get("text-rotate").evaluate(fi,{},cs)+90;id=new Lp(Ci,Nn,lr,xr,wr,Ji.vertical,Jr,La,ur,Gr),da&&(rd=new Lp(Ci,Nn,lr,xr,wr,da,Qi,cr,ur,Gr))}if(Mr){const Gr=br.layout.get("icon-rotate").evaluate(fi,{}),za=br.layout.get("icon-text-fit")!=="none",wu=kw(Mr,Gr,ed,za),hs=da?kw(da,Gr,ed,za):void 0;nd=new Lp(Ci,Nn,lr,xr,wr,Mr,Qi,cr,!1,Gr),Rw=4*wu.length;const Su=rn.iconSizeData;let Vs=null;Su.kind==="source"?(Vs=[co*br.layout.get("icon-size").evaluate(fi,{})],Vs[0]>ll&&et(`${rn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Su.kind==="composite"&&(Vs=[co*us.compositeIconSizes[0].evaluate(fi,{},cs),co*us.compositeIconSizes[1].evaluate(fi,{},cs)],(Vs[0]>ll||Vs[1]>ll)&&et(`${rn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),rn.addSymbols(rn.icon,wu,Vs,Hi,dr,fi,d.an.none,Nn,td.lineStartIndex,td.lineLength,-1,cs),I_=rn.icon.placedSymbolArray.length-1,hs&&(Lw=4*hs.length,rn.addSymbols(rn.icon,hs,Vs,Hi,dr,fi,d.an.vertical,Nn,td.lineStartIndex,td.lineLength,-1,cs),A_=rn.icon.placedSymbolArray.length-1)}const Ow=Object.keys(Ji.horizontal);for(const Gr of Ow){const za=Ji.horizontal[Gr];if(!xu){Bw=Xr(za.text);const hs=br.layout.get("text-rotate").evaluate(fi,{},cs);xu=new Lp(Ci,Nn,lr,xr,wr,za,Jr,La,ur,hs)}const wu=za.positionedLines.length===1;if(zw+=Iw(rn,Nn,za,Ra,br,ur,fi,ha,td,Ji.vertical?d.an.horizontal:d.an.horizontalOnly,wu?Ow:[Gr],ho,I_,us,cs),wu)break}Ji.vertical&&(Vw+=Iw(rn,Nn,Ji.vertical,Ra,br,ur,fi,ha,td,d.an.vertical,["vertical"],ho,A_,us,cs));const bE=xu?xu.boxStartIndex:rn.collisionBoxArray.length,xE=xu?xu.boxEndIndex:rn.collisionBoxArray.length,wE=id?id.boxStartIndex:rn.collisionBoxArray.length,SE=id?id.boxEndIndex:rn.collisionBoxArray.length,kE=nd?nd.boxStartIndex:rn.collisionBoxArray.length,CE=nd?nd.boxEndIndex:rn.collisionBoxArray.length,TE=rd?rd.boxStartIndex:rn.collisionBoxArray.length,PE=rd?rd.boxEndIndex:rn.collisionBoxArray.length;let ds=-1;const Vp=(Gr,za)=>Gr&&Gr.circleDiameter?Math.max(Gr.circleDiameter,za):za;ds=Vp(xu,ds),ds=Vp(id,ds),ds=Vp(nd,ds),ds=Vp(rd,ds);const Fw=ds>-1?1:0;Fw&&(ds*=yE/or),rn.glyphOffsetArray.length>=Xc.MAX_GLYPHS&&et("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),fi.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,fi.sortKey);const IE=Pw(br,fi,cs),[AE,EE]=function(Gr,za){const wu=Gr.length,hs=za==null?void 0:za.values;if((hs==null?void 0:hs.length)>0)for(let Su=0;Su<hs.length;Su+=2){const Vs=hs[Su+1];Gr.emplaceBack(d.aD[hs[Su]],Vs[0],Vs[1])}return[wu,Gr.length]}(rn.textAnchorOffsets,IE);rn.symbolInstances.emplaceBack(Nn.x,Nn.y,ho.right>=0?ho.right:-1,ho.center>=0?ho.center:-1,ho.left>=0?ho.left:-1,ho.vertical||-1,I_,A_,Bw,bE,xE,wE,SE,kE,CE,TE,PE,lr,zw,Vw,Rw,Lw,Fw,0,Jr,ds,AE,EE)}(u,un,cn,l,h,g,Vt,u.layers[0],u.collisionBoxArray,i.index,i.sourceLayerIndex,u.index,xe,[fe,fe,fe,fe],Et,E,Pe,Ae,ht,J,i,y,D,V,x)};if(yt==="line")for(const cn of _w(i.geometry,0,0,Ee,Ee)){const un=yu(cn,St),rn=hE(un,K,rt,l.vertical||re,h,24,Ne,u.overscaling,Ee);for(const Nn of rn)re&&vE(u,re.text,zt,Nn)||Qt(un,Nn)}else if(yt==="line-center"){for(const cn of i.geometry)if(cn.length>1){const un=yu(cn,St),rn=dE(un,rt,l.vertical||re,h,24,Ne);rn&&Qt(un,rn)}}else if(i.type==="Polygon")for(const cn of bc(i.geometry,0)){const un=mE(cn,16);Qt(yu(cn[0],St,!0),new cl(un.x,un.y,0))}else if(i.type==="LineString")for(const cn of i.geometry){const un=yu(cn,St);Qt(un,new cl(un[0].x,un[0].y,0))}else if(i.type==="Point")for(const cn of i.geometry)for(const un of cn)Qt([un],new cl(un.x,un.y,0))}function Iw(u,i,l,h,g,y,x,C,E,D,V,N,W,X,J){const re=function(Ne,Pe,K,fe,Ae,rt,Et,ht){const yt=fe.layout.get("text-rotate").evaluate(rt,{})*Math.PI/180,zt=[];for(const Dt of Pe.positionedLines)for(const Vt of Dt.positionedGlyphs){if(!Vt.rect)continue;const St=Vt.rect||{};let Qt=4,cn=!0,un=1,rn=0;const Nn=(Ae||ht)&&Vt.vertical,Mi=Vt.metrics.advance*Vt.scale/2;if(ht&&Pe.verticalizable&&(rn=Dt.lineOffset/2-(Vt.imageName?-(or-Vt.metrics.width*Vt.scale)/2:(Vt.scale-1)*or)),Vt.imageName){const cr=Et[Vt.imageName];cn=cr.sdf,un=cr.pixelRatio,Qt=1/un}const Ji=Ae?[Vt.x+Mi,Vt.y]:[0,0];let Mr=Ae?[0,0]:[Vt.x+Mi+K[0],Vt.y+K[1]-rn],Ra=[0,0];Nn&&(Ra=Mr,Mr=[0,0]);const da=Vt.metrics.isDoubleResolution?2:1,br=(Vt.metrics.left-Qt)*Vt.scale-Mi+Mr[0],Ci=(-Vt.metrics.top-Qt)*Vt.scale+Mr[1],lr=br+St.w/da*Vt.scale/un,xr=Ci+St.h/da*Vt.scale/un,wr=new R(br,Ci),Jr=new R(lr,Ci),La=new R(br,xr),ur=new R(lr,xr);if(Nn){const cr=new R(-Mi,Mi- -17),dr=-Math.PI/2,Hi=12-Mi,fi=new R(22-Hi,-(Vt.imageName?Hi:0)),us=new R(...Ra);wr._rotateAround(dr,cr)._add(fi)._add(us),Jr._rotateAround(dr,cr)._add(fi)._add(us),La._rotateAround(dr,cr)._add(fi)._add(us),ur._rotateAround(dr,cr)._add(fi)._add(us)}if(yt){const cr=Math.sin(yt),dr=Math.cos(yt),Hi=[dr,-cr,cr,dr];wr._matMult(Hi),Jr._matMult(Hi),La._matMult(Hi),ur._matMult(Hi)}const ha=new R(0,0),Qi=new R(0,0);zt.push({tl:wr,tr:Jr,bl:La,br:ur,tex:St,writingMode:Pe.writingMode,glyphOffset:Ji,sectionIndex:Vt.sectionIndex,isSDF:cn,pixelOffsetTL:ha,pixelOffsetBR:Qi,minFontScaleX:0,minFontScaleY:0})}return zt}(0,l,C,g,y,x,h,u.allowVerticalPlacement),pe=u.textSizeData;let xe=null;pe.kind==="source"?(xe=[co*g.layout.get("text-size").evaluate(x,{})],xe[0]>ll&&et(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):pe.kind==="composite"&&(xe=[co*X.compositeTextSizes[0].evaluate(x,{},J),co*X.compositeTextSizes[1].evaluate(x,{},J)],(xe[0]>ll||xe[1]>ll)&&et(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,re,xe,C,y,x,D,i,E.lineStartIndex,E.lineLength,W,J);for(const Ne of V)N[Ne]=u.text.placedSymbolArray.length-1;return 4*re.length}function Aw(u){for(const i in u)return u[i];return null}function vE(u,i,l,h){const g=u.compareText;if(i in g){const y=g[i];for(let x=y.length-1;x>=0;x--)if(h.dist(y[x])<l)return!0}else g[i]=[];return g[i].push(h),!1}const Ew=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class x_{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const y=Ew[15&h];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[C]=new Uint32Array(i,4,1);return new x_(C,x,y,i)}constructor(i,l=64,h=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const y=Ew.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,C=i*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-C%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+C+E,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+C+E),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+C+E,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=l,h}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return w_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:C}=this,E=[0,y.length-1,0],D=[];for(;E.length;){const V=E.pop()||0,N=E.pop()||0,W=E.pop()||0;if(N-W<=C){for(let pe=W;pe<=N;pe++){const xe=x[2*pe],Ne=x[2*pe+1];xe>=i&&xe<=h&&Ne>=l&&Ne<=g&&D.push(y[pe])}continue}const X=W+N>>1,J=x[2*X],re=x[2*X+1];J>=i&&J<=h&&re>=l&&re<=g&&D.push(y[X]),(V===0?i<=J:l<=re)&&(E.push(W),E.push(X-1),E.push(1-V)),(V===0?h>=J:g>=re)&&(E.push(X+1),E.push(N),E.push(1-V))}return D}within(i,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:x}=this,C=[0,g.length-1,0],E=[],D=h*h;for(;C.length;){const V=C.pop()||0,N=C.pop()||0,W=C.pop()||0;if(N-W<=x){for(let pe=W;pe<=N;pe++)Dw(y[2*pe],y[2*pe+1],i,l)<=D&&E.push(g[pe]);continue}const X=W+N>>1,J=y[2*X],re=y[2*X+1];Dw(J,re,i,l)<=D&&E.push(g[X]),(V===0?i-h<=J:l-h<=re)&&(C.push(W),C.push(X-1),C.push(1-V)),(V===0?i+h>=J:l+h>=re)&&(C.push(X+1),C.push(N),C.push(1-V))}return E}}function w_(u,i,l,h,g,y){if(g-h<=l)return;const x=h+g>>1;Mw(u,i,x,h,g,y),w_(u,i,l,h,x-1,1-y),w_(u,i,l,x+1,g,1-y)}function Mw(u,i,l,h,g,y){for(;g>h;){if(g-h>600){const D=g-h+1,V=l-h+1,N=Math.log(D),W=.5*Math.exp(2*N/3),X=.5*Math.sqrt(N*W*(D-W)/D)*(V-D/2<0?-1:1);Mw(u,i,l,Math.max(h,Math.floor(l-V*W/D+X)),Math.min(g,Math.floor(l+(D-V)*W/D+X)),y)}const x=i[2*l+y];let C=h,E=g;for(hf(u,i,h,l),i[2*g+y]>x&&hf(u,i,h,g);C<E;){for(hf(u,i,C,E),C++,E--;i[2*C+y]<x;)C++;for(;i[2*E+y]>x;)E--}i[2*h+y]===x?hf(u,i,h,E):(E++,hf(u,i,E,g)),E<=l&&(h=E+1),l<=E&&(g=E-1)}}function hf(u,i,l,h){S_(u,l,h),S_(i,2*l,2*h),S_(i,2*l+1,2*h+1)}function S_(u,i,l){const h=u[i];u[i]=u[l],u[l]=h}function Dw(u,i,l,h){const g=u-l,y=i-h;return g*g+y*y}var k_;d.cw=void 0,(k_=d.cw||(d.cw={})).create="create",k_.load="load",k_.fullLoad="fullLoad";let zp=null,ff=[];const C_=1e3/60,T_="loadTime",P_="fullLoadTime",_E={mark(u){performance.mark(u)},frame(u){const i=u;zp!=null&&ff.push(i-zp),zp=i},clearMetrics(){zp=null,ff=[],performance.clearMeasures(T_),performance.clearMeasures(P_);for(const u in d.cw)performance.clearMarks(d.cw[u])},getPerformanceMetrics(){performance.measure(T_,d.cw.create,d.cw.load),performance.measure(P_,d.cw.create,d.cw.fullLoad);const u=performance.getEntriesByName(T_)[0].duration,i=performance.getEntriesByName(P_)[0].duration,l=ff.length,h=1/(ff.reduce((y,x)=>y+x,0)/l/1e3),g=ff.filter(y=>y>C_).reduce((y,x)=>y+(x-C_)/C_,0);return{loadTime:u,fullLoadTime:i,fps:h,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};d.$=Ee,d.A=Q,d.B=function([u,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:u*Math.cos(i)*Math.sin(l),y:u*Math.sin(i)*Math.sin(l),z:u*Math.cos(l)}},d.C=ua,d.D=en,d.E=Pt,d.F=mi,d.G=Oc,d.H=function(u){if(Lt==null){const i=u.navigator?u.navigator.userAgent:null;Lt=!!u.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Lt},d.I=l_,d.J=class{constructor(u,i){this.target=u,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new lE(()=>this.process()),this.subscription=_n(this.target,"message",l=>this.receive(l),!1),this.globalScope=dt(self)?u:window}registerMessageHandler(u,i){this.messageHandlers[u]=i}sendAsync(u,i){return new Promise((l,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),y=i?_n(i.signal,"abort",()=>{y==null||y.unsubscribe(),delete this.resolveRejects[g];const E={id:g,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},uE):null;this.resolveRejects[g]={resolve:E=>{y==null||y.unsubscribe(),l(E)},reject:E=>{y==null||y.unsubscribe(),h(E)}};const x=[],C=Object.assign(Object.assign({},u),{id:g,sourceMapId:this.mapId,origin:location.origin,data:ou(u.data,x)});this.target.postMessage(C,{transfer:x})})}receive(u){const i=u.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(dt(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),i=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(u,i)}processTask(u,i){return a(this,void 0,void 0,function*(){if(i.type==="<response>"){const g=this.resolveRejects[u];return delete this.resolveRejects[u],g?void(i.error?g.reject(rl(i.error)):g.resolve(rl(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=rl(i.data),h=new AbortController;this.abortControllers[u]=h;try{const g=yield this.messageHandlers[i.type](i.sourceMapId,l,h);this.completeTask(u,null,g)}catch(g){this.completeTask(u,g)}})}completeTask(u,i,l){const h=[];delete this.abortControllers[u];const g={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?ou(i):null,data:ou(l,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.K=me,d.L=function(){var u=new Q(16);return Q!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},d.M=function(u,i,l){var h,g,y,x,C,E,D,V,N,W,X,J,re=l[0],pe=l[1],xe=l[2];return i===u?(u[12]=i[0]*re+i[4]*pe+i[8]*xe+i[12],u[13]=i[1]*re+i[5]*pe+i[9]*xe+i[13],u[14]=i[2]*re+i[6]*pe+i[10]*xe+i[14],u[15]=i[3]*re+i[7]*pe+i[11]*xe+i[15]):(g=i[1],y=i[2],x=i[3],C=i[4],E=i[5],D=i[6],V=i[7],N=i[8],W=i[9],X=i[10],J=i[11],u[0]=h=i[0],u[1]=g,u[2]=y,u[3]=x,u[4]=C,u[5]=E,u[6]=D,u[7]=V,u[8]=N,u[9]=W,u[10]=X,u[11]=J,u[12]=h*re+C*pe+N*xe+i[12],u[13]=g*re+E*pe+W*xe+i[13],u[14]=y*re+D*pe+X*xe+i[14],u[15]=x*re+V*pe+J*xe+i[15]),u},d.N=function(u,i,l){var h=l[0],g=l[1],y=l[2];return u[0]=i[0]*h,u[1]=i[1]*h,u[2]=i[2]*h,u[3]=i[3]*h,u[4]=i[4]*g,u[5]=i[5]*g,u[6]=i[6]*g,u[7]=i[7]*g,u[8]=i[8]*y,u[9]=i[9]*y,u[10]=i[10]*y,u[11]=i[11]*y,u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},d.O=function(u,i,l){var h=i[0],g=i[1],y=i[2],x=i[3],C=i[4],E=i[5],D=i[6],V=i[7],N=i[8],W=i[9],X=i[10],J=i[11],re=i[12],pe=i[13],xe=i[14],Ne=i[15],Pe=l[0],K=l[1],fe=l[2],Ae=l[3];return u[0]=Pe*h+K*C+fe*N+Ae*re,u[1]=Pe*g+K*E+fe*W+Ae*pe,u[2]=Pe*y+K*D+fe*X+Ae*xe,u[3]=Pe*x+K*V+fe*J+Ae*Ne,u[4]=(Pe=l[4])*h+(K=l[5])*C+(fe=l[6])*N+(Ae=l[7])*re,u[5]=Pe*g+K*E+fe*W+Ae*pe,u[6]=Pe*y+K*D+fe*X+Ae*xe,u[7]=Pe*x+K*V+fe*J+Ae*Ne,u[8]=(Pe=l[8])*h+(K=l[9])*C+(fe=l[10])*N+(Ae=l[11])*re,u[9]=Pe*g+K*E+fe*W+Ae*pe,u[10]=Pe*y+K*D+fe*X+Ae*xe,u[11]=Pe*x+K*V+fe*J+Ae*Ne,u[12]=(Pe=l[12])*h+(K=l[13])*C+(fe=l[14])*N+(Ae=l[15])*re,u[13]=Pe*g+K*E+fe*W+Ae*pe,u[14]=Pe*y+K*D+fe*X+Ae*xe,u[15]=Pe*x+K*V+fe*J+Ae*Ne,u},d.P=R,d.Q=function(u,i){const l={};for(let h=0;h<i.length;h++){const g=i[h];g in u&&(l[g]=u[g])}return l},d.R=ca,d.S=ul,d.T=Wv,d.U=uw,d.V=lw,d.W=q,d.X=H,d.Y=Wt,d.Z=Da,d._=a,d.a=se,d.a$=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u[3]=i[3]*l,u},d.a0=df,d.a1=bu,d.a2=25,d.a3=__,d.a4=u=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(l=>{i.onloadstart=()=>{l(i)};for(const h of u){const g=window.document.createElement("source");at(h)||(i.crossOrigin="Anonymous"),g.src=h,i.appendChild(g)}})},d.a5=$t,d.a6=function(){return ae++},d.a7=_e,d.a8=Xc,d.a9=Ts,d.aA=or,d.aB=tt,d.aC=function(u,i,l,h,g=!1){if(!l[0]&&!l[1])return[0,0];const y=g?h==="map"?-u.bearingInRadians:0:h==="viewport"?u.bearingInRadians:0;if(y){const x=Math.sin(y),C=Math.cos(y);l=[l[0]*C-l[1]*x,l[0]*x+l[1]*C]}return[g?l[0]:tt(i,l[0],u.zoom),g?l[1]:tt(i,l[1],u.zoom)]},d.aE=d_,d.aF=b_,d.aG=c_,d.aH=x_,d.aI=Ei,d.aJ=kp,d.aK=nt,d.aL=qn,d.aM=ai,d.aN=Je,d.aO=Vn,d.aP=dw,d.aQ=be,d.aR=ie,d.aS=function(u){var i=new Q(3);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i},d.aT=function(u,i,l){return u[0]=i[0]-l[0],u[1]=i[1]-l[1],u[2]=i[2]-l[2],u},d.aU=function(u,i){var l=i[0],h=i[1],g=i[2],y=l*l+h*h+g*g;return y>0&&(y=1/Math.sqrt(y)),u[0]=i[0]*y,u[1]=i[1]*y,u[2]=i[2]*y,u},d.aV=Be,d.aW=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]},d.aX=function(u,i,l){return u[0]=i[0]*l[0],u[1]=i[1]*l[1],u[2]=i[2]*l[2],u[3]=i[3]*l[3],u},d.aY=he,d.aZ=function(u,i,l){const h=i[0]*l[0]+i[1]*l[1]+i[2]*l[2];return h===0?null:(-(u[0]*l[0]+u[1]*l[1]+u[2]*l[2])-l[3])/h},d.a_=Fe,d.aa=vu,d.ab=pw,d.ac=function(u){const i={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,g,y)=>{const x=g||y;return i[h]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},d.ad=Dn,d.ae=function(u){return Math.pow(2,u)},d.af=le,d.ag=ot,d.ah=85.051129,d.ai=cw,d.aj=function(u){return Math.log(u)/Math.LN2},d.ak=function(u){var i=u[0],l=u[1];return i*i+l*l},d.al=function(u,i){const l=[];for(const h in u)h in i||l.push(h);return l},d.am=function(u,i){let l=0,h=0;if(u.kind==="constant")h=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:g,minZoom:y,maxZoom:x}=u,C=g?ot($r.interpolationFactor(g,i,y,x),0,1):0;u.kind==="camera"?h=ua.number(u.minSize,u.maxSize,C):l=C}return{uSizeT:l,uSize:h}},d.ao=function(u,{uSize:i,uSizeT:l},{lowerSize:h,upperSize:g}){return u.kind==="source"?h/co:u.kind==="composite"?ua.number(h/co,g/co,l):i},d.ap=function(u,i){var l=i[0],h=i[1],g=i[2],y=i[3],x=i[4],C=i[5],E=i[6],D=i[7],V=i[8],N=i[9],W=i[10],X=i[11],J=i[12],re=i[13],pe=i[14],xe=i[15],Ne=l*C-h*x,Pe=l*E-g*x,K=l*D-y*x,fe=h*E-g*C,Ae=h*D-y*C,rt=g*D-y*E,Et=V*re-N*J,ht=V*pe-W*J,yt=V*xe-X*J,zt=N*pe-W*re,Dt=N*xe-X*re,Vt=W*xe-X*pe,St=Ne*Vt-Pe*Dt+K*zt+fe*yt-Ae*ht+rt*Et;return St?(u[0]=(C*Vt-E*Dt+D*zt)*(St=1/St),u[1]=(g*Dt-h*Vt-y*zt)*St,u[2]=(re*rt-pe*Ae+xe*fe)*St,u[3]=(W*Ae-N*rt-X*fe)*St,u[4]=(E*yt-x*Vt-D*ht)*St,u[5]=(l*Vt-g*yt+y*ht)*St,u[6]=(pe*K-J*rt-xe*Pe)*St,u[7]=(V*rt-W*K+X*Pe)*St,u[8]=(x*Dt-C*yt+D*Et)*St,u[9]=(h*yt-l*Dt-y*Et)*St,u[10]=(J*Ae-re*K+xe*Ne)*St,u[11]=(N*K-V*Ae-X*Ne)*St,u[12]=(C*ht-x*zt-E*Et)*St,u[13]=(l*zt-h*ht+g*Et)*St,u[14]=(re*Pe-J*fe-pe*Ne)*St,u[15]=(V*fe-N*Pe+W*Ne)*St,u):null},d.aq=Ve,d.ar=function(u){return Math.hypot(u[0],u[1])},d.as=function(u){return u[0]=0,u[1]=0,u},d.at=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u},d.au=h_,d.av=Ze,d.aw=function(u,i,l,h){const g=i.y-u.y,y=i.x-u.x,x=h.y-l.y,C=h.x-l.x,E=x*y-C*g;if(E===0)return null;const D=(C*(u.y-l.y)-x*(u.x-l.x))/E;return new R(u.x+D*y,u.y+D*g)},d.ax=_w,d.ay=nx,d.az=function(u){let i=1/0,l=1/0,h=-1/0,g=-1/0;for(const y of u)i=Math.min(i,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),g=Math.max(g,y.y);return[i,l,h,g]},d.b=At,d.b$=FA,d.b0=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]+u[3]},d.b1=fw,d.b2=Jc,d.b3=function(u,i,l,h,g){var y,x=1/Math.tan(i/2);return u[0]=x/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=x,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,g!=null&&g!==1/0?(u[10]=(g+h)*(y=1/(h-g)),u[14]=2*g*h*y):(u[10]=-1,u[14]=-2*h),u},d.b4=function(u){var i=new Q(16);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],i[4]=u[4],i[5]=u[5],i[6]=u[6],i[7]=u[7],i[8]=u[8],i[9]=u[9],i[10]=u[10],i[11]=u[11],i[12]=u[12],i[13]=u[13],i[14]=u[14],i[15]=u[15],i},d.b5=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),y=i[0],x=i[1],C=i[2],E=i[3],D=i[4],V=i[5],N=i[6],W=i[7];return i!==u&&(u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=y*g+D*h,u[1]=x*g+V*h,u[2]=C*g+N*h,u[3]=E*g+W*h,u[4]=D*g-y*h,u[5]=V*g-x*h,u[6]=N*g-C*h,u[7]=W*g-E*h,u},d.b6=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),y=i[4],x=i[5],C=i[6],E=i[7],D=i[8],V=i[9],N=i[10],W=i[11];return i!==u&&(u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[4]=y*g+D*h,u[5]=x*g+V*h,u[6]=C*g+N*h,u[7]=E*g+W*h,u[8]=D*g-y*h,u[9]=V*g-x*h,u[10]=N*g-C*h,u[11]=W*g-E*h,u},d.b7=function(){const u=new Float32Array(16);return le(u),u},d.b8=function(){const u=new Float64Array(16);return le(u),u},d.b9=function(){return new Float64Array(16)},d.bA=function(u){return u[0]=0,u[1]=0,u[2]=0,u},d.bB=function(u,i,l,h){const g=Math.sqrt(u*u+i*i),y=Math.sqrt(l*l+h*h);u/=g,i/=g,l/=y,h/=y;const x=Math.acos(u*l+i*h);return-i*l+u*h>0?x:-x},d.bC=function(u,i){const l=Nt(u,2*Math.PI),h=Nt(i,2*Math.PI);return Math.min(Math.abs(l-h),Math.abs(l-h+2*Math.PI),Math.abs(l-h-2*Math.PI))},d.bD=function(){const u={},i=$e.$version;for(const l in $e.$root){const h=$e.$root[l];if(h.required){let g=null;g=l==="version"?i:h.type==="array"?[]:{},g!=null&&(u[l]=g)}}return u},d.bE=Bh,d.bF=je,d.bG=function u(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let h=0;h<i.length;h++)if(!u(i[h],l[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const h in i)if(!u(i[h],l[h]))return!1;return!0}return i===l},d.bH=function(u){u=u.slice();const i=Object.create(null);for(let l=0;l<u.length;l++)i[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=fn(u[l],i[u[l].ref]));return u},d.bI=function(u){if(u.type==="custom")return new oE(u);switch(u.type){case"background":return new rE(u);case"circle":return new JI(u);case"color-relief":return new rA(u);case"fill":return new yA(u);case"fill-extrusion":return new PA(u);case"heatmap":return new eA(u);case"hillshade":return new nA(u);case"line":return new zA(u);case"raster":return new sE(u);case"symbol":return new Ep(u)}},d.bJ=Ye,d.bK=function(u,i){if(!u)return[{command:"setStyle",args:[i]}];let l=[];try{if(!Xt(u.version,i.version))return[{command:"setStyle",args:[i]}];Xt(u.center,i.center)||l.push({command:"setCenter",args:[i.center]}),Xt(u.state,i.state)||l.push({command:"setGlobalState",args:[i.state]}),Xt(u.centerAltitude,i.centerAltitude)||l.push({command:"setCenterAltitude",args:[i.centerAltitude]}),Xt(u.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),Xt(u.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),Xt(u.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),Xt(u.roll,i.roll)||l.push({command:"setRoll",args:[i.roll]}),Xt(u.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),Xt(u.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),Xt(u.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),Xt(u.light,i.light)||l.push({command:"setLight",args:[i.light]}),Xt(u.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),Xt(u.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),Xt(u.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const h={},g=[];(function(x,C,E,D){let V;for(V in C=C||{},x=x||{})Object.prototype.hasOwnProperty.call(x,V)&&(Object.prototype.hasOwnProperty.call(C,V)||ui(V,E,D));for(V in C)Object.prototype.hasOwnProperty.call(C,V)&&(Object.prototype.hasOwnProperty.call(x,V)?Xt(x[V],C[V])||(x[V].type==="geojson"&&C[V].type==="geojson"&&Zn(x,C,V)?ln(E,{command:"setGeoJSONSourceData",args:[V,C[V].data]}):ei(V,C,E,D)):vn(V,C,E))})(u.sources,i.sources,g,h);const y=[];u.layers&&u.layers.forEach(x=>{"source"in x&&h[x.source]?l.push({command:"removeLayer",args:[x.id]}):y.push(x)}),l=l.concat(g),function(x,C,E){C=C||[];const D=(x=x||[]).map(Un),V=C.map(Un),N=x.reduce(ir,{}),W=C.reduce(ir,{}),X=D.slice(),J=Object.create(null);let re,pe,xe,Ne,Pe;for(let K=0,fe=0;K<D.length;K++)re=D[K],Object.prototype.hasOwnProperty.call(W,re)?fe++:(ln(E,{command:"removeLayer",args:[re]}),X.splice(X.indexOf(re,fe),1));for(let K=0,fe=0;K<V.length;K++)re=V[V.length-1-K],X[X.length-1-K]!==re&&(Object.prototype.hasOwnProperty.call(N,re)?(ln(E,{command:"removeLayer",args:[re]}),X.splice(X.lastIndexOf(re,X.length-fe),1)):fe++,Ne=X[X.length-K],ln(E,{command:"addLayer",args:[W[re],Ne]}),X.splice(X.length-K,0,re),J[re]=!0);for(let K=0;K<V.length;K++)if(re=V[K],pe=N[re],xe=W[re],!J[re]&&!Xt(pe,xe))if(Xt(pe.source,xe.source)&&Xt(pe["source-layer"],xe["source-layer"])&&Xt(pe.type,xe.type)){for(Pe in gn(pe.layout,xe.layout,E,re,null,"setLayoutProperty"),gn(pe.paint,xe.paint,E,re,null,"setPaintProperty"),Xt(pe.filter,xe.filter)||ln(E,{command:"setFilter",args:[re,xe.filter]}),Xt(pe.minzoom,xe.minzoom)&&Xt(pe.maxzoom,xe.maxzoom)||ln(E,{command:"setLayerZoomRange",args:[re,xe.minzoom,xe.maxzoom]}),pe)Object.prototype.hasOwnProperty.call(pe,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?gn(pe[Pe],xe[Pe],E,re,Pe.slice(6),"setPaintProperty"):Xt(pe[Pe],xe[Pe])||ln(E,{command:"setLayerProperty",args:[re,Pe,xe[Pe]]}));for(Pe in xe)Object.prototype.hasOwnProperty.call(xe,Pe)&&!Object.prototype.hasOwnProperty.call(pe,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?gn(pe[Pe],xe[Pe],E,re,Pe.slice(6),"setPaintProperty"):Xt(pe[Pe],xe[Pe])||ln(E,{command:"setLayerProperty",args:[re,Pe,xe[Pe]]}))}else ln(E,{command:"removeLayer",args:[re]}),Ne=X[X.lastIndexOf(re)+1],ln(E,{command:"addLayer",args:[xe,Ne]})}(y,i.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[i]}]}return l},d.bL=function(u){const i=[],l=u.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},d.bM=de,d.bN=ze,d.bO=class extends hi{constructor(u,i){super(u,i),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},d.bP=yp,d.bQ=class extends hi{constructor(u,i){super(u,i),this.current=$v}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let i=1;i<16;i++)if(u[i]!==this.current[i]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},d.bR=Xi,d.bS=class extends hi{constructor(u,i){super(u,i),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},d.bT=class extends hi{constructor(u,i){super(u,i),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},d.bU=oe,d.bV=function(u,i){var l=Math.sin(i),h=Math.cos(i);return u[0]=h,u[1]=l,u[2]=0,u[3]=-l,u[4]=h,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},d.bW=function(u,i,l){var h=i[0],g=i[1],y=i[2];return u[0]=h*l[0]+g*l[3]+y*l[6],u[1]=h*l[1]+g*l[4]+y*l[7],u[2]=h*l[2]+g*l[5]+y*l[8],u},d.bX=function(u,i,l,h,g,y,x){var C=1/(i-l),E=1/(h-g),D=1/(y-x);return u[0]=-2*C,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*E,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*D,u[11]=0,u[12]=(i+l)*C,u[13]=(g+h)*E,u[14]=(x+y)*D,u[15]=1,u},d.bY=class extends hi{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(4*u.length);for(let l=0;l<u.length;l++)i[4*l]=u[l].r,i[4*l+1]=u[l].g,i[4*l+2]=u[l].b,i[4*l+3]=u[l].a;this.gl.uniform4fv(this.location,i)}}},d.bZ=class extends hi{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(u);this.gl.uniform1fv(this.location,i)}}},d.b_=class extends m{},d.ba=function(u,i,l){const h=new Float64Array(4);return pt(h,u,i-90,l),h},d.bb=function(u,i,l,h){var g,y,x,C,E,D=i[0],V=i[1],N=i[2],W=i[3],X=l[0],J=l[1],re=l[2],pe=l[3];return(y=D*X+V*J+N*re+W*pe)<0&&(y=-y,X=-X,J=-J,re=-re,pe=-pe),1-y>ee?(g=Math.acos(y),x=Math.sin(g),C=Math.sin((1-h)*g)/x,E=Math.sin(h*g)/x):(C=1-h,E=h),u[0]=C*D+E*X,u[1]=C*V+E*J,u[2]=C*N+E*re,u[3]=C*W+E*pe,u},d.bc=function(u){const i=new Float64Array(9);var l,h,g,y,x,C,E,D,V,N,W,X,J,re,pe,xe,Ne,Pe;N=(g=(h=u)[0])*(E=g+g),W=(y=h[1])*E,J=(x=h[2])*E,re=x*(D=y+y),xe=(C=h[3])*E,Ne=C*D,Pe=C*(V=x+x),(l=i)[0]=1-(X=y*D)-(pe=x*V),l[3]=W-Pe,l[6]=J+Ne,l[1]=W+Pe,l[4]=1-N-pe,l[7]=re-xe,l[2]=J-Ne,l[5]=re+xe,l[8]=1-N-X;const K=Vn(-Math.asin(ot(i[2],-1,1)));let fe,Ae;return Math.hypot(i[5],i[8])<.001?(fe=0,Ae=-Vn(Math.atan2(i[3],i[4]))):(fe=Vn(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Ae=Vn(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:fe,pitch:K+90,bearing:Ae}},d.bd=function(u,i){return u.roll==i.roll&&u.pitch==i.pitch&&u.bearing==i.bearing},d.be=On,d.bf=Ur,d.bg=Kc,d.bh=rf,d.bi=Zc,d.bj=kt,d.bk=wt,d.bl=Sn,d.bm=function(u,i,l,h,g){return kt(h,g,ot((u-i)/(l-i),0,1))},d.bn=Nt,d.bo=function(){return new Float64Array(3)},d.bp=function(u,i,l,h){return u[0]=i[0]+l[0]*h,u[1]=i[1]+l[1]*h,u[2]=i[2]+l[2]*h,u},d.bq=pt,d.br=function(u,i,l){var h=l[0],g=l[1],y=l[2],x=i[0],C=i[1],E=i[2],D=g*E-y*C,V=y*x-h*E,N=h*C-g*x,W=g*N-y*V,X=y*D-h*N,J=h*V-g*D,re=2*l[3];return V*=re,N*=re,X*=2,J*=2,u[0]=x+(D*=re)+(W*=2),u[1]=C+V+X,u[2]=E+N+J,u},d.bs=function(u,i,l){const h=(g=[u[0],u[1],u[2],i[0],i[1],i[2],l[0],l[1],l[2]])[0]*((V=g[8])*(x=g[4])-(C=g[5])*(D=g[7]))+g[1]*(-V*(y=g[3])+C*(E=g[6]))+g[2]*(D*y-x*E);var g,y,x,C,E,D,V;if(h===0)return null;const N=Be([],[i[0],i[1],i[2]],[l[0],l[1],l[2]]),W=Be([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),X=Be([],[u[0],u[1],u[2]],[i[0],i[1],i[2]]),J=be([],N,-u[3]);return ie(J,J,be([],W,-i[3])),ie(J,J,be([],X,-l[3])),be(J,J,1/h),J},d.bt=g_,d.bu=function(){return new Float64Array(4)},d.bv=function(u,i,l,h){var g=[],y=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],y[0]=g[0]*Math.cos(h)-g[1]*Math.sin(h),y[1]=g[0]*Math.sin(h)+g[1]*Math.cos(h),y[2]=g[2],u[0]=y[0]+l[0],u[1]=y[1]+l[1],u[2]=y[2]+l[2],u},d.bw=function(u,i,l,h){var g=[],y=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],y[0]=g[0],y[1]=g[1]*Math.cos(h)-g[2]*Math.sin(h),y[2]=g[1]*Math.sin(h)+g[2]*Math.cos(h),u[0]=y[0]+l[0],u[1]=y[1]+l[1],u[2]=y[2]+l[2],u},d.bx=function(u,i,l,h){var g=[],y=[];return g[0]=i[0]-l[0],g[1]=i[1]-l[1],g[2]=i[2]-l[2],y[0]=g[2]*Math.sin(h)+g[0]*Math.cos(h),y[1]=g[1],y[2]=g[2]*Math.cos(h)-g[0]*Math.sin(h),u[0]=y[0]+l[0],u[1]=y[1]+l[1],u[2]=y[2]+l[2],u},d.by=function(u,i,l){var h=Math.sin(l),g=Math.cos(l),y=i[0],x=i[1],C=i[2],E=i[3],D=i[8],V=i[9],N=i[10],W=i[11];return i!==u&&(u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=y*g-D*h,u[1]=x*g-V*h,u[2]=C*g-N*h,u[3]=E*g-W*h,u[8]=y*h+D*g,u[9]=x*h+V*g,u[10]=C*h+N*g,u[11]=E*h+W*g,u},d.bz=function(u,i){const l=Nt(u,360),h=Nt(i,360),g=h-l,y=h>l?g-360:g+360;return Math.abs(g)<Math.abs(y)?g:y},d.c=He,d.c0=class extends _{},d.c1=Hv,d.c2=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},d.c3=hx,d.c4=function(u,i,l){var h=i[0],g=i[1],y=i[2],x=l[3]*h+l[7]*g+l[11]*y+l[15];return u[0]=(l[0]*h+l[4]*g+l[8]*y+l[12])/(x=x||1),u[1]=(l[1]*h+l[5]*g+l[9]*y+l[13])/x,u[2]=(l[2]*h+l[6]*g+l[10]*y+l[14])/x,u},d.c5=class extends Gh{},d.c6=class extends U{},d.c7=function(u,i){return u[0]===i[0]&&u[1]===i[1]&&u[2]===i[2]&&u[3]===i[3]&&u[4]===i[4]&&u[5]===i[5]&&u[6]===i[6]&&u[7]===i[7]&&u[8]===i[8]&&u[9]===i[9]&&u[10]===i[10]&&u[11]===i[11]&&u[12]===i[12]&&u[13]===i[13]&&u[14]===i[14]&&u[15]===i[15]},d.c8=function(u,i){var l=u[0],h=u[1],g=u[2],y=u[3],x=u[4],C=u[5],E=u[6],D=u[7],V=u[8],N=u[9],W=u[10],X=u[11],J=u[12],re=u[13],pe=u[14],xe=u[15],Ne=i[0],Pe=i[1],K=i[2],fe=i[3],Ae=i[4],rt=i[5],Et=i[6],ht=i[7],yt=i[8],zt=i[9],Dt=i[10],Vt=i[11],St=i[12],Qt=i[13],cn=i[14],un=i[15];return Math.abs(l-Ne)<=ee*Math.max(1,Math.abs(l),Math.abs(Ne))&&Math.abs(h-Pe)<=ee*Math.max(1,Math.abs(h),Math.abs(Pe))&&Math.abs(g-K)<=ee*Math.max(1,Math.abs(g),Math.abs(K))&&Math.abs(y-fe)<=ee*Math.max(1,Math.abs(y),Math.abs(fe))&&Math.abs(x-Ae)<=ee*Math.max(1,Math.abs(x),Math.abs(Ae))&&Math.abs(C-rt)<=ee*Math.max(1,Math.abs(C),Math.abs(rt))&&Math.abs(E-Et)<=ee*Math.max(1,Math.abs(E),Math.abs(Et))&&Math.abs(D-ht)<=ee*Math.max(1,Math.abs(D),Math.abs(ht))&&Math.abs(V-yt)<=ee*Math.max(1,Math.abs(V),Math.abs(yt))&&Math.abs(N-zt)<=ee*Math.max(1,Math.abs(N),Math.abs(zt))&&Math.abs(W-Dt)<=ee*Math.max(1,Math.abs(W),Math.abs(Dt))&&Math.abs(X-Vt)<=ee*Math.max(1,Math.abs(X),Math.abs(Vt))&&Math.abs(J-St)<=ee*Math.max(1,Math.abs(J),Math.abs(St))&&Math.abs(re-Qt)<=ee*Math.max(1,Math.abs(re),Math.abs(Qt))&&Math.abs(pe-cn)<=ee*Math.max(1,Math.abs(pe),Math.abs(cn))&&Math.abs(xe-un)<=ee*Math.max(1,Math.abs(xe),Math.abs(un))},d.c9=function(u,i){return u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},d.cA=function(u){delete se.REGISTERED_PROTOCOLS[u]},d.cB=function(u,i){const l={};for(let g=0;g<u.length;g++){const y=i&&i[u[g].id]||Rc(u[g]);i&&(i[u[g].id]=y);let x=l[y];x||(x=l[y]=[]),x.push(u[g])}const h=[];for(const g in l)h.push(l[g]);return h},d.cC=Yt,d.cD=mw,d.cE=gw,d.cF=Hx,d.cG=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Ee/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const i=u.bucket.layers[0],l=i.layout,h=i._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new mi(u.bucket.zoom+1),u.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new mi(u.bucket.zoom+1),u.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new mi(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=u.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new mi(D),u.canonical),h["text-size"].possiblyEvaluate(new mi(V),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=u.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new mi(D),u.canonical),h["icon-size"].possiblyEvaluate(new mi(V),u.canonical)]}const y=l.get("text-line-height")*or,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",C=l.get("text-keep-upright"),E=l.get("text-size");for(const D of u.bucket.features){const V=l.get("text-font").evaluate(D,{},u.canonical).join(","),N=E.evaluate(D,{},u.canonical),W=g.layoutTextSize.evaluate(D,{},u.canonical),X=g.layoutIconSize.evaluate(D,{},u.canonical),J={horizontal:{},vertical:void 0},re=D.text;let pe,xe=[0,0];if(re){const K=re.toString(),fe=l.get("text-letter-spacing").evaluate(D,{},u.canonical)*or,Ae=hp(K)?fe:0,rt=l.get("text-anchor").evaluate(D,{},u.canonical),Et=Pw(i,D,u.canonical);if(!Et){const Dt=l.get("text-radial-offset").evaluate(D,{},u.canonical);xe=Dt?Tw(rt,[Dt*or,y_]):l.get("text-offset").evaluate(D,{},u.canonical).map(Vt=>Vt*or)}let ht=x?"center":l.get("text-justify").evaluate(D,{},u.canonical);const yt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(D,{},u.canonical)*or:1/0,zt=()=>{u.bucket.allowVerticalPlacement&&Oh(K)&&(J.vertical=Pp(re,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,y,rt,"left",Ae,xe,d.an.vertical,!0,W,N))};if(!x&&Et){const Dt=new Set;if(ht==="auto")for(let St=0;St<Et.values.length;St+=2)Dt.add(b_(Et.values[St]));else Dt.add(ht);let Vt=!1;for(const St of Dt)if(!J.horizontal[St])if(Vt)J.horizontal[St]=J.horizontal[0];else{const Qt=Pp(re,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,y,"center",St,Ae,xe,d.an.horizontal,!1,W,N);Qt&&(J.horizontal[St]=Qt,Vt=Qt.positionedLines.length===1)}zt()}else{ht==="auto"&&(ht=b_(rt));const Dt=Pp(re,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,y,rt,ht,Ae,xe,d.an.horizontal,!1,W,N);Dt&&(J.horizontal[ht]=Dt),zt(),Oh(K)&&x&&C&&(J.vertical=Pp(re,u.glyphMap,u.glyphPositions,u.imagePositions,V,yt,y,rt,ht,Ae,xe,d.an.vertical,!1,W,N))}}let Ne=!1;if(D.icon&&D.icon.name){const K=u.imageMap[D.icon.name];K&&(pe=QA(u.imagePositions[D.icon.name],l.get("icon-offset").evaluate(D,{},u.canonical),l.get("icon-anchor").evaluate(D,{},u.canonical)),Ne=!!K.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Ne:u.bucket.sdfIcons!==Ne&&et("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(K.pixelRatio!==u.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Pe=Aw(J.horizontal)||J.vertical;u.bucket.iconsInText=!!Pe&&Pe.iconsInText,(Pe||pe)&&gE(u.bucket,D,J,pe,u.imageMap,g,W,X,xe,Ne,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},d.cH=r_,d.cI=Jv,d.cJ=i_,d.cK=sf,d.cL=o_,d.cM=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},d.cN=function(u,i,l,h,g){return a(this,void 0,void 0,function*(){if(H())try{return yield Wt(u,i,l,h,g)}catch{}return function(y,x,C,E,D){const V=y.width,N=y.height;tn&&dn||(tn=new OffscreenCanvas(V,N),dn=tn.getContext("2d",{willReadFrequently:!0})),tn.width=V,tn.height=N,dn.drawImage(y,0,0,V,N);const W=dn.getImageData(x,C,E,D);return dn.clearRect(0,0,V,N),W.data}(u,i,l,h,g)})},d.cO=px,d.cP=b,d.cQ=T,d.cR=Dx,d.cS=Gx,d.cT=Ac,d.cU=Is,d.ca=u=>u.type==="symbol",d.cb=u=>u.type==="circle",d.cc=u=>u.type==="heatmap",d.cd=u=>u.type==="line",d.ce=u=>u.type==="fill",d.cf=u=>u.type==="fill-extrusion",d.cg=u=>u.type==="hillshade",d.ch=u=>u.type==="color-relief",d.ci=u=>u.type==="raster",d.cj=u=>u.type==="background",d.ck=u=>u.type==="custom",d.cl=Le,d.cm=function(u,i,l){const h=Se(i.x-l.x,i.y-l.y),g=Se(u.x-l.x,u.y-l.y);var y,x;return Vn(Math.atan2(h[0]*g[1]-h[1]*g[0],(y=h)[0]*(x=g)[0]+y[1]*x[1]))},d.cn=_t,d.co=function(u,i){return Yi[i]&&(u instanceof MouseEvent||u instanceof WheelEvent)},d.cp=function(u,i){return Ni[i]&&"touches"in u},d.cq=function(u){return Ni[u]||Yi[u]},d.cr=function(u,i,l){var h=i[0],g=i[1];return u[0]=l[0]*h+l[4]*g+l[12],u[1]=l[1]*h+l[5]*g+l[13],u},d.cs=function(u,i){const{x:l,y:h}=df.fromLngLat(i);return!(u<0||u>25||h<0||h>=1||l<0||l>=1)},d.ct=function(u,i){return u[0]=i[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=i[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},d.cu=class extends Es{},d.cv=_E,d.cx=function(u){return u.message===Ui},d.cy=ke,d.cz=function(u,i){se.REGISTERED_PROTOCOLS[u]=i},d.d=at,d.e=Ct,d.f=u=>a(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.g=ue,d.h=u=>new Promise((i,l)=>{const h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=sn})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(u)],{type:"image/png"});h.src=u.byteLength?URL.createObjectURL(g):sn}),d.i=dt,d.j=(u,i)=>Ke(Ct(u,{type:"json"}),i),d.k=Qe,d.l=gt,d.m=Ke,d.n=(u,i)=>Ke(Ct(u,{type:"arrayBuffer"}),i),d.o=function(u){return new o_(u).readFields(NA,[])},d.p=qx,d.q=Jh,d.r=Nr,d.s=_n,d.t=Nh,d.u=$n,d.v=$e,d.w=et,d.x=Lv,d.y=au,d.z=nl}),c("worker",["./shared"],function(d){class a{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ue){for(const ke of se){this._layerConfigs[ke.id]=ke;const je=this._layers[ke.id]=d.bI(ke);je._featureFilter=d.a9(je.filter),this.keyCache[ke.id]&&delete this.keyCache[ke.id]}for(const ke of ue)delete this.keyCache[ke],delete this._layerConfigs[ke],delete this._layers[ke];this.familiesBySource={};const me=d.cB(Object.values(this._layerConfigs),this.keyCache);for(const ke of me){const je=ke.map(Qe=>this._layers[Qe.id]),Ke=je[0];if(Ke.visibility==="none")continue;const at=Ke.source||"";let We=this.familiesBySource[at];We||(We=this.familiesBySource[at]={});const xt=Ke.sourceLayer||"_geojsonTileLayer";let gt=We[xt];gt||(gt=We[xt]=[]),gt.push(je)}}}class b{constructor(se){const ue={},me=[];for(const at in se){const We=se[at],xt=ue[at]={};for(const gt in We){const Qe=We[+gt];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const Pt={x:0,y:0,w:Qe.bitmap.width+2,h:Qe.bitmap.height+2};me.push(Pt),xt[gt]={rect:Pt,metrics:Qe.metrics}}}const{w:ke,h:je}=d.p(me),Ke=new d.q({width:ke||1,height:je||1});for(const at in se){const We=se[at];for(const xt in We){const gt=We[+xt];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const Qe=ue[at][xt].rect;d.q.copy(gt.bitmap,Ke,{x:0,y:0},{x:Qe.x+1,y:Qe.y+1},gt.bitmap)}}this.image=Ke,this.positions=ue}}d.cC("GlyphAtlas",b);class k{constructor(se){this.tileID=new d.Z(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[],this.globalState=se.globalState}parse(se,ue,me,ke,je){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new d.a7;const Ke=new d.cD(Object.keys(se.layers).sort()),at=new d.cE(this.tileID,this.promoteId);at.bucketLayerIDs=[];const We={},xt={featureIndex:at,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me,subdivisionGranularity:je},gt=ue.familiesBySource[this.source];for(const gn in gt){const Un=se.layers[gn];if(!Un)continue;Un.version===1&&d.w(`Vector tile source "${this.source}" layer "${gn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ir=Ke.encode(gn),$t=[];for(let pr=0;pr<Un.length;pr++){const yi=Un.feature(pr),Ss=at.getId(yi,gn);$t.push({feature:yi,id:Ss,index:pr,sourceLayerIndex:ir})}for(const pr of gt[gn]){const yi=pr[0];yi.source!==this.source&&d.w(`layer.source = ${yi.source} does not equal this.source = ${this.source}`),yi.minzoom&&this.zoom<Math.floor(yi.minzoom)||yi.maxzoom&&this.zoom>=yi.maxzoom||yi.visibility!=="none"&&(S(pr,this.zoom,me),(We[yi.id]=yi.createBucket({index:at.bucketLayerIDs.length,layers:pr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ir,sourceID:this.source,globalState:this.globalState})).populate($t,xt,this.tileID.canonical),at.bucketLayerIDs.push(pr.map(Ss=>Ss.id)))}}const Qe=d.bM(xt.glyphDependencies,gn=>Object.keys(gn).map(Number));this.inFlightDependencies.forEach(gn=>gn==null?void 0:gn.abort()),this.inFlightDependencies=[];let Pt=Promise.resolve({});if(Object.keys(Qe).length){const gn=new AbortController;this.inFlightDependencies.push(gn),Pt=ke.sendAsync({type:"GG",data:{stacks:Qe,source:this.source,tileID:this.tileID,type:"glyphs"}},gn)}const $e=Object.keys(xt.iconDependencies);let Zt=Promise.resolve({});if($e.length){const gn=new AbortController;this.inFlightDependencies.push(gn),Zt=ke.sendAsync({type:"GI",data:{icons:$e,source:this.source,tileID:this.tileID,type:"icons"}},gn)}const fn=Object.keys(xt.patternDependencies);let Xt=Promise.resolve({});if(fn.length){const gn=new AbortController;this.inFlightDependencies.push(gn),Xt=ke.sendAsync({type:"GI",data:{icons:fn,source:this.source,tileID:this.tileID,type:"patterns"}},gn)}const[ln,vn,ui]=yield Promise.all([Pt,Zt,Xt]),ei=new b(ln),Zn=new d.cF(vn,ui);for(const gn in We){const Un=We[gn];Un instanceof d.a8?(S(Un.layers,this.zoom,me),d.cG({bucket:Un,glyphMap:ln,glyphPositions:ei.positions,imageMap:vn,imagePositions:Zn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:xt.subdivisionGranularity})):Un.hasPattern&&(Un instanceof d.cH||Un instanceof d.cI||Un instanceof d.cJ)&&(S(Un.layers,this.zoom,me),Un.addFeatures(xt,this.tileID.canonical,Zn.patternPositions))}return this.status="done",{buckets:Object.values(We).filter(gn=>!gn.isEmpty()),featureIndex:at,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ei.image,imageAtlas:Zn,glyphMap:this.returnDependencies?ln:null,iconMap:this.returnDependencies?vn:null,glyphPositions:this.returnDependencies?ei.positions:null}})}}function S(He,se,ue){const me=new d.F(se);for(const ke of He)ke.recalculate(me,ue)}class T{constructor(se,ue,me){this.actor=se,this.layerIndex=ue,this.availableImages=me,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ue){return d._(this,void 0,void 0,function*(){const me=yield d.n(se.request,ue);try{return{vectorTile:new d.cK.VectorTile(new d.cL(me.data)),rawData:me.data,cacheControl:me.cacheControl,expires:me.expires}}catch(ke){const je=new Uint8Array(me.data);let Ke=`Unable to parse the tile at ${se.request.url}, `;throw Ke+=je[0]===31&&je[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ke.message}`,new Error(Ke)}})}loadTile(se){return d._(this,void 0,void 0,function*(){const ue=se.uid,me=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.cM(se.request),ke=new k(se);this.loading[ue]=ke;const je=new AbortController;ke.abort=je;try{const Ke=yield this.loadVectorTile(se,je);if(delete this.loading[ue],!Ke)return null;const at=Ke.rawData,We={};Ke.expires&&(We.expires=Ke.expires),Ke.cacheControl&&(We.cacheControl=Ke.cacheControl);const xt={};if(me){const Qe=me.finish();Qe&&(xt.resourceTiming=JSON.parse(JSON.stringify(Qe)))}ke.vectorTile=Ke.vectorTile;const gt=ke.parse(Ke.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[ue]=ke,this.fetching[ue]={rawTileData:at,cacheControl:We,resourceTiming:xt};try{const Qe=yield gt;return d.e({rawTileData:at.slice(0)},Qe,We,xt)}finally{delete this.fetching[ue]}}catch(Ke){throw delete this.loading[ue],ke.status="done",this.loaded[ue]=ke,Ke}})}reloadTile(se){return d._(this,void 0,void 0,function*(){const ue=se.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const me=this.loaded[ue];if(me.showCollisionBoxes=se.showCollisionBoxes,me.globalState=se.globalState,me.status==="parsing"){const ke=yield me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let je;if(this.fetching[ue]){const{rawTileData:Ke,cacheControl:at,resourceTiming:We}=this.fetching[ue];delete this.fetching[ue],je=d.e({rawTileData:Ke.slice(0)},ke,at,We)}else je=ke;return je}if(me.status==="done"&&me.vectorTile)return me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return d._(this,void 0,void 0,function*(){const ue=this.loading,me=se.uid;ue&&ue[me]&&ue[me].abort&&(ue[me].abort.abort(),delete ue[me])})}removeTile(se){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class A{constructor(){this.loaded={}}loadTile(se){return d._(this,void 0,void 0,function*(){const{uid:ue,encoding:me,rawImageData:ke,redFactor:je,greenFactor:Ke,blueFactor:at,baseShift:We}=se,xt=ke.width+2,gt=ke.height+2,Qe=d.b(ke)?new d.R({width:xt,height:gt},yield d.cN(ke,-1,-1,xt,gt)):ke,Pt=new d.cO(ue,Qe,me,je,Ke,at,We);return this.loaded=this.loaded||{},this.loaded[ue]=Pt,Pt})}removeTile(se){const ue=this.loaded,me=se.uid;ue&&ue[me]&&delete ue[me]}}var P,R,B=function(){if(R)return P;function He(ue,me){if(ue.length!==0){se(ue[0],me);for(var ke=1;ke<ue.length;ke++)se(ue[ke],!me)}}function se(ue,me){for(var ke=0,je=0,Ke=0,at=ue.length,We=at-1;Ke<at;We=Ke++){var xt=(ue[Ke][0]-ue[We][0])*(ue[We][1]+ue[Ke][1]),gt=ke+xt;je+=Math.abs(ke)>=Math.abs(xt)?ke-gt+xt:xt-gt+ke,ke=gt}ke+je>=0!=!!me&&ue.reverse()}return R=1,P=function ue(me,ke){var je,Ke=me&&me.type;if(Ke==="FeatureCollection")for(je=0;je<me.features.length;je++)ue(me.features[je],ke);else if(Ke==="GeometryCollection")for(je=0;je<me.geometries.length;je++)ue(me.geometries[je],ke);else if(Ke==="Feature")ue(me.geometry,ke);else if(Ke==="Polygon")He(me.coordinates,ke);else if(Ke==="MultiPolygon")for(je=0;je<me.coordinates.length;je++)He(me.coordinates[je],ke);return me}}(),L=d.cP(B);const $=d.cK.VectorTileFeature.prototype.toGeoJSON;class j{constructor(se){this._feature=se,this.extent=d.$,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const ue of this._feature.geometry)se.push([new d.P(ue[0],ue[1])]);return se}{const se=[];for(const ue of this._feature.geometry){const me=[];for(const ke of ue)me.push(new d.P(ke[0],ke[1]));se.push(me)}return se}}toGeoJSON(se,ue,me){return $.call(this,se,ue,me)}}class q{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.$,this.length=se.length,this._features=se}feature(se){return new j(this._features[se])}}var H,ee,Q,oe={exports:{}},le=function(){if(Q)return oe.exports;Q=1;var He=d.cS(),se=function(){if(ee)return H;ee=1;var gt=d.cQ(),Qe=d.cR().VectorTileFeature;function Pt(Zt,fn){this.options=fn||{},this.features=Zt,this.length=Zt.length}function $e(Zt,fn){this.id=typeof Zt.id=="number"?Zt.id:void 0,this.type=Zt.type,this.rawGeometry=Zt.type===1?[Zt.geometry]:Zt.geometry,this.properties=Zt.tags,this.extent=fn||4096}return H=Pt,Pt.prototype.feature=function(Zt){return new $e(this.features[Zt],this.options.extent)},$e.prototype.loadGeometry=function(){var Zt=this.rawGeometry;this.geometry=[];for(var fn=0;fn<Zt.length;fn++){for(var Xt=Zt[fn],ln=[],vn=0;vn<Xt.length;vn++)ln.push(new gt(Xt[vn][0],Xt[vn][1]));this.geometry.push(ln)}return this.geometry},$e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Zt=this.geometry,fn=1/0,Xt=-1/0,ln=1/0,vn=-1/0,ui=0;ui<Zt.length;ui++)for(var ei=Zt[ui],Zn=0;Zn<ei.length;Zn++){var gn=ei[Zn];fn=Math.min(fn,gn.x),Xt=Math.max(Xt,gn.x),ln=Math.min(ln,gn.y),vn=Math.max(vn,gn.y)}return[fn,ln,Xt,vn]},$e.prototype.toGeoJSON=Qe.prototype.toGeoJSON,H}();function ue(gt){var Qe=new He;return function(Pt,$e){for(var Zt in Pt.layers)$e.writeMessage(3,me,Pt.layers[Zt])}(gt,Qe),Qe.finish()}function me(gt,Qe){var Pt;Qe.writeVarintField(15,gt.version||1),Qe.writeStringField(1,gt.name||""),Qe.writeVarintField(5,gt.extent||4096);var $e={keys:[],values:[],keycache:{},valuecache:{}};for(Pt=0;Pt<gt.length;Pt++)$e.feature=gt.feature(Pt),Qe.writeMessage(2,ke,$e);var Zt=$e.keys;for(Pt=0;Pt<Zt.length;Pt++)Qe.writeStringField(3,Zt[Pt]);var fn=$e.values;for(Pt=0;Pt<fn.length;Pt++)Qe.writeMessage(4,xt,fn[Pt])}function ke(gt,Qe){var Pt=gt.feature;Pt.id!==void 0&&Qe.writeVarintField(1,Pt.id),Qe.writeMessage(2,je,gt),Qe.writeVarintField(3,Pt.type),Qe.writeMessage(4,We,Pt)}function je(gt,Qe){var Pt=gt.feature,$e=gt.keys,Zt=gt.values,fn=gt.keycache,Xt=gt.valuecache;for(var ln in Pt.properties){var vn=Pt.properties[ln],ui=fn[ln];if(vn!==null){ui===void 0&&($e.push(ln),fn[ln]=ui=$e.length-1),Qe.writeVarint(ui);var ei=typeof vn;ei!=="string"&&ei!=="boolean"&&ei!=="number"&&(vn=JSON.stringify(vn));var Zn=ei+":"+vn,gn=Xt[Zn];gn===void 0&&(Zt.push(vn),Xt[Zn]=gn=Zt.length-1),Qe.writeVarint(gn)}}}function Ke(gt,Qe){return(Qe<<3)+(7&gt)}function at(gt){return gt<<1^gt>>31}function We(gt,Qe){for(var Pt=gt.loadGeometry(),$e=gt.type,Zt=0,fn=0,Xt=Pt.length,ln=0;ln<Xt;ln++){var vn=Pt[ln],ui=1;$e===1&&(ui=vn.length),Qe.writeVarint(Ke(1,ui));for(var ei=$e===3?vn.length-1:vn.length,Zn=0;Zn<ei;Zn++){Zn===1&&$e!==1&&Qe.writeVarint(Ke(2,ei-1));var gn=vn[Zn].x-Zt,Un=vn[Zn].y-fn;Qe.writeVarint(at(gn)),Qe.writeVarint(at(Un)),Zt+=gn,fn+=Un}$e===3&&Qe.writeVarint(Ke(7,1))}}function xt(gt,Qe){var Pt=typeof gt;Pt==="string"?Qe.writeStringField(1,gt):Pt==="boolean"?Qe.writeBooleanField(7,gt):Pt==="number"&&(gt%1!=0?Qe.writeDoubleField(3,gt):gt<0?Qe.writeSVarintField(6,gt):Qe.writeVarintField(5,gt))}return oe.exports=ue,oe.exports.fromVectorTileJs=ue,oe.exports.fromGeojsonVt=function(gt,Qe){Qe=Qe||{};var Pt={};for(var $e in gt)Pt[$e]=new se(gt[$e].features,Qe),Pt[$e].name=$e,Pt[$e].version=Qe.version,Pt[$e].extent=Qe.extent;return ue({layers:Pt})},oe.exports.GeoJSONWrapper=se,oe.exports}(),ce=d.cP(le);const he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:He=>He},ve=Math.fround||(ie=new Float32Array(1),He=>(ie[0]=+He,ie[0]));var ie;class be{constructor(se){this.options=Object.assign(Object.create(he),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ue,minZoom:me,maxZoom:ke}=this.options;ue&&console.time("total time");const je=`prepare ${se.length} points`;ue&&console.time(je),this.points=se;const Ke=[];for(let We=0;We<se.length;We++){const xt=se[We];if(!xt.geometry)continue;const[gt,Qe]=xt.geometry.coordinates,Pt=ve(Fe(gt)),$e=ve(Ze(Qe));Ke.push(Pt,$e,1/0,We,-1,1),this.options.reduce&&Ke.push(0)}let at=this.trees[ke+1]=this._createTree(Ke);ue&&console.timeEnd(je);for(let We=ke;We>=me;We--){const xt=+Date.now();at=this.trees[We]=this._createTree(this._cluster(at,We)),ue&&console.log("z%d: %d clusters in %dms",We,at.numItems,+Date.now()-xt)}return ue&&console.timeEnd("total time"),this}getClusters(se,ue){let me=((se[0]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,se[1]));let je=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)me=-180,je=180;else if(me>je){const Qe=this.getClusters([me,ke,180,Ke],ue),Pt=this.getClusters([-180,ke,je,Ke],ue);return Qe.concat(Pt)}const at=this.trees[this._limitZoom(ue)],We=at.range(Fe(me),Ze(Ke),Fe(je),Ze(ke)),xt=at.data,gt=[];for(const Qe of We){const Pt=this.stride*Qe;gt.push(xt[Pt+5]>1?Be(xt,Pt,this.clusterProps):this.points[xt[Pt+3]])}return gt}getChildren(se){const ue=this._getOriginId(se),me=this._getOriginZoom(se),ke="No cluster with the specified id.",je=this.trees[me];if(!je)throw new Error(ke);const Ke=je.data;if(ue*this.stride>=Ke.length)throw new Error(ke);const at=this.options.radius/(this.options.extent*Math.pow(2,me-1)),We=je.within(Ke[ue*this.stride],Ke[ue*this.stride+1],at),xt=[];for(const gt of We){const Qe=gt*this.stride;Ke[Qe+4]===se&&xt.push(Ke[Qe+5]>1?Be(Ke,Qe,this.clusterProps):this.points[Ke[Qe+3]])}if(xt.length===0)throw new Error(ke);return xt}getLeaves(se,ue,me){const ke=[];return this._appendLeaves(ke,se,ue=ue||10,me=me||0,0),ke}getTile(se,ue,me){const ke=this.trees[this._limitZoom(se)],je=Math.pow(2,se),{extent:Ke,radius:at}=this.options,We=at/Ke,xt=(me-We)/je,gt=(me+1+We)/je,Qe={features:[]};return this._addTileFeatures(ke.range((ue-We)/je,xt,(ue+1+We)/je,gt),ke.data,ue,me,je,Qe),ue===0&&this._addTileFeatures(ke.range(1-We/je,xt,1,gt),ke.data,je,me,je,Qe),ue===je-1&&this._addTileFeatures(ke.range(0,xt,We/je,gt),ke.data,-1,me,je,Qe),Qe.features.length?Qe:null}getClusterExpansionZoom(se){let ue=this._getOriginZoom(se)-1;for(;ue<=this.options.maxZoom;){const me=this.getChildren(se);if(ue++,me.length!==1)break;se=me[0].properties.cluster_id}return ue}_appendLeaves(se,ue,me,ke,je){const Ke=this.getChildren(ue);for(const at of Ke){const We=at.properties;if(We&&We.cluster?je+We.point_count<=ke?je+=We.point_count:je=this._appendLeaves(se,We.cluster_id,me,ke,je):je<ke?je++:se.push(at),se.length===me)break}return je}_createTree(se){const ue=new d.aH(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<se.length;me+=this.stride)ue.add(se[me],se[me+1]);return ue.finish(),ue.data=se,ue}_addTileFeatures(se,ue,me,ke,je,Ke){for(const at of se){const We=at*this.stride,xt=ue[We+5]>1;let gt,Qe,Pt;if(xt)gt=De(ue,We,this.clusterProps),Qe=ue[We],Pt=ue[We+1];else{const fn=this.points[ue[We+3]];gt=fn.properties;const[Xt,ln]=fn.geometry.coordinates;Qe=Fe(Xt),Pt=Ze(ln)}const $e={type:1,geometry:[[Math.round(this.options.extent*(Qe*je-me)),Math.round(this.options.extent*(Pt*je-ke))]],tags:gt};let Zt;Zt=xt||this.options.generateId?ue[We+3]:this.points[ue[We+3]].id,Zt!==void 0&&($e.id=Zt),Ke.features.push($e)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ue){const{radius:me,extent:ke,reduce:je,minPoints:Ke}=this.options,at=me/(ke*Math.pow(2,ue)),We=se.data,xt=[],gt=this.stride;for(let Qe=0;Qe<We.length;Qe+=gt){if(We[Qe+2]<=ue)continue;We[Qe+2]=ue;const Pt=We[Qe],$e=We[Qe+1],Zt=se.within(We[Qe],We[Qe+1],at),fn=We[Qe+5];let Xt=fn;for(const ln of Zt){const vn=ln*gt;We[vn+2]>ue&&(Xt+=We[vn+5])}if(Xt>fn&&Xt>=Ke){let ln,vn=Pt*fn,ui=$e*fn,ei=-1;const Zn=(Qe/gt<<5)+(ue+1)+this.points.length;for(const gn of Zt){const Un=gn*gt;if(We[Un+2]<=ue)continue;We[Un+2]=ue;const ir=We[Un+5];vn+=We[Un]*ir,ui+=We[Un+1]*ir,We[Un+4]=Zn,je&&(ln||(ln=this._map(We,Qe,!0),ei=this.clusterProps.length,this.clusterProps.push(ln)),je(ln,this._map(We,Un)))}We[Qe+4]=Zn,xt.push(vn/Xt,ui/Xt,1/0,Zn,-1,Xt),je&&xt.push(ei)}else{for(let ln=0;ln<gt;ln++)xt.push(We[Qe+ln]);if(Xt>1)for(const ln of Zt){const vn=ln*gt;if(!(We[vn+2]<=ue)){We[vn+2]=ue;for(let ui=0;ui<gt;ui++)xt.push(We[vn+ui])}}}}return xt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ue,me){if(se[ue+5]>1){const Ke=this.clusterProps[se[ue+6]];return me?Object.assign({},Ke):Ke}const ke=this.points[se[ue+3]].properties,je=this.options.map(ke);return me&&je===ke?Object.assign({},je):je}}function Be(He,se,ue){return{type:"Feature",id:He[se+3],properties:De(He,se,ue),geometry:{type:"Point",coordinates:[(me=He[se],360*(me-.5)),mt(He[se+1])]}};var me}function De(He,se,ue){const me=He[se+5],ke=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,je=He[se+6],Ke=je===-1?{}:Object.assign({},ue[je]);return Object.assign(Ke,{cluster:!0,cluster_id:He[se+3],point_count:me,point_count_abbreviated:ke})}function Fe(He){return He/360+.5}function Ze(He){const se=Math.sin(He*Math.PI/180),ue=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ue<0?0:ue>1?1:ue}function mt(He){const se=(180-360*He)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function pt(He,se,ue,me){let ke=me;const je=se+(ue-se>>1);let Ke,at=ue-se;const We=He[se],xt=He[se+1],gt=He[ue],Qe=He[ue+1];for(let Pt=se+3;Pt<ue;Pt+=3){const $e=Ve(He[Pt],He[Pt+1],We,xt,gt,Qe);if($e>ke)Ke=Pt,ke=$e;else if($e===ke){const Zt=Math.abs(Pt-je);Zt<at&&(Ke=Pt,at=Zt)}}ke>me&&(Ke-se>3&&pt(He,se,Ke,me),He[Ke+2]=ke,ue-Ke>3&&pt(He,Ke,ue,me))}function Ve(He,se,ue,me,ke,je){let Ke=ke-ue,at=je-me;if(Ke!==0||at!==0){const We=((He-ue)*Ke+(se-me)*at)/(Ke*Ke+at*at);We>1?(ue=ke,me=je):We>0&&(ue+=Ke*We,me+=at*We)}return Ke=He-ue,at=se-me,Ke*Ke+at*at}function Se(He,se,ue,me){const ke={id:He??null,type:se,geometry:ue,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Ee(ke,ue);else if(se==="Polygon")Ee(ke,ue[0]);else if(se==="MultiLineString")for(const je of ue)Ee(ke,je);else if(se==="MultiPolygon")for(const je of ue)Ee(ke,je[0]);return ke}function Ee(He,se){for(let ue=0;ue<se.length;ue+=3)He.minX=Math.min(He.minX,se[ue]),He.minY=Math.min(He.minY,se[ue+1]),He.maxX=Math.max(He.maxX,se[ue]),He.maxY=Math.max(He.maxY,se[ue+1])}function tt(He,se,ue,me){if(!se.geometry)return;const ke=se.geometry.coordinates;if(ke&&ke.length===0)return;const je=se.geometry.type,Ke=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2);let at=[],We=se.id;if(ue.promoteId?We=se.properties[ue.promoteId]:ue.generateId&&(We=me||0),je==="Point")Nt(ke,at);else if(je==="MultiPoint")for(const xt of ke)Nt(xt,at);else if(je==="LineString")kt(ke,at,Ke,!1);else if(je==="MultiLineString"){if(ue.lineMetrics){for(const xt of ke)at=[],kt(xt,at,Ke,!1),He.push(Se(We,"LineString",at,se.properties));return}wt(ke,at,Ke,!1)}else if(je==="Polygon")wt(ke,at,Ke,!0);else{if(je!=="MultiPolygon"){if(je==="GeometryCollection"){for(const xt of se.geometry.geometries)tt(He,{id:We,geometry:xt,properties:se.properties},ue,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const xt of ke){const gt=[];wt(xt,gt,Ke,!0),at.push(gt)}}He.push(Se(We,je,at,se.properties))}function Nt(He,se){se.push(Le(He[0]),_t(He[1]),0)}function kt(He,se,ue,me){let ke,je,Ke=0;for(let We=0;We<He.length;We++){const xt=Le(He[We][0]),gt=_t(He[We][1]);se.push(xt,gt,0),We>0&&(Ke+=me?(ke*gt-xt*je)/2:Math.sqrt(Math.pow(xt-ke,2)+Math.pow(gt-je,2))),ke=xt,je=gt}const at=se.length-3;se[2]=1,pt(se,0,at,ue),se[at+2]=1,se.size=Math.abs(Ke),se.start=0,se.end=se.size}function wt(He,se,ue,me){for(let ke=0;ke<He.length;ke++){const je=[];kt(He[ke],je,ue,me),se.push(je)}}function Le(He){return He/360+.5}function _t(He){const se=Math.sin(He*Math.PI/180),ue=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ue<0?0:ue>1?1:ue}function ot(He,se,ue,me,ke,je,Ke,at){if(me/=se,je>=(ue/=se)&&Ke<me)return He;if(Ke<ue||je>=me)return null;const We=[];for(const xt of He){const gt=xt.geometry;let Qe=xt.type;const Pt=ke===0?xt.minX:xt.minY,$e=ke===0?xt.maxX:xt.maxY;if(Pt>=ue&&$e<me){We.push(xt);continue}if($e<ue||Pt>=me)continue;let Zt=[];if(Qe==="Point"||Qe==="MultiPoint")Je(gt,Zt,ue,me,ke);else if(Qe==="LineString")Ct(gt,Zt,ue,me,ke,!1,at.lineMetrics);else if(Qe==="MultiLineString")de(gt,Zt,ue,me,ke,!1);else if(Qe==="Polygon")de(gt,Zt,ue,me,ke,!0);else if(Qe==="MultiPolygon")for(const fn of gt){const Xt=[];de(fn,Xt,ue,me,ke,!0),Xt.length&&Zt.push(Xt)}if(Zt.length){if(at.lineMetrics&&Qe==="LineString"){for(const fn of Zt)We.push(Se(xt.id,Qe,fn,xt.tags));continue}Qe!=="LineString"&&Qe!=="MultiLineString"||(Zt.length===1?(Qe="LineString",Zt=Zt[0]):Qe="MultiLineString"),Qe!=="Point"&&Qe!=="MultiPoint"||(Qe=Zt.length===3?"Point":"MultiPoint"),We.push(Se(xt.id,Qe,Zt,xt.tags))}}return We.length?We:null}function Je(He,se,ue,me,ke){for(let je=0;je<He.length;je+=3){const Ke=He[je+ke];Ke>=ue&&Ke<=me&&ze(se,He[je],He[je+1],He[je+2])}}function Ct(He,se,ue,me,ke,je,Ke){let at=ae(He);const We=ke===0?Ye:ct;let xt,gt,Qe=He.start;for(let Xt=0;Xt<He.length-3;Xt+=3){const ln=He[Xt],vn=He[Xt+1],ui=He[Xt+2],ei=He[Xt+3],Zn=He[Xt+4],gn=ke===0?ln:vn,Un=ke===0?ei:Zn;let ir=!1;Ke&&(xt=Math.sqrt(Math.pow(ln-ei,2)+Math.pow(vn-Zn,2))),gn<ue?Un>ue&&(gt=We(at,ln,vn,ei,Zn,ue),Ke&&(at.start=Qe+xt*gt)):gn>me?Un<me&&(gt=We(at,ln,vn,ei,Zn,me),Ke&&(at.start=Qe+xt*gt)):ze(at,ln,vn,ui),Un<ue&&gn>=ue&&(gt=We(at,ln,vn,ei,Zn,ue),ir=!0),Un>me&&gn<=me&&(gt=We(at,ln,vn,ei,Zn,me),ir=!0),!je&&ir&&(Ke&&(at.end=Qe+xt*gt),se.push(at),at=ae(He)),Ke&&(Qe+=xt)}let Pt=He.length-3;const $e=He[Pt],Zt=He[Pt+1],fn=ke===0?$e:Zt;fn>=ue&&fn<=me&&ze(at,$e,Zt,He[Pt+2]),Pt=at.length-3,je&&Pt>=3&&(at[Pt]!==at[0]||at[Pt+1]!==at[1])&&ze(at,at[0],at[1],at[2]),at.length&&se.push(at)}function ae(He){const se=[];return se.size=He.size,se.start=He.start,se.end=He.end,se}function de(He,se,ue,me,ke,je){for(const Ke of He)Ct(Ke,se,ue,me,ke,je,!1)}function ze(He,se,ue,me){He.push(se,ue,me)}function Ye(He,se,ue,me,ke,je){const Ke=(je-se)/(me-se);return ze(He,je,ue+(ke-ue)*Ke,1),Ke}function ct(He,se,ue,me,ke,je){const Ke=(je-ue)/(ke-ue);return ze(He,se+(me-se)*Ke,je,1),Ke}function et(He,se){const ue=[];for(let me=0;me<He.length;me++){const ke=He[me],je=ke.type;let Ke;if(je==="Point"||je==="MultiPoint"||je==="LineString")Ke=It(ke.geometry,se);else if(je==="MultiLineString"||je==="Polygon"){Ke=[];for(const at of ke.geometry)Ke.push(It(at,se))}else if(je==="MultiPolygon"){Ke=[];for(const at of ke.geometry){const We=[];for(const xt of at)We.push(It(xt,se));Ke.push(We)}}ue.push(Se(ke.id,je,Ke,ke.tags))}return ue}function It(He,se){const ue=[];ue.size=He.size,He.start!==void 0&&(ue.start=He.start,ue.end=He.end);for(let me=0;me<He.length;me+=3)ue.push(He[me]+se,He[me+1],He[me+2]);return ue}function dt(He,se){if(He.transformed)return He;const ue=1<<He.z,me=He.x,ke=He.y;for(const je of He.features){const Ke=je.geometry,at=je.type;if(je.geometry=[],at===1)for(let We=0;We<Ke.length;We+=2)je.geometry.push(Lt(Ke[We],Ke[We+1],se,ue,me,ke));else for(let We=0;We<Ke.length;We++){const xt=[];for(let gt=0;gt<Ke[We].length;gt+=2)xt.push(Lt(Ke[We][gt],Ke[We][gt+1],se,ue,me,ke));je.geometry.push(xt)}}return He.transformed=!0,He}function Lt(He,se,ue,me,ke,je){return[Math.round(ue*(He*me-ke)),Math.round(ue*(se*me-je))]}function At(He,se,ue,me,ke){const je=se===ke.maxZoom?0:ke.tolerance/((1<<se)*ke.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:He.length,source:null,x:ue,y:me,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const at of He)sn(Ke,at,je,ke);return Ke}function sn(He,se,ue,me){const ke=se.geometry,je=se.type,Ke=[];if(He.minX=Math.min(He.minX,se.minX),He.minY=Math.min(He.minY,se.minY),He.maxX=Math.max(He.maxX,se.maxX),He.maxY=Math.max(He.maxY,se.maxY),je==="Point"||je==="MultiPoint")for(let at=0;at<ke.length;at+=3)Ke.push(ke[at],ke[at+1]),He.numPoints++,He.numSimplified++;else if(je==="LineString")Wt(Ke,ke,He,ue,!1,!1);else if(je==="MultiLineString"||je==="Polygon")for(let at=0;at<ke.length;at++)Wt(Ke,ke[at],He,ue,je==="Polygon",at===0);else if(je==="MultiPolygon")for(let at=0;at<ke.length;at++){const We=ke[at];for(let xt=0;xt<We.length;xt++)Wt(Ke,We[xt],He,ue,!0,xt===0)}if(Ke.length){let at=se.tags||null;if(je==="LineString"&&me.lineMetrics){at={};for(const xt in se.tags)at[xt]=se.tags[xt];at.mapbox_clip_start=ke.start/ke.size,at.mapbox_clip_end=ke.end/ke.size}const We={geometry:Ke,type:je==="Polygon"||je==="MultiPolygon"?3:je==="LineString"||je==="MultiLineString"?2:1,tags:at};se.id!==null&&(We.id=se.id),He.features.push(We)}}function Wt(He,se,ue,me,ke,je){const Ke=me*me;if(me>0&&se.size<(ke?Ke:me))return void(ue.numPoints+=se.length/3);const at=[];for(let We=0;We<se.length;We+=3)(me===0||se[We+2]>Ke)&&(ue.numSimplified++,at.push(se[We],se[We+1])),ue.numPoints++;ke&&function(We,xt){let gt=0;for(let Qe=0,Pt=We.length,$e=Pt-2;Qe<Pt;$e=Qe,Qe+=2)gt+=(We[Qe]-We[$e])*(We[Qe+1]+We[$e+1]);if(gt>0===xt)for(let Qe=0,Pt=We.length;Qe<Pt/2;Qe+=2){const $e=We[Qe],Zt=We[Qe+1];We[Qe]=We[Pt-2-Qe],We[Qe+1]=We[Pt-1-Qe],We[Pt-2-Qe]=$e,We[Pt-1-Qe]=Zt}}(at,je),He.push(at)}const tn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class dn{constructor(se,ue){const me=(ue=this.options=function(je,Ke){for(const at in Ke)je[at]=Ke[at];return je}(Object.create(tn),ue)).debug;if(me&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let ke=function(je,Ke){const at=[];if(je.type==="FeatureCollection")for(let We=0;We<je.features.length;We++)tt(at,je.features[We],Ke,We);else tt(at,je.type==="Feature"?je:{geometry:je},Ke);return at}(se,ue);this.tiles={},this.tileCoords=[],me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ke=function(je,Ke){const at=Ke.buffer/Ke.extent;let We=je;const xt=ot(je,1,-1-at,at,0,-1,2,Ke),gt=ot(je,1,1-at,2+at,0,-1,2,Ke);return(xt||gt)&&(We=ot(je,1,-at,1+at,0,-1,2,Ke)||[],xt&&(We=et(xt,1).concat(We)),gt&&(We=We.concat(et(gt,-1)))),We}(ke,ue),ke.length&&this.splitTile(ke,0,0,0),me&&(ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ue,me,ke,je,Ke,at){const We=[se,ue,me,ke],xt=this.options,gt=xt.debug;for(;We.length;){ke=We.pop(),me=We.pop(),ue=We.pop(),se=We.pop();const Qe=1<<ue,Pt=_n(ue,me,ke);let $e=this.tiles[Pt];if(!$e&&(gt>1&&console.time("creation"),$e=this.tiles[Pt]=At(se,ue,me,ke,xt),this.tileCoords.push({z:ue,x:me,y:ke}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,me,ke,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));const ir=`z${ue}`;this.stats[ir]=(this.stats[ir]||0)+1,this.total++}if($e.source=se,je==null){if(ue===xt.indexMaxZoom||$e.numPoints<=xt.indexMaxPoints)continue}else{if(ue===xt.maxZoom||ue===je)continue;if(je!=null){const ir=je-ue;if(me!==Ke>>ir||ke!==at>>ir)continue}}if($e.source=null,se.length===0)continue;gt>1&&console.time("clipping");const Zt=.5*xt.buffer/xt.extent,fn=.5-Zt,Xt=.5+Zt,ln=1+Zt;let vn=null,ui=null,ei=null,Zn=null,gn=ot(se,Qe,me-Zt,me+Xt,0,$e.minX,$e.maxX,xt),Un=ot(se,Qe,me+fn,me+ln,0,$e.minX,$e.maxX,xt);se=null,gn&&(vn=ot(gn,Qe,ke-Zt,ke+Xt,1,$e.minY,$e.maxY,xt),ui=ot(gn,Qe,ke+fn,ke+ln,1,$e.minY,$e.maxY,xt),gn=null),Un&&(ei=ot(Un,Qe,ke-Zt,ke+Xt,1,$e.minY,$e.maxY,xt),Zn=ot(Un,Qe,ke+fn,ke+ln,1,$e.minY,$e.maxY,xt),Un=null),gt>1&&console.timeEnd("clipping"),We.push(vn||[],ue+1,2*me,2*ke),We.push(ui||[],ue+1,2*me,2*ke+1),We.push(ei||[],ue+1,2*me+1,2*ke),We.push(Zn||[],ue+1,2*me+1,2*ke+1)}}getTile(se,ue,me){se=+se,ue=+ue,me=+me;const ke=this.options,{extent:je,debug:Ke}=ke;if(se<0||se>24)return null;const at=1<<se,We=_n(se,ue=ue+at&at-1,me);if(this.tiles[We])return dt(this.tiles[We],je);Ke>1&&console.log("drilling down to z%d-%d-%d",se,ue,me);let xt,gt=se,Qe=ue,Pt=me;for(;!xt&&gt>0;)gt--,Qe>>=1,Pt>>=1,xt=this.tiles[_n(gt,Qe,Pt)];return xt&&xt.source?(Ke>1&&(console.log("found parent tile z%d-%d-%d",gt,Qe,Pt),console.time("drilling down")),this.splitTile(xt.source,gt,Qe,Pt,se,ue,me),Ke>1&&console.timeEnd("drilling down"),this.tiles[We]?dt(this.tiles[We],je):null):null}}function _n(He,se,ue){return 32*((1<<He)*ue+se)+He}function Dn(He,se){return se?He.properties[se]:He.id}function Vn(He,se){if(He==null)return!0;if(He.type==="Feature")return Dn(He,se)!=null;if(He.type==="FeatureCollection"){const ue=new Set;for(const me of He.features){const ke=Dn(me,se);if(ke==null||ue.has(ke))return!1;ue.add(ke)}return!0}return!1}function Ni(He,se){const ue=new Map;if(He!=null)if(He.type==="Feature")ue.set(Dn(He,se),He);else for(const me of He.features)ue.set(Dn(me,se),me);return ue}class Yi extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ue){return d._(this,void 0,void 0,function*(){const me=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ke=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!ke)return null;const je=new q(ke.features);let Ke=ce(je);return Ke.byteOffset===0&&Ke.byteLength===Ke.buffer.byteLength||(Ke=new Uint8Array(Ke)),{vectorTile:je,rawData:Ke.buffer}})}loadData(se){return d._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const me=!!(se&&se.request&&se.request.collectResourceTiming)&&new d.cM(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new be(function({superclusterOptions:Ke,clusterProperties:at}){if(!at||!Ke)return Ke;const We={},xt={},gt={accumulated:null,zoom:0},Qe={properties:null},Pt=Object.keys(at);for(const $e of Pt){const[Zt,fn]=at[$e],Xt=d.cT(fn),ln=d.cT(typeof Zt=="string"?[Zt,["accumulated"],["get",$e]]:Zt);We[$e]=Xt.value,xt[$e]=ln.value}return Ke.map=$e=>{Qe.properties=$e;const Zt={};for(const fn of Pt)Zt[fn]=We[fn].evaluate(gt,Qe);return Zt},Ke.reduce=($e,Zt)=>{Qe.properties=Zt;for(const fn of Pt)gt.accumulated=$e[fn],$e[fn]=xt[fn].evaluate(gt,Qe)},Ke}(se)).load((yield this._pendingData).features):(ke=yield this._pendingData,new dn(ke,se.geojsonVtOptions)),this.loaded={};const je={};if(me){const Ke=me.finish();Ke&&(je.resourceTiming={},je.resourceTiming[se.source]=JSON.parse(JSON.stringify(Ke)))}return je}catch(je){if(delete this._pendingRequest,d.cx(je))return{abandoned:!0};throw je}var ke})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ue=this.loaded;return ue&&ue[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ue){return d._(this,void 0,void 0,function*(){let me=yield this.loadGeoJSON(se,ue);if(delete this._pendingRequest,typeof me!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(L(me,!0),se.filter){const ke=d.cT(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ke.result==="error")throw new Error(ke.value.map(Ke=>`${Ke.key}: ${Ke.message}`).join(", "));me={type:"FeatureCollection",features:me.features.filter(Ke=>ke.value.evaluate({zoom:0},Ke))}}return me})}loadGeoJSON(se,ue){return d._(this,void 0,void 0,function*(){const{promoteId:me}=se;if(se.request){const ke=yield d.j(se.request,ue);return this._dataUpdateable=Vn(ke.data,me)?Ni(ke.data,me):void 0,ke.data}if(typeof se.data=="string")try{const ke=JSON.parse(se.data);return this._dataUpdateable=Vn(ke,me)?Ni(ke,me):void 0,ke}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(ke,je,Ke){var at,We,xt,gt;if(je.removeAll&&ke.clear(),je.remove)for(const Qe of je.remove)ke.delete(Qe);if(je.add)for(const Qe of je.add){const Pt=Dn(Qe,Ke);Pt!=null&&ke.set(Pt,Qe)}if(je.update)for(const Qe of je.update){let Pt=ke.get(Qe.id);if(Pt==null)continue;const $e=!Qe.removeAllProperties&&(((at=Qe.removeProperties)===null||at===void 0?void 0:at.length)>0||((We=Qe.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0);if((Qe.newGeometry||Qe.removeAllProperties||$e)&&(Pt=Object.assign({},Pt),ke.set(Qe.id,Pt),$e&&(Pt.properties=Object.assign({},Pt.properties))),Qe.newGeometry&&(Pt.geometry=Qe.newGeometry),Qe.removeAllProperties)Pt.properties={};else if(((xt=Qe.removeProperties)===null||xt===void 0?void 0:xt.length)>0)for(const Zt of Qe.removeProperties)Object.prototype.hasOwnProperty.call(Pt.properties,Zt)&&delete Pt.properties[Zt];if(((gt=Qe.addOrUpdateProperties)===null||gt===void 0?void 0:gt.length)>0)for(const{key:Zt,value:fn}of Qe.addOrUpdateProperties)Pt.properties[Zt]=fn}}(this._dataUpdateable,se.dataDiff,me),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class Ui{constructor(se){this.self=se,this.actor=new d.J(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,me)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=me},this.self.addProtocol=d.cz,this.self.removeProtocol=d.cA,this.self.registerRTLTextPlugin=ue=>{d.cU.setMethods(ue)},this.actor.registerMessageHandler("LDT",(ue,me)=>this._getDEMWorkerSource(ue,me.source).loadTile(me)),this.actor.registerMessageHandler("RDT",(ue,me)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,me.source).removeTile(me)})),this.actor.registerMessageHandler("GCEZ",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterExpansionZoom(me)})),this.actor.registerMessageHandler("GCC",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterChildren(me)})),this.actor.registerMessageHandler("GCL",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterLeaves(me)})),this.actor.registerMessageHandler("LD",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).loadData(me)),this.actor.registerMessageHandler("GD",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).getData()),this.actor.registerMessageHandler("LT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).loadTile(me)),this.actor.registerMessageHandler("RT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).reloadTile(me)),this.actor.registerMessageHandler("AT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).abortTile(me)),this.actor.registerMessageHandler("RMT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).removeTile(me)),this.actor.registerMessageHandler("RS",(ue,me)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][me.type]||!this.workerSources[ue][me.type][me.source])return;const ke=this.workerSources[ue][me.type][me.source];delete this.workerSources[ue][me.type][me.source],ke.removeSource!==void 0&&ke.removeSource(me)})),this.actor.registerMessageHandler("RM",ue=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})),this.actor.registerMessageHandler("SR",(ue,me)=>d._(this,void 0,void 0,function*(){this.referrer=me})),this.actor.registerMessageHandler("SRPS",(ue,me)=>this._syncRTLPluginState(ue,me)),this.actor.registerMessageHandler("IS",(ue,me)=>d._(this,void 0,void 0,function*(){this.self.importScripts(me)})),this.actor.registerMessageHandler("SI",(ue,me)=>this._setImages(ue,me)),this.actor.registerMessageHandler("UL",(ue,me)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(me.layers,me.removedIds)})),this.actor.registerMessageHandler("SL",(ue,me)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(me)}))}_setImages(se,ue){return d._(this,void 0,void 0,function*(){this.availableImages[se]=ue;for(const me in this.workerSources[se]){const ke=this.workerSources[se][me];for(const je in ke)ke[je].availableImages=ue}})}_syncRTLPluginState(se,ue){return d._(this,void 0,void 0,function*(){return yield d.cU.syncState(ue,this.self.importScripts)})}_getAvailableImages(se){let ue=this.availableImages[se];return ue||(ue=[]),ue}_getLayerIndex(se){let ue=this.layerIndexes[se];return ue||(ue=this.layerIndexes[se]=new a),ue}_getWorkerSource(se,ue,me){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ue]||(this.workerSources[se][ue]={}),!this.workerSources[se][ue][me]){const ke={sendAsync:(je,Ke)=>(je.targetMapId=se,this.actor.sendAsync(je,Ke))};switch(ue){case"vector":this.workerSources[se][ue][me]=new T(ke,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ue][me]=new Yi(ke,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ue][me]=new this.externalWorkerSourceTypes[ue](ke,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ue][me]}_getDEMWorkerSource(se,ue){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ue]||(this.demWorkerSources[se][ue]=new A),this.demWorkerSources[se][ue]}}return d.i(self)&&(self.worker=new Ui(self)),Ui}),c("index",["exports","./shared"],function(d,a){var b="5.6.0";function k(){var v=new a.A(4);return a.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let S,T;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(v,t,o){const m=requestAnimationFrame(_=>{p(),t(_)}),{unsubscribe:p}=a.s(v.signal,"abort",()=>{p(),cancelAnimationFrame(m),o(a.c())},!1)},frameAsync(v){return new Promise((t,o)=>{this.frame(v,t,o)})},getImageData(v,t=0){return this.getImageCanvasContext(v).getImageData(-t,-t,v.width+2*t,v.height+2*t)},getImageCanvasContext(v){const t=window.document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return t.width=v.width,t.height=v.height,o.drawImage(v,0,0,v.width,v.height),o},resolveURL:v=>(S||(S=document.createElement("a")),S.href=v,S.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(T==null&&(T=matchMedia("(prefers-reduced-motion: reduce)")),T.matches)}};class P{static testProp(t){if(!P.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in P.docStyle)return t[o];return t[0]}static create(t,o,m){const p=window.document.createElement(t);return o!==void 0&&(p.className=o),m&&m.appendChild(p),p}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(t,o){t.style[P.transformProp]=o}static addEventListener(t,o,m,p={}){t.addEventListener(o,m,"passive"in p?p:p.capture)}static removeEventListener(t,o,m,p={}){t.removeEventListener(o,m,"passive"in p?p:p.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(t){const o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}static getPoint(t,o,m){const p=o.boundingClientRect;return new a.P((m.clientX-p.left)/o.x-t.clientLeft,(m.clientY-p.top)/o.y-t.clientTop)}static mousePos(t,o){const m=P.getScale(t);return P.getPoint(t,m,o)}static touchPos(t,o){const m=[],p=P.getScale(t);for(let _=0;_<o.length;_++)m.push(P.getPoint(t,p,o[_]));return m}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const o=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),m=o.querySelectorAll("script");for(const p of m)p.remove();return P.clean(o),o.innerHTML}static isPossiblyDangerous(t,o){const m=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!m.includes("javascript:")&&!m.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const o=t.children;for(const m of o)P.removeAttributes(m),P.clean(m)}static removeAttributes(t){for(const{name:o,value:m}of t.attributes)P.isPossiblyDangerous(o,m)&&t.removeAttribute(o)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!$&&L&&(j?q(v):B=v)}};let B,L,$=!1,j=!1;function q(v){const t=v.createTexture();v.bindTexture(v.TEXTURE_2D,t);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,L),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(t),$=!0}var H;typeof document<"u"&&(L=document.createElement("img"),L.onload=()=>{B&&q(B),B=null,j=!0},L.onerror=()=>{$=!0,B=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let t,o,m,p;v.resetRequestQueue=()=>{t=[],o=0,m=0,p={}},v.addThrottleControl=M=>{const z=m++;return p[z]=M,z},v.removeThrottleControl=M=>{delete p[M],w()},v.getImage=(M,z,O=!0)=>new Promise((G,U)=>{R.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),a.e(M,{type:"image"}),t.push({abortController:z,requestParameters:M,supportImageRefresh:O,state:"queued",onError:Z=>{U(Z)},onSuccess:Z=>{G(Z)}}),w()});const _=M=>a._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:z,supportImageRefresh:O,onError:G,onSuccess:U,abortController:Z}=M,ne=O===!1&&!a.i(self)&&!a.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((ye,we)=>ye&&we==="accept",!0));o++;const _e=ne?I(z,Z):a.m(z,Z);try{const ye=yield _e;delete M.abortController,M.state="completed",ye.data instanceof HTMLImageElement||a.b(ye.data)?U(ye):ye.data&&U({data:yield(ge=ye.data,typeof createImageBitmap=="function"?a.f(ge):a.h(ge)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete M.abortController,G(ye)}finally{o--,w()}var ge}),w=()=>{const M=(()=>{for(const z of Object.keys(p))if(p[z]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=o;z<M&&t.length>0;z++){const O=t.shift();O.abortController.signal.aborted?z--:_(O)}},I=(M,z)=>new Promise((O,G)=>{const U=new Image,Z=M.url,ne=M.credentials;ne&&ne==="include"?U.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!a.d(Z))&&(U.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{U.src="",G(a.c())}),U.fetchPriority="high",U.onload=()=>{U.onerror=U.onload=null,O({data:U})},U.onerror=()=>{U.onerror=U.onload=null,z.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},U.src=Z})}(H||(H={})),H.resetRequestQueue();class ee{constructor(t){this._transformRequestFn=t}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Q(v){const t=[];if(typeof v=="string")t.push({id:"default",url:v});else if(v&&v.length>0){const o=[];for(const{id:m,url:p}of v){const _=`${m}${p}`;o.indexOf(_)===-1&&(o.push(_),t.push({id:m,url:p}))}}return t}function oe(v,t,o){try{const m=new URL(v);return m.pathname+=`${t}${o}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function le(v){const{userImage:t}=v;return!!(t&&t.render&&t.render())&&(v.data.replace(new Uint8Array(t.data.buffer)),!0)}class ce extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,promiseResolve:m}of this.requestors)m(this._getImagesForIds(o));this.requestors=[]}}getImage(t){const o=this.images[t];if(o&&!o.data&&o.spriteData){const m=o.spriteData;o.data=new a.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),o.spriteData=null}return o}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let m=!0;const p=o.data||o.spriteData;return this._validateStretch(o.stretchX,p&&p.width)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchX" value`))),m=!1),this._validateStretch(o.stretchY,p&&p.height)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "stretchY" value`))),m=!1),this._validateContent(o.content,o)||(this.fire(new a.k(new Error(`Image "${t}" has invalid "content" value`))),m=!1),m}_validateStretch(t,o){if(!t)return!0;let m=0;for(const p of t){if(p[0]<m||p[1]<p[0]||o<p[1])return!1;m=p[1]}return!0}_validateContent(t,o){if(!t)return!0;if(t.length!==4)return!1;const m=o.spriteData,p=m&&m.width||o.data.width,_=m&&m.height||o.data.height;return!(t[0]<0||p<t[0]||t[1]<0||_<t[1]||t[2]<0||p<t[2]||t[3]<0||_<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,o,m=!0){const p=this.getImage(t);if(m&&(p.data.width!==o.data.width||p.data.height!==o.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=p.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((o,m)=>{let p=!0;if(!this.isLoaded())for(const _ of t)this.images[_]||(p=!1);this.isLoaded()||p?o(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:o})})}_getImagesForIds(t){const o={};for(const m of t){let p=this.getImage(m);p||(this.fire(new a.l("styleimagemissing",{id:m})),p=this.getImage(m)),p?o[m]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:a.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],m=this.getImage(t);if(!m)return null;if(o&&o.position.version===m.version)return o.position;if(o)o.position.version=m.version;else{const p={w:m.data.width+2,h:m.data.height+2,x:0,y:0},_=new a.I(p,m);this.patterns[t]={bin:p,position:_}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const _ in this.patterns)t.push(this.patterns[_].bin);const{w:o,h:m}=a.p(t),p=this.atlasImage;p.resize({width:o||1,height:m||1});for(const _ in this.patterns){const{bin:w}=this.patterns[_],I=w.x+1,M=w.y+1,z=this.getImage(_).data,O=z.width,G=z.height;a.R.copy(z,p,{x:0,y:0},{x:I,y:M},{width:O,height:G}),a.R.copy(z,p,{x:0,y:G-1},{x:I,y:M-1},{width:O,height:1}),a.R.copy(z,p,{x:0,y:0},{x:I,y:M+G},{width:O,height:1}),a.R.copy(z,p,{x:O-1,y:0},{x:I-1,y:M},{width:1,height:G}),a.R.copy(z,p,{x:0,y:0},{x:I+O,y:M},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const m=this.getImage(o);m||a.w(`Image with ID: "${o}" was not found`),le(m)&&this.updateImage(o,m)}}}const he=1e20;function ve(v,t,o,m,p,_,w,I,M){for(let z=t;z<t+m;z++)ie(v,o*_+z,_,p,w,I,M);for(let z=o;z<o+p;z++)ie(v,z*_+t,1,m,w,I,M)}function ie(v,t,o,m,p,_,w){_[0]=0,w[0]=-1e20,w[1]=he,p[0]=v[t];for(let I=1,M=0,z=0;I<m;I++){p[I]=v[t+I*o];const O=I*I;do{const G=_[M];z=(p[I]-p[G]+O-G*G)/(I-G)/2}while(z<=w[M]&&--M>-1);M++,_[M]=I,w[M]=z,w[M+1]=he}for(let I=0,M=0;I<m;I++){for(;w[M+1]<I;)M++;const z=_[M],O=I-z;v[t+I*o]=p[z]+O*O}}class be{constructor(t,o){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return a._(this,void 0,void 0,function*(){const o=[];for(const _ in t)for(const w of t[_])o.push(this._getAndCacheGlyphsPromise(_,w));const m=yield Promise.all(o),p={};for(const{stack:_,id:w,glyph:I}of m)p[_]||(p[_]={}),p[_][w]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return p})}_getAndCacheGlyphsPromise(t,o){return a._(this,void 0,void 0,function*(){let m=this.entries[t];m||(m=this.entries[t]={glyphs:{},requests:{},ranges:{}});let p=m.glyphs[o];if(p!==void 0)return{stack:t,id:o,glyph:p};if(p=this._tinySDF(m,t,o),p)return m.glyphs[o]=p,{stack:t,id:o,glyph:p};const _=Math.floor(o/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[_])return{stack:t,id:o,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[_]){const I=be.loadGlyphRange(t,_,this.url,this.requestManager);m.requests[_]=I}const w=yield m.requests[_];for(const I in w)this._doesCharSupportLocalGlyph(+I)||(m.glyphs[+I]=w[+I]);return m.ranges[_]=!0,{stack:t,id:o,glyph:w[o]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))||a.u["CJK Unified Ideographs"](t)||a.u["Hangul Syllables"](t)||a.u.Hiragana(t)||a.u.Katakana(t)||a.u["CJK Symbols and Punctuation"](t)||a.u["Halfwidth and Fullwidth Forms"](t))}_tinySDF(t,o,m){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(m))return;let _=t.tinySDF;if(!_){let I="400";/bold/i.test(o)?I="900":/medium/i.test(o)?I="500":/light/i.test(o)&&(I="200"),_=t.tinySDF=new be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:I})}const w=_.draw(String.fromCharCode(m));return{id:m,bitmap:new a.q({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}be.loadGlyphRange=function(v,t,o,m){return a._(this,void 0,void 0,function*(){const p=256*t,_=p+255,w=m.transformRequest(o.replace("{fontstack}",v).replace("{range}",`${p}-${_}`),"Glyphs"),I=yield a.n(w,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${t}, ${p}-${_}`);const M={};for(const z of a.o(I.data))M[z.id]=z;return M})},be.TinySDF=class{constructor({fontSize:v=24,buffer:t=3,radius:o=8,cutoff:m=.25,fontFamily:p="sans-serif",fontWeight:_="normal",fontStyle:w="normal"}={}){this.buffer=t,this.cutoff=m,this.radius=o;const I=this.size=v+4*t,M=this._createCanvas(I),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${w} ${_} ${v}px ${p}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(v){const t=document.createElement("canvas");return t.width=t.height=v,t}draw(v){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:m,actualBoundingBoxLeft:p,actualBoundingBoxRight:_}=this.ctx.measureText(v),w=Math.ceil(o),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-p))),M=Math.min(this.size-this.buffer,w+Math.ceil(m)),z=I+2*this.buffer,O=M+2*this.buffer,G=Math.max(z*O,0),U=new Uint8ClampedArray(G),Z={data:U,width:z,height:O,glyphWidth:I,glyphHeight:M,glyphTop:w,glyphLeft:0,glyphAdvance:t};if(I===0||M===0)return Z;const{ctx:ne,buffer:_e,gridInner:ge,gridOuter:ye}=this;ne.clearRect(_e,_e,I,M),ne.fillText(v,_e,_e+w);const we=ne.getImageData(_e,_e,I,M);ye.fill(he,0,G),ge.fill(0,0,G);for(let Ie=0;Ie<M;Ie++)for(let Ce=0;Ce<I;Ce++){const Re=we.data[4*(Ie*I+Ce)+3]/255;if(Re===0)continue;const Oe=(Ie+_e)*z+Ce+_e;if(Re===1)ye[Oe]=0,ge[Oe]=he;else{const Te=.5-Re;ye[Oe]=Te>0?Te*Te:0,ge[Oe]=Te<0?Te*Te:0}}ve(ye,0,0,z,O,z,this.f,this.v,this.z),ve(ge,_e,_e,I,M,z,this.f,this.v,this.z);for(let Ie=0;Ie<G;Ie++){const Ce=Math.sqrt(ye[Ie])-Math.sqrt(ge[Ie]);U[Ie]=Math.round(255-255*(Ce/this.radius+this.cutoff))}return Z}};class Be{constructor(){this.specification=a.v.light.position}possiblyEvaluate(t,o){return a.B(t.expression.evaluate(o))}interpolate(t,o,m){return{x:a.C.number(t.x,o.x,m),y:a.C.number(t.y,o.y,m),z:a.C.number(t.z,o.z,m)}}}let De;class Fe extends a.E{constructor(t){super(),De=De||new a.r({anchor:new a.D(a.v.light.anchor),position:new Be,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(De),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(a.x,t,o))for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m){return(!m||m.validate!==!1)&&a.y(this,t.call(a.z,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Ze=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class mt extends a.E{constructor(t){super(),this._transitionable=new a.t(Ze),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(t,o={}){if(!this._validate(a.G,t,o)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in t){const p=t[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),p):this._transitionable.setValue(m,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m={}){return(m==null?void 0:m.validate)!==!1&&a.y(this,t.call(a.z,a.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class pt{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const m=t.join(",")+String(o);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(t,o)),this.dashEntry[m]}getDashRanges(t,o,m){const p=[];let _=t.length%2==1?-t[t.length-1]*m:0,w=t[0]*m,I=!0;p.push({left:_,right:w,isDash:I,zeroLength:t[0]===0});let M=t[0];for(let z=1;z<t.length;z++){I=!I;const O=t[z];_=M*m,M+=O,w=M*m,p.push({left:_,right:w,isDash:I,zeroLength:O===0})}return p}addRoundDash(t,o,m){const p=o/2;for(let _=-m;_<=m;_++){const w=this.width*(this.nextRow+m+_);let I=0,M=t[I];for(let z=0;z<this.width;z++){z/M.right>1&&(M=t[++I]);const O=Math.abs(z-M.left),G=Math.abs(z-M.right),U=Math.min(O,G);let Z;const ne=_/m*(p+1);if(M.isDash){const _e=p-Math.abs(ne);Z=Math.sqrt(U*U+_e*_e)}else Z=p-Math.sqrt(U*U+ne*ne);this.data[w+z]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(t){for(let I=t.length-1;I>=0;--I){const M=t[I],z=t[I+1];M.zeroLength?t.splice(I,1):z&&z.isDash===M.isDash&&(z.left=M.left,t.splice(I,1))}const o=t[0],m=t[t.length-1];o.isDash===m.isDash&&(o.left=m.left-this.width,m.right=o.right+this.width);const p=this.width*this.nextRow;let _=0,w=t[_];for(let I=0;I<this.width;I++){I/w.right>1&&(w=t[++_]);const M=Math.abs(I-w.left),z=Math.abs(I-w.right),O=Math.min(M,z);this.data[p+I]=Math.max(0,Math.min(255,(w.isDash?O:-O)+128))}}addDash(t,o){const m=o?7:0,p=2*m+1;if(this.nextRow+p>this.height)return a.w("LineAtlas out of space"),null;let _=0;for(let I=0;I<t.length;I++)_+=t[I];if(_!==0){const I=this.width/_,M=this.getDashRanges(t,this.width,I);o?this.addRoundDash(M,I,m):this.addRegularDash(M)}const w={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:_};return this.nextRow+=p,this.dirty=!0,w}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const Ve="maplibre_preloaded_worker_pool";class Se{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Se.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ve]}numActive(){return Object.keys(this.active).length}}const Ee=Math.floor(A.hardwareConcurrency/2);let tt,Nt;function kt(){return tt||(tt=new Se),tt}Se.workerCount=a.H(globalThis)?Math.max(Math.min(Ee,3),1):1;class wt{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o;const m=this.workerPool.acquire(o);for(let p=0;p<m.length;p++){const _=new a.J(m[p],o);_.name=`Worker ${p}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o){const m=[];for(const p of this.actors)m.push(p.sendAsync({type:t,data:o}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,o){for(const m of this.actors)m.registerMessageHandler(t,o)}}function Le(){return Nt||(Nt=new wt(kt(),a.K),Nt.registerMessageHandler("GR",(v,t,o)=>a.m(t,o))),Nt}function _t(v,t){const o=a.L();return a.M(o,o,[1,1,0]),a.N(o,o,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?a.O(o,o,v.calculatePosMatrix(t.toUnwrapped())):o}function ot(v,t,o,m,p,_,w){var I;const M=function(U,Z,ne){if(U)for(const _e of U){const ge=Z[_e];if(ge&&ge.source===ne&&ge.type==="fill-extrusion")return!0}else for(const _e in Z){const ge=Z[_e];if(ge.source===ne&&ge.type==="fill-extrusion")return!0}return!1}((I=p==null?void 0:p.layers)!==null&&I!==void 0?I:null,t,v.id),z=_.maxPitchScaleFactor(),O=v.tilesIn(m,z,M);O.sort(Je);const G=[];for(const U of O)G.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(t,o,v._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,p,_,z,_t(v.transform,U.tileID),w?(Z,ne)=>w(U.tileID,Z,ne):void 0)});return function(U,Z){for(const ne in U)for(const _e of U[ne])Ct(_e,Z);return U}(function(U){const Z={},ne={};for(const _e of U){const ge=_e.queryResults,ye=_e.wrappedTileID,we=ne[ye]=ne[ye]||{};for(const Ie in ge){const Ce=ge[Ie],Re=we[Ie]=we[Ie]||{},Oe=Z[Ie]=Z[Ie]||[];for(const Te of Ce)Re[Te.featureIndex]||(Re[Te.featureIndex]=!0,Oe.push(Te))}}return Z}(G),v)}function Je(v,t){const o=v.tileID,m=t.tileID;return o.overscaledZ-m.overscaledZ||o.canonical.y-m.canonical.y||o.wrap-m.wrap||o.canonical.x-m.canonical.x}function Ct(v,t){const o=v.feature,m=t.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=m}function ae(v,t,o){return a._(this,void 0,void 0,function*(){let m=v;if(v.url?m=(yield a.j(t.transformRequest(v.url,"Source"),o)).data:yield A.frameAsync(o),!m)return null;const p=a.Q(a.e(m,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(p.vectorLayerIds=m.vector_layers.map(_=>_.id)),p})}class de{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof a.S?new a.S(t.lng,t.lat):a.S.convert(t),this}setSouthWest(t){return this._sw=t instanceof a.S?new a.S(t.lng,t.lat):a.S.convert(t),this}extend(t){const o=this._sw,m=this._ne;let p,_;if(t instanceof a.S)p=t,_=t;else{if(!(t instanceof de))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(de.convert(t)):this.extend(a.S.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(a.S.convert(t)):this;if(p=t._sw,_=t._ne,!p||!_)return this}return o||m?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),m.lng=Math.max(_.lng,m.lng),m.lat=Math.max(_.lat,m.lat)):(this._sw=new a.S(p.lng,p.lat),this._ne=new a.S(_.lng,_.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:m}=a.S.convert(t);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&p}static convert(t){return t instanceof de?t:t&&new de(t)}static fromLngLat(t,o=0){const m=360*o/40075017,p=m/Math.cos(Math.PI/180*t.lat);return new de(new a.S(t.lng-p,t.lat-m),new a.S(t.lng+p,t.lat+m))}adjustAntiMeridian(){const t=new a.S(this._sw.lng,this._sw.lat),o=new a.S(this._ne.lng,this._ne.lat);return new de(t,t.lng>o.lng?new a.S(o.lng+360,o.lat):o)}}class ze{constructor(t,o,m){this.bounds=de.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=m||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),m=Math.floor(a.V(this.bounds.getWest())*o),p=Math.floor(a.U(this.bounds.getNorth())*o),_=Math.ceil(a.V(this.bounds.getEast())*o),w=Math.ceil(a.U(this.bounds.getSouth())*o);return t.x>=m&&t.x<_&&t.y>=p&&t.y<w}}class Ye extends a.E{constructor(t,o,m,p){if(super(),this.id=t,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(o,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield ae(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(a.e(this,t),t.bounds&&(this.tileBounds=new ze(t.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new a.k(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(o,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};m.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((_,w)=>{t.reloadPromise={resolve:_,reject:w}})}else t.actor=this.dispatcher.getActor(),p="LT";t.abortController=new AbortController;try{const _=yield t.actor.sendAsync({type:p,data:m},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,_)}catch(_){if(delete t.abortController,t.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,o){if(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),t.reloadPromise){const m=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(m.resolve).catch(m.reject)}}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ct extends a.E{constructor(t,o,m,p){super(),this.id=t,this.dispatcher=m,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},o),a.e(this,a.Q(o,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(t=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield ae(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(a.e(this,o),o.bounds&&(this.tileBounds=new ze(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(o){this._tileJSONRequest=null,this.fire(new a.k(o))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return a.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const m=yield H.getImage(this.map._requestManager.transformRequest(o,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&t.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const p=this.map.painter.context,_=p.gl,w=m.data;t.texture=this.map.painter.getTileTexture(w.width),t.texture?t.texture.update(w,{useMipmap:!0}):(t.texture=new a.T(p,w,_.RGBA,{useMipmap:!0}),t.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(m){if(delete t.abortController,t.aborted)t.state="unloaded";else if(m)throw t.state="errored",m}})}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class et extends ct{constructor(t,o,m,p){super(t,o,m,p),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(o,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const p=yield H.getImage(m,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){const _=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const w=a.b(_)&&a.W()?_:yield this.readImageNow(_),I={type:this.type,uid:t.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const M=yield t.actor.sendAsync({type:"LDT",data:I});t.dem=M,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}})}readImageNow(t){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.X()){const o=t.width+2,m=t.height+2;try{return new a.R({width:o,height:m},yield a.Y(t,-1,-1,o,m))}catch{}}return A.getImageData(t,1)})}_getNeighboringTiles(t){const o=t.canonical,m=Math.pow(2,o.z),p=(o.x-1+m)%m,_=o.x===0?t.wrap-1:t.wrap,w=(o.x+1+m)%m,I=o.x+1===m?t.wrap+1:t.wrap,M={};return M[new a.Z(t.overscaledZ,_,o.z,p,o.y).key]={backfilled:!1},M[new a.Z(t.overscaledZ,I,o.z,w,o.y).key]={backfilled:!1},o.y>0&&(M[new a.Z(t.overscaledZ,_,o.z,p,o.y-1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,I,o.z,w,o.y-1).key]={backfilled:!1}),o.y+1<m&&(M[new a.Z(t.overscaledZ,_,o.z,p,o.y+1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},M[new a.Z(t.overscaledZ,I,o.z,w,o.y+1).key]={backfilled:!1}),M}unloadTile(t){return a._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class It extends a.E{constructor(t,o,m,p){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(p),this._data=o.data,this._options=a.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(o.clusterMaxZoom),minPoints:Math.max(2,o.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(t){return t*(a.$/this.tileSize)}_getClusterMaxZoom(t){const o=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${o}"`),o}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return a._(this,void 0,void 0,function*(){const t=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}getCoordinatesFromGeometry(t){return t.type==="GeometryCollection"?t.geometries.map(o=>o.coordinates).flat(1/0):t.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const t=new de,o=yield this.getData();let m;switch(o.type){case"FeatureCollection":m=o.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":m=this.getCoordinatesFromGeometry(o.geometry);break;default:m=this.getCoordinatesFromGeometry(o)}if(m.length==0)return t;for(let p=0;p<m.length-1;p+=2)t.extend([m[p],m[p+1]]);return t})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,o,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:o,offset:m}})}_updateWorkerData(t){return a._(this,void 0,void 0,function*(){const o=a.e({type:this.type},this.workerOptions);t?o.dataDiff=t:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const m=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let p=null;m.resourceTiming&&m.resourceTiming[this.id]&&(p=m.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&a.e(_,{resourceTiming:p}),this.fire(new a.l("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(m))}})}loaded(){return this._pendingLoads===0}loadTile(t){return a._(this,void 0,void 0,function*(){const o=t.actor?"RT":"LT";t.actor=this.actor;const m={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};t.abortController=new AbortController;const p=yield this.actor.sendAsync({type:o,data:m},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(p,this.map.painter,o==="RT")})}abortTile(t){return a._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return a._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class dt extends a.E{constructor(t,o,m,p){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=m,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=o}load(t){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,t&&(this.coordinates=t),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new a.k(o))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const o=t.map(a.a0.fromLngLat);var m;return this.tileID=function(p){const _=a.a1.fromPoints(p),w=_.width(),I=_.height(),M=Math.max(w,I),z=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),O=Math.pow(2,z);return new a.a3(z,Math.floor((_.minX+_.maxX)/2*O),Math.floor((_.minY+_.maxY)/2*O))}(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.texture||(this.texture=new a.T(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:o,minY:m,maxX:p,maxY:_}=a.a1.fromPoints(t),w={};for(let I=0;I<=a.a2;I++){const M=Math.pow(2,I),z=Math.floor(o*M),O=Math.floor(m*M),G=Math.floor(p*M),U=Math.floor(_*M);w[I]={minTileX:z,minTileY:O,maxTileX:G,maxTileY:U}}return w}}class Lt extends dt{constructor(t,o,m,p){super(t,o,m,p),this.roundZoom=!0,this.type="video",this.options=o}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield a.a4(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new a.k(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new a.k(new a.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class At extends dt{constructor(t,o,m,p){super(t,o,m,p),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(w=>typeof w!="number"))||this.fire(new a.k(new a.a5(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a5(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new a.k(new a.a5(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a5(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a5(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,m=o.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(o,this.canvas,m.RGBA,{premultiply:!0});let p=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const sn={},Wt=v=>{switch(v){case"geojson":return It;case"image":return dt;case"raster":return ct;case"raster-dem":return et;case"vector":return Ye;case"video":return Lt;case"canvas":return At}return sn[v]},tn="RTLPluginLoaded";class dn extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Le()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return a._(this,arguments,void 0,function*(o,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(tn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let _n=null;function Dn(){return _n||(_n=new dn),_n}class Vn{constructor(t,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=a.a6(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const o=t+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,o,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(p,_){const w={};if(!_)return w;for(const I of p){const M=I.layerIds.map(z=>_.getLayer(z)).filter(Boolean);if(M.length!==0){I.layers=M,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(z=>M.filter(O=>O.id===z)[0]));for(const z of M)w[z.id]=I}}return w}(t.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof a.a8){if(this.hasSymbolBuckets=!0,!m)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof a.a8&&_.hasRTLText){this.hasRTLText=!0,Dn().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const _=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(_))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new a.a7}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const m in this.buckets){const p=this.buckets[m];p.uploadPending()&&p.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,m,p,_,w,I,M,z,O,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:_,scale:w,tileSize:this.tileSize,pixelPosMatrix:O,transform:M,params:I,queryPadding:this.queryPadding*z,getElevation:G},t,o,m):{}}querySourceFeatures(t,o){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const p=m.loadVTLayers(),_=o&&o.sourceLayer?o.sourceLayer:"",w=p._geojsonTileLayer||p[_];if(!w)return;const I=a.a9(o&&o.filter),{z:M,x:z,y:O}=this.tileID.canonical,G={z:M,x:z,y:O};for(let U=0;U<w.length;U++){const Z=w.feature(U);if(I.needGeometry){const ge=a.aa(Z,!0);if(!I.filter(new a.F(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!I.filter(new a.F(this.tileID.overscaledZ),Z))continue;const ne=m.getId(Z,_),_e=new a.ab(Z,M,z,O,ne);_e.tile=G,t.push(_e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const m=a.ac(t.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const m=Date.now();let p=!1;if(this.expirationTime>m)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const _=this.expirationTime-o;_?this.expirationTime=m+Math.max(_,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!o.style.hasLayer(p))continue;const _=this.buckets[p],w=_.layers[0].sourceLayer||"_geojsonTileLayer",I=m[w],M=t[w];if(!I||!M||Object.keys(M).length===0)continue;_.update(M,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=o&&o.style&&o.style.getLayer(p);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=A.now()+t}setDependencies(t,o){const m={};for(const p of o)m[p]=!0;this.dependencies[t]=m}hasDependency(t,o){for(const m of t){const p=this.dependencies[m];if(p){for(const _ of o)if(p[_])return!0}}return!1}}class Ni{constructor(t,o){this.max=t,this.onRemove=o,this.reset()}reset(){for(const t in this.data)for(const o of this.data[t])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(t,o,m){const p=t.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const _={value:o,timeout:void 0};if(m!==void 0&&(_.timeout=setTimeout(()=>{this.remove(t,_)},m)),this.data[p].push(_),this.order.push(p),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const o=this.data[t].shift();return o.timeout&&clearTimeout(o.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),o.value}getByKey(t){const o=this.data[t];return o?o[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,o){if(!this.has(t))return this;const m=t.wrapped().key,p=o===void 0?0:this.data[m].indexOf(o),_=this.data[m][p];return this.data[m].splice(p,1),_.timeout&&clearTimeout(_.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(_.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(t){const o=[];for(const m in this.data)for(const p of this.data[m])t(p.value)||o.push(p);for(const m of o)this.remove(m.value.tileID,m)}}class Yi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,m){const p=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][p]=this.stateChanges[t][p]||{},a.e(this.stateChanges[t][p],m),this.deletedStates[t]===null){this.deletedStates[t]={};for(const _ in this.state[t])_!==p&&(this.deletedStates[t][_]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][p]===null){this.deletedStates[t][p]={};for(const _ in this.state[t][p])m[_]||(this.deletedStates[t][p][_]=null)}else for(const _ in m)this.deletedStates[t]&&this.deletedStates[t][p]&&this.deletedStates[t][p][_]===null&&delete this.deletedStates[t][p][_]}removeFeatureState(t,o,m){if(this.deletedStates[t]===null)return;const p=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},m&&o!==void 0)this.deletedStates[t][p]!==null&&(this.deletedStates[t][p]=this.deletedStates[t][p]||{},this.deletedStates[t][p][m]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][p])for(m in this.deletedStates[t][p]={},this.stateChanges[t][p])this.deletedStates[t][p][m]=null;else this.deletedStates[t][p]=null;else this.deletedStates[t]=null}getState(t,o){const m=String(o),p=a.e({},(this.state[t]||{})[m],(this.stateChanges[t]||{})[m]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const _=this.deletedStates[t][o];if(_===null)return{};for(const w in _)delete p[w]}return p}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const m={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const _={};for(const w in this.stateChanges[p])this.state[p][w]||(this.state[p][w]={}),a.e(this.state[p][w],this.stateChanges[p][w]),_[w]=this.state[p][w];m[p]=_}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const _={};if(this.deletedStates[p]===null)for(const w in this.state[p])_[w]={},this.state[p][w]={};else for(const w in this.deletedStates[p]){if(this.deletedStates[p][w]===null)this.state[p][w]={};else for(const I of Object.keys(this.deletedStates[p][w]))delete this.state[p][w][I];_[w]=this.state[p][w]}m[p]=m[p]||{},a.e(m[p],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const p in t)t[p].setFeatureState(m,o)}}const Ui=89.25;function He(v,t){const o=a.ag(t.lat,-85.051129,a.ah);return new a.P(a.V(t.lng)*v,a.U(o)*v)}function se(v,t){return new a.a0(t.x/v,t.y/v).toLngLat()}function ue(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-v.pitch)),Math.tan(a.ad(Ui-v.pitch)))}function me(v,t){const o=v.canonical,m=t/a.ae(o.z),p=o.x+Math.pow(2,o.z)*v.wrap,_=a.af(new Float64Array(16));return a.M(_,_,[p*m,o.y*m,0]),a.N(_,_,[m/a.$,m/a.$,1]),_}function ke(v,t,o,m,p){const _=a.a0.fromLngLat(v,t),w=p*a.ai(1,v.lat),I=w*Math.cos(a.ad(o)),M=Math.sqrt(w*w-I*I),z=M*Math.sin(a.ad(-m)),O=M*Math.cos(a.ad(-m));return new a.a0(_.x+z,_.y+O,_.z+I)}function je(v,t,o){const m=t.intersectsFrustum(v);if(!o||m===0)return m;const p=t.intersectsPlane(o);return p===0?0:m===2&&p===2?2:1}function Ke(v,t,o){let m=0;const p=(o-t)/10;for(let _=0;_<10;_++)m+=p*Math.pow(Math.cos(t+(_+.5)/10*(o-t)),v);return m}function at(v,t){return function(o,m,p,_,w){const I=2*((v-1)/a.aj(Math.cos(a.ad(Ui-w))/Math.cos(a.ad(Ui)))-1),M=Math.acos(p/_),z=2*Ke(I-1,0,a.ad(w/2)),O=Math.min(a.ad(Ui),M+a.ad(w/2)),G=Ke(I-1,Math.min(O,M-a.ad(w/2)),O),U=Math.atan(m/p),Z=Math.hypot(m,p);let ne=o;return ne+=a.aj(_/Z/Math.max(.5,Math.cos(a.ad(w/2)))),ne+=I*a.aj(Math.cos(U))/2,ne-=a.aj(Math.max(1,G/z/t))/2,ne}}const We=at(9.314,3);function xt(v,t){const o=(t.roundZoom?Math.round:Math.floor)(v.zoom+a.aj(v.tileSize/t.tileSize));return Math.max(0,o)}function gt(v,t){const o=v.getCameraFrustum(),m=v.getClippingPlane(),p=v.screenPointToMercatorCoordinate(v.getCameraPoint()),_=a.a0.fromLngLat(v.center,v.elevation);p.z=_.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const w=v.getCoveringTilesDetailsProvider(),I=w.allowVariableZoom(v,t),M=xt(v,t),z=t.minzoom||0,O=t.maxzoom!==void 0?t.maxzoom:v.maxZoom,G=Math.min(Math.max(0,M),O),U=Math.pow(2,G),Z=[U*p.x,U*p.y,0],ne=[U*_.x,U*_.y,0],_e=Math.hypot(_.x-p.x,_.y-p.y),ge=Math.abs(_.z-p.z),ye=Math.hypot(_e,ge),we=Re=>({zoom:0,x:0,y:0,wrap:Re,fullyVisible:!1}),Ie=[],Ce=[];if(v.renderWorldCopies&&w.allowWorldCopies())for(let Re=1;Re<=3;Re++)Ie.push(we(-Re)),Ie.push(we(Re));for(Ie.push(we(0));Ie.length>0;){const Re=Ie.pop(),Oe=Re.x,Te=Re.y;let qe=Re.fullyVisible;const st={x:Oe,y:Te,z:Re.zoom},nt=w.getTileBoundingVolume(st,Re.wrap,v.elevation,t);if(!qe){const jt=je(o,nt,m);if(jt===0)continue;qe=jt===2}const it=w.distanceToTile2d(p.x,p.y,st,nt);let lt=M;I&&(lt=(t.calculateTileZoom||We)(v.zoom+a.aj(v.tileSize/t.tileSize),it,ge,ye,v.fov)),lt=(t.roundZoom?Math.round:Math.floor)(lt),lt=Math.max(0,lt);const Ut=Math.min(lt,O);if(Re.wrap=w.getWrap(_,st,Re.wrap),Re.zoom>=Ut){if(Re.zoom<z)continue;const jt=G-Re.zoom,Mt=Z[0]-.5-(Oe<<jt),Jt=Z[1]-.5-(Te<<jt),Tn=t.reparseOverscaled?Math.max(Re.zoom,lt):Re.zoom;Ce.push({tileID:new a.Z(Re.zoom===O?Tn:Re.zoom,Re.wrap,Re.zoom,Oe,Te),distanceSq:a.ak([ne[0]-.5-Oe,ne[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(Mt*Mt+Jt*Jt)})}else for(let jt=0;jt<4;jt++)Ie.push({zoom:Re.zoom+1,x:(Oe<<1)+jt%2,y:(Te<<1)+(jt>>1),wrap:Re.wrap,fullyVisible:qe})}return Ce.sort((Re,Oe)=>Re.distanceSq-Oe.distanceSq).map(Re=>Re.tileID)}const Qe=a.a1.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Pt extends a.E{constructor(t,o,m){super(),this.id=t,this.dispatcher=m,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,_,w,I)=>{const M=new(Wt(_.type))(p,_,w,I);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(t,o,m,this),this._tiles={},this._cache=new Ni(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Yi,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const o=this._tiles[t];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o,m){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,o,m)}catch(p){t.state="errored",p.status!==404?this._source.fire(new a.k(p,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new a.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const m=this._tiles[o];m.upload(t),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort($e).map(t=>t.key)}getRenderableIds(t){const o=[];for(const m in this._tiles)this._isIdRenderable(m,t)&&o.push(this._tiles[m]);return t?o.sort((m,p)=>{const _=m.tileID,w=p.tileID,I=new a.P(_.canonical.x,_.canonical.y)._rotate(-this.transform.bearingInRadians),M=new a.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians);return _.overscaledZ-w.overscaledZ||M.y-I.y||M.x-I.x}).map(m=>m.tileID.key):o.map(m=>m.tileID).sort($e).map(m=>m.key)}hasRenderableParent(t){const o=this.findLoadedParent(t,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(t,o){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(o||!this._tiles[t].holdingForFade())}reload(t){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)t?this._reloadTile(o,"expired"):this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(t,o){return a._(this,void 0,void 0,function*(){const m=this._tiles[t];m&&(m.state!=="loading"&&(m.state=o),yield this._loadTile(m,t,o))})}_tileLoaded(t,o,m){t.timeAdded=A.now(),m==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const o=this.getRenderableIds();for(let p=0;p<o.length;p++){const _=o[p];if(t.neighboringTiles&&t.neighboringTiles[_]){const w=this.getTileByID(_);m(t,w),m(w,t)}}function m(p,_){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let w=_.tileID.canonical.x-p.tileID.canonical.x;const I=_.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),z=_.tileID.key;w===0&&I===0||Math.abs(I)>1||(Math.abs(w)>1&&(Math.abs(w+M)===1?w+=M:Math.abs(w-M)===1&&(w-=M)),_.dem&&p.dem&&(p.dem.backfillBorder(_.dem,w,I),p.neighboringTiles&&p.neighboringTiles[z]&&(p.neighboringTiles[z].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,o,m,p){for(const _ in this._tiles){let w=this._tiles[_];if(p[_]||!w.hasData()||w.tileID.overscaledZ<=o||w.tileID.overscaledZ>m)continue;let I=w.tileID;for(;w&&w.tileID.overscaledZ>o+1;){const z=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[z.key],w&&w.hasData()&&(I=z)}let M=I;for(;M.overscaledZ>o;)if(M=M.scaledTo(M.overscaledZ-1),t[M.key]||t[M.canonical.key]){p[I.key]=I;break}}}findLoadedParent(t,o){if(t.key in this._loadedParentTiles){const m=this._loadedParentTiles[t.key];return m&&m.tileID.overscaledZ>=o?m:null}for(let m=t.overscaledZ-1;m>=o;m--){const p=t.scaledTo(m),_=this._getLoadedTile(p);if(_)return _}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const o=this._tiles[t.key];return o&&o.hasData()?o:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,m=Math.ceil(t.height/this._source.tileSize)+1,p=Math.floor(o*m*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(_)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,o){const m={};for(const p in this._tiles){const _=this._tiles[p];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+o),m[_.tileID.key]=_}this._tiles=m;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(t,o,m,p,_,w){const I={},M={},z=Object.keys(t),O=A.now();for(const G of z){const U=t[G],Z=this._tiles[G];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=O)continue;const ne=this.findLoadedParent(U,o),_e=this.findLoadedSibling(U),ge=ne||_e||null;ge&&(this._addTile(ge.tileID),I[ge.tileID.key]=ge.tileID),M[G]=U}this._retainLoadedChildren(M,p,m,t);for(const G in I)t[G]||(this._coveredTiles[G]=!0,t[G]=I[G]);if(w){const G={},U={};for(const Z of _)this._tiles[Z.key].hasData()?G[Z.key]=Z:U[Z.key]=Z;for(const Z in U){const ne=U[Z].children(this._source.maxzoom);this._tiles[ne[0].key]&&this._tiles[ne[1].key]&&this._tiles[ne[2].key]&&this._tiles[ne[3].key]&&(G[ne[0].key]=t[ne[0].key]=ne[0],G[ne[1].key]=t[ne[1].key]=ne[1],G[ne[2].key]=t[ne[2].key]=ne[2],G[ne[3].key]=t[ne[3].key]=ne[3],delete U[Z])}for(const Z in U){const ne=U[Z],_e=this.findLoadedParent(ne,this._source.minzoom),ge=this.findLoadedSibling(ne),ye=_e||ge||null;if(ye){G[ye.tileID.key]=t[ye.tileID.key]=ye.tileID;for(const we in G)G[we].isChildOf(ye.tileID)&&delete G[we]}}for(const Z in this._tiles)G[Z]||(this._coveredTiles[Z]=!0)}}update(t,o){if(!this._sourceLoaded||this._paused)return;let m;this.transform=t,this.terrain=o,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new a.Z(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(m=gt(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(O=>this._source.hasTile(O)))):m=[];const p=xt(t,this._source),_=Math.max(p-Pt.maxOverzooming,this._source.minzoom),w=Math.max(p+Pt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const G of m)if(G.canonical.z>this._source.minzoom){const U=G.scaledTo(G.canonical.z-1);O[U.key]=U;const Z=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));O[Z.key]=Z}m=m.concat(Object.values(O))}const I=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(m,p);Zt(this._source.type)&&this._updateCoveredAndRetainedTiles(M,_,w,p,m,o);for(const O in M)this._tiles[O].clearFadeHold();const z=a.al(this._tiles,M);for(const O of z){const G=this._tiles[O];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){var m;const p={},_={},w=Math.max(o-Pt.maxOverzooming,this._source.minzoom),I=Math.max(o+Pt.maxUnderzooming,this._source.minzoom),M={};for(const z of t){const O=this._addTile(z);p[z.key]=z,O.hasData()||o<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,o,I,p);for(const z of t){let O=this._tiles[z.key];if(O.hasData())continue;if(o+1>this._source.maxzoom){const U=z.children(this._source.maxzoom)[0],Z=this.getTile(U);if(Z&&Z.hasData()){p[U.key]=U;continue}}else{const U=z.children(this._source.maxzoom);if(p[U[0].key]&&p[U[1].key]&&p[U[2].key]&&p[U[3].key])continue}let G=O.wasRequested();for(let U=z.overscaledZ-1;U>=w;--U){const Z=z.scaledTo(U);if(_[Z.key])break;if(_[Z.key]=!0,O=this.getTile(Z),!O&&G&&(O=this._addTile(Z)),O){const ne=O.hasData();if((ne||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||G)&&(p[Z.key]=Z),G=O.wasRequested(),ne)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const o=[];let m,p=this._tiles[t].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){m=this._loadedParentTiles[p.key];break}o.push(p.key);const _=p.scaledTo(p.overscaledZ-1);if(m=this._getLoadedTile(_),m)break;p=_}for(const _ of o)this._loadedParentTiles[_]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const o=this._tiles[t].tileID,m=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=m}}_addTile(t){let o=this._tiles[t.key];if(o)return o;o=this._cache.getAndRemove(t),o&&(this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,o)));const m=o;return o||(o=new Vn(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,t.key,o.state)),o.uses++,this._tiles[t.key]=o,m||this._source.fire(new a.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const m=o.getExpiryTimeout();m&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},m))}refreshTiles(t){for(const o in this._tiles)(this._isIdRenderable(o)||this._tiles[o].state=="errored")&&t.some(m=>m.equals(this._tiles[o].tileID.canonical))&&this._reloadTile(o,"expired")}_removeTile(t){const o=this._tiles[t];o&&(o.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(t){const o=t.sourceDataType;t.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&o==="content"&&(this.reload(t.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,o,m){const p=[],_=this.transform;if(!_)return p;const w=_.getCoveringTilesDetailsProvider().allowWorldCopies(),I=m?_.getCameraQueryGeometry(t):t,M=Z=>_.screenPointToMercatorCoordinate(Z,this.terrain),z=this.transformBbox(t,M,!w),O=this.transformBbox(I,M,!w),G=this.getIds(),U=a.a1.fromPoints(O);for(let Z=0;Z<G.length;Z++){const ne=this._tiles[G[Z]];if(ne.holdingForFade())continue;const _e=w?[ne.tileID]:[ne.tileID.unwrapTo(-1),ne.tileID.unwrapTo(0)],ge=Math.pow(2,_.zoom-ne.tileID.overscaledZ),ye=o*ne.queryPadding*a.$/ne.tileSize/ge;for(const we of _e){const Ie=U.map(Ce=>we.getTilePoint(new a.a0(Ce.x,Ce.y)));if(Ie.expandBy(ye),Ie.intersects(Qe)){const Ce=z.map(Oe=>we.getTilePoint(Oe)),Re=O.map(Oe=>we.getTilePoint(Oe));p.push({tile:ne,tileID:w?we:we.unwrapTo(0),queryGeometry:Ce,cameraQueryGeometry:Re,scale:ge})}}}return p}transformBbox(t,o,m){let p=t.map(o);if(m){const _=a.a1.fromPoints(t);_.shrinkBy(.001*Math.min(_.width(),_.height()));const w=_.map(o);a.a1.fromPoints(p).covers(w)||(p=p.map(I=>I.x>.5?new a.a0(I.x-1,I.y,I.z):I))}return p}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map(m=>this._tiles[m].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(Zt(this._source.type)){const t=A.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=t)return!0}return!1}setFeatureState(t,o,m){this._state.updateState(t=t||"_geojsonTileLayer",o,m)}removeFeatureState(t,o,m){this._state.removeFeatureState(t=t||"_geojsonTileLayer",o,m)}getFeatureState(t,o){return this._state.getState(t=t||"_geojsonTileLayer",o)}setDependencies(t,o,m){const p=this._tiles[t];p&&p.setDependencies(o,m)}reloadTilesForDependencies(t,o){for(const m in this._tiles)this._tiles[m].hasDependency(t,o)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(t,o))}}function $e(v,t){const o=Math.abs(2*v.wrap)-+(v.wrap<0),m=Math.abs(2*t.wrap)-+(t.wrap<0);return v.overscaledZ-t.overscaledZ||m-o||t.canonical.y-v.canonical.y||t.canonical.x-v.canonical.x}function Zt(v){return v==="raster"||v==="image"||v==="video"}Pt.maxOverzooming=10,Pt.maxUnderzooming=3;class fn{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=a.ag(t,0,1);let o=1,m=this._distances[o];const p=t*this.paddedLength+this.padding;for(;m<p&&o<this._distances.length;)m=this._distances[++o];const _=o-1,w=this._distances[_],I=m-w,M=I>0?(p-w)/I:0;return this.points[_].mult(1-M).add(this.points[o].mult(M))}}function Xt(v,t){let o=!0;return v==="always"||v!=="never"&&t!=="never"||(o=!1),o}class ln{constructor(t,o,m){const p=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(t/m),this.yCellCount=Math.ceil(o/m);for(let w=0;w<this.xCellCount*this.yCellCount;w++)p.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,m,p,_){this._forEachCell(o,m,p,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(m),this.bboxes.push(p),this.bboxes.push(_)}insertCircle(t,o,m,p){this._forEachCell(o-p,m-p,o+p,m+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(m),this.circles.push(p)}_insertBoxCell(t,o,m,p,_,w){this.boxCells[_].push(w)}_insertCircleCell(t,o,m,p,_,w){this.circleCells[_].push(w)}_query(t,o,m,p,_,w,I){if(m<0||t>this.width||p<0||o>this.height)return[];const M=[];if(t<=0&&o<=0&&this.width<=m&&this.height<=p){if(_)return[{key:null,x1:t,y1:o,x2:m,y2:p}];for(let z=0;z<this.boxKeys.length;z++)M.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const O=this.circles[3*z],G=this.circles[3*z+1],U=this.circles[3*z+2];M.push({key:this.circleKeys[z],x1:O-U,y1:G-U,x2:O+U,y2:G+U})}}else this._forEachCell(t,o,m,p,this._queryCell,M,{hitTest:_,overlapMode:w,seenUids:{box:{},circle:{}}},I);return M}query(t,o,m,p){return this._query(t,o,m,p,!1,null)}hitTest(t,o,m,p,_,w){return this._query(t,o,m,p,!0,_,w).length>0}hitTestCircle(t,o,m,p,_){const w=t-m,I=t+m,M=o-m,z=o+m;if(I<0||w>this.width||z<0||M>this.height)return!1;const O=[];return this._forEachCell(w,M,I,z,this._queryCellCircle,O,{hitTest:!0,overlapMode:p,circle:{x:t,y:o,radius:m},seenUids:{box:{},circle:{}}},_),O.length>0}_queryCell(t,o,m,p,_,w,I,M){const{seenUids:z,hitTest:O,overlapMode:G}=I,U=this.boxCells[_];if(U!==null){const ne=this.bboxes;for(const _e of U)if(!z.box[_e]){z.box[_e]=!0;const ge=4*_e,ye=this.boxKeys[_e];if(t<=ne[ge+2]&&o<=ne[ge+3]&&m>=ne[ge+0]&&p>=ne[ge+1]&&(!M||M(ye))&&(!O||!Xt(G,ye.overlapMode))&&(w.push({key:ye,x1:ne[ge],y1:ne[ge+1],x2:ne[ge+2],y2:ne[ge+3]}),O))return!0}}const Z=this.circleCells[_];if(Z!==null){const ne=this.circles;for(const _e of Z)if(!z.circle[_e]){z.circle[_e]=!0;const ge=3*_e,ye=this.circleKeys[_e];if(this._circleAndRectCollide(ne[ge],ne[ge+1],ne[ge+2],t,o,m,p)&&(!M||M(ye))&&(!O||!Xt(G,ye.overlapMode))){const we=ne[ge],Ie=ne[ge+1],Ce=ne[ge+2];if(w.push({key:ye,x1:we-Ce,y1:Ie-Ce,x2:we+Ce,y2:Ie+Ce}),O)return!0}}}return!1}_queryCellCircle(t,o,m,p,_,w,I,M){const{circle:z,seenUids:O,overlapMode:G}=I,U=this.boxCells[_];if(U!==null){const ne=this.bboxes;for(const _e of U)if(!O.box[_e]){O.box[_e]=!0;const ge=4*_e,ye=this.boxKeys[_e];if(this._circleAndRectCollide(z.x,z.y,z.radius,ne[ge+0],ne[ge+1],ne[ge+2],ne[ge+3])&&(!M||M(ye))&&!Xt(G,ye.overlapMode))return w.push(!0),!0}}const Z=this.circleCells[_];if(Z!==null){const ne=this.circles;for(const _e of Z)if(!O.circle[_e]){O.circle[_e]=!0;const ge=3*_e,ye=this.circleKeys[_e];if(this._circlesCollide(ne[ge],ne[ge+1],ne[ge+2],z.x,z.y,z.radius)&&(!M||M(ye))&&!Xt(G,ye.overlapMode))return w.push(!0),!0}}}_forEachCell(t,o,m,p,_,w,I,M){const z=this._convertToXCellCoord(t),O=this._convertToYCellCoord(o),G=this._convertToXCellCoord(m),U=this._convertToYCellCoord(p);for(let Z=z;Z<=G;Z++)for(let ne=O;ne<=U;ne++)if(_.call(this,t,o,m,p,this.xCellCount*ne+Z,w,I,M))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,m,p,_,w){const I=p-t,M=_-o,z=m+w;return z*z>I*I+M*M}_circleAndRectCollide(t,o,m,p,_,w,I){const M=(w-p)/2,z=Math.abs(t-(p+M));if(z>M+m)return!1;const O=(I-_)/2,G=Math.abs(o-(_+O));if(G>O+m)return!1;if(z<=M||G<=O)return!0;const U=z-M,Z=G-O;return U*U+Z*Z<=m*m}}function vn(v,t,o){const m=a.L();if(!v){const{vecSouth:G,vecEast:U}=ei(t),Z=k();Z[0]=U[0],Z[1]=U[1],Z[2]=G[0],Z[3]=G[1],p=Z,(O=(w=(_=Z)[0])*(z=_[3])-(M=_[2])*(I=_[1]))&&(p[0]=z*(O=1/O),p[1]=-I*O,p[2]=-M*O,p[3]=w*O),m[0]=Z[0],m[1]=Z[1],m[4]=Z[2],m[5]=Z[3]}var p,_,w,I,M,z,O;return a.N(m,m,[1/o,1/o,1]),m}function ui(v,t,o,m){if(v){const p=a.L();if(!t){const{vecSouth:_,vecEast:w}=ei(o);p[0]=w[0],p[1]=w[1],p[4]=_[0],p[5]=_[1]}return a.N(p,p,[m,m,1]),p}return o.pixelsToClipSpaceMatrix}function ei(v){const t=Math.cos(v.rollInRadians),o=Math.sin(v.rollInRadians),m=Math.cos(v.pitchInRadians),p=Math.cos(v.bearingInRadians),_=Math.sin(v.bearingInRadians),w=a.aq();w[0]=-p*m*o-_*t,w[1]=-_*m*o+p*t;const I=a.ar(w);I<1e-9?a.as(w):a.at(w,w,1/I);const M=a.aq();M[0]=p*m*t-_*o,M[1]=_*m*t+p*o;const z=a.ar(M);return z<1e-9?a.as(M):a.at(M,M,1/z),{vecEast:M,vecSouth:w}}function Zn(v,t,o,m){let p;m?(p=[v,t,m(v,t),1],a.av(p,p,o)):(p=[v,t,0,1],Xs(p,p,o));const _=p[3];return{point:new a.P(p[0]/_,p[1]/_),signedDistanceFromCamera:_,isOccluded:!1}}function gn(v,t){return .5+v/t*.5}function Un(v,t){return v.x>=-t[0]&&v.x<=t[0]&&v.y>=-t[1]&&v.y<=t[1]}function ir(v,t,o,m,p,_,w,I,M,z,O,G,U){const Z=o?v.textSizeData:v.iconSizeData,ne=a.am(Z,t.transform.zoom),_e=[256/t.width*2+1,256/t.height*2+1],ge=o?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ge.clear();const ye=v.lineVertexArray,we=o?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ie=t.transform.width/t.transform.height;let Ce=!1;for(let Re=0;Re<we.length;Re++){const Oe=we.get(Re);if(Oe.hidden||Oe.writingMode===a.an.vertical&&!Ce){ts(Oe.numGlyphs,ge);continue}Ce=!1;const Te=new a.P(Oe.anchorX,Oe.anchorY),qe={getElevation:U,pitchedLabelPlaneMatrix:m,lineVertexArray:ye,pitchWithMap:_,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:Te,unwrappedTileID:M,width:z,height:O,translation:G},st=En(Oe.anchorX,Oe.anchorY,qe);if(!Un(st.point,_e)){ts(Oe.numGlyphs,ge);continue}const nt=gn(t.transform.cameraToCenterDistance,st.signedDistanceFromCamera),it=a.ao(Z,ne,Oe),lt=_?it*t.transform.getPitchedTextCorrection(Oe.anchorX,Oe.anchorY,M)/nt:it*nt,Ut=yi({projectionContext:qe,pitchedLabelPlaneMatrixInverse:p,symbol:Oe,fontSize:lt,flip:!1,keepUpright:w,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ie,rotateToLine:I});Ce=Ut.useVertical,(Ut.notEnoughRoom||Ce||Ut.needsFlipping&&yi({projectionContext:qe,pitchedLabelPlaneMatrixInverse:p,symbol:Oe,fontSize:lt,flip:!0,keepUpright:w,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ie,rotateToLine:I}).notEnoughRoom)&&ts(Oe.numGlyphs,ge)}o?v.text.dynamicLayoutVertexBuffer.updateData(ge):v.icon.dynamicLayoutVertexBuffer.updateData(ge)}function $t(v,t,o,m,p,_,w,I){const M=_.glyphStartIndex+_.numGlyphs,z=_.lineStartIndex,O=_.lineStartIndex+_.lineLength,G=t.getoffsetX(_.glyphStartIndex),U=t.getoffsetX(M-1),Z=Ua(v*G,o,m,p,_.segment,z,O,I,w);if(!Z)return null;const ne=Ua(v*U,o,m,p,_.segment,z,O,I,w);return ne?I.projectionCache.anyProjectionOccluded?null:{first:Z,last:ne}:null}function pr(v,t,o,m){return v===a.an.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*m?{useVertical:!0}:(v===a.an.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function yi(v){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:o,symbol:m,fontSize:p,flip:_,keepUpright:w,glyphOffsetArray:I,dynamicLayoutVertexArray:M,aspectRatio:z,rotateToLine:O}=v,G=p/24,U=m.lineOffsetX*G,Z=m.lineOffsetY*G;let ne;if(m.numGlyphs>1){const _e=m.glyphStartIndex+m.numGlyphs,ge=m.lineStartIndex,ye=m.lineStartIndex+m.lineLength,we=$t(G,I,U,Z,_,m,O,t);if(!we)return{notEnoughRoom:!0};const Ie=An(we.first.point.x,we.first.point.y,t,o),Ce=An(we.last.point.x,we.last.point.y,t,o);if(w&&!_){const Re=pr(m.writingMode,Ie,Ce,z);if(Re)return Re}ne=[we.first];for(let Re=m.glyphStartIndex+1;Re<_e-1;Re++){const Oe=Ua(G*I.getoffsetX(Re),U,Z,_,m.segment,ge,ye,t,O);if(!Oe)return{notEnoughRoom:!0};ne.push(Oe)}ne.push(we.last)}else{if(w&&!_){const ge=Gt(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,ye=m.lineStartIndex+m.segment+1,we=new a.P(t.lineVertexArray.getx(ye),t.lineVertexArray.gety(ye)),Ie=Gt(we.x,we.y,t),Ce=Ie.signedDistanceFromCamera>0?Ie.point:Ss(t.tileAnchorPoint,we,ge,1,t),Re=An(ge.x,ge.y,t,o),Oe=An(Ce.x,Ce.y,t,o),Te=pr(m.writingMode,Re,Oe,z);if(Te)return Te}const _e=Ua(G*I.getoffsetX(m.glyphStartIndex),U,Z,_,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,t,O);if(!_e||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[_e]}for(const _e of ne)a.au(M,_e.point,_e.angle);return{}}function Ss(v,t,o,m,p){const _=v.add(v.sub(t)._unit()),w=Gt(_.x,_.y,p).point,I=o.sub(w);return o.add(I._mult(m/I.mag()))}function Ys(v,t,o){const m=t.projectionCache;if(m.projections[v])return m.projections[v];const p=new a.P(t.lineVertexArray.getx(v),t.lineVertexArray.gety(v)),_=Gt(p.x,p.y,t);if(_.signedDistanceFromCamera>0)return m.projections[v]=_.point,m.anyProjectionOccluded=m.anyProjectionOccluded||_.isOccluded,_.point;const w=v-o.direction;return Ss(o.distanceFromAnchor===0?t.tileAnchorPoint:new a.P(t.lineVertexArray.getx(w),t.lineVertexArray.gety(w)),p,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,t)}function Gt(v,t,o){const m=v+o.translation[0],p=t+o.translation[1];let _;return o.pitchWithMap?(_=Zn(m,p,o.pitchedLabelPlaneMatrix,o.getElevation),_.isOccluded=!1):(_=o.transform.projectTileCoordinates(m,p,o.unwrappedTileID,o.getElevation),_.point.x=(.5*_.point.x+.5)*o.width,_.point.y=(.5*-_.point.y+.5)*o.height),_}function An(v,t,o,m){if(o.pitchWithMap){const p=[v,t,0,1];return a.av(p,p,m),o.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],o.unwrappedTileID,o.getElevation).point}return{x:v/o.width*2-1,y:t/o.height*2-1}}function En(v,t,o){return o.transform.projectTileCoordinates(v,t,o.unwrappedTileID,o.getElevation)}function oa(v,t,o){return v._unit()._perp()._mult(t*o)}function uc(v,t,o,m,p,_,w,I,M){if(I.projectionCache.offsets[v])return I.projectionCache.offsets[v];const z=o.add(t);if(v+M.direction<m||v+M.direction>=p)return I.projectionCache.offsets[v]=z,z;const O=Ys(v+M.direction,I,M),G=oa(O.sub(o),w,M.direction),U=o.add(G),Z=O.add(G);return I.projectionCache.offsets[v]=a.aw(_,z,U,Z)||z,I.projectionCache.offsets[v]}function Ua(v,t,o,m,p,_,w,I,M){const z=m?v-t:v+t;let O=z>0?1:-1,G=0;m&&(O*=-1,G=Math.PI),O<0&&(G+=Math.PI);let U,Z=O>0?_+p:_+p+1;I.projectionCache.cachedAnchorPoint?U=I.projectionCache.cachedAnchorPoint:(U=Gt(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=U);let ne,_e,ge=U,ye=U,we=0,Ie=0;const Ce=Math.abs(z),Re=[];let Oe;for(;we+Ie<=Ce;){if(Z+=O,Z<_||Z>=w)return null;we+=Ie,ye=ge,_e=ne;const st={absOffsetX:Ce,direction:O,distanceFromAnchor:we,previousVertex:ye};if(ge=Ys(Z,I,st),o===0)Re.push(ye),Oe=ge.sub(ye);else{let nt;const it=ge.sub(ye);nt=it.mag()===0?oa(Ys(Z+O,I,st).sub(ge),o,O):oa(it,o,O),_e||(_e=ye.add(nt)),ne=uc(Z,nt,ge,_,w,_e,o,I,st),Re.push(_e),Oe=ne.sub(_e)}Ie=Oe.mag()}const Te=Oe._mult((Ce-we)/Ie)._add(_e||ye),qe=G+Math.atan2(ge.y-ye.y,ge.x-ye.x);return Re.push(Te),{point:Te,angle:M?qe:0,path:Re}}const Mn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ts(v,t){for(let o=0;o<v;o++){const m=t.length;t.resize(m+4),t.float32.set(Mn,3*m)}}function Xs(v,t,o){const m=t[0],p=t[1];return v[0]=o[0]*m+o[4]*p+o[12],v[1]=o[1]*m+o[5]*p+o[13],v[3]=o[3]*m+o[7]*p+o[15],v}const Fi=100;class Ll{constructor(t,o=new ln(t.width+200,t.height+200,25),m=new ln(t.width+200,t.height+200,25)){this.transform=t,this.grid=o,this.ignoredGrid=m,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Fi,this.screenBottomBoundary=t.height+Fi,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,m,p,_,w,I,M,z,O,G,U){const Z=this.projectAndGetPerspectiveRatio(t.anchorPointX+M[0],t.anchorPointY+M[1],_,O,U),ne=m*Z.perspectiveRatio;let _e;if(w||I)_e=this._projectCollisionBox(t,ne,p,_,w,I,M,Z,O,G,U);else{const Oe=Z.x+(G?G.x*ne:0),Te=Z.y+(G?G.y*ne:0);_e={allPointsOccluded:!1,box:[Oe+t.x1*ne,Te+t.y1*ne,Oe+t.x2*ne,Te+t.y2*ne]}}const[ge,ye,we,Ie]=_e.box,Ce=w?_e.allPointsOccluded:Z.isOccluded;let Re=Ce;return Re||(Re=Z.perspectiveRatio<this.perspectiveRatioCutoff),Re||(Re=!this.isInsideGrid(ge,ye,we,Ie)),Re||o!=="always"&&this.grid.hitTest(ge,ye,we,Ie,o,z)?{box:[ge,ye,we,Ie],placeable:!1,offscreen:!1,occluded:Ce}:{box:[ge,ye,we,Ie],placeable:!0,offscreen:this.isOffscreen(ge,ye,we,Ie),occluded:Ce}}placeCollisionCircles(t,o,m,p,_,w,I,M,z,O,G,U,Z,ne){const _e=[],ge=new a.P(o.anchorX,o.anchorY),ye=this.getPerspectiveRatio(ge.x,ge.y,w,ne),we=(z?_*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,w)/ye:_*ye)/a.aA,Ie={getElevation:ne,pitchedLabelPlaneMatrix:I,lineVertexArray:m,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:Z},Ce=$t(we,p,o.lineOffsetX*we,o.lineOffsetY*we,!1,o,!1,Ie);let Re=!1,Oe=!1,Te=!0;if(Ce){const qe=.5*G*ye+U,st=new a.P(-100,-100),nt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),it=new fn,lt=Ce.first,Ut=Ce.last;let jt=[];for(let Tn=lt.path.length-1;Tn>=1;Tn--)jt.push(lt.path[Tn]);for(let Tn=1;Tn<Ut.path.length;Tn++)jt.push(Ut.path[Tn]);const Mt=2.5*qe;if(z){const Tn=this.projectPathToScreenSpace(jt,Ie);jt=Tn.some(Yn=>Yn.signedDistanceFromCamera<=0)?[]:Tn.map(Yn=>Yn.point)}let Jt=[];if(jt.length>0){const Tn=jt[0].clone(),Yn=jt[0].clone();for(let Si=1;Si<jt.length;Si++)Tn.x=Math.min(Tn.x,jt[Si].x),Tn.y=Math.min(Tn.y,jt[Si].y),Yn.x=Math.max(Yn.x,jt[Si].x),Yn.y=Math.max(Yn.y,jt[Si].y);Jt=Tn.x>=st.x&&Yn.x<=nt.x&&Tn.y>=st.y&&Yn.y<=nt.y?[jt]:Yn.x<st.x||Tn.x>nt.x||Yn.y<st.y||Tn.y>nt.y?[]:a.ax([jt],st.x,st.y,nt.x,nt.y)}for(const Tn of Jt){it.reset(Tn,.25*qe);let Yn=0;Yn=it.length<=.5*qe?1:Math.ceil(it.paddedLength/Mt)+1;for(let Si=0;Si<Yn;Si++){const ni=Si/Math.max(Yn-1,1),ki=it.lerp(ni),ai=ki.x+Fi,ii=ki.y+Fi;_e.push(ai,ii,qe,0);const si=ai-qe,vr=ii-qe,qn=ai+qe,sr=ii+qe;if(Te=Te&&this.isOffscreen(si,vr,qn,sr),Oe=Oe||this.isInsideGrid(si,vr,qn,sr),t!=="always"&&this.grid.hitTestCircle(ai,ii,qe,t,O)&&(Re=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Re}}}}return{circles:!M&&Re||!Oe||ye<this.perspectiveRatioCutoff?[]:_e,offscreen:Te,collisionDetected:Re}}projectPathToScreenSpace(t,o){const m=function(p,_){const w=a.L();return a.ap(w,_.pitchedLabelPlaneMatrix),p.map(I=>{const M=Zn(I.x,I.y,w,_.getElevation),z=_.transform.projectTileCoordinates(M.point.x,M.point.y,_.unwrappedTileID,_.getElevation);return z.point.x=(.5*z.point.x+.5)*_.width,z.point.y=(.5*-z.point.y+.5)*_.height,z})}(t,o);return function(p){let _=0,w=0,I=0,M=0;for(let z=0;z<p.length;z++)p[z].isOccluded?(I=z+1,M=0):(M++,M>w&&(w=M,_=I));return p.slice(_,_+w)}(m)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[],m=new a.a1;for(const G of t){const U=new a.P(G.x+Fi,G.y+Fi);m.extend(U),o.push(U)}const{minX:p,minY:_,maxX:w,maxY:I}=m,M=this.grid.query(p,_,w,I).concat(this.ignoredGrid.query(p,_,w,I)),z={},O={};for(const G of M){const U=G.key;if(z[U.bucketInstanceId]===void 0&&(z[U.bucketInstanceId]={}),z[U.bucketInstanceId][U.featureIndex])continue;const Z=[new a.P(G.x1,G.y1),new a.P(G.x2,G.y1),new a.P(G.x2,G.y2),new a.P(G.x1,G.y2)];a.ay(o,Z)&&(z[U.bucketInstanceId][U.featureIndex]=!0,O[U.bucketInstanceId]===void 0&&(O[U.bucketInstanceId]=[]),O[U.bucketInstanceId].push(U.featureIndex))}return O}insertCollisionBox(t,o,m,p,_,w){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:_,collisionGroupID:w,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,m,p,_,w){const I=m?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:_,collisionGroupID:w,overlapMode:o};for(let z=0;z<t.length;z+=4)I.insertCircle(M,t[z],t[z+1],t[z+2])}projectAndGetPerspectiveRatio(t,o,m,p,_){if(_){let w;p?(w=[t,o,p(t,o),1],a.av(w,w,_)):(w=[t,o,0,1],Xs(w,w,_));const I=w[3];return{x:(w[0]/I+1)/2*this.transform.width+Fi,y:(-w[1]/I+1)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const w=this.transform.projectTileCoordinates(t,o,m,p);return{x:(w.point.x+1)/2*this.transform.width+Fi,y:(1-w.point.y)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(t,o,m,p){const _=this.transform.projectTileCoordinates(t,o,m,p);return .5+this.transform.cameraToCenterDistance/_.signedDistanceFromCamera*.5}isOffscreen(t,o,m,p){return m<Fi||t>=this.screenRightBoundary||p<Fi||o>this.screenBottomBoundary}isInsideGrid(t,o,m,p){return m>=0&&t<this.gridRightBoundary&&p>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=a.af([]);return a.M(t,t,[-100,-100,0]),t}_projectCollisionBox(t,o,m,p,_,w,I,M,z,O,G){let U=1,Z=0,ne=0,_e=1;const ge=t.anchorPointX+I[0],ye=t.anchorPointY+I[1];if(w&&!_){const jt=this.projectAndGetPerspectiveRatio(ge+1,ye,p,z,G),Mt=jt.x-M.x,Jt=Math.atan((jt.y-M.y)/Mt)+(Mt<0?Math.PI:0),Tn=Math.sin(Jt),Yn=Math.cos(Jt);U=Yn,Z=Tn,ne=-Tn,_e=Yn}else if(!w&&_){const jt=ei(this.transform);U=jt.vecEast[0],Z=jt.vecEast[1],ne=jt.vecSouth[0],_e=jt.vecSouth[1]}let we=M.x,Ie=M.y,Ce=o;_&&(we=ge,Ie=ye,Ce=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Ce*=this.transform.getPitchedTextCorrection(ge,ye,p),O||(Ce*=a.ag(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(we+=U*O.x*Ce+ne*O.y*Ce,Ie+=Z*O.x*Ce+_e*O.y*Ce);const Re=t.x1*Ce,Oe=t.x2*Ce,Te=(Re+Oe)/2,qe=t.y1*Ce,st=t.y2*Ce,nt=(qe+st)/2,it=[{offsetX:Re,offsetY:qe},{offsetX:Te,offsetY:qe},{offsetX:Oe,offsetY:qe},{offsetX:Oe,offsetY:nt},{offsetX:Oe,offsetY:st},{offsetX:Te,offsetY:st},{offsetX:Re,offsetY:st},{offsetX:Re,offsetY:nt}];let lt=[];for(const{offsetX:jt,offsetY:Mt}of it)lt.push(new a.P(we+U*jt+ne*Mt,Ie+Z*jt+_e*Mt));let Ut=!1;if(_){const jt=lt.map(Mt=>this.projectAndGetPerspectiveRatio(Mt.x,Mt.y,p,z,G));Ut=jt.some(Mt=>!Mt.isOccluded),lt=jt.map(Mt=>new a.P(Mt.x,Mt.y))}else Ut=!0;return{box:a.az(lt),allPointsOccluded:!Ut}}}class zl{constructor(t,o,m,p){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):p&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class ns{constructor(t,o,m,p,_){this.text=new zl(t?t.text:null,o,m,_),this.icon=new zl(t?t.icon:null,o,p,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Vl{constructor(t,o,m){this.text=t,this.icon=o,this.skipFade=m}}class la{constructor(t,o,m,p,_){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=m,this.bucketIndex=p,this.tileID=_}}class bi{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:m=>m.collisionGroupID===o}}return this.collisionGroups[t]}}function Tm(v,t,o,m,p){const{horizontalAlign:_,verticalAlign:w}=a.aG(v);return new a.P(-(_-.5)*t+m[0]*p,-(w-.5)*o+m[1]*p)}class Bl{constructor(t,o,m,p,_){this.transform=t.clone(),this.terrain=o,this.collisionIndex=new Ll(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new bi(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const o=this.terrain;return o?(m,p)=>o.getElevation(t,m,p):null}getBucketParts(t,o,m,p){const _=m.getBucket(o),w=m.latestFeatureIndex;if(!_||!w||o.id!==_.layerIds[0])return;const I=m.collisionBoxArray,M=_.layers[0].layout,z=_.layers[0].paint,O=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),G=m.tileSize/a.$,U=m.tileID.toUnwrapped(),Z=M.get("text-rotation-alignment")==="map",ne=a.aB(m,1,this.transform.zoom),_e=a.aC(this.collisionIndex.transform,m,z.get("text-translate"),z.get("text-translate-anchor")),ge=a.aC(this.collisionIndex.transform,m,z.get("icon-translate"),z.get("icon-translate-anchor")),ye=vn(Z,this.transform,ne);this.retainedQueryData[_.bucketInstanceId]=new la(_.bucketInstanceId,w,_.sourceLayerIndex,_.index,m.tileID);const we={bucket:_,layout:M,translationText:_e,translationIcon:ge,unwrappedTileID:U,pitchedLabelPlaneMatrix:ye,scale:O,textPixelRatio:G,holdingForFade:m.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:a.am(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(p)for(const Ie of _.sortKeyRanges){const{sortKey:Ce,symbolInstanceStart:Re,symbolInstanceEnd:Oe}=Ie;t.push({sortKey:Ce,symbolInstanceStart:Re,symbolInstanceEnd:Oe,parameters:we})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:we})}attemptAnchorPlacement(t,o,m,p,_,w,I,M,z,O,G,U,Z,ne,_e,ge,ye,we,Ie,Ce){const Re=a.aD[t.textAnchor],Oe=[t.textOffset0,t.textOffset1],Te=Tm(Re,m,p,Oe,_),qe=this.collisionIndex.placeCollisionBox(o,U,M,z,O,I,w,ge,G.predicate,Ie,Te,Ce);if((!we||this.collisionIndex.placeCollisionBox(we,U,M,z,O,I,w,ye,G.predicate,Ie,Te,Ce).placeable)&&qe.placeable){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(st=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:Oe,width:m,height:p,anchor:Re,textBoxScale:_,prevAnchor:st},this.markUsedJustification(ne,Re,Z,_e),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,_e,Z),this.placedOrientations[Z.crossTileID]=_e),{shift:Te,placedGlyphBoxes:qe}}}placeLayerBucketPart(t,o,m){const{bucket:p,layout:_,translationText:w,translationIcon:I,unwrappedTileID:M,pitchedLabelPlaneMatrix:z,textPixelRatio:O,holdingForFade:G,collisionBoxArray:U,partiallyEvaluatedTextSize:Z,collisionGroup:ne}=t.parameters,_e=_.get("text-optional"),ge=_.get("icon-optional"),ye=a.aE(_,"text-overlap","text-allow-overlap"),we=ye==="always",Ie=a.aE(_,"icon-overlap","icon-allow-overlap"),Ce=Ie==="always",Re=_.get("text-rotation-alignment")==="map",Oe=_.get("text-pitch-alignment")==="map",Te=_.get("icon-text-fit")!=="none",qe=_.get("symbol-z-order")==="viewport-y",st=we&&(Ce||!p.hasIconData()||ge),nt=Ce&&(we||!p.hasTextData()||_e);!p.collisionArrays&&U&&p.deserializeCollisionBoxes(U);const it=this.retainedQueryData[p.bucketInstanceId].tileID,lt=this._getTerrainElevationFunc(it),Ut=this.transform.getFastPathSimpleProjectionMatrix(it),jt=(Mt,Jt,Tn)=>{var Yn,Si;if(o[Mt.crossTileID])return;if(G)return void(this.placements[Mt.crossTileID]=new Vl(!1,!1,!1));let ni=!1,ki=!1,ai=!0,ii=null,si={box:null,placeable:!1,offscreen:null,occluded:!1},vr={placeable:!1},qn=null,sr=null,_r=null,Ms=0,Ds=0,Rs=0;Jt.textFeatureIndex?Ms=Jt.textFeatureIndex:Mt.useRuntimeCollisionCircles&&(Ms=Mt.featureIndex),Jt.verticalTextFeatureIndex&&(Ds=Jt.verticalTextFeatureIndex);const Ka=Jt.textBox;if(Ka){const Xr=Bi=>{let hi=a.an.horizontal;if(p.allowVerticalPlacement&&!Bi&&this.prevPlacement){const Ur=this.prevPlacement.placedOrientations[Mt.crossTileID];Ur&&(this.placedOrientations[Mt.crossTileID]=Ur,hi=Ur,this.markUsedOrientation(p,hi,Mt))}return hi},Ma=(Bi,hi)=>{if(p.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&Jt.verticalTextBox){for(const Ur of p.writingModes)if(Ur===a.an.vertical?(si=hi(),vr=si):si=Bi(),si&&si.placeable)break}else si=Bi()},Ls=Mt.textAnchorOffsetStartIndex,uo=Mt.textAnchorOffsetEndIndex;if(uo===Ls){const Bi=(hi,Ur)=>{const Xi=this.collisionIndex.placeCollisionBox(hi,ye,O,it,M,Oe,Re,w,ne.predicate,lt,void 0,Ut);return Xi&&Xi.placeable&&(this.markUsedOrientation(p,Ur,Mt),this.placedOrientations[Mt.crossTileID]=Ur),Xi};Ma(()=>Bi(Ka,a.an.horizontal),()=>{const hi=Jt.verticalTextBox;return p.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&hi?Bi(hi,a.an.vertical):{box:null,offscreen:null}}),Xr(si&&si.placeable)}else{let Bi=a.aD[(Si=(Yn=this.prevPlacement)===null||Yn===void 0?void 0:Yn.variableOffsets[Mt.crossTileID])===null||Si===void 0?void 0:Si.anchor];const hi=(Xi,yp,$v)=>{const Wh=Xi.x2-Xi.x1,mu=Xi.y2-Xi.y1,sl=Mt.textBoxScale,os=Te&&Ie==="never"?yp:null;let yr=null,ls=ye==="never"?1:2,Zh="never";Bi&&ls++;for(let zs=0;zs<ls;zs++){for(let Kh=Ls;Kh<uo;Kh++){const Yh=p.textAnchorOffsets.get(Kh);if(Bi&&Yh.textAnchor!==Bi)continue;const pu=this.attemptAnchorPlacement(Yh,Xi,Wh,mu,sl,Re,Oe,O,it,M,ne,Zh,Mt,p,$v,w,I,os,lt);if(pu&&(yr=pu.placedGlyphBoxes,yr&&yr.placeable))return ni=!0,ii=pu.shift,yr}Bi?Bi=null:Zh=ye}return m&&!yr&&(yr={box:this.collisionIndex.placeCollisionBox(Ka,"always",O,it,M,Oe,Re,w,ne.predicate,lt,void 0,Ut).box,offscreen:!1,placeable:!1,occluded:!1}),yr};Ma(()=>hi(Ka,Jt.iconBox,a.an.horizontal),()=>{const Xi=Jt.verticalTextBox;return p.allowVerticalPlacement&&(!si||!si.placeable)&&Mt.numVerticalGlyphVertices>0&&Xi?hi(Xi,Jt.verticalIconBox,a.an.vertical):{box:null,occluded:!0,offscreen:null}}),si&&(ni=si.placeable,ai=si.offscreen);const Ur=Xr(si&&si.placeable);if(!ni&&this.prevPlacement){const Xi=this.prevPlacement.variableOffsets[Mt.crossTileID];Xi&&(this.variableOffsets[Mt.crossTileID]=Xi,this.markUsedJustification(p,Xi.anchor,Mt,Ur))}}}if(qn=si,ni=qn&&qn.placeable,ai=qn&&qn.offscreen,Mt.useRuntimeCollisionCircles){const Xr=p.text.placedSymbolArray.get(Mt.centerJustifiedTextSymbolIndex),Ma=a.ao(p.textSizeData,Z,Xr),Ls=_.get("text-padding");sr=this.collisionIndex.placeCollisionCircles(ye,Xr,p.lineVertexArray,p.glyphOffsetArray,Ma,M,z,m,Oe,ne.predicate,Mt.collisionCircleDiameter,Ls,w,lt),sr.circles.length&&sr.collisionDetected&&!m&&a.w("Collisions detected, but collision boxes are not shown"),ni=we||sr.circles.length>0&&!sr.collisionDetected,ai=ai&&sr.offscreen}if(Jt.iconFeatureIndex&&(Rs=Jt.iconFeatureIndex),Jt.iconBox){const Xr=Ma=>this.collisionIndex.placeCollisionBox(Ma,Ie,O,it,M,Oe,Re,I,ne.predicate,lt,Te&&ii?ii:void 0,Ut);vr&&vr.placeable&&Jt.verticalIconBox?(_r=Xr(Jt.verticalIconBox),ki=_r.placeable):(_r=Xr(Jt.iconBox),ki=_r.placeable),ai=ai&&_r.offscreen}const hu=_e||Mt.numHorizontalGlyphVertices===0&&Mt.numVerticalGlyphVertices===0,fu=ge||Mt.numIconVertices===0;hu||fu?fu?hu||(ki=ki&&ni):ni=ki&&ni:ki=ni=ki&&ni;const al=ki&&_r.placeable;if(ni&&qn.placeable&&this.collisionIndex.insertCollisionBox(qn.box,ye,_.get("text-ignore-placement"),p.bucketInstanceId,vr&&vr.placeable&&Ds?Ds:Ms,ne.ID),al&&this.collisionIndex.insertCollisionBox(_r.box,Ie,_.get("icon-ignore-placement"),p.bucketInstanceId,Rs,ne.ID),sr&&ni&&this.collisionIndex.insertCollisionCircles(sr.circles,ye,_.get("text-ignore-placement"),p.bucketInstanceId,Ms,ne.ID),m&&this.storeCollisionData(p.bucketInstanceId,Tn,Jt,qn,_r,sr),Mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Mt.crossTileID]=new Vl((ni||st)&&!(qn!=null&&qn.occluded),(ki||nt)&&!(_r!=null&&_r.occluded),ai||p.justReloaded),o[Mt.crossTileID]=!0};if(qe){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Mt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Jt=Mt.length-1;Jt>=0;--Jt){const Tn=Mt[Jt];jt(p.symbolInstances.get(Tn),p.collisionArrays[Tn],Tn)}}else for(let Mt=t.symbolInstanceStart;Mt<t.symbolInstanceEnd;Mt++)jt(p.symbolInstances.get(Mt),p.collisionArrays[Mt],Mt);p.justReloaded=!1}storeCollisionData(t,o,m,p,_,w){if(m.textBox||m.iconBox){let I,M;this.collisionBoxArrays.has(t)?I=this.collisionBoxArrays.get(t):(I=new Map,this.collisionBoxArrays.set(t,I)),I.has(o)?M=I.get(o):(M={text:null,icon:null},I.set(o,M)),m.textBox&&(M.text=p.box),m.iconBox&&(M.icon=_.box)}if(w){let I=this.collisionCircleArrays[t];I===void 0&&(I=this.collisionCircleArrays[t]=[]);for(let M=0;M<w.circles.length;M+=4)I.push(w.circles[M+0]-Fi),I.push(w.circles[M+1]-Fi),I.push(w.circles[M+2]),I.push(w.collisionDetected?1:0)}}markUsedJustification(t,o,m,p){let _;_=p===a.an.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[a.aF(o)];const w=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const I of w)I>=0&&(t.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:m.crossTileID)}markUsedOrientation(t,o,m){const p=o===a.an.horizontal||o===a.an.horizontalOnly?o:0,_=o===a.an.vertical?o:0,w=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const I of w)t.text.placedSymbolArray.get(I).placedOrientation=p;m.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let m=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const p=o?o.symbolFadeChange(t):1,_=o?o.opacities:{},w=o?o.variableOffsets:{},I=o?o.placedOrientations:{};for(const M in this.placements){const z=this.placements[M],O=_[M];O?(this.opacities[M]=new ns(O,p,z.text,z.icon),m=m||z.text!==O.text.placed||z.icon!==O.icon.placed):(this.opacities[M]=new ns(null,p,z.text,z.icon,z.skipFade),m=m||z.text||z.icon)}for(const M in _){const z=_[M];if(!this.opacities[M]){const O=new ns(z,p,!1,!1);O.isHidden()||(this.opacities[M]=O,m=m||z.text.placed||z.icon.placed)}}for(const M in w)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=w[M]);for(const M in I)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=I[M]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const m={};for(const p of o){const _=p.getBucket(t);_&&p.latestFeatureIndex&&t.id===_.layerIds[0]&&this.updateBucketOpacities(_,p.tileID,m,p.collisionBoxArray)}}updateBucketOpacities(t,o,m,p){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const _=t.layers[0],w=_.layout,I=new ns(null,0,!1,!1,!0),M=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),O=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=w.get("text-rotation-alignment")==="map",U=w.get("text-pitch-alignment")==="map",Z=w.get("icon-text-fit")!=="none",ne=new ns(null,0,M&&(z||!t.hasIconData()||w.get("icon-optional")),z&&(M||!t.hasTextData()||w.get("text-optional")),!0);!t.collisionArrays&&p&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(p);const _e=(ye,we,Ie)=>{for(let Ce=0;Ce<we/4;Ce++)ye.opacityVertexArray.emplaceBack(Ie);ye.hasVisibleVertices=ye.hasVisibleVertices||Ie!==Ol},ge=this.collisionBoxArrays.get(t.bucketInstanceId);for(let ye=0;ye<t.symbolInstances.length;ye++){const we=t.symbolInstances.get(ye),{numHorizontalGlyphVertices:Ie,numVerticalGlyphVertices:Ce,crossTileID:Re}=we;let Oe=this.opacities[Re];m[Re]?Oe=I:Oe||(Oe=ne,this.opacities[Re]=Oe),m[Re]=!0;const Te=we.numIconVertices>0,qe=this.placedOrientations[we.crossTileID],st=qe===a.an.vertical,nt=qe===a.an.horizontal||qe===a.an.horizontalOnly;if(Ie>0||Ce>0){const lt=Mm(Oe.text);_e(t.text,Ie,st?Ol:lt),_e(t.text,Ce,nt?Ol:lt);const Ut=Oe.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(Jt=>{Jt>=0&&(t.text.placedSymbolArray.get(Jt).hidden=Ut||st?1:0)}),we.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=Ut||nt?1:0);const jt=this.variableOffsets[we.crossTileID];jt&&this.markUsedJustification(t,jt.anchor,we,qe);const Mt=this.placedOrientations[we.crossTileID];Mt&&(this.markUsedJustification(t,"left",we,Mt),this.markUsedOrientation(t,Mt,we))}if(Te){const lt=Mm(Oe.icon),Ut=!(Z&&we.verticalPlacedIconSymbolIndex&&st);we.placedIconSymbolIndex>=0&&(_e(t.icon,we.numIconVertices,Ut?lt:Ol),t.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(_e(t.icon,we.numVerticalIconVertices,Ut?Ol:lt),t.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}const it=ge&&ge.has(ye)?ge.get(ye):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const lt=t.collisionArrays[ye];if(lt){let Ut=new a.P(0,0);if(lt.textBox||lt.verticalTextBox){let jt=!0;if(O){const Mt=this.variableOffsets[Re];Mt?(Ut=Tm(Mt.anchor,Mt.width,Mt.height,Mt.textOffset,Mt.textBoxScale),G&&Ut._rotate(U?-this.transform.bearingInRadians:this.transform.bearingInRadians)):jt=!1}if(lt.textBox||lt.verticalTextBox){let Mt;lt.textBox&&(Mt=st),lt.verticalTextBox&&(Mt=nt),cc(t.textCollisionBox.collisionVertexArray,Oe.text.placed,!jt||Mt,it.text,Ut.x,Ut.y)}}if(lt.iconBox||lt.verticalIconBox){const jt=!!(!nt&&lt.verticalIconBox);let Mt;lt.iconBox&&(Mt=jt),lt.verticalIconBox&&(Mt=!jt),cc(t.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Mt,it.icon,Z?Ut.x:0,Z?Ut.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const m=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*m>t}setStale(){this.stale=!0}}function cc(v,t,o,m,p,_){m&&m.length!==0||(m=[0,0,0,0]);const w=m[0]-Fi,I=m[1]-Fi,M=m[2]-Fi,z=m[3]-Fi;v.emplaceBack(t?1:0,o?1:0,p||0,_||0,w,I),v.emplaceBack(t?1:0,o?1:0,p||0,_||0,M,I),v.emplaceBack(t?1:0,o?1:0,p||0,_||0,M,z),v.emplaceBack(t?1:0,o?1:0,p||0,_||0,w,z)}const Js=Math.pow(2,25),ks=Math.pow(2,24),Pm=Math.pow(2,17),Im=Math.pow(2,16),Am=Math.pow(2,9),Ro=Math.pow(2,8),Em=Math.pow(2,1);function Mm(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const t=v.placed?1:0,o=Math.floor(127*v.opacity);return o*Js+t*ks+o*Pm+t*Im+o*Am+t*Ro+o*Em+t}const Ol=0;class mv{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,m,p,_){const w=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(w,p,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((I,M)=>I.sortKey-M.sortKey));this._currentPartIndex<w.length;)if(o.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,_())return!0;return!1}}class Dm{constructor(t,o,m,p,_,w,I,M){this.placement=new Bl(t,o,w,I,M),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(t,o,m){const p=A.now(),_=()=>!this._forceFullPlacement&&A.now()-p>2;for(;this._currentPlacementIndex>=0;){const w=o[t[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=I)&&(!w.maxzoom||w.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new mv(w)),this._inProgressLayer.continuePlacement(m[w.source],this.placement,this._showCollisionBoxes,w,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Lo=512/a.$/2;class nh{constructor(t,o,m){this.tileID=t,this.bucketInstanceId=m,this._symbolsByKey={};const p=new Map;for(let _=0;_<o.length;_++){const w=o.get(_),I=w.key,M=p.get(I);M?M.push(w):p.set(I,[w])}for(const[_,w]of p){const I={positions:w.map(M=>({x:Math.floor(M.anchorX*Lo),y:Math.floor(M.anchorY*Lo)})),crossTileIDs:w.map(M=>M.crossTileID)};if(I.positions.length>128){const M=new a.aH(I.positions.length,16,Uint16Array);for(const{x:z,y:O}of I.positions)M.add(z,O);M.finish(),delete I.positions,I.index=M}this._symbolsByKey[_]=I}}getScaledCoordinates(t,o){const{x:m,y:p,z:_}=this.tileID.canonical,{x:w,y:I,z:M}=o.canonical,z=Lo/Math.pow(2,M-_),O=(I*a.$+t.anchorY)*z,G=p*a.$*Lo;return{x:Math.floor((w*a.$+t.anchorX)*z-m*a.$*Lo),y:Math.floor(O-G)}}findMatches(t,o,m){const p=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let _=0;_<t.length;_++){const w=t.get(_);if(w.crossTileID)continue;const I=this._symbolsByKey[w.key];if(!I)continue;const M=this.getScaledCoordinates(w,o);if(I.index){const z=I.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(const O of z){const G=I.crossTileIDs[O];if(!m[G]){m[G]=!0,w.crossTileID=G;break}}}else if(I.positions)for(let z=0;z<I.positions.length;z++){const O=I.positions[z],G=I.crossTileIDs[z];if(Math.abs(O.x-M.x)<=p&&Math.abs(O.y-M.y)<=p&&!m[G]){m[G]=!0,w.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class ih{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const m in this.indexes){const p=this.indexes[m],_={};for(const w in p){const I=p[w];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+o),_[I.tileID.key]=I}this.indexes[m]=_}this.lng=t}addBucket(t,o,m){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let _=0;_<o.symbolInstances.length;_++)o.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const p=this.usedCrossTileIDs[t.overscaledZ];for(const _ in this.indexes){const w=this.indexes[_];if(Number(_)>t.overscaledZ)for(const I in w){const M=w[I];M.tileID.isChildOf(t)&&M.findMatches(o.symbolInstances,t,p)}else{const I=w[t.scaledTo(Number(_)).key];I&&I.findMatches(o.symbolInstances,t,p)}}for(let _=0;_<o.symbolInstances.length;_++){const w=o.symbolInstances.get(_);w.crossTileID||(w.crossTileID=m.generate(),p[w.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new nh(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const m of o.getCrossTileIDsLists())for(const p of m)delete this.usedCrossTileIDs[t][p]}removeStaleBuckets(t){let o=!1;for(const m in this.indexes){const p=this.indexes[m];for(const _ in p)t[p[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,p[_]),delete p[_],o=!0)}return o}}class dc{constructor(){this.layerIndexes={},this.crossTileIDs=new ih,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,m){let p=this.layerIndexes[t.id];p===void 0&&(p=this.layerIndexes[t.id]=new Rm);let _=!1;const w={};p.handleWrapJump(m);for(const I of o){const M=I.getBucket(t);M&&t.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(I.tileID,M,this.crossTileIDs)&&(_=!0),w[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(w)&&(_=!0),_}pruneUnusedLayers(t){const o={};t.forEach(m=>{o[m]=!0});for(const m in this.layerIndexes)o[m]||delete this.layerIndexes[m]}}var hc="void main() {fragColor=vec4(1.0);}";const Ga={prelude:Bn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Bn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Bn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Bn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Bn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Bn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Bn(hc,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Bn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Bn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Bn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Bn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Bn(hc,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Bn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Bn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Bn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Bn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Bn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Bn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Bn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Bn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Bn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Bn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Bn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Bn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Bn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Bn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Bn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Bn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Bn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Bn(v,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=t.match(/in ([\w]+) ([\w]+)/g),p=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=_?_.concat(p):p,I={};return{fragmentSource:v=v.replace(o,(M,z,O,G,U)=>(I[U]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${U}
in ${O} ${G} ${U};
#else
uniform ${O} ${G} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${O} ${G} ${U} = u_${U};
#endif
`)),vertexSource:t=t.replace(o,(M,z,O,G,U)=>{const Z=G==="float"?"vec2":"vec4",ne=U.match(/color/)?"color":Z;return I[U]?z==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
in ${O} ${Z} a_${U};
out ${O} ${G} ${U};
#else
uniform ${O} ${G} u_${U};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${O} ${G} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${ne}(a_${U}, u_${U}_t);
#else
    ${O} ${G} ${U} = u_${U};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
in ${O} ${Z} a_${U};
#else
uniform ${O} ${G} u_${U};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${O} ${G} ${U} = a_${U};
#else
    ${O} ${G} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${O} ${G} ${U} = unpack_mix_${ne}(a_${U}, u_${U}_t);
#else
    ${O} ${G} ${U} = u_${U};
#endif
`}),staticAttributes:m,staticUniforms:w}}class is{constructor(t,o,m){this.vertexBuffer=t,this.indexBuffer=o,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var rs=a.aI([{name:"a_pos",type:"Int16",components:2}]);const Qs="#define PROJECTION_MERCATOR",rh="mercator";class ah{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return rh}get shaderDefine(){return Qs}get shaderPreludeCode(){return Ga.projectionMercator}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,o,m,p,_){if(this._cachedMesh)return this._cachedMesh;const w=new a.aK;w.emplaceBack(0,0),w.emplaceBack(a.$,0),w.emplaceBack(0,a.$),w.emplaceBack(a.$,a.$);const I=t.createVertexBuffer(w,rs.members),M=a.aL.simpleSegment(0,0,4,2),z=new a.aM;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);const O=t.createIndexBuffer(z);return this._cachedMesh=new is(I,O,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class ba{constructor(t=0,o=0,m=0,p=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(m)||m<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=m,this.right=p}interpolate(t,o,m){return o.top!=null&&t.top!=null&&(this.top=a.C.number(t.top,o.top,m)),o.bottom!=null&&t.bottom!=null&&(this.bottom=a.C.number(t.bottom,o.bottom,m)),o.left!=null&&t.left!=null&&(this.left=a.C.number(t.left,o.left,m)),o.right!=null&&t.right!=null&&(this.right=a.C.number(t.right,o.right,m)),this}getCenter(t,o){const m=a.ag((this.left+t-this.right)/2,0,t),p=a.ag((this.top+o-this.bottom)/2,0,o);return new a.P(m,p)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new ba(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function as(v,t){if(!v.renderWorldCopies||v.lngRange)return;const o=t.lng-v.center.lng;t.lng+=o>180?-360:o<-180?360:0}function On(v){return Math.max(0,Math.floor(v))}class Fl{constructor(t,o,m,p,_,w){this._callbacks=t,this._tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=o||0,this._maxZoom=m||22,this._minPitch=p??0,this._maxPitch=_??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=On(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ba,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,o,m){this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=On(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new ba(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!m&&t.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const o=a.aN(t,-180,180)*Math.PI/180;var m,p,_,w,I,M,z,O,G;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=k(),m=this._rotationMatrix,_=-this._bearingInRadians,w=(p=this._rotationMatrix)[0],I=p[1],M=p[2],z=p[3],O=Math.sin(_),G=Math.cos(_),m[0]=w*G+M*O,m[1]=I*G+z*O,m[2]=w*-O+M*G,m[3]=I*-O+z*G)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const o=a.ag(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const o=t/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aO(this._fovInRadians)}setFov(t){t=a.ag(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=a.ad(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const o=this.getConstrained(this._center,t).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=a.ae(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,o){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,m){this._unmodified=!1,this._edgeInsets.interpolate(t,o,m),this._constrain(),this._calcMatrices()}resize(t,o,m=!0){this._width=t,this._height=o,m&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new de([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.ah])}getConstrained(t,o){return this._callbacks.getConstrained(t,o)}getCameraQueryGeometry(t,o){if(o.length===1)return[o[0],t];{const{minX:m,minY:p,maxX:_,maxY:w}=a.a1.fromPoints(o).extend(t);return[new a.P(m,p),new a.P(_,p),new a.P(_,w),new a.P(m,w),new a.P(m,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:o,zoom:m}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(m),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=a.af(new Float64Array(16));a.N(t,t,[this._width/2,-this._height/2,1]),a.M(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=a.af(new Float64Array(16)),a.N(t,t,[1,-1,1]),a.M(t,t,[-1,-1,0]),a.N(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,o,m,p){const _=m!==void 0?m:this.bearing,w=p=p!==void 0?p:this.pitch,I=a.a0.fromLngLat(t,o),M=-Math.cos(a.ad(w)),z=Math.sin(a.ad(w)),O=z*Math.sin(a.ad(_)),G=-z*Math.cos(a.ad(_));let U=this.elevation;const Z=o-U;let ne;M*Z>=0||Math.abs(M)<.1?(ne=1e4,U=o+ne*M):ne=-Z/M;let _e,ge,ye=a.aP(1,I.y),we=0;do{if(we+=1,we>10)break;ge=ne/ye,_e=new a.a0(I.x+O*ge,I.y+G*ge),ye=1/_e.meterInMercatorCoordinateUnits()}while(Math.abs(ne-ge*ye)>1e-12);return{center:_e.toLngLat(),elevation:U,zoom:a.aj(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const o=a.ai(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/o,p=a.a0.fromLngLat(this.center,this.elevation),_=ke(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=t;const w=this.calculateCenterFromCameraLngLatAlt(_.toLngLat(),a.aP(_.z,p.y),this.bearing,this.pitch);this._elevation=w.elevation,this._center=w.center,this.setZoom(w.zoom)}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=a.ai(1,this.center.lat)*this.worldSize;return ke(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const o=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/o,t.canonical.y/o,1/o/a.$,1/o/a.$]}}class fc{constructor(t,o){this.min=t,this.max=o,this.center=a.aQ([],a.aR([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],m=a.aS(this.min),p=a.aS(this.max);for(let _=0;_<o.length;_++)m[_]=o[_]?this.min[_]:this.center[_],p[_]=o[_]?this.center[_]:this.max[_];return p[2]=this.max[2],new fc(m,p)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let o=!0;for(let m=0;m<t.planes.length;m++){const p=this.intersectsPlane(t.planes[m]);if(p===0)return 0;p===1&&(o=!1)}return o?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let o=t[3],m=t[3];for(let p=0;p<3;p++)t[p]>0?(o+=t[p]*this.min[p],m+=t[p]*this.max[p]):(m+=t[p]*this.min[p],o+=t[p]*this.max[p]);return o>=0?2:m<0?0:1}}class sh{distanceToTile2d(t,o,m,p){const _=p.distanceX([t,o]),w=p.distanceY([t,o]);return Math.hypot(_,w)}getWrap(t,o,m){return m}getTileBoundingVolume(t,o,m,p){var _,w;let I=m,M=m;if(p!=null&&p.terrain){const O=new a.Z(t.z,o,t.z,t.x,t.y),G=p.terrain.getMinMaxElevation(O);I=(_=G.minElevation)!==null&&_!==void 0?_:m,M=(w=G.maxElevation)!==null&&w!==void 0?w:m}const z=1<<t.z;return new fc([o+t.x/z,t.y/z,I],[o+(t.x+1)/z,(t.y+1)/z,M])}allowVariableZoom(t,o){const m=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,p=a.ag(78.5-m/2,0,60);return!!o.terrain||t.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class Ir{constructor(t,o,m){this.points=t,this.planes=o,this.aabb=m}static fromInvProjectionMatrix(t,o=1,m=0,p,_){const w=_?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,m),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(U=>function(Z,ne,_e,ge){const ye=a.av([],Z,ne),we=1/ye[3]/_e*ge;return a.aX(ye,ye,[we,we,1/ye[3],we])}(U,t,o,I));p&&function(U,Z,ne,_e){const ge=_e?4:0,ye=_e?0:4;let we=0;const Ie=[],Ce=[];for(let Te=0;Te<4;Te++){const qe=a.aT([],U[Te+ye],U[Te+ge]),st=a.aY(qe);a.aQ(qe,qe,1/st),Ie.push(st),Ce.push(qe)}for(let Te=0;Te<4;Te++){const qe=a.aZ(U[Te+ge],Ce[Te],ne);we=qe!==null&&qe>=0?Math.max(we,qe):Math.max(we,Ie[Te])}const Re=function(Te,qe){const st=a.aT([],Te[qe[0]],Te[qe[1]]),nt=a.aT([],Te[qe[2]],Te[qe[1]]),it=[0,0,0,0];return a.aU(it,a.aV([],st,nt)),it[3]=-a.aW(it,Te[qe[0]]),it}(U,Z),Oe=function(Te,qe){const st=a.a_(Te),nt=a.a$([],Te,1/st),it=a.aT([],qe,a.aQ([],nt,a.aW(qe,nt))),lt=a.a_(it);if(lt>0){const Ut=Math.sqrt(1-nt[3]*nt[3]),jt=a.aQ([],nt,-nt[3]),Mt=a.aR([],jt,a.aQ([],it,Ut/lt));return a.b0(qe,Mt)}return null}(ne,Re);if(Oe!==null){const Te=Oe/a.aW(Ce[0],Re);we=Math.min(we,Te)}for(let Te=0;Te<4;Te++){const qe=Math.min(we,Ie[Te]);U[Te+ye]=[U[Te+ge][0]+Ce[Te][0]*qe,U[Te+ge][1]+Ce[Te][1]*qe,U[Te+ge][2]+Ce[Te][2]*qe,1]}}(M,w[0],p,_);const z=w.map(U=>{const Z=a.aT([],M[U[0]],M[U[1]]),ne=a.aT([],M[U[2]],M[U[1]]),_e=a.aU([],a.aV([],Z,ne)),ge=-a.aW(_e,M[U[1]]);return _e.concat(ge)}),O=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],G=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const U of M)for(let Z=0;Z<3;Z++)O[Z]=Math.min(O[Z],U[Z]),G[Z]=Math.max(G[Z],U[Z]);return new Ir(M,z,new fc(O,G))}}class Gi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,o){}constructor(t,o,m,p,_){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Fl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(w,I)=>this.getConstrained(w,I)},t,o,m,p,_),this._coveringTilesDetailsProvider=new sh}clone(){const t=new Gi;return t.apply(this),t}apply(t,o,m){this._helper.apply(t,o,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const o=[new a.b1(0,t)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),_=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),I=Math.floor(Math.min(m.x,p.x,_.x,w.x)),M=Math.floor(Math.max(m.x,p.x,_.x,w.x)),z=1;for(let O=I-z;O<=M+z;O++)O!==0&&o.push(new a.b1(O,t))}return o}getCameraFrustum(){return Ir.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const o=this.screenPointToLocation(this.centerPoint,t),m=t?t.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(t,o){const m=a.ai(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(o,m),_=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),w=a.a0.fromLngLat(t),I=new a.a0(w.x-(p.x-_.x),w.y-(p.y-_.y));this.setCenter(I==null?void 0:I.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,o){return o?this.coordinatePoint(a.a0.fromLngLat(t),o.getElevationForLngLatZoom(t,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a0.fromLngLat(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,o){const m=o||0,p=[t.x,t.y,0,1],_=[t.x,t.y,1,1];a.av(p,p,this._pixelMatrixInverse),a.av(_,_,this._pixelMatrixInverse);const w=p[3],I=_[3],M=p[1]/w,z=_[1]/I,O=p[2]/w,G=_[2]/I,U=O===G?0:(m-O)/(G-O);return new a.a0(a.C.number(p[0]/w,_[0]/I,U)/this.worldSize,a.C.number(M,z,U)/this.worldSize,m)}coordinatePoint(t,o=0,m=this._pixelMatrix){const p=[t.x*this.worldSize,t.y*this.worldSize,o,1];return a.av(p,p,m),new a.P(p[0]/p[3],p[1]/p[3])}getBounds(){const t=Math.max(0,this._helper._height/2-ue(this));return new de().extend(this.screenPointToLocation(new a.P(0,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,t))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(t,o){return o?o.pointCoordinate(t)!=null:t.y>this.height/2-ue(this)}calculatePosMatrix(t,o=!1,m){var p;const _=(p=t.key)!==null&&p!==void 0?p:a.b2(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),w=o?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(_)){const z=w.get(_);return m?z.f32:z.f64}const I=me(t,this.worldSize);a.O(I,o?this._alignedProjMatrix:this._viewProjMatrix,I);const M={f64:I,f32:new Float32Array(I)};return w.set(_,M),m?M.f32:M.f64}calculateFogMatrix(t){const o=t.key,m=this._fogMatrixCacheF32;if(m.has(o))return m.get(o);const p=me(t,this.worldSize);return a.O(p,this._fogMatrix,p),m.set(o,new Float32Array(p)),m.get(o)}getConstrained(t,o){o=a.ag(+o,this.minZoom,this.maxZoom);const m={center:new a.S(t.lng,t.lat),zoom:o};let p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);const _=this.tileSize*a.ae(m.zoom);let w=0,I=_,M=0,z=_,O=0,G=0;const{x:U,y:Z}=this.size;if(this._helper._latRange){const Ie=this._helper._latRange;w=a.U(Ie[1])*_,I=a.U(Ie[0])*_,I-w<Z&&(O=Z/(I-w))}p&&(M=a.aN(a.V(p[0])*_,0,_),z=a.aN(a.V(p[1])*_,0,_),z<M&&(z+=_),z-M<U&&(G=U/(z-M)));const{x:ne,y:_e}=He(_,t);let ge,ye;const we=Math.max(G||0,O||0);if(we){const Ie=new a.P(G?(z+M)/2:ne,O?(I+w)/2:_e);return m.center=se(_,Ie).wrap(),m.zoom+=a.aj(we),m}if(this._helper._latRange){const Ie=Z/2;_e-Ie<w&&(ye=w+Ie),_e+Ie>I&&(ye=I-Ie)}if(p){const Ie=(M+z)/2;let Ce=ne;this._helper._renderWorldCopies&&(Ce=a.aN(ne,Ie-_/2,Ie+_/2));const Re=U/2;Ce-Re<M&&(ge=M+Re),Ce+Re>z&&(ge=z-Re)}if(ge!==void 0||ye!==void 0){const Ie=new a.P(ge??ne,ye??_e);m.center=se(_,Ie).wrap()}return m}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}_calculateNearFarZIfNeeded(t,o,m){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),_=t-p*this._helper._pixelPerMeter/Math.cos(o),w=p<0?_:t,I=Math.PI/2+this.pitchInRadians,M=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+m.y/this.height),z=Math.sin(M)*w/Math.sin(a.ag(Math.PI-I-M,.01,Math.PI-.01)),O=ue(this),G=Math.atan(O/this._helper.cameraToCenterDistance),U=a.ad(.75),Z=G>U?2*G*(.5+m.y/(2*O)):U,ne=Math.sin(Z)*w/Math.sin(a.ag(Math.PI-I-Z,.01,Math.PI-.01)),_e=Math.min(z,ne);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*_e+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,o=He(this.worldSize,this.center),m=o.x,p=o.y;this._helper._pixelPerMeter=a.ai(1,this.center.lat)*this.worldSize;const _=a.ad(Math.min(this.pitch,Ui)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(_));let I;this._calculateNearFarZIfNeeded(w,_,t),I=new Float64Array(16),a.b3(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ap(this._invProjMatrix,I),I[8]=2*-t.x/this._helper._width,I[9]=2*t.y/this._helper._height,this._projectionMatrix=a.b4(I),a.N(I,I,[1,-1,1]),a.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),a.b5(I,I,-this.rollInRadians),a.b6(I,I,this.pitchInRadians),a.b5(I,I,-this.bearingInRadians),a.M(I,I,[-m,-p,0]),this._mercatorMatrix=a.N([],I,[this.worldSize,this.worldSize,this.worldSize]),a.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),a.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=a.ap([],I);const M=[0,0,-1,1];a.av(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),a.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-m,-p,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const z=this._helper._width%2/2,O=this._helper._height%2/2,G=Math.cos(this.bearingInRadians),U=Math.sin(-this.bearingInRadians),Z=m-Math.round(m)+G*z+U*O,ne=p-Math.round(p)+G*O+U*z,_e=new Float64Array(I);if(a.M(_e,_e,[Z>.5?Z-1:Z,ne>.5?ne-1:ne,0]),this._alignedProjMatrix=_e,I=a.ap(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new a.P(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return a.av(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=a.ai(1,this.center.lat)*this.worldSize;return ke(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,o){const m=a.a0.fromLngLat(t),p=[m.x*this.worldSize,m.y*this.worldSize,o,1];return a.av(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(t){const{overscaledTileID:o,aligned:m,applyTerrainMatrix:p}=t,_=this._helper.getMercatorTileCoordinates(o),w=o?this.calculatePosMatrix(o,m,!0):null;let I;return I=o&&o.terrainRttPosMatrix32f&&p?o.terrainRttPosMatrix32f:w||a.b7(),{mainMatrix:I,tileMercatorCoords:_,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,o,m){return 1}transformLightDirection(t){return a.aS(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,o,m,p){const _=this.calculatePosMatrix(m);let w;p?(w=[t,o,p(t,o),1],a.av(w,w,_)):(w=[t,o,0,1],Xs(w,w,_));const I=w[3];return{point:new a.P(w[0]/I,w[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(t){for(const o of t)this.calculatePosMatrix(o)}getMatrixForModel(t,o){const m=a.a0.fromLngLat(t,o),p=m.meterInMercatorCoordinateUnits(),_=a.b8();return a.M(_,_,[m.x,m.y,m.z]),a.b5(_,_,Math.PI),a.b6(_,_,Math.PI/2),a.N(_,_,[-p,p,p]),_}getProjectionDataForCustomLayer(t=!0){const o=new a.Z(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:t}),p=me(o,this.worldSize);a.O(p,this._viewProjMatrix,p),m.tileMercatorCoords=[0,0,1,1];const _=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],w=a.b9();return a.N(w,p,_),m.fallbackMatrix=w,m.mainMatrix=w,m}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Ar(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function rr(v){if(v.useSlerp)if(v.k<1){const t=a.ba(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),o=a.ba(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),m=new Float64Array(4);a.bb(m,t,o,v.k);const p=a.bc(m);v.tr.setRoll(p.roll),v.tr.setPitch(p.pitch),v.tr.setBearing(p.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(a.C.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(a.C.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(a.C.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function xi(v,t,o,m,p){const _=p.padding,w=He(p.worldSize,o.getNorthWest()),I=He(p.worldSize,o.getNorthEast()),M=He(p.worldSize,o.getSouthEast()),z=He(p.worldSize,o.getSouthWest()),O=a.ad(-m),G=w.rotate(O),U=I.rotate(O),Z=M.rotate(O),ne=z.rotate(O),_e=new a.P(Math.max(G.x,U.x,ne.x,Z.x),Math.max(G.y,U.y,ne.y,Z.y)),ge=new a.P(Math.min(G.x,U.x,ne.x,Z.x),Math.min(G.y,U.y,ne.y,Z.y)),ye=_e.sub(ge),we=(p.width-(_.left+_.right+t.left+t.right))/ye.x,Ie=(p.height-(_.top+_.bottom+t.top+t.bottom))/ye.y;if(Ie<0||we<0)return void Ar();const Ce=Math.min(a.aj(p.scale*Math.min(we,Ie)),v.maxZoom),Re=a.P.convert(v.offset),Oe=new a.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(a.ad(m)),Te=Re.add(Oe).mult(p.scale/a.ae(Ce));return{center:se(p.worldSize,w.add(M).div(2).sub(Te)),zoom:Ce,bearing:m}}class mc{get useGlobeControls(){return!1}handlePanInertia(t,o){return{easingOffset:t,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(t,o){t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta),t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta)}handleMapControlsPan(t,o,m){t.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(m,t.around)}cameraForBoxAndBearing(t,o,m,p,_){return xi(t,o,m,p,_)}handleJumpToCenterZoom(t,o){t.zoom!==(o.zoom!==void 0?+o.zoom:t.zoom)&&t.setZoom(+o.zoom),o.center!==void 0&&t.setCenter(a.S.convert(o.center))}handleEaseTo(t,o){const m=t.zoom,p=t.padding,_={roll:t.roll,pitch:t.pitch,bearing:t.bearing},w={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},I=o.zoom!==void 0,M=!t.isPaddingEqual(o.padding);let z=!1;const O=I?+o.zoom:t.zoom;let G=t.centerPoint.add(o.offsetAsPoint);const U=t.screenPointToLocation(G),{center:Z,zoom:ne}=t.getConstrained(a.S.convert(o.center||U),O??m);as(t,Z);const _e=He(t.worldSize,U),ge=He(t.worldSize,Z).sub(_e),ye=a.ae(ne-m);return z=ne!==m,{easeFunc:we=>{if(z&&t.setZoom(a.C.number(m,ne,we)),a.bd(_,w)||rr({startEulerAngles:_,endEulerAngles:w,tr:t,k:we,useSlerp:_.roll!=w.roll}),M&&(t.interpolatePadding(p,o.padding,we),G=t.centerPoint.add(o.offsetAsPoint)),o.around)t.setLocationAtPoint(o.around,o.aroundPoint);else{const Ie=a.ae(t.zoom-m),Ce=ne>m?Math.min(2,ye):Math.max(.5,ye),Re=Math.pow(Ce,1-we),Oe=se(t.worldSize,_e.add(ge.mult(we*Re)).mult(Ie));t.setLocationAtPoint(t.renderWorldCopies?Oe.wrap():Oe,G)}},isZooming:z,elevationCenter:Z}}handleFlyTo(t,o){const m=o.zoom!==void 0,p=t.zoom,_=t.getConstrained(a.S.convert(o.center||o.locationAtOffset),m?+o.zoom:p),w=_.center,I=_.zoom;as(t,w);const M=He(t.worldSize,o.locationAtOffset),z=He(t.worldSize,w).sub(M),O=z.mag(),G=a.ae(I-p);let U;if(o.minZoom!==void 0){const Z=Math.min(+o.minZoom,p,I),ne=t.getConstrained(w,Z).zoom;U=a.ae(ne-p)}return{easeFunc:(Z,ne,_e,ge)=>{t.setZoom(Z===1?I:p+a.aj(ne));const ye=Z===1?w:se(t.worldSize,M.add(z.mult(_e)).mult(ne));t.setLocationAtPoint(t.renderWorldCopies?ye.wrap():ye,ge)},scaleOfZoom:G,targetCenter:w,scaleOfMinZoom:U,pixelPathLength:O}}}class Gn{constructor(t,o,m){this.blendFunction=t,this.blendColor=o,this.mask=m}}Gn.Replace=[1,0],Gn.disabled=new Gn(Gn.Replace,a.be.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,a.be.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,771],a.be.transparent,[!0,!0,!0,!0]);const Zr=2305;class Sn{constructor(t,o,m){this.enable=t,this.mode=o,this.frontFace=m}}Sn.disabled=new Sn(!1,1029,Zr),Sn.backCCW=new Sn(!0,1029,Zr),Sn.frontCCW=new Sn(!0,1028,Zr);class Cn{constructor(t,o,m){this.func=t,this.mask=o,this.range=m}}Cn.ReadOnly=!1,Cn.ReadWrite=!0,Cn.disabled=new Cn(519,Cn.ReadOnly,[0,1]);const eo=7680;class pn{constructor(t,o,m,p,_,w){this.test=t,this.ref=o,this.mask=m,this.fail=p,this.depthFail=_,this.pass=w}}pn.disabled=new pn({func:519,mask:0},0,0,eo,eo,eo);const to=new WeakMap;function Fr(v){var t;if(to.has(v))return to.get(v);{const o=(t=v.getParameter(v.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return to.set(v,o),o}}class zo{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const o=t.context,m=o.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const p=new a.aK;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const _=new a.aM;_.emplaceBack(0,1,2),this._fullscreenTriangle=new is(o.createVertexBuffer(p,rs.members),o.createIndexBuffer(_),a.aL.simpleSegment(0,0,p.length,_.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(m.TEXTURE1);const w=m.createTexture();m.bindTexture(m.TEXTURE_2D,w),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),Fr(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,o){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,o=t.gl;t.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,o){const m=this._cachedRenderContext.context,p=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:a.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,p.TRIANGLES,Cn.disabled,pn.disabled,Gn.unblended,Sn.disabled,((_,w)=>({u_input:_,u_output_expected:w}))(t,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Fr(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const _=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:_}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Fr(t)){const o=t.clientWaitSync(this._readbackQueue.sync,0,0);if(o===t.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=zo._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let o=0;return o+=t[0]/256,o+=t[1]/65536,o+=t[2]/16777216,t[3]<127&&(o=-o),o/128}}const xa=a.$/128;function oh(v,t){const o=v.granularity!==void 0?Math.max(v.granularity,1):1,m=o+(v.generateBorders?2:0),p=o+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),_=m+1,w=p+1,I=v.generateBorders?-1:0,M=v.generateBorders||v.extendToNorthPole?-1:0,z=o+(v.generateBorders?1:0),O=o+(v.generateBorders||v.extendToSouthPole?1:0),G=_*w,U=m*p*6,Z=_*w>65536;if(Z&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ne=Z||t==="32bit",_e=new Int16Array(2*G);let ge=0;for(let Ie=M;Ie<=O;Ie++)for(let Ce=I;Ce<=z;Ce++){let Re=Ce/o*a.$;Ce===-1&&(Re=-64),Ce===o+1&&(Re=a.$+xa);let Oe=Ie/o*a.$;Ie===-1&&(Oe=v.extendToNorthPole?a.bg:-64),Ie===o+1&&(Oe=v.extendToSouthPole?a.bh:a.$+xa),_e[ge++]=Re,_e[ge++]=Oe}const ye=ne?new Uint32Array(U):new Uint16Array(U);let we=0;for(let Ie=0;Ie<p;Ie++)for(let Ce=0;Ce<m;Ce++){const Re=Ce+1+Ie*_,Oe=Ce+(Ie+1)*_,Te=Ce+1+(Ie+1)*_;ye[we++]=Ce+Ie*_,ye[we++]=Oe,ye[we++]=Re,ye[we++]=Re,ye[we++]=Oe,ye[we++]=Te}return{vertices:_e.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:ne}}const qa=new a.aJ({fill:new a.bi(128,2),line:new a.bi(512,0),tile:new a.bi(128,32),stencil:new a.bi(128,1),circle:3});class Lm{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ga.projectionGlobe}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return qa}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new zo(t));const o=a.U(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(o,m),_=A.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=_);const w=Math.min(Math.max((_-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bk(w))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,o,m,p,_){const w=(_==="stencil"?qa.stencil:qa.tile).getGranularityForZoomLevel(o.z);return this._getMesh(t,{granularity:w,generateBorders:m,extendToNorthPole:o.y===0&&p,extendToSouthPole:o.y===(1<<o.z)-1&&p})}_getMesh(t,o){const m=this._getMeshKey(o);if(m in this._tileMeshCache)return this._tileMeshCache[m];const p=function(_,w){const I=oh(w,"16bit"),M=a.aK.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),z=a.aM.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new is(_.createVertexBuffer(M,rs.members),_.createIndexBuffer(z),a.aL.simpleSegment(0,0,M.length,z.length))}(t,o);return this._tileMeshCache[m]=p,p}recalculate(t){}hasTransition(){const t=A.now();let o=!1;return o=o||(t-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const zm=new a.r({type:new a.D(a.v.projection.type)});class $l extends a.E{constructor(t){super(),this._transitionable=new a.t(zm),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new ah,this._verticalPerspectiveProjection=new Lm}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof a.bl){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,o,m,p,_){return this.currentProjection.getMeshFromTileID(t,o,m,p,_)}setProjection(t){this._transitionable.setValue("type",(t==null?void 0:t.type)||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function jl(v){const t=Vo(v.worldSize,v.center.lat);return 2*Math.PI*t}function Ia(v,t,o,m,p){const _=1/(1<<p),w=t/a.$*_+m*_,I=a.bn((v/a.$*_+o*_)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,z=Math.cos(M),O=new Float64Array(3);return O[0]=Math.sin(I)*z,O[1]=Math.sin(M),O[2]=Math.cos(I)*z,O}function ar(v){return function(t,o){const m=Math.cos(o),p=new Float64Array(3);return p[0]=Math.sin(t)*m,p[1]=Math.sin(o),p[2]=Math.cos(t)*m,p}(v.lng*Math.PI/180,v.lat*Math.PI/180)}function Vo(v,t){return v/(2*Math.PI)/Math.cos(t*Math.PI/180)}function Nl(v){const t=Math.asin(v[1])/Math.PI*180,o=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(o>1e-6){const m=v[0]/o,p=Math.acos(v[2]/o),_=(m>0?p:-p)/Math.PI*180;return new a.S(a.aN(_,-180,180),t)}return new a.S(0,t)}function Bo(v){return Math.cos(v*Math.PI/180)}function qi(v,t){const o=Bo(v),m=Bo(t);return a.aj(m/o)}function Ul(v,t){const o=v.rotate(t.bearingInRadians),m=t.zoom+qi(t.center.lat,0),p=a.bj(1/Bo(t.center.lat),1/Bo(Math.min(Math.abs(t.center.lat),60)),a.bm(m,7,3,0,1)),_=360/jl({worldSize:t.worldSize,center:{lat:t.center.lat}});return new a.S(t.center.lng-o.x*_*p,a.ag(t.center.lat+o.y*_,-85.051129,a.ah))}function Oo(v){const t=.5*v,o=Math.sin(t),m=Math.cos(t);return Math.log(o+m)-Math.log(m-o)}function Fo(v,t,o,m){const p=v.lat+o*m;if(Math.abs(o)>1){const _=(Math.sign(v.lat+o)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,w=Math.abs(v.lat+o)*Math.PI/180,I=Oo(_+m*(w-_)),M=Oo(_),z=Oo(w);return new a.S(v.lng+t*((I-M)/(z-M)),p)}return new a.S(v.lng+t*m,p)}class pv{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,o,m,p){const _=`${t.z}_${t.x}_${t.y}_${p!=null&&p.terrain?"t":""}`,w=this._cache.get(_);if(w)return w;const I=this._cachePrevious.get(_);if(I)return this._cache.set(_,I),I;const M=this._boundingVolumeFactory(t,o,m,p);return this._cache.set(_,M),this._hadAnyChanges=!0,M}}class Cs{constructor(t,o,m,p){this.min=m,this.max=p,this.points=t,this.planes=o}static fromAabb(t,o){const m=[];for(let p=0;p<8;p++)m.push([1&~p?t[0]:o[0],(p>>1&1)==1?o[1]:t[1],(p>>2&1)==1?o[2]:t[2]]);return new Cs(m,[[-1,0,0,o[0]],[1,0,0,-t[0]],[0,-1,0,o[1]],[0,1,0,-t[1]],[0,0,-1,o[2]],[0,0,1,-t[2]]],t,o)}static fromCenterSizeAngles(t,o,m){const p=a.bq([],m[0],m[1],m[2]),_=a.br([],[o[0],0,0],p),w=a.br([],[0,o[1],0],p),I=a.br([],[0,0,o[2]],p),M=[...t],z=[...t];for(let G=0;G<8;G++)for(let U=0;U<3;U++){const Z=t[U]+_[U]*(1&~G?-1:1)+w[U]*((G>>1&1)==1?1:-1)+I[U]*((G>>2&1)==1?1:-1);M[U]=Math.min(M[U],Z),z[U]=Math.max(z[U],Z)}const O=[];for(let G=0;G<8;G++){const U=[...t];a.aR(U,U,a.aQ([],_,1&~G?-1:1)),a.aR(U,U,a.aQ([],w,(G>>1&1)==1?1:-1)),a.aR(U,U,a.aQ([],I,(G>>2&1)==1?1:-1)),O.push(U)}return new Cs(O,[[..._,-a.aW(_,O[0])],[...w,-a.aW(w,O[0])],[...I,-a.aW(I,O[0])],[-_[0],-_[1],-_[2],-a.aW(_,O[7])],[-w[0],-w[1],-w[2],-a.aW(w,O[7])],[-I[0],-I[1],-I[2],-a.aW(I,O[7])]],M,z)}intersectsFrustum(t){let o=!0;const m=this.points.length,p=this.planes.length,_=t.planes.length,w=t.points.length;for(let I=0;I<_;I++){const M=t.planes[I];let z=0;for(let O=0;O<m;O++){const G=this.points[O];M[0]*G[0]+M[1]*G[1]+M[2]*G[2]+M[3]>=0&&z++}if(z===0)return 0;z<m&&(o=!1)}if(o)return 2;for(let I=0;I<p;I++){const M=this.planes[I];let z=0;for(let O=0;O<w;O++){const G=t.points[O];M[0]*G[0]+M[1]*G[1]+M[2]*G[2]+M[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(t){const o=this.points.length;let m=0;for(let p=0;p<o;p++){const _=this.points[p];t[0]*_[0]+t[1]*_[1]+t[2]*_[2]+t[3]>=0&&m++}return m===o?2:m===0?0:1}}function Gl(v,t,o){const m=v-t;return m<0?-m:Math.max(0,m-o)}function lh(v,t,o,m,p){const _=v-o;let w;return w=_<0?Math.min(-_,1+_-p):_>1?Math.min(Math.max(_-p,0),1-_):0,Math.max(w,Gl(t,m,p))}class gv{constructor(){this._boundingVolumeCache=new pv(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,o,m,p){const _=1<<m.z,w=1/_,I=m.x/_,M=m.y/_;let z=2;return z=Math.min(z,lh(t,o,I,M,w)),z=Math.min(z,lh(t,o,I+.5,-M-w,w)),z=Math.min(z,lh(t,o,I+.5,2-M-w,w)),z}getWrap(t,o,m){const p=1<<o.z,_=1/p,w=o.x/p,I=Gl(t.x,w,_),M=Gl(t.x,w-1,_),z=Gl(t.x,w+1,_),O=Math.min(I,M,z);return O===z?1:O===M?-1:0}allowVariableZoom(t,o){return xt(t,o)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,o,m,p){return this._boundingVolumeCache.getTileBoundingVolume(t,o,m,p)}_computeTileBoundingVolume(t,o,m,p){var _,w;let I=m,M=m;if(p!=null&&p.terrain){const z=new a.Z(t.z,o,t.z,t.x,t.y),O=p.terrain.getMinMaxElevation(z);I=(_=O.minElevation)!==null&&_!==void 0?_:m,M=(w=O.maxElevation)!==null&&w!==void 0?w:m}if(I/=a.bt,M/=a.bt,I+=1,M+=1,t.z<=0)return Cs.fromAabb([-M,-M,-M],[M,M,M]);if(t.z===1)return Cs.fromAabb([t.x===0?-M:0,t.y===0?0:-M,-M],[t.x===0?0:M,t.y===0?M:0,M]);{const z=[Ia(0,0,t.x,t.y,t.z),Ia(a.$,0,t.x,t.y,t.z),Ia(a.$,a.$,t.x,t.y,t.z),Ia(0,a.$,t.x,t.y,t.z)],O=[];for(const it of z)O.push(a.aQ([],it,M));if(M!==I)for(const it of z)O.push(a.aQ([],it,I));t.y===0&&O.push([0,1,0]),t.y===(1<<t.z)-1&&O.push([0,-1,0]);const G=[1,1,1],U=[-1,-1,-1];for(const it of O)for(let lt=0;lt<3;lt++)G[lt]=Math.min(G[lt],it[lt]),U[lt]=Math.max(U[lt],it[lt]);const Z=Ia(a.$/2,a.$/2,t.x,t.y,t.z),ne=a.aV([],[0,1,0],Z);a.aU(ne,ne);const _e=a.aV([],Z,ne);a.aU(_e,_e);const ge=a.aV([],z[2],z[1]);a.aU(ge,ge);const ye=a.aV([],z[0],z[3]);a.aU(ye,ye),O.push(a.aQ([],Z,M)),t.y>=(1<<t.z)/2&&O.push(a.aQ([],Ia(a.$/2,0,t.x,t.y,t.z),M)),t.y<(1<<t.z)/2&&O.push(a.aQ([],Ia(a.$/2,a.$,t.x,t.y,t.z),M));const we=$r(Z,O),Ie=$r(_e,O),Ce=[-Z[0],-Z[1],-Z[2],we.max],Re=[Z[0],Z[1],Z[2],-we.min],Oe=[-_e[0],-_e[1],-_e[2],Ie.max],Te=[_e[0],_e[1],_e[2],-Ie.min],qe=[...ge,0],st=[...ye,0],nt=[];return t.y===0?nt.push(a.bs(st,qe,Ce),a.bs(st,qe,Re)):nt.push(a.bs(Oe,qe,Ce),a.bs(Oe,qe,Re),a.bs(Oe,st,Ce),a.bs(Oe,st,Re)),t.y===(1<<t.z)-1?nt.push(a.bs(st,qe,Ce),a.bs(st,qe,Re)):nt.push(a.bs(Te,qe,Ce),a.bs(Te,qe,Re),a.bs(Te,st,Ce),a.bs(Te,st,Re)),new Cs(nt,[Ce,Re,Oe,Te,qe,st],G,U)}}}function $r(v,t){let o=1/0,m=-1/0;for(const p of t){const _=a.aW(v,p);o=Math.min(o,_),m=Math.max(m,_)}return{min:o,max:m}}class $o{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o){this._helper.resize(t,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(){this._cachedClippingPlane=a.bu(),this._projectionMatrix=a.b8(),this._globeViewProjMatrix32f=a.b7(),this._globeViewProjMatrixNoCorrection=a.b8(),this._globeViewProjMatrixNoCorrectionInverted=a.b8(),this._globeProjMatrixInverted=a.b8(),this._cameraPosition=a.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Fl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,o)=>this.getConstrained(t,o)}),this._coveringTilesDetailsProvider=new gv}clone(){const t=new $o;return t.apply(this),t}apply(t,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=a.bo();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:o,applyGlobeMatrix:m}=t,p=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const o=this.pitchInRadians,m=this.cameraToCenterDistance/t,p=Math.sin(o)*m,_=Math.cos(o)*m+1,w=1/Math.sqrt(p*p+_*_)*1;let I=-p,M=_;const z=Math.sqrt(I*I+M*M);I/=z,M/=z;const O=[0,I,M];a.bv(O,O,[0,0,0],-this.bearingInRadians),a.bw(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),a.bx(O,O,[0,0,0],this.center.lng*Math.PI/180);const G=1/a.aY(O);return a.aQ(O,O,G),[...O,-w*G]}isLocationOccluded(t){return!this.isSurfacePointVisible(ar(t))}transformLightDirection(t){const o=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,p=Math.cos(m),_=[Math.sin(o)*p,Math.sin(m),Math.cos(o)*p],w=[_[2],0,-_[0]],I=[0,0,0];a.aV(I,w,_),a.aU(w,w),a.aU(I,I);const M=[0,0,0];return a.aU(M,[w[0]*t[0]+I[0]*t[1]+_[0]*t[2],w[1]*t[0]+I[1]*t[1]+_[1]*t[2],w[2]*t[0]+I[2]*t[1]+_[2]*t[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,o,m){const p=function(I,M,z){const O=1/(1<<z.z);return new a.a0(I/a.$*O+z.x*O,M/a.$*O+z.y*O)}(t,o,m.canonical),_=(w=p.y,[a.bn(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(_[1])}projectTileCoordinates(t,o,m,p){const _=m.canonical,w=Ia(t,o,_.x,_.y,_.z),I=1+(p?p(t,o):0)/a.bt,M=[w[0]*I,w[1]*I,w[2]*I,1];a.av(M,M,this._globeViewProjMatrixNoCorrection);const z=this._cachedClippingPlane,O=z[0]*w[0]+z[1]*w[1]+z[2]*w[2]+z[3]<0;return{point:new a.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=Vo(this.worldSize,this.center.lat),o=a.b9(),m=a.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),a.b3(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;o[8]=2*-p.x/this._helper._width,o[9]=2*p.y/this._helper._height,this._projectionMatrix=a.b4(o),this._globeProjMatrixInverted=a.b9(),a.ap(this._globeProjMatrixInverted,o),a.M(o,o,[0,0,-this.cameraToCenterDistance]),a.b5(o,o,this.rollInRadians),a.b6(o,o,-this.pitchInRadians),a.b5(o,o,this.bearingInRadians),a.M(o,o,[0,0,-t]);const _=a.bo();_[0]=t,_[1]=t,_[2]=t,a.b6(m,o,this.center.lat*Math.PI/180),a.by(m,m,-this.center.lng*Math.PI/180),a.N(m,m,_),this._globeViewProjMatrixNoCorrection=m,a.b6(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.by(o,o,-this.center.lng*Math.PI/180),a.N(o,o,_),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),a.ap(this._globeViewProjMatrixNoCorrectionInverted,m);const w=a.bo();this._cameraPosition=a.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/t,a.bv(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),a.bw(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),a.bv(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),a.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bw(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),a.bx(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const I=a.b4(this._globeViewProjMatrixNoCorrectionInverted);a.N(I,I,[1,1,-1]),this._cachedFrustum=Ir.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){a.w("calculateFogMatrix is not supported on globe projection.");const o=a.b9();return a.af(o),o}getVisibleUnwrappedCoordinates(t){return[new a.b1(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=ar(t);a.aQ(m,m,1+o/a.bt);const p=a.bu();return a.av(p,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(t){}getBounds(){const t=.5*this.width,o=.5*this.height,m=[new a.P(0,0),new a.P(t,0),new a.P(this.width,0),new a.P(this.width,o),new a.P(this.width,this.height),new a.P(t,this.height),new a.P(0,this.height),new a.P(0,o)],p=[];for(const G of m)p.push(this.unprojectScreenPoint(G));let _=0,w=0,I=0,M=0;const z=this.center;for(const G of p){const U=a.bz(z.lng,G.lng),Z=a.bz(z.lat,G.lat);U<w&&(w=U),U>_&&(_=U),Z<M&&(M=Z),Z>I&&(I=Z)}const O=[z.lng+w,z.lat+M,z.lng+_,z.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new de(O)}getConstrained(t,o){const m=a.ag(t.lat,-85.051129,a.ah),p=a.ag(+o,this.minZoom+qi(0,m),this.maxZoom);return{center:new a.S(t.lng,m),zoom:p}}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}setLocationAtPoint(t,o){const m=ar(this.unprojectScreenPoint(o)),p=ar(t),_=a.bo();a.bA(_);const w=a.bo();a.bx(w,m,_,-this.center.lng*Math.PI/180),a.bw(w,w,_,this.center.lat*Math.PI/180);const I=p[0]*p[0]+p[2]*p[2],M=w[0]*w[0];if(I<M)return;const z=Math.sqrt(I-M),O=-z,G=a.bB(p[0],p[2],w[0],z),U=a.bB(p[0],p[2],w[0],O),Z=a.bo();a.bx(Z,p,_,-G);const ne=a.bB(Z[1],Z[2],w[1],w[2]),_e=a.bo();a.bx(_e,p,_,-U);const ge=a.bB(_e[1],_e[2],w[1],w[2]),ye=.5*Math.PI,we=ne>=-ye&&ne<=ye,Ie=ge>=-ye&&ge<=ye;let Ce,Re;if(we&&Ie){const st=this.center.lng*Math.PI/180,nt=this.center.lat*Math.PI/180;a.bC(G,st)+a.bC(ne,nt)<a.bC(U,st)+a.bC(ge,nt)?(Ce=G,Re=ne):(Ce=U,Re=ge)}else if(we)Ce=G,Re=ne;else{if(!Ie)return;Ce=U,Re=ge}const Oe=Ce/Math.PI*180,Te=Re/Math.PI*180,qe=this.center.lat;this.setCenter(new a.S(Oe,a.ag(Te,-90,90))),this.setZoom(this.zoom+qi(qe,this.center.lat))}locationToScreenPoint(t,o){const m=ar(t);if(o){const p=o.getElevationForLngLatZoom(t,this._helper._tileZoom);a.aQ(m,m,1+p/a.bt)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(t){const o=a.bu();return a.av(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new a.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m)return m}return a.a0.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(t,o){const m=this._cameraPosition,p=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(m,p)}getRayDirectionFromPixel(t){const o=a.bu();o[0]=t.x/this.width*2-1,o[1]=-1*(t.y/this.height*2-1),o[2]=1,o[3]=1,a.av(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const m=a.bo();m[0]=o[0]-this._cameraPosition[0],m[1]=o[1]-this._cameraPosition[1],m[2]=o[2]-this._cameraPosition[2];const p=a.bo();return a.aU(p,m),p}isSurfacePointVisible(t){const o=this._cachedClippingPlane;return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const o=a.bu();return a.av(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(t,o){const m=a.aW(t,o),p=a.bo(),_=a.bo();a.aQ(_,o,m),a.aT(p,t,_);const w=1-a.aW(p,p);if(w<0)return null;const I=a.aW(t,t)-1,M=-m+(m<0?1:-1)*Math.sqrt(w),z=I/M,O=M;return{tMin:Math.min(z,O),tMax:Math.max(z,O)}}unprojectScreenPoint(t){const o=this._cameraPosition,m=this.getRayDirectionFromPixel(t),p=this.rayPlanetIntersection(o,m);if(p){const O=a.bo();a.aR(O,o,[m[0]*p.tMin,m[1]*p.tMin,m[2]*p.tMin]);const G=a.bo();return a.aU(G,O),Nl(G)}const _=this._cachedClippingPlane,w=_[0]*m[0]+_[1]*m[1]+_[2]*m[2],I=-a.b0(_,o)/w,M=a.bo();if(I>0)a.aR(M,o,[m[0]*I,m[1]*I,m[2]*I]);else{const O=a.bo();a.aR(O,o,[2*m[0],2*m[1],2*m[2]]);const G=a.b0(this._cachedClippingPlane,O);a.aT(M,O,[this._cachedClippingPlane[0]*G,this._cachedClippingPlane[1]*G,this._cachedClippingPlane[2]*G])}const z=function(O){const G=a.bo();return G[0]=O[0]*-O[3],G[1]=O[1]*-O[3],G[2]=O[2]*-O[3],{center:G,radius:Math.sqrt(1-O[3]*O[3])}}(_);return Nl(function(O,G,U){const Z=a.bo();a.aT(Z,U,O);const ne=a.bo();return a.bp(ne,O,Z,G/a.a_(Z)),ne}(z.center,z.radius,M))}getMatrixForModel(t,o){const m=a.S.convert(t),p=1/a.bt,_=a.b8();return a.by(_,_,m.lng/180*Math.PI),a.b6(_,_,-m.lat/180*Math.PI),a.M(_,_,[0,0,1+o/a.bt]),a.b6(_,_,.5*Math.PI),a.N(_,_,[p,p,p]),_}getProjectionDataForCustomLayer(t=!0){const o=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:t});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(t){}}class ua{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,o){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Fl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,o)=>this.getConstrained(t,o)}),this._globeness=1,this._mercatorTransform=new Gi,this._verticalPerspectiveTransform=new $o}clone(){const t=new ua;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const o=this._mercatorTransform.getProjectionData(t),m=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:o.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return a.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,o,m){const p=this._mercatorTransform.getPitchedTextCorrection(t,o,m),_=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,o,m);return a.bj(p,_,this._globeness)}projectTileCoordinates(t,o,m,p){return this.currentTransform.projectTileCoordinates(t,o,m,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){return this.currentTransform.lngLatToCameraDepth(t,o)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}getConstrained(t,o){return this.currentTransform.getConstrained(t,o)}calculateCenterFromCameraLngLatAlt(t,o,m,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,p)}setLocationAtPoint(t,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,o){return this.currentTransform.locationToScreenPoint(t,o)}screenPointToMercatorCoordinate(t,o){return this.currentTransform.screenPointToMercatorCoordinate(t,o)}screenPointToLocation(t,o){return this.currentTransform.screenPointToLocation(t,o)}isPointOnMapSurface(t,o){return this.currentTransform.isPointOnMapSurface(t,o)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,o){return this.currentTransform.getMatrixForModel(t,o)}getProjectionDataForCustomLayer(t=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return o;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return m.fallbackMatrix=o.mainMatrix,m}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Kr{get useGlobeControls(){return!0}handlePanInertia(t,o){const m=Ul(t,o);return Math.abs(m.lng-o.center.lng)>180&&(m.lng=o.center.lng+179.5*Math.sign(m.lng-o.center.lng)),{easingCenter:m,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,o){const m=t.around,p=o.screenPointToLocation(m);t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta);const _=o.zoom;t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta);const w=o.zoom-_;if(w===0)return;const I=a.bz(o.center.lng,p.lng),M=I/(Math.abs(I/180)+1),z=a.bz(o.center.lat,p.lat),O=o.getRayDirectionFromPixel(m),G=o.cameraPosition,U=-1*a.aW(G,O),Z=a.bo();a.aR(Z,G,[O[0]*U,O[1]*U,O[2]*U]);const ne=a.aY(Z)-1,_e=Math.exp(.5*-Math.max(ne-.3,0)),ge=Vo(o.worldSize,o.center.lat)/Math.min(o.width,o.height),ye=a.bm(ge,.9,.5,1,.25),we=(1-a.ae(-w))*Math.min(_e,ye),Ie=o.center.lat,Ce=o.zoom,Re=new a.S(o.center.lng+M*we,a.ag(o.center.lat+z*we,-85.051129,a.ah));o.setLocationAtPoint(p,m);const Oe=o.center,Te=a.bm(Math.abs(I),45,85,0,1),qe=a.bm(ge,.75,.35,0,1),st=Math.pow(Math.max(Te,qe),.25),nt=a.bz(Oe.lng,Re.lng),it=a.bz(Oe.lat,Re.lat);o.setCenter(new a.S(Oe.lng+nt*st,Oe.lat+it*st).wrap()),o.setZoom(Ce+qi(Ie,o.center.lat))}handleMapControlsPan(t,o,m){if(!t.panDelta)return;const p=o.center.lat,_=o.zoom;o.setCenter(Ul(t.panDelta,o).wrap()),o.setZoom(_+qi(p,o.center.lat))}cameraForBoxAndBearing(t,o,m,p,_){const w=xi(t,o,m,p,_),I=o.left/_.width*2-1,M=(_.width-o.right)/_.width*2-1,z=o.top/_.height*-2+1,O=(_.height-o.bottom)/_.height*-2+1,G=a.bz(m.getWest(),m.getEast())<0,U=G?m.getEast():m.getWest(),Z=G?m.getWest():m.getEast(),ne=Math.max(m.getNorth(),m.getSouth()),_e=Math.min(m.getNorth(),m.getSouth()),ge=U+.5*a.bz(U,Z),ye=ne+.5*a.bz(ne,_e),we=_.clone();we.setCenter(w.center),we.setBearing(w.bearing),we.setPitch(0),we.setRoll(0),we.setZoom(w.zoom);const Ie=we.modelViewProjectionMatrix,Ce=[ar(m.getNorthWest()),ar(m.getNorthEast()),ar(m.getSouthWest()),ar(m.getSouthEast()),ar(new a.S(Z,ye)),ar(new a.S(U,ye)),ar(new a.S(ge,ne)),ar(new a.S(ge,_e))],Re=ar(w.center);let Oe=Number.POSITIVE_INFINITY;for(const Te of Ce)I<0&&(Oe=Kr.getLesserNonNegativeNonNull(Oe,Kr.solveVectorScale(Te,Re,Ie,"x",I))),M>0&&(Oe=Kr.getLesserNonNegativeNonNull(Oe,Kr.solveVectorScale(Te,Re,Ie,"x",M))),z>0&&(Oe=Kr.getLesserNonNegativeNonNull(Oe,Kr.solveVectorScale(Te,Re,Ie,"y",z))),O<0&&(Oe=Kr.getLesserNonNegativeNonNull(Oe,Kr.solveVectorScale(Te,Re,Ie,"y",O)));if(Number.isFinite(Oe)&&Oe!==0)return w.zoom=we.zoom+a.aj(Oe),w;Ar()}handleJumpToCenterZoom(t,o){const m=t.center.lat,p=t.getConstrained(o.center?a.S.convert(o.center):t.center,t.zoom).center;t.setCenter(p.wrap());const _=o.zoom!==void 0?+o.zoom:t.zoom+qi(m,p.lat);t.zoom!==_&&t.setZoom(_)}handleEaseTo(t,o){const m=t.zoom,p=t.center,_=t.padding,w={roll:t.roll,pitch:t.pitch,bearing:t.bearing},I={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},M=o.zoom!==void 0,z=!t.isPaddingEqual(o.padding);let O=!1;const G=o.center?a.S.convert(o.center):p,U=t.getConstrained(G,m).center;as(t,U);const Z=t.clone();Z.setCenter(U),Z.setZoom(M?+o.zoom:m+qi(p.lat,G.lat)),Z.setBearing(o.bearing);const ne=new a.P(a.ag(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),a.ag(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));Z.setLocationAtPoint(U,ne);const _e=(o.offset&&o.offsetAsPoint.mag())>0?Z.center:U,ge=M?+o.zoom:m+qi(p.lat,_e.lat),ye=m+qi(p.lat,0),we=ge+qi(_e.lat,0),Ie=a.bz(p.lng,_e.lng),Ce=a.bz(p.lat,_e.lat),Re=a.ae(we-ye);return O=ge!==m,{easeFunc:Oe=>{if(a.bd(w,I)||rr({startEulerAngles:w,endEulerAngles:I,tr:t,k:Oe,useSlerp:w.roll!=I.roll}),z&&t.interpolatePadding(_,o.padding,Oe),o.around)a.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(o.around,o.aroundPoint);else{const Te=we>ye?Math.min(2,Re):Math.max(.5,Re),qe=Math.pow(Te,1-Oe),st=Fo(p,Ie,Ce,Oe*qe);t.setCenter(st.wrap())}if(O){const Te=a.C.number(ye,we,Oe)+qi(0,t.center.lat);t.setZoom(Te)}},isZooming:O,elevationCenter:_e}}handleFlyTo(t,o){const m=o.zoom!==void 0,p=t.center,_=t.zoom,w=t.padding,I=!t.isPaddingEqual(o.padding),M=t.getConstrained(a.S.convert(o.center||o.locationAtOffset),_).center,z=m?+o.zoom:t.zoom+qi(t.center.lat,M.lat),O=t.clone();O.setCenter(M),O.setZoom(z),O.setBearing(o.bearing);const G=new a.P(a.ag(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),a.ag(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));O.setLocationAtPoint(M,G);const U=O.center;as(t,U);const Z=function(Ce,Re,Oe){const Te=ar(Re),qe=ar(Oe),st=a.aW(Te,qe),nt=Math.acos(st),it=jl(Ce);return nt/(2*Math.PI)*it}(t,p,U),ne=_+qi(p.lat,0),_e=z+qi(U.lat,0),ge=a.ae(_e-ne);let ye;if(typeof o.minZoom=="number"){const Ce=+o.minZoom+qi(U.lat,0),Re=Math.min(Ce,ne,_e)+qi(0,U.lat),Oe=t.getConstrained(U,Re).zoom+qi(U.lat,0);ye=a.ae(Oe-ne)}const we=a.bz(p.lng,U.lng),Ie=a.bz(p.lat,U.lat);return{easeFunc:(Ce,Re,Oe,Te)=>{const qe=Fo(p,we,Ie,Oe);I&&t.interpolatePadding(w,o.padding,Ce);const st=Ce===1?U:qe;t.setCenter(st.wrap());const nt=ne+a.aj(Re);t.setZoom(Ce===1?z:nt+qi(0,st.lat))},scaleOfZoom:ge,targetCenter:U,scaleOfMinZoom:ye,pixelPathLength:Z}}static solveVectorScale(t,o,m,p,_){const w=p==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],I=[m[3],m[7],m[11],m[15]],M=t[0]*w[0]+t[1]*w[1]+t[2]*w[2],z=t[0]*I[0]+t[1]*I[1]+t[2]*I[2],O=o[0]*w[0]+o[1]*w[1]+o[2]*w[2],G=o[0]*I[0]+o[1]*I[1]+o[2]*I[2];return O+_*z===M+_*G||I[3]*(M-O)+w[3]*(G-z)+M*G==O*z?null:(O+w[3]-_*G-_*I[3])/(O-M-_*G+_*z)}static getLesserNonNegativeNonNull(t,o){return o!==null&&o>=0&&o<t?o:t}}class uh{constructor(t){this._globe=t,this._mercatorCameraHelper=new mc,this._verticalPerspectiveCameraHelper=new Kr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,o){return this.currentHelper.handlePanInertia(t,o)}handleMapControlsRollPitchBearingZoom(t,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,o)}handleMapControlsPan(t,o,m){this.currentHelper.handleMapControlsPan(t,o,m)}cameraForBoxAndBearing(t,o,m,p,_){return this.currentHelper.cameraForBoxAndBearing(t,o,m,p,_)}handleJumpToCenterZoom(t,o){this.currentHelper.handleJumpToCenterZoom(t,o)}handleEaseTo(t,o){return this.currentHelper.handleEaseTo(t,o)}handleFlyTo(t,o){return this.currentHelper.handleFlyTo(t,o)}}const ql=(v,t)=>a.y(v,t&&t.filter(o=>o.identifier!=="source.canvas")),jo=a.bD();class ch extends a.E{constructor(t,o={}){super(),this._rtlPluginLoaded=()=>{for(const m in this.sourceCaches){const p=this.sourceCaches[m].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[m].reload()}},this.map=t,this.dispatcher=new wt(kt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(m,p)=>this.getGlyphs(m,p)),this.dispatcher.registerMessageHandler("GI",(m,p)=>this.getImages(m,p)),this.imageManager=new ce,this.imageManager.setEventedParent(this),this.glyphManager=new be(t._requestManager,o.localIdeographFontFamily),this.lineAtlas=new pt(256,512),this.crossTileSymbolIndex=new dc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bF()),Dn().on(tn,this._rtlPluginLoaded),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const p=this.sourceCaches[m.sourceId];if(!p)return;const _=p.getSource();if(_&&_.vectorLayerIds)for(const w in this._layers){const I=this._layers[w];I.source===_.id&&this._validateLayer(I)}})}setGlobalStateProperty(t,o){var m,p,_;this._checkLoaded();const w=o===null?(_=(p=(m=this.stylesheet.state)===null||m===void 0?void 0:m[t])===null||p===void 0?void 0:p.default)!==null&&_!==void 0?_:null:o;if(a.bG(w,this._globalState[t]))return this;this._globalState[t]=w;const I=this._findGlobalStateAffectedSources([t]);for(const M in this.sourceCaches)I.has(M)&&(this._reloadSource(M),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const o=[];for(const p in t)!a.bG(this._globalState[p],t[p].default)&&(o.push(p),this._globalState[p]=t[p].default);const m=this._findGlobalStateAffectedSources(o);for(const p in this.sourceCaches)m.has(p)&&(this._reloadSource(p),this._changed=!0)}_findGlobalStateAffectedSources(t){if(t.length===0)return new Set;const o=new Set;for(const m in this._layers){const p=this._layers[m],_=p.getLayoutAffectingGlobalStateRefs();for(const w of t)_.has(w)&&o.add(p.source)}return o}loadURL(t,o={},m){this.fire(new a.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const p=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const _=this._loadStyleRequest;a.j(p,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,o,m)}).catch(w=>{this._loadStyleRequest=null,w&&!_.signal.aborted&&this.fire(new a.k(w))})}loadJSON(t,o={},m){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(t,o,m)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(jo,{validate:!1})}_load(t,o,m){var p,_,w;const I=o.transformStyle?o.transformStyle(m,t):t;if(!o.validate||!ql(this,a.z(I))){this._loaded=!0,this.stylesheet=I;for(const M in I.sources)this.addSource(M,I.sources[M],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new Fe(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new mt(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.setGlobalState((w=this.stylesheet.state)!==null&&w!==void 0?w:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const t=a.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of t){const m=a.bI(o);m.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=m}}_loadSprite(t,o=!1,m=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,w,I,M){return a._(this,void 0,void 0,function*(){const z=Q(_),O=I>1?"@2x":"",G={},U={};for(const{id:Z,url:ne}of z){const _e=w.transformRequest(oe(ne,O,".json"),"SpriteJSON");G[Z]=a.j(_e,M);const ge=w.transformRequest(oe(ne,O,".png"),"SpriteImage");U[Z]=H.getImage(ge,M)}return yield Promise.all([...Object.values(G),...Object.values(U)]),function(Z,ne){return a._(this,void 0,void 0,function*(){const _e={};for(const ge in Z){_e[ge]={};const ye=A.getImageCanvasContext((yield ne[ge]).data),we=(yield Z[ge]).data;for(const Ie in we){const{width:Ce,height:Re,x:Oe,y:Te,sdf:qe,pixelRatio:st,stretchX:nt,stretchY:it,content:lt,textFitWidth:Ut,textFitHeight:jt}=we[Ie];_e[ge][Ie]={data:null,pixelRatio:st,sdf:qe,stretchX:nt,stretchY:it,content:lt,textFitWidth:Ut,textFitHeight:jt,spriteData:{width:Ce,height:Re,x:Oe,y:Te,context:ye}}}}return _e})}(G,U)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const w in _){this._spritesImagesIds[w]=[];const I=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(M=>!(M in _)):[];for(const M of I)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in _[w]){const z=w==="default"?M:`${w}:${M}`;this._spritesImagesIds[w].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,_[w][M],!1):this.imageManager.addImage(z,_[w][M]),o&&(this._changedImages[z]=!0)}}}).catch(_=>{this._spriteRequest=null,p=_,this.fire(new a.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),m&&m(p)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(t){const o=this.sourceCaches[t.source];if(!o)return;const m=t.sourceLayer;if(!m)return;const p=o.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.k(new Error(`Source layer "${m}" does not exist on source "${p.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,o=!1){const m=this._serializedAllLayers();if(!t||t.length===0)return Object.values(o?a.bJ(m):m);const p=[];for(const _ of t)if(m[_]){const w=o?a.bJ(m[_]):m[_];p.push(w)}return p}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const o=Object.keys(this._layers);for(const m of o){const p=this._layers[m];p.type!=="custom"&&(t[m]=p.serialize())}return t}hasTransitions(){var t,o,m;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(o){const p=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(p.length||_.length)&&this._updateWorkerLayers(p,_);for(const w in this._updatedSources){const I=this._updatedSources[w];if(I==="reload")this._reloadSource(w);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const m={};for(const p in this.sourceCaches){const _=this.sourceCaches[p];m[p]=_.used,_.used=!1}for(const p of this._order){const _=this._layers[p];_.recalculate(t,this._availableImages),!_.isHidden(t.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const p in m){const _=this.sourceCaches[p];!!m[p]!=!!_.used&&_.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,o&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,o={}){var m;this._checkLoaded();const p=this.serialize();if(t=o.transformStyle?o.transformStyle(p,t):t,((m=o.validate)===null||m===void 0||m)&&ql(this,a.z(t)))return!1;(t=a.bJ(t)).layers=a.bH(t.layers);const _=a.bK(p,t),w=this._getOperationsToPerform(_);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const I of w.operations)I();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const o=[],m=[];for(const p of t)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":o.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":o.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":o.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":o.push(()=>this.setGlobalState.apply(this,p.args));break;case"setTransition":o.push(()=>{});break;default:m.push(p.command)}return{operations:o,unimplemented:m}}addImage(t,o){if(this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new a.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,m={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(a.z.source,`sources.${t}`,o,null,m))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const p=this.sourceCaches[t]=new Pt(t,o,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:t})),p.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===t)return this.fire(new a.k(new Error(`Source "${t}" cannot be removed while layer "${m}" is using it.`)));const o=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],o.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const m=this.sourceCaches[t].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(o),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,o,m={}){this._checkLoaded();const p=t.id;if(this.getLayer(p))return void this.fire(new a.k(new Error(`Layer "${p}" already exists on this map.`)));let _;if(t.type==="custom"){if(ql(this,a.bL(t)))return;_=a.bI(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(p,t.source),t=a.bJ(t),t=a.e(t,{source:p})),this._validate(a.z.layer,`layers.${p}`,t,{arrayIndex:-1},m))return;_=a.bI(t),this._validateLayer(_),_.setEventedParent(this,{layer:{id:p}})}const w=o?this._order.indexOf(o):this._order.length;if(o&&w===-1)this.fire(new a.k(new Error(`Cannot add layer "${p}" before non-existing layer "${o}".`)));else{if(this._order.splice(w,0,p),this._layerOrderChanged=!0,this._layers[p]=_,this._removedLayers[p]&&_.source&&_.type!=="custom"){const I=this._removedLayers[p];delete this._removedLayers[p],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new a.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const m=this._order.indexOf(t);this._order.splice(m,1);const p=o?this._order.indexOf(o):this._order.length;o&&p===-1?this.fire(new a.k(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(p,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const m=this._order.indexOf(t);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,m){this._checkLoaded();const p=this.getLayer(t);p?p.minzoom===o&&p.maxzoom===m||(o!=null&&(p.minzoom=o),m!=null&&(p.maxzoom=m),this._updateLayer(p)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,m={}){this._checkLoaded();const p=this.getLayer(t);if(p){if(!a.bG(p.filter,o))return o==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(a.z.filter,`layers.${p.id}.filter`,o,null,m)||(p.setFilter(a.bJ(o)),this._updateLayer(p)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return a.bJ(this.getLayer(t).filter)}setLayoutProperty(t,o,m,p={}){this._checkLoaded();const _=this.getLayer(t);_?a.bG(_.getLayoutProperty(o),m)||(_.setLayoutProperty(o,m,p),this._updateLayer(_)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const m=this.getLayer(t);if(m)return m.getLayoutProperty(o);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,m,p={}){this._checkLoaded();const _=this.getLayer(t);_?a.bG(_.getPaintProperty(o),m)||(_.setPaintProperty(o,m,p)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const m=t.source,p=t.sourceLayer,_=this.sourceCaches[m];if(_===void 0)return void this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)));const w=_.getSource().type;w==="geojson"&&p?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||p?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),_.setFeatureState(p,t.id,o)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const m=t.source,p=this.sourceCaches[m];if(p===void 0)return void this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)));const _=p.getSource().type,w=_==="vector"?t.sourceLayer:void 0;_!=="vector"||w?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(w,t.id,o):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,m=t.sourceLayer,p=this.sourceCaches[o];if(p!==void 0)return p.getSource().type!=="vector"||m?(t.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(m,t.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=a.bM(this.sourceCaches,_=>_.serialize()),o=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,p=this.stylesheet;return a.bN({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:t,layers:o,terrain:m},_=>_!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=w=>this._layers[w].type==="fill-extrusion",m={},p=[];for(let w=this._order.length-1;w>=0;w--){const I=this._order[w];if(o(I)){m[I]=w;for(const M of t){const z=M[I];if(z)for(const O of z)p.push(O)}}}p.sort((w,I)=>I.intersectionZ-w.intersectionZ);const _=[];for(let w=this._order.length-1;w>=0;w--){const I=this._order[w];if(o(I))for(let M=p.length-1;M>=0;M--){const z=p[M].feature;if(m[z.layer.id]<w)break;_.push(z),p.pop()}else for(const M of t){const z=M[I];if(z)for(const O of z)_.push(O.feature)}}return _}queryRenderedFeatures(t,o,m){o&&o.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",o.filter,null,o);const p={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const z of o.layers){const O=this._layers[z];if(!O)return this.fire(new a.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];p[O.source]=!0}}const _=[];o.availableImages=this._availableImages;const w=this._serializedAllLayers(),I=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,M=Object.assign(Object.assign({},o),{layers:I});for(const z in this.sourceCaches)o.layers&&!p[z]||_.push(ot(this.sourceCaches[z],this._layers,w,t,M,m,this.map.terrain?(O,G,U)=>this.map.terrain.getElevation(O,G,U):void 0));return this.placement&&_.push(function(z,O,G,U,Z,ne,_e){const ge={},ye=ne.queryRenderedSymbols(U),we=[];for(const Ie of Object.keys(ye).map(Number))we.push(_e[Ie]);we.sort(Je);for(const Ie of we){const Ce=Ie.featureIndex.lookupSymbolFeatures(ye[Ie.bucketInstanceId],O,Ie.bucketIndex,Ie.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,z);for(const Re in Ce){const Oe=ge[Re]=ge[Re]||[],Te=Ce[Re];Te.sort((qe,st)=>{const nt=Ie.featureSortOrder;if(nt){const it=nt.indexOf(qe.featureIndex);return nt.indexOf(st.featureIndex)-it}return st.featureIndex-qe.featureIndex});for(const qe of Te)Oe.push(qe)}}return function(Ie,Ce,Re){for(const Oe in Ie)for(const Te of Ie[Oe])Ct(Te,Re[Ce[Oe].source]);return Ie}(ge,z,G)}(this._layers,w,this.sourceCaches,t,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(t,o){o&&o.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",o.filter,null,o);const m=this.sourceCaches[t];return m?function(p,_){const w=p.getRenderableIds().map(z=>p.getTileByID(z)),I=[],M={};for(let z=0;z<w.length;z++){const O=w[z],G=O.tileID.canonical.key;M[G]||(M[G]=!0,O.querySourceFeatures(I,_))}return I}(m,o):[]}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const m=this.light.getLight();let p=!1;for(const w in t)if(!a.bG(t[w],m[w])){p=!0;break}if(!p)return;const _={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(_)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,o={}){this._checkLoaded();const m=this.getSky();let p=!1;if(!t&&!m)return;if(t&&!m)p=!0;else if(!t&&m)p=!0;else for(const w in t)if(!a.bG(t[w],m[w])){p=!0;break}if(!p)return;const _={now:A.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,o),this.sky.updateTransitions(_)}_setProjectionInternal(t){const o=function(m){if(Array.isArray(m)){const p=new $l({type:m});return{projection:p,transform:new ua,cameraHelper:new uh(p)}}switch(m){case"mercator":return{projection:new ah,transform:new Gi,cameraHelper:new mc};case"globe":{const p=new $l({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new ua,cameraHelper:new uh(p)}}case"vertical-perspective":return{projection:new Lm,transform:new $o,cameraHelper:new Kr};default:return a.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new ah,transform:new Gi,cameraHelper:new mc}}}(t);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const m in this.sourceCaches)this.sourceCaches[m].reload()}_validate(t,o,m,p,_={}){return(!_||_.validate!==!1)&&ql(this,t.call(a.z,a.e({key:o,style:this.serialize(),value:m,styleSpec:a.v},p)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Dn().off(tn,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const m=this.sourceCaches[o];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const o in this.sourceCaches)this.sourceCaches[o].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,o,m,p,_=!1){let w=!1,I=!1;const M={};for(const z of this._order){const O=this._layers[z];if(O.type!=="symbol")continue;if(!M[O.source]){const U=this.sourceCaches[O.source];M[O.source]=U.getRenderableIds(!0).map(Z=>U.getTileByID(Z)).sort((Z,ne)=>ne.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(ne.tileID)?-1:1))}const G=this.crossTileSymbolIndex.addLayer(O,M[O.source],t.center.lng);w=w||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),t.zoom))&&(this.pauseablePlacement=new Dm(t,this.map.terrain,this._order,_,o,m,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),I=!0),w&&this.pauseablePlacement.placement.setStale()),I||w)for(const z of this._order){const O=this._layers[z];O.type==="symbol"&&this.placement.updateLayerOpacities(O,M[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,o){return a._(this,void 0,void 0,function*(){const m=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,o.icons),m})}getGlyphs(t,o){return a._(this,void 0,void 0,function*(){const m=yield this.glyphManager.getGlyphs(o.stacks),p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,o={}){this._checkLoaded(),t&&this._validate(a.z.glyphs,"glyphs",t,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,o,m={},p){this._checkLoaded();const _=[{id:t,url:o}],w=[...Q(this.stylesheet.sprite),..._];this._validate(a.z.sprite,"sprite",w,null,m)||(this.stylesheet.sprite=w,this._loadSprite(_,!0,p))}removeSprite(t){this._checkLoaded();const o=Q(this.stylesheet.sprite);if(o.find(m=>m.id===t)){if(this._spritesImagesIds[t])for(const m of this._spritesImagesIds[t])this.imageManager.removeImage(m),this._changedImages[m]=!0;o.splice(o.findIndex(m=>m.id===t),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Q(this.stylesheet.sprite)}setSprite(t,o={},m){this._checkLoaded(),t&&this._validate(a.z.sprite,"sprite",t,null,o)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,m):(this._unloadSprite(),m&&m(null)))}}var vv=a.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _v{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,m,p,_,w,I,M,z){this.context=t;let O=this.boundPaintVertexBuffers.length!==p.length;for(let G=0;!O&&G<p.length;G++)this.boundPaintVertexBuffers[G]!==p[G]&&(O=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==m||O||this.boundIndexBuffer!==_||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==z?this.freshBind(o,m,p,_,w,I,M,z):(t.bindVertexArray.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),M&&M.bind(),z&&z.bind())}freshBind(t,o,m,p,_,w,I,M){const z=t.numAttributes,O=this.context,G=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=p,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=M,o.enableAttributes(G,t);for(const U of m)U.enableAttributes(G,t);w&&w.enableAttributes(G,t),I&&I.enableAttributes(G,t),M&&M.enableAttributes(G,t),o.bind(),o.setVertexAttribPointers(G,t,_);for(const U of m)U.bind(),U.setVertexAttribPointers(G,t,_);w&&(w.bind(),w.setVertexAttribPointers(G,t,_)),p&&p.bind(),I&&(I.bind(),I.setVertexAttribPointers(G,t,_)),M&&(M.bind(),M.setVertexAttribPointers(G,t,_)),O.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const yv=(v,t,o,m,p)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:t,u_fog_color:o?o.properties.get("fog-color"):a.be.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:o?o.calculateFogBlendOpacity(m):0,u_horizon_color:o?o.properties.get("horizon-color"):a.be.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),bv={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function pc(v){const t=[];for(let o=0;o<v.length;o++){if(v[o]===null)continue;const m=v[o].split(" ");t.push(m.pop())}return t}class gc{constructor(t,o,m,p,_,w,I,M,z=[]){const O=t.gl;this.program=O.createProgram();const G=pc(o.staticAttributes),U=m?m.getBinderAttributes():[],Z=G.concat(U),ne=Ga.prelude.staticUniforms?pc(Ga.prelude.staticUniforms):[],_e=I.staticUniforms?pc(I.staticUniforms):[],ge=o.staticUniforms?pc(o.staticUniforms):[],ye=m?m.getBinderUniforms():[],we=ne.concat(_e).concat(ge).concat(ye),Ie=[];for(const nt of we)Ie.indexOf(nt)<0&&Ie.push(nt);const Ce=m?m.defines():[];Fr(O)&&Ce.unshift("#version 300 es"),_&&Ce.push("#define OVERDRAW_INSPECTOR;"),w&&Ce.push("#define TERRAIN3D;"),M&&Ce.push(M),z&&Ce.push(...z);let Re=Ce.concat(Ga.prelude.fragmentSource,I.fragmentSource,o.fragmentSource).join(`
`),Oe=Ce.concat(Ga.prelude.vertexSource,I.vertexSource,o.vertexSource).join(`
`);Fr(O)||(Re=function(nt){return nt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Re),Oe=function(nt){return nt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Oe));const Te=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Te,Re),O.compileShader(Te),!O.getShaderParameter(Te,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(Te)}`);O.attachShader(this.program,Te);const qe=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(qe,Oe),O.compileShader(qe),!O.getShaderParameter(qe,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(qe)}`);O.attachShader(this.program,qe),this.attributes={};const st={};this.numAttributes=Z.length;for(let nt=0;nt<this.numAttributes;nt++)Z[nt]&&(O.bindAttribLocation(this.program,nt,Z[nt]),this.attributes[Z[nt]]=nt);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(qe),O.deleteShader(Te);for(let nt=0;nt<Ie.length;nt++){const it=Ie[nt];if(it&&!st[it]){const lt=O.getUniformLocation(this.program,it);lt&&(st[it]=lt)}}this.fixedUniforms=p(t,st),this.terrainUniforms=((nt,it)=>({u_depth:new a.bO(nt,it.u_depth),u_terrain:new a.bO(nt,it.u_terrain),u_terrain_dim:new a.bf(nt,it.u_terrain_dim),u_terrain_matrix:new a.bQ(nt,it.u_terrain_matrix),u_terrain_unpack:new a.bR(nt,it.u_terrain_unpack),u_terrain_exaggeration:new a.bf(nt,it.u_terrain_exaggeration)}))(t,st),this.projectionUniforms=((nt,it)=>({u_projection_matrix:new a.bQ(nt,it.u_projection_matrix),u_projection_tile_mercator_coords:new a.bR(nt,it.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bR(nt,it.u_projection_clipping_plane),u_projection_transition:new a.bf(nt,it.u_projection_transition),u_projection_fallback_matrix:new a.bQ(nt,it.u_projection_fallback_matrix)}))(t,st),this.binderUniforms=m?m.getUniforms(t,st):[]}draw(t,o,m,p,_,w,I,M,z,O,G,U,Z,ne,_e,ge,ye,we,Ie){const Ce=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(m),t.setStencilMode(p),t.setColorMode(_),t.setCullFace(w),M){t.activeTexture.set(Ce.TEXTURE2),Ce.bindTexture(Ce.TEXTURE_2D,M.depthTexture),t.activeTexture.set(Ce.TEXTURE3),Ce.bindTexture(Ce.TEXTURE_2D,M.texture);for(const Oe in this.terrainUniforms)this.terrainUniforms[Oe].set(M[Oe])}if(z)for(const Oe in z)this.projectionUniforms[bv[Oe]].set(z[Oe]);if(I)for(const Oe in this.fixedUniforms)this.fixedUniforms[Oe].set(I[Oe]);ge&&ge.setUniforms(t,this.binderUniforms,ne,{zoom:_e});let Re=0;switch(o){case Ce.LINES:Re=2;break;case Ce.TRIANGLES:Re=3;break;case Ce.LINE_STRIP:Re=1}for(const Oe of Z.get()){const Te=Oe.vaos||(Oe.vaos={});(Te[O]||(Te[O]=new _v)).bind(t,this,G,ge?ge.getPaintVertexBuffers():[],U,Oe.vertexOffset,ye,we,Ie),Ce.drawElements(o,Oe.primitiveLength*Re,Ce.UNSIGNED_SHORT,Oe.primitiveOffset*Re*2)}}}function vc(v,t,o){const m=1/a.aB(o,1,t.transform.tileZoom),p=Math.pow(2,o.tileID.overscaledZ),_=o.tileSize*Math.pow(2,t.transform.tileZoom)/p,w=_*(o.tileID.canonical.x+o.tileID.wrap*p),I=_*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[m,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[w>>16,I>>16],u_pixel_coord_lower:[65535&w,65535&I]}}const Hl=(v,t,o,m)=>{const p=v.style.light,_=p.properties.get("position"),w=[_.x,_.y,_.z],I=a.bU();p.properties.get("anchor")==="viewport"&&a.bV(I,v.transform.bearingInRadians),a.bW(w,w,I);const M=v.transform.transformLightDirection(w),z=p.properties.get("color");return{u_lightpos:w,u_lightpos_globe:M,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+t,u_opacity:o,u_fill_translate:m}},dh=(v,t,o,m,p,_,w)=>a.e(Hl(v,t,o,m),vc(_,v,w),{u_height_factor:-Math.pow(2,p.overscaledZ)/w.tileSize/8}),_c=(v,t,o,m)=>a.e(vc(t,v,o),{u_fill_translate:m}),Ha=(v,t)=>({u_world:v,u_fill_translate:t}),xv=(v,t,o,m,p)=>a.e(_c(v,t,o,p),{u_world:m}),hh=(v,t,o,m,p)=>{const _=v.transform;let w,I,M=0;if(o.paint.get("circle-pitch-alignment")==="map"){const z=a.aB(t,1,_.zoom);w=!0,I=[z,z],M=z/(a.$*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*p}else w=!1,I=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:M,u_translate:m}},Wl=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),Zl=v=>({u_viewport_size:[v.width,v.height]}),Vm=(v,t=1)=>({u_color:v,u_overlay:0,u_overlay_scale:t}),Kl=(v,t,o,m)=>{const p=a.aB(v,1,t)/(a.$*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:a.aB(v,1,t),u_intensity:o,u_globe_extrude_scale:p}},Bm=(v,t,o,m)=>{const p=a.L();a.bX(p,0,v.width,v.height,0,0,1);const _=v.context.gl;return{u_matrix:p,u_world:[_.drawingBufferWidth,_.drawingBufferHeight],u_image:o,u_color_ramp:m,u_opacity:t.paint.get("heatmap-opacity")}},No=(v,t,o)=>{const m=o.paint.get("hillshade-accent-color");let p;switch(o.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const _=o.getIlluminationProperties();for(let w=0;w<_.directionRadians.length;w++)o.paint.get("hillshade-illumination-anchor")==="viewport"&&(_.directionRadians[w]+=v.transform.bearingInRadians);return{u_image:0,u_latrange:Om(0,t.tileID),u_exaggeration:o.paint.get("hillshade-exaggeration"),u_altitudes:_.altitudeRadians,u_azimuths:_.directionRadians,u_accent:m,u_method:p,u_highlights:_.highlightColor,u_shadows:_.shadowColor}},wv=(v,t)=>{const o=t.stride,m=a.L();return a.bX(m,0,a.$,-8192,0,0,1),a.M(m,m,[0,-8192,0]),{u_matrix:m,u_image:1,u_dimension:[o,o],u_zoom:v.overscaledZ,u_unpack:t.getUnpackVector()}};function Om(v,t){const o=Math.pow(2,t.canonical.z),m=t.canonical.y;return[new a.a0(0,m/o).toLngLat().lat,new a.a0(0,(m+1)/o).toLngLat().lat]}const Sv=(v,t)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:v.paint.get("color-relief-opacity")}),yc=(v,t,o,m)=>{const p=v.transform;return{u_translation:ph(v,t,o),u_ratio:m/a.aB(t,1,p.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},fh=(v,t,o,m,p)=>a.e(yc(v,t,o,m),{u_image:0,u_image_height:p}),Fm=(v,t,o,m,p)=>{const _=v.transform,w=mh(t,_);return{u_translation:ph(v,t,o),u_texsize:t.imageAtlasTexture.size,u_ratio:m/a.aB(t,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[w,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},$m=(v,t,o,m,p,_)=>{const w=v.lineAtlas,I=mh(t,v.transform),M=o.layout.get("line-cap")==="round",z=w.getDash(p.from,M),O=w.getDash(p.to,M),G=z.width*_.fromScale,U=O.width*_.toScale;return a.e(yc(v,t,o,m),{u_patternscale_a:[I/G,-z.height/2],u_patternscale_b:[I/U,-O.height/2],u_sdfgamma:w.width/(256*Math.min(G,U)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:O.y,u_mix:_.t})};function mh(v,t){return 1/a.aB(v,1,t.tileZoom)}function ph(v,t,o){return a.aC(v.transform,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const no=(v,t,o,m,p)=>{return{u_tl_parent:v,u_scale_parent:t,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(w=m.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:jm(m.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var _,w};function jm(v){v*=Math.PI/180;const t=Math.sin(v),o=Math.cos(v);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const gh=(v,t,o,m,p,_,w,I,M,z,O,G,U)=>{const Z=w.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Z.width/Z.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:M,u_is_text:+O,u_pitch_with_map:+m,u_is_along_line:p,u_is_variable_anchor:_,u_texsize:G,u_texture:0,u_translation:z,u_pitched_scale:U}},Uo=(v,t,o,m,p,_,w,I,M,z,O,G,U,Z)=>{const ne=w.transform;return a.e(gh(v,t,o,m,p,_,w,I,M,z,O,G,Z),{u_gamma_scale:m?Math.cos(ne.pitch*Math.PI/180)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},kv=(v,t,o,m,p,_,w,I,M,z,O,G,U)=>a.e(Uo(v,t,o,m,p,_,w,I,M,z,!0,O,0,U),{u_texsize_icon:G,u_texture_icon:1}),bc=(v,t)=>({u_opacity:v,u_color:t}),Cv=(v,t,o,m,p)=>a.e(function(_,w,I,M){const z=I.imageManager.getPattern(_.from.toString()),O=I.imageManager.getPattern(_.to.toString()),{width:G,height:U}=I.imageManager.getPixelSize(),Z=Math.pow(2,M.tileID.overscaledZ),ne=M.tileSize*Math.pow(2,I.transform.tileZoom)/Z,_e=ne*(M.tileID.canonical.x+M.tileID.wrap*Z),ge=ne*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[G,U],u_mix:w.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/a.aB(M,1,I.transform.tileZoom),u_pixel_coord_upper:[_e>>16,ge>>16],u_pixel_coord_lower:[65535&_e,65535&ge]}}(o,p,t,m),{u_opacity:v}),Nm=(v,t)=>{},Um={fillExtrusion:(v,t)=>({u_lightpos:new a.bS(v,t.u_lightpos),u_lightpos_globe:new a.bS(v,t.u_lightpos_globe),u_lightintensity:new a.bf(v,t.u_lightintensity),u_lightcolor:new a.bS(v,t.u_lightcolor),u_vertical_gradient:new a.bf(v,t.u_vertical_gradient),u_opacity:new a.bf(v,t.u_opacity),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillExtrusionPattern:(v,t)=>({u_lightpos:new a.bS(v,t.u_lightpos),u_lightpos_globe:new a.bS(v,t.u_lightpos_globe),u_lightintensity:new a.bf(v,t.u_lightintensity),u_lightcolor:new a.bS(v,t.u_lightcolor),u_vertical_gradient:new a.bf(v,t.u_vertical_gradient),u_height_factor:new a.bf(v,t.u_height_factor),u_opacity:new a.bf(v,t.u_opacity),u_fill_translate:new a.bT(v,t.u_fill_translate),u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade)}),fill:(v,t)=>({u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillPattern:(v,t)=>({u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillOutline:(v,t)=>({u_world:new a.bT(v,t.u_world),u_fill_translate:new a.bT(v,t.u_fill_translate)}),fillOutlinePattern:(v,t)=>({u_world:new a.bT(v,t.u_world),u_image:new a.bO(v,t.u_image),u_texsize:new a.bT(v,t.u_texsize),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade),u_fill_translate:new a.bT(v,t.u_fill_translate)}),circle:(v,t)=>({u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_scale_with_map:new a.bO(v,t.u_scale_with_map),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_extrude_scale:new a.bT(v,t.u_extrude_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_globe_extrude_scale:new a.bf(v,t.u_globe_extrude_scale),u_translate:new a.bT(v,t.u_translate)}),collisionBox:(v,t)=>({u_pixel_extrude_scale:new a.bT(v,t.u_pixel_extrude_scale)}),collisionCircle:(v,t)=>({u_viewport_size:new a.bT(v,t.u_viewport_size)}),debug:(v,t)=>({u_color:new a.bP(v,t.u_color),u_overlay:new a.bO(v,t.u_overlay),u_overlay_scale:new a.bf(v,t.u_overlay_scale)}),depth:Nm,clippingMask:Nm,heatmap:(v,t)=>({u_extrude_scale:new a.bf(v,t.u_extrude_scale),u_intensity:new a.bf(v,t.u_intensity),u_globe_extrude_scale:new a.bf(v,t.u_globe_extrude_scale)}),heatmapTexture:(v,t)=>({u_matrix:new a.bQ(v,t.u_matrix),u_world:new a.bT(v,t.u_world),u_image:new a.bO(v,t.u_image),u_color_ramp:new a.bO(v,t.u_color_ramp),u_opacity:new a.bf(v,t.u_opacity)}),hillshade:(v,t)=>({u_image:new a.bO(v,t.u_image),u_latrange:new a.bT(v,t.u_latrange),u_exaggeration:new a.bf(v,t.u_exaggeration),u_altitudes:new a.bZ(v,t.u_altitudes),u_azimuths:new a.bZ(v,t.u_azimuths),u_accent:new a.bP(v,t.u_accent),u_method:new a.bO(v,t.u_method),u_shadows:new a.bY(v,t.u_shadows),u_highlights:new a.bY(v,t.u_highlights)}),hillshadePrepare:(v,t)=>({u_matrix:new a.bQ(v,t.u_matrix),u_image:new a.bO(v,t.u_image),u_dimension:new a.bT(v,t.u_dimension),u_zoom:new a.bf(v,t.u_zoom),u_unpack:new a.bR(v,t.u_unpack)}),colorRelief:(v,t)=>({u_image:new a.bO(v,t.u_image),u_unpack:new a.bR(v,t.u_unpack),u_dimension:new a.bT(v,t.u_dimension),u_elevation_stops:new a.bO(v,t.u_elevation_stops),u_color_stops:new a.bO(v,t.u_color_stops),u_opacity:new a.bf(v,t.u_opacity)}),line:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels)}),lineGradient:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_image:new a.bO(v,t.u_image),u_image_height:new a.bf(v,t.u_image_height)}),linePattern:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_texsize:new a.bT(v,t.u_texsize),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_image:new a.bO(v,t.u_image),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_scale:new a.bS(v,t.u_scale),u_fade:new a.bf(v,t.u_fade)}),lineSDF:(v,t)=>({u_translation:new a.bT(v,t.u_translation),u_ratio:new a.bf(v,t.u_ratio),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_units_to_pixels:new a.bT(v,t.u_units_to_pixels),u_patternscale_a:new a.bT(v,t.u_patternscale_a),u_patternscale_b:new a.bT(v,t.u_patternscale_b),u_sdfgamma:new a.bf(v,t.u_sdfgamma),u_image:new a.bO(v,t.u_image),u_tex_y_a:new a.bf(v,t.u_tex_y_a),u_tex_y_b:new a.bf(v,t.u_tex_y_b),u_mix:new a.bf(v,t.u_mix)}),raster:(v,t)=>({u_tl_parent:new a.bT(v,t.u_tl_parent),u_scale_parent:new a.bf(v,t.u_scale_parent),u_buffer_scale:new a.bf(v,t.u_buffer_scale),u_fade_t:new a.bf(v,t.u_fade_t),u_opacity:new a.bf(v,t.u_opacity),u_image0:new a.bO(v,t.u_image0),u_image1:new a.bO(v,t.u_image1),u_brightness_low:new a.bf(v,t.u_brightness_low),u_brightness_high:new a.bf(v,t.u_brightness_high),u_saturation_factor:new a.bf(v,t.u_saturation_factor),u_contrast_factor:new a.bf(v,t.u_contrast_factor),u_spin_weights:new a.bS(v,t.u_spin_weights),u_coords_top:new a.bR(v,t.u_coords_top),u_coords_bottom:new a.bR(v,t.u_coords_bottom)}),symbolIcon:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texture:new a.bO(v,t.u_texture),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),symbolSDF:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texture:new a.bO(v,t.u_texture),u_gamma_scale:new a.bf(v,t.u_gamma_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_is_halo:new a.bO(v,t.u_is_halo),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),symbolTextAndIcon:(v,t)=>({u_is_size_zoom_constant:new a.bO(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(v,t.u_is_size_feature_constant),u_size_t:new a.bf(v,t.u_size_t),u_size:new a.bf(v,t.u_size),u_camera_to_center_distance:new a.bf(v,t.u_camera_to_center_distance),u_pitch:new a.bf(v,t.u_pitch),u_rotate_symbol:new a.bO(v,t.u_rotate_symbol),u_aspect_ratio:new a.bf(v,t.u_aspect_ratio),u_fade_change:new a.bf(v,t.u_fade_change),u_label_plane_matrix:new a.bQ(v,t.u_label_plane_matrix),u_coord_matrix:new a.bQ(v,t.u_coord_matrix),u_is_text:new a.bO(v,t.u_is_text),u_pitch_with_map:new a.bO(v,t.u_pitch_with_map),u_is_along_line:new a.bO(v,t.u_is_along_line),u_is_variable_anchor:new a.bO(v,t.u_is_variable_anchor),u_texsize:new a.bT(v,t.u_texsize),u_texsize_icon:new a.bT(v,t.u_texsize_icon),u_texture:new a.bO(v,t.u_texture),u_texture_icon:new a.bO(v,t.u_texture_icon),u_gamma_scale:new a.bf(v,t.u_gamma_scale),u_device_pixel_ratio:new a.bf(v,t.u_device_pixel_ratio),u_is_halo:new a.bO(v,t.u_is_halo),u_translation:new a.bT(v,t.u_translation),u_pitched_scale:new a.bf(v,t.u_pitched_scale)}),background:(v,t)=>({u_opacity:new a.bf(v,t.u_opacity),u_color:new a.bP(v,t.u_color)}),backgroundPattern:(v,t)=>({u_opacity:new a.bf(v,t.u_opacity),u_image:new a.bO(v,t.u_image),u_pattern_tl_a:new a.bT(v,t.u_pattern_tl_a),u_pattern_br_a:new a.bT(v,t.u_pattern_br_a),u_pattern_tl_b:new a.bT(v,t.u_pattern_tl_b),u_pattern_br_b:new a.bT(v,t.u_pattern_br_b),u_texsize:new a.bT(v,t.u_texsize),u_mix:new a.bf(v,t.u_mix),u_pattern_size_a:new a.bT(v,t.u_pattern_size_a),u_pattern_size_b:new a.bT(v,t.u_pattern_size_b),u_scale_a:new a.bf(v,t.u_scale_a),u_scale_b:new a.bf(v,t.u_scale_b),u_pixel_coord_upper:new a.bT(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(v,t.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bf(v,t.u_tile_units_to_pixels)}),terrain:(v,t)=>({u_texture:new a.bO(v,t.u_texture),u_ele_delta:new a.bf(v,t.u_ele_delta),u_fog_matrix:new a.bQ(v,t.u_fog_matrix),u_fog_color:new a.bP(v,t.u_fog_color),u_fog_ground_blend:new a.bf(v,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bf(v,t.u_fog_ground_blend_opacity),u_horizon_color:new a.bP(v,t.u_horizon_color),u_horizon_fog_blend:new a.bf(v,t.u_horizon_fog_blend),u_is_globe_mode:new a.bf(v,t.u_is_globe_mode)}),terrainDepth:(v,t)=>({u_ele_delta:new a.bf(v,t.u_ele_delta)}),terrainCoords:(v,t)=>({u_texture:new a.bO(v,t.u_texture),u_terrain_coords_id:new a.bf(v,t.u_terrain_coords_id),u_ele_delta:new a.bf(v,t.u_ele_delta)}),projectionErrorMeasurement:(v,t)=>({u_input:new a.bf(v,t.u_input),u_output_expected:new a.bf(v,t.u_output_expected)}),atmosphere:(v,t)=>({u_sun_pos:new a.bS(v,t.u_sun_pos),u_atmosphere_blend:new a.bf(v,t.u_atmosphere_blend),u_globe_position:new a.bS(v,t.u_globe_position),u_globe_radius:new a.bf(v,t.u_globe_radius),u_inv_proj_matrix:new a.bQ(v,t.u_inv_proj_matrix)}),sky:(v,t)=>({u_sky_color:new a.bP(v,t.u_sky_color),u_horizon_color:new a.bP(v,t.u_horizon_color),u_horizon:new a.bT(v,t.u_horizon),u_horizon_normal:new a.bT(v,t.u_horizon_normal),u_sky_horizon_blend:new a.bf(v,t.u_sky_horizon_blend),u_sky_blend:new a.bf(v,t.u_sky_blend)})};class Gm{constructor(t,o,m){this.context=t;const p=t.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qm={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vh{constructor(t,o,m,p){this.length=o.length,this.attributes=m,this.itemSize=o.bytesPerElement,this.dynamicDraw=p,this.context=t;const _=t.gl;this.buffer=_.createBuffer(),t.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let m=0;m<this.attributes.length;m++){const p=o.attributes[this.attributes[m].name];p!==void 0&&t.enableVertexAttribArray(p)}}setVertexAttribPointers(t,o,m){for(let p=0;p<this.attributes.length;p++){const _=this.attributes[p],w=o.attributes[_.name];w!==void 0&&t.vertexAttribPointer(w,_.components,t[qm[_.type]],!1,this.itemSize,_.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Kn{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xc extends Kn{getDefault(){return a.be.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ss extends Kn{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class _h extends Kn{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class yh extends Kn{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class bh extends Kn{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Hm extends Kn{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class xh extends Kn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class io extends Kn{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class wh extends Kn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class Tv extends Kn{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Pv extends Kn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class Iv extends Kn{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Av extends Kn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class Wm extends Kn{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ev extends Kn{getDefault(){return a.be.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Zm extends Kn{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class wc extends Kn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class Sc extends Kn{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class kc extends Kn{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Sh extends Kn{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ro extends Kn{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Yl extends Kn{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Go extends Kn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class wa extends Kn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Km extends Kn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Ym extends Kn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class kh extends Kn{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ao extends Kn{getDefault(){return null}set(t){var o;if(t===this.current&&!this.dirty)return;const m=this.gl;Fr(m)?m.bindVertexArray(t):(o=m.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Cc extends Kn{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Tc extends Kn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Xl extends Kn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class qo extends Kn{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class Xm extends qo{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Ho extends qo{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Wo extends qo{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const Ch="Framebuffer is not complete";class Th{constructor(t,o,m,p,_){this.context=t,this.width=o,this.height=m;const w=t.gl,I=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Xm(t,I),p)this.depthAttachment=_?new Wo(t,I):new Ho(t,I);else if(_)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(Ch)}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const m=this.depthAttachment.get();m&&t.deleteRenderbuffer(m)}t.deleteFramebuffer(this.framebuffer)}}class Fn{constructor(t){var o,m;if(this.gl=t,this.clearColor=new xc(this),this.clearDepth=new ss(this),this.clearStencil=new _h(this),this.colorMask=new yh(this),this.depthMask=new bh(this),this.stencilMask=new Hm(this),this.stencilFunc=new xh(this),this.stencilOp=new io(this),this.stencilTest=new wh(this),this.depthRange=new Tv(this),this.depthTest=new Pv(this),this.depthFunc=new Iv(this),this.blend=new Av(this),this.blendFunc=new Wm(this),this.blendColor=new Ev(this),this.blendEquation=new Zm(this),this.cullFace=new wc(this),this.cullFaceSide=new Sc(this),this.frontFace=new kc(this),this.program=new Sh(this),this.activeTexture=new ro(this),this.viewport=new Yl(this),this.bindFramebuffer=new Go(this),this.bindRenderbuffer=new wa(this),this.bindTexture=new Km(this),this.bindVertexBuffer=new Ym(this),this.bindElementBuffer=new kh(this),this.bindVertexArray=new ao(this),this.pixelStoreUnpack=new Cc(this),this.pixelStoreUnpackPremultiplyAlpha=new Tc(this),this.pixelStoreUnpackFlipY=new Xl(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Fr(t)){this.HALF_FLOAT=t.HALF_FLOAT;const p=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=t.RGBA16F)!==null&&o!==void 0?o:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(m=t.RGB16F)!==null&&m!==void 0?m:p==null?void 0:p.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const p=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new Gm(this,t,o)}createVertexBuffer(t,o,m){return new vh(this,t,o,m)}createRenderbuffer(t,o,m){const p=this.gl,_=p.createRenderbuffer();return this.bindRenderbuffer.set(_),p.renderbufferStorage(p.RENDERBUFFER,t,o,m),this.bindRenderbuffer.set(null),_}createFramebuffer(t,o,m,p){return new Th(this,t,o,m,p)}clear({color:t,depth:o,stencil:m}){const p=this.gl;let _=0;t&&(_|=p.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(_|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),m!==void 0&&(_|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),p.clear(_)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){a.bG(t.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Fr(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var o;return Fr(this.gl)?this.gl.deleteVertexArray(t):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let so;function Jm(v,t,o,m,p){const _=v.context,w=v.transform,I=_.gl,M=v.useProgram("collisionBox"),z=[];let O=0,G=0;for(let ye=0;ye<m.length;ye++){const we=m[ye],Ie=t.getTile(we).getBucket(o);if(!Ie)continue;const Ce=p?Ie.textCollisionBox:Ie.iconCollisionBox,Re=Ie.collisionCircleArray;Re.length>0&&(z.push({circleArray:Re,circleOffset:G,coord:we}),O+=Re.length/4,G=O),Ce&&M.draw(_,I.LINES,Cn.disabled,pn.disabled,v.colorModeForRenderPass(),Sn.disabled,Wl(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),w.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,null,v.transform.zoom,null,null,Ce.collisionVertexBuffer)}if(!p||!z.length)return;const U=v.useProgram("collisionCircle"),Z=new a.b_;Z.resize(4*O),Z._trim();let ne=0;for(const ye of z)for(let we=0;we<ye.circleArray.length/4;we++){const Ie=4*we,Ce=ye.circleArray[Ie+0],Re=ye.circleArray[Ie+1],Oe=ye.circleArray[Ie+2],Te=ye.circleArray[Ie+3];Z.emplace(ne++,Ce,Re,Oe,Te,0),Z.emplace(ne++,Ce,Re,Oe,Te,1),Z.emplace(ne++,Ce,Re,Oe,Te,2),Z.emplace(ne++,Ce,Re,Oe,Te,3)}(!so||so.length<2*O)&&(so=function(ye){const we=2*ye,Ie=new a.c0;Ie.resize(we),Ie._trim();for(let Ce=0;Ce<we;Ce++){const Re=6*Ce;Ie.uint16[Re+0]=4*Ce+0,Ie.uint16[Re+1]=4*Ce+1,Ie.uint16[Re+2]=4*Ce+2,Ie.uint16[Re+3]=4*Ce+2,Ie.uint16[Re+4]=4*Ce+3,Ie.uint16[Re+5]=4*Ce+0}return Ie}(O));const _e=_.createIndexBuffer(so,!0),ge=_.createVertexBuffer(Z,a.b$.members,!0);for(const ye of z){const we=Zl(v.transform);U.draw(_,I.TRIANGLES,Cn.disabled,pn.disabled,v.colorModeForRenderPass(),Sn.disabled,we,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye.coord),null,o.id,ge,_e,a.aL.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,v.transform.zoom,null,null,null)}ge.destroy(),_e.destroy()}const Qm=a.af(new Float32Array(16));function Jl(v,t,o,m,p,_){const{horizontalAlign:w,verticalAlign:I}=a.aG(v);return new a.P((-(w-.5)*t/p+m[0])*_,(-(I-.5)*o/p+m[1])*_)}function Mv(v,t,o,m,p,_){const w=t.tileAnchorPoint.add(new a.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let I=m.mult(_);o||(I=I.rotate(-p));const M=w.add(I);return Zn(M.x,M.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(o){const I=Gt(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(v),M=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return v.add(m.rotate(M))}return v.add(m)}function Dv(v,t,o,m,p,_,w,I,M,z,O,G){const U=v.text.placedSymbolArray,Z=v.text.dynamicLayoutVertexArray,ne=v.icon.dynamicLayoutVertexArray,_e={};Z.clear();for(let ge=0;ge<U.length;ge++){const ye=U.get(ge),we=ye.hidden||!ye.crossTileID||v.allowVerticalPlacement&&!ye.placedOrientation?null:m[ye.crossTileID];if(we){const Ie=new a.P(ye.anchorX,ye.anchorY),Ce={getElevation:G,width:p.width,height:p.height,pitchedLabelPlaneMatrix:_,pitchWithMap:o,transform:p,tileAnchorPoint:Ie,translation:z,unwrappedTileID:O},Re=o?En(Ie.x,Ie.y,Ce):Gt(Ie.x,Ie.y,Ce),Oe=gn(p.cameraToCenterDistance,Re.signedDistanceFromCamera);let Te=a.ao(v.textSizeData,I,ye)*Oe/a.aA;o&&(Te*=v.tilePixelRatio/w);const{width:qe,height:st,anchor:nt,textOffset:it,textBoxScale:lt}=we,Ut=Jl(nt,qe,st,it,lt,Te),jt=p.getPitchedTextCorrection(Ie.x+z[0],Ie.y+z[1],O),Mt=Mv(Re.point,Ce,t,Ut,-p.bearingInRadians,jt),Jt=v.allowVerticalPlacement&&ye.placedOrientation===a.an.vertical?Math.PI/2:0;for(let Tn=0;Tn<ye.numGlyphs;Tn++)a.au(Z,Mt,Jt);M&&ye.associatedIconIndex>=0&&(_e[ye.associatedIconIndex]={shiftedAnchor:Mt,angle:Jt})}else ts(ye.numGlyphs,Z)}if(M){ne.clear();const ge=v.icon.placedSymbolArray;for(let ye=0;ye<ge.length;ye++){const we=ge.get(ye);if(we.hidden)ts(we.numGlyphs,ne);else{const Ie=_e[ye];if(Ie)for(let Ce=0;Ce<we.numGlyphs;Ce++)a.au(ne,Ie.shiftedAnchor,Ie.angle);else ts(we.numGlyphs,ne)}}v.icon.dynamicLayoutVertexBuffer.updateData(ne)}v.text.dynamicLayoutVertexBuffer.updateData(Z)}function ep(v,t,o){return o.iconsInText&&t?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function tp(v,t,o,m,p,_,w,I,M,z,O,G,U){const Z=v.context,ne=Z.gl,_e=v.transform,ge=I==="map",ye=M==="map",we=I!=="viewport"&&o.layout.get("symbol-placement")!=="point",Ie=ge&&!ye&&!we,Ce=!o.layout.get("symbol-sort-key").isConstant();let Re=!1;const Oe=v.getDepthModeForSublayer(0,Cn.ReadOnly),Te=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),qe=[],st=_e.getCircleRadiusCorrection();for(const nt of m){const it=t.getTile(nt),lt=it.getBucket(o);if(!lt)continue;const Ut=p?lt.text:lt.icon;if(!Ut||!Ut.segments.get().length||!Ut.hasVisibleVertices)continue;const jt=Ut.programConfigurations.get(o.id),Mt=p||lt.sdfIcons,Jt=p?lt.textSizeData:lt.iconSizeData,Tn=ye||_e.pitch!==0,Yn=v.useProgram(ep(Mt,p,lt),jt),Si=a.am(Jt,_e.zoom),ni=v.style.map.terrain&&v.style.map.terrain.getTerrainData(nt);let ki,ai,ii,si,vr=[0,0],qn=null;if(p)ai=it.glyphAtlasTexture,ii=ne.LINEAR,ki=it.glyphAtlasTexture.size,lt.iconsInText&&(vr=it.imageAtlasTexture.size,qn=it.imageAtlasTexture,si=Tn||v.options.rotating||v.options.zooming||Jt.kind==="composite"||Jt.kind==="camera"?ne.LINEAR:ne.NEAREST);else{const Bi=o.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;ai=it.imageAtlasTexture,ii=Mt||v.options.rotating||v.options.zooming||Bi||Tn?ne.LINEAR:ne.NEAREST,ki=it.imageAtlasTexture.size}const sr=a.aB(it,1,v.transform.zoom),_r=vn(ge,v.transform,sr),Ms=a.L();a.ap(Ms,_r);const Ds=ui(ye,ge,v.transform,sr),Rs=a.aC(_e,it,_,w),Ka=_e.getProjectionData({overscaledTileID:nt,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),hu=Te&&lt.hasTextData(),fu=o.layout.get("icon-text-fit")!=="none"&&hu&&lt.hasIconData();if(we){const Bi=v.style.map.terrain?(Ur,Xi)=>v.style.map.terrain.getElevation(nt,Ur,Xi):null,hi=o.layout.get("text-rotation-alignment")==="map";ir(lt,v,p,_r,Ms,ye,z,hi,nt.toUnwrapped(),_e.width,_e.height,Rs,Bi)}const al=p&&Te||fu,Xr=we||al?Qm:ye?_r:v.transform.clipSpaceToPixelsMatrix,Ma=Mt&&o.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ls;Ls=Mt?lt.iconsInText?kv(Jt.kind,Si,Ie,ye,we,al,v,Xr,Ds,Rs,ki,vr,st):Uo(Jt.kind,Si,Ie,ye,we,al,v,Xr,Ds,Rs,p,ki,0,st):gh(Jt.kind,Si,Ie,ye,we,al,v,Xr,Ds,Rs,p,ki,st);const uo={program:Yn,buffers:Ut,uniformValues:Ls,projectionData:Ka,atlasTexture:ai,atlasTextureIcon:qn,atlasInterpolation:ii,atlasInterpolationIcon:si,isSDF:Mt,hasHalo:Ma};if(Ce&&lt.canOverlap){Re=!0;const Bi=Ut.segments.get();for(const hi of Bi)qe.push({segments:new a.aL([hi]),sortKey:hi.sortKey,state:uo,terrainData:ni})}else qe.push({segments:Ut.segments,sortKey:0,state:uo,terrainData:ni})}Re&&qe.sort((nt,it)=>nt.sortKey-it.sortKey);for(const nt of qe){const it=nt.state;if(Z.activeTexture.set(ne.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,ne.CLAMP_TO_EDGE),it.atlasTextureIcon&&(Z.activeTexture.set(ne.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),it.isSDF){const lt=it.uniformValues;it.hasHalo&&(lt.u_is_halo=1,Pc(it.buffers,nt.segments,o,v,it.program,Oe,O,G,lt,it.projectionData,nt.terrainData)),lt.u_is_halo=0}Pc(it.buffers,nt.segments,o,v,it.program,Oe,O,G,it.uniformValues,it.projectionData,nt.terrainData)}}function Pc(v,t,o,m,p,_,w,I,M,z,O){const G=m.context;p.draw(G,G.gl.TRIANGLES,_,w,I,Sn.backCCW,M,O,z,o.id,v.layoutVertexBuffer,v.indexBuffer,t,o.paint,m.transform.zoom,v.programConfigurations.get(o.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Ic(v,t,o,m,p){const _=v.context,w=_.gl,I=pn.disabled,M=new Gn([w.ONE,w.ONE],a.be.transparent,[!0,!0,!0,!0]),z=t.getBucket(o);if(!z)return;const O=m.key;let G=o.heatmapFbos.get(O);G||(G=Ql(_,t.tileSize,t.tileSize),o.heatmapFbos.set(O,G)),_.bindFramebuffer.set(G.framebuffer),_.viewport.set([0,0,t.tileSize,t.tileSize]),_.clear({color:a.be.transparent});const U=z.programConfigurations.get(o.id),Z=v.useProgram("heatmap",U,!p),ne=v.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),_e=v.style.map.terrain.getTerrainData(m);Z.draw(_,w.TRIANGLES,Cn.disabled,I,M,Sn.disabled,Kl(t,v.transform.zoom,o.paint.get("heatmap-intensity"),1),_e,ne,o.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,o.paint,v.transform.zoom,U)}function Ac(v,t,o,m,p){const _=v.context,w=_.gl,I=v.transform;_.setColorMode(v.colorModeForRenderPass());const M=Ec(_,t),z=o.key,O=t.heatmapFbos.get(z);if(!O)return;_.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,O.colorAttachment.get()),_.activeTexture.set(w.TEXTURE1),M.bind(w.LINEAR,w.CLAMP_TO_EDGE);const G=I.getProjectionData({overscaledTileID:o,applyTerrainMatrix:p,applyGlobeMatrix:!m});v.useProgram("heatmapTexture").draw(_,w.TRIANGLES,Cn.disabled,pn.disabled,v.colorModeForRenderPass(),Sn.disabled,Bm(v,t,0,1),null,G,t.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,t.paint,I.zoom),O.destroy(),t.heatmapFbos.delete(z)}function Ql(v,t,o){var m,p;const _=v.gl,w=_.createTexture();_.bindTexture(_.TEXTURE_2D,w),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR);const I=(m=v.HALF_FLOAT)!==null&&m!==void 0?m:_.UNSIGNED_BYTE,M=(p=v.RGBA16F)!==null&&p!==void 0?p:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,M,t,o,0,_.RGBA,I,null);const z=v.createFramebuffer(t,o,!1,!1);return z.colorAttachment.set(w),z}function Ec(v,t){return t.colorRampTexture||(t.colorRampTexture=new a.T(v,t.colorRamp,v.gl.RGBA)),t.colorRampTexture}function Ph(v,t,o,m,p){if(!o||!m||!m.imageAtlas)return;const _=m.imageAtlas.patternPositions;let w=_[o.to.toString()],I=_[o.from.toString()];if(!w&&I&&(w=I),!I&&w&&(I=w),!w||!I){const M=p.getPaintProperty(t);w=_[M],I=_[M]}w&&I&&v.setConstantPatternPositions(w,I)}function eu(v,t,o,m,p,_,w,I){const M=v.context.gl,z="fill-pattern",O=o.paint.get(z),G=O&&O.constantOr(1),U=o.getCrossfadeParameters();let Z,ne,_e,ge,ye;const we=v.transform,Ie=o.paint.get("fill-translate"),Ce=o.paint.get("fill-translate-anchor");w?(ne=G&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=M.LINES):(ne=G?"fillPattern":"fill",Z=M.TRIANGLES);const Re=O.constantOr(null);for(const Oe of m){const Te=t.getTile(Oe);if(G&&!Te.patternsLoaded())continue;const qe=Te.getBucket(o);if(!qe)continue;const st=qe.programConfigurations.get(o.id),nt=v.useProgram(ne,st),it=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Oe);G&&(v.context.activeTexture.set(M.TEXTURE0),Te.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),st.updatePaintBuffers(U)),Ph(st,z,Re,Te,o);const lt=we.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),Ut=a.aC(we,Te,Ie,Ce);if(w){ge=qe.indexBuffer2,ye=qe.segments2;const Mt=[M.drawingBufferWidth,M.drawingBufferHeight];_e=ne==="fillOutlinePattern"&&G?xv(v,U,Te,Mt,Ut):Ha(Mt,Ut)}else ge=qe.indexBuffer,ye=qe.segments,_e=G?_c(v,U,Te,Ut):{u_fill_translate:Ut};const jt=v.stencilModeForClipping(Oe);nt.draw(v.context,Z,p,jt,_,Sn.backCCW,_e,it,lt,o.id,qe.layoutVertexBuffer,ge,ye,o.paint,v.transform.zoom,st)}}function Zo(v,t,o,m,p,_,w,I){const M=v.context,z=M.gl,O="fill-extrusion-pattern",G=o.paint.get(O),U=G.constantOr(1),Z=o.getCrossfadeParameters(),ne=o.paint.get("fill-extrusion-opacity"),_e=G.constantOr(null),ge=v.transform;for(const ye of m){const we=t.getTile(ye),Ie=we.getBucket(o);if(!Ie)continue;const Ce=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye),Re=Ie.programConfigurations.get(o.id),Oe=v.useProgram(U?"fillExtrusionPattern":"fillExtrusion",Re);U&&(v.context.activeTexture.set(z.TEXTURE0),we.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Re.updatePaintBuffers(Z));const Te=ge.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!I,applyTerrainMatrix:!0});Ph(Re,O,_e,we,o);const qe=a.aC(ge,we,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),st=o.paint.get("fill-extrusion-vertical-gradient"),nt=U?dh(v,st,ne,qe,ye,Z,we):Hl(v,st,ne,qe);Oe.draw(M,M.gl.TRIANGLES,p,_,w,Sn.backCCW,nt,Ce,Te,o.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,o.paint,v.transform.zoom,Re,v.style.map.terrain&&Ie.centroidVertexBuffer)}}function Ko(v,t,o,m,p,_,w,I,M){var z;const O=v.style.projection,G=v.context,U=v.transform,Z=G.gl,ne=[`#define NUM_ILLUMINATION_SOURCES ${o.paint.get("hillshade-highlight-color").values.length}`],_e=v.useProgram("hillshade",null,!1,ne),ge=!v.options.moving;for(const ye of m){const we=t.getTile(ye),Ie=we.fbo;if(!Ie)continue;const Ce=O.getMeshFromTileID(G,ye.canonical,I,!0,"raster"),Re=(z=v.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(ye);G.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,Ie.colorAttachment.get());const Oe=U.getProjectionData({overscaledTileID:ye,aligned:ge,applyGlobeMatrix:!M,applyTerrainMatrix:!0});_e.draw(G,Z.TRIANGLES,_,p[ye.overscaledZ],w,Sn.backCCW,No(v,we,o),Re,Oe,o.id,Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)}}function tu(v,t,o,m,p,_,w,I,M){var z;const O=v.style.projection,G=v.context,U=v.transform,Z=G.gl,ne=v.useProgram("colorRelief"),_e=!v.options.moving;let ge=!0;for(const ye of m){const we=t.getTile(ye),Ie=we.dem;if(ge){const st=Z.getParameter(Z.MAX_TEXTURE_SIZE),{elevationTexture:nt,colorTexture:it}=o.getColorRampTextures(G,st,Ie.getUnpackVector());G.activeTexture.set(Z.TEXTURE1),nt.bind(Z.NEAREST,Z.CLAMP_TO_EDGE),G.activeTexture.set(Z.TEXTURE4),it.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),ge=!1}if(!Ie||!Ie.data)continue;const Ce=Ie.stride,Re=Ie.getPixels();if(G.activeTexture.set(Z.TEXTURE0),G.pixelStoreUnpackPremultiplyAlpha.set(!1),we.demTexture=we.demTexture||v.getTileTexture(Ce),we.demTexture){const st=we.demTexture;st.update(Re,{premultiply:!1}),st.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}else we.demTexture=new a.T(G,Re,Z.RGBA,{premultiply:!1}),we.demTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);const Oe=O.getMeshFromTileID(G,ye.canonical,I,!0,"raster"),Te=(z=v.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(ye),qe=U.getProjectionData({overscaledTileID:ye,aligned:_e,applyGlobeMatrix:!M,applyTerrainMatrix:!0});ne.draw(G,Z.TRIANGLES,_,p[ye.overscaledZ],w,Sn.backCCW,Sv(o,we.dem),Te,qe,o.id,Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}}const Ih=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Ts(v,t,o,m,p,_,w,I,M=!1,z=!1){const O=m[m.length-1].overscaledZ,G=v.context,U=G.gl,Z=v.useProgram("raster"),ne=v.transform,_e=v.style.projection,ge=v.colorModeForRenderPass(),ye=!v.options.moving;for(const we of m){const Ie=v.getDepthModeForSublayer(we.overscaledZ-O,o.paint.get("raster-opacity")===1?Cn.ReadWrite:Cn.ReadOnly,U.LESS),Ce=t.getTile(we);Ce.registerFadeDuration(o.paint.get("raster-fade-duration"));const Re=t.findLoadedParent(we,0),Oe=t.findLoadedSibling(we),Te=Rv(Ce,Re||Oe||null,t,o,v.transform,v.style.map.terrain);let qe,st;const nt=o.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;G.activeTexture.set(U.TEXTURE0),Ce.texture.bind(nt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(U.TEXTURE1),Re?(Re.texture.bind(nt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),qe=Math.pow(2,Re.tileID.overscaledZ-Ce.tileID.overscaledZ),st=[Ce.tileID.canonical.x*qe%1,Ce.tileID.canonical.y*qe%1]):Ce.texture.bind(nt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),Ce.texture.useMipmap&&G.extTextureFilterAnisotropic&&v.transform.pitch>20&&U.texParameterf(U.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);const it=v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),lt=ne.getProjectionData({overscaledTileID:we,aligned:ye,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),Ut=no(st||[0,0],qe||1,Te,o,I),jt=_e.getMeshFromTileID(G,we.canonical,_,w,"raster");Z.draw(G,U.TRIANGLES,Ie,p?p[we.overscaledZ]:pn.disabled,ge,M?Sn.frontCCW:Sn.backCCW,Ut,it,lt,o.id,jt.vertexBuffer,jt.indexBuffer,jt.segments)}}function Rv(v,t,o,m,p,_){const w=m.paint.get("raster-fade-duration");if(!_&&w>0){const I=A.now(),M=(I-v.timeAdded)/w,z=t?(I-t.timeAdded)/w:-1,O=o.getSource(),G=xt(p,{tileSize:O.tileSize,roundZoom:O.roundZoom}),U=!t||Math.abs(t.tileID.overscaledZ-G)>Math.abs(v.tileID.overscaledZ-G),Z=U&&v.refreshedUponExpiration?1:a.ag(U?M:1-z,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),t?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}const np=new a.be(1,0,0,1),Mc=new a.be(0,1,0,1),Ah=new a.be(0,0,1,1),ip=new a.be(1,0,1,1),rp=new a.be(0,1,1,1);function nu(v,t,o,m){Rc(v,0,t+o/2,v.transform.width,o,m)}function Dc(v,t,o,m){Rc(v,t-o/2,0,o,v.transform.height,m)}function Rc(v,t,o,m,p,_){const w=v.context,I=w.gl;I.enable(I.SCISSOR_TEST),I.scissor(t*v.pixelRatio,o*v.pixelRatio,m*v.pixelRatio,p*v.pixelRatio),w.clear({color:_}),I.disable(I.SCISSOR_TEST)}function ap(v,t,o){const m=v.context,p=m.gl,_=v.useProgram("debug"),w=Cn.disabled,I=pn.disabled,M=v.colorModeForRenderPass(),z="$debug",O=v.style.map.terrain&&v.style.map.terrain.getTerrainData(o);m.activeTexture.set(p.TEXTURE0);const G=t.getTileByID(o.key).latestRawTileData,U=Math.floor((G&&G.byteLength||0)/1024),Z=t.getTile(o).tileSize,ne=512/Math.min(Z,512)*(o.overscaledZ/v.transform.zoom)*.5;let _e=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(_e+=` => ${o.overscaledZ}`),function(ye,we){ye.initDebugOverlayCanvas();const Ie=ye.debugOverlayCanvas,Ce=ye.context.gl,Re=ye.debugOverlayCanvas.getContext("2d");Re.clearRect(0,0,Ie.width,Ie.height),Re.shadowColor="white",Re.shadowBlur=2,Re.lineWidth=1.5,Re.strokeStyle="white",Re.textBaseline="top",Re.font="bold 36px Open Sans, sans-serif",Re.fillText(we,5,5),Re.strokeText(we,5,5),ye.debugOverlayTexture.update(Ie),ye.debugOverlayTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE)}(v,`${_e} ${U}kB`);const ge=v.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(m,p.TRIANGLES,w,I,Gn.alphaBlended,Sn.disabled,Vm(a.be.transparent,ne),null,ge,z,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),_.draw(m,p.LINE_STRIP,w,I,M,Sn.disabled,Vm(a.be.red),O,ge,z,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Ai(v,t,o,m){const{isRenderingGlobe:p}=m,_=v.context,w=_.gl,I=v.transform,M=v.colorModeForRenderPass(),z=v.getDepthModeFor3D(),O=v.useProgram("terrain");_.bindFramebuffer.set(null),_.viewport.set([0,0,v.width,v.height]);for(const G of o){const U=t.getTerrainMesh(G.tileID),Z=v.renderToTexture.getTexture(G),ne=t.getTerrainData(G.tileID);_.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,Z.texture);const _e=t.getMeshFrameDelta(I.zoom),ge=I.calculateFogMatrix(G.tileID.toUnwrapped()),ye=yv(_e,ge,v.style.sky,I.pitch,p),we=I.getProjectionData({overscaledTileID:G.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(_,w.TRIANGLES,z,pn.disabled,M,Sn.backCCW,ye,ne,we,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}}function Ps(v,t){if(!t.mesh){const o=new a.aK;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const m=new a.aM;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),t.mesh=new is(v.createVertexBuffer(o,rs.members),v.createIndexBuffer(m),a.aL.simpleSegment(0,0,o.length,m.length))}return t.mesh}class Sa{constructor(t,o){this.context=new Fn(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Pt.maxUnderzooming+Pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dc}resize(t,o,m){if(this.width=Math.floor(t*m),this.height=Math.floor(o*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const t=this.context,o=new a.aK;o.emplaceBack(0,0),o.emplaceBack(a.$,0),o.emplaceBack(0,a.$),o.emplaceBack(a.$,a.$),this.tileExtentBuffer=t.createVertexBuffer(o,rs.members),this.tileExtentSegments=a.aL.simpleSegment(0,0,4,2);const m=new a.aK;m.emplaceBack(0,0),m.emplaceBack(a.$,0),m.emplaceBack(0,a.$),m.emplaceBack(a.$,a.$),this.debugBuffer=t.createVertexBuffer(m,rs.members),this.debugSegments=a.aL.simpleSegment(0,0,4,5);const p=new a.c5;p.emplaceBack(0,0,0,0),p.emplaceBack(a.$,0,a.$,0),p.emplaceBack(0,a.$,0,a.$),p.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=t.createVertexBuffer(p,vv.members),this.rasterBoundsSegments=a.aL.simpleSegment(0,0,4,2);const _=new a.aK;_.emplaceBack(0,0),_.emplaceBack(a.$,0),_.emplaceBack(0,a.$),_.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(_,rs.members),this.rasterBoundsSegmentsPosOnly=a.aL.simpleSegment(0,0,4,5);const w=new a.aK;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(w,rs.members),this.viewportSegments=a.aL.simpleSegment(0,0,4,2);const I=new a.c6;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(I);const M=new a.aM;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(M);const z=this.context.gl;this.stencilClearMode=new pn({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new is(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=a.L();a.bX(m,0,this.width,this.height,0,0,1),a.N(m,m,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const p={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(t,o.TRIANGLES,Cn.disabled,this.stencilClearMode,Gn.disabled,Sn.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o,m){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source,this.nextStencilID+o.length>256&&this.clearStencil();const p=this.context;p.setColorMode(Gn.disabled),p.setDepthMode(Cn.disabled);const _={};for(const w of o)_[w.key]=this.nextStencilID++;this._renderTileMasks(_,o,m,!0),this._renderTileMasks(_,o,m,!1),this._tileClippingMaskIDs=_}_renderTileMasks(t,o,m,p){const _=this.context,w=_.gl,I=this.style.projection,M=this.transform,z=this.useProgram("clippingMask");for(const O of o){const G=t[O.key],U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),Z=I.getMeshFromTileID(this.context,O.canonical,p,!0,"stencil"),ne=M.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!m,applyTerrainMatrix:!0});z.draw(_,w.TRIANGLES,Cn.disabled,new pn({func:w.ALWAYS,mask:0},G,255,w.KEEP,w.KEEP,w.REPLACE),Gn.disabled,m?Sn.disabled:Sn.backCCW,null,U,ne,"$clipping",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}_renderTilesDepthBuffer(){const t=this.context,o=t.gl,m=this.style.projection,p=this.transform,_=this.useProgram("depth"),w=this.getDepthModeFor3D(),I=gt(p,{tileSize:p.tileSize});for(const M of I){const z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),O=m.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),G=p.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(t,o.TRIANGLES,w,pn.disabled,Gn.disabled,Sn.backCCW,null,z,G,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new pn({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new pn({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const o=this.context.gl,m=t.sort((w,I)=>I.overscaledZ-w.overscaledZ),p=m[m.length-1].overscaledZ,_=m[0].overscaledZ-p+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const w={};for(let I=0;I<_;I++)w[I+p]=new pn({func:o.GEQUAL,mask:255},I+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=_,[w,m]}return[{[p]:pn.disabled},m]}stencilConfigForOverlapTwoPass(t){const o=this.context.gl,m=t.sort((w,I)=>I.overscaledZ-w.overscaledZ),p=m[m.length-1].overscaledZ,_=m[0].overscaledZ-p+1;if(this.clearStencil(),_>1){const w={},I={};for(let M=0;M<_;M++)w[M+p]=new pn({func:o.GREATER,mask:255},_+1+M,255,o.KEEP,o.KEEP,o.REPLACE),I[M+p]=new pn({func:o.GREATER,mask:255},1+M,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*_+1,[w,I,m]}return this.nextStencilID=3,[{[p]:new pn({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[p]:new pn({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},m]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Gn([t.CONSTANT_COLOR,t.ONE],new a.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}getDepthModeForSublayer(t,o,m){if(!this.opaquePassEnabledForLayer())return Cn.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Cn(m||this.context.gl.LEQUAL,o,[p,p])}getDepthModeFor3D(){return new Cn(this.context.gl.LEQUAL,Cn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){var m,p;this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const _=this.style._order,w=this.style.sourceCaches,I={},M={},z={},O={isRenderingToTexture:!1,isRenderingGlobe:((m=t.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const U in w){const Z=w[U];Z.used&&Z.prepare(this.context),I[U]=Z.getVisibleCoordinates(!1),M[U]=I[U].slice().reverse(),z[U]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let U=0;U<_.length;U++)if(this.style._layers[_[U]].is3D()){this.opaquePassCutoff=U;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const U of _){const Z=this.style._layers[U];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const ne=M[Z.source];(Z.type==="custom"||ne.length)&&this.renderLayer(this,w[Z.source],Z,ne,O)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:U=>this.useProgram(U)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?a.be.black:a.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(U,Z){const ne=U.context,_e=ne.gl,ge=((Oe,Te,qe)=>{const st=Math.cos(Te.rollInRadians),nt=Math.sin(Te.rollInRadians),it=ue(Te),lt=Te.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Oe.properties.get("sky-color"),u_horizon_color:Oe.properties.get("horizon-color"),u_horizon:[(Te.width/2-it*nt)*qe,(Te.height/2+it*st)*qe],u_horizon_normal:[-nt,st],u_sky_horizon_blend:Oe.properties.get("sky-horizon-blend")*Te.height/2*qe,u_sky_blend:lt}})(Z,U.style.map.transform,U.pixelRatio),ye=new Cn(_e.LEQUAL,Cn.ReadWrite,[0,1]),we=pn.disabled,Ie=U.colorModeForRenderPass(),Ce=U.useProgram("sky"),Re=Ps(ne,Z);Ce.draw(ne,_e.TRIANGLES,ye,we,Ie,Sn.disabled,ge,null,void 0,"sky",Re.vertexBuffer,Re.indexBuffer,Re.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const U=this.style._layers[_[this.currentLayer]],Z=w[U.source],ne=I[U.source];this._renderTileClippingMasks(U,ne,!1),this.renderLayer(this,Z,U,ne,O)}this.renderPass="translucent";let G=!1;for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const U=this.style._layers[_[this.currentLayer]],Z=w[U.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(U,O))continue;this.opaquePassEnabledForLayer()||G||(G=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ne=(U.type==="symbol"?z:M)[U.source];this._renderTileClippingMasks(U,I[U.source],!!this.renderToTexture),this.renderLayer(this,Z,U,ne,O)}if(O.isRenderingGlobe&&function(U,Z,ne){const _e=U.context,ge=_e.gl,ye=U.useProgram("atmosphere"),we=new Cn(ge.LEQUAL,Cn.ReadOnly,[0,1]),Ie=U.transform,Ce=function(lt,Ut){const jt=lt.properties.get("position"),Mt=[-jt.x,-jt.y,-jt.z],Jt=a.af(new Float64Array(16));return lt.properties.get("anchor")==="map"&&(a.b5(Jt,Jt,Ut.rollInRadians),a.b6(Jt,Jt,-Ut.pitchInRadians),a.b5(Jt,Jt,Ut.bearingInRadians),a.b6(Jt,Jt,Ut.center.lat*Math.PI/180),a.by(Jt,Jt,-Ut.center.lng*Math.PI/180)),a.c4(Mt,Mt,Jt),Mt}(ne,U.transform),Re=Ie.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Oe=Z.properties.get("atmosphere-blend")*Re.projectionTransition;if(Oe===0)return;const Te=Vo(Ie.worldSize,Ie.center.lat),qe=Ie.inverseProjectionMatrix,st=new Float64Array(4);st[3]=1,a.av(st,st,Ie.modelViewProjectionMatrix),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1,a.av(st,st,qe),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1;const nt=((lt,Ut,jt,Mt,Jt)=>({u_sun_pos:lt,u_atmosphere_blend:Ut,u_globe_position:jt,u_globe_radius:Mt,u_inv_proj_matrix:Jt}))(Ce,Oe,[st[0],st[1],st[2]],Te,qe),it=Ps(_e,Z);ye.draw(_e,ge.TRIANGLES,we,pn.disabled,Gn.alphaBlended,Sn.disabled,nt,null,null,"atmosphere",it.vertexBuffer,it.indexBuffer,it.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const U=function(Z,ne){let _e=null;const ge=Object.values(Z._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(ne)?[Z.sourceCaches[Ce.source]]:[]),ye=ge.filter(Ce=>Ce.getSource().type==="vector"),we=ge.filter(Ce=>Ce.getSource().type!=="vector"),Ie=Ce=>{(!_e||_e.getSource().maxzoom<Ce.getSource().maxzoom)&&(_e=Ce)};return ye.forEach(Ce=>Ie(Ce)),_e||we.forEach(Ce=>Ie(Ce)),_e}(this.style,this.transform.zoom);U&&function(Z,ne,_e){for(let ge=0;ge<_e.length;ge++)ap(Z,ne,_e[ge])}(this,U,U.getVisibleCoordinates())}this.options.showPadding&&function(U){const Z=U.transform.padding;nu(U,U.transform.height-(Z.top||0),3,np),nu(U,Z.bottom||0,3,Mc),Dc(U,Z.left||0,3,Ah),Dc(U,U.transform.width-(Z.right||0),3,ip);const ne=U.transform.centerPoint;(function(_e,ge,ye,we){Rc(_e,ge-1,ye-10,2,20,we),Rc(_e,ge-10,ye-1,20,2,we)})(U,ne.x,U.transform.height-ne.y,rp)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=t?!a.c7(o,m):!a.c8(o,m)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(a.c9(o,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,w){const I=_.context,M=I.gl,z=_.transform,O=Gn.unblended,G=new Cn(M.LEQUAL,Cn.ReadWrite,[0,1]),U=w.sourceCache.getRenderableTiles(),Z=_.useProgram("terrainDepth");I.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),I.clear({color:a.be.transparent,depth:1});for(const ne of U){const _e=w.getTerrainMesh(ne.tileID),ge=w.getTerrainData(ne.tileID),ye=z.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),we={u_ele_delta:w.getMeshFrameDelta(z.zoom)};Z.draw(I,M.TRIANGLES,G,pn.disabled,O,Sn.backCCW,we,ge,ye,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,w){const I=_.context,M=I.gl,z=_.transform,O=Gn.unblended,G=new Cn(M.LEQUAL,Cn.ReadWrite,[0,1]),U=w.getCoordsTexture(),Z=w.sourceCache.getRenderableTiles(),ne=_.useProgram("terrainCoords");I.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),I.clear({color:a.be.transparent,depth:1}),w.coordsIndex=[];for(const _e of Z){const ge=w.getTerrainMesh(_e.tileID),ye=w.getTerrainData(_e.tileID);I.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,U.texture);const we={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(z.zoom)},Ie=z.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ne.draw(I,M.TRIANGLES,G,pn.disabled,O,Sn.backCCW,we,ye,Ie,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),w.coordsIndex.push(_e.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(t,o,m,p,_){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(p||[]).length)&&(this.id=m.id,a.ca(m)?function(w,I,M,z,O,G){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:U}=G,Z=pn.disabled,ne=w.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(_e,ge,ye,we,Ie,Ce,Re,Oe,Te){const qe=ge.transform,st=ge.style.map.terrain,nt=Ie==="map",it=Ce==="map";for(const lt of _e){const Ut=we.getTile(lt),jt=Ut.getBucket(ye);if(!jt||!jt.text||!jt.text.segments.get().length)continue;const Mt=a.am(jt.textSizeData,qe.zoom),Jt=a.aB(Ut,1,ge.transform.zoom),Tn=vn(nt,ge.transform,Jt),Yn=ye.layout.get("icon-text-fit")!=="none"&&jt.hasIconData();if(Mt){const Si=Math.pow(2,qe.zoom-Ut.tileID.overscaledZ),ni=st?(ki,ai)=>st.getElevation(lt,ki,ai):null;Dv(jt,nt,it,Te,qe,Tn,Si,Mt,Yn,a.aC(qe,Ut,Re,Oe),lt.toUnwrapped(),ni)}}}(z,w,M,I,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),O),M.paint.get("icon-opacity").constantOr(1)!==0&&tp(w,I,M,z,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),Z,ne,U),M.paint.get("text-opacity").constantOr(1)!==0&&tp(w,I,M,z,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),Z,ne,U),I.map.showCollisionBoxes&&(Jm(w,I,M,z,!0),Jm(w,I,M,z,!1))}(t,o,m,p,this.style.placement.variableOffsets,_):a.cb(m)?function(w,I,M,z,O){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:G}=O,U=M.paint.get("circle-opacity"),Z=M.paint.get("circle-stroke-width"),ne=M.paint.get("circle-stroke-opacity"),_e=!M.layout.get("circle-sort-key").isConstant();if(U.constantOr(1)===0&&(Z.constantOr(1)===0||ne.constantOr(1)===0))return;const ge=w.context,ye=ge.gl,we=w.transform,Ie=w.getDepthModeForSublayer(0,Cn.ReadOnly),Ce=pn.disabled,Re=w.colorModeForRenderPass(),Oe=[],Te=we.getCircleRadiusCorrection();for(let qe=0;qe<z.length;qe++){const st=z[qe],nt=I.getTile(st),it=nt.getBucket(M);if(!it)continue;const lt=M.paint.get("circle-translate"),Ut=M.paint.get("circle-translate-anchor"),jt=a.aC(we,nt,lt,Ut),Mt=it.programConfigurations.get(M.id),Jt=w.useProgram("circle",Mt),Tn=it.layoutVertexBuffer,Yn=it.indexBuffer,Si=w.style.map.terrain&&w.style.map.terrain.getTerrainData(st),ni={programConfiguration:Mt,program:Jt,layoutVertexBuffer:Tn,indexBuffer:Yn,uniformValues:hh(w,nt,M,jt,Te),terrainData:Si,projectionData:we.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!G,applyTerrainMatrix:!0})};if(_e){const ki=it.segments.get();for(const ai of ki)Oe.push({segments:new a.aL([ai]),sortKey:ai.sortKey,state:ni})}else Oe.push({segments:it.segments,sortKey:0,state:ni})}_e&&Oe.sort((qe,st)=>qe.sortKey-st.sortKey);for(const qe of Oe){const{programConfiguration:st,program:nt,layoutVertexBuffer:it,indexBuffer:lt,uniformValues:Ut,terrainData:jt,projectionData:Mt}=qe.state;nt.draw(ge,ye.TRIANGLES,Ie,Ce,Re,Sn.backCCW,Ut,jt,Mt,M.id,it,lt,qe.segments,M.paint,w.transform.zoom,st)}}(t,o,m,p,_):a.cc(m)?function(w,I,M,z,O){if(M.paint.get("heatmap-opacity")===0)return;const G=w.context,{isRenderingToTexture:U,isRenderingGlobe:Z}=O;if(w.style.map.terrain){for(const ne of z){const _e=I.getTile(ne);I.hasRenderableParent(ne)||(w.renderPass==="offscreen"?Ic(w,_e,M,ne,Z):w.renderPass==="translucent"&&Ac(w,M,ne,U,Z))}G.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(ne,_e,ge,ye){const we=ne.context,Ie=we.gl,Ce=ne.transform,Re=pn.disabled,Oe=new Gn([Ie.ONE,Ie.ONE],a.be.transparent,[!0,!0,!0,!0]);(function(Te,qe,st){const nt=Te.gl;Te.activeTexture.set(nt.TEXTURE1),Te.viewport.set([0,0,qe.width/4,qe.height/4]);let it=st.heatmapFbos.get(a.c1);it?(nt.bindTexture(nt.TEXTURE_2D,it.colorAttachment.get()),Te.bindFramebuffer.set(it.framebuffer)):(it=Ql(Te,qe.width/4,qe.height/4),st.heatmapFbos.set(a.c1,it))})(we,ne,ge),we.clear({color:a.be.transparent});for(let Te=0;Te<ye.length;Te++){const qe=ye[Te];if(_e.hasRenderableParent(qe))continue;const st=_e.getTile(qe),nt=st.getBucket(ge);if(!nt)continue;const it=nt.programConfigurations.get(ge.id),lt=ne.useProgram("heatmap",it),Ut=Ce.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),jt=Ce.getCircleRadiusCorrection();lt.draw(we,Ie.TRIANGLES,Cn.disabled,Re,Oe,Sn.backCCW,Kl(st,Ce.zoom,ge.paint.get("heatmap-intensity"),jt),null,Ut,ge.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,ge.paint,Ce.zoom,it)}we.viewport.set([0,0,ne.width,ne.height])}(w,I,M,z):w.renderPass==="translucent"&&function(ne,_e){const ge=ne.context,ye=ge.gl;ge.setColorMode(ne.colorModeForRenderPass());const we=_e.heatmapFbos.get(a.c1);we&&(ge.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,we.colorAttachment.get()),ge.activeTexture.set(ye.TEXTURE1),Ec(ge,_e).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(ge,ye.TRIANGLES,Cn.disabled,pn.disabled,ne.colorModeForRenderPass(),Sn.disabled,Bm(ne,_e,0,1),null,null,_e.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,_e.paint,ne.transform.zoom))}(w,M)}(t,o,m,p,_):a.cd(m)?function(w,I,M,z,O){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:G}=O,U=M.paint.get("line-opacity"),Z=M.paint.get("line-width");if(U.constantOr(1)===0||Z.constantOr(1)===0)return;const ne=w.getDepthModeForSublayer(0,Cn.ReadOnly),_e=w.colorModeForRenderPass(),ge=M.paint.get("line-dasharray"),ye=M.paint.get("line-pattern"),we=ye.constantOr(1),Ie=M.paint.get("line-gradient"),Ce=M.getCrossfadeParameters(),Re=we?"linePattern":ge?"lineSDF":Ie?"lineGradient":"line",Oe=w.context,Te=Oe.gl,qe=w.transform;let st=!0;for(const nt of z){const it=I.getTile(nt);if(we&&!it.patternsLoaded())continue;const lt=it.getBucket(M);if(!lt)continue;const Ut=lt.programConfigurations.get(M.id),jt=w.context.program.get(),Mt=w.useProgram(Re,Ut),Jt=st||Mt.program!==jt,Tn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(nt),Yn=ye.constantOr(null);if(Yn&&it.imageAtlas){const ii=it.imageAtlas,si=ii.patternPositions[Yn.to.toString()],vr=ii.patternPositions[Yn.from.toString()];si&&vr&&Ut.setConstantPatternPositions(si,vr)}const Si=qe.getProjectionData({overscaledTileID:nt,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),ni=qe.getPixelScale(),ki=we?Fm(w,it,M,ni,Ce):ge?$m(w,it,M,ni,ge,Ce):Ie?fh(w,it,M,ni,lt.lineClipsArray.length):yc(w,it,M,ni);if(we)Oe.activeTexture.set(Te.TEXTURE0),it.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),Ut.updatePaintBuffers(Ce);else if(ge&&(Jt||w.lineAtlas.dirty))Oe.activeTexture.set(Te.TEXTURE0),w.lineAtlas.bind(Oe);else if(Ie){const ii=lt.gradients[M.id];let si=ii.texture;if(M.gradientVersion!==ii.version){let vr=256;if(M.stepInterpolant){const qn=I.getSource().maxzoom,sr=nt.canonical.z===qn?Math.ceil(1<<w.transform.maxZoom-nt.canonical.z):1;vr=a.ag(a.c2(lt.maxLineLength/a.$*1024*sr),256,Oe.maxTextureSize)}ii.gradient=a.c3({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:ii.gradient||void 0,clips:lt.lineClipsArray}),ii.texture?ii.texture.update(ii.gradient):ii.texture=new a.T(Oe,ii.gradient,Te.RGBA),ii.version=M.gradientVersion,si=ii.texture}Oe.activeTexture.set(Te.TEXTURE0),si.bind(M.stepInterpolant?Te.NEAREST:Te.LINEAR,Te.CLAMP_TO_EDGE)}const ai=w.stencilModeForClipping(nt);Mt.draw(Oe,Te.TRIANGLES,ne,ai,_e,Sn.disabled,ki,Tn,Si,M.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,M.paint,w.transform.zoom,Ut,lt.layoutVertexBuffer2),st=!1}}(t,o,m,p,_):a.ce(m)?function(w,I,M,z,O){const G=M.paint.get("fill-color"),U=M.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const{isRenderingToTexture:Z}=O,ne=w.colorModeForRenderPass(),_e=M.paint.get("fill-pattern"),ge=w.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&G.constantOr(a.be.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===ge){const ye=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?Cn.ReadWrite:Cn.ReadOnly);eu(w,I,M,z,ye,ne,!1,Z)}if(w.renderPass==="translucent"&&M.paint.get("fill-antialias")){const ye=w.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Cn.ReadOnly);eu(w,I,M,z,ye,ne,!0,Z)}}(t,o,m,p,_):a.cf(m)?function(w,I,M,z,O){const G=M.paint.get("fill-extrusion-opacity");if(G===0)return;const{isRenderingToTexture:U}=O;if(w.renderPass==="translucent"){const Z=new Cn(w.context.gl.LEQUAL,Cn.ReadWrite,w.depthRangeFor3D);if(G!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Zo(w,I,M,z,Z,pn.disabled,Gn.disabled,U),Zo(w,I,M,z,Z,w.stencilModeFor3D(),w.colorModeForRenderPass(),U);else{const ne=w.colorModeForRenderPass();Zo(w,I,M,z,Z,pn.disabled,ne,U)}}}(t,o,m,p,_):a.cg(m)?function(w,I,M,z,O){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const{isRenderingToTexture:G}=O,U=w.context,Z=w.style.projection.useSubdivision,ne=w.getDepthModeForSublayer(0,Cn.ReadOnly),_e=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(ge,ye,we,Ie,Ce,Re,Oe){const Te=ge.context,qe=Te.gl;for(const st of we){const nt=ye.getTile(st),it=nt.dem;if(!it||!it.data||!nt.needsHillshadePrepare)continue;const lt=it.dim,Ut=it.stride,jt=it.getPixels();if(Te.activeTexture.set(qe.TEXTURE1),Te.pixelStoreUnpackPremultiplyAlpha.set(!1),nt.demTexture=nt.demTexture||ge.getTileTexture(Ut),nt.demTexture){const Jt=nt.demTexture;Jt.update(jt,{premultiply:!1}),Jt.bind(qe.NEAREST,qe.CLAMP_TO_EDGE)}else nt.demTexture=new a.T(Te,jt,qe.RGBA,{premultiply:!1}),nt.demTexture.bind(qe.NEAREST,qe.CLAMP_TO_EDGE);Te.activeTexture.set(qe.TEXTURE0);let Mt=nt.fbo;if(!Mt){const Jt=new a.T(Te,{width:lt,height:lt,data:null},qe.RGBA);Jt.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Mt=nt.fbo=Te.createFramebuffer(lt,lt,!0,!1),Mt.colorAttachment.set(Jt.texture)}Te.bindFramebuffer.set(Mt.framebuffer),Te.viewport.set([0,0,lt,lt]),ge.useProgram("hillshadePrepare").draw(Te,qe.TRIANGLES,Ce,Re,Oe,Sn.disabled,wv(nt.tileID,it),null,null,Ie.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),nt.needsHillshadePrepare=!1}})(w,I,z,M,ne,pn.disabled,_e),U.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(Z){const[ge,ye,we]=w.stencilConfigForOverlapTwoPass(z);Ko(w,I,M,we,ge,ne,_e,!1,G),Ko(w,I,M,we,ye,ne,_e,!0,G)}else{const[ge,ye]=w.getStencilConfigForOverlapAndUpdateStencilID(z);Ko(w,I,M,ye,ge,ne,_e,!1,G)}}(t,o,m,p,_):a.ch(m)?function(w,I,M,z,O){if(w.renderPass!=="translucent"||!z.length)return;const{isRenderingToTexture:G}=O,U=w.style.projection.useSubdivision,Z=w.getDepthModeForSublayer(0,Cn.ReadOnly),ne=w.colorModeForRenderPass();if(U){const[_e,ge,ye]=w.stencilConfigForOverlapTwoPass(z);tu(w,I,M,ye,_e,Z,ne,!1,G),tu(w,I,M,ye,ge,Z,ne,!0,G)}else{const[_e,ge]=w.getStencilConfigForOverlapAndUpdateStencilID(z);tu(w,I,M,ge,_e,Z,ne,!1,G)}}(t,o,m,p,_):a.ci(m)?function(w,I,M,z,O){if(w.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!z.length)return;const{isRenderingToTexture:G}=O,U=I.getSource(),Z=w.style.projection.useSubdivision;if(U instanceof dt)Ts(w,I,M,z,null,!1,!1,U.tileCoords,U.flippedWindingOrder,G);else if(Z){const[ne,_e,ge]=w.stencilConfigForOverlapTwoPass(z);Ts(w,I,M,ge,ne,!1,!0,Ih,!1,G),Ts(w,I,M,ge,_e,!0,!0,Ih,!1,G)}else{const[ne,_e]=w.getStencilConfigForOverlapAndUpdateStencilID(z);Ts(w,I,M,_e,ne,!1,!0,Ih,!1,G)}}(t,o,m,p,_):a.cj(m)?function(w,I,M,z,O){const G=M.paint.get("background-color"),U=M.paint.get("background-opacity");if(U===0)return;const{isRenderingToTexture:Z}=O,ne=w.context,_e=ne.gl,ge=w.style.projection,ye=w.transform,we=ye.tileSize,Ie=M.paint.get("background-pattern");if(w.isPatternMissing(Ie))return;const Ce=!Ie&&G.a===1&&U===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==Ce)return;const Re=pn.disabled,Oe=w.getDepthModeForSublayer(0,Ce==="opaque"?Cn.ReadWrite:Cn.ReadOnly),Te=w.colorModeForRenderPass(),qe=w.useProgram(Ie?"backgroundPattern":"background"),st=z||gt(ye,{tileSize:we,terrain:w.style.map.terrain});Ie&&(ne.activeTexture.set(_e.TEXTURE0),w.imageManager.bind(w.context));const nt=M.getCrossfadeParameters();for(const it of st){const lt=ye.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Ut=Ie?Cv(U,w,Ie,{tileID:it,tileSize:we},nt):bc(U,G),jt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(it),Mt=ge.getMeshFromTileID(ne,it.canonical,!1,!0,"raster");qe.draw(ne,_e.TRIANGLES,Oe,Re,Te,Sn.backCCW,Ut,jt,lt,M.id,Mt.vertexBuffer,Mt.indexBuffer,Mt.segments)}}(t,0,m,p,_):a.ck(m)&&function(w,I,M,z){const{isRenderingGlobe:O}=z,G=w.context,U=M.implementation,Z=w.style.projection,ne=w.transform,_e=ne.getProjectionDataForCustomLayer(O),ge={farZ:ne.farZ,nearZ:ne.nearZ,fov:ne.fov*Math.PI/180,modelViewProjectionMatrix:ne.modelViewProjectionMatrix,projectionMatrix:ne.projectionMatrix,shaderData:{variantName:Z.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Z.shaderPreludeCode.vertexSource}`,define:Z.shaderDefine},defaultProjectionData:_e},ye=U.renderingMode?U.renderingMode:"2d";if(w.renderPass==="offscreen"){const we=U.prerender;we&&(w.setCustomLayerDefaults(),G.setColorMode(w.colorModeForRenderPass()),we.call(U,G.gl,ge),G.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),G.setColorMode(w.colorModeForRenderPass()),G.setStencilMode(pn.disabled);const we=ye==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,Cn.ReadOnly);G.setDepthMode(we),U.render(G.gl,ge),G.setDirty(),w.setBaseState(),G.bindFramebuffer.set(null)}}(t,0,m,_))}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),m=this.imageManager.getPattern(t.to.toString());return!o||!m}useProgram(t,o,m=!1,p=[]){this.cache=this.cache||{};const _=!!this.style.map.terrain,w=this.style.projection,I=m?Ga.projectionMercator:w.shaderPreludeCode,M=m?Qs:w.shaderDefine,z=t+(o?o.cacheKey:"")+`/${m?rh:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(_?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[z]||(this.cache[z]=new gc(this.context,Ga[t],o,Um[t],this._showOverdrawInspector,_,I,M,p)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:o}=this.context.gl;return this.width!==t||this.height!==o}}function Lc(v,t){let o,m=!1,p=null,_=null;const w=()=>{p=null,m&&(v.apply(_,o),p=setTimeout(w,t),m=!1)};return(...I)=>(m=!0,_=this,o=I,p||w(),p)}class iu{constructor(t){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let m;return o.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(m=p)}),(m&&m[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:m,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const m=o.join("/");let p=m;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${m}`);let _=window.location.hash.replace(p,"");_.startsWith("#&")?_=_.slice(0,1)+_.slice(2):_==="#"&&(_="");let w=window.location.href.replace(/(#.+)?$/,_);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Lc(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const o=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,p=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,p),w=Math.round(o.lng*_)/_,I=Math.round(o.lat*_)/_,M=this._map.getBearing(),z=this._map.getPitch();let O="";if(O+=t?`/${w}/${I}/${m}`:`${m}/${I}/${w}`,(M||z)&&(O+="/"+Math.round(10*M)/10),z&&(O+=`/${Math.round(z)}`),this._hashName){const G=this._hashName;let U=!1;const Z=window.location.hash.slice(1).split("&").map(ne=>{const _e=ne.split("=")[0];return _e===G?(U=!0,`${_e}=${O}`):ne}).filter(ne=>ne);return U||Z.push(`${G}=${O}`),`#${Z.join("&")}`}return`#${O}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new a.S(+t[2],+t[1])}catch{return!1}const o=+t[0],m=+(t[3]||0),p=+(t[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&m>=-180&&m<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const Yo={linearity:.3,easing:a.cl(0,0,.3,1)},Xo=a.e({deceleration:2500,maxSpeed:1400},Yo),Eh=a.e({deceleration:20,maxSpeed:1400},Yo),ru=a.e({deceleration:1e3,maxSpeed:360},Yo),Mh=a.e({deceleration:1e3,maxSpeed:90},Yo),sp=a.e({deceleration:1e3,maxSpeed:360},Yo);class op{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=A.now();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)o.zoom+=_.zoomDelta||0,o.bearing+=_.bearingDelta||0,o.pitch+=_.pitchDelta||0,o.roll+=_.rollDelta||0,_.panDelta&&o.pan._add(_.panDelta),_.around&&(o.around=_.around),_.pinchAround&&(o.pinchAround=_.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(o.pan.mag()){const _=Qo(o.pan.mag(),m,a.e({},Xo,t||{})),w=o.pan.mult(_.amount/o.pan.mag()),I=this._map.cameraHelper.handlePanInertia(w,this._map.transform);p.center=I.easingCenter,p.offset=I.easingOffset,Jo(p,_)}if(o.zoom){const _=Qo(o.zoom,m,Eh);p.zoom=this._map.transform.zoom+_.amount,Jo(p,_)}if(o.bearing){const _=Qo(o.bearing,m,ru);p.bearing=this._map.transform.bearing+a.ag(_.amount,-179,179),Jo(p,_)}if(o.pitch){const _=Qo(o.pitch,m,Mh);p.pitch=this._map.transform.pitch+_.amount,Jo(p,_)}if(o.roll){const _=Qo(o.roll,m,sp);p.roll=this._map.transform.roll+a.ag(_.amount,-179,179),Jo(p,_)}if(p.zoom||p.bearing){const _=o.pinchAround===void 0?o.around:o.pinchAround;p.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),a.e(p,{noMoveStart:!0})}}function Jo(v,t){(!v.duration||v.duration<t.duration)&&(v.duration=t.duration,v.easing=t.easing)}function Qo(v,t,o){const{maxSpeed:m,linearity:p,deceleration:_}=o,w=a.ag(v*p/(t/1e3),-m,m),I=Math.abs(w)/(_*p);return{easing:o.easing,duration:1e3*I,amount:w*(I/2)}}class Yr extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m,p={}){m=m instanceof MouseEvent?m:new MouseEvent(t,m);const _=P.mousePos(o.getCanvas(),m),w=o.unproject(_);super(t,a.e({point:_,lngLat:w,originalEvent:m},p)),this._defaultPrevented=!1,this.target=o}}class Aa extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){const p=t==="touchend"?m.changedTouches:m.touches,_=P.touchPos(o.getCanvasContainer(),p),w=_.map(M=>o.unproject(M)),I=_.reduce((M,z,O,G)=>M.add(z.div(G.length)),new a.P(0,0));super(t,{points:_,point:I,lngLats:w,lngLat:o.unproject(I),originalEvent:m}),this._defaultPrevented=!1}}class Dh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){super(t,{originalEvent:m}),this._defaultPrevented=!1}}class lp{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Dh(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Yr(t.type,this._map,t))}mouseup(t){this._map.fire(new Yr(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Yr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Yr(t.type,this._map,t))}mouseover(t){this._map.fire(new Yr(t.type,this._map,t))}mouseout(t){this._map.fire(new Yr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Aa(t.type,this._map,t))}touchmove(t){this._map.fire(new Aa(t.type,this._map,t))}touchend(t){this._map.fire(new Aa(t.type,this._map,t))}touchcancel(t){this._map.fire(new Aa(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class up{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Yr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Yr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class el{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(a.P.convert(t),this._map.terrain)}}class Rh{constructor(t,o){this._map=t,this._tr=new el(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(P.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const m=o;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=m,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const _=Math.min(p.x,m.x),w=Math.max(p.x,m.x),I=Math.min(p.y,m.y),M=Math.max(p.y,m.y);P.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=w-_+"px",this._box.style.height=M-I+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const m=this._startPos,p=o;if(this.reset(),P.suppressClick(),m.x!==p.x||m.y!==p.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:t})),{cameraAnimation:_=>_.fitScreenCoordinates(m,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new a.l(t,{originalEvent:o}))}}function zc(v,t){if(v.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${t.length}`);const o={};for(let m=0;m<v.length;m++)o[v[m].identifier]=t[m];return o}class cp{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),m.length===this.numTouches&&(this.centroid=function(p){const _=new a.P(0,0);for(const w of p)_._add(w);return _.div(p.length)}(o),this.touches=zc(m,o)))}touchmove(t,o,m){if(this.aborted||!this.centroid)return;const p=zc(m,o);for(const _ in this.touches){const w=p[_];(!w||w.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(t,o,m){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Vc{constructor(t){this.singleTap=new cp(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,m){this.singleTap.touchstart(t,o,m)}touchmove(t,o,m){this.singleTap.touchmove(t,o,m)}touchend(t,o,m){const p=this.singleTap.touchend(t,o,m);if(p){const _=t.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(p)<30;if(_&&w||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Bc{constructor(t){this._tr=new el(t),this._zoomIn=new Vc({numTouches:1,numTaps:2}),this._zoomOut=new Vc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,m){this._zoomIn.touchstart(t,o,m),this._zoomOut.touchstart(t,o,m)}touchmove(t,o,m){this._zoomIn.touchmove(t,o,m),this._zoomOut.touchmove(t,o,m)}touchend(t,o,m){const p=this._zoomIn.touchend(t,o,m),_=this._zoomOut.touchend(t,o,m),w=this._tr;return p?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(p)},{originalEvent:t})}):_?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(_)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tl{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const o=this._moveFunction(...t);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(t,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,o){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const p=Array.isArray(o)?o[0]:o;return!this._moved&&p.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(m,p))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&P.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ka=0,Ea=2,dp={[ka]:1,[Ea]:2};class jr{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const o=P.mouseButton(t);this._eventButton=o}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(o,m){const p=dp[m];return o.buttons===void 0||(o.buttons&p)!==p}(t,this._eventButton)}isValidEndEvent(t){return P.mouseButton(t)===this._eventButton}}class nl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class Lv{constructor(t=new jr({checkCorrectEvent:()=>!0}),o=new nl){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(t,o,m){return t instanceof MouseEvent?o(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?m(t):void 0}startMove(t){this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(t){this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(t){return this._executeRelevantHandler(t,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}const Oc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=t=>{t.preventDefault()}};class zv{constructor(t,o){this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,o,m){return this._calculateTransform(t,o,m)}touchmove(t,o,m){if(this._active){if(!this._shouldBePrevented(m.length))return t.preventDefault(),this._calculateTransform(t,o,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,o,m){this._calculateTransform(t,o,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,m){m.length>0&&(this._active=!0);const p=zc(m,o),_=new a.P(0,0),w=new a.P(0,0);let I=0;for(const z in p){const O=p[z],G=this._touches[z];G&&(_._add(O),w._add(O.sub(G)),I++,p[z]=O)}if(this._touches=p,this._shouldBePrevented(I)||!w.mag())return;const M=w.div(I);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,o,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,m){if(!this._firstTwoTouches)return;t.preventDefault();const[p,_]=this._firstTwoTouches,w=au(m,o,p),I=au(m,o,_);if(!w||!I)return;const M=this._aroundCenter?null:w.add(I).div(2);return this._move([w,I],M,t)}touchend(t,o,m){if(!this._firstTwoTouches)return;const[p,_]=this._firstTwoTouches,w=au(m,o,p),I=au(m,o,_);w&&I||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function au(v,t,o){for(let m=0;m<v.length;m++)if(v[m].identifier===o)return t[m]}function il(v,t){return Math.log(v/t)/Math.LN2}class Wa extends Lh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const m=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(il(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:il(this._distance,m),pinchAround:o}}}function Yt(v,t){return 180*v.angleWith(t)/Math.PI}class zh extends Lh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o,m){const p=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Yt(this._vector,p),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,m=Yt(t,this._startVector);return Math.abs(m)<o}}function su(v){return Math.abs(v.y)>Math.abs(v.x)}class Vh extends Lh{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,m){super.touchstart(t,o,m),this._currentTouchCount=m.length}_start(t){this._lastPoints=t,su(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=t[0].sub(this._lastPoints[0]),_=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,_,m.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(p.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,m){if(this._valid!==void 0)return this._valid;const p=t.mag()>=2,_=o.mag()>=2;if(!p&&!_)return;if(!p||!_)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const w=t.y>0==o.y>0;return su(t)&&su(o)&&w}}const ou={panStep:100,bearingStep:15,pitchStep:10};class rl{constructor(t){this._tr=new el(t);const o=ou;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,m=0,p=0,_=0,w=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?m=-1:(t.preventDefault(),_=-1);break;case 39:t.shiftKey?m=1:(t.preventDefault(),_=1);break;case 38:t.shiftKey?p=1:(t.preventDefault(),w=-1);break;case 40:t.shiftKey?p=-1:(t.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(m=0,p=0),{cameraAnimation:I=>{const M=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Bh,zoom:o?Math.round(M.zoom)+o*(t.shiftKey?2:1):M.zoom,bearing:M.bearing+m*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-_*this._panStep,-w*this._panStep],center:M.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bh(v){return v*(2-v)}const $n=4.000244140625,Oh=1/450;class hp{constructor(t,o){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=t,this._tr=new el(t),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Oh}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const m=A.now(),p=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,o!==0&&o%$n==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(p*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=P.mousePos(this._map.getCanvas(),t),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(a.S.convert(m.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>$n?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&M!==0&&(M=1/M);const z=typeof this._targetZoom!="number"?t.scale:a.ae(this._targetZoom);this._targetZoom=t.getConstrained(t.getCameraLngLat(),a.aj(z*M)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,m=this._startZoom,p=this._easing;let _,w=!1;if(this._type==="wheel"&&m&&p){const I=A.now()-this._lastWheelEventTime,M=Math.min((I+5)/200,1),z=p(M);_=a.C.number(m,o,z),M<1?this._frameId||(this._frameId=!0):w=!0}else _=o,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=_,{noInertia:!0,needsRenderFrame:!w,zoomDelta:_-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=a.cn;if(this._prevEase){const m=this._prevEase,p=(A.now()-m.start)/m.duration,_=m.easing(p+.01)-m.easing(p),w=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-w*w);o=a.cl(w,I,.25,1)}return this._prevEase={start:A.now(),duration:t,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Fc{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vv{constructor(t){this._tr=new el(t),this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bv{constructor(){this._tap=new Vc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,o,m){if(!this._swipePoint)if(this._tapTime){const p=o[0],_=t.timeStamp-this._tapTime<500,w=this._tapPoint.dist(p)<30;_&&w?m.length>0&&(this._swipePoint=p,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(t,o,m)}touchmove(t,o,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const p=o[0],_=p.y-this._swipePoint.y;return this._swipePoint=p,t.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(t,o,m)}touchend(t,o,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const p=this._tap.touchend(t,o,m);p&&(this._tapTime=t.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fh{constructor(t,o,m){this._el=t,this._mousePan=o,this._touchPan=m}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $c{constructor(t,o,m,p){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=o,this._mousePitch=m,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class $h{constructor(t,o,m,p){this._el=t,this._touchZoom=o,this._touchRotate=m,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class fp{constructor(t,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",t);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=o,this._container.appendChild(p);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=m,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,o){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:t,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const lu=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class Ov extends a.l{}function jh(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class Is{constructor(t,o){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,_)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=p.type==="renderFrame"?void 0:p,I={needsRenderFrame:!1},M={},z={};for(const{handlerName:U,handler:Z,allowed:ne}of this._handlers){if(!Z.isEnabled())continue;let _e;if(this._blockedByActive(z,ne,U))Z.reset();else if(Z[_||p.type]){if(a.co(p,_||p.type)){const ge=P.mousePos(this._map.getCanvas(),p);_e=Z[_||p.type](p,ge)}else if(a.cp(p,_||p.type)){const ge=this._getMapTouches(p.touches),ye=P.touchPos(this._map.getCanvas(),ge);_e=Z[_||p.type](p,ye,ge)}else a.cq(_||p.type)||(_e=Z[_||p.type](p));this.mergeHandlerResult(I,M,_e,U,w),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()}(_e||Z.isActive())&&(z[U]=Z)}const O={};for(const U in this._previousActiveHandlers)z[U]||(O[U]=w);this._previousActiveHandlers=z,(Object.keys(O).length||jh(I))&&(this._changes.push([I,M,O]),this._triggerRenderFrame()),(Object.keys(z).length||jh(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=I;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new op(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,_,w]of this._listeners)P.addEventListener(p,_,p===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[t,o,m]of this._listeners)P.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(t){const o=this._map,m=o.getCanvasContainer();this._add("mapEvent",new lp(o,t));const p=o.boxZoom=new Rh(o,t);this._add("boxZoom",p),t.interactive&&t.boxZoom&&p.enable();const _=o.cooperativeGestures=new fp(o,t.cooperativeGestures);this._add("cooperativeGestures",_),t.cooperativeGestures&&_.enable();const w=new Bc(o),I=new Vv(o);o.doubleClickZoom=new Fc(I,w),this._add("tapZoom",w),this._add("clickZoom",I),t.interactive&&t.doubleClickZoom&&o.doubleClickZoom.enable();const M=new Bv;this._add("tapDragZoom",M);const z=o.touchPitch=new Vh(o);this._add("touchPitch",z),t.interactive&&t.touchPitch&&o.touchPitch.enable(t.touchPitch);const O=()=>o.project(o.getCenter()),G=function({enable:Ce,clickTolerance:Re,aroundCenter:Oe=!0,minPixelCenterThreshold:Te=100,rotateDegreesPerPixelMoved:qe=.8},st){const nt=new jr({checkCorrectEvent:it=>P.mouseButton(it)===0&&it.ctrlKey||P.mouseButton(it)===2&&!it.ctrlKey});return new tl({clickTolerance:Re,move:(it,lt)=>{const Ut=st();if(Oe&&Math.abs(Ut.y-it.y)>Te)return{bearingDelta:a.cm(new a.P(it.x,lt.y),lt,Ut)};let jt=(lt.x-it.x)*qe;return Oe&&lt.y<Ut.y&&(jt=-jt),{bearingDelta:jt}},moveStateManager:nt,enable:Ce,assignEvents:Oc})}(t,O),U=function({enable:Ce,clickTolerance:Re,pitchDegreesPerPixelMoved:Oe=-.5}){const Te=new jr({checkCorrectEvent:qe=>P.mouseButton(qe)===0&&qe.ctrlKey||P.mouseButton(qe)===2});return new tl({clickTolerance:Re,move:(qe,st)=>({pitchDelta:(st.y-qe.y)*Oe}),moveStateManager:Te,enable:Ce,assignEvents:Oc})}(t),Z=function({enable:Ce,clickTolerance:Re,rollDegreesPerPixelMoved:Oe=.3},Te){const qe=new jr({checkCorrectEvent:st=>P.mouseButton(st)===2&&st.ctrlKey});return new tl({clickTolerance:Re,move:(st,nt)=>{const it=Te();let lt=(nt.x-st.x)*Oe;return nt.y<it.y&&(lt=-lt),{rollDelta:lt}},moveStateManager:qe,enable:Ce,assignEvents:Oc})}(t,O);o.dragRotate=new $c(t,G,U,Z),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",U,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Z,["mousePitch"]),t.interactive&&t.dragRotate&&o.dragRotate.enable();const ne=function({enable:Ce,clickTolerance:Re}){const Oe=new jr({checkCorrectEvent:Te=>P.mouseButton(Te)===0&&!Te.ctrlKey});return new tl({clickTolerance:Re,move:(Te,qe)=>({around:qe,panDelta:qe.sub(Te)}),activateOnStart:!0,moveStateManager:Oe,enable:Ce,assignEvents:Oc})}(t),_e=new zv(t,o);o.dragPan=new Fh(m,ne,_e),this._add("mousePan",ne),this._add("touchPan",_e,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&o.dragPan.enable(t.dragPan);const ge=new zh,ye=new Wa;o.touchZoomRotate=new $h(m,ye,ge,M),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&o.touchZoomRotate.enable(t.touchZoomRotate);const we=o.scrollZoom=new hp(o,()=>this._triggerRenderFrame());this._add("scrollZoom",we,["mousePan"]),t.interactive&&t.scrollZoom&&o.scrollZoom.enable(t.scrollZoom);const Ie=o.keyboard=new rl(o);this._add("keyboard",Ie),t.interactive&&t.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new up(o))}_add(t,o,m){this._handlers.push({handlerName:t,handler:o,allowed:m}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!lu(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,m){for(const p in t)if(p!==m&&(!o||o.indexOf(p)<0))return!0;return!1}_getMapTouches(t){const o=[];for(const m of t)this._el.contains(m.target)&&o.push(m);return o}mergeHandlerResult(t,o,m,p,_){if(!m)return;a.e(t,m);const w={handlerName:p,originalEvent:m.originalEvent||_};m.zoomDelta!==void 0&&(o.zoom=w),m.panDelta!==void 0&&(o.drag=w),m.rollDelta!==void 0&&(o.roll=w),m.pitchDelta!==void 0&&(o.pitch=w),m.bearingDelta!==void 0&&(o.rotate=w)}_applyChanges(){const t={},o={},m={};for(const[p,_,w]of this._changes)p.panDelta&&(t.panDelta=(t.panDelta||new a.P(0,0))._add(p.panDelta)),p.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(t.rollDelta=(t.rollDelta||0)+p.rollDelta),p.around!==void 0&&(t.around=p.around),p.pinchAround!==void 0&&(t.pinchAround=p.pinchAround),p.noInertia&&(t.noInertia=p.noInertia),a.e(o,_),a.e(m,w);this._updateMapTransform(t,o,m),this._changes=[]}_updateMapTransform(t,o,m){const p=this._map,_=p._getTransformForUpdate(),w=p.terrain;if(!(jh(t)||w&&this._terrainMovement))return this._fireEvents(o,m,!0);p._stop(!0);let{panDelta:I,zoomDelta:M,bearingDelta:z,pitchDelta:O,rollDelta:G,around:U,pinchAround:Z}=t;Z!==void 0&&(U=Z),U=U||p.transform.centerPoint,w&&!_.isPointOnMapSurface(U)&&(U=_.centerPoint);const ne={panDelta:I,zoomDelta:M,rollDelta:G,pitchDelta:O,bearingDelta:z,around:U};this._map.cameraHelper.useGlobeControls&&!_.isPointOnMapSurface(U)&&(U=_.centerPoint);const _e=U.distSqr(_.centerPoint)<.01?_.center:_.screenPointToLocation(I?U.sub(I):U);w?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,_),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?_.setCenter(_.screenPointToLocation(_.centerPoint.sub(I))):this._map.cameraHelper.handleMapControlsPan(ne,_,_e):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ne,_,_e))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,_),this._map.cameraHelper.handleMapControlsPan(ne,_,_e)),p._applyUpdatedTransform(_),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,m,!0)}_fireEvents(t,o,m){const p=lu(this._eventsInProgress),_=lu(t),w={};for(const G in t){const{originalEvent:U}=t[G];this._eventsInProgress[G]||(w[`${G}start`]=U),this._eventsInProgress[G]=t[G]}!p&&_&&this._fireEvent("movestart",_.originalEvent);for(const G in w)this._fireEvent(G,w[G]);_&&this._fireEvent("move",_.originalEvent);for(const G in t){const{originalEvent:U}=t[G];this._fireEvent(G,U)}const I={};let M;for(const G in this._eventsInProgress){const{handlerName:U,originalEvent:Z}=this._eventsInProgress[G];this._handlersById[U].isActive()||(delete this._eventsInProgress[G],M=o[U]||Z,I[`${G}end`]=M)}for(const G in I)this._fireEvent(G,I[G]);const z=lu(this._eventsInProgress),O=(p||_)&&!z;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const G=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&G.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(G)}if(m&&O){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!G||!G.essential&&A.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:M})),U(this._map.getBearing())&&this._map.resetNorth()):(U(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new a.l(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Ov("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class mi extends a.E{constructor(t,o,m){super(),this._renderFrameCallback=()=>{const p=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=m.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(t,o){t.apply(this.transform),this.transform=t,this.cameraHelper=o}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,o){return this.jumpTo({elevation:t},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,o,m){return t=a.P.convert(t).mult(-1),this.panTo(this.transform.center,a.e({offset:t},o),m)}panTo(t,o,m){return this.easeTo(a.e({center:t},o),m)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,m){return this.easeTo(a.e({zoom:t},o),m)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,o){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)).fire(new a.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,m){return this.easeTo(a.e({bearing:t},o),m)}resetNorth(t,o){return this.rotateTo(0,a.e({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}getRoll(){return this.transform.roll}setRoll(t,o){return this.jumpTo({roll:t},o),this}cameraForBounds(t,o){t=de.convert(t).adjustAntiMeridian();const m=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),m,o)}_cameraForBoxAndBearing(t,o,m,p){const _={top:0,bottom:0,right:0,left:0};if(typeof(p=a.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const z=p.padding;p.padding={top:z,bottom:z,right:z,left:z}}const w=a.e(_,p.padding);p.padding=w;const I=this.transform,M=new de(t,o);return this.cameraHelper.cameraForBoxAndBearing(p,w,M,m,I)}fitBounds(t,o,m){return this._fitInternal(this.cameraForBounds(t,o),o,m)}fitScreenCoordinates(t,o,m,p,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(t)),this.transform.screenPointToLocation(a.P.convert(o)),m,p),p,_)}_fitInternal(t,o,m){return t?(delete(o=a.e(t,o)).padding,o.linear?this.easeTo(o,m):this.flyTo(o,m)):this}jumpTo(t,o){this.stop();const m=this._getTransformForUpdate();let p=!1,_=!1,w=!1;const I=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,t);const M=m.zoom!==I;return"elevation"in t&&m.elevation!==+t.elevation&&m.setElevation(+t.elevation),"bearing"in t&&m.bearing!==+t.bearing&&(p=!0,m.setBearing(+t.bearing)),"pitch"in t&&m.pitch!==+t.pitch&&(_=!0,m.setPitch(+t.pitch)),"roll"in t&&m.roll!==+t.roll&&(w=!0,m.setRoll(+t.roll)),t.padding==null||m.isPaddingEqual(t.padding)||m.setPadding(t.padding),this._applyUpdatedTransform(m),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)),M&&this.fire(new a.l("zoomstart",o)).fire(new a.l("zoom",o)).fire(new a.l("zoomend",o)),p&&this.fire(new a.l("rotatestart",o)).fire(new a.l("rotate",o)).fire(new a.l("rotateend",o)),_&&this.fire(new a.l("pitchstart",o)).fire(new a.l("pitch",o)).fire(new a.l("pitchend",o)),w&&this.fire(new a.l("rollstart",o)).fire(new a.l("roll",o)).fire(new a.l("rollend",o)),this.fire(new a.l("moveend",o))}calculateCameraOptionsFromTo(t,o,m,p=0){const _=a.a0.fromLngLat(t,o),w=a.a0.fromLngLat(m,p),I=w.x-_.x,M=w.y-_.y,z=w.z-_.z,O=Math.hypot(I,M,z);if(O===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(I,M),U=a.aj(this.transform.cameraToCenterDistance/O/this.transform.tileSize),Z=180*Math.atan2(I,-M)/Math.PI;let ne=180*Math.acos(G/O)/Math.PI;return ne=z<0?90-ne:90+ne,{center:w.toLngLat(),elevation:p,zoom:U,pitch:ne,bearing:Z}}calculateCameraOptionsFromCameraLngLatAltRotation(t,o,m,p,_){const w=this.transform.calculateCenterFromCameraLngLatAlt(t,o,m,p);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:m,pitch:p,roll:_}}easeTo(t,o){this._stop(!1,t.easeId),((t=a.e({offset:[0,0],duration:500,easing:a.cn},t)).animate===!1||!t.essential&&A.prefersReducedMotion)&&(t.duration=0);const m=this._getTransformForUpdate(),p=this.getBearing(),_=m.pitch,w=m.roll,I="bearing"in t?this._normalizeBearing(t.bearing,p):p,M="pitch"in t?+t.pitch:_,z="roll"in t?this._normalizeBearing(t.roll,w):w,O="padding"in t?t.padding:m.padding,G=a.P.convert(t.offset);let U,Z;t.around&&(U=a.S.convert(t.around),Z=m.locationToScreenPoint(U));const ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},_e=this.cameraHelper.handleEaseTo(m,{bearing:I,pitch:M,roll:z,padding:O,around:U,aroundPoint:Z,offsetAsPoint:G,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||p!==I,this._pitching=this._pitching||M!==_,this._rolling=this._rolling||z!==w,this._padding=!m.isPaddingEqual(O),this._zooming=this._zooming||_e.isZooming,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,ne),this.terrain&&this._prepareElevation(_e.elevationCenter),this._ease(ge=>{_e.easeFunc(ge),this.terrain&&!t.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(m),this._fireMoveEvents(o)},ge=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o,ge)},t),this}_prepareEase(t,o,m={}){this._moving=!0,o||m.moving||this.fire(new a.l("movestart",t)),this._zooming&&!m.zooming&&this.fire(new a.l("zoomstart",t)),this._rotating&&!m.rotating&&this.fire(new a.l("rotatestart",t)),this._pitching&&!m.pitching&&this.fire(new a.l("pitchstart",t)),this._rolling&&!m.rolling&&this.fire(new a.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&o!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(m-(o-(m*t+this._elevationStart))/(1-t)),this._elevationTarget=o}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const o=t.getCameraLngLat(),m=t.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(o,t.zoom):0;if(m<p){const _=this.calculateCameraOptionsFromTo(o,p,t.center,t.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(t){const o=[];if(o.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&o.push(p=>this.transformCameraUpdate(p)),!o.length)return;const m=t.clone();for(const p of o){const _=m.clone(),{center:w,zoom:I,roll:M,pitch:z,bearing:O,elevation:G}=p(_);w&&_.setCenter(w),G!==void 0&&_.setElevation(G),I!==void 0&&_.setZoom(I),M!==void 0&&_.setRoll(M),z!==void 0&&_.setPitch(z),O!==void 0&&_.setBearing(O),m.apply(_)}this.transform.apply(m)}_fireMoveEvents(t){this.fire(new a.l("move",t)),this._zooming&&this.fire(new a.l("zoom",t)),this._rotating&&this.fire(new a.l("rotate",t)),this._pitching&&this.fire(new a.l("pitch",t)),this._rolling&&this.fire(new a.l("roll",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const m=this._zooming,p=this._rotating,_=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new a.l("zoomend",t)),p&&this.fire(new a.l("rotateend",t)),_&&this.fire(new a.l("pitchend",t)),w&&this.fire(new a.l("rollend",t)),this.fire(new a.l("moveend",t))}flyTo(t,o){if(!t.essential&&A.prefersReducedMotion){const lt=a.Q(t,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(lt,o)}this.stop(),t=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cn},t);const m=this._getTransformForUpdate(),p=m.bearing,_=m.pitch,w=m.roll,I=m.padding,M="bearing"in t?this._normalizeBearing(t.bearing,p):p,z="pitch"in t?+t.pitch:_,O="roll"in t?this._normalizeBearing(t.roll,w):w,G="padding"in t?t.padding:m.padding,U=a.P.convert(t.offset);let Z=m.centerPoint.add(U);const ne=m.screenPointToLocation(Z),_e=this.cameraHelper.handleFlyTo(m,{bearing:M,pitch:z,roll:O,padding:G,locationAtOffset:ne,offsetAsPoint:U,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let ge=t.curve;const ye=Math.max(m.width,m.height),we=ye/_e.scaleOfZoom,Ie=_e.pixelPathLength;typeof _e.scaleOfMinZoom=="number"&&(ge=Math.sqrt(ye/_e.scaleOfMinZoom/Ie*2));const Ce=ge*ge;function Re(lt){const Ut=(we*we-ye*ye+(lt?-1:1)*Ce*Ce*Ie*Ie)/(2*(lt?we:ye)*Ce*Ie);return Math.log(Math.sqrt(Ut*Ut+1)-Ut)}function Oe(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function Te(lt){return(Math.exp(lt)+Math.exp(-lt))/2}const qe=Re(!1);let st=function(lt){return Te(qe)/Te(qe+ge*lt)},nt=function(lt){return ye*((Te(qe)*(Oe(Ut=qe+ge*lt)/Te(Ut))-Oe(qe))/Ce)/Ie;var Ut},it=(Re(!0)-qe)/ge;if(Math.abs(Ie)<2e-6||!isFinite(it)){if(Math.abs(ye-we)<1e-6)return this.easeTo(t,o);const lt=we<ye?-1:1;it=Math.abs(Math.log(we/ye))/ge,nt=()=>0,st=Ut=>Math.exp(lt*ge*Ut)}return t.duration="duration"in t?+t.duration:1e3*it/("screenSpeed"in t?+t.screenSpeed/ge:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=p!==M,this._pitching=z!==_,this._rolling=O!==w,this._padding=!m.isPaddingEqual(G),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(_e.targetCenter),this._ease(lt=>{const Ut=lt*it,jt=1/st(Ut),Mt=nt(Ut);this._rotating&&m.setBearing(a.C.number(p,M,lt)),this._pitching&&m.setPitch(a.C.number(_,z,lt)),this._rolling&&m.setRoll(a.C.number(w,O,lt)),this._padding&&(m.interpolatePadding(I,G,lt),Z=m.centerPoint.add(U)),_e.easeFunc(lt,jt,Mt,Z),this.terrain&&!t.freezeElevation&&this._updateElevation(lt),this._applyUpdatedTransform(m),this._fireMoveEvents(o)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,o)}return t||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(t,o,m){m.animate===!1||m.duration===0?(t(1),o()):(this._easeStart=A.now(),this._easeOptions=m,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,o){t=a.aN(t,-180,180);const m=Math.abs(t-o);return Math.abs(t-360-o)<m&&(t-=360),Math.abs(t+360-o)<m&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(t),this.transform.tileZoom):null}}const uu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class jc{constructor(t=uu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const m=this._map._getUIString(`AttributionControl.${o}`);t.title=m,t.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const o=this._map.style.sourceCaches;for(const p in o){const _=o[p];if(_.used||_.usedForTerrain){const w=_.getSource();w.attribution&&t.indexOf(w.attribution)<0&&t.push(w.attribution)}}t=t.filter(p=>String(p).trim()),t.sort((p,_)=>p.length-_.length),t=t.filter((p,_)=>{for(let w=_+1;w<t.length;w++)if(t[w].indexOf(p)>=0)return!1;return!0});const m=t.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,t.length?(this._innerContainer.innerHTML=P.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Nh{constructor(t={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const m=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const o=P.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class mp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,m=o?this._queue.concat(o):this._queue;for(const p of m)if(p.id===t)return void(p.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const m of o)if(!m.cancelled&&(m.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var pp=a.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Fv extends a.E{constructor(t){super(),this._lastTilesetChange=A.now(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,o){this.sourceCache.update(t,o),this._renderableTilesKeys=[];const m={};for(const p of gt(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))m[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),a.bX(p.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[p.key]=new Vn(p,this.tileSize),this._lastTilesetChange=A.now());for(const p in this._tiles)m[p]||delete this._tiles[p]}freeRtt(t){for(const o in this._tiles){const m=this._tiles[o];(!t||m.tileID.equals(t)||m.tileID.isChildOf(t)||t.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,o){return o?this._getTerrainCoordsForTileRanges(t,o):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const o={};for(const m of this._renderableTilesKeys){const p=this._tiles[m].tileID,_=t.clone(),w=a.b9();if(p.canonical.equals(t.canonical))a.bX(w,0,a.$,a.$,0,0,1);else if(p.canonical.isChildOf(t.canonical)){const I=p.canonical.z-t.canonical.z,M=p.canonical.x-(p.canonical.x>>I<<I),z=p.canonical.y-(p.canonical.y>>I<<I),O=a.$>>I;a.bX(w,0,O,O,0,0,1),a.M(w,w,[-M*O,-z*O,0])}else{if(!t.canonical.isChildOf(p.canonical))continue;{const I=t.canonical.z-p.canonical.z,M=t.canonical.x-(t.canonical.x>>I<<I),z=t.canonical.y-(t.canonical.y>>I<<I),O=a.$>>I;a.bX(w,0,a.$,a.$,0,0,1),a.M(w,w,[M*O,z*O,0]),a.N(w,w,[1/2**I,1/2**I,0])}}_.terrainRttPosMatrix32f=new Float32Array(w),o[m]=_}return o}_getTerrainCoordsForTileRanges(t,o){const m={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID;if(!this._isWithinTileRanges(_,o))continue;const w=t.clone(),I=a.b9();if(_.canonical.z===t.canonical.z){const M=t.canonical.x-_.canonical.x,z=t.canonical.y-_.canonical.y;a.bX(I,0,a.$,a.$,0,0,1),a.M(I,I,[M*a.$,z*a.$,0])}else if(_.canonical.z>t.canonical.z){const M=_.canonical.z-t.canonical.z,z=_.canonical.x-(_.canonical.x>>M<<M),O=_.canonical.y-(_.canonical.y>>M<<M),G=t.canonical.x-(_.canonical.x>>M),U=t.canonical.y-(_.canonical.y>>M),Z=a.$>>M;a.bX(I,0,Z,Z,0,0,1),a.M(I,I,[-z*Z+G*a.$,-O*Z+U*a.$,0])}else{const M=t.canonical.z-_.canonical.z,z=t.canonical.x-(t.canonical.x>>M<<M),O=t.canonical.y-(t.canonical.y>>M<<M),G=(t.canonical.x>>M)-_.canonical.x,U=(t.canonical.y>>M)-_.canonical.y,Z=a.$<<M;a.bX(I,0,Z,Z,0,0,1),a.M(I,I,[z*a.$+G*Z,O*a.$+U*Z,0])}w.terrainRttPosMatrix32f=new Float32Array(I),m[p]=w}return m}getSourceTile(t,o){const m=this.sourceCache._source;let p=t.overscaledZ-this.deltaZoom;if(p>m.maxzoom&&(p=m.maxzoom),p<m.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(p).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!_||!_.dem)&&o)for(;p>=m.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(t.scaledTo(p--).key);return _}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,o){return o[t.canonical.z]&&t.canonical.x>=o[t.canonical.z].minTileX&&t.canonical.x<=o[t.canonical.z].maxTileX&&t.canonical.y>=o[t.canonical.z].minTileY&&t.canonical.y<=o[t.canonical.z].maxTileY}}class Za{constructor(t,o,m){this._meshCache={},this.painter=t,this.sourceCache=new Fv(o),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,o,m,p=a.$){var _;if(!(o>=0&&o<p&&m>=0&&m<p))return 0;const w=this.getTerrainData(t),I=(_=w.tile)===null||_===void 0?void 0:_.dem;if(!I)return 0;const M=a.cr([],[o/p*a.$,m/p*a.$],w.u_terrain_matrix),z=[M[0]*I.dim,M[1]*I.dim],O=Math.floor(z[0]),G=Math.floor(z[1]),U=z[0]-O,Z=z[1]-G;return I.get(O,G)*(1-U)*(1-Z)+I.get(O+1,G)*U*(1-Z)+I.get(O,G+1)*(1-U)*Z+I.get(O+1,G+1)*U*Z}getElevationForLngLatZoom(t,o){if(!a.cs(o,t.wrap()))return 0;const{tileID:m,mercatorX:p,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(t,o);return this.getElevation(m,p%a.$,_%a.$,a.$)}getElevation(t,o,m,p=a.$){return this.getDEMElevation(t,o,m,p)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const p=this.painter.context,_=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(p,_,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(p,new a.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.af([])}const o=this.sourceCache.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const p=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new a.T(p,o.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),o.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const m=o&&o+o.tileID.key+t.key;if(m&&!this._demMatrixCache[m]){const p=this.sourceCache.sourceCache._source.maxzoom;let _=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=p?_=t.canonical.z-p:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=t.canonical.x-(t.canonical.x>>_<<_),I=t.canonical.y-(t.canonical.y>>_<<_),M=a.ct(new Float64Array(16),[1/(a.$<<_),1/(a.$<<_),0]);a.M(M,M,[w*a.$,I*a.$,0]),this._demMatrixCache[t.key]={matrix:M,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(t){const o=this.painter,m=o.width/devicePixelRatio,p=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(o.context,{width:m,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(o.context,{width:m,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(m,p,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,m,p))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,w=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,w+=4)o[w+0]=255&I,o[w+1]=255&_,o[w+2]=I>>8<<4|_>>8,o[w+3]=0;const m=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),p=new a.T(t,m,t.gl.RGBA,{premultiply:!1});return p.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),m=this.painter.context,p=m.gl,_=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(_,I-w-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null);const M=o[0]+(o[2]>>4<<8),z=o[1]+((15&o[2])<<8),O=this.coordsIndex[255-o[3]],G=O&&this.sourceCache.getTileByID(O);if(!G)return null;const U=this._coordsTextureSize,Z=(1<<G.tileID.canonical.z)*U;return new a.a0((G.tileID.canonical.x*U+M)/Z+G.tileID.wrap,(G.tileID.canonical.y*U+z)/Z,this.getElevation(G.tileID,M,z,U))}depthAtPoint(t){const o=new Uint8Array(4),m=this.painter.context,p=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(t){var o;const m=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,p=m&&t.canonical.y===0,_=m&&t.canonical.y===(1<<t.canonical.z)-1,w=`m_${p?"n":""}_${_?"s":""}`;if(this._meshCache[w])return this._meshCache[w];const I=this.painter.context,M=new a.cu,z=new a.aM,O=this.meshSize,G=a.$/O,U=O*O;for(let Te=0;Te<=O;Te++)for(let qe=0;qe<=O;qe++)M.emplaceBack(qe*G,Te*G,0);for(let Te=0;Te<U;Te+=O+1)for(let qe=0;qe<O;qe++)z.emplaceBack(qe+Te,O+qe+Te+1,O+qe+Te+2),z.emplaceBack(qe+Te,O+qe+Te+2,qe+Te+1);const Z=M.length,ne=Z+(O+1),_e=(O+1)*O,ge=p?a.bg:0,ye=p?0:1,we=_?a.bh:a.$,Ie=_?0:1;for(let Te=0;Te<=O;Te++)M.emplaceBack(Te*G,ge,ye);for(let Te=0;Te<=O;Te++)M.emplaceBack(Te*G,we,Ie);for(let Te=0;Te<O;Te++)z.emplaceBack(_e+Te,ne+Te,ne+Te+1),z.emplaceBack(_e+Te,ne+Te+1,_e+Te+1),z.emplaceBack(0+Te,Z+Te+1,Z+Te),z.emplaceBack(0+Te,0+Te+1,Z+Te+1);const Ce=M.length,Re=Ce+2*(O+1);for(const Te of[0,1])for(let qe=0;qe<=O;qe++)for(const st of[0,1])M.emplaceBack(Te*a.$,qe*G,st);for(let Te=0;Te<2*O;Te+=2)z.emplaceBack(Ce+Te,Ce+Te+1,Ce+Te+3),z.emplaceBack(Ce+Te,Ce+Te+3,Ce+Te+2),z.emplaceBack(Re+Te,Re+Te+3,Re+Te+1),z.emplaceBack(Re+Te,Re+Te+2,Re+Te+3);const Oe=new is(I.createVertexBuffer(M,pp.members),I.createIndexBuffer(z),a.aL.simpleSegment(0,0,M.length,z.length));return this._meshCache[w]=Oe,Oe}getMeshFrameDelta(t){return 2*Math.PI*a.bt/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,o){var m;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(t,o);return(m=this.getMinMaxElevation(p).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,m={minElevation:null,maxElevation:null};return o&&o.dem&&(m.minElevation=o.dem.min*this.exaggeration,m.maxElevation=o.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(t,o){const m=a.a0.fromLngLat(t.wrap()),p=(1<<o)*a.$,_=m.x*p,w=m.y*p,I=Math.floor(_/a.$),M=Math.floor(w/a.$);return{tileID:new a.Z(o,0,o,I,M),mercatorX:_,mercatorY:w}}}class Nc{constructor(t,o,m){this._context=t,this._size=o,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(m.texture),{id:t,fbo:o,texture:m,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>t.id!==o),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}const en={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class hn{constructor(t,o){this.painter=t,this.terrain=o,this.pool=new Nc(t.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(m=>!t._layers[m].isHidden(o)),this._coordsAscending={};for(const m in t.sourceCaches){this._coordsAscending[m]={};const p=t.sourceCaches[m].getVisibleCoordinates(),_=t.sourceCaches[m].getSource(),w=_ instanceof dt?_.terrainTileRanges:null;for(const I of p){const M=this.terrain.sourceCache.getTerrainCoords(I,w);for(const z in M)this._coordsAscending[m][z]||(this._coordsAscending[m][z]=[]),this._coordsAscending[m][z].push(M[z])}}this._coordsAscendingStr={};for(const m of t._order){const p=t._layers[m],_=p.source;if(en[p.type]&&!this._coordsAscendingStr[_]){this._coordsAscendingStr[_]={};for(const w in this._coordsAscending[_])this._coordsAscendingStr[_][w]=this._coordsAscending[_][w].map(I=>I.key).sort().join()}}for(const m of this._renderableTiles)for(const p in this._coordsAscendingStr){const _=this._coordsAscendingStr[p][m.tileID.key];_&&_!==m.rttCoords[p]&&(m.rtt=[])}}renderLayer(t,o){if(t.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),p=t.type,_=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(en[p]&&(this._prevType&&en[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(t.id),!w))return!0;if(en[this._prevType]||en[p]&&w){this._prevType=p;const I=this._stacks.length-1,M=this._stacks[I]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(Ai(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[I]){const G=this.pool.getObjectForId(z.rtt[I].id);if(G.stamp===z.rtt[I].stamp){this.pool.useObject(G);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),z.rtt[I]={id:O.id,stamp:O.stamp},_.context.bindFramebuffer.set(O.fbo.framebuffer),_.context.clear({color:a.be.transparent,stencil:0}),_.currentStencilSource=void 0;for(let G=0;G<M.length;G++){const U=_.style._layers[M[G]],Z=U.source?this._coordsAscending[U.source][z.tileID.key]:[z.tileID];_.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),_._renderTileClippingMasks(U,Z,!0),_.renderLayer(_,_.style.sourceCaches[U.source],U,Z,m),U.source&&(z.rttCoords[U.source]=this._coordsAscendingStr[U.source][z.tileID.key])}}return Ai(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),en[p]}return!1}}const Uc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Uh=b,cu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:uu,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Nr={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class gp{constructor(t,o,m=!1){this.mousedown=_=>{this.startMove(_,P.mousePos(this.element,_)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=_=>{this.move(_,P.mousePos(this.element,_))},this.mouseup=_=>{this._rotatePitchHanlder.dragEnd(_),this.offTemp()},this.touchstart=_=>{_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,_.targetTouches)[0],this.startMove(_,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=_=>{_.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,_.targetTouches)[0],this.move(_,this._lastPos))},this.touchend=_=>{_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const p=new Lv;this._rotatePitchHanlder=new tl({clickTolerance:3,move:(_,w)=>{const I=o.getBoundingClientRect(),M=new a.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:a.cm(new a.P(_.x,w.y),w,M),pitchDelta:m?-.5*(w.y-_.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=t,P.addEventListener(o,"mousedown",this.mousedown),P.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(o,"touchcancel",this.reset)}startMove(t,o){this._rotatePitchHanlder.dragStart(t,o),P.disableDrag()}move(t,o){const m=this.map,{bearingDelta:p,pitchDelta:_}=this._rotatePitchHanlder.dragMove(t,o)||{};p&&m.setBearing(m.getBearing()+p),_&&m.setPitch(m.getPitch()+_)}off(){const t=this.element;P.removeEventListener(t,"mousedown",this.mousedown),P.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let gr;function vp(v,t,o,m=!1){if(m||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return v==null?void 0:v.wrap();const p=new a.S(v.lng,v.lat);if(v=new a.S(v.lng,v.lat),t){const _=new a.S(v.lng-360,v.lat),w=new a.S(v.lng+360,v.lat),I=o.locationToScreenPoint(v).distSqr(t);o.locationToScreenPoint(_).distSqr(t)<I?v=_:o.locationToScreenPoint(w).distSqr(t)<I&&(v=w)}for(;Math.abs(v.lng-o.center.lng)>180;){const _=o.locationToScreenPoint(v);if(_.x>=0&&_.y>=0&&_.x<=o.width&&_.y<=o.height)break;v.lng>o.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(v))?v:p}const oo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wi(v,t,o){const m=v.classList;for(const p in oo)m.remove(`maplibregl-${o}-anchor-${p}`);m.add(`maplibregl-${o}-anchor-${t}`)}class Ei extends a.E{constructor(t){if(super(),this._onKeyPress=o=>{const m=o.code,p=o.charCode||o.keyCode;m!=="Space"&&m!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=o=>{const m=o.originalEvent.target,p=this._element;this._popup&&(m===p||p.contains(m))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=vp(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${oo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${p}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=a.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const o=P.createNS("http://www.w3.org/2000/svg","svg"),m=41,p=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${m}px`),o.setAttributeNS(null,"width",`${p}px`),o.setAttributeNS(null,"viewBox",`0 0 ${p} ${m}`);const _=P.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const w=P.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const I=P.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of M){const we=P.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",ye.rx),we.setAttributeNS(null,"ry",ye.ry),I.appendChild(we)}const z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const O=P.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(O);const G=P.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const U=P.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(U);const Z=P.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const ne=P.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _e=P.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");const ge=P.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ne.appendChild(_e),ne.appendChild(ge),w.appendChild(I),w.appendChild(z),w.appendChild(G),w.appendChild(Z),w.appendChild(ne),o.appendChild(w),o.setAttributeNS(null,"height",m*this._scale+"px"),o.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(o),this._offset=a.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),wi(this._element,this._anchor,"marker"),t&&t.className)for(const o of t.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=a.S.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const p=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var o,m;const p=(o=this._map)===null||o===void 0?void 0:o.terrain,_=this._map.transform.isLocationOccluded(this._lngLat);if(!p||_){const Z=_?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Z&&(this._element.style.opacity=Z))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,I=w.terrain.depthAtPoint(this._pos),M=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,M)-I<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/w.transform.pixelsPerMeter,O=Math.sin(w.getPitch()*Math.PI/180)*z,G=w.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),U=w.transform.lngLatToCameraDepth(this._lngLat,M+O)-G>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&U&&this._popup.remove(),this._element.style.opacity=U?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=a.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,o){return(this._opacity===void 0||t===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const _p={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let As=0,Es=!1;const Gh={maxWidth:100,unit:"metric"};function Gc(v,t,o){const m=o&&o.maxWidth||100,p=v._container.clientHeight/2,_=v._container.clientWidth/2,w=v.unproject([_-m/2,p]),I=v.unproject([_+m/2,p]),M=Math.round(v.project(I).x-v.project(w).x),z=Math.min(m,M,v._container.clientWidth),O=w.distanceTo(I);if(o&&o.unit==="imperial"){const G=3.2808*O;G>5280?lo(t,z,G/5280,v._getUIString("ScaleControl.Miles")):lo(t,z,G,v._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?lo(t,z,O/1852,v._getUIString("ScaleControl.NauticalMiles")):O>=1e3?lo(t,z,O/1e3,v._getUIString("ScaleControl.Kilometers")):lo(t,z,O,v._getUIString("ScaleControl.Meters"))}function lo(v,t,o,m){const p=function(_){const w=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/w;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(M){const z=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*z)/z}(I),w*I}(o);v.style.width=t*(p/o)+"px",v.innerHTML=`${p}&nbsp;${m}`}const du={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},qh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function qc(v){if(v){if(typeof v=="number"){const t=Math.round(Math.abs(v)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,v),"top-left":new a.P(t,t),"top-right":new a.P(-t,t),bottom:new a.P(0,-v),"bottom-left":new a.P(t,-t),"bottom-right":new a.P(-t,-t),left:new a.P(v,0),right:new a.P(-v,0)}}if(v instanceof a.P||Array.isArray(v)){const t=a.P.convert(v);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:a.P.convert(v.center||[0,0]),top:a.P.convert(v.top||[0,0]),"top-left":a.P.convert(v["top-left"]||[0,0]),"top-right":a.P.convert(v["top-right"]||[0,0]),bottom:a.P.convert(v.bottom||[0,0]),"bottom-left":a.P.convert(v["bottom-left"]||[0,0]),"bottom-right":a.P.convert(v["bottom-right"]||[0,0]),left:a.P.convert(v.left||[0,0]),right:a.P.convert(v.right||[0,0])}}return qc(new a.P(0,0))}const Hh=b;d.AJAXError=a.cy,d.Event=a.l,d.Evented=a.E,d.LngLat=a.S,d.MercatorCoordinate=a.a0,d.Point=a.P,d.addProtocol=a.cz,d.config=a.a,d.removeProtocol=a.cA,d.AttributionControl=jc,d.BoxZoomHandler=Rh,d.CanvasSource=At,d.CooperativeGesturesHandler=fp,d.DoubleClickZoomHandler=Fc,d.DragPanHandler=Fh,d.DragRotateHandler=$c,d.EdgeInsets=ba,d.FullscreenControl=class extends a.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var t;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=o==null?void 0:o.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=It,d.GeolocateControl=class extends a.E{constructor(v){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const o=new a.S(t.coords.longitude,t.coords.latitude),m=t.coords.accuracy,p=this._map.getBearing(),_=a.e({bearing:p},this.options.fitBoundsOptions),w=de.fromLngLat(o,m);this._map.fitBounds(w,_,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const o=new a.S(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Es)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ei({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ei({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},_p,v)}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(t=!1){if(gr!==void 0&&!t)return gr;if(window.navigator.permissions===void 0)return gr=!!window.navigator.geolocation,gr;try{gr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{gr=!!window.navigator.geolocation}return gr})}().then(t=>this._finishSetupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,As=0,Es=!1}_isOutOfMapMaxBounds(v){const t=this._map.getMaxBounds(),o=v.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),t=v.getSouthEast(),o=v.getNorthEast(),m=t.distanceTo(o),p=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":As--,Es=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),As++,As>1?(v={maximumAge:6e5,timeout:0},Es=!0):(v=this.options.positionOptions,Es=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const t=(v=this._map.getProjection())===null||v===void 0?void 0:v.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((v=this._map.getProjection())===null||v===void 0?void 0:v.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},d.Hash=iu,d.ImageSource=dt,d.KeyboardHandler=rl,d.LngLatBounds=de,d.LogoControl=Nh,d.Map=class extends mi{constructor(v){var t,o;a.cv.mark(a.cw.create);const m=Object.assign(Object.assign(Object.assign({},cu),v),{canvasContextAttributes:Object.assign(Object.assign({},cu.canvasContextAttributes),v.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new Gi,_=new mc;if(m.minZoom!==void 0&&p.setMinZoom(m.minZoom),m.maxZoom!==void 0&&p.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&p.setMinPitch(m.minPitch),m.maxPitch!==void 0&&p.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&p.setRenderWorldCopies(m.renderWorldCopies),super(p,_,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new mp,this._controls=[],this._mapId=a.a6(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Uc),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this.transformCameraUpdate=m.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new ee(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const M=Lc(z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())},50);this._resizeObserver=new ResizeObserver(z=>{I?M(z):I=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Is(this,m),this._hash=m.hash&&new iu(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,a.e({},m.fitBoundsOptions,{duration:0}))));const w=typeof m.style=="string"||((o=(t=m.style)===null||t===void 0?void 0:t.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new jc(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new Nh,m.logoPosition),this.on("style.load",()=>{if(w||this._resizeTransform(),this.transform.unmodified){const I=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new a.l(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new a.l(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new a.l("sourcedataabort",I))})}_getMapId(){return this._mapId}setGlobalStateProperty(v,t){return this.style.setGlobalStateProperty(v,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(v,t){if(t===void 0&&(t=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=v.onAdd(this);this._controls.push(v);const m=this._controlPositions[t];return t.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(v);return t>-1&&this._controls.splice(t,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,t,o,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,t,o,m)}resize(v,t=!0){const[o,m]=this._containerDimensions(),p=this._getClampedPixelRatio(o,m);if(this._resizeCanvas(o,m,p),this.painter.resize(o,m,p),this.painter.overLimit()){const w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];const I=this._getClampedPixelRatio(o,m);this._resizeCanvas(o,m,I),this.painter.resize(o,m,I)}this._resizeTransform(t);const _=!this._moving;return _&&(this.stop(),this.fire(new a.l("movestart",v)).fire(new a.l("move",v))),this.fire(new a.l("resize",v)),_&&this.fire(new a.l("moveend",v)),this}_resizeTransform(v=!0){var t;const[o,m]=this._containerDimensions();this.transform.resize(o,m,v),(t=this._requestedCameraState)===null||t===void 0||t.resize(o,m,v)}_getClampedPixelRatio(v,t){const{0:o,1:m}=this._maxCanvasSize,p=this.getPixelRatio(),_=v*p,w=t*p;return Math.min(_>o?o/_:1,w>m?m/w:1)*p}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(de.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.setMinZoom(v),this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.setMaxZoom(v),this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}project(v){return this.transform.locationToScreenPoint(a.S.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(a.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,t,o){if(v==="mouseenter"||v==="mouseover"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:_=>{const w=t.filter(M=>this.getLayer(M)),I=w.length!==0?this.queryRenderedFeatures(_.point,{layers:w}):[];I.length?m||(m=!0,o.call(this,new Yr(v,this,_.originalEvent,{features:I}))):m=!1},mouseout:()=>{m=!1}}}}if(v==="mouseleave"||v==="mouseout"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:w=>{const I=t.filter(M=>this.getLayer(M));(I.length!==0?this.queryRenderedFeatures(w.point,{layers:I}):[]).length?m=!0:m&&(m=!1,o.call(this,new Yr(v,this,w.originalEvent)))},mouseout:w=>{m&&(m=!1,o.call(this,new Yr(v,this,w.originalEvent)))}}}}{const m=p=>{const _=t.filter(I=>this.getLayer(I)),w=_.length!==0?this.queryRenderedFeatures(p.point,{layers:_}):[];w.length&&(p.features=w,o.call(this,p),delete p.features)};return{layers:t,listener:o,delegates:{[v]:m}}}}_saveDelegatedListener(v,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(t)}_removeDelegatedListener(v,t,o){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const m=this._delegatedListeners[v];for(let p=0;p<m.length;p++){const _=m[p];if(_.listener===o&&_.layers.length===t.length&&_.layers.every(w=>t.includes(w))){for(const w in _.delegates)this.off(w,_.delegates[w]);return void m.splice(p,1)}}}on(v,t,o){if(o===void 0)return super.on(v,t);const m=typeof t=="string"?[t]:t,p=this._createDelegatedListener(v,m,o);this._saveDelegatedListener(v,p);for(const _ in p.delegates)this.on(_,p.delegates[_]);return{unsubscribe:()=>{this._removeDelegatedListener(v,m,o)}}}once(v,t,o){if(o===void 0)return super.once(v,t);const m=typeof t=="string"?[t]:t,p=this._createDelegatedListener(v,m,o);for(const _ in p.delegates){const w=p.delegates[_];p.delegates[_]=(...I)=>{this._removeDelegatedListener(v,m,o),w(...I)}}this._saveDelegatedListener(v,p);for(const _ in p.delegates)this.once(_,p.delegates[_]);return this}off(v,t,o){return o===void 0?super.off(v,t):(this._removeDelegatedListener(v,typeof t=="string"?[t]:t,o),this)}queryRenderedFeatures(v,t){if(!this.style)return[];let o;const m=v instanceof a.P||Array.isArray(v),p=m?v:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(m?{}:v)||{},p instanceof a.P||typeof p[0]=="number")o=[a.P.convert(p)];else{const _=a.P.convert(p[0]),w=a.P.convert(p[1]);o=[_,new a.P(w.x,_.y),w,new a.P(_.x,w.y),_]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(v,t){return this.style.querySourceFeatures(v,t)}setStyle(v,t){return(t=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(v,t))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const t=this._locale[v];if(t==null)throw new Error(`Missing UI string '${v}'`);return t}_updateStyle(v,t){var o,m;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,t));const p=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new ch(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,t,p):this.style.loadJSON(v,t,p),this):((m=(o=this.style)===null||o===void 0?void 0:o.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ch(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,t){if(typeof v=="string"){const o=this._requestManager.transformRequest(v,"Style");a.j(o,new AbortController).then(m=>{this._updateDiff(m.data,t)}).catch(m=>{m&&this.fire(new a.k(m))})}else typeof v=="object"&&this._updateDiff(v,t)}_updateDiff(v,t){try{this.style.setState(v,t)&&this._update(!0)}catch(o){a.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(v,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(v,t){return this._lazyInitEmptyStyle(),this.style.addSource(v,t),this._update(!0)}isSourceLoaded(v){const t=this.style&&this.style.sourceCaches[v];if(t!==void 0)return t.loaded();this.fire(new a.k(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const t=this.style.sourceCaches[v.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&t.reload();for(const o in this.style._layers){const m=this.style._layers[o];m.type==="hillshade"&&m.source===v.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===v.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Za(this.painter,t,v),this.painter.renderToTexture=new hn(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var m;o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=o.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:v})),this}getTerrain(){var v,t;return(t=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const t in v){const o=v[t]._tiles;for(const m in o){const p=o[m];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,t,o){if(o){const m=this.getSource(o);if(!m)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);m.calculateTileZoom=at(Math.max(1,v),Math.max(1,t))}else for(const m in this.style.sourceCaches)this.style.sourceCaches[m].getSource().calculateTileZoom=at(Math.max(1,v),Math.max(1,t));return this._update(!0),this}refreshTiles(v,t){const o=this.style.sourceCaches[v];if(!o)throw new Error(`There is no source cache with ID "${v}", cannot refresh tile`);t===void 0?o.reload(!0):o.refreshTiles(t.map(m=>new a.a3(m.z,m.x,m.y)))}addImage(v,t,o={}){const{pixelRatio:m=1,sdf:p=!1,stretchX:_,stretchY:w,content:I,textFitWidth:M,textFitHeight:z}=o;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||a.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:G,data:U}=t,Z=t;return this.style.addImage(v,{data:new a.R({width:O,height:G},new Uint8Array(U)),pixelRatio:m,stretchX:_,stretchY:w,content:I,textFitWidth:M,textFitHeight:z,sdf:p,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,v),this}}{const{width:O,height:G,data:U}=A.getImageData(t);this.style.addImage(v,{data:new a.R({width:O,height:G},U),pixelRatio:m,stretchX:_,stretchY:w,content:I,textFitWidth:M,textFitHeight:z,sdf:p,version:0})}}updateImage(v,t){const o=this.style.getImage(v);if(!o)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=t instanceof HTMLImageElement||a.b(t)?A.getImageData(t):t,{width:p,height:_,data:w}=m;if(p===void 0||_===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==o.data.width||_!==o.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(t instanceof HTMLImageElement||a.b(t));return o.data.replace(w,I),this.style.updateImage(v,o),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return H.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,t){return this._lazyInitEmptyStyle(),this.style.addLayer(v,t),this._update(!0)}moveLayer(v,t){return this.style.moveLayer(v,t),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,t,o){return this.style.setLayerZoomRange(v,t,o),this._update(!0)}setFilter(v,t,o={}){return this.style.setFilter(v,t,o),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,t,o,m={}){return this.style.setPaintProperty(v,t,o,m),this._update(!0)}getPaintProperty(v,t){return this.style.getPaintProperty(v,t)}setLayoutProperty(v,t,o,m={}){return this.style.setLayoutProperty(v,t,o,m),this._update(!0)}getLayoutProperty(v,t){return this.style.getLayoutProperty(v,t)}setGlyphs(v,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,t,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,t,o,m=>{m||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,t,o=>{o||this._update(!0)}),this}setLight(v,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,t){return this.style.setFeatureState(v,t),this._update()}removeFeatureState(v,t){return this.style.removeFeatureState(v,t),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,t=0;return this._container&&(v=this._container.clientWidth||400,t=this._container.clientHeight||300),[v,t]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const t=this._canvasContainer=P.create("div","maplibregl-canvas-container",v);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),m=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],m);const p=this._controlContainer=P.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{_[w]=P.create("div",`maplibregl-ctrl-${w} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,t,o){this._canvas.width=Math.floor(o*v),this._canvas.height=Math.floor(o*t),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{t={requestedAttributes:v},m&&(t.statusMessage=m.statusMessage,t.type=m.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!o){const m="Failed to initialize WebGL";throw t?(t.message=m,new Error(JSON.stringify(t))):new Error(m)}this.painter=new Sa(o,this.transform),R.testSupport(o)}migrateProjection(v,t){super.migrateProjection(v,t),this.painter.transform=v,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var t,o,m,p,_;const w=this._idleTriggered?this._fadeDuration:0,I=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,U=A.now();this.style.zoomHistory.update(G,U);const Z=new a.F(G,{now:U,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ne=Z.crossFadingFactor();ne===1&&ne===this._crossFadingFactor||(M=!0,this._crossFadingFactor=ne),this.style.update(Z)}const z=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==I;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(_=this.style.projection)===null||_===void 0?void 0:_.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cv.mark(a.cw.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,a.cv.mark(a.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cv.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frame(this._frameRequest,v=>{a.cv.frame(v),this._frameRequest=null;try{this._render(v)}catch(t){if(!a.cx(t)&&!function(o){return o.message===Ch}(t))throw t}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Uh}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},d.MapMouseEvent=Yr,d.MapTouchEvent=Aa,d.MapWheelEvent=Dh,d.Marker=Ei,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const t=this._map.getZoom(),o=t===this._map.getMaxZoom(),m=t===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,o)=>{const m=this._map._getUIString(`NavigationControl.${o}`);t.title=m,t.setAttribute("aria-label",m)},this.options=a.e({},Nr,v),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,t){const o=P.create("button",v,this._container);return o.type="button",o.addEventListener("click",t),o}},d.Popup=class extends a.E{constructor(v){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=vp(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const o=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const p=qc(this.options.offset);if(!m){const w=this._container.offsetWidth,I=this._container.offsetHeight;let M;M=o.y+p.bottom.y<I?["top"]:o.y>this._map.transform.height-I?["bottom"]:[],o.x<w/2?M.push("left"):o.x>this._map.transform.width-w/2&&M.push("right"),m=M.length===0?"bottom":M.join("-")}let _=o.add(p[m]);this.options.subpixelPositioning||(_=_.round()),P.setTransform(this._container,`${oo[m]} translate(${_.x}px,${_.y}px)`),wi(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(du),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=a.S.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const t=document.createDocumentFragment(),o=document.createElement("body");let m;for(o.innerHTML=v;m=o.firstChild,m;)t.appendChild(m);return this.setDOMContent(t)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(qh);v&&v.focus()}},d.RasterDEMTileSource=et,d.RasterTileSource=ct,d.ScaleControl=class{constructor(v){this._onMove=()=>{Gc(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Gc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Gh),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=hp,d.Style=ch,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Vh,d.TwoFingersTouchRotateHandler=zh,d.TwoFingersTouchZoomHandler=Wa,d.TwoFingersTouchZoomRotateHandler=$h,d.VectorTileSource=Ye,d.VideoSource=Lt,d.addSourceType=(v,t)=>a._(void 0,void 0,void 0,function*(){if(Wt(v))throw new Error(`A source type called "${v}" already exists.`);((o,m)=>{sn[o]=m})(v,t)}),d.clearPrewarmedResources=function(){const v=tt;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Ve),tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.createTileMesh=oh,d.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return Dn().getRTLTextPluginStatus()},d.getVersion=function(){return Hh},d.getWorkerCount=function(){return Se.workerCount},d.getWorkerUrl=function(){return a.a.WORKER_URL},d.importScriptInWorkers=function(v){return Le().broadcast("IS",v)},d.prewarm=function(){kt().acquire(Ve)},d.setMaxParallelImageRequests=function(v){a.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,t){return Dn().setRTLTextPlugin(v,t)},d.setWorkerCount=function(v){Se.workerCount=v},d.setWorkerUrl=function(v){a.a.WORKER_URL=v}});var f=r;return f})}(sg)),sg.exports}var DN=MN();const yk=CI(DN);function RN(e){const n=JSON.parse(localStorage.getItem("pendingRides")||"[]");n.push(e),localStorage.setItem("pendingRides",JSON.stringify(n))}const LN={__name:"NewRidePage",setup(e){const n=Xe(""),r=Xe(""),s=Xe(""),c=Xe(""),f=Xe(!1),d=Xe(null);let a=null;gi(()=>{const S=new yk.Map({container:d.value,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[10.4515,51.1657],zoom:6});S.on("click",function(T){n.value=T.lngLat.lat,r.value=T.lngLat.lng,a?a.setLngLat([T.lngLat.lng,T.lngLat.lat]):a=new yk.Marker().setLngLat([T.lngLat.lng,T.lngLat.lat]).addTo(S)})});const b=async()=>{c.value="",f.value=!1;const{data:{user:S}}=await Rn.auth.getUser();if(!S){c.value="Nicht eingeloggt.";return}if(!n.value||!r.value){c.value="Bitte whle einen Startpunkt auf der Karte.";return}if(!s.value||parseInt(s.value,10)<=1){c.value="Bitte gib mindestens 2 Kilometer ein.";return}const T=`SRID=4326;POINT(${r.value} ${n.value})`,A={user_id:S.id,km:parseInt(s.value,10),StartPoint:T};if(navigator.onLine){const{error:P}=await Rn.from("rides").insert(A);P?c.value=P.message:(f.value=!0,k())}else RN(A)},k=()=>{n.value="",r.value="",s.value="",a&&(a.remove(),a=null)};return(S,T)=>{const A=Tt("v-card-title"),P=Tt("v-text-field"),R=Tt("v-col"),B=Tt("v-row"),L=Tt("v-btn"),$=Tt("v-form"),j=Tt("v-alert"),q=Tt("v-card-text"),H=Tt("v-card"),ee=Tt("v-container"),Q=Tt("v-main");return on(),Pn(Q,null,{default:Ue(()=>[F(ee,{fluid:""},{default:Ue(()=>[F(H,{class:"pa-4",elevation:"4"},{default:Ue(()=>[F(A,{class:"text-h5"},{default:Ue(()=>T[3]||(T[3]=[Ft("Neue Fahrt eintragen")])),_:1,__:[3]}),F(q,null,{default:Ue(()=>[Y("div",{ref_key:"mapContainer",ref:d,style:{height:"400px",width:"100%"},class:"mb-4"},null,512),F($,{onSubmit:wl(b,["prevent"])},{default:Ue(()=>[F(B,null,{default:Ue(()=>[F(R,{cols:"12",md:"6"},{default:Ue(()=>[F(P,{modelValue:n.value,"onUpdate:modelValue":T[0]||(T[0]=oe=>n.value=oe),label:"Startpunkt (Latitude)",type:"number",step:"any",readonly:"","prepend-inner-icon":"mdi-map-marker-latitude"},null,8,["modelValue"])]),_:1}),F(R,{cols:"12",md:"6"},{default:Ue(()=>[F(P,{modelValue:r.value,"onUpdate:modelValue":T[1]||(T[1]=oe=>r.value=oe),label:"Startpunkt (Longitude)",type:"number",step:"any",readonly:"","prepend-inner-icon":"mdi-map-marker-longitude"},null,8,["modelValue"])]),_:1})]),_:1}),F(P,{modelValue:s.value,"onUpdate:modelValue":T[2]||(T[2]=oe=>s.value=oe),label:"Kilometer",type:"number",min:"0",step:"1",required:"","prepend-inner-icon":"mdi-road-variant"},null,8,["modelValue"]),F(L,{type:"submit",color:"primary",block:"",class:"mt-3"},{default:Ue(()=>T[4]||(T[4]=[Ft("Speichern")])),_:1,__:[4]})]),_:1}),c.value?(on(),Pn(j,{key:0,type:"error",dense:"",class:"mt-4"},{default:Ue(()=>[Ft(yn(c.value),1)]),_:1})):Lr("",!0),f.value?(on(),Pn(j,{key:1,type:"success",dense:"",class:"mt-4"},{default:Ue(()=>T[5]||(T[5]=[Ft("Fahrt gespeichert!")])),_:1,__:[5]})):Lr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},zN={class:"ml-2"},VN={key:2},BN={__name:"MyTeamPage",setup(e){const n=Dl(),r=Xe(!0),s=Xe(null),c=Xe([]),f=Xe(""),d=Xe([]);async function a(){r.value=!0;const{data:{user:A}}=await Rn.auth.getUser();if(!A){r.value=!1;return}const{data:P}=await Rn.from("members").select("team_id").eq("user_id",A.id).single();if(!(P!=null&&P.team_id)){r.value=!1;return}const{data:R}=await Rn.from("teams").select("id, name").eq("id",P.team_id).single();s.value=R;const{data:B,error:L}=await Rn.functions.invoke("Get-team-Members",{body:{teamId:R.id}});L?(c.value=[],f.value=`Fehler beim Laden der Mitglieder: ${L.message||L}`):(c.value=B.members,f.value=""),r.value=!1}function b(){n.push("/teams")}function k(){n.push("/invite-member")}function S(A){const P={year:"numeric",month:"numeric",day:"numeric"};return new Date(A).toLocaleDateString("de-DE",P)}function T(A){}return gi(a),(A,P)=>{const R=Tt("v-card-title"),B=Tt("v-progress-circular"),L=Tt("v-btn"),$=Tt("v-alert"),j=Tt("v-list-item-title"),q=Tt("v-list-item-subtitle"),H=Tt("v-list-item-content"),ee=Tt("v-list-item"),Q=Tt("v-list"),oe=Tt("v-icon"),le=Tt("v-expansion-panel"),ce=Tt("v-expansion-panels"),he=Tt("v-card-text"),ve=Tt("v-card"),ie=Tt("v-container"),be=Tt("v-main");return on(),Pn(be,null,{default:Ue(()=>[F(ie,{fluid:""},{default:Ue(()=>[F(ve,{class:"pa-4",elevation:"4"},{default:Ue(()=>[s.value?(on(),Pn(R,{key:0,class:"text-h5"},{default:Ue(()=>[P[0]||(P[0]=Ft(" Dein Team: ")),Y("strong",zN,yn(s.value.name),1)]),_:1,__:[0]})):(on(),Pn(R,{key:1,class:"text-h5"},{default:Ue(()=>P[1]||(P[1]=[Ft(" Mein Team ")])),_:1,__:[1]})),F(he,null,{default:Ue(()=>[r.value?(on(),Pn(B,{key:0,indeterminate:"",color:"primary"})):s.value?(on(),hr("div",VN,[P[7]||(P[7]=Y("h3",{class:"text-h6 mb-2"},"Mitglieder",-1)),f.value?(on(),Pn($,{key:0,type:"error",dense:"",border:"start",class:"mb-4"},{default:Ue(()=>[Ft(yn(f.value),1)]),_:1})):Lr("",!0),F(Q,{dense:""},{default:Ue(()=>[(on(!0),hr(Ht,null,Dd(c.value,Be=>(on(),Pn(ee,{key:Be.user_id},{default:Ue(()=>[F(H,null,{default:Ue(()=>[F(j,null,{default:Ue(()=>{var De;return[Ft(yn(((De=Be.profiles)==null?void 0:De.username)||"-"),1)]}),_:2},1024),F(q,null,{default:Ue(()=>[Ft("User-ID: "+yn(Be.user_id),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),F(L,{color:"primary",class:"mt-4",onClick:k},{default:Ue(()=>P[4]||(P[4]=[Ft("Mitglied einladen")])),_:1,__:[4]}),F(ce,{class:"mt-4"},{default:Ue(()=>[F(le,{title:"Letzte Fahrten"},{default:Ue(()=>[F(Q,null,{default:Ue(()=>[(on(!0),hr(Ht,null,Dd(d.value,Be=>(on(),Pn(ee,{key:Be.id},{prepend:Ue(()=>[F(oe,null,{default:Ue(()=>P[5]||(P[5]=[Ft("mdi-bike")])),_:1,__:[5]})]),append:Ue(()=>[F(L,{icon:"",size:"small",onClick:De=>void 0},{default:Ue(()=>[F(oe,null,{default:Ue(()=>P[6]||(P[6]=[Ft("mdi-pencil")])),_:1,__:[6]})]),_:2},1032,["onClick"])]),default:Ue(()=>[F(j,null,{default:Ue(()=>[Ft(yn(Be.km)+" km",1)]),_:2},1024),F(q,null,{default:Ue(()=>[Ft(yn(S(Be.created_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):(on(),Pn($,{key:1,type:"info",border:"start",dense:""},{default:Ue(()=>[P[3]||(P[3]=Ft(" Du bist in keinem Team. ")),F(L,{color:"primary",small:"",class:"ml-4",onClick:b},{default:Ue(()=>P[2]||(P[2]=[Ft("Zu den Teams")])),_:1,__:[2]})]),_:1,__:[3]}))]),_:1})]),_:1})]),_:1})]),_:1})}}},ON={key:1},FN={key:2},$N={key:3},jN={class:"text-h6 mb-0"},NN={class:"text-h4 font-weight-bold"},UN={class:"text-h4 font-weight-bold"},GN={class:"text-h4 font-weight-bold"},qN={class:"text-h4 font-weight-bold"},HN={class:"text-white font-weight-bold"},WN={class:"text-right"},ZN={class:"font-weight-bold"},KN={class:"text-caption text-medium-emphasis"},YN={key:1,class:"text-medium-emphasis"},XN={__name:"TeamStats",setup(e){const n=Xe(null),r=Xe([]),s=Xe([]),c=Xe(!0),f=Xe(null),d=Xe(0),a=te(()=>r.value.reduce((B,L)=>B+L.totalKm,0)),b=te(()=>r.value.reduce((B,L)=>B+L.rideCount,0)),k=te(()=>{const B=r.value.length;return B>0?Math.round(a.value/B):0}),S=te(()=>[...r.value].sort((B,L)=>L.totalKm-B.totalKm)),T=async()=>{try{c.value=!0,f.value=null;const{data:{user:B},error:L}=await Rn.auth.getUser();if(L||!B){f.value="Nicht eingeloggt.";return}const{data:$,error:j}=await Rn.from("members").select("team_id").eq("user_id",B.id).single();if(j||!$){n.value=null;return}const{data:q,error:H}=await Rn.from("teams").select(`
        id,
        name,
        members:members (
          user_id,
          profiles:profiles (username)
        )
      `).eq("id",$.team_id).single();if(H){f.value="Fehler beim Laden der Team-Daten: "+H.message;return}n.value=q;const ee=q.members.map(async ce=>{var ie,be;const{data:he,error:ve}=await Rn.from("rides").select("km").eq("user_id",ce.user_id);return ve?(console.error("Fehler beim Laden der Fahrten:",ve),{user_id:ce.user_id,username:((ie=ce.profiles)==null?void 0:ie.username)||"Unbekannt",totalKm:0,rideCount:0}):{user_id:ce.user_id,username:((be=ce.profiles)==null?void 0:be.username)||"Unbekannt",totalKm:(he==null?void 0:he.reduce((Be,De)=>Be+(De.km||0),0))||0,rideCount:(he==null?void 0:he.length)||0}});r.value=await Promise.all(ee);const Q=q.members.map(ce=>ce.user_id),{data:oe,error:le}=await Rn.from("rides").select(`
        id,
        km,
        created_at,
        profiles:profiles (username)
      `).in("user_id",Q).order("created_at",{ascending:!1}).limit(10);!le&&oe&&(s.value=oe.map(ce=>{var he;return{...ce,username:((he=ce.profiles)==null?void 0:he.username)||"Unbekannt"}})),await A($.team_id)}catch(B){f.value="Unerwarteter Fehler: "+B.message}finally{c.value=!1}},A=async B=>{try{const{data:L,error:$}=await Rn.from("teams").select(`
        id,
        members:members (
          user_id
        )
      `);if($||!L){d.value=0;return}const H=(await Promise.all(L.map(async ee=>{if(!ee.members||ee.members.length===0)return{id:ee.id,totalKm:0};const Q=ee.members.map(ce=>ce.user_id),{data:oe}=await Rn.from("rides").select("km").in("user_id",Q),le=(oe==null?void 0:oe.reduce((ce,he)=>ce+(he.km||0),0))||0;return{id:ee.id,totalKm:le}}))).sort((ee,Q)=>Q.totalKm-ee.totalKm).findIndex(ee=>ee.id===B)+1;d.value=H>0?H:0}catch(L){console.error("Fehler beim Berechnen des Team-Rangs:",L),d.value=0}},P=B=>{switch(B){case 0:return"gold";case 1:return"silver";case 2:return"orange";default:return"primary"}},R=B=>{const L=new Date(B),j=Math.floor((new Date-L)/(1e3*60*60));return j<1?"Vor wenigen Minuten":j<24?`Vor ${j} Stunden`:j<48?"Gestern":`Vor ${Math.floor(j/24)} Tagen`};return gi(T),(B,L)=>{const $=Tt("v-card-title"),j=Tt("v-alert"),q=Tt("v-progress-circular"),H=Tt("router-link"),ee=Tt("v-card-text"),Q=Tt("v-card"),oe=Tt("v-col"),le=Tt("v-row"),ce=Tt("v-icon"),he=Tt("v-avatar"),ve=Tt("v-list-item-title"),ie=Tt("v-list-item"),be=Tt("v-list"),Be=Tt("v-list-item-subtitle"),De=Tt("v-container"),Fe=Tt("v-main");return on(),Pn(Fe,null,{default:Ue(()=>[F(De,{class:"page-container",fluid:""},{default:Ue(()=>[F(Q,{class:"pa-6",elevation:"4"},{default:Ue(()=>[F($,{class:"text-h5"},{default:Ue(()=>L[0]||(L[0]=[Ft(" Team-Statistiken")])),_:1,__:[0]}),F(ee,null,{default:Ue(()=>[f.value?(on(),Pn(j,{key:0,type:"error",dense:"",class:"mb-4"},{default:Ue(()=>[Ft(yn(f.value),1)]),_:1})):c.value?(on(),hr("div",ON,[F(q,{indeterminate:"",color:"primary"}),L[1]||(L[1]=Y("span",{class:"ml-2"},"Lade Team-Statistiken...",-1))])):n.value?(on(),hr("div",$N,[F(le,{class:"mb-6"},{default:Ue(()=>[F(oe,{cols:"12"},{default:Ue(()=>[F(Q,{color:"primary",dark:""},{default:Ue(()=>[F(ee,{class:"text-center"},{default:Ue(()=>{var Ze;return[Y("h2",null,yn(n.value.name),1),Y("p",jN,yn(((Ze=n.value.members)==null?void 0:Ze.length)||0)+" Mitglieder",1)]}),_:1})]),_:1})]),_:1})]),_:1}),F(le,{class:"mb-6"},{default:Ue(()=>[F(oe,{cols:"12",md:"3"},{default:Ue(()=>[F(Q,null,{default:Ue(()=>[F(ee,{class:"text-center"},{default:Ue(()=>[F(ce,{size:"40",color:"primary",class:"mb-2"},{default:Ue(()=>L[4]||(L[4]=[Ft("mdi-map-marker-distance")])),_:1,__:[4]}),Y("div",NN,yn(a.value),1),L[5]||(L[5]=Y("div",{class:"text-caption text-medium-emphasis"},"Kilometer gesamt",-1))]),_:1,__:[5]})]),_:1})]),_:1}),F(oe,{cols:"12",md:"3"},{default:Ue(()=>[F(Q,null,{default:Ue(()=>[F(ee,{class:"text-center"},{default:Ue(()=>[F(ce,{size:"40",color:"success",class:"mb-2"},{default:Ue(()=>L[6]||(L[6]=[Ft("mdi-account-group")])),_:1,__:[6]}),Y("div",UN,yn(k.value),1),L[7]||(L[7]=Y("div",{class:"text-caption text-medium-emphasis"}," km pro Mitglied",-1))]),_:1,__:[7]})]),_:1})]),_:1}),F(oe,{cols:"12",md:"3"},{default:Ue(()=>[F(Q,null,{default:Ue(()=>[F(ee,{class:"text-center"},{default:Ue(()=>[F(ce,{size:"40",color:"warning",class:"mb-2"},{default:Ue(()=>L[8]||(L[8]=[Ft("mdi-bike")])),_:1,__:[8]}),Y("div",GN,yn(b.value),1),L[9]||(L[9]=Y("div",{class:"text-caption text-medium-emphasis"},"Fahrten gesamt",-1))]),_:1,__:[9]})]),_:1})]),_:1}),F(oe,{cols:"12",md:"3"},{default:Ue(()=>[F(Q,null,{default:Ue(()=>[F(ee,{class:"text-center"},{default:Ue(()=>[F(ce,{size:"40",color:"info",class:"mb-2"},{default:Ue(()=>L[10]||(L[10]=[Ft("mdi-trophy")])),_:1,__:[10]}),Y("div",qN,"#"+yn(d.value),1),L[11]||(L[11]=Y("div",{class:"text-caption text-medium-emphasis"},"Team-Rang",-1))]),_:1,__:[11]})]),_:1})]),_:1})]),_:1}),F(le,null,{default:Ue(()=>[F(oe,{cols:"12",lg:"8"},{default:Ue(()=>[F(Q,null,{default:Ue(()=>[F($,null,{default:Ue(()=>[F(ce,{class:"mr-2"},{default:Ue(()=>L[12]||(L[12]=[Ft("mdi-podium-gold")])),_:1,__:[12]}),L[13]||(L[13]=Ft(" Mitglieder-Ranking "))]),_:1,__:[13]}),F(ee,null,{default:Ue(()=>[F(be,null,{default:Ue(()=>[(on(!0),hr(Ht,null,Dd(S.value,(Ze,mt)=>(on(),Pn(ie,{key:Ze.user_id,class:"mb-2"},{prepend:Ue(()=>[F(he,{color:P(mt),size:"40"},{default:Ue(()=>[Y("span",HN,yn(mt+1),1)]),_:2},1032,["color"])]),append:Ue(()=>[Y("div",WN,[Y("div",ZN,yn(Ze.totalKm)+" km",1),Y("div",KN,yn(Ze.rideCount)+" Fahrten ",1)])]),default:Ue(()=>[F(ve,{class:"font-weight-medium"},{default:Ue(()=>[Ft(yn(Ze.username||"Unbekannt"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),F(oe,{cols:"12",lg:"4"},{default:Ue(()=>[F(Q,null,{default:Ue(()=>[F($,null,{default:Ue(()=>[F(ce,{class:"mr-2"},{default:Ue(()=>L[14]||(L[14]=[Ft("mdi-chart-line")])),_:1,__:[14]}),L[15]||(L[15]=Ft(" Letzte Aktivitten "))]),_:1,__:[15]}),F(ee,null,{default:Ue(()=>[s.value.length>0?(on(),Pn(be,{key:0,dense:""},{default:Ue(()=>[(on(!0),hr(Ht,null,Dd(s.value,Ze=>(on(),Pn(ie,{key:Ze.id,class:"mb-1"},{prepend:Ue(()=>[F(ce,{size:"20",color:"primary"},{default:Ue(()=>L[16]||(L[16]=[Ft("mdi-bike")])),_:1,__:[16]})]),default:Ue(()=>[F(ve,{class:"text-body-2"},{default:Ue(()=>[Ft(yn(Ze.username)+": "+yn(Ze.km)+" km ",1)]),_:2},1024),F(Be,{class:"text-caption"},{default:Ue(()=>[Ft(yn(R(Ze.created_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(on(),hr("p",YN," Noch keine Fahrten vorhanden. "))]),_:1})]),_:1})]),_:1})]),_:1})])):(on(),hr("div",FN,[F(j,{type:"info",dense:""},{default:Ue(()=>[L[3]||(L[3]=Ft(" Du bist in keinem Team. ")),F(H,{to:"/teams",class:"ml-2"},{default:Ue(()=>L[2]||(L[2]=[Ft("Jetzt Team beitreten")])),_:1,__:[2]})]),_:1,__:[3]})]))]),_:1})]),_:1})]),_:1})]),_:1})}}},JN=[{path:"/",component:cN},{path:"/login",component:hN},{path:"/register",component:mN},{path:"/teams",component:kN},{path:"/create-team",component:CN},{path:"/profile",component:AN},{path:"/rides/new",component:LN},{path:"/my-team",component:BN},{path:"/team-stats",component:XN},{path:"/join-team/:teamId",component:()=>Yu(()=>import("./JoinTeamPage-DQEhA01e.js"),[])},{path:"/invite-member",component:()=>Yu(()=>import("./InviteMemberPage-BunicTNL.js"),[])}],Du=J$({history:P$("/fahrrad_kilometer_tracker/"),routes:JN});Du.beforeEach(async(e,n,r)=>{if(e.path==="/"){const{data:{session:s}}=await Rn.auth.getSession();r(s?"/teams":"/login")}else r()});async function QN(){Rn.auth.onAuthStateChange((r,s)=>{(r==="SIGNED_IN"||r==="TOKEN_REFRESHED")&&Du.currentRoute.value.path==="/login"&&Du.replace("/teams"),r==="SIGNED_OUT"&&Du.replace("/login")});const{data:{session:e}}=await Rn.auth.getSession();!e&&Du.currentRoute.value.path!=="/login"&&Du.replace("/login");const n=AT({components:O5,directives:Y5,theme:{defaultTheme:"customTheme",themes:{customTheme:{dark:!1,colors:{primary:"#42b883",secondary:"#2d323c",accent:"#FF7043",error:"#e74c3c",success:"#27ae60",background:"#23272f",surface:"#2d323c"}}}}});ZD(uN).use(Du).use(n).mount("#app")}QN();export{Tt as a,Dl as b,Pn as c,on as d,F as e,Ft as f,hr as g,Y as h,Lr as i,wl as j,gi as o,Xe as r,Rn as s,yn as t,e4 as u,Ue as w};
